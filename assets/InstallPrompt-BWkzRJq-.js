import{r as t,j as s,J as a,B as p}from"./index-Do8Ydwb3.js";const f="iosInstallDismissed";function D({className:n="",buttonClassName:m="",align:o="center",forceVisible:w=!1}){const[e,l]=t.useState(null),[h,r]=t.useState(!1),[x,i]=t.useState(!1),[S,I]=t.useState(!1);t.useEffect(()=>{const d=u=>{u.preventDefault(),l(u),r(!0)};window.addEventListener("beforeinstallprompt",d);const y=/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),c=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;I(!!c);const C=localStorage.getItem(f);return!("onbeforeinstallprompt"in window)&&y&&!c&&!C&&i(!0),()=>window.removeEventListener("beforeinstallprompt",d)},[]);const j=async()=>{e&&(e.prompt(),await e.userChoice,l(null),r(!1))},v=()=>{i(!1),localStorage.setItem(f,"1")},b=!S&&h&&e||w,g=!e;return x?s.jsxs("div",{className:a("w-full rounded-2xl border bg-white/90 p-4 text-center shadow-sm space-y-2",n),children:[s.jsx("p",{className:"text-sm text-slate-700",children:'Para instalar esta app, toca el botón Compartir y luego "Añadir a pantalla de inicio".'}),s.jsx(p,{variant:"outline",onClick:v,className:"rounded-xl",children:"Cerrar"})]}):b?s.jsx("div",{className:a("w-full",o==="center"?"flex justify-center":o==="end"?"flex justify-end":"",n),children:s.jsx(p,{onClick:j,disabled:g,className:a("rounded-3xl px-6 py-3 text-white",m),children:"Instalar aplicación"})}):null}export{D as I};
