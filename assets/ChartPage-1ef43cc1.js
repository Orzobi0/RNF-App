import{r as d,j as s,M as E}from"./index-71f9831f.js";import{g as R,R as b,F as M}from"./generatePlaceholders-e6ff5082.js";import{u as j,p as y,s as u,d as x}from"./useCycleData-a0f29ea7.js";import"./fertilitySymbols-d4cb4f69.js";import"./pen-line-e19a7d86.js";import"./eye-e05aaaa7.js";import"./eye-off-0d1eb0d4.js";const k=()=>{const{currentCycle:t}=j(),[r,m]=d.useState(typeof window<"u"&&window.innerWidth>window.innerHeight?"landscape":"portrait"),[a,f]=d.useState(!1);if(d.useLayoutEffect(()=>{window.dispatchEvent(new Event("resize"))},[r,a]),!(t!=null&&t.id))return s.jsx("p",{className:"text-center text-gray-500",children:"No hay ciclo activo."});const v=28,D=10,i=y(t.startDate),h=t.data.reduce((e,o)=>{const n=y(o.isoDate);return n>e?n:e},i),p=u(new Date),S=h>p?h:p,g=x(u(S),i),c=Math.max(v,g+1),I=R(i,c).map(e=>{const o=t.data.find(n=>n.isoDate===e.isoDate);return o?{...o,date:e.date}:e}),l=r==="portrait"?D:c;let w=0;if(r!=="landscape"){const e=x(new Date,u(i)),o=Math.min(Math.max(e,0),c-1);let n=Math.min(c,o+1);o<l-1&&(n=Math.min(c,l)),w=Math.max(0,n-l)}const C=async()=>{if(a){try{await screen.orientation.unlock()}catch(e){console.error(e)}try{document.fullscreenElement&&await document.exitFullscreen()}catch(e){console.error(e)}m("portrait"),f(!1)}else try{await document.documentElement.requestFullscreen(),await screen.orientation.lock("landscape"),m("landscape"),f(!0)}catch(e){console.error(e)}};return s.jsx(E,{hideBottomNav:a,children:s.jsxs("div",{className:a?"fixed inset-0 z-50 h-[100dvh] w-[100dvw] overflow-x-auto overflow-y-auto":"relative w-full overflow-x-auto overflow-y-auto",style:a?void 0:{height:r==="landscape"?"calc(max(100dvw) - var(--bottom-nav-safe))":"calc(100dvh - var(--bottom-nav-safe))",paddingBottom:"env(safe-area-inset-bottom)"},children:[s.jsx("button",{onClick:C,className:"absolute top-4 right-4 z-10 bg-white/80 hover:bg-white text-gray-700 p-2 rounded-full shadow","aria-label":a?"Salir de pantalla completa":"Rotar gr√°fico",children:s.jsx(b,{className:"w-5 h-5"})}),s.jsx(M,{data:I,isFullScreen:a,orientation:r,cycleId:t.id,initialScrollIndex:w,visibleDays:l,reduceMotion:!0,forceLandscape:r==="landscape"})]})})};export{k as default};
