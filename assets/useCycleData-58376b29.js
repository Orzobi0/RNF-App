import{r as z,x as q,y as V,z as x,E as ue,F as Fe,G as we,H as Me,I as pe,J as tt,u as Nt,b as Wt}from"./index-ba6a3a71.js";function ce(i){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ce(i)}function Z(i){if(i===null||i===!0||i===!1)return NaN;var a=Number(i);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}function U(i,a){if(a.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+a.length+" present")}function H(i){U(1,arguments);var a=Object.prototype.toString.call(i);return i instanceof Date||ce(i)==="object"&&a==="[object Date]"?new Date(i.getTime()):typeof i=="number"||a==="[object Number]"?new Date(i):((typeof i=="string"||a==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function mt(i,a){U(2,arguments);var r=H(i),t=Z(a);return isNaN(t)?new Date(NaN):(t&&r.setDate(r.getDate()+t),r)}function Yt(i,a){U(2,arguments);var r=H(i).getTime(),t=Z(a);return new Date(r+t)}var Rt={};function be(){return Rt}function $e(i){var a=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return a.setUTCFullYear(i.getFullYear()),i.getTime()-a.getTime()}function te(i){U(1,arguments);var a=H(i);return a.setHours(0,0,0,0),a}var At=864e5;function Ht(i,a){U(2,arguments);var r=te(i),t=te(a),e=r.getTime()-$e(r),o=t.getTime()-$e(t);return Math.round((e-o)/At)}function St(i,a){U(2,arguments);var r=H(i),t=H(a),e=r.getTime()-t.getTime();return e<0?-1:e>0?1:e}var je=6e4,Qe=36e5,Lt=1e3;function qt(i){return U(1,arguments),i instanceof Date||ce(i)==="object"&&Object.prototype.toString.call(i)==="[object Date]"}function Ft(i){if(U(1,arguments),!qt(i)&&typeof i!="number")return!1;var a=H(i);return!isNaN(Number(a))}function rt(i,a){var r=i.getFullYear()-a.getFullYear()||i.getMonth()-a.getMonth()||i.getDate()-a.getDate()||i.getHours()-a.getHours()||i.getMinutes()-a.getMinutes()||i.getSeconds()-a.getSeconds()||i.getMilliseconds()-a.getMilliseconds();return r<0?-1:r>0?1:r}function jt(i,a){U(2,arguments);var r=H(i),t=H(a),e=rt(r,t),o=Math.abs(Ht(r,t));r.setDate(r.getDate()-e*o);var n=+(rt(r,t)===-e),s=e*(o-n);return s===0?0:s}function vt(i,a){U(2,arguments);var r=Z(a);return Yt(i,-r)}var Qt=864e5;function Bt(i){U(1,arguments);var a=H(i),r=a.getTime();a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0);var t=a.getTime(),e=r-t;return Math.floor(e/Qt)+1}function ge(i){U(1,arguments);var a=1,r=H(i),t=r.getUTCDay(),e=(t<a?7:0)+t-a;return r.setUTCDate(r.getUTCDate()-e),r.setUTCHours(0,0,0,0),r}function ht(i){U(1,arguments);var a=H(i),r=a.getUTCFullYear(),t=new Date(0);t.setUTCFullYear(r+1,0,4),t.setUTCHours(0,0,0,0);var e=ge(t),o=new Date(0);o.setUTCFullYear(r,0,4),o.setUTCHours(0,0,0,0);var n=ge(o);return a.getTime()>=e.getTime()?r+1:a.getTime()>=n.getTime()?r:r-1}function It(i){U(1,arguments);var a=ht(i),r=new Date(0);r.setUTCFullYear(a,0,4),r.setUTCHours(0,0,0,0);var t=ge(r);return t}var Xt=6048e5;function wt(i){U(1,arguments);var a=H(i),r=ge(a).getTime()-It(a).getTime();return Math.round(r/Xt)+1}function me(i,a){var r,t,e,o,n,s,u,c;U(1,arguments);var l=be(),v=Z((r=(t=(e=(o=a==null?void 0:a.weekStartsOn)!==null&&o!==void 0?o:a==null||(n=a.locale)===null||n===void 0||(s=n.options)===null||s===void 0?void 0:s.weekStartsOn)!==null&&e!==void 0?e:l.weekStartsOn)!==null&&t!==void 0?t:(u=l.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=H(i),p=y.getUTCDay(),g=(p<v?7:0)+p-v;return y.setUTCDate(y.getUTCDate()-g),y.setUTCHours(0,0,0,0),y}function Be(i,a){var r,t,e,o,n,s,u,c;U(1,arguments);var l=H(i),v=l.getUTCFullYear(),y=be(),p=Z((r=(t=(e=(o=a==null?void 0:a.firstWeekContainsDate)!==null&&o!==void 0?o:a==null||(n=a.locale)===null||n===void 0||(s=n.options)===null||s===void 0?void 0:s.firstWeekContainsDate)!==null&&e!==void 0?e:y.firstWeekContainsDate)!==null&&t!==void 0?t:(u=y.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(v+1,0,p),g.setUTCHours(0,0,0,0);var Q=me(g,a),Y=new Date(0);Y.setUTCFullYear(v,0,p),Y.setUTCHours(0,0,0,0);var A=me(Y,a);return l.getTime()>=Q.getTime()?v+1:l.getTime()>=A.getTime()?v:v-1}function Gt(i,a){var r,t,e,o,n,s,u,c;U(1,arguments);var l=be(),v=Z((r=(t=(e=(o=a==null?void 0:a.firstWeekContainsDate)!==null&&o!==void 0?o:a==null||(n=a.locale)===null||n===void 0||(s=n.options)===null||s===void 0?void 0:s.firstWeekContainsDate)!==null&&e!==void 0?e:l.firstWeekContainsDate)!==null&&t!==void 0?t:(u=l.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1),y=Be(i,a),p=new Date(0);p.setUTCFullYear(y,0,v),p.setUTCHours(0,0,0,0);var g=me(p,a);return g}var zt=6048e5;function yt(i,a){U(1,arguments);var r=H(i),t=me(r,a).getTime()-Gt(r,a).getTime();return Math.round(t/zt)+1}function O(i,a){for(var r=i<0?"-":"",t=Math.abs(i).toString();t.length<a;)t="0"+t;return r+t}var Vt={y:function(a,r){var t=a.getUTCFullYear(),e=t>0?t:1-t;return O(r==="yy"?e%100:e,r.length)},M:function(a,r){var t=a.getUTCMonth();return r==="M"?String(t+1):O(t+1,2)},d:function(a,r){return O(a.getUTCDate(),r.length)},a:function(a,r){var t=a.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h:function(a,r){return O(a.getUTCHours()%12||12,r.length)},H:function(a,r){return O(a.getUTCHours(),r.length)},m:function(a,r){return O(a.getUTCMinutes(),r.length)},s:function(a,r){return O(a.getUTCSeconds(),r.length)},S:function(a,r){var t=r.length,e=a.getUTCMilliseconds(),o=Math.floor(e*Math.pow(10,t-3));return O(o,r.length)}};const le=Vt;var ve={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zt={G:function(a,r,t){var e=a.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})}},y:function(a,r,t){if(r==="yo"){var e=a.getUTCFullYear(),o=e>0?e:1-e;return t.ordinalNumber(o,{unit:"year"})}return le.y(a,r)},Y:function(a,r,t,e){var o=Be(a,e),n=o>0?o:1-o;if(r==="YY"){var s=n%100;return O(s,2)}return r==="Yo"?t.ordinalNumber(n,{unit:"year"}):O(n,r.length)},R:function(a,r){var t=ht(a);return O(t,r.length)},u:function(a,r){var t=a.getUTCFullYear();return O(t,r.length)},Q:function(a,r,t){var e=Math.ceil((a.getUTCMonth()+1)/3);switch(r){case"Q":return String(e);case"QQ":return O(e,2);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})}},q:function(a,r,t){var e=Math.ceil((a.getUTCMonth()+1)/3);switch(r){case"q":return String(e);case"qq":return O(e,2);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})}},M:function(a,r,t){var e=a.getUTCMonth();switch(r){case"M":case"MM":return le.M(a,r);case"Mo":return t.ordinalNumber(e+1,{unit:"month"});case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})}},L:function(a,r,t){var e=a.getUTCMonth();switch(r){case"L":return String(e+1);case"LL":return O(e+1,2);case"Lo":return t.ordinalNumber(e+1,{unit:"month"});case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})}},w:function(a,r,t,e){var o=yt(a,e);return r==="wo"?t.ordinalNumber(o,{unit:"week"}):O(o,r.length)},I:function(a,r,t){var e=wt(a);return r==="Io"?t.ordinalNumber(e,{unit:"week"}):O(e,r.length)},d:function(a,r,t){return r==="do"?t.ordinalNumber(a.getUTCDate(),{unit:"date"}):le.d(a,r)},D:function(a,r,t){var e=Bt(a);return r==="Do"?t.ordinalNumber(e,{unit:"dayOfYear"}):O(e,r.length)},E:function(a,r,t){var e=a.getUTCDay();switch(r){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})}},e:function(a,r,t,e){var o=a.getUTCDay(),n=(o-e.weekStartsOn+8)%7||7;switch(r){case"e":return String(n);case"ee":return O(n,2);case"eo":return t.ordinalNumber(n,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(a,r,t,e){var o=a.getUTCDay(),n=(o-e.weekStartsOn+8)%7||7;switch(r){case"c":return String(n);case"cc":return O(n,r.length);case"co":return t.ordinalNumber(n,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(a,r,t){var e=a.getUTCDay(),o=e===0?7:e;switch(r){case"i":return String(o);case"ii":return O(o,r.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(e,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(e,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(e,{width:"short",context:"formatting"});case"iiii":default:return t.day(e,{width:"wide",context:"formatting"})}},a:function(a,r,t){var e=a.getUTCHours(),o=e/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(a,r,t){var e=a.getUTCHours(),o;switch(e===12?o=ve.noon:e===0?o=ve.midnight:o=e/12>=1?"pm":"am",r){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(a,r,t){var e=a.getUTCHours(),o;switch(e>=17?o=ve.evening:e>=12?o=ve.afternoon:e>=4?o=ve.morning:o=ve.night,r){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(a,r,t){if(r==="ho"){var e=a.getUTCHours()%12;return e===0&&(e=12),t.ordinalNumber(e,{unit:"hour"})}return le.h(a,r)},H:function(a,r,t){return r==="Ho"?t.ordinalNumber(a.getUTCHours(),{unit:"hour"}):le.H(a,r)},K:function(a,r,t){var e=a.getUTCHours()%12;return r==="Ko"?t.ordinalNumber(e,{unit:"hour"}):O(e,r.length)},k:function(a,r,t){var e=a.getUTCHours();return e===0&&(e=24),r==="ko"?t.ordinalNumber(e,{unit:"hour"}):O(e,r.length)},m:function(a,r,t){return r==="mo"?t.ordinalNumber(a.getUTCMinutes(),{unit:"minute"}):le.m(a,r)},s:function(a,r,t){return r==="so"?t.ordinalNumber(a.getUTCSeconds(),{unit:"second"}):le.s(a,r)},S:function(a,r){return le.S(a,r)},X:function(a,r,t,e){var o=e._originalDate||a,n=o.getTimezoneOffset();if(n===0)return"Z";switch(r){case"X":return nt(n);case"XXXX":case"XX":return fe(n);case"XXXXX":case"XXX":default:return fe(n,":")}},x:function(a,r,t,e){var o=e._originalDate||a,n=o.getTimezoneOffset();switch(r){case"x":return nt(n);case"xxxx":case"xx":return fe(n);case"xxxxx":case"xxx":default:return fe(n,":")}},O:function(a,r,t,e){var o=e._originalDate||a,n=o.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+at(n,":");case"OOOO":default:return"GMT"+fe(n,":")}},z:function(a,r,t,e){var o=e._originalDate||a,n=o.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+at(n,":");case"zzzz":default:return"GMT"+fe(n,":")}},t:function(a,r,t,e){var o=e._originalDate||a,n=Math.floor(o.getTime()/1e3);return O(n,r.length)},T:function(a,r,t,e){var o=e._originalDate||a,n=o.getTime();return O(n,r.length)}};function at(i,a){var r=i>0?"-":"+",t=Math.abs(i),e=Math.floor(t/60),o=t%60;if(o===0)return r+String(e);var n=a||"";return r+String(e)+n+O(o,2)}function nt(i,a){if(i%60===0){var r=i>0?"-":"+";return r+O(Math.abs(i)/60,2)}return fe(i,a)}function fe(i,a){var r=a||"",t=i>0?"-":"+",e=Math.abs(i),o=O(Math.floor(e/60),2),n=O(e%60,2);return t+o+r+n}const Kt=Zt;var it=function(a,r){switch(a){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},pt=function(a,r){switch(a){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Jt=function(a,r){var t=a.match(/(P+)(p+)?/)||[],e=t[1],o=t[2];if(!o)return it(a,r);var n;switch(e){case"P":n=r.dateTime({width:"short"});break;case"PP":n=r.dateTime({width:"medium"});break;case"PPP":n=r.dateTime({width:"long"});break;case"PPPP":default:n=r.dateTime({width:"full"});break}return n.replace("{{date}}",it(e,r)).replace("{{time}}",pt(o,r))},er={p:pt,P:Jt};const Le=er;var tr=["D","DD"],rr=["YY","YYYY"];function gt(i){return tr.indexOf(i)!==-1}function bt(i){return rr.indexOf(i)!==-1}function Ee(i,a,r){if(i==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(a,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(a,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(a,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(i==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(a,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ar={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nr=function(a,r,t){var e,o=ar[a];return typeof o=="string"?e=o:r===1?e=o.one:e=o.other.replace("{{count}}",r.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+e:e+" ago":e};const ir=nr;function ye(i){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.width?String(a.width):i.defaultWidth,t=i.formats[r]||i.formats[i.defaultWidth];return t}}var or={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ur={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cr={date:ye({formats:or,defaultWidth:"full"}),time:ye({formats:sr,defaultWidth:"full"}),dateTime:ye({formats:ur,defaultWidth:"full"})};const lr=cr;var dr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fr=function(a,r,t,e){return dr[a]};const mr=fr;function ne(i){return function(a,r){var t=r!=null&&r.context?String(r.context):"standalone",e;if(t==="formatting"&&i.formattingValues){var o=i.defaultFormattingWidth||i.defaultWidth,n=r!=null&&r.width?String(r.width):o;e=i.formattingValues[n]||i.formattingValues[o]}else{var s=i.defaultWidth,u=r!=null&&r.width?String(r.width):i.defaultWidth;e=i.values[u]||i.values[s]}var c=i.argumentCallback?i.argumentCallback(a):a;return e[c]}}var vr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},br=function(a,r){var t=Number(a),e=t%100;if(e>20||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Tr={ordinalNumber:br,era:ne({values:vr,defaultWidth:"wide"}),quarter:ne({values:hr,defaultWidth:"wide",argumentCallback:function(a){return a-1}}),month:ne({values:wr,defaultWidth:"wide"}),day:ne({values:yr,defaultWidth:"wide"}),dayPeriod:ne({values:pr,defaultWidth:"wide",formattingValues:gr,defaultFormattingWidth:"wide"})};const Dr=Tr;function ie(i){return function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.width,e=t&&i.matchPatterns[t]||i.matchPatterns[i.defaultMatchWidth],o=a.match(e);if(!o)return null;var n=o[0],s=t&&i.parsePatterns[t]||i.parsePatterns[i.defaultParseWidth],u=Array.isArray(s)?Pr(s,function(v){return v.test(n)}):Cr(s,function(v){return v.test(n)}),c;c=i.valueCallback?i.valueCallback(u):u,c=r.valueCallback?r.valueCallback(c):c;var l=a.slice(n.length);return{value:c,rest:l}}}function Cr(i,a){for(var r in i)if(i.hasOwnProperty(r)&&a(i[r]))return r}function Pr(i,a){for(var r=0;r<i.length;r++)if(a(i[r]))return r}function Tt(i){return function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=a.match(i.matchPattern);if(!t)return null;var e=t[0],o=a.match(i.parsePattern);if(!o)return null;var n=i.valueCallback?i.valueCallback(o[0]):o[0];n=r.valueCallback?r.valueCallback(n):n;var s=a.slice(e.length);return{value:n,rest:s}}}var Mr=/^(\d+)(th|st|nd|rd)?/i,_r=/\d+/i,xr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kr={any:[/^b/i,/^(a|c)/i]},Or={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$r={any:[/1/i,/2/i,/3/i,/4/i]},Er={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ur={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Wr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Yr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ar={ordinalNumber:Tt({matchPattern:Mr,parsePattern:_r,valueCallback:function(a){return parseInt(a,10)}}),era:ie({matchPatterns:xr,defaultMatchWidth:"wide",parsePatterns:kr,defaultParseWidth:"any"}),quarter:ie({matchPatterns:Or,defaultMatchWidth:"wide",parsePatterns:$r,defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:ie({matchPatterns:Er,defaultMatchWidth:"wide",parsePatterns:Ur,defaultParseWidth:"any"}),day:ie({matchPatterns:Nr,defaultMatchWidth:"wide",parsePatterns:Wr,defaultParseWidth:"any"}),dayPeriod:ie({matchPatterns:Yr,defaultMatchWidth:"any",parsePatterns:Rr,defaultParseWidth:"any"})};const Hr=Ar;var Sr={code:"en-US",formatDistance:ir,formatLong:lr,formatRelative:mr,localize:Dr,match:Hr,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Dt=Sr;var Lr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fr=/^'([^]*?)'?$/,jr=/''/g,Qr=/[a-zA-Z]/;function ee(i,a,r){var t,e,o,n,s,u,c,l,v,y,p,g,Q,Y,A,X,K,h;U(2,arguments);var w=String(a),f=be(),$=(t=(e=r==null?void 0:r.locale)!==null&&e!==void 0?e:f.locale)!==null&&t!==void 0?t:Dt,b=Z((o=(n=(s=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(c=r.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&n!==void 0?n:(v=f.locale)===null||v===void 0||(y=v.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=Z((p=(g=(Q=(Y=r==null?void 0:r.weekStartsOn)!==null&&Y!==void 0?Y:r==null||(A=r.locale)===null||A===void 0||(X=A.options)===null||X===void 0?void 0:X.weekStartsOn)!==null&&Q!==void 0?Q:f.weekStartsOn)!==null&&g!==void 0?g:(K=f.locale)===null||K===void 0||(h=K.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&p!==void 0?p:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!$.localize)throw new RangeError("locale must contain localize property");if(!$.formatLong)throw new RangeError("locale must contain formatLong property");var L=H(i);if(!Ft(L))throw new RangeError("Invalid time value");var B=$e(L),W=vt(L,B),G={firstWeekContainsDate:b,weekStartsOn:_,locale:$,_originalDate:L},J=w.match(qr).map(function(N){var re=N[0];if(re==="p"||re==="P"){var de=Le[re];return de(N,$.formatLong)}return N}).join("").match(Lr).map(function(N){if(N==="''")return"'";var re=N[0];if(re==="'")return Br(N);var de=Kt[re];if(de)return!(r!=null&&r.useAdditionalWeekYearTokens)&&bt(N)&&Ee(N,a,String(i)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&gt(N)&&Ee(N,a,String(i)),de(W,N,$.localize,G);if(re.match(Qr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+re+"`");return N}).join("");return J}function Br(i){var a=i.match(Fr);return a?a[1].replace(jr,"'"):i}function Ir(i,a){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r]);return i}function ot(i,a){(a==null||a>i.length)&&(a=i.length);for(var r=0,t=Array(a);r<a;r++)t[r]=i[r];return t}function Xr(i,a){if(i){if(typeof i=="string")return ot(i,a);var r={}.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(i,a):void 0}}function st(i,a){var r=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!r){if(Array.isArray(i)||(r=Xr(i))||a&&i&&typeof i.length=="number"){r&&(i=r);var t=0,e=function(){};return{s:e,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(c){throw c},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,n=!0,s=!1;return{s:function(){r=r.call(i)},n:function(){var c=r.next();return n=c.done,c},e:function(c){s=!0,o=c},f:function(){try{n||r.return==null||r.return()}finally{if(s)throw o}}}}function m(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qe(i,a){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},qe(i,a)}function C(i,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),a&&qe(i,a)}function Ue(i){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ue(i)}function Ct(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ct=function(){return!!i})()}function Gr(i,a){if(a&&(ce(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(i)}function P(i){var a=Ct();return function(){var r,t=Ue(i);if(a){var e=Ue(this).constructor;r=Reflect.construct(t,arguments,e)}else r=t.apply(this,arguments);return Gr(this,r)}}function T(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}function zr(i,a){if(ce(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var t=r.call(i,a||"default");if(ce(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}function Pt(i){var a=zr(i,"string");return ce(a)=="symbol"?a:a+""}function ut(i,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,Pt(t.key),t)}}function D(i,a,r){return a&&ut(i.prototype,a),r&&ut(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}function d(i,a,r){return(a=Pt(a))in i?Object.defineProperty(i,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[a]=r,i}var Vr=10,Mt=function(){function i(){T(this,i),d(this,"priority",void 0),d(this,"subPriority",0)}return D(i,[{key:"validate",value:function(r,t){return!0}}]),i}(),Zr=function(i){C(r,i);var a=P(r);function r(t,e,o,n,s){var u;return T(this,r),u=a.call(this),u.value=t,u.validateValue=e,u.setValue=o,u.priority=n,s&&(u.subPriority=s),u}return D(r,[{key:"validate",value:function(e,o){return this.validateValue(e,this.value,o)}},{key:"set",value:function(e,o,n){return this.setValue(e,o,this.value,n)}}]),r}(Mt),Kr=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",Vr),d(m(t),"subPriority",-1),t}return D(r,[{key:"set",value:function(e,o){if(o.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),r}(Mt),k=function(){function i(){T(this,i),d(this,"incompatibleTokens",void 0),d(this,"priority",void 0),d(this,"subPriority",void 0)}return D(i,[{key:"run",value:function(r,t,e,o){var n=this.parse(r,t,e,o);return n?{setter:new Zr(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}},{key:"validate",value:function(r,t,e){return!0}}]),i}(),Jr=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",140),d(m(t),"incompatibleTokens",["R","u","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,o,n){return o.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(k),F={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},oe={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function j(i,a){return i&&{value:a(i.value),rest:i.rest}}function R(i,a){var r=a.match(i);return r?{value:parseInt(r[0],10),rest:a.slice(r[0].length)}:null}function se(i,a){var r=a.match(i);if(!r)return null;if(r[0]==="Z")return{value:0,rest:a.slice(1)};var t=r[1]==="+"?1:-1,e=r[2]?parseInt(r[2],10):0,o=r[3]?parseInt(r[3],10):0,n=r[5]?parseInt(r[5],10):0;return{value:t*(e*Qe+o*je+n*Lt),rest:a.slice(r[0].length)}}function _t(i){return R(F.anyDigitsSigned,i)}function S(i,a){switch(i){case 1:return R(F.singleDigit,a);case 2:return R(F.twoDigits,a);case 3:return R(F.threeDigits,a);case 4:return R(F.fourDigits,a);default:return R(new RegExp("^\\d{1,"+i+"}"),a)}}function Ne(i,a){switch(i){case 1:return R(F.singleDigitSigned,a);case 2:return R(F.twoDigitsSigned,a);case 3:return R(F.threeDigitsSigned,a);case 4:return R(F.fourDigitsSigned,a);default:return R(new RegExp("^-?\\d{1,"+i+"}"),a)}}function Ie(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function xt(i,a){var r=a>0,t=r?a:1-a,e;if(t<=50)e=i||100;else{var o=t+50,n=Math.floor(o/100)*100,s=i>=o%100;e=i+n-(s?100:0)}return r?e:1-e}function kt(i){return i%400===0||i%4===0&&i%100!==0}var ea=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",130),d(m(t),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){var s=function(c){return{year:c,isTwoDigitYear:o==="yy"}};switch(o){case"y":return j(S(4,e),s);case"yo":return j(n.ordinalNumber(e,{unit:"year"}),s);default:return j(S(o.length,e),s)}}},{key:"validate",value:function(e,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(e,o,n){var s=e.getUTCFullYear();if(n.isTwoDigitYear){var u=xt(n.year,s);return e.setUTCFullYear(u,0,1),e.setUTCHours(0,0,0,0),e}var c=!("era"in o)||o.era===1?n.year:1-n.year;return e.setUTCFullYear(c,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(k),ta=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",130),d(m(t),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){var s=function(c){return{year:c,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return j(S(4,e),s);case"Yo":return j(n.ordinalNumber(e,{unit:"year"}),s);default:return j(S(o.length,e),s)}}},{key:"validate",value:function(e,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(e,o,n,s){var u=Be(e,s);if(n.isTwoDigitYear){var c=xt(n.year,u);return e.setUTCFullYear(c,0,s.firstWeekContainsDate),e.setUTCHours(0,0,0,0),me(e,s)}var l=!("era"in o)||o.era===1?n.year:1-n.year;return e.setUTCFullYear(l,0,s.firstWeekContainsDate),e.setUTCHours(0,0,0,0),me(e,s)}}]),r}(k),ra=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",130),d(m(t),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o){return Ne(o==="R"?4:o.length,e)}},{key:"set",value:function(e,o,n){var s=new Date(0);return s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0),ge(s)}}]),r}(k),aa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",130),d(m(t),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o){return Ne(o==="u"?4:o.length,e)}},{key:"set",value:function(e,o,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(k),na=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",120),d(m(t),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"Q":case"QQ":return S(o.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,o){return o>=1&&o<=4}},{key:"set",value:function(e,o,n){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),r}(k),ia=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",120),d(m(t),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"q":case"qq":return S(o.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,o){return o>=1&&o<=4}},{key:"set",value:function(e,o,n){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),r}(k),oa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),d(m(t),"priority",110),t}return D(r,[{key:"parse",value:function(e,o,n){var s=function(c){return c-1};switch(o){case"M":return j(R(F.month,e),s);case"MM":return j(S(2,e),s);case"Mo":return j(n.ordinalNumber(e,{unit:"month"}),s);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,o){return o>=0&&o<=11}},{key:"set",value:function(e,o,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),r}(k),sa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",110),d(m(t),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){var s=function(c){return c-1};switch(o){case"L":return j(R(F.month,e),s);case"LL":return j(S(2,e),s);case"Lo":return j(n.ordinalNumber(e,{unit:"month"}),s);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,o){return o>=0&&o<=11}},{key:"set",value:function(e,o,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),r}(k);function ua(i,a,r){U(2,arguments);var t=H(i),e=Z(a),o=yt(t,r)-e;return t.setUTCDate(t.getUTCDate()-o*7),t}var ca=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",100),d(m(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"w":return R(F.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=1&&o<=53}},{key:"set",value:function(e,o,n,s){return me(ua(e,n,s),s)}}]),r}(k);function la(i,a){U(2,arguments);var r=H(i),t=Z(a),e=wt(r)-t;return r.setUTCDate(r.getUTCDate()-e*7),r}var da=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",100),d(m(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"I":return R(F.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=1&&o<=53}},{key:"set",value:function(e,o,n){return ge(la(e,n))}}]),r}(k),fa=[31,28,31,30,31,30,31,31,30,31,30,31],ma=[31,29,31,30,31,30,31,31,30,31,30,31],va=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",90),d(m(t),"subPriority",1),d(m(t),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"d":return R(F.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){var n=e.getUTCFullYear(),s=kt(n),u=e.getUTCMonth();return s?o>=1&&o<=ma[u]:o>=1&&o<=fa[u]}},{key:"set",value:function(e,o,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),r}(k),ha=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",90),d(m(t),"subpriority",1),d(m(t),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"D":case"DD":return R(F.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){var n=e.getUTCFullYear(),s=kt(n);return s?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(e,o,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),r}(k);function Xe(i,a,r){var t,e,o,n,s,u,c,l;U(2,arguments);var v=be(),y=Z((t=(e=(o=(n=r==null?void 0:r.weekStartsOn)!==null&&n!==void 0?n:r==null||(s=r.locale)===null||s===void 0||(u=s.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&o!==void 0?o:v.weekStartsOn)!==null&&e!==void 0?e:(c=v.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&t!==void 0?t:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=H(i),g=Z(a),Q=p.getUTCDay(),Y=g%7,A=(Y+7)%7,X=(A<y?7:0)+g-Q;return p.setUTCDate(p.getUTCDate()+X),p}var wa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",90),d(m(t),"incompatibleTokens",["D","i","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,o){return o>=0&&o<=6}},{key:"set",value:function(e,o,n,s){return e=Xe(e,n,s),e.setUTCHours(0,0,0,0),e}}]),r}(k),ya=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",90),d(m(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n,s){var u=function(l){var v=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+v};switch(o){case"e":case"ee":return j(S(o.length,e),u);case"eo":return j(n.ordinalNumber(e,{unit:"day"}),u);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,o){return o>=0&&o<=6}},{key:"set",value:function(e,o,n,s){return e=Xe(e,n,s),e.setUTCHours(0,0,0,0),e}}]),r}(k),pa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",90),d(m(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n,s){var u=function(l){var v=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+v};switch(o){case"c":case"cc":return j(S(o.length,e),u);case"co":return j(n.ordinalNumber(e,{unit:"day"}),u);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,o){return o>=0&&o<=6}},{key:"set",value:function(e,o,n,s){return e=Xe(e,n,s),e.setUTCHours(0,0,0,0),e}}]),r}(k);function ga(i,a){U(2,arguments);var r=Z(a);r%7===0&&(r=r-7);var t=1,e=H(i),o=e.getUTCDay(),n=r%7,s=(n+7)%7,u=(s<t?7:0)+r-o;return e.setUTCDate(e.getUTCDate()+u),e}var ba=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",90),d(m(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){var s=function(c){return c===0?7:c};switch(o){case"i":case"ii":return S(o.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return j(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return j(n.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return j(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return j(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),s)}}},{key:"validate",value:function(e,o){return o>=1&&o<=7}},{key:"set",value:function(e,o,n){return e=ga(e,n),e.setUTCHours(0,0,0,0),e}}]),r}(k),Ta=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",80),d(m(t),"incompatibleTokens",["b","B","H","k","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,o,n){return e.setUTCHours(Ie(n),0,0,0),e}}]),r}(k),Da=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",80),d(m(t),"incompatibleTokens",["a","B","H","k","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,o,n){return e.setUTCHours(Ie(n),0,0,0),e}}]),r}(k),Ca=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",80),d(m(t),"incompatibleTokens",["a","b","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,o,n){return e.setUTCHours(Ie(n),0,0,0),e}}]),r}(k),Pa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",70),d(m(t),"incompatibleTokens",["H","K","k","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"h":return R(F.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=1&&o<=12}},{key:"set",value:function(e,o,n){var s=e.getUTCHours()>=12;return s&&n<12?e.setUTCHours(n+12,0,0,0):!s&&n===12?e.setUTCHours(0,0,0,0):e.setUTCHours(n,0,0,0),e}}]),r}(k),Ma=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",70),d(m(t),"incompatibleTokens",["a","b","h","K","k","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"H":return R(F.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=0&&o<=23}},{key:"set",value:function(e,o,n){return e.setUTCHours(n,0,0,0),e}}]),r}(k),_a=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",70),d(m(t),"incompatibleTokens",["h","H","k","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"K":return R(F.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=0&&o<=11}},{key:"set",value:function(e,o,n){var s=e.getUTCHours()>=12;return s&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),r}(k),xa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",70),d(m(t),"incompatibleTokens",["a","b","h","H","K","t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"k":return R(F.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=1&&o<=24}},{key:"set",value:function(e,o,n){var s=n<=24?n%24:n;return e.setUTCHours(s,0,0,0),e}}]),r}(k),ka=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",60),d(m(t),"incompatibleTokens",["t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"m":return R(F.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=0&&o<=59}},{key:"set",value:function(e,o,n){return e.setUTCMinutes(n,0,0),e}}]),r}(k),Oa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",50),d(m(t),"incompatibleTokens",["t","T"]),t}return D(r,[{key:"parse",value:function(e,o,n){switch(o){case"s":return R(F.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return S(o.length,e)}}},{key:"validate",value:function(e,o){return o>=0&&o<=59}},{key:"set",value:function(e,o,n){return e.setUTCSeconds(n,0),e}}]),r}(k),$a=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",30),d(m(t),"incompatibleTokens",["t","T"]),t}return D(r,[{key:"parse",value:function(e,o){var n=function(u){return Math.floor(u*Math.pow(10,-o.length+3))};return j(S(o.length,e),n)}},{key:"set",value:function(e,o,n){return e.setUTCMilliseconds(n),e}}]),r}(k),Ea=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",10),d(m(t),"incompatibleTokens",["t","T","x"]),t}return D(r,[{key:"parse",value:function(e,o){switch(o){case"X":return se(oe.basicOptionalMinutes,e);case"XX":return se(oe.basic,e);case"XXXX":return se(oe.basicOptionalSeconds,e);case"XXXXX":return se(oe.extendedOptionalSeconds,e);case"XXX":default:return se(oe.extended,e)}}},{key:"set",value:function(e,o,n){return o.timestampIsSet?e:new Date(e.getTime()-n)}}]),r}(k),Ua=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",10),d(m(t),"incompatibleTokens",["t","T","X"]),t}return D(r,[{key:"parse",value:function(e,o){switch(o){case"x":return se(oe.basicOptionalMinutes,e);case"xx":return se(oe.basic,e);case"xxxx":return se(oe.basicOptionalSeconds,e);case"xxxxx":return se(oe.extendedOptionalSeconds,e);case"xxx":default:return se(oe.extended,e)}}},{key:"set",value:function(e,o,n){return o.timestampIsSet?e:new Date(e.getTime()-n)}}]),r}(k),Na=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",40),d(m(t),"incompatibleTokens","*"),t}return D(r,[{key:"parse",value:function(e){return _t(e)}},{key:"set",value:function(e,o,n){return[new Date(n*1e3),{timestampIsSet:!0}]}}]),r}(k),Wa=function(i){C(r,i);var a=P(r);function r(){var t;T(this,r);for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return t=a.call.apply(a,[this].concat(o)),d(m(t),"priority",20),d(m(t),"incompatibleTokens","*"),t}return D(r,[{key:"parse",value:function(e){return _t(e)}},{key:"set",value:function(e,o,n){return[new Date(n),{timestampIsSet:!0}]}}]),r}(k),Ya={G:new Jr,y:new ea,Y:new ta,R:new ra,u:new aa,Q:new na,q:new ia,M:new oa,L:new sa,w:new ca,I:new da,d:new va,D:new ha,E:new wa,e:new ya,c:new pa,i:new ba,a:new Ta,b:new Da,B:new Ca,h:new Pa,H:new Ma,K:new _a,k:new xa,m:new ka,s:new Oa,S:new $a,X:new Ea,x:new Ua,t:new Na,T:new Wa},Ra=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Aa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ha=/^'([^]*?)'?$/,Sa=/''/g,La=/\S/,qa=/[a-zA-Z]/;function Fa(i,a,r,t){var e,o,n,s,u,c,l,v,y,p,g,Q,Y,A,X,K,h,w;U(3,arguments);var f=String(i),$=String(a),b=be(),_=(e=(o=t==null?void 0:t.locale)!==null&&o!==void 0?o:b.locale)!==null&&e!==void 0?e:Dt;if(!_.match)throw new RangeError("locale must contain match property");var L=Z((n=(s=(u=(c=t==null?void 0:t.firstWeekContainsDate)!==null&&c!==void 0?c:t==null||(l=t.locale)===null||l===void 0||(v=l.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&u!==void 0?u:b.firstWeekContainsDate)!==null&&s!==void 0?s:(y=b.locale)===null||y===void 0||(p=y.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var B=Z((g=(Q=(Y=(A=t==null?void 0:t.weekStartsOn)!==null&&A!==void 0?A:t==null||(X=t.locale)===null||X===void 0||(K=X.options)===null||K===void 0?void 0:K.weekStartsOn)!==null&&Y!==void 0?Y:b.weekStartsOn)!==null&&Q!==void 0?Q:(h=b.locale)===null||h===void 0||(w=h.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&g!==void 0?g:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if($==="")return f===""?H(r):new Date(NaN);var W={firstWeekContainsDate:L,weekStartsOn:B,locale:_},G=[new Kr],J=$.match(Aa).map(function(I){var E=I[0];if(E in Le){var ae=Le[E];return ae(I,_.formatLong)}return I}).join("").match(Ra),N=[],re=st(J),de;try{var Et=function(){var E=de.value;!(t!=null&&t.useAdditionalWeekYearTokens)&&bt(E)&&Ee(E,$,i),!(t!=null&&t.useAdditionalDayOfYearTokens)&&gt(E)&&Ee(E,$,i);var ae=E[0],ke=Ya[ae];if(ke){var Ke=ke.incompatibleTokens;if(Array.isArray(Ke)){var Je=N.find(function(et){return Ke.includes(et.token)||et.token===ae});if(Je)throw new RangeError("The format string mustn't contain `".concat(Je.fullToken,"` and `").concat(E,"` at the same time"))}else if(ke.incompatibleTokens==="*"&&N.length>0)throw new RangeError("The format string mustn't contain `".concat(E,"` and any other token at the same time"));N.push({token:ae,fullToken:E});var Ye=ke.run(f,E,_.match,W);if(!Ye)return{v:new Date(NaN)};G.push(Ye.setter),f=Ye.rest}else{if(ae.match(qa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ae+"`");if(E==="''"?E="'":ae==="'"&&(E=ja(E)),f.indexOf(E)===0)f=f.slice(E.length);else return{v:new Date(NaN)}}};for(re.s();!(de=re.n()).done;){var Ge=Et();if(ce(Ge)==="object")return Ge.v}}catch(I){re.e(I)}finally{re.f()}if(f.length>0&&La.test(f))return new Date(NaN);var Ut=G.map(function(I){return I.priority}).sort(function(I,E){return E-I}).filter(function(I,E,ae){return ae.indexOf(I)===E}).map(function(I){return G.filter(function(E){return E.priority===I}).sort(function(E,ae){return ae.subPriority-E.subPriority})}).map(function(I){return I[0]}),We=H(r);if(isNaN(We.getTime()))return new Date(NaN);var Te=vt(We,$e(We)),ze={},_e=st(Ut),Ve;try{for(_e.s();!(Ve=_e.n()).done;){var Ze=Ve.value;if(!Ze.validate(Te,W))return new Date(NaN);var xe=Ze.set(Te,ze,W);Array.isArray(xe)?(Te=xe[0],Ir(ze,xe[1])):Te=xe}}catch(I){_e.e(I)}finally{_e.f()}return Te}function ja(i){return i.match(Ha)[1].replace(Sa,"'")}function M(i,a){var r;U(1,arguments);var t=Z((r=a==null?void 0:a.additionalDigits)!==null&&r!==void 0?r:2);if(t!==2&&t!==1&&t!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof i=="string"||Object.prototype.toString.call(i)==="[object String]"))return new Date(NaN);var e=Xa(i),o;if(e.date){var n=Ga(e.date,t);o=za(n.restDateString,n.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var s=o.getTime(),u=0,c;if(e.time&&(u=Va(e.time),isNaN(u)))return new Date(NaN);if(e.timezone){if(c=Za(e.timezone),isNaN(c))return new Date(NaN)}else{var l=new Date(s+u),v=new Date(0);return v.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),v.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),v}return new Date(s+u+c)}var Oe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Qa=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ba=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ia=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Xa(i){var a={},r=i.split(Oe.dateTimeDelimiter),t;if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],Oe.timeZoneDelimiter.test(a.date)&&(a.date=i.split(Oe.timeZoneDelimiter)[0],t=i.substr(a.date.length,i.length))),t){var e=Oe.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}function Ga(i,a){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),t=i.match(r);if(!t)return{year:NaN,restDateString:""};var e=t[1]?parseInt(t[1]):null,o=t[2]?parseInt(t[2]):null;return{year:o===null?e:o*100,restDateString:i.slice((t[1]||t[2]).length)}}function za(i,a){if(a===null)return new Date(NaN);var r=i.match(Qa);if(!r)return new Date(NaN);var t=!!r[4],e=De(r[1]),o=De(r[2])-1,n=De(r[3]),s=De(r[4]),u=De(r[5])-1;if(t)return rn(a,s,u)?Ka(a,s,u):new Date(NaN);var c=new Date(0);return!en(a,o,n)||!tn(a,e)?new Date(NaN):(c.setUTCFullYear(a,o,Math.max(e,n)),c)}function De(i){return i?parseInt(i):1}function Va(i){var a=i.match(Ba);if(!a)return NaN;var r=Re(a[1]),t=Re(a[2]),e=Re(a[3]);return an(r,t,e)?r*Qe+t*je+e*1e3:NaN}function Re(i){return i&&parseFloat(i.replace(",","."))||0}function Za(i){if(i==="Z")return 0;var a=i.match(Ia);if(!a)return 0;var r=a[1]==="+"?-1:1,t=parseInt(a[2]),e=a[3]&&parseInt(a[3])||0;return nn(t,e)?r*(t*Qe+e*je):NaN}function Ka(i,a,r){var t=new Date(0);t.setUTCFullYear(i,0,4);var e=t.getUTCDay()||7,o=(a-1)*7+r+1-e;return t.setUTCDate(t.getUTCDate()+o),t}var Ja=[31,null,31,30,31,30,31,31,30,31,30,31];function Ot(i){return i%400===0||i%4===0&&i%100!==0}function en(i,a,r){return a>=0&&a<=11&&r>=1&&r<=(Ja[a]||(Ot(i)?29:28))}function tn(i,a){return a>=1&&a<=(Ot(i)?366:365)}function rn(i,a,r){return a>=1&&a<=53&&r>=0&&r<=6}function an(i,a,r){return i===24?a===0&&r===0:r>=0&&r<60&&a>=0&&a<60&&i>=0&&i<25}function nn(i,a){return a>=0&&a<=59}var on={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},sn=function(a,r,t){var e,o=on[a];return typeof o=="string"?e=o:r===1?e=o.one:e=o.other.replace("{{count}}",r.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+e:"hace "+e:e};const un=sn;var cn={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},ln={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},dn={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fn={date:ye({formats:cn,defaultWidth:"full"}),time:ye({formats:ln,defaultWidth:"full"}),dateTime:ye({formats:dn,defaultWidth:"full"})};const mn=fn;var vn={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},hn={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},wn=function(a,r,t,e){return r.getUTCHours()!==1?hn[a]:vn[a]};const yn=wn;var pn={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},gn={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},bn={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Tn={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Dn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Cn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Pn=function(a,r){var t=Number(a);return t+"º"},Mn={ordinalNumber:Pn,era:ne({values:pn,defaultWidth:"wide"}),quarter:ne({values:gn,defaultWidth:"wide",argumentCallback:function(a){return Number(a)-1}}),month:ne({values:bn,defaultWidth:"wide"}),day:ne({values:Tn,defaultWidth:"wide"}),dayPeriod:ne({values:Dn,defaultWidth:"wide",formattingValues:Cn,defaultFormattingWidth:"wide"})};const _n=Mn;var xn=/^(\d+)(º)?/i,kn=/\d+/i,On={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},$n={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},En={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Un={any:[/1/i,/2/i,/3/i,/4/i]},Nn={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Wn={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Yn={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Rn={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},An={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Hn={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Sn={ordinalNumber:Tt({matchPattern:xn,parsePattern:kn,valueCallback:function(a){return parseInt(a,10)}}),era:ie({matchPatterns:On,defaultMatchWidth:"wide",parsePatterns:$n,defaultParseWidth:"any"}),quarter:ie({matchPatterns:En,defaultMatchWidth:"wide",parsePatterns:Un,defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:ie({matchPatterns:Nn,defaultMatchWidth:"wide",parsePatterns:Wn,defaultParseWidth:"any"}),day:ie({matchPatterns:Yn,defaultMatchWidth:"wide",parsePatterns:Rn,defaultParseWidth:"any"}),dayPeriod:ie({matchPatterns:An,defaultMatchWidth:"any",parsePatterns:Hn,defaultParseWidth:"any"})};const Ln=Sn;var qn={code:"es",formatDistance:un,formatLong:mn,formatRelative:yn,localize:_n,match:Ln,options:{weekStartsOn:1,firstWeekContainsDate:1}};const Vn=qn;function Zn(i,a){z.useEffect(()=>{if(!i)return;const r=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2);let t=!1;const e=()=>{t=!0,a()};window.history.pushState({overlay:r},""),window.addEventListener("popstate",e);let o=!0;const n=setTimeout(()=>{o=!1},0);return()=>{clearTimeout(n),window.removeEventListener("popstate",e),!(o||t)&&window.history.state&&window.history.state.overlay===r&&window.history.back()}},[i,a])}const $t=(i,a)=>{if(!i||!a)return 0;const r=te(M(i)),t=te(M(a));return jt(r,t)+1},Ce=i=>{if(i==null||i==="")return null;const a=parseFloat(String(i).replace(",","."));return isNaN(a)?null:a},Ae=(i,a)=>!i||!Array.isArray(i)||!a?[]:[...i].sort((t,e)=>{const o=t.timestamp?M(t.timestamp):t.iso_date?M(t.iso_date):0,n=e.timestamp?M(e.timestamp):e.iso_date?M(e.iso_date):0;return St(o,n)}).map(t=>{const e=Ce(t.temperature_raw),o=Ce(t.temperature_corrected),n=u=>{if(!u)return null;const c=Ce(u.temperature),l=Ce(u.temperature_corrected);return u.use_corrected&&l!==null?l:c!==null?c:l!==null?l:null};let s=Ce(t.temperature_chart);if(s==null&&Array.isArray(t.measurements)){const c=t.measurements.find(l=>l&&l.selected&&n(l)!==null)||t.measurements.find(l=>n(l)!==null);c&&(s=n(c))}return s==null&&(t.use_corrected&&o!==null?s=o:e!==null?s=e:o!==null&&(s=o)),{...t,id:t.id,isoDate:t.iso_date||(t.timestamp?ee(M(t.timestamp),"yyyy-MM-dd"):null),date:t.timestamp?ee(M(t.timestamp),"dd/MM"):t.iso_date?ee(M(t.iso_date),"dd/MM"):"N/A",cycleDay:$t(t.iso_date||t.timestamp,a),temperature_raw:e,temperature_corrected:o,use_corrected:!!t.use_corrected,mucusSensation:t.mucus_sensation,mucusAppearance:t.mucus_appearance,fertility_symbol:t.fertility_symbol,observations:t.observations,ignored:t.ignored,measurements:t.measurements||[],temperature_chart:s,timestamp:t.timestamp}}),Fn=async i=>{const a=q(x,`users/${i}/cycles`),r=await V(a);if(r.empty)return null;const t=r.docs.map(u=>({id:u.id,...u.data()})).filter(u=>u.end_date===null||u.end_date===void 0).sort((u,c)=>(c.start_date||"").localeCompare(u.start_date||""));if(t.length>1&&console.warn(`Se detectaron ${t.length} ciclos abiertos. Se usará el más reciente.`),t.length===0)return null;const e=t[0],o=q(x,`users/${i}/cycles/${e.id}/entries`),n=await V(o),s=await Promise.all(n.docs.map(async u=>{let c=[];try{const l=q(x,`users/${i}/cycles/${e.id}/entries/${u.id}/measurements`);c=(await V(l)).docs.map(y=>({id:y.id,...y.data()}))}catch(l){console.error("Error fetching measurements for entry",u.id,l)}return{id:u.id,...u.data(),measurements:c}}));return{id:e.id,startDate:e.start_date,endDate:e.end_date,data:s}},jn=async(i,a)=>{const r=q(x,`users/${i}/cycles`),e=(await V(r)).docs.map(n=>({id:n.id,...n.data()})).filter(n=>n.end_date!==null&&n.end_date!==void 0||a&&n.start_date&&n.start_date<a).sort((n,s)=>(s.start_date||"").localeCompare(n.start_date||""));return await Promise.all(e.map(async n=>{const s=q(x,`users/${i}/cycles/${n.id}/entries`),u=await V(s),c=await Promise.all(u.docs.map(async l=>{let v=[];try{const y=q(x,`users/${i}/cycles/${n.id}/entries/${l.id}/measurements`);v=(await V(y)).docs.map(g=>({id:g.id,...g.data()}))}catch(y){console.error("Error fetching measurements for entry",l.id,y)}return{id:l.id,...l.data(),measurements:v}}));return{id:n.id,startDate:n.start_date,endDate:n.end_date,needsCompletion:!n.end_date,data:c}}))},ct=async(i,a)=>{const r=ue(x,`users/${i}/cycles/${a}`),t=await Fe(r);if(!t.exists())return null;const e=t.data(),o=q(x,`users/${i}/cycles/${a}/entries`),n=await V(o),s=await Promise.all(n.docs.map(async u=>{let c=[];try{const l=q(x,`users/${i}/cycles/${a}/entries/${u.id}/measurements`);c=(await V(l)).docs.map(y=>({id:y.id,...y.data()}))}catch(l){console.error("Error fetching measurements for entry",u.id,l)}return{id:u.id,...u.data(),measurements:c}}));return{id:a,startDate:e.start_date,endDate:e.end_date,data:s}},lt=async(i,a)=>{const r=q(x,`users/${i}/cycles`),t=await V(r),e=M(a);if(t.docs.some(s=>{const u=s.data(),c=u.start_date?M(u.start_date):null,l=u.end_date?M(u.end_date):null;return c&&e>=c&&(!l||e<=l)}))throw new Error("Cycle dates overlap with an existing cycle");return{id:(await we(q(x,`users/${i}/cycles`),{user_id:i,start_date:a,end_date:null})).id,start_date:a}},Qn=async i=>{var l;const a=i.user_id,r=i.timestamp??new Date().toISOString(),t=(l=i.measurements)==null?void 0:l.find(v=>v.selected),e={timestamp:r,temperature_raw:(t==null?void 0:t.temperature)??null,temperature_corrected:(t==null?void 0:t.temperature_corrected)??null,use_corrected:!1,temperature_chart:t?t.temperature_corrected??t.temperature:null,mucus_sensation:i.mucus_sensation,mucus_appearance:i.mucus_appearance,fertility_symbol:i.fertility_symbol,observations:i.observations,ignored:i.ignored},o=q(x,`users/${a}/cycles`),n=await V(o),s=M(r),u=n.docs.filter(v=>{const y=v.data(),p=y.start_date?M(y.start_date):null,g=y.end_date?M(y.end_date):null;return p&&s>=p&&(!g||s<=g)});let c=null;if(u.length>1?c=u.sort((v,y)=>{const p=M(v.data().start_date);return M(y.data().start_date)-p})[0]:u.length===1&&(c=u[0]),c){const v=await we(q(x,`users/${a}/cycles/${c.id}/entries`),e);if(i.measurements&&i.measurements.length){const y=q(x,`users/${a}/cycles/${c.id}/entries/${v.id}/measurements`);for(const p of i.measurements)await we(y,p)}return{id:v.id}}if(i.cycle_id){const v=await we(q(x,`users/${a}/cycles/${i.cycle_id}/entries`),e);if(i.measurements&&i.measurements.length){const y=q(x,`users/${a}/cycles/${i.cycle_id}/entries/${v.id}/measurements`);for(const p of i.measurements)await we(y,p)}return{id:v.id}}return{id:null}},dt=async(i,a,r,t)=>{const e=ue(x,`users/${i}/cycles/${a}/entries/${r}`),o=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","ignored"],n={};for(const s of o)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);if(Object.prototype.hasOwnProperty.call(t,"timestamp")&&(n.timestamp=t.timestamp),Object.keys(n).length===0)return{id:r};if(await Me(e,n),t.measurements){const s=q(x,`users/${i}/cycles/${a}/entries/${r}/measurements`),u=await V(s);await Promise.all(u.docs.map(c=>pe(c.ref)));for(const c of t.measurements)await we(s,c)}return{id:r}},Bn=async(i,a,r)=>{await pe(ue(x,`users/${i}/cycles/${a}/entries/${r}`))},In=async(i,a,r)=>{const t=ue(x,`users/${a}/cycles/${i}`);if(!(await Fe(t)).exists())throw new Error("Cycle not found");await Me(t,{end_date:r})},Pe=async(i,a,r,t,e=!1)=>{const o=ue(x,`users/${a}/cycles/${i}`),n=await Fe(o);if(!n.exists())throw new Error("Cycle not found");const s=n.data(),u=r??s.start_date,c=t!==void 0?t:s.end_date,l=u?M(u):null,v=c?M(c):null;if(l&&v&&v<l)throw new Error("End date cannot be earlier than start date");const y=q(x,`users/${a}/cycles`),g=(await V(y)).docs.find(Y=>{if(Y.id===i)return!1;const A=Y.data(),X=A.start_date?M(A.start_date):null,K=A.end_date?M(A.end_date):null;if(!X)return!1;const h=K??new Date("9999-12-31"),w=v??new Date("9999-12-31");return l<=h&&X<=w});if(e){if(g){const Y=g.data();return{overlap:{id:g.id,startDate:Y.start_date,endDate:Y.end_date}}}return{overlap:null}}if(g)throw new Error("Cycle dates overlap with an existing cycle");const Q={};r!==void 0&&(Q.start_date=r),t!==void 0&&(Q.end_date=t),await Me(o,Q)},Xn=async(i,a,r)=>{const t=q(x,`users/${i}/cycles`),e=await V(t),o=M(r),n=e.docs.find(u=>{if(u.id===a)return!1;const c=u.data(),l=c.start_date?M(c.start_date):null,v=c.end_date?M(c.end_date):null;return!l||!v?!1:v>=o});if(n){const u=ue(x,`users/${i}/cycles/${n.id}`),c=ee(mt(o,-1),"yyyy-MM-dd");await Me(u,{end_date:c});const l=q(x,`users/${i}/cycles/${n.id}/entries`),v=await V(l);await Promise.all(v.docs.map(async y=>{const p=y.data(),g=p.timestamp?M(p.timestamp):null;if(g&&g>=o){const Q={...p,cycle_day:$t(ee(g,"yyyy-MM-dd"),r)},Y=ue(x,`users/${i}/cycles/${a}/entries/${y.id}`);await tt(Y,Q);const A=q(x,`users/${i}/cycles/${n.id}/entries/${y.id}/measurements`),X=await V(A);await Promise.all(X.docs.map(async K=>{const h=ue(x,`users/${i}/cycles/${a}/entries/${y.id}/measurements/${K.id}`);await tt(h,K.data()),await pe(K.ref)})),await pe(y.ref)}}))}const s=ue(x,`users/${i}/cycles/${a}`);await Me(s,{start_date:r})},Gn=async(i,a)=>{const r=q(x,`users/${i}/cycles/${a}/entries`),t=await V(r);await Promise.all(t.docs.map(e=>pe(e.ref))),await pe(ue(x,`users/${i}/cycles/${a}`))},He=(i,a)=>{if(!a)return i;const r=te(M(a));return i.filter(t=>M(t.isoDate)<=r)},Se=(i,a)=>{if(!a)return i;const r=te(M(a));return i.filter(t=>M(t.isoDate)>=r)},ft=i=>{if(i==null||i==="")return null;const a=parseFloat(String(i).replace(",","."));return isNaN(a)?null:a},he=i=>i?typeof i=="string"?ee(te(M(i)),"yyyy-MM-dd"):typeof i.toDate=="function"?ee(te(i.toDate()),"yyyy-MM-dd"):ee(te(new Date(i)),"yyyy-MM-dd"):null,Kn=(i=null)=>{const{user:a}=Nt(),{toast:r}=Wt(),[t,e]=z.useState({id:null,startDate:null,data:[]}),[o,n]=z.useState([]),[s,u]=z.useState(!0),c=z.useCallback(async(h={})=>{const{silent:w=!1}=h;if(!(a!=null&&a.uid)){console.log("No user found, skipping cycle data load"),w||u(!1);return}console.log("Loading cycle data for user:",a.uid),w||u(!0);try{let f;if(i?(console.log("Loading specific cycle:",i),f=await ct(a.uid,i),f||(f={id:i,startDate:ee(te(new Date),"yyyy-MM-dd"),data:[]})):(console.log("Loading current cycle"),f=await Fn(a.uid)),console.log("Cycle loaded:",f),f){const b=he(f.startDate),_=he(f.endDate),L=Ae(f.data,b),B=Se(L,b),W=He(B,_);e({...f,startDate:b,endDate:_,data:W})}else e({id:null,startDate:null,data:[]});console.log("Loading archived cycles");const $=await jn(a.uid,f?f.startDate:null);n($.map(b=>{const _=he(b.startDate),L=he(b.endDate),B=Ae(b.data||[],_),W=Se(B,_),G=He(W,L);return{...b,startDate:_??ee(te(new Date),"yyyy-MM-dd"),endDate:L,needsCompletion:b.needsCompletion,data:G}}))}catch(f){console.error("Error in loadCycleData:",f),f.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),e({id:null,startDate:null,data:[]}),n([])}finally{w||u(!1)}},[a,i]);z.useEffect(()=>{c()},[c]);const l=z.useCallback(async(h,w)=>{if(!(a!=null&&a.uid)||!t.id)throw console.error("User or currentCycle.id is missing"),new Error("User or currentCycle.id is missing");console.log("Adding/updating data point:",h,"editing:",w),u(!0);try{const f=h.measurements.find(N=>N.selected)||h.measurements[0],$=f&&f.time&&f.time.trim()!==""?f.time:ee(new Date,"HH:mm"),b=Fa(`${h.isoDate} ${$}`,"yyyy-MM-dd HH:mm",new Date);let _=w;_||(_=t.data.find(N=>N.isoDate===h.isoDate));const L=ft(f.temperature),B=ft(f.temperature_corrected),W=!!f.use_corrected&&B!==null,G=W?B:L,J={cycle_id:t.id,user_id:a.uid,timestamp:ee(b,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:h.measurements,mucus_sensation:h.mucusSensation||null,mucus_appearance:h.mucusAppearance||null,fertility_symbol:h.fertility_symbol==="none"?null:h.fertility_symbol,observations:h.observations||null,ignored:_?h.ignored??_.ignored:h.ignored||!1,temperature_raw:L,temperature_corrected:B,use_corrected:W,temperature_chart:G};_?(console.log("Updating existing record:",_.id),await dt(a.uid,t.id,_.id,J)):(console.log("Creating new record"),await Qn(J)),console.log("Data point saved successfully"),await c()}catch(f){throw console.error("Error adding/updating data point:",f),f}finally{u(!1)}},[a,t.id,c]),v=z.useCallback(async h=>{if(!(!(a!=null&&a.uid)||!t.id)){console.log("Deleting record:",h),u(!0);try{await Bn(a.uid,t.id,h),await c(),console.log("Record deleted successfully")}catch(w){throw console.error("Error deleting record:",w),w}finally{u(!1)}}},[a,t.id,c]),y=z.useCallback(async(h,w)=>{var B;if(!(a!=null&&a.uid))return;console.log("Toggling ignore for record:",w,"in cycle:",h);const f=h===t.id,$=f?t:o.find(W=>W.id===h);if(!$)throw new Error("Cycle not found for toggling ignore state.");const b=(B=$.data)==null?void 0:B.find(W=>W.id===w);if(!b)throw new Error("Record not found for toggling ignore state.");const _=!b.ignored,L=W=>{f?e(G=>G.id!==h?G:{...G,data:G.data.map(J=>J.id===w?{...J,ignored:W}:J)}):n(G=>G.map(J=>J.id!==h?J:{...J,data:(J.data||[]).map(N=>N.id===w?{...N,ignored:W}:N)}))};try{L(_),await dt(a.uid,h,w,{ignored:_}),c({silent:!0}).catch(W=>console.error("Background cycle data refresh failed after toggling ignore state:",W)),console.log("Record ignore status toggled successfully")}catch(W){throw console.error("Error toggling ignore state:",W),L(!_),W}},[a,t,o,c]),p=z.useCallback(async h=>{if(a!=null&&a.uid){console.log("Starting new cycle with date:",h),u(!0);try{const w=te(h?M(h):new Date);if(t.id&&h){const b=te(M(t.startDate));if(w<=b){r({title:"Fecha inválida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),u(!1);return}}if(t.id){const b=ee(mt(w,-1),"yyyy-MM-dd");await In(t.id,a.uid,b)}const f=ee(w,"yyyy-MM-dd"),$=await lt(a.uid,f);e({id:$.id,startDate:$.start_date,data:[]}),await c(),console.log("New cycle started successfully")}catch(w){console.error("Error starting new cycle:",w);try{t.id&&await Pe(t.id,a.uid,void 0,null)}catch(f){console.error("Rollback failed:",f)}throw r({title:"Error",description:"No se pudo iniciar el nuevo ciclo.",variant:"destructive"}),w}finally{u(!1)}}},[a,t,c,r]),g=z.useCallback(async(h,w)=>{if(a!=null&&a.uid){if(!w){r({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}console.log("Adding archived cycle:",h,w),u(!0);try{const f=await lt(a.uid,h);await Pe(f.id,a.uid,void 0,w),await c(),console.log("Archived cycle added successfully")}catch(f){console.error("Error adding archived cycle:",f);const $=f.message&&f.message.includes("overlap")?"Las fechas coinciden con otro ciclo.":"No se pudo crear el ciclo.";throw r({title:"Error",description:$,variant:"destructive"}),f}finally{u(!1)}}},[a,c,r]),Q=z.useCallback(async h=>{if(a!=null&&a.uid){console.log("Deleting cycle:",h),u(!0);try{await Gn(a.uid,h),await c(),console.log("Cycle deleted successfully")}catch(w){throw console.error("Error deleting cycle:",w),r({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),w}finally{u(!1)}}},[a,c,r]),Y=z.useCallback(async(h,w)=>{if(!(a!=null&&a.uid))return null;try{return(await Pe(h,a.uid,w,void 0,!0)).overlap}catch(f){return console.error("Error checking cycle overlap:",f),null}},[a]),A=z.useCallback(async(h,w,f,$=!1)=>{if(a!=null&&a.uid){console.log("Updating cycle dates:",h,w,f,$),u(!0);try{$&&w?(await Xn(a.uid,h,w),f!==void 0&&await Pe(h,a.uid,void 0,f)):await Pe(h,a.uid,w,f),await c(),console.log("Cycle dates updated successfully")}catch(b){console.error("Error updating cycle dates:",b);const _=b.message&&b.message.includes("overlap")?"Las fechas coinciden con otro ciclo.":"No se pudieron actualizar las fechas.";throw r({title:"Error",description:_,variant:"destructive"}),b}finally{u(!1)}}},[a,c,r]),X=z.useCallback((h,w)=>A(h,w,void 0,!0),[A]),K=z.useCallback(async h=>{if(!(a!=null&&a.uid))return null;console.log("Fetching cycle by ID:",h),u(!0);try{const w=await ct(a.uid,h);if(!w)return null;const f=he(w.startDate),$=he(w.endDate),b=Ae(w.data||[],f),_=Se(b,f),L=He(_,$),B={...w,startDate:f??ee(te(new Date),"yyyy-MM-dd"),endDate:$,data:L};return console.log("Cycle fetched successfully:",B),B}catch(w){return console.error("Error fetching cycle by ID:",w),null}finally{u(!1)}},[a]);return{currentCycle:t,archivedCycles:o,addOrUpdateDataPoint:l,deleteRecord:v,startNewCycle:p,updateCycleDates:A,forceUpdateCycleStart:X,checkCycleOverlap:Y,isLoading:s,getCycleById:K,refreshData:c,toggleIgnoreRecord:y,addArchivedCycle:g,deleteCycle:Q}};export{ce as _,Kn as a,mt as b,Z as c,jt as d,Vn as e,ee as f,Yt as g,be as h,$e as i,Ht as j,Dt as k,qt as l,Fa as m,M as p,U as r,te as s,H as t,Zn as u};
