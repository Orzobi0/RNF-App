import{Y as kt,Z as jt,$ as Nt,c as Ne,r as n,a0 as rt,a1 as _t,a2 as Ct,a3 as St,a4 as Rt,R as Tt,j as e,J as C,o as D,f as F,k as _,B as Q,V as Mt,m as st,X as Qe,a5 as Et,b as nt,a as At,K as Ht,M as Ot}from"./index-Do8Ydwb3.js";import{L as ge,I as je}from"./label-BrdHOCTF.js";import{b as Ft,c as It,d as zt,e as Bt,P as Lt,u as Kt}from"./useBackClose-CETyKRQ2.js";import{i as $t,j as Vt,S as Pt,d as qt,e as Ut,f as Yt,F as Gt,h as Xt,k as Wt,l as Qt,C as Jt,m as ze}from"./computePeakStatuses-DaIqHORZ.js";import{T as Pe,D as qe,P as Be,C as Je,a as Zt,X as at}from"./peak-mode-button-Dr3pvIZC.js";import{l as Ze}from"./badge-DykpjFnT.js";import{a as Dt,E as er}from"./eye-COo0Vokr.js";import{u as tr}from"./useCycleData-Dq0sFEDe.js";var rr=36e5;function sr(l,s){kt(2,arguments);var c=Nt(s);return jt(l,c*rr)}const nr=Ne("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),ar=Ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),or=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),cr=Ne("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),ir=Ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),De=Ne("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);function ot(){const l=n.useRef(!1);return rt(()=>(l.current=!0,()=>{l.current=!1}),[]),l}function lr(){const l=ot(),[s,c]=n.useState(0),m=n.useCallback(()=>{l.current&&c(s+1)},[s]);return[n.useCallback(()=>_t.postRender(m),[m]),s]}class ur extends n.Component{getSnapshotBeforeUpdate(s){const c=this.props.childRef.current;if(c&&s.isPresent&&!this.props.isPresent){const m=this.props.sizeRef.current;m.height=c.offsetHeight||0,m.width=c.offsetWidth||0,m.top=c.offsetTop,m.left=c.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function dr({children:l,isPresent:s}){const c=n.useId(),m=n.useRef(null),h=n.useRef({width:0,height:0,top:0,left:0});return n.useInsertionEffect(()=>{const{width:v,height:T,top:j,left:A}=h.current;if(s||!m.current||!v||!T)return;m.current.dataset.motionPopId=c;const M=document.createElement("style");return document.head.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${T}px !important;
            top: ${j}px !important;
            left: ${A}px !important;
          }
        `),()=>{document.head.removeChild(M)}},[s]),n.createElement(ur,{isPresent:s,childRef:m,sizeRef:h},n.cloneElement(l,{ref:m}))}const Ue=({children:l,initial:s,isPresent:c,onExitComplete:m,custom:h,presenceAffectsLayout:v,mode:T})=>{const j=Ct(mr),A=n.useId(),M=n.useMemo(()=>({id:A,initial:s,isPresent:c,custom:h,onExitComplete:f=>{j.set(f,!0);for(const N of j.values())if(!N)return;m&&m()},register:f=>(j.set(f,!1),()=>j.delete(f))}),v?void 0:[c]);return n.useMemo(()=>{j.forEach((f,N)=>j.set(N,!1))},[c]),n.useEffect(()=>{!c&&!j.size&&m&&m()},[c]),T==="popLayout"&&(l=n.createElement(dr,{isPresent:c},l)),n.createElement(St.Provider,{value:M},l)};function mr(){return new Map}function fr(l){return n.useEffect(()=>()=>l(),[])}const ve=l=>l.key||"";function pr(l,s){l.forEach(c=>{const m=ve(c);s.set(m,c)})}function hr(l){const s=[];return n.Children.forEach(l,c=>{n.isValidElement(c)&&s.push(c)}),s}const br=({children:l,custom:s,initial:c=!0,onExitComplete:m,exitBeforeEnter:h,presenceAffectsLayout:v=!0,mode:T="sync"})=>{const j=n.useContext(Rt).forceRender||lr()[0],A=ot(),M=hr(l);let f=M;const N=n.useRef(new Map).current,H=n.useRef(f),S=n.useRef(new Map).current,$=n.useRef(!0);if(rt(()=>{$.current=!1,pr(M,S),H.current=f}),fr(()=>{$.current=!0,S.clear(),N.clear()}),$.current)return n.createElement(n.Fragment,null,f.map(y=>n.createElement(Ue,{key:ve(y),isPresent:!0,initial:c?void 0:!1,presenceAffectsLayout:v,mode:T},y)));f=[...f];const U=H.current.map(ve),L=M.map(ve),J=U.length;for(let y=0;y<J;y++){const R=U[y];L.indexOf(R)===-1&&!N.has(R)&&N.set(R,void 0)}return T==="wait"&&N.size&&(f=[]),N.forEach((y,R)=>{if(L.indexOf(R)!==-1)return;const Z=S.get(R);if(!Z)return;const Y=U.indexOf(R);let z=y;if(!z){const p=()=>{N.delete(R);const V=Array.from(S.keys()).filter(q=>!L.includes(q));if(V.forEach(q=>S.delete(q)),H.current=M.filter(q=>{const ee=ve(q);return ee===R||V.includes(ee)}),!N.size){if(A.current===!1)return;j(),m&&m()}};z=n.createElement(Ue,{key:ve(Z),isPresent:!1,onExitComplete:p,custom:s,presenceAffectsLayout:v,mode:T},Z),N.set(R,z)}f.splice(Y,0,z)}),f=f.map(y=>{const R=y.key;return N.has(R)?y:n.createElement(Ue,{key:ve(y),isPresent:!0,presenceAffectsLayout:v,mode:T},y)}),n.createElement(n.Fragment,null,N.size?f:f.map(y=>n.cloneElement(y)))},ct=Tt.forwardRef(({className:l,...s},c)=>e.jsx("textarea",{className:C("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:c,...s}));ct.displayName="Textarea";const me=Object.freeze({temperature:{key:"temperature",ariaLabel:"Alternar sección de temperatura",srLabel:"Temperatura"},moco:{key:"moco",ariaLabel:"Alternar sección de moco cervical",srLabel:"Moco cervical"},symbol:{key:"symbol",ariaLabel:"Alternar sección de símbolo de fertilidad",srLabel:"Símbolo de fertilidad"},sensation:{key:"sensation",ariaLabel:"Alternar sección de sensación del moco",srLabel:"Sensación del moco"},appearance:{key:"appearance",ariaLabel:"Alternar sección de apariencia del moco",srLabel:"Apariencia del moco"},observations:{key:"observations",ariaLabel:"Alternar sección de observaciones",srLabel:"Observaciones"}}),et=(l,s,c)=>{const m=!!s;if(m===!!c)return null;const v=l==="peak"?"Día pico":"Relaciones sexuales";return m?`Se ha actualizado ${v}`:`Se ha seleccionado ${v}`},xr=({peakTag:l,existingPeakIsoDate:s,selectedIsoDate:c})=>{const m=!!s,v=l==="peak"||!!(s&&c&&s===c);return{mode:v?"remove":m?"update":"assign",isPeakDay:v}},tt="dataEntryForm:viewAll:",Re="__default__",fe={field:"rounded-3xl",dropdown:"rounded-3xl"},gr=({date:l,setDate:s,measurements:c,addMeasurement:m,updateMeasurement:h,removeMeasurement:v,confirmMeasurement:T,selectMeasurement:j,mucusSensation:A,setMucusSensation:M,mucusAppearance:f,setMucusAppearance:N,fertilitySymbol:H,setFertilitySymbol:S,observations:$,setObservations:U,hadRelations:L,setHadRelations:J,ignored:y,setIgnored:R,peakTag:Z,setPeakTag:Y,existingPeakIsoDate:z,isProcessing:p,isEditing:V,cycleStartDate:q,cycleEndDate:ee,recordedDates:se=[],submitCurrentState:ce,initialSectionKey:pe=null,onSyncTemperature:ye=()=>{},isSyncingTemperature:ie=!1,canSyncTemperature:he=!1})=>{const[_e,be]=n.useState(!1),[ne,le]=n.useState(null),[te,xe]=n.useState({peak:null,relations:null}),G=n.useRef(!1),we=n.useMemo(()=>[{...me.temperature,icon:Pe},{...me.moco,icon:qe},{...me.observations,icon:Be}],[]),u=n.useMemo(()=>[{...me.temperature,sectionKey:"temperature",icon:Pe},{...me.sensation,sectionKey:"moco",icon:qe},{...me.appearance,sectionKey:"moco",icon:Je},{...me.symbol,sectionKey:"moco",icon:De},{...me.observations,sectionKey:"observations",icon:Be}],[]),o=n.useMemo(()=>we.map(t=>t.key),[we]),[i,d]=n.useState(!1),[x,P]=n.useState(()=>o[0]??null),ae=n.useRef(null),ke=n.useRef(null),w=n.useRef(null),O=n.useRef(!1),X=n.useRef(!1),ue=n.useRef(new Map),Te=n.useRef(null),Ce=n.useMemo(()=>i?o:x?[x]:[],[i,o,x]),Le=D(F(q)),Me=ee?D(F(ee)):null,I=Me?[{before:Le},{after:Me}]:[{before:Le}],b=l?_(l,"yyyy-MM-dd"):null,[Se,Ke]=n.useState(0),Ee=n.useRef(null),Ye=n.useRef(null),re=n.useCallback(t=>["symbol","sensation","appearance"].includes(t)?"moco":t,[]),it=n.useCallback(t=>{t.key==="Enter"&&(t.preventDefault(),Ee.current?.focus())},[]),lt=n.useCallback(t=>{t.key==="Enter"&&(t.preventDefault(),Ye.current?.focus())},[]),Ae=n.useCallback(()=>{const t=ae.current;if(!t)return;const r=t.getBoundingClientRect(),a=parseFloat(getComputedStyle(t).top||"0"),k=Number.isNaN(a)?0:a;Ke((r?.height||0)+k+12)},[]);n.useEffect(()=>{Ae();const t=new ResizeObserver(()=>Ae());ae.current&&t.observe(ae.current);const r=()=>Ae();return window.addEventListener("resize",r),window.addEventListener("orientationchange",r),()=>{t.disconnect(),window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}},[Ae]);const He=n.useCallback(()=>{typeof window>"u"||window.navigator?.vibrate&&window.navigator.vibrate(10)},[]),de=n.useCallback(t=>{const r=re(t);if(!r)return;O.current=!1,P(k=>k===r?k:r);const a=b??Re;ue.current.set(a,r)},[re,b]);n.useEffect(()=>{if(!o.length){x!==null&&P(null);return}if(x&&o.includes(x))return;if(!i&&O.current){x!==null&&P(null);return}const t=b??Re,r=re(ue.current.get(t)),a=r&&o.includes(r)&&r||o[0]||null;if(!a){x!==null&&P(null);return}de(a)},[x,i,re,de,o,b]);const Oe=n.useCallback(t=>{if(typeof window>"u"||!t)return;const r=ke.current;if(!r)return;const a=r.querySelector(`[data-section="${t}"]`);if(!(a instanceof HTMLElement))return;const k=()=>a.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});"requestAnimationFrame"in window?requestAnimationFrame(()=>requestAnimationFrame(k)):setTimeout(k,50)},[]);n.useEffect(()=>{if(typeof window>"u")return;const t=w.current;if(!t)return;w.current=null;const r=window.setTimeout(()=>{Oe(t)},80);return()=>window.clearTimeout(r)},[Ce,Oe]);const Fe=n.useCallback(t=>{const r=re(t);if(r){if(He(),i){w.current=r,de(r),Oe(r);return}P(a=>{if(a===r)return O.current=!0,w.current=null,null;O.current=!1,w.current=r;const k=b??Re;return ue.current.set(k,r),r})}},[i,re,de,Oe,b,He]),ut=n.useCallback((t,r)=>{r&&(t.pointerType==="touch"?(X.current=!0,Fe(r)):X.current=!1)},[Fe]),dt=n.useCallback(t=>{if(t){if(X.current){X.current=!1;return}Fe(t)}},[Fe]),mt=n.useCallback(()=>{He();const t=!i;t&&(O.current=!1),d(t);const r=b??Re,k=re(ue.current.get(r))??x??o[0];if(t){w.current=k;return}const g=k??o[0];de(g),w.current=g},[x,i,de,o,b,He]);n.useEffect(()=>{if(xe({peak:null,relations:null}),G.current=!1,O.current=!1,!o.length){P(B=>B===null?B:null);return}const t=b??Re,r=re(ue.current.get(t)),a=r&&o.includes(r),g=Te.current!==b;Te.current=b;const E=re(pe),oe=!!(E&&o.includes(E))&&(g||E!==r);let K=null;if(oe?(K=E,G.current=!0):a?K=r:K=o[0],!K){P(B=>B===null?B:null);return}ue.current.set(t,K),P(B=>B===K?B:K),w.current=K},[l,o,b,pe,re]),n.useEffect(()=>{if(typeof window>"u")return;if(!b){d(!1);return}const t=`${tt}${b}`;try{const r=window.localStorage.getItem(t);d(r==="true")}catch{d(!1)}},[b]),n.useEffect(()=>{if(typeof window>"u"||!b)return;const t=`${tt}${b}`;try{window.localStorage.setItem(t,i?"true":"false")}catch{}},[i,b]),n.useEffect(()=>{if(ne!==null)return;const t=c.findIndex(r=>r?!!r.use_corrected:!1);t!==-1&&le(t)},[ne,c]);const Ge=(t,r)=>{const a=parseFloat(c[t].temperature??0),g=(parseFloat(c[t].temperature_corrected??a)+r).toFixed(2);h(t,"temperature_corrected",g);const E=parseFloat(g)-a,W=Math.round(E*10),oe=c[t].time||"00:00",K=Et(oe,"HH:mm",new Date),B=_(sr(K,W),"HH:mm");h(t,"time_corrected",B),c[t].use_corrected||h(t,"use_corrected",!0)},{mode:$e,isPeakDay:Ie}=xr({peakTag:Z,existingPeakIsoDate:z,selectedIsoDate:b}),ft=(()=>{if(!b||!l)return"Selecciona una fecha para marcar el día pico";const t=_(l,"dd/MM/yyyy"),r=z?_(F(z),"dd/MM/yyyy"):null;return $e==="assign"?`Marcar día pico en ${t}`:$e==="update"?r?`Mover día pico a ${t} (desde ${r})`:`Mover día pico a ${t}`:r?`Quitar día pico del ${r}`:"Quitar día pico"})(),pt=async()=>{if(p||typeof ce!="function"||!b)return;const t=Ie?null:"peak";Y(t);try{await ce({peakTagOverride:t,keepFormOpen:!0,skipReset:!0});const r=et("peak",Ie,t==="peak");r&&xe(a=>({...a,peak:r}))}catch{Y(Ie?"peak":null)}},ht=t=>{R(t===!0)},bt=(t,r)=>{const a=r===!0;h(t,"use_corrected",a),!a&&ne===t&&le(null)},xt=C("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-transparent disabled:cursor-not-allowed disabled:opacity-60",L?"text-rose-600":"text-slate-600"),gt=C("inline-flex items-center gap-1 rounded-full border border-amber-200 bg-white/70 px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-amber-700 shadow-sm transition-colors",he&&!ie?"hover:bg-amber-50":"cursor-not-allowed opacity-60"),vt=async()=>{if(p||typeof ce!="function"||!b)return;const t=L,r=!t;J(r);try{await ce({overrideHadRelations:r,keepFormOpen:!0,skipReset:!0});const a=et("relations",t,r);a&&xe(k=>({...k,relations:a}))}catch{J(t)}},Xe=n.useMemo(()=>{const t=c.some(W=>{if(!W)return!1;const oe=W.temperature,K=W.temperature_corrected;return[oe,K].some(B=>B==null?!1:String(B).trim()!=="")}),r=(()=>{if(typeof H=="string"){const W=H.trim();return W?W!=="none":!1}return!!H})(),a=!!(A&&A.trim()),k=!!(f&&f.trim()),g=!!($&&$.trim()),E=r||a||k;return{section:{temperature:t,moco:E,observations:g},dock:{temperature:t,symbol:r,sensation:a,appearance:k,observations:g,moco:E}}},[H,c,f,A,$]),Ve=Xe.section,yt=Xe.dock;n.useEffect(()=>{if(!V){G.current=!1;return}if(G.current)return;const t=o.filter(a=>Ve[a]);if(t.length===0){G.current=!0;return}const r=t.includes(x)?x:t[0];de(r),w.current=r,G.current=!0},[x,Ve,V,de,o]),n.useEffect(()=>{V||(G.current=!1)},[V]);const We=n.useMemo(()=>{const t=$t(H);return{temperature:{activeBorder:"border-temp",activeBg:"bg-temp-suave",activeText:"text-temp",filledText:"text-temp",idleText:"text-suave",focusRing:"ring-temp"},moco:{activeBorder:"border-moco",activeBg:"bg-moco-suave",activeText:"text-moco",filledText:"text-moco",idleText:"text-moco-suave",focusRing:"ring-moco"},symbol:t,sensation:{activeBorder:"border-sensacion",activeBg:"bg-sensacion-suave",activeText:"text-sensacion",filledText:"text-sensacion",idleText:"text-suave",focusRing:"ring-sensacion"},appearance:{activeBorder:"border-apariencia",activeBg:"bg-apariencia-suave",activeText:"text-apariencia",filledText:"text-apariencia",idleText:"text-suave",focusRing:"ring-apariencia"},observations:{activeBorder:"border-observaciones",activeBg:"bg-observaciones-suave",activeText:"text-observaciones",filledText:"text-observaciones",idleText:"text-suave",focusRing:"ring-observaciones"}}},[H]),wt=t=>{switch(t){case"temperature":return e.jsxs("div",{className:"space-y-3 rounded-3xl border border-temp bg-temp-suave p-3 shadow-sm",children:[c.map((r,a)=>{const k=`measurement_select_${a}`;return e.jsxs("div",{className:"space-y-3 rounded-3xl border border-amber-200/60 bg-white/70 p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs(ge,{className:"flex items-center text-amber-800 text-sm font-semibold",children:[e.jsx(Pe,{className:"mr-2 h-5 w-5 text-orange-500"}),"Medición ",a+1]}),e.jsxs("label",{htmlFor:k,className:"flex items-center gap-2 rounded-full border border-amber-200 bg-amber-50/70 px-2 py-1 text-[10px] font-semibold uppercase tracking-wide text-amber-700 shadow-sm",children:[e.jsx("input",{id:k,type:"radio",checked:r.selected,onChange:()=>j(a),disabled:p,className:"h-3 w-3 text-orange-500 focus:ring-orange-400"}),e.jsx("span",{children:"gráfica"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(je,{"data-field":a===0?"temperature":void 0,type:"number",step:"0.01",min:"34.0",max:"40.0",value:r.temperature,onChange:g=>h(a,"temperature",g.target.value),onInput:g=>h(a,"temperature",g.target.value),placeholder:"36.50",className:C("bg-white/70 border-amber-200 text-amber-800 font-semibold placeholder-gray-400 focus:border-orange-500 focus:ring-orange-500 ",fe.field),disabled:p}),e.jsx(je,{"data-field":a===0?"time":void 0,type:"time",value:r.time,onChange:g=>h(a,"time",g.target.value),className:C("bg-white/70 border-amber-200 text-gray-600 font-semibold placeholder-gray-400 focus:border-orange-500 focus:ring-orange-500",fe.field),disabled:p})]}),e.jsx("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Q,{type:"button",size:"xs",variant:"outline",disabled:p,className:"bg-slate-100/50 text-slate-600 text-xs rounded-3xl",onClick:()=>{ne===a?le(null):(le(a),(r.temperature_corrected===""||r.temperature_corrected===void 0)&&h(a,"temperature_corrected",r.temperature),r.time_corrected||h(a,"time_corrected",r.time))},children:"Corregir"}),V&&!!r.temperature&&e.jsx(Q,{type:"button",size:"icon",variant:"outline",disabled:p,onClick:()=>ht(!y),className:C("h-7 w-7 border-amber-200 text-amber-600 transition-colors",y?"bg-slate-100 text-slate-500 hover:bg-slate-300/80 border-slate-300":"bg-white/70 hover:bg-slate-100"),title:y?"Restaurar":"Despreciar","aria-label":y?"Restaurar medición ignorada":"Despreciar medición seleccionada",children:y?e.jsx(Dt,{className:"h-4 w-4"}):e.jsx(er,{className:"h-4 w-4"})}),!r.confirmed&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{type:"button",size:"icon",onClick:()=>T(a),disabled:p,className:"h-7 w-7 bg-green-600","aria-label":"Confirmar medición",children:e.jsx(Wt,{className:"h-4 w-4"})}),e.jsx(Q,{type:"button",size:"icon",onClick:()=>v(a),disabled:p,className:"h-7 w-7","aria-label":"Eliminar medición",children:e.jsx(Qe,{className:"h-4 w-4"})})]}),r.confirmed&&V&&(()=>{const g=String(r.temperature??"").trim()===""&&String(r.temperature_corrected??"").trim()==="";return c.length>1||g?e.jsx(Q,{type:"button",size:"icon",onClick:()=>v(a),disabled:p,className:"h-8 w-8","aria-label":"Eliminar medición",children:e.jsx(Qe,{className:"h-4 w-4"})}):null})()]})}),ne===a&&e.jsxs("div",{className:"mt-2 space-y-2 rounded-3xl border border-temp bg-white/80 p-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(je,{type:"number",step:"0.01",min:"34.0",max:"40.0",value:r.temperature_corrected,onChange:g=>{const E=g.target.value;h(a,"temperature_corrected",E),r.use_corrected||h(a,"use_corrected",!0)},className:C("bg-white/70 border-amber-200 placeholder-gray-400 focus:border-orange-500 focus:ring-orange-500 text-orange-700 font-semibold",fe.field),disabled:p}),e.jsx(Q,{type:"button",size:"icon",variant:"outline",disabled:p,onClick:()=>Ge(a,.1),"aria-label":"Aumentar temperatura corregida",children:e.jsx(ar,{className:"h-4 w-4"})}),e.jsx(Q,{type:"button",size:"icon",variant:"outline",disabled:p,onClick:()=>Ge(a,-.1),"aria-label":"Disminuir temperatura corregida",children:e.jsx(Qt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(or,{className:"h-4 w-4 text-orange-500"}),e.jsx(je,{type:"time",value:r.time_corrected,onChange:g=>h(a,"time_corrected",g.target.value),className:"bg-white/70 border-amber-200 text-gray-800 focus:border-orange-500 focus:ring-orange-500",disabled:p})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{id:`use_corrected_${a}`,checked:r.use_corrected,onCheckedChange:g=>bt(a,g)}),e.jsx(ge,{htmlFor:`use_corrected_${a}`,className:"text-xs",children:"Usar valor corregido"})]})]})]},a)}),e.jsxs(Q,{type:"button",onClick:m,disabled:p,size:"xs",variant:"outline",className:"ml-auto flex items-center gap-1 rounded-full border-amber-300/50 bg-amber-50/80 px-3 py-2 text-xs text-amber-600 shadow-sm transition-colors hover:bg-amber-100","aria-label":"Añadir una nueva medición",children:[e.jsx(Lt,{className:"h-3 w-3"}),"Medición"]})]});case"moco":{const r=Vt(H);return e.jsxs("div",{className:"space-y-3 rounded-3xl bg-moco-suave p-3 shadow-xs",children:[e.jsxs("div",{className:"space-y-2 rounded-3xl bg-white/80 border border-sensacion p-3 shadow-sm",children:[e.jsxs(ge,{htmlFor:"mucusSensation",className:"flex items-center text-slate-800 text-sm font-semibold",children:[e.jsx(qe,{className:"mr-2 h-5 w-5 text-sensacion"}),"Sensación del moco"]}),e.jsx(je,{"data-field":"mucusSensation",id:"mucusSensation",value:A,onChange:a=>M(a.target.value),onKeyDown:it,className:C("bg-white/70 border-sensacion text-gray-800 placeholder-gray-400 focus:border-sensacion ring-sensacion focus:ring-2 font-semibold text-sensacion-fuerte",fe.field),disabled:p})]}),e.jsxs("div",{className:"space-y-2 rounded-3xl bg-white/80 p-3 border border-apariencia shadow-sm",children:[e.jsxs(ge,{htmlFor:"mucusAppearance",className:"flex items-center text-slate-800 text-sm font-semibold",children:[e.jsx(Je,{className:"mr-2 h-5 w-5 text-apariencia"}),"Apariencia del moco"]}),e.jsx(je,{"data-field":"mucusAppearance",id:"mucusAppearance",value:f,onChange:a=>N(a.target.value),onKeyDown:lt,ref:Ee,className:C("bg-white/70 border-apariencia text-gray-800 placeholder-gray-400 focus:border-apariencia focus:ring-apariencia font-semibold text-apariencia-fuerte",fe.field),disabled:p})]}),e.jsx("div",{className:C("space-y-3 rounded-3xl border bg-gradient-to-r p-3 shadow-sm transition-colors duration-300",r.panelBorder,r.panelBackground),children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(ge,{htmlFor:"fertilitySymbol",className:"flex items-center text-slate-800 text-sm font-semibold",children:[e.jsx(De,{className:C("mr-2 h-5 w-5 transition-colors duration-300",r.icon)}),"Símbolo de Fertilidad"]}),e.jsxs(Pt,{value:H,onValueChange:S,disabled:p,children:[e.jsx(qt,{ref:Ye,className:C("w-full border bg-white text-gray-800 transition-colors duration-200",r.triggerBorder,r.triggerHover,r.triggerActive,r.triggerFocus,fe.field),"data-field":"fertilitySymbol",children:e.jsx(Ut,{placeholder:"Selecciona un símbolo"})}),e.jsx(Yt,{className:C("bg-white text-gray-800",r.contentBorder,fe.dropdown),children:Gt.map(a=>e.jsx(Xt,{value:a.value,className:"cursor-pointer rounded-3xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:C("mr-2 h-4 w-4 rounded-full border border-gray-300",a.pattern==="spotting-pattern"?"spotting-pattern-icon":a.color)}),a.label]})},a.value))})]})]})})]})}case"observations":return e.jsxs("div",{className:"space-y-2 rounded-3xl border border-observaciones bg-observaciones-suave p-3 shadow-sm",children:[e.jsxs(ge,{htmlFor:"observations",className:"flex items-center text-slate-800 text-sm font-semibold",children:[e.jsx(Be,{className:"mr-2 h-5 w-5 text-observaciones"}),"Observaciones"]}),e.jsx(ct,{"data-field":"observations",id:"observations",value:$,onChange:r=>U(r.target.value),className:C("min-h-[40px] resize-none bg-white/70 border-observaciones text-gray-800 placeholder-gray-400 focus:border-observaciones focus:ring-observaciones font-semibold text-observaciones-fuerte",fe.field),disabled:p})]});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 rounded-3xl border border-fertiliapp bg-tarjeta p-3",children:[e.jsxs(ge,{htmlFor:"date",className:"flex items-center text-titulo text-sm font-semibold",children:[e.jsx(nr,{className:"mr-2 h-5 w-5 text-titulo"}),"Fecha del Registro"]}),e.jsxs(Ft,{open:_e,onOpenChange:be,children:[e.jsx(It,{asChild:!0,children:e.jsx(Q,{variant:"outline",className:C("w-full justify-start text-left font-normal bg-white/70 border-fertiliapp-suave text-gray-800 hover:bg-white/70 hover:text-gray-800",!l&&"text-muted-foreground"),disabled:p,children:l?_(l,"PPP",{locale:Ze}):e.jsx("span",{children:"Selecciona una fecha"})})}),e.jsx(zt,{className:"w-auto p-0 bg-white border-pink-200 text-gray-800 rounded-3xl",align:"start",children:e.jsx(Bt,{mode:"single",selected:l,onSelect:t=>{if(!t){be(!1);return}s(D(t)),be(!1)},initialFocus:!0,locale:Ze,disabled:p?()=>!0:I,modifiers:{hasRecord:se},modifiersClassNames:{hasRecord:'relative after:content-["" ] after:absolute after:inset-x-0 after:bottom-1 after:mx-auto after:w-1.5 after:h-1.5 after:rounded-full after:bg-fertiliapp-fuerte'},className:"[&_button]:text-gray-800 [&_button:hover]:bg-fertiliapp-suave [&_button[aria-selected=true]]:bg-fertiliapp-fuerte [&_button[aria-selected=true]]:text-white [&_button[aria-disabled=true]]:text-gray-400"})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{ref:ae,className:C("sticky top-4 z-20 flex w-full items-center gap-2 rounded-3xl border border-pink-200/70 bg-white/80 px-2 py-2 shadow-sm transition-opacity duration-200 backdrop-blur supports-[backdrop-filter]:backdrop-blur-lg sm:top-6",i?"opacity-80":"opacity-100"),children:[e.jsx("div",{className:"flex flex-1 items-center gap-1 sm:gap-2",children:u.map(t=>{const r=t.icon,a=t.sectionKey,k=Ce.includes(a),g=!i&&k,E=We[t.key]||We[a]||{},W=yt[t.key]??Ve[a],oe=E.idleText??"text-slate-500",K=E.filledText??oe;return e.jsxs("button",{type:"button",onPointerDown:B=>ut(B,a),onClick:()=>dt(a),className:C("flex h-11 w-11 items-center justify-center rounded-full border-2 transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 touch-manipulation",E.focusRing,g?C("shadow-inner scale-105",E.activeBorder,E.activeBg,E.activeText):C("border-transparent bg-transparent hover:bg-slate-100",W?K:oe),!g&&i&&"opacity-70","min-h-[44px] min-w-[44px]"),"aria-label":t.ariaLabel,"aria-expanded":k,"aria-controls":`${a}-panel`,"data-active":g,children:[e.jsx(r,{className:C("h-5 w-5 transition-colors duration-200",g?E.activeText:W?K:oe),"aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:t.srLabel})]},t.key)})}),e.jsxs("button",{type:"button",onClick:mt,className:C("ml-auto inline-flex min-h-[32px] min-w-[32px] items-center justify-center rounded-full border px-3 text-xs font-semibold uppercase tracking-wide transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-pink-200",i?"border-pink-200 bg-pink-50/80 text-pink-600 shadow-inner":"border-slate-300 bg-transparent text-slate-500 hover:border-slate-400 hover:text-slate-700"),"aria-pressed":i,"aria-label":i?"Compactar secciones":"Ver todas las secciones",children:[e.jsx("span",{className:"text-lg leading-none","aria-hidden":"true",children:i?"⇤":"⇵"}),e.jsx("span",{className:"sr-only",children:i?"Compactar":"Todo"})]})]})}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx(Zt,{mode:$e,size:"md",onClick:pt,"aria-pressed":Ie,"aria-label":ft,disabled:p||!b}),he&&e.jsxs("button",{type:"button",className:gt,onClick:ye,disabled:p||ie||!he,"aria-label":"Sincronizar temperaturas",children:[e.jsx(cr,{className:"h-3.5 w-3.5","aria-hidden":"true"}),ie?"Sincronizando...":"+ temperatura"]}),e.jsxs("button",{type:"button",className:xt,onClick:vt,disabled:p||!b,"aria-pressed":L,"aria-label":L?"Desmarcar relaciones sexuales":"Marcar relaciones sexuales",children:[e.jsx(Mt,{className:C("h-4 w-4",L?"text-rose-500 fill-current":"text-slate-400"),"aria-hidden":"true"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",children:"RS"})]})]}),(z||te.peak||te.relations)&&e.jsxs("div",{className:"flex items-center justify-between gap-2 text-[11px]",children:[e.jsx("span",{className:"text-slate-500",children:z?`Día pico: ${_(F(z),"dd/MM")}`:""}),(te.peak||te.relations)&&e.jsx("span",{className:"font-medium text-rose-600",role:"status","aria-live":"polite",children:te.peak??te.relations})]})]}),e.jsx("div",{className:"mt-2",ref:ke,children:e.jsx(br,{initial:!1,children:we.filter(t=>Ce.includes(t.key)).map(t=>e.jsx(st.div,{style:{scrollMarginTop:Se},id:`${t.key}-panel`,"data-section":t.key,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.18,ease:"easeInOut"},className:"overflow-hidden",children:e.jsx("div",{className:"pt-2",children:wt(t.key)})},t.key))})})]})},vr=({onCancel:l,isProcessing:s,isEditing:c})=>e.jsxs("div",{className:"flex space-x-3 pt-2",children:[l&&e.jsxs(Q,{type:"button",onClick:l,variant:"outline",className:"w-full rounded-3xl border-pink-200 bg-white/70 text-gray-700 hover:bg-alerta font-semibold py-2.5 text-sm",disabled:s,children:[e.jsx(at,{className:"mr-2 h-5 w-5"}),"Cancelar"]}),e.jsxs(Q,{type:"submit",className:"w-full rounded-3xl bg-ok hover:bg-ok-fuerte text-white font-semibold py-2.5 text-sm shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-102",disabled:s,children:[s?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):e.jsx(ir,{className:"mr-2 h-5 w-5"}),c?"Actualizar":"Guardar"]})]}),yr=(l,s,c,m,h,v=[],T,j)=>{const A=(u={})=>{const o=_(new Date,"HH:mm");return{temperature:"",time:o,selected:!0,temperature_corrected:"",time_corrected:o,use_corrected:!1,confirmed:!0,...u}},M=()=>{if(s?.isoDate)return F(s.isoDate);if(j){const x=D(F(j));if(!Number.isNaN(x.getTime()))return x}const u=D(new Date),o=m?D(F(m)):null,i=h?D(F(h)):null;let d=u;return o&&d<o&&(d=o),i&&d>i&&(d=i),d},[f,N]=n.useState(M),[H,S]=n.useState(()=>{if(Array.isArray(s?.measurements)&&s.measurements.length>0){const u=s.measurements.map(o=>({temperature:o.temperature??"",time:o.time||_(new Date,"HH:mm"),selected:!!o.selected,temperature_corrected:o.temperature_corrected??"",time_corrected:o.time_corrected||o.time||_(new Date,"HH:mm"),use_corrected:!!o.use_corrected,confirmed:!0}));return u.some(o=>o.selected)||(u[0].selected=!0),u}return[A({temperature:s?.temperature_raw===null||s?.temperature_raw===void 0?"":String(s.temperature_raw),temperature_corrected:s?.temperature_corrected===null||s?.temperature_corrected===void 0?"":String(s.temperature_corrected),time:s?.timestamp?_(F(s.timestamp),"HH:mm"):_(new Date,"HH:mm"),time_corrected:s?.timestamp?_(F(s.timestamp),"HH:mm"):_(new Date,"HH:mm"),use_corrected:!!s?.use_corrected})]}),[$,U]=n.useState(s?.mucusSensation??s?.mucus_sensation??""),[L,J]=n.useState(s?.mucusAppearance??s?.mucus_appearance??""),[y,R]=n.useState(s?.fertility_symbol||ze.NONE.value),[Z,Y]=n.useState(s?.observations||""),[z,p]=n.useState(s?.hadRelations??s?.had_relations??!1),[V,q]=n.useState(s?.ignored||!1),[ee,se]=n.useState(s?.peak_marker==="peak"?"peak":null),ce=n.useMemo(()=>v.find(o=>o?.peak_marker==="peak")?.isoDate||null,[v]),{toast:pe}=nt(),ye=n.useRef(s),ie=n.useRef(j);n.useEffect(()=>{const u=!!ye.current,o=ie.current!==j;if(ye.current=s,ie.current=j,s){if(N(F(s.isoDate)),Array.isArray(s.measurements)&&s.measurements.length>0){const i=s.measurements.map(d=>({temperature:d.temperature??"",time:d.time||_(new Date,"HH:mm"),selected:!!d.selected,temperature_corrected:d.temperature_corrected??"",time_corrected:d.time_corrected||d.time||_(new Date,"HH:mm"),use_corrected:!!d.use_corrected,confirmed:!0}));i.some(d=>d.selected)||(i[0].selected=!0),S(i)}else S([A({temperature:s?.temperature_raw===null||s?.temperature_raw===void 0?"":String(s.temperature_raw),temperature_corrected:s?.temperature_corrected===null||s?.temperature_corrected===void 0?"":String(s.temperature_corrected),time:s?.timestamp?_(F(s.timestamp),"HH:mm"):_(new Date,"HH:mm"),time_corrected:s?.timestamp?_(F(s.timestamp),"HH:mm"):_(new Date,"HH:mm"),use_corrected:!!s?.use_corrected})]);U(s.mucusSensation??s.mucus_sensation??""),J(s.mucusAppearance??s.mucus_appearance??""),R(s.fertility_symbol||ze.NONE.value),p(s.hadRelations??s.had_relations??!1),Y(s.observations||""),q(s.ignored||!1),se(s.peak_marker==="peak"?"peak":null)}else S([A()]),U(""),J(""),R(ze.NONE.value),Y(""),p(!1),q(!1),se(null),(!u||o)&&N(M())},[s,j]),n.useEffect(()=>{if(s)return;const u=m?D(F(m)):null,o=h?D(F(h)):null;N(i=>{if(!i)return M();let d=i;return u&&d<u&&(d=u),o&&d>o&&(d=o),d})},[m,h,s]),n.useEffect(()=>{if(!T)return;const u=_(f,"yyyy-MM-dd"),o=v.find(i=>i.isoDate===u);T(o||null),o&&se(o.peak_marker==="peak"?"peak":null)},[f,v,T]);const he=()=>{S(u=>{const o=_(new Date,"HH:mm");return u.length?[...u,A({temperature:u[u.length-1]?.temperature||"",time:o,time_corrected:o,selected:!1,confirmed:!1})]:[A({time:o,time_corrected:o,confirmed:!1})]})},_e=u=>{S(o=>{const i=o.filter((d,x)=>x!==u);return i.length?(i.some(d=>d.selected)||(i[0]={...i[0],selected:!0}),i):[A()]})},be=u=>{S(o=>{const i=[...o];return i[u]={...i[u],confirmed:!0},i})},ne=(u,o,i)=>{S(d=>{const x=[...d];return x[u]={...x[u],[o]:i},x})},le=u=>{S(o=>o.map((i,d)=>({...i,selected:d===u})))},te=(u={})=>{const{overrideMeasurements:o,overrideIgnored:i,peakTagOverride:d,overrideHadRelations:x}=u;if(!f)return pe({title:"Error",description:"La fecha es obligatoria.",variant:"destructive"}),null;const P=D(F(m)),ae=h?D(F(h)):null;if(f<P||ae&&f>ae)return pe({title:"Error",description:"La fecha debe estar dentro del ciclo.",variant:"destructive"}),null;const ke=_(f,"yyyy-MM-dd"),w=I=>{if(I==null||I==="")return null;const b=parseFloat(String(I).replace(",","."));return Number.isFinite(b)?b:null},X=Object.prototype.hasOwnProperty.call(u,"peakTagOverride")?d:ee,ue=Array.isArray(o)?o:H,Te=I=>{if(!I)return!1;const b=I.temperature,Se=I.temperature_corrected,Ke=b==null?"":String(b).trim(),Ee=Se==null?"":String(Se).trim();return Ke!==""||Ee!==""},Ce=ue.filter(Te),Me=Object.prototype.hasOwnProperty.call(u,"overrideHadRelations")?!!x:z;return{isoDate:ke,measurements:Ce.map(I=>({temperature:w(I.temperature),time:I.time,selected:I.selected,temperature_corrected:w(I.temperature_corrected),time_corrected:I.time_corrected,use_corrected:!!I.use_corrected})),mucusSensation:$,mucusAppearance:L,fertility_symbol:y,observations:Z,had_relations:Me,ignored:Object.prototype.hasOwnProperty.call(u,"overrideIgnored")?!!i:V,peak_marker:X==="peak"?"peak":null}},xe=()=>{N(M()),S([{temperature:"",time:_(new Date,"HH:mm"),selected:!0,temperature_corrected:"",time_corrected:_(new Date,"HH:mm"),use_corrected:!1,confirmed:!0}]),U(""),J(""),R(ze.NONE.value),Y(""),p(!1),se(null)},G=(u={})=>{const{keepFormOpen:o=!1,skipReset:i=!1,...d}=u,x=te(d);if(!x)return null;const P=l(x,{keepFormOpen:o,skipReset:i});return!c&&!i&&xe(),P};return{date:f,setDate:N,measurements:H,addMeasurement:he,updateMeasurement:ne,selectMeasurement:le,removeMeasurement:_e,confirmMeasurement:be,mucusSensation:$,setMucusSensation:U,mucusAppearance:L,setMucusAppearance:J,fertilitySymbol:y,setFertilitySymbol:R,observations:Z,setObservations:Y,ignored:V,setIgnored:q,peakTag:ee,setPeakTag:se,existingPeakIsoDate:ce,handleSubmit:u=>(u&&typeof u.preventDefault=="function"&&u.preventDefault(),G()),submitCurrentState:G,hadRelations:z,setHadRelations:p}},Tr=({onSubmit:l,initialData:s,onCancel:c,cycleStartDate:m,cycleEndDate:h,isProcessing:v,isEditing:T=!1,cycleData:j=[],onDateSelect:A,defaultIsoDate:M,focusedField:f,initialSectionKey:N=null})=>{const H=n.useRef(null);Kt(!!c,c);const{toast:S}=nt(),$=At(),{syncHealthConnectTemperatures:U}=tr(),{isAvailable:L,hasPermissions:J,refreshPermissions:y,isAndroidApp:R}=Ht(),[Z,Y]=n.useState(!1);n.useEffect(()=>{const w=H.current;if(!w)return;const O=X=>{X.target&&"scrollIntoView"in X.target&&setTimeout(()=>{X.target.scrollIntoView({behavior:"smooth",block:"center"})},50)};return w.addEventListener("focusin",O),()=>w.removeEventListener("focusin",O)},[]),n.useEffect(()=>{if(!f)return;const w=H.current;if(!w)return;const O=w.querySelector(`[data-field="${f}"]`);O&&requestAnimationFrame(()=>{typeof O.scrollIntoView=="function"&&O.scrollIntoView({behavior:"smooth",block:"center"}),typeof O.focus=="function"&&O.focus()})},[f]);const{date:z,setDate:p,measurements:V,addMeasurement:q,updateMeasurement:ee,removeMeasurement:se,confirmMeasurement:ce,selectMeasurement:pe,mucusSensation:ye,setMucusSensation:ie,mucusAppearance:he,setMucusAppearance:_e,fertilitySymbol:be,setFertilitySymbol:ne,observations:le,setObservations:te,hadRelations:xe,setHadRelations:G,ignored:we,setIgnored:u,peakTag:o,setPeakTag:i,existingPeakIsoDate:d,handleSubmit:x,submitCurrentState:P}=yr(l,s,T,m,h,j,A,M),ae=n.useMemo(()=>j.map(w=>F(w.isoDate)),[j]),ke=async()=>{if(Z||v)return;if(!R){S({title:"Disponible solo en Android",description:"Health Connect funciona únicamente en la app Android.",variant:"destructive"});return}if(!L){S({title:"Health Connect no disponible",description:"Instala Health Connect para sincronizar tus temperaturas.",variant:"destructive"}),$("/settings");return}let w=J;if(!w)try{w=await Ot()}catch(O){const X=String(O?.message||O);S({title:"Health Connect: error pidiendo permisos",description:X,variant:"destructive"})}finally{await y()}if(!w){S({title:"Permisos requeridos",description:"Activa Health Connect en ajustes para sincronizar."}),$("/settings");return}Y(!0);try{await U()}finally{Y(!1)}};return e.jsxs(st.form,{ref:H,onSubmit:x,className:"space-y-4 bg-fertiliapp-secundario backdrop-blur-xl p-4 sm:p-6 rounded-3xl border-2 border-fertiliapp-suave shadow-[0_4px_20px_rgba(244,114,182,0.25)] w-full",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.18,ease:"easeOut"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-fertiliapp-fuerte rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-fertiliapp-fuerte",children:T?"Editar Registro":"Añadir Registro"})]}),c&&e.jsx(Q,{type:"button",onClick:c,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-fertiliapp-fuerte hover:bg-pink-50 rounded-full",children:e.jsx(at,{className:"h-5 w-5"})})]}),e.jsx(gr,{date:z,setDate:p,measurements:V,addMeasurement:q,updateMeasurement:ee,removeMeasurement:se,confirmMeasurement:ce,selectMeasurement:pe,mucusSensation:ye,setMucusSensation:ie,mucusAppearance:he,setMucusAppearance:_e,fertilitySymbol:be,setFertilitySymbol:ne,observations:le,setObservations:te,hadRelations:xe,setHadRelations:G,ignored:we,setIgnored:u,peakTag:o,setPeakTag:i,existingPeakIsoDate:d,isProcessing:v,isEditing:T,initialData:s,cycleStartDate:m,cycleEndDate:h,recordedDates:ae,submitCurrentState:P,initialSectionKey:N,onSyncTemperature:ke,isSyncingTemperature:Z,canSyncTemperature:!!(R&&L)}),e.jsx(vr,{onCancel:c,isProcessing:v,isEditing:T})]})};export{br as A,or as C,Tr as D};
