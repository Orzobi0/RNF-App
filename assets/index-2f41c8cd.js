var EN=Object.defineProperty;var IN=(t,e,n)=>e in t?EN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var F0=(t,e,n)=>(IN(t,typeof e!="symbol"?e+"":e,n),n);function SN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var RH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kH(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var SS={exports:{}},Af={},PS={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),PN=Symbol.for("react.portal"),CN=Symbol.for("react.fragment"),AN=Symbol.for("react.strict_mode"),xN=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),kN=Symbol.for("react.forward_ref"),DN=Symbol.for("react.suspense"),NN=Symbol.for("react.memo"),VN=Symbol.for("react.lazy"),U0=Symbol.iterator;function MN(t){return t===null||typeof t!="object"?null:(t=U0&&t[U0]||t["@@iterator"],typeof t=="function"?t:null)}var CS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AS=Object.assign,xS={};function Wa(t,e,n){this.props=t,this.context=e,this.refs=xS,this.updater=n||CS}Wa.prototype.isReactComponent={};Wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bS(){}bS.prototype=Wa.prototype;function ov(t,e,n){this.props=t,this.context=e,this.refs=xS,this.updater=n||CS}var av=ov.prototype=new bS;av.constructor=ov;AS(av,Wa.prototype);av.isPureReactComponent=!0;var j0=Array.isArray,RS=Object.prototype.hasOwnProperty,lv={current:null},kS={key:!0,ref:!0,__self:!0,__source:!0};function DS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)RS.call(e,r)&&!kS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dc,type:t,key:s,ref:o,props:i,_owner:lv.current}}function ON(t,e){return{$$typeof:dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uv(t){return typeof t=="object"&&t!==null&&t.$$typeof===dc}function LN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var B0=/\/+/g;function Xp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LN(""+t.key):e.toString(36)}function Nd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dc:case PN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xp(o,0):r,j0(i)?(n="",t!=null&&(n=t.replace(B0,"$&/")+"/"),Nd(i,e,n,"",function(u){return u})):i!=null&&(uv(i)&&(i=ON(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(B0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",j0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Xp(s,a);o+=Nd(s,e,n,l,i)}else if(l=MN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Xp(s,a++),o+=Nd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jc(t,e,n){if(t==null)return t;var r=[],i=0;return Nd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},Vd={transition:null},UN={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:Vd,ReactCurrentOwner:lv};function NS(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Jc,forEach:function(t,e,n){Jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jc(t,function(){e++}),e},toArray:function(t){return Jc(t,function(e){return e})||[]},only:function(t){if(!uv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Wa;pe.Fragment=CN;pe.Profiler=xN;pe.PureComponent=ov;pe.StrictMode=AN;pe.Suspense=DN;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UN;pe.act=NS;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)RS.call(e,l)&&!kS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:dc,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:RN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bN,_context:t},t.Consumer=t};pe.createElement=DS;pe.createFactory=function(t){var e=DS.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:kN,render:t}};pe.isValidElement=uv;pe.lazy=function(t){return{$$typeof:VN,_payload:{_status:-1,_result:t},_init:FN}};pe.memo=function(t,e){return{$$typeof:NN,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Vd.transition;Vd.transition={};try{t()}finally{Vd.transition=e}};pe.unstable_act=NS;pe.useCallback=function(t,e){return un.current.useCallback(t,e)};pe.useContext=function(t){return un.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return un.current.useDeferredValue(t)};pe.useEffect=function(t,e){return un.current.useEffect(t,e)};pe.useId=function(){return un.current.useId()};pe.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return un.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};pe.useRef=function(t){return un.current.useRef(t)};pe.useState=function(t){return un.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return un.current.useTransition()};pe.version="18.3.1";PS.exports=pe;var b=PS.exports;const It=IS(b),VS=SN({__proto__:null,default:It},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN=b,BN=Symbol.for("react.element"),$N=Symbol.for("react.fragment"),zN=Object.prototype.hasOwnProperty,WN=jN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HN={key:!0,ref:!0,__self:!0,__source:!0};function MS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zN.call(e,r)&&!HN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BN,type:t,key:s,ref:o,props:i,_owner:WN.current}}Af.Fragment=$N;Af.jsx=MS;Af.jsxs=MS;SS.exports=Af;var L=SS.exports,og={},OS={exports:{}},Dn={},LS={exports:{}},FS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,q){var Q=$.length;$.push(q);e:for(;0<Q;){var H=Q-1>>>1,re=$[H];if(0<i(re,q))$[H]=q,$[Q]=re,Q=H;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],Q=$.pop();if(Q!==q){$[0]=Q;e:for(var H=0,re=$.length,oe=re>>>1;H<oe;){var Ve=2*(H+1)-1,xt=$[Ve],mt=Ve+1,ut=$[mt];if(0>i(xt,Q))mt<re&&0>i(ut,xt)?($[H]=ut,$[mt]=Q,H=mt):($[H]=xt,$[Ve]=Q,H=Ve);else if(mt<re&&0>i(ut,Q))$[H]=ut,$[mt]=Q,H=mt;else break e}}return q}function i($,q){var Q=$.sortIndex-q.sortIndex;return Q!==0?Q:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,g=!1,w=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=$)r(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(u)}}function k($){if(E=!1,v($),!w)if(n(l)!==null)w=!0,G(V);else{var q=n(u);q!==null&&J(k,q.startTime-$)}}function V($,q){w=!1,E&&(E=!1,_(T),T=-1),g=!0;var Q=f;try{for(v(q),h=n(l);h!==null&&(!(h.expirationTime>q)||$&&!D());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var re=H(h.expirationTime<=q);q=t.unstable_now(),typeof re=="function"?h.callback=re:h===n(l)&&r(l),v(q)}else r(l);h=n(l)}if(h!==null)var oe=!0;else{var Ve=n(u);Ve!==null&&J(k,Ve.startTime-q),oe=!1}return oe}finally{h=null,f=Q,g=!1}}var N=!1,S=null,T=-1,x=5,R=-1;function D(){return!(t.unstable_now()-R<x)}function A(){if(S!==null){var $=t.unstable_now();R=$;var q=!0;try{q=S(!0,$)}finally{q?C():(N=!1,S=null)}}else N=!1}var C;if(typeof y=="function")C=function(){y(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,B=U.port2;U.port1.onmessage=A,C=function(){B.postMessage(null)}}else C=function(){P(A,0)};function G($){S=$,N||(N=!0,C())}function J($,q){T=P(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,G(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var Q=f;f=q;try{return $()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=f;f=$;try{return q()}finally{f=Q}},t.unstable_scheduleCallback=function($,q,Q){var H=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?H+Q:H):Q=H,$){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,$={id:d++,callback:q,priorityLevel:$,startTime:Q,expirationTime:re,sortIndex:-1},Q>H?($.sortIndex=Q,e(u,$),n(l)===null&&$===n(u)&&(E?(_(T),T=-1):E=!0,J(k,Q-H))):($.sortIndex=re,e(l,$),w||g||(w=!0,G(V))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var q=f;return function(){var Q=f;f=q;try{return $.apply(this,arguments)}finally{f=Q}}}})(FS);LS.exports=FS;var GN=LS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN=b,bn=GN;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var US=new Set,Au={};function co(t,e){ma(t,e),ma(t+"Capture",e)}function ma(t,e){for(Au[t]=e,t=0;t<e.length;t++)US.add(e[t])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ag=Object.prototype.hasOwnProperty,KN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$0={},z0={};function QN(t){return ag.call(z0,t)?!0:ag.call($0,t)?!1:KN.test(t)?z0[t]=!0:($0[t]=!0,!1)}function YN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XN(t,e,n,r){if(e===null||typeof e>"u"||YN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var cv=/[\-:]([a-z])/g;function dv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cv,dv);jt[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cv,dv);jt[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cv,dv);jt[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function hv(t,e,n,r){var i=jt.hasOwnProperty(e)?jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XN(e,n,i,r)&&(n=null),r||i===null?QN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=qN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=Symbol.for("react.element"),jo=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),fv=Symbol.for("react.strict_mode"),lg=Symbol.for("react.profiler"),jS=Symbol.for("react.provider"),BS=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),ug=Symbol.for("react.suspense"),cg=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),$S=Symbol.for("react.offscreen"),W0=Symbol.iterator;function El(t){return t===null||typeof t!="object"?null:(t=W0&&t[W0]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Jp;function Hl(t){if(Jp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jp=e&&e[1]||""}return`
`+Jp+t}var Zp=!1;function em(t,e){if(!t||Zp)return"";Zp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hl(t):""}function JN(t){switch(t.tag){case 5:return Hl(t.type);case 16:return Hl("Lazy");case 13:return Hl("Suspense");case 19:return Hl("SuspenseList");case 0:case 2:case 15:return t=em(t.type,!1),t;case 11:return t=em(t.type.render,!1),t;case 1:return t=em(t.type,!0),t;default:return""}}function dg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bo:return"Fragment";case jo:return"Portal";case lg:return"Profiler";case fv:return"StrictMode";case ug:return"Suspense";case cg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BS:return(t.displayName||"Context")+".Consumer";case jS:return(t._context.displayName||"Context")+".Provider";case pv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mv:return e=t.displayName||null,e!==null?e:dg(t.type)||"Memo";case mi:e=t._payload,t=t._init;try{return dg(t(e))}catch{}}return null}function ZN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dg(e);case 8:return e===fv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eV(t){var e=zS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ed(t){t._valueTracker||(t._valueTracker=eV(t))}function WS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hg(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function H0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HS(t,e){e=e.checked,e!=null&&hv(t,"checked",e,!1)}function fg(t,e){HS(t,e);var n=Gi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pg(t,e.type,n):e.hasOwnProperty("defaultValue")&&pg(t,e.type,Gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function G0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pg(t,e,n){(e!=="number"||uh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function ia(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function q0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Gl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gi(n)}}function GS(t,e){var n=Gi(e.value),r=Gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function K0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var td,KS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tV=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(t){tV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ru[e]=ru[t]})});function QS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ru.hasOwnProperty(t)&&ru[t]?(""+e).trim():e+"px"}function YS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=QS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nV=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yg(t,e){if(e){if(nV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function vg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _g=null;function gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wg=null,sa=null,oa=null;function Q0(t){if(t=pc(t)){if(typeof wg!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Df(e),wg(t.stateNode,t.type,e))}}function XS(t){sa?oa?oa.push(t):oa=[t]:sa=t}function JS(){if(sa){var t=sa,e=oa;if(oa=sa=null,Q0(t),e)for(t=0;t<e.length;t++)Q0(e[t])}}function ZS(t,e){return t(e)}function eP(){}var tm=!1;function tP(t,e,n){if(tm)return t(e,n);tm=!0;try{return ZS(t,e,n)}finally{tm=!1,(sa!==null||oa!==null)&&(eP(),JS())}}function bu(t,e){var n=t.stateNode;if(n===null)return null;var r=Df(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Tg=!1;if(Ur)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Tg=!1}function rV(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var iu=!1,ch=null,dh=!1,Eg=null,iV={onError:function(t){iu=!0,ch=t}};function sV(t,e,n,r,i,s,o,a,l){iu=!1,ch=null,rV.apply(iV,arguments)}function oV(t,e,n,r,i,s,o,a,l){if(sV.apply(this,arguments),iu){if(iu){var u=ch;iu=!1,ch=null}else throw Error(W(198));dh||(dh=!0,Eg=u)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Y0(t){if(ho(t)!==t)throw Error(W(188))}function aV(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Y0(i),t;if(s===r)return Y0(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function rP(t){return t=aV(t),t!==null?iP(t):null}function iP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iP(t);if(e!==null)return e;t=t.sibling}return null}var sP=bn.unstable_scheduleCallback,X0=bn.unstable_cancelCallback,lV=bn.unstable_shouldYield,uV=bn.unstable_requestPaint,ct=bn.unstable_now,cV=bn.unstable_getCurrentPriorityLevel,yv=bn.unstable_ImmediatePriority,oP=bn.unstable_UserBlockingPriority,hh=bn.unstable_NormalPriority,dV=bn.unstable_LowPriority,aP=bn.unstable_IdlePriority,xf=null,fr=null;function hV(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(xf,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:mV,fV=Math.log,pV=Math.LN2;function mV(t){return t>>>=0,t===0?32:31-(fV(t)/pV|0)|0}var nd=64,rd=4194304;function ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ql(a):(s&=o,s!==0&&(r=ql(s)))}else o=n&~i,o!==0?r=ql(o):s!==0&&(r=ql(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),i=1<<n,r|=t[n],e&=~i;return r}function gV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=gV(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ig(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lP(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function nm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function vV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function uP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cP,_v,dP,hP,fP,Sg=!1,id=[],bi=null,Ri=null,ki=null,Ru=new Map,ku=new Map,vi=[],_V="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J0(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":Ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function Sl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pc(e),e!==null&&_v(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wV(t,e,n,r,i){switch(e){case"focusin":return bi=Sl(bi,t,e,n,r,i),!0;case"dragenter":return Ri=Sl(Ri,t,e,n,r,i),!0;case"mouseover":return ki=Sl(ki,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ru.set(s,Sl(Ru.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ku.set(s,Sl(ku.get(s)||null,t,e,n,r,i)),!0}return!1}function pP(t){var e=Ns(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=nP(n),e!==null){t.blockedOn=e,fP(t.priority,function(){dP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Md(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_g=r,n.target.dispatchEvent(r),_g=null}else return e=pc(n),e!==null&&_v(e),t.blockedOn=n,!1;e.shift()}return!0}function Z0(t,e,n){Md(t)&&n.delete(e)}function TV(){Sg=!1,bi!==null&&Md(bi)&&(bi=null),Ri!==null&&Md(Ri)&&(Ri=null),ki!==null&&Md(ki)&&(ki=null),Ru.forEach(Z0),ku.forEach(Z0)}function Pl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sg||(Sg=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,TV)))}function Du(t){function e(i){return Pl(i,t)}if(0<id.length){Pl(id[0],t);for(var n=1;n<id.length;n++){var r=id[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bi!==null&&Pl(bi,t),Ri!==null&&Pl(Ri,t),ki!==null&&Pl(ki,t),Ru.forEach(e),ku.forEach(e),n=0;n<vi.length;n++)r=vi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vi.length&&(n=vi[0],n.blockedOn===null);)pP(n),n.blockedOn===null&&vi.shift()}var aa=Qr.ReactCurrentBatchConfig,ph=!0;function EV(t,e,n,r){var i=Re,s=aa.transition;aa.transition=null;try{Re=1,wv(t,e,n,r)}finally{Re=i,aa.transition=s}}function IV(t,e,n,r){var i=Re,s=aa.transition;aa.transition=null;try{Re=4,wv(t,e,n,r)}finally{Re=i,aa.transition=s}}function wv(t,e,n,r){if(ph){var i=Pg(t,e,n,r);if(i===null)hm(t,e,r,mh,n),J0(t,r);else if(wV(i,t,e,n,r))r.stopPropagation();else if(J0(t,r),e&4&&-1<_V.indexOf(t)){for(;i!==null;){var s=pc(i);if(s!==null&&cP(s),s=Pg(t,e,n,r),s===null&&hm(t,e,r,mh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hm(t,e,r,null,n)}}var mh=null;function Pg(t,e,n,r){if(mh=null,t=gv(r),t=Ns(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mh=t,null}function mP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cV()){case yv:return 1;case oP:return 4;case hh:case dV:return 16;case aP:return 536870912;default:return 16}default:return 16}}var Pi=null,Tv=null,Od=null;function gP(){if(Od)return Od;var t,e=Tv,n=e.length,r,i="value"in Pi?Pi.value:Pi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Od=i.slice(t,1<r?1-r:void 0)}function Ld(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sd(){return!0}function eT(){return!1}function Nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sd:eT,this.isPropagationStopped=eT,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sd)},persist:function(){},isPersistent:sd}),e}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ev=Nn(Ha),fc=et({},Ha,{view:0,detail:0}),SV=Nn(fc),rm,im,Cl,bf=et({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cl&&(Cl&&t.type==="mousemove"?(rm=t.screenX-Cl.screenX,im=t.screenY-Cl.screenY):im=rm=0,Cl=t),rm)},movementY:function(t){return"movementY"in t?t.movementY:im}}),tT=Nn(bf),PV=et({},bf,{dataTransfer:0}),CV=Nn(PV),AV=et({},fc,{relatedTarget:0}),sm=Nn(AV),xV=et({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),bV=Nn(xV),RV=et({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kV=Nn(RV),DV=et({},Ha,{data:0}),nT=Nn(DV),NV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MV[t])?!!e[t]:!1}function Iv(){return OV}var LV=et({},fc,{key:function(t){if(t.key){var e=NV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ld(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iv,charCode:function(t){return t.type==="keypress"?Ld(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ld(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FV=Nn(LV),UV=et({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rT=Nn(UV),jV=et({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iv}),BV=Nn(jV),$V=et({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),zV=Nn($V),WV=et({},bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HV=Nn(WV),GV=[9,13,27,32],Sv=Ur&&"CompositionEvent"in window,su=null;Ur&&"documentMode"in document&&(su=document.documentMode);var qV=Ur&&"TextEvent"in window&&!su,yP=Ur&&(!Sv||su&&8<su&&11>=su),iT=String.fromCharCode(32),sT=!1;function vP(t,e){switch(t){case"keyup":return GV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _P(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function KV(t,e){switch(t){case"compositionend":return _P(e);case"keypress":return e.which!==32?null:(sT=!0,iT);case"textInput":return t=e.data,t===iT&&sT?null:t;default:return null}}function QV(t,e){if($o)return t==="compositionend"||!Sv&&vP(t,e)?(t=gP(),Od=Tv=Pi=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yP&&e.locale!=="ko"?null:e.data;default:return null}}var YV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YV[t.type]:e==="textarea"}function wP(t,e,n,r){XS(r),e=gh(e,"onChange"),0<e.length&&(n=new Ev("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ou=null,Nu=null;function XV(t){kP(t,0)}function Rf(t){var e=Ho(t);if(WS(e))return t}function JV(t,e){if(t==="change")return e}var TP=!1;if(Ur){var om;if(Ur){var am="oninput"in document;if(!am){var aT=document.createElement("div");aT.setAttribute("oninput","return;"),am=typeof aT.oninput=="function"}om=am}else om=!1;TP=om&&(!document.documentMode||9<document.documentMode)}function lT(){ou&&(ou.detachEvent("onpropertychange",EP),Nu=ou=null)}function EP(t){if(t.propertyName==="value"&&Rf(Nu)){var e=[];wP(e,Nu,t,gv(t)),tP(XV,e)}}function ZV(t,e,n){t==="focusin"?(lT(),ou=e,Nu=n,ou.attachEvent("onpropertychange",EP)):t==="focusout"&&lT()}function eM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rf(Nu)}function tM(t,e){if(t==="click")return Rf(e)}function nM(t,e){if(t==="input"||t==="change")return Rf(e)}function rM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:rM;function Vu(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ag.call(e,i)||!tr(t[i],e[i]))return!1}return!0}function uT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cT(t,e){var n=uT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uT(n)}}function IP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SP(){for(var t=window,e=uh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uh(t.document)}return e}function Pv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iM(t){var e=SP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IP(n.ownerDocument.documentElement,n)){if(r!==null&&Pv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cT(n,s);var o=cT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sM=Ur&&"documentMode"in document&&11>=document.documentMode,zo=null,Cg=null,au=null,Ag=!1;function dT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ag||zo==null||zo!==uh(r)||(r=zo,"selectionStart"in r&&Pv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),au&&Vu(au,r)||(au=r,r=gh(Cg,"onSelect"),0<r.length&&(e=new Ev("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zo)))}function od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},lm={},PP={};Ur&&(PP=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function kf(t){if(lm[t])return lm[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in PP)return lm[t]=e[n];return t}var CP=kf("animationend"),AP=kf("animationiteration"),xP=kf("animationstart"),bP=kf("transitionend"),RP=new Map,hT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(t,e){RP.set(t,e),co(e,[t])}for(var um=0;um<hT.length;um++){var cm=hT[um],oM=cm.toLowerCase(),aM=cm[0].toUpperCase()+cm.slice(1);is(oM,"on"+aM)}is(CP,"onAnimationEnd");is(AP,"onAnimationIteration");is(xP,"onAnimationStart");is("dblclick","onDoubleClick");is("focusin","onFocus");is("focusout","onBlur");is(bP,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kl));function fT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oV(r,e,void 0,t),t.currentTarget=null}function kP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;fT(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;fT(i,a,u),s=l}}}if(dh)throw t=Eg,dh=!1,Eg=null,t}function Be(t,e){var n=e[Dg];n===void 0&&(n=e[Dg]=new Set);var r=t+"__bubble";n.has(r)||(DP(e,t,2,!1),n.add(r))}function dm(t,e,n){var r=0;e&&(r|=4),DP(n,t,r,e)}var ad="_reactListening"+Math.random().toString(36).slice(2);function Mu(t){if(!t[ad]){t[ad]=!0,US.forEach(function(n){n!=="selectionchange"&&(lM.has(n)||dm(n,!1,t),dm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ad]||(e[ad]=!0,dm("selectionchange",!1,e))}}function DP(t,e,n,r){switch(mP(e)){case 1:var i=EV;break;case 4:i=IV;break;default:i=wv}n=i.bind(null,e,n,t),i=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ns(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}tP(function(){var u=s,d=gv(n),h=[];e:{var f=RP.get(t);if(f!==void 0){var g=Ev,w=t;switch(t){case"keypress":if(Ld(n)===0)break e;case"keydown":case"keyup":g=FV;break;case"focusin":w="focus",g=sm;break;case"focusout":w="blur",g=sm;break;case"beforeblur":case"afterblur":g=sm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=tT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=CV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=BV;break;case CP:case AP:case xP:g=bV;break;case bP:g=zV;break;case"scroll":g=SV;break;case"wheel":g=HV;break;case"copy":case"cut":case"paste":g=kV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=rT}var E=(e&4)!==0,P=!E&&t==="scroll",_=E?f!==null?f+"Capture":null:f;E=[];for(var y=u,v;y!==null;){v=y;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,_!==null&&(k=bu(y,_),k!=null&&E.push(Ou(y,k,v)))),P)break;y=y.return}0<E.length&&(f=new g(f,w,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==_g&&(w=n.relatedTarget||n.fromElement)&&(Ns(w)||w[jr]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?Ns(w):null,w!==null&&(P=ho(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(E=tT,k="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=rT,k="onPointerLeave",_="onPointerEnter",y="pointer"),P=g==null?f:Ho(g),v=w==null?f:Ho(w),f=new E(k,y+"leave",g,n,d),f.target=P,f.relatedTarget=v,k=null,Ns(d)===u&&(E=new E(_,y+"enter",w,n,d),E.target=v,E.relatedTarget=P,k=E),P=k,g&&w)t:{for(E=g,_=w,y=0,v=E;v;v=So(v))y++;for(v=0,k=_;k;k=So(k))v++;for(;0<y-v;)E=So(E),y--;for(;0<v-y;)_=So(_),v--;for(;y--;){if(E===_||_!==null&&E===_.alternate)break t;E=So(E),_=So(_)}E=null}else E=null;g!==null&&pT(h,f,g,E,!1),w!==null&&P!==null&&pT(h,P,w,E,!0)}}e:{if(f=u?Ho(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var V=JV;else if(oT(f))if(TP)V=nM;else{V=eM;var N=ZV}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(V=tM);if(V&&(V=V(t,u))){wP(h,V,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&pg(f,"number",f.value)}switch(N=u?Ho(u):window,t){case"focusin":(oT(N)||N.contentEditable==="true")&&(zo=N,Cg=u,au=null);break;case"focusout":au=Cg=zo=null;break;case"mousedown":Ag=!0;break;case"contextmenu":case"mouseup":case"dragend":Ag=!1,dT(h,n,d);break;case"selectionchange":if(sM)break;case"keydown":case"keyup":dT(h,n,d)}var S;if(Sv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $o?vP(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(yP&&n.locale!=="ko"&&($o||T!=="onCompositionStart"?T==="onCompositionEnd"&&$o&&(S=gP()):(Pi=d,Tv="value"in Pi?Pi.value:Pi.textContent,$o=!0)),N=gh(u,T),0<N.length&&(T=new nT(T,t,null,n,d),h.push({event:T,listeners:N}),S?T.data=S:(S=_P(n),S!==null&&(T.data=S)))),(S=qV?KV(t,n):QV(t,n))&&(u=gh(u,"onBeforeInput"),0<u.length&&(d=new nT("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}kP(h,e)})}function Ou(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bu(t,n),s!=null&&r.unshift(Ou(t,s,i)),s=bu(t,e),s!=null&&r.push(Ou(t,s,i))),t=t.return}return r}function So(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=bu(n,s),l!=null&&o.unshift(Ou(n,l,a))):i||(l=bu(n,s),l!=null&&o.push(Ou(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uM=/\r\n?/g,cM=/\u0000|\uFFFD/g;function mT(t){return(typeof t=="string"?t:""+t).replace(uM,`
`).replace(cM,"")}function ld(t,e,n){if(e=mT(e),mT(t)!==e&&n)throw Error(W(425))}function yh(){}var xg=null,bg=null;function Rg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,dM=typeof clearTimeout=="function"?clearTimeout:void 0,gT=typeof Promise=="function"?Promise:void 0,hM=typeof queueMicrotask=="function"?queueMicrotask:typeof gT<"u"?function(t){return gT.resolve(null).then(t).catch(fM)}:kg;function fM(t){setTimeout(function(){throw t})}function fm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Du(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Du(e)}function Di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),lr="__reactFiber$"+Ga,Lu="__reactProps$"+Ga,jr="__reactContainer$"+Ga,Dg="__reactEvents$"+Ga,pM="__reactListeners$"+Ga,mM="__reactHandles$"+Ga;function Ns(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yT(t);t!==null;){if(n=t[lr])return n;t=yT(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[lr]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Df(t){return t[Lu]||null}var Ng=[],Go=-1;function ss(t){return{current:t}}function $e(t){0>Go||(t.current=Ng[Go],Ng[Go]=null,Go--)}function Oe(t,e){Go++,Ng[Go]=t.current,t.current=e}var qi={},Zt=ss(qi),gn=ss(!1),Hs=qi;function ga(t,e){var n=t.type.contextTypes;if(!n)return qi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function yn(t){return t=t.childContextTypes,t!=null}function vh(){$e(gn),$e(Zt)}function vT(t,e,n){if(Zt.current!==qi)throw Error(W(168));Oe(Zt,e),Oe(gn,n)}function NP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,ZN(t)||"Unknown",i));return et({},n,r)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,Hs=Zt.current,Oe(Zt,t),Oe(gn,gn.current),!0}function _T(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=NP(t,e,Hs),r.__reactInternalMemoizedMergedChildContext=t,$e(gn),$e(Zt),Oe(Zt,t)):$e(gn),Oe(gn,n)}var br=null,Nf=!1,pm=!1;function VP(t){br===null?br=[t]:br.push(t)}function gM(t){Nf=!0,VP(t)}function os(){if(!pm&&br!==null){pm=!0;var t=0,e=Re;try{var n=br;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Nf=!1}catch(i){throw br!==null&&(br=br.slice(t+1)),sP(yv,os),i}finally{Re=e,pm=!1}}return null}var qo=[],Ko=0,wh=null,Th=0,Ln=[],Fn=0,Gs=null,Rr=1,kr="";function Ts(t,e){qo[Ko++]=Th,qo[Ko++]=wh,wh=t,Th=e}function MP(t,e,n){Ln[Fn++]=Rr,Ln[Fn++]=kr,Ln[Fn++]=Gs,Gs=t;var r=Rr;t=kr;var i=32-Zn(r)-1;r&=~(1<<i),n+=1;var s=32-Zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-Zn(e)+i|n<<i|r,kr=s+t}else Rr=1<<s|n<<i|r,kr=t}function Cv(t){t.return!==null&&(Ts(t,1),MP(t,1,0))}function Av(t){for(;t===wh;)wh=qo[--Ko],qo[Ko]=null,Th=qo[--Ko],qo[Ko]=null;for(;t===Gs;)Gs=Ln[--Fn],Ln[Fn]=null,kr=Ln[--Fn],Ln[Fn]=null,Rr=Ln[--Fn],Ln[Fn]=null}var An=null,Pn=null,He=!1,Xn=null;function OP(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,Pn=Di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gs!==null?{id:Rr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,Pn=null,!0):!1;default:return!1}}function Vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mg(t){if(He){var e=Pn;if(e){var n=e;if(!wT(t,e)){if(Vg(t))throw Error(W(418));e=Di(n.nextSibling);var r=An;e&&wT(t,e)?OP(r,n):(t.flags=t.flags&-4097|2,He=!1,An=t)}}else{if(Vg(t))throw Error(W(418));t.flags=t.flags&-4097|2,He=!1,An=t}}}function TT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function ud(t){if(t!==An)return!1;if(!He)return TT(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rg(t.type,t.memoizedProps)),e&&(e=Pn)){if(Vg(t))throw LP(),Error(W(418));for(;e;)OP(t,e),e=Di(e.nextSibling)}if(TT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=Di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=An?Di(t.stateNode.nextSibling):null;return!0}function LP(){for(var t=Pn;t;)t=Di(t.nextSibling)}function ya(){Pn=An=null,He=!1}function xv(t){Xn===null?Xn=[t]:Xn.push(t)}var yM=Qr.ReactCurrentBatchConfig;function Al(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function cd(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ET(t){var e=t._init;return e(t._payload)}function FP(t){function e(_,y){if(t){var v=_.deletions;v===null?(_.deletions=[y],_.flags|=16):v.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=Oi(_,y),_.index=0,_.sibling=null,_}function s(_,y,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<y?(_.flags|=2,y):v):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,v,k){return y===null||y.tag!==6?(y=Tm(v,_.mode,k),y.return=_,y):(y=i(y,v),y.return=_,y)}function l(_,y,v,k){var V=v.type;return V===Bo?d(_,y,v.props.children,k,v.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===mi&&ET(V)===y.type)?(k=i(y,v.props),k.ref=Al(_,y,v),k.return=_,k):(k=Wd(v.type,v.key,v.props,null,_.mode,k),k.ref=Al(_,y,v),k.return=_,k)}function u(_,y,v,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Em(v,_.mode,k),y.return=_,y):(y=i(y,v.children||[]),y.return=_,y)}function d(_,y,v,k,V){return y===null||y.tag!==7?(y=js(v,_.mode,k,V),y.return=_,y):(y=i(y,v),y.return=_,y)}function h(_,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Tm(""+y,_.mode,v),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zc:return v=Wd(y.type,y.key,y.props,null,_.mode,v),v.ref=Al(_,null,y),v.return=_,v;case jo:return y=Em(y,_.mode,v),y.return=_,y;case mi:var k=y._init;return h(_,k(y._payload),v)}if(Gl(y)||El(y))return y=js(y,_.mode,v,null),y.return=_,y;cd(_,y)}return null}function f(_,y,v,k){var V=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return V!==null?null:a(_,y,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zc:return v.key===V?l(_,y,v,k):null;case jo:return v.key===V?u(_,y,v,k):null;case mi:return V=v._init,f(_,y,V(v._payload),k)}if(Gl(v)||El(v))return V!==null?null:d(_,y,v,k,null);cd(_,v)}return null}function g(_,y,v,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(v)||null,a(y,_,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Zc:return _=_.get(k.key===null?v:k.key)||null,l(y,_,k,V);case jo:return _=_.get(k.key===null?v:k.key)||null,u(y,_,k,V);case mi:var N=k._init;return g(_,y,v,N(k._payload),V)}if(Gl(k)||El(k))return _=_.get(v)||null,d(y,_,k,V,null);cd(y,k)}return null}function w(_,y,v,k){for(var V=null,N=null,S=y,T=y=0,x=null;S!==null&&T<v.length;T++){S.index>T?(x=S,S=null):x=S.sibling;var R=f(_,S,v[T],k);if(R===null){S===null&&(S=x);break}t&&S&&R.alternate===null&&e(_,S),y=s(R,y,T),N===null?V=R:N.sibling=R,N=R,S=x}if(T===v.length)return n(_,S),He&&Ts(_,T),V;if(S===null){for(;T<v.length;T++)S=h(_,v[T],k),S!==null&&(y=s(S,y,T),N===null?V=S:N.sibling=S,N=S);return He&&Ts(_,T),V}for(S=r(_,S);T<v.length;T++)x=g(S,_,T,v[T],k),x!==null&&(t&&x.alternate!==null&&S.delete(x.key===null?T:x.key),y=s(x,y,T),N===null?V=x:N.sibling=x,N=x);return t&&S.forEach(function(D){return e(_,D)}),He&&Ts(_,T),V}function E(_,y,v,k){var V=El(v);if(typeof V!="function")throw Error(W(150));if(v=V.call(v),v==null)throw Error(W(151));for(var N=V=null,S=y,T=y=0,x=null,R=v.next();S!==null&&!R.done;T++,R=v.next()){S.index>T?(x=S,S=null):x=S.sibling;var D=f(_,S,R.value,k);if(D===null){S===null&&(S=x);break}t&&S&&D.alternate===null&&e(_,S),y=s(D,y,T),N===null?V=D:N.sibling=D,N=D,S=x}if(R.done)return n(_,S),He&&Ts(_,T),V;if(S===null){for(;!R.done;T++,R=v.next())R=h(_,R.value,k),R!==null&&(y=s(R,y,T),N===null?V=R:N.sibling=R,N=R);return He&&Ts(_,T),V}for(S=r(_,S);!R.done;T++,R=v.next())R=g(S,_,T,R.value,k),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),y=s(R,y,T),N===null?V=R:N.sibling=R,N=R);return t&&S.forEach(function(A){return e(_,A)}),He&&Ts(_,T),V}function P(_,y,v,k){if(typeof v=="object"&&v!==null&&v.type===Bo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Zc:e:{for(var V=v.key,N=y;N!==null;){if(N.key===V){if(V=v.type,V===Bo){if(N.tag===7){n(_,N.sibling),y=i(N,v.props.children),y.return=_,_=y;break e}}else if(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===mi&&ET(V)===N.type){n(_,N.sibling),y=i(N,v.props),y.ref=Al(_,N,v),y.return=_,_=y;break e}n(_,N);break}else e(_,N);N=N.sibling}v.type===Bo?(y=js(v.props.children,_.mode,k,v.key),y.return=_,_=y):(k=Wd(v.type,v.key,v.props,null,_.mode,k),k.ref=Al(_,y,v),k.return=_,_=k)}return o(_);case jo:e:{for(N=v.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(_,y.sibling),y=i(y,v.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Em(v,_.mode,k),y.return=_,_=y}return o(_);case mi:return N=v._init,P(_,y,N(v._payload),k)}if(Gl(v))return w(_,y,v,k);if(El(v))return E(_,y,v,k);cd(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,v),y.return=_,_=y):(n(_,y),y=Tm(v,_.mode,k),y.return=_,_=y),o(_)):n(_,y)}return P}var va=FP(!0),UP=FP(!1),Eh=ss(null),Ih=null,Qo=null,bv=null;function Rv(){bv=Qo=Ih=null}function kv(t){var e=Eh.current;$e(Eh),t._currentValue=e}function Og(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function la(t,e){Ih=t,bv=Qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(bv!==t)if(t={context:t,memoizedValue:e,next:null},Qo===null){if(Ih===null)throw Error(W(308));Qo=t,Ih.dependencies={lanes:0,firstContext:t}}else Qo=Qo.next=t;return e}var Vs=null;function Dv(t){Vs===null?Vs=[t]:Vs.push(t)}function jP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gi=!1;function Nv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Br(t,n)}return i=r.interleaved,i===null?(e.next=e,Dv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Br(t,n)}function Fd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vv(t,n)}}function IT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sh(t,e,n,r){var i=t.updateQueue;gi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,E=a;switch(f=e,g=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){h=w.call(g,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(g,h,f):w,f==null)break e;h=et({},h,f);break e;case 2:gi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=h}}function ST(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var mc={},pr=ss(mc),Fu=ss(mc),Uu=ss(mc);function Ms(t){if(t===mc)throw Error(W(174));return t}function Vv(t,e){switch(Oe(Uu,e),Oe(Fu,t),Oe(pr,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gg(e,t)}$e(pr),Oe(pr,e)}function _a(){$e(pr),$e(Fu),$e(Uu)}function $P(t){Ms(Uu.current);var e=Ms(pr.current),n=gg(e,t.type);e!==n&&(Oe(Fu,t),Oe(pr,n))}function Mv(t){Fu.current===t&&($e(pr),$e(Fu))}var Ke=ss(0);function Ph(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mm=[];function Ov(){for(var t=0;t<mm.length;t++)mm[t]._workInProgressVersionPrimary=null;mm.length=0}var Ud=Qr.ReactCurrentDispatcher,gm=Qr.ReactCurrentBatchConfig,qs=0,Je=null,Et=null,kt=null,Ch=!1,lu=!1,ju=0,vM=0;function Wt(){throw Error(W(321))}function Lv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function Fv(t,e,n,r,i,s){if(qs=s,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ud.current=t===null||t.memoizedState===null?EM:IM,t=n(r,i),lu){s=0;do{if(lu=!1,ju=0,25<=s)throw Error(W(301));s+=1,kt=Et=null,e.updateQueue=null,Ud.current=SM,t=n(r,i)}while(lu)}if(Ud.current=Ah,e=Et!==null&&Et.next!==null,qs=0,kt=Et=Je=null,Ch=!1,e)throw Error(W(300));return t}function Uv(){var t=ju!==0;return ju=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Je.memoizedState=kt=t:kt=kt.next=t,kt}function zn(){if(Et===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=kt===null?Je.memoizedState:kt.next;if(e!==null)kt=e,Et=t;else{if(t===null)throw Error(W(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},kt===null?Je.memoizedState=kt=t:kt=kt.next=t}return kt}function Bu(t,e){return typeof e=="function"?e(t):e}function ym(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((qs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Je.lanes|=d,Ks|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,tr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Je.lanes|=s,Ks|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vm(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tr(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zP(){}function WP(t,e){var n=Je,r=zn(),i=e(),s=!tr(r.memoizedState,i);if(s&&(r.memoizedState=i,fn=!0),r=r.queue,jv(qP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,$u(9,GP.bind(null,n,r,i,e),void 0,null),Nt===null)throw Error(W(349));qs&30||HP(n,e,i)}return i}function HP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GP(t,e,n,r){e.value=n,e.getSnapshot=r,KP(e)&&QP(t)}function qP(t,e,n){return n(function(){KP(e)&&QP(t)})}function KP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function QP(t){var e=Br(t,1);e!==null&&er(e,t,1,-1)}function PT(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:t},e.queue=t,t=t.dispatch=TM.bind(null,Je,t),[e.memoizedState,t]}function $u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function YP(){return zn().memoizedState}function jd(t,e,n,r){var i=sr();Je.flags|=t,i.memoizedState=$u(1|e,n,void 0,r===void 0?null:r)}function Vf(t,e,n,r){var i=zn();r=r===void 0?null:r;var s=void 0;if(Et!==null){var o=Et.memoizedState;if(s=o.destroy,r!==null&&Lv(r,o.deps)){i.memoizedState=$u(e,n,s,r);return}}Je.flags|=t,i.memoizedState=$u(1|e,n,s,r)}function CT(t,e){return jd(8390656,8,t,e)}function jv(t,e){return Vf(2048,8,t,e)}function XP(t,e){return Vf(4,2,t,e)}function JP(t,e){return Vf(4,4,t,e)}function ZP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eC(t,e,n){return n=n!=null?n.concat([t]):null,Vf(4,4,ZP.bind(null,e,t),n)}function Bv(){}function tC(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nC(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rC(t,e,n){return qs&21?(tr(n,e)||(n=lP(),Je.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function _M(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=gm.transition;gm.transition={};try{t(!1),e()}finally{Re=n,gm.transition=r}}function iC(){return zn().memoizedState}function wM(t,e,n){var r=Mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sC(t))oC(e,n);else if(n=jP(t,e,n,r),n!==null){var i=an();er(n,t,r,i),aC(n,e,r)}}function TM(t,e,n){var r=Mi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sC(t))oC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,tr(a,o)){var l=e.interleaved;l===null?(i.next=i,Dv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=jP(t,e,i,r),n!==null&&(i=an(),er(n,t,r,i),aC(n,e,r))}}function sC(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function oC(t,e){lu=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vv(t,n)}}var Ah={readContext:$n,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},EM={readContext:$n,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:CT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jd(4194308,4,ZP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jd(4194308,4,t,e)},useInsertionEffect:function(t,e){return jd(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wM.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:PT,useDebugValue:Bv,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=PT(!1),e=t[0];return t=_M.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,i=sr();if(He){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Nt===null)throw Error(W(349));qs&30||HP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,CT(qP.bind(null,r,s,t),[t]),r.flags|=2048,$u(9,GP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=sr(),e=Nt.identifierPrefix;if(He){var n=kr,r=Rr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IM={readContext:$n,useCallback:tC,useContext:$n,useEffect:jv,useImperativeHandle:eC,useInsertionEffect:XP,useLayoutEffect:JP,useMemo:nC,useReducer:ym,useRef:YP,useState:function(){return ym(Bu)},useDebugValue:Bv,useDeferredValue:function(t){var e=zn();return rC(e,Et.memoizedState,t)},useTransition:function(){var t=ym(Bu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:zP,useSyncExternalStore:WP,useId:iC,unstable_isNewReconciler:!1},SM={readContext:$n,useCallback:tC,useContext:$n,useEffect:jv,useImperativeHandle:eC,useInsertionEffect:XP,useLayoutEffect:JP,useMemo:nC,useReducer:vm,useRef:YP,useState:function(){return vm(Bu)},useDebugValue:Bv,useDeferredValue:function(t){var e=zn();return Et===null?e.memoizedState=t:rC(e,Et.memoizedState,t)},useTransition:function(){var t=vm(Bu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:zP,useSyncExternalStore:WP,useId:iC,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mf={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),i=Mi(t),s=Or(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ni(t,s,i),e!==null&&(er(e,t,i,r),Fd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),i=Mi(t),s=Or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ni(t,s,i),e!==null&&(er(e,t,i,r),Fd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=Mi(t),i=Or(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ni(t,i,r),e!==null&&(er(e,t,r,n),Fd(e,t,r))}};function AT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vu(n,r)||!Vu(i,s):!0}function lC(t,e,n){var r=!1,i=qi,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=yn(e)?Hs:Zt.current,r=e.contextTypes,s=(r=r!=null)?ga(t,i):qi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mf.enqueueReplaceState(e,e.state,null)}function Fg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Nv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=yn(e)?Hs:Zt.current,i.context=ga(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Lg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Mf.enqueueReplaceState(i,i.state,null),Sh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wa(t,e){try{var n="",r=e;do n+=JN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _m(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ug(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PM=typeof WeakMap=="function"?WeakMap:Map;function uC(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bh||(bh=!0,Qg=r),Ug(t,e)},n}function cC(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ug(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ug(t,e),typeof r!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UM.bind(null,t,e,n),e.then(t,t))}function RT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var CM=Qr.ReactCurrentOwner,fn=!1;function on(t,e,n,r){e.child=t===null?UP(e,null,n,r):va(e,t.child,n,r)}function DT(t,e,n,r,i){n=n.render;var s=e.ref;return la(e,i),r=Fv(t,e,n,r,s,i),n=Uv(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(He&&n&&Cv(e),e.flags|=1,on(t,e,r,i),e.child)}function NT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dC(t,e,s,r,i)):(t=Wd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vu,n(o,r)&&t.ref===e.ref)return $r(t,e,i)}return e.flags|=1,t=Oi(s,r),t.ref=e.ref,t.return=e,e.child=t}function dC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vu(s,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,$r(t,e,i)}return jg(t,e,n,r,i)}function hC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Xo,Tn),Tn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(Xo,Tn),Tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Oe(Xo,Tn),Tn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Oe(Xo,Tn),Tn|=r;return on(t,e,i,n),e.child}function fC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jg(t,e,n,r,i){var s=yn(n)?Hs:Zt.current;return s=ga(e,s),la(e,i),n=Fv(t,e,n,r,s,i),r=Uv(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(He&&r&&Cv(e),e.flags|=1,on(t,e,n,i),e.child)}function VT(t,e,n,r,i){if(yn(n)){var s=!0;_h(e)}else s=!1;if(la(e,i),e.stateNode===null)Bd(t,e),lC(e,n,r),Fg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=yn(n)?Hs:Zt.current,u=ga(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&xT(e,o,r,u),gi=!1;var f=e.memoizedState;o.state=f,Sh(e,r,o,i),l=e.memoizedState,a!==r||f!==l||gn.current||gi?(typeof d=="function"&&(Lg(e,n,d,r),l=e.memoizedState),(a=gi||AT(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=yn(n)?Hs:Zt.current,l=ga(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&xT(e,o,r,l),gi=!1,f=e.memoizedState,o.state=f,Sh(e,r,o,i);var w=e.memoizedState;a!==h||f!==w||gn.current||gi?(typeof g=="function"&&(Lg(e,n,g,r),w=e.memoizedState),(u=gi||AT(e,n,u,r,f,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Bg(t,e,n,r,s,i)}function Bg(t,e,n,r,i,s){fC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_T(e,n,!1),$r(t,e,s);r=e.stateNode,CM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=va(e,t.child,null,s),e.child=va(e,null,a,s)):on(t,e,a,s),e.memoizedState=r.state,i&&_T(e,n,!0),e.child}function pC(t){var e=t.stateNode;e.pendingContext?vT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vT(t,e.context,!1),Vv(t,e.containerInfo)}function MT(t,e,n,r,i){return ya(),xv(i),e.flags|=256,on(t,e,n,r),e.child}var $g={dehydrated:null,treeContext:null,retryLane:0};function zg(t){return{baseLanes:t,cachePool:null,transitions:null}}function mC(t,e,n){var r=e.pendingProps,i=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(Ke,i&1),t===null)return Mg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ff(o,r,0,null),t=js(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zg(n),e.memoizedState=$g,t):$v(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return AM(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Oi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Oi(a,s):(s=js(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?zg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=$g,r}return s=t.child,t=s.sibling,r=Oi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $v(t,e){return e=Ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dd(t,e,n,r){return r!==null&&xv(r),va(e,t.child,null,n),t=$v(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AM(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_m(Error(W(422))),dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ff({mode:"visible",children:r.children},i,0,null),s=js(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&va(e,t.child,null,o),e.child.memoizedState=zg(o),e.memoizedState=$g,s);if(!(e.mode&1))return dd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=_m(s,r,void 0),dd(t,e,o,r)}if(a=(o&t.childLanes)!==0,fn||a){if(r=Nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Br(t,i),er(r,t,i,-1))}return Kv(),r=_m(Error(W(421))),dd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pn=Di(i.nextSibling),An=e,He=!0,Xn=null,t!==null&&(Ln[Fn++]=Rr,Ln[Fn++]=kr,Ln[Fn++]=Gs,Rr=t.id,kr=t.overflow,Gs=e),e=$v(e,r.children),e.flags|=4096,e)}function OT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Og(t.return,e,n)}function wm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(on(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&OT(t,n,e);else if(t.tag===19)OT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ph(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ph(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wm(e,!0,n,null,s);break;case"together":wm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xM(t,e,n){switch(e.tag){case 3:pC(e),ya();break;case 5:$P(e);break;case 1:yn(e.type)&&_h(e);break;case 4:Vv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Oe(Eh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?mC(t,e,n):(Oe(Ke,Ke.current&1),t=$r(t,e,n),t!==null?t.sibling:null);Oe(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,hC(t,e,n)}return $r(t,e,n)}var yC,Wg,vC,_C;yC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wg=function(){};vC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ms(pr.current);var s=null;switch(n){case"input":i=hg(t,i),r=hg(t,r),s=[];break;case"select":i=et({},i,{value:void 0}),r=et({},r,{value:void 0}),s=[];break;case"textarea":i=mg(t,i),r=mg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yh)}yg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Au.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Au.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};_C=function(t,e,n,r){n!==r&&(e.flags|=4)};function xl(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bM(t,e,n){var r=e.pendingProps;switch(Av(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return yn(e.type)&&vh(),Ht(e),null;case 3:return r=e.stateNode,_a(),$e(gn),$e(Zt),Ov(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ud(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Jg(Xn),Xn=null))),Wg(t,e),Ht(e),null;case 5:Mv(e);var i=Ms(Uu.current);if(n=e.type,t!==null&&e.stateNode!=null)vC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Ht(e),null}if(t=Ms(pr.current),ud(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[lr]=e,r[Lu]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<Kl.length;i++)Be(Kl[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":H0(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":q0(r,s),Be("invalid",r)}yg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ld(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ld(r.textContent,a,t),i=["children",""+a]):Au.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":ed(r),G0(r,s,!0);break;case"textarea":ed(r),K0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[lr]=e,t[Lu]=r,yC(t,e,!1,!1),e.stateNode=t;e:{switch(o=vg(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<Kl.length;i++)Be(Kl[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":H0(t,r),i=hg(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=et({},r,{value:void 0}),Be("invalid",t);break;case"textarea":q0(t,r),i=mg(t,r),Be("invalid",t);break;default:i=r}yg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?YS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xu(t,l):typeof l=="number"&&xu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Au.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Be("scroll",t):l!=null&&hv(t,s,l,o))}switch(n){case"input":ed(t),G0(t,r,!1);break;case"textarea":ed(t),K0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ia(t,!!r.multiple,s,!1):r.defaultValue!=null&&ia(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)_C(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ms(Uu.current),Ms(pr.current),ud(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(s=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:ld(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ld(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Ht(e),null;case 13:if($e(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&Pn!==null&&e.mode&1&&!(e.flags&128))LP(),ya(),e.flags|=98560,s=!1;else if(s=ud(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[lr]=e}else ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else Xn!==null&&(Jg(Xn),Xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?St===0&&(St=3):Kv())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return _a(),Wg(t,e),t===null&&Mu(e.stateNode.containerInfo),Ht(e),null;case 10:return kv(e.type._context),Ht(e),null;case 17:return yn(e.type)&&vh(),Ht(e),null;case 19:if($e(Ke),s=e.memoizedState,s===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xl(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ph(t),o!==null){for(e.flags|=128,xl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&ct()>Ta&&(e.flags|=128,r=!0,xl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ph(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Ht(e),null}else 2*ct()-s.renderingStartTime>Ta&&n!==1073741824&&(e.flags|=128,r=!0,xl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ct(),e.sibling=null,n=Ke.current,Oe(Ke,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return qv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function RM(t,e){switch(Av(e),e.tag){case 1:return yn(e.type)&&vh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _a(),$e(gn),$e(Zt),Ov(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mv(e),null;case 13:if($e(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ke),null;case 4:return _a(),null;case 10:return kv(e.type._context),null;case 22:case 23:return qv(),null;case 24:return null;default:return null}}var hd=!1,Qt=!1,kM=typeof WeakSet=="function"?WeakSet:Set,te=null;function Yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function Hg(t,e,n){try{n()}catch(r){it(t,e,r)}}var LT=!1;function DM(t,e){if(xg=ph,t=SP(),Pv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bg={focusedElem:t,selectionRange:n},ph=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,P=w.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:Kn(e.type,E),P);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(k){it(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return w=LT,LT=!1,w}function uu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hg(e,n,s)}i=i.next}while(i!==r)}}function Of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wC(t){var e=t.alternate;e!==null&&(t.alternate=null,wC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Lu],delete e[Dg],delete e[pM],delete e[mM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TC(t){return t.tag===5||t.tag===3||t.tag===4}function FT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yh));else if(r!==4&&(t=t.child,t!==null))for(qg(t,e,n),t=t.sibling;t!==null;)qg(t,e,n),t=t.sibling}function Kg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kg(t,e,n),t=t.sibling;t!==null;)Kg(t,e,n),t=t.sibling}var Mt=null,Qn=!1;function ai(t,e,n){for(n=n.child;n!==null;)EC(t,e,n),n=n.sibling}function EC(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(xf,n)}catch{}switch(n.tag){case 5:Qt||Yo(n,e);case 6:var r=Mt,i=Qn;Mt=null,ai(t,e,n),Mt=r,Qn=i,Mt!==null&&(Qn?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(Qn?(t=Mt,n=n.stateNode,t.nodeType===8?fm(t.parentNode,n):t.nodeType===1&&fm(t,n),Du(t)):fm(Mt,n.stateNode));break;case 4:r=Mt,i=Qn,Mt=n.stateNode.containerInfo,Qn=!0,ai(t,e,n),Mt=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hg(n,e,o),i=i.next}while(i!==r)}ai(t,e,n);break;case 1:if(!Qt&&(Yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){it(n,e,a)}ai(t,e,n);break;case 21:ai(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,ai(t,e,n),Qt=r):ai(t,e,n);break;default:ai(t,e,n)}}function UT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kM),e.forEach(function(r){var i=BM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mt=a.stateNode,Qn=!1;break e;case 3:Mt=a.stateNode.containerInfo,Qn=!0;break e;case 4:Mt=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Mt===null)throw Error(W(160));EC(s,o,i),Mt=null,Qn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){it(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IC(e,t),e=e.sibling}function IC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),ir(t),r&4){try{uu(3,t,t.return),Of(3,t)}catch(E){it(t,t.return,E)}try{uu(5,t,t.return)}catch(E){it(t,t.return,E)}}break;case 1:Gn(e,t),ir(t),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(Gn(e,t),ir(t),r&512&&n!==null&&Yo(n,n.return),t.flags&32){var i=t.stateNode;try{xu(i,"")}catch(E){it(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&HS(i,s),vg(a,o);var u=vg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?YS(i,h):d==="dangerouslySetInnerHTML"?KS(i,h):d==="children"?xu(i,h):hv(i,d,h,u)}switch(a){case"input":fg(i,s);break;case"textarea":GS(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ia(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?ia(i,!!s.multiple,s.defaultValue,!0):ia(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lu]=s}catch(E){it(t,t.return,E)}}break;case 6:if(Gn(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){it(t,t.return,E)}}break;case 3:if(Gn(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Du(e.containerInfo)}catch(E){it(t,t.return,E)}break;case 4:Gn(e,t),ir(t);break;case 13:Gn(e,t),ir(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hv=ct())),r&4&&UT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(u=Qt)||d,Gn(e,t),Qt=u):Gn(e,t),ir(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(te=t,d=t.child;d!==null;){for(h=te=d;te!==null;){switch(f=te,g=f.child,f.tag){case 0:case 11:case 14:case 15:uu(4,f,f.return);break;case 1:Yo(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(E){it(r,n,E)}}break;case 5:Yo(f,f.return);break;case 22:if(f.memoizedState!==null){BT(h);continue}}g!==null?(g.return=f,te=g):BT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=QS("display",o))}catch(E){it(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(E){it(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gn(e,t),ir(t),r&4&&UT(t);break;case 21:break;default:Gn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TC(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xu(i,""),r.flags&=-33);var s=FT(t);Kg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=FT(t);qg(t,a,o);break;default:throw Error(W(161))}}catch(l){it(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NM(t,e,n){te=t,SC(t)}function SC(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Qt;a=hd;var u=Qt;if(hd=o,(Qt=l)&&!u)for(te=i;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?$T(i):l!==null?(l.return=o,te=l):$T(i);for(;s!==null;)te=s,SC(s),s=s.sibling;te=i,hd=a,Qt=u}jT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):jT(t)}}function jT(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||Of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ST(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ST(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Qt||e.flags&512&&Gg(e)}catch(f){it(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function BT(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function $T(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Of(4,e)}catch(l){it(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){it(e,i,l)}}var s=e.return;try{Gg(e)}catch(l){it(e,s,l)}break;case 5:var o=e.return;try{Gg(e)}catch(l){it(e,o,l)}}}catch(l){it(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var VM=Math.ceil,xh=Qr.ReactCurrentDispatcher,zv=Qr.ReactCurrentOwner,Bn=Qr.ReactCurrentBatchConfig,Ee=0,Nt=null,vt=null,Ut=0,Tn=0,Xo=ss(0),St=0,zu=null,Ks=0,Lf=0,Wv=0,cu=null,dn=null,Hv=0,Ta=1/0,xr=null,bh=!1,Qg=null,Vi=null,fd=!1,Ci=null,Rh=0,du=0,Yg=null,$d=-1,zd=0;function an(){return Ee&6?ct():$d!==-1?$d:$d=ct()}function Mi(t){return t.mode&1?Ee&2&&Ut!==0?Ut&-Ut:yM.transition!==null?(zd===0&&(zd=lP()),zd):(t=Re,t!==0||(t=window.event,t=t===void 0?16:mP(t.type)),t):1}function er(t,e,n,r){if(50<du)throw du=0,Yg=null,Error(W(185));hc(t,n,r),(!(Ee&2)||t!==Nt)&&(t===Nt&&(!(Ee&2)&&(Lf|=n),St===4&&_i(t,Ut)),vn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Ta=ct()+500,Nf&&os()))}function vn(t,e){var n=t.callbackNode;yV(t,e);var r=fh(t,t===Nt?Ut:0);if(r===0)n!==null&&X0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&X0(n),e===1)t.tag===0?gM(zT.bind(null,t)):VP(zT.bind(null,t)),hM(function(){!(Ee&6)&&os()}),n=null;else{switch(uP(r)){case 1:n=yv;break;case 4:n=oP;break;case 16:n=hh;break;case 536870912:n=aP;break;default:n=hh}n=DC(n,PC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PC(t,e){if($d=-1,zd=0,Ee&6)throw Error(W(327));var n=t.callbackNode;if(ua()&&t.callbackNode!==n)return null;var r=fh(t,t===Nt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kh(t,r);else{e=r;var i=Ee;Ee|=2;var s=AC();(Nt!==t||Ut!==e)&&(xr=null,Ta=ct()+500,Us(t,e));do try{LM();break}catch(a){CC(t,a)}while(1);Rv(),xh.current=s,Ee=i,vt!==null?e=0:(Nt=null,Ut=0,e=St)}if(e!==0){if(e===2&&(i=Ig(t),i!==0&&(r=i,e=Xg(t,i))),e===1)throw n=zu,Us(t,0),_i(t,r),vn(t,ct()),n;if(e===6)_i(t,r);else{if(i=t.current.alternate,!(r&30)&&!MM(i)&&(e=kh(t,r),e===2&&(s=Ig(t),s!==0&&(r=s,e=Xg(t,s))),e===1))throw n=zu,Us(t,0),_i(t,r),vn(t,ct()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Es(t,dn,xr);break;case 3:if(_i(t,r),(r&130023424)===r&&(e=Hv+500-ct(),10<e)){if(fh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=kg(Es.bind(null,t,dn,xr),e);break}Es(t,dn,xr);break;case 4:if(_i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VM(r/1960))-r,10<r){t.timeoutHandle=kg(Es.bind(null,t,dn,xr),r);break}Es(t,dn,xr);break;case 5:Es(t,dn,xr);break;default:throw Error(W(329))}}}return vn(t,ct()),t.callbackNode===n?PC.bind(null,t):null}function Xg(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&(Us(t,e).flags|=256),t=kh(t,e),t!==2&&(e=dn,dn=n,e!==null&&Jg(e)),t}function Jg(t){dn===null?dn=t:dn.push.apply(dn,t)}function MM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _i(t,e){for(e&=~Wv,e&=~Lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function zT(t){if(Ee&6)throw Error(W(327));ua();var e=fh(t,0);if(!(e&1))return vn(t,ct()),null;var n=kh(t,e);if(t.tag!==0&&n===2){var r=Ig(t);r!==0&&(e=r,n=Xg(t,r))}if(n===1)throw n=zu,Us(t,0),_i(t,e),vn(t,ct()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,dn,xr),vn(t,ct()),null}function Gv(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Ta=ct()+500,Nf&&os())}}function Qs(t){Ci!==null&&Ci.tag===0&&!(Ee&6)&&ua();var e=Ee;Ee|=1;var n=Bn.transition,r=Re;try{if(Bn.transition=null,Re=1,t)return t()}finally{Re=r,Bn.transition=n,Ee=e,!(Ee&6)&&os()}}function qv(){Tn=Xo.current,$e(Xo)}function Us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dM(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(Av(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vh();break;case 3:_a(),$e(gn),$e(Zt),Ov();break;case 5:Mv(r);break;case 4:_a();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:kv(r.type._context);break;case 22:case 23:qv()}n=n.return}if(Nt=t,vt=t=Oi(t.current,null),Ut=Tn=e,St=0,zu=null,Wv=Lf=Ks=0,dn=cu=null,Vs!==null){for(e=0;e<Vs.length;e++)if(n=Vs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vs=null}return t}function CC(t,e){do{var n=vt;try{if(Rv(),Ud.current=Ah,Ch){for(var r=Je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ch=!1}if(qs=0,kt=Et=Je=null,lu=!1,ju=0,zv.current=null,n===null||n.return===null){St=1,zu=e,vt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=RT(o);if(g!==null){g.flags&=-257,kT(g,o,a,s,e),g.mode&1&&bT(s,u,e),e=g,l=u;var w=e.updateQueue;if(w===null){var E=new Set;E.add(l),e.updateQueue=E}else w.add(l);break e}else{if(!(e&1)){bT(s,u,e),Kv();break e}l=Error(W(426))}}else if(He&&a.mode&1){var P=RT(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),kT(P,o,a,s,e),xv(wa(l,a));break e}}s=l=wa(l,a),St!==4&&(St=2),cu===null?cu=[s]:cu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=uC(s,l,e);IT(s,_);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Vi===null||!Vi.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=cC(s,a,e);IT(s,k);break e}}s=s.return}while(s!==null)}bC(n)}catch(V){e=V,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(1)}function AC(){var t=xh.current;return xh.current=Ah,t===null?Ah:t}function Kv(){(St===0||St===3||St===2)&&(St=4),Nt===null||!(Ks&268435455)&&!(Lf&268435455)||_i(Nt,Ut)}function kh(t,e){var n=Ee;Ee|=2;var r=AC();(Nt!==t||Ut!==e)&&(xr=null,Us(t,e));do try{OM();break}catch(i){CC(t,i)}while(1);if(Rv(),Ee=n,xh.current=r,vt!==null)throw Error(W(261));return Nt=null,Ut=0,St}function OM(){for(;vt!==null;)xC(vt)}function LM(){for(;vt!==null&&!lV();)xC(vt)}function xC(t){var e=kC(t.alternate,t,Tn);t.memoizedProps=t.pendingProps,e===null?bC(t):vt=e,zv.current=null}function bC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RM(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,vt=null;return}}else if(n=bM(n,e,Tn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);St===0&&(St=5)}function Es(t,e,n){var r=Re,i=Bn.transition;try{Bn.transition=null,Re=1,FM(t,e,n,r)}finally{Bn.transition=i,Re=r}return null}function FM(t,e,n,r){do ua();while(Ci!==null);if(Ee&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vV(t,s),t===Nt&&(vt=Nt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fd||(fd=!0,DC(hh,function(){return ua(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bn.transition,Bn.transition=null;var o=Re;Re=1;var a=Ee;Ee|=4,zv.current=null,DM(t,n),IC(n,t),iM(bg),ph=!!xg,bg=xg=null,t.current=n,NM(n),uV(),Ee=a,Re=o,Bn.transition=s}else t.current=n;if(fd&&(fd=!1,Ci=t,Rh=i),s=t.pendingLanes,s===0&&(Vi=null),hV(n.stateNode),vn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bh)throw bh=!1,t=Qg,Qg=null,t;return Rh&1&&t.tag!==0&&ua(),s=t.pendingLanes,s&1?t===Yg?du++:(du=0,Yg=t):du=0,os(),null}function ua(){if(Ci!==null){var t=uP(Rh),e=Bn.transition,n=Re;try{if(Bn.transition=null,Re=16>t?16:t,Ci===null)var r=!1;else{if(t=Ci,Ci=null,Rh=0,Ee&6)throw Error(W(331));var i=Ee;for(Ee|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(te=u;te!==null;){var d=te;switch(d.tag){case 0:case 11:case 15:uu(8,d,s)}var h=d.child;if(h!==null)h.return=d,te=h;else for(;te!==null;){d=te;var f=d.sibling,g=d.return;if(wC(d),d===u){te=null;break}if(f!==null){f.return=g,te=f;break}te=g}}}var w=s.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var P=E.sibling;E.sibling=null,E=P}while(E!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,te=_;break e}te=s.return}}var y=t.current;for(te=y;te!==null;){o=te;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,te=v;else e:for(o=y;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Of(9,a)}}catch(V){it(a,a.return,V)}if(a===o){te=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,te=k;break e}te=a.return}}if(Ee=i,os(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(xf,t)}catch{}r=!0}return r}finally{Re=n,Bn.transition=e}}return!1}function WT(t,e,n){e=wa(n,e),e=uC(t,e,1),t=Ni(t,e,1),e=an(),t!==null&&(hc(t,1,e),vn(t,e))}function it(t,e,n){if(t.tag===3)WT(t,t,n);else for(;e!==null;){if(e.tag===3){WT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vi===null||!Vi.has(r))){t=wa(n,t),t=cC(e,t,1),e=Ni(e,t,1),t=an(),e!==null&&(hc(e,1,t),vn(e,t));break}}e=e.return}}function UM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(Ut&n)===n&&(St===4||St===3&&(Ut&130023424)===Ut&&500>ct()-Hv?Us(t,0):Wv|=n),vn(t,e)}function RC(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var n=an();t=Br(t,e),t!==null&&(hc(t,e,n),vn(t,n))}function jM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RC(t,n)}function BM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),RC(t,n)}var kC;kC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,xM(t,e,n);fn=!!(t.flags&131072)}else fn=!1,He&&e.flags&1048576&&MP(e,Th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bd(t,e),t=e.pendingProps;var i=ga(e,Zt.current);la(e,n),i=Fv(null,e,r,t,i,n);var s=Uv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(r)?(s=!0,_h(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nv(e),i.updater=Mf,e.stateNode=i,i._reactInternals=e,Fg(e,r,t,n),e=Bg(null,e,r,!0,s,n)):(e.tag=0,He&&s&&Cv(e),on(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zM(r),t=Kn(r,t),i){case 0:e=jg(null,e,r,t,n);break e;case 1:e=VT(null,e,r,t,n);break e;case 11:e=DT(null,e,r,t,n);break e;case 14:e=NT(null,e,r,Kn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),jg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),VT(t,e,r,i,n);case 3:e:{if(pC(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BP(t,e),Sh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wa(Error(W(423)),e),e=MT(t,e,r,n,i);break e}else if(r!==i){i=wa(Error(W(424)),e),e=MT(t,e,r,n,i);break e}else for(Pn=Di(e.stateNode.containerInfo.firstChild),An=e,He=!0,Xn=null,n=UP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ya(),r===i){e=$r(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return $P(e),t===null&&Mg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Rg(r,i)?o=null:s!==null&&Rg(r,s)&&(e.flags|=32),fC(t,e),on(t,e,o,n),e.child;case 6:return t===null&&Mg(e),null;case 13:return mC(t,e,n);case 4:return Vv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=va(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),DT(t,e,r,i,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Oe(Eh,r._currentValue),r._currentValue=o,s!==null)if(tr(s.value,o)){if(s.children===i.children&&!gn.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Or(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Og(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Og(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}on(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,la(e,n),i=$n(i),r=r(i),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,i=Kn(r,e.pendingProps),i=Kn(r.type,i),NT(t,e,r,i,n);case 15:return dC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),Bd(t,e),e.tag=1,yn(r)?(t=!0,_h(e)):t=!1,la(e,n),lC(e,r,i),Fg(e,r,i,n),Bg(null,e,r,!0,t,n);case 19:return gC(t,e,n);case 22:return hC(t,e,n)}throw Error(W(156,e.tag))};function DC(t,e){return sP(t,e)}function $M(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,r){return new $M(t,e,n,r)}function Qv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zM(t){if(typeof t=="function")return Qv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pv)return 11;if(t===mv)return 14}return 2}function Oi(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bo:return js(n.children,i,s,e);case fv:o=8,i|=8;break;case lg:return t=jn(12,n,e,i|2),t.elementType=lg,t.lanes=s,t;case ug:return t=jn(13,n,e,i),t.elementType=ug,t.lanes=s,t;case cg:return t=jn(19,n,e,i),t.elementType=cg,t.lanes=s,t;case $S:return Ff(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jS:o=10;break e;case BS:o=9;break e;case pv:o=11;break e;case mv:o=14;break e;case mi:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=jn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function js(t,e,n,r){return t=jn(7,t,r,e),t.lanes=n,t}function Ff(t,e,n,r){return t=jn(22,t,r,e),t.elementType=$S,t.lanes=n,t.stateNode={isHidden:!1},t}function Tm(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function Em(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nm(0),this.expirationTimes=nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yv(t,e,n,r,i,s,o,a,l){return t=new WM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nv(s),t}function HM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NC(t){if(!t)return qi;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(yn(n))return NP(t,n,e)}return e}function VC(t,e,n,r,i,s,o,a,l){return t=Yv(n,r,!0,t,i,s,o,a,l),t.context=NC(null),n=t.current,r=an(),i=Mi(n),s=Or(r,i),s.callback=e??null,Ni(n,s,i),t.current.lanes=i,hc(t,i,r),vn(t,r),t}function Uf(t,e,n,r){var i=e.current,s=an(),o=Mi(i);return n=NC(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(i,e,o),t!==null&&(er(t,i,o,s),Fd(t,i,o)),o}function Dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function HT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xv(t,e){HT(t,e),(t=t.alternate)&&HT(t,e)}function GM(){return null}var MC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jv(t){this._internalRoot=t}jf.prototype.render=Jv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Uf(t,e,null,null)};jf.prototype.unmount=Jv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){Uf(null,t,null,null)}),e[jr]=null}};function jf(t){this._internalRoot=t}jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=hP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vi.length&&e!==0&&e<vi[n].priority;n++);vi.splice(n,0,t),n===0&&pP(t)}};function Zv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GT(){}function qM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Dh(o);s.call(u)}}var o=VC(e,r,t,0,null,!1,!1,"",GT);return t._reactRootContainer=o,t[jr]=o.current,Mu(t.nodeType===8?t.parentNode:t),Qs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Dh(l);a.call(u)}}var l=Yv(t,0,!1,null,null,!1,!1,"",GT);return t._reactRootContainer=l,t[jr]=l.current,Mu(t.nodeType===8?t.parentNode:t),Qs(function(){Uf(e,l,n,r)}),l}function $f(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Dh(o);a.call(l)}}Uf(e,o,t,i)}else o=qM(n,e,t,i,r);return Dh(o)}cP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ql(e.pendingLanes);n!==0&&(vv(e,n|1),vn(e,ct()),!(Ee&6)&&(Ta=ct()+500,os()))}break;case 13:Qs(function(){var r=Br(t,1);if(r!==null){var i=an();er(r,t,1,i)}}),Xv(t,1)}};_v=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=an();er(e,t,134217728,n)}Xv(t,134217728)}};dP=function(t){if(t.tag===13){var e=Mi(t),n=Br(t,e);if(n!==null){var r=an();er(n,t,e,r)}Xv(t,e)}};hP=function(){return Re};fP=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};wg=function(t,e,n){switch(e){case"input":if(fg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Df(r);if(!i)throw Error(W(90));WS(r),fg(r,i)}}}break;case"textarea":GS(t,n);break;case"select":e=n.value,e!=null&&ia(t,!!n.multiple,e,!1)}};ZS=Gv;eP=Qs;var KM={usingClientEntryPoint:!1,Events:[pc,Ho,Df,XS,JS,Gv]},bl={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QM={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rP(t),t===null?null:t.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||GM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{xf=pd.inject(QM),fr=pd}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KM;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zv(e))throw Error(W(200));return HM(t,e,null,n)};Dn.createRoot=function(t,e){if(!Zv(t))throw Error(W(299));var n=!1,r="",i=MC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yv(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,Mu(t.nodeType===8?t.parentNode:t),new Jv(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=rP(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return Qs(t)};Dn.hydrate=function(t,e,n){if(!Bf(e))throw Error(W(200));return $f(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Zv(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=MC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=VC(e,null,t,1,n??null,i,!1,s,o),t[jr]=e.current,Mu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new jf(e)};Dn.render=function(t,e,n){if(!Bf(e))throw Error(W(200));return $f(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(W(40));return t._reactRootContainer?(Qs(function(){$f(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};Dn.unstable_batchedUpdates=Gv;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bf(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return $f(t,e,n,!1,r)};Dn.version="18.3.1-next-f1338f8080-20240426";function OC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OC)}catch(t){console.error(t)}}OC(),OS.exports=Dn;var zf=OS.exports;const YM=IS(zf);var qT=zf;og.createRoot=qT.createRoot,og.hydrateRoot=qT.hydrateRoot;const XM="modulepreload",JM=function(t){return"/"+t},KT={},fo=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=JM(s),s in KT)return;KT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":XM,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wu.apply(this,arguments)}var Ai;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ai||(Ai={}));const QT="popstate";function ZM(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Zg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Nh(i)}return tO(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eO(){return Math.random().toString(36).substr(2,8)}function YT(t,e){return{usr:t.state,key:t.key,idx:e}}function Zg(t,e,n,r){return n===void 0&&(n=null),Wu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qa(e):e,{state:n,key:e&&e.key||r||eO()})}function Nh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function tO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ai.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Wu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ai.Pop;let P=d(),_=P==null?null:P-u;u=P,l&&l({action:a,location:E.location,delta:_})}function f(P,_){a=Ai.Push;let y=Zg(E.location,P,_);n&&n(y,P),u=d()+1;let v=YT(y,u),k=E.createHref(y);try{o.pushState(v,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&l&&l({action:a,location:E.location,delta:1})}function g(P,_){a=Ai.Replace;let y=Zg(E.location,P,_);n&&n(y,P),u=d();let v=YT(y,u),k=E.createHref(y);o.replaceState(v,"",k),s&&l&&l({action:a,location:E.location,delta:0})}function w(P){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof P=="string"?P:Nh(P);return y=y.replace(/ $/,"%20"),Ze(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let E={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(QT,h),l=P,()=>{i.removeEventListener(QT,h),l=null}},createHref(P){return e(i,P)},createURL:w,encodeLocation(P){let _=w(P);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:g,go(P){return o.go(P)}};return E}var XT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(XT||(XT={}));function nO(t,e,n){return n===void 0&&(n="/"),rO(t,e,n,!1)}function rO(t,e,n,r){let i=typeof e=="string"?qa(e):e,s=Ea(i.pathname||"/",n);if(s==null)return null;let o=FC(t);iO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=mO(s);a=fO(o[l],u,r)}return a}function FC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Li([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ze(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),FC(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:dO(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of UC(s.path))i(s,o,l)}),e}function UC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=UC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function iO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sO=/^:[\w-]+$/,oO=3,aO=2,lO=1,uO=10,cO=-2,JT=t=>t==="*";function dO(t,e){let n=t.split("/"),r=n.length;return n.some(JT)&&(r+=cO),e&&(r+=aO),n.filter(i=>!JT(i)).reduce((i,s)=>i+(sO.test(s)?oO:s===""?lO:uO),r)}function hO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function fO(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Vh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Li([s,h.pathname]),pathnameBase:_O(Li([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Li([s,h.pathnameBase]))}return o}function Vh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let E=a[h]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const w=a[h];return g&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function pO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),LC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return LC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ea(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qa(t):t;return{pathname:n?n.startsWith("/")?n:yO(n,e):e,search:wO(r),hash:TO(i)}}function yO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Im(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e_(t,e){let n=vO(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qa(t):(i=Wu({},t),Ze(!i.pathname||!i.pathname.includes("?"),Im("?","pathname","search",i)),Ze(!i.pathname||!i.pathname.includes("#"),Im("#","pathname","hash",i)),Ze(!i.search||!i.search.includes("#"),Im("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=gO(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Li=t=>t.join("/").replace(/\/\/+/g,"/"),_O=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function EO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jC=["post","put","patch","delete"];new Set(jC);const IO=["get",...jC];new Set(IO);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hu.apply(this,arguments)}const Wf=b.createContext(null),BC=b.createContext(null),Yr=b.createContext(null),Hf=b.createContext(null),Xr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),$C=b.createContext(null);function SO(t,e){let{relative:n}=e===void 0?{}:e;Ka()||Ze(!1);let{basename:r,navigator:i}=b.useContext(Yr),{hash:s,pathname:o,search:a}=Gf(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Li([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ka(){return b.useContext(Hf)!=null}function po(){return Ka()||Ze(!1),b.useContext(Hf).location}function zC(t){b.useContext(Yr).static||b.useLayoutEffect(t)}function WC(){let{isDataRoute:t}=b.useContext(Xr);return t?LO():PO()}function PO(){Ka()||Ze(!1);let t=b.useContext(Wf),{basename:e,future:n,navigator:r}=b.useContext(Yr),{matches:i}=b.useContext(Xr),{pathname:s}=po(),o=JSON.stringify(e_(i,n.v7_relativeSplatPath)),a=b.useRef(!1);return zC(()=>{a.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=t_(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Li([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function DH(){let{matches:t}=b.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function Gf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Yr),{matches:i}=b.useContext(Xr),{pathname:s}=po(),o=JSON.stringify(e_(i,r.v7_relativeSplatPath));return b.useMemo(()=>t_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function CO(t,e){return AO(t,e)}function AO(t,e,n,r){Ka()||Ze(!1);let{navigator:i,static:s}=b.useContext(Yr),{matches:o}=b.useContext(Xr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=po(),h;if(e){var f;let _=typeof e=="string"?qa(e):e;u==="/"||(f=_.pathname)!=null&&f.startsWith(u)||Ze(!1),h=_}else h=d;let g=h.pathname||"/",w=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=!s&&n&&n.matches&&n.matches.length>0?n.matches:nO(t,{pathname:w}),P=DO(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Li([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Li([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&P?b.createElement(Hf.Provider,{value:{location:Hu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ai.Pop}},P):P}function xO(){let t=OO(),e=EO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,s)}const bO=b.createElement(xO,null);class RO extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Xr.Provider,{value:this.props.routeContext},b.createElement($C.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kO(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(Wf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Xr.Provider,{value:e},r)}function DO(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ze(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,w=!1,E=null,P=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,E=h.route.errorElement||bO,l&&(u<0&&f===0?(FO("route-fallback",!1),w=!0,P=null):u===f&&(w=!0,P=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),y=()=>{let v;return g?v=E:w?v=P:h.route.Component?v=b.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,b.createElement(kO,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(RO,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var HC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HC||{}),Mh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mh||{});function NO(t){let e=b.useContext(Wf);return e||Ze(!1),e}function VO(t){let e=b.useContext(BC);return e||Ze(!1),e}function MO(t){let e=b.useContext(Xr);return e||Ze(!1),e}function GC(t){let e=MO(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function OO(){var t;let e=b.useContext($C),n=VO(Mh.UseRouteError),r=GC(Mh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LO(){let{router:t}=NO(HC.UseNavigateStable),e=GC(Mh.UseNavigateStable),n=b.useRef(!1);return zC(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Hu({fromRouteId:e},s)))},[t,e])}const ZT={};function FO(t,e,n){!e&&!ZT[t]&&(ZT[t]=!0)}function UO(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ey(t){let{to:e,replace:n,state:r,relative:i}=t;Ka()||Ze(!1);let{future:s,static:o}=b.useContext(Yr),{matches:a}=b.useContext(Xr),{pathname:l}=po(),u=WC(),d=t_(e,e_(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function Ar(t){Ze(!1)}function jO(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ai.Pop,navigator:s,static:o=!1,future:a}=t;Ka()&&Ze(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:s,static:o,future:Hu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=qa(r));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:w="default"}=r,E=b.useMemo(()=>{let P=Ea(d,l);return P==null?null:{location:{pathname:P,search:h,hash:f,state:g,key:w},navigationType:i}},[l,d,h,f,g,w,i]);return E==null?null:b.createElement(Yr.Provider,{value:u},b.createElement(Hf.Provider,{children:n,value:E}))}function BO(t){let{children:e,location:n}=t;return CO(ty(e),n)}new Promise(()=>{});function ty(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,ty(r.props.children,s));return}r.type!==Ar&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ty(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oh(){return Oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oh.apply(this,arguments)}function qC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $O(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zO(t,e){return t.button===0&&(!e||e==="_self")&&!$O(t)}const WO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HO=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],GO="6";try{window.__reactRouterVersion=GO}catch{}const qO=b.createContext({isTransitioning:!1}),KO="startTransition",eE=VS[KO];function QO(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=ZM({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&eE?eE(()=>l(h)):l(h)},[l,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>UO(r),[r]),b.createElement(jO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const YO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JO=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=qC(e,WO),{basename:g}=b.useContext(Yr),w,E=!1;if(typeof u=="string"&&XO.test(u)&&(w=u,YO))try{let v=new URL(window.location.href),k=u.startsWith("//")?new URL(v.protocol+u):new URL(u),V=Ea(k.pathname,g);k.origin===v.origin&&V!=null?u=V+k.search+k.hash:E=!0}catch{}let P=SO(u,{relative:i}),_=t2(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function y(v){r&&r(v),v.defaultPrevented||_(v)}return b.createElement("a",Oh({},f,{href:w||P,onClick:E||s?r:y,ref:n,target:l}))}),ZO=b.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:d}=e,h=qC(e,HO),f=Gf(l,{relative:h.relative}),g=po(),w=b.useContext(BC),{navigator:E,basename:P}=b.useContext(Yr),_=w!=null&&n2(f)&&u===!0,y=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,v=g.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(v=v.toLowerCase(),k=k?k.toLowerCase():null,y=y.toLowerCase()),k&&P&&(k=Ea(k,P)||k);const V=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=v===y||!o&&v.startsWith(y)&&v.charAt(V)==="/",S=k!=null&&(k===y||!o&&k.startsWith(y)&&k.charAt(y.length)==="/"),T={isActive:N,isPending:S,isTransitioning:_},x=N?r:void 0,R;typeof s=="function"?R=s(T):R=[s,N?"active":null,S?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(T):a;return b.createElement(JO,Oh({},h,{"aria-current":x,className:R,ref:n,style:D,to:l,viewTransition:u}),typeof d=="function"?d(T):d)});var ny;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ny||(ny={}));var tE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tE||(tE={}));function e2(t){let e=b.useContext(Wf);return e||Ze(!1),e}function t2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=WC(),u=po(),d=Gf(t,{relative:o});return b.useCallback(h=>{if(zO(h,n)){h.preventDefault();let f=r!==void 0?r:Nh(u)===Nh(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}function n2(t,e){e===void 0&&(e={});let n=b.useContext(qO);n==null&&Ze(!1);let{basename:r}=e2(ny.useViewTransitionState),i=Gf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ea(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ea(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vh(i.pathname,o)!=null||Vh(i.pathname,s)!=null}class r2 extends It.Component{constructor(){super(...arguments);F0(this,"state",{error:null})}static getDerivedStateFromError(n){return{error:n}}render(){var n;return this.state.error?L.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[L.jsx("h2",{children:"Se produjo un error"}),L.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(((n=this.state.error)==null?void 0:n.stack)||this.state.error)})]}):this.props.children}}const i2=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},s2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},QC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):s2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new o2;const f=s<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class o2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a2=function(t){const e=KC(t);return QC.encodeByteArray(e,!0)},Lh=function(t){return a2(t).replace(/\./g,"")},YC=function(t){try{return QC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=()=>XC().__FIREBASE_DEFAULTS__,u2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YC(t[1]);return e&&JSON.parse(e)},qf=()=>{try{return i2()||l2()||u2()||c2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JC=t=>{var e,n;return(n=(e=qf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},d2=t=>{const e=JC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ZC=()=>{var t;return(t=qf())==null?void 0:t.config},eA=t=>{var e;return(e=qf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Lh(JSON.stringify(n)),Lh(JSON.stringify(o)),a].join(".")}const hu={};function p2(){const t={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function m2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nE=!1;function nA(t,e){if(typeof window>"u"||typeof document>"u"||!Qa(window.location.host)||hu[t]===e||hu[t]||nE)return;hu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=p2().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{nE=!0,o()},f}function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=m2(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),E=n("learnmore"),P=document.getElementById(E)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),d(P,E);const k=u();l(y,_),v.append(y,w,P,k),document.body.appendChild(v)}s?(w.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function rA(){var e;const t=(e=qf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w2(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){return!rA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function T2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="FirebaseError";class Jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E2,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gc.prototype.create)}}class gc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?I2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jr(i,a,r)}}function I2(t,e){return t.replace(S2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const S2=/\{\$([^}]+)}/g;function P2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ys(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rE(s)&&rE(o)){if(!Ys(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ql(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Yl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function C2(t,e){const n=new A2(t,e);return n.subscribe.bind(n)}class A2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");x2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Sm),i.error===void 0&&(i.error=Sm),i.complete===void 0&&(i.complete=Sm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b2=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new h2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k2(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function R2(t){return t===Is?void 0:t}function k2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new b2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const N2={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},V2=ge.INFO,M2={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},O2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=M2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class n_{constructor(e){this.name=e,this._logLevel=V2,this._logHandler=O2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const L2=(t,e)=>e.some(n=>t instanceof n);let iE,sE;function F2(){return iE||(iE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U2(){return sE||(sE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aA=new WeakMap,ry=new WeakMap,lA=new WeakMap,Pm=new WeakMap,r_=new WeakMap;function j2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aA.set(n,t)}).catch(()=>{}),r_.set(e,t),e}function B2(t){if(ry.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ry.set(t,e)}let iy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ry.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $2(t){iy=t(iy)}function z2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cm(this),e,...n);return lA.set(r,e.sort?e.sort():[e]),Fi(r)}:U2().includes(t)?function(...e){return t.apply(Cm(this),e),Fi(aA.get(this))}:function(...e){return Fi(t.apply(Cm(this),e))}}function W2(t){return typeof t=="function"?z2(t):(t instanceof IDBTransaction&&B2(t),L2(t,F2())?new Proxy(t,iy):t)}function Fi(t){if(t instanceof IDBRequest)return j2(t);if(Pm.has(t))return Pm.get(t);const e=W2(t);return e!==t&&(Pm.set(t,e),r_.set(e,t)),e}const Cm=t=>r_.get(t);function H2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Fi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fi(o.result),l.oldVersion,l.newVersion,Fi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const G2=["get","getKey","getAll","getAllKeys","count"],q2=["put","add","delete","clear"],Am=new Map;function oE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=q2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Am.set(e,s),s}$2(t=>({...t,get:(e,n,r)=>oE(e,n)||t.get(e,n,r),has:(e,n)=>!!oE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Q2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sy="@firebase/app",aE="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new n_("@firebase/app"),Y2="@firebase/app-compat",X2="@firebase/analytics-compat",J2="@firebase/analytics",Z2="@firebase/app-check-compat",eL="@firebase/app-check",tL="@firebase/auth",nL="@firebase/auth-compat",rL="@firebase/database",iL="@firebase/data-connect",sL="@firebase/database-compat",oL="@firebase/functions",aL="@firebase/functions-compat",lL="@firebase/installations",uL="@firebase/installations-compat",cL="@firebase/messaging",dL="@firebase/messaging-compat",hL="@firebase/performance",fL="@firebase/performance-compat",pL="@firebase/remote-config",mL="@firebase/remote-config-compat",gL="@firebase/storage",yL="@firebase/storage-compat",vL="@firebase/firestore",_L="@firebase/ai",wL="@firebase/firestore-compat",TL="firebase",EL="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="[DEFAULT]",IL={[sy]:"fire-core",[Y2]:"fire-core-compat",[J2]:"fire-analytics",[X2]:"fire-analytics-compat",[eL]:"fire-app-check",[Z2]:"fire-app-check-compat",[tL]:"fire-auth",[nL]:"fire-auth-compat",[rL]:"fire-rtdb",[iL]:"fire-data-connect",[sL]:"fire-rtdb-compat",[oL]:"fire-fn",[aL]:"fire-fn-compat",[lL]:"fire-iid",[uL]:"fire-iid-compat",[cL]:"fire-fcm",[dL]:"fire-fcm-compat",[hL]:"fire-perf",[fL]:"fire-perf-compat",[pL]:"fire-rc",[mL]:"fire-rc-compat",[gL]:"fire-gcs",[yL]:"fire-gcs-compat",[vL]:"fire-fst",[wL]:"fire-fst-compat",[_L]:"fire-vertex","fire-js":"fire-js",[TL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Map,SL=new Map,ay=new Map;function lE(t,e){try{t.container.addComponent(e)}catch(n){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ia(t){const e=t.name;if(ay.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;ay.set(e,t);for(const n of Fh.values())lE(n,t);for(const n of SL.values())lE(n,t);return!0}function i_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new gc("app","Firebase",PL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=EL;function uA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:oy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(n||(n=ZC()),!n)throw Ui.create("no-options");const s=Fh.get(i);if(s){if(Ys(n,s.options)&&Ys(r,s.config))return s;throw Ui.create("duplicate-app",{appName:i})}const o=new D2(i);for(const l of ay.values())o.addComponent(l);const a=new CL(n,r,o);return Fh.set(i,a),a}function cA(t=oy){const e=Fh.get(t);if(!e&&t===oy&&ZC())return uA();if(!e)throw Ui.create("no-app",{appName:t});return e}function ji(t,e,n){let r=IL[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(o.join(" "));return}Ia(new Xs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="firebase-heartbeat-database",xL=1,Gu="firebase-heartbeat-store";let xm=null;function dA(){return xm||(xm=H2(AL,xL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),xm}async function bL(t){try{const n=(await dA()).transaction(Gu),r=await n.objectStore(Gu).get(hA(t));return await n.done,r}catch(e){if(e instanceof Jr)zr.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(n.message)}}}async function uE(t,e){try{const r=(await dA()).transaction(Gu,"readwrite");await r.objectStore(Gu).put(e,hA(t)),await r.done}catch(n){if(n instanceof Jr)zr.warn(n.message);else{const r=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zr.warn(r.message)}}}function hA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=1024,kL=30;class DL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>kL){const o=ML(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cE(),{heartbeatsToSend:r,unsentEntries:i}=NL(this._heartbeatsCache.heartbeats),s=Lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return zr.warn(n),""}}}function cE(){return new Date().toISOString().substring(0,10)}function NL(t,e=RL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?T2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dE(t){return Lh(JSON.stringify({version:2,heartbeats:t})).length}function ML(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){Ia(new Xs("platform-logger",e=>new K2(e),"PRIVATE")),Ia(new Xs("heartbeat",e=>new DL(e),"PRIVATE")),ji(sy,aE,t),ji(sy,aE,"esm2020"),ji("fire-js","")}OL("");var LL="firebase",FL="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(LL,FL,"app");var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,fA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function x(){}x.prototype=T.prototype,S.D=T.prototype,S.prototype=new x,S.prototype.constructor=S,S.C=function(R,D,A){for(var C=Array(arguments.length-2),U=2;U<arguments.length;U++)C[U-2]=arguments[U];return T.prototype[D].apply(R,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,x){x||(x=0);var R=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)R[D]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(D=0;16>D;++D)R[D]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=S.g[0],x=S.g[1],D=S.g[2];var A=S.g[3],C=T+(A^x&(D^A))+R[0]+3614090360&4294967295;T=x+(C<<7&4294967295|C>>>25),C=A+(D^T&(x^D))+R[1]+3905402710&4294967295,A=T+(C<<12&4294967295|C>>>20),C=D+(x^A&(T^x))+R[2]+606105819&4294967295,D=A+(C<<17&4294967295|C>>>15),C=x+(T^D&(A^T))+R[3]+3250441966&4294967295,x=D+(C<<22&4294967295|C>>>10),C=T+(A^x&(D^A))+R[4]+4118548399&4294967295,T=x+(C<<7&4294967295|C>>>25),C=A+(D^T&(x^D))+R[5]+1200080426&4294967295,A=T+(C<<12&4294967295|C>>>20),C=D+(x^A&(T^x))+R[6]+2821735955&4294967295,D=A+(C<<17&4294967295|C>>>15),C=x+(T^D&(A^T))+R[7]+4249261313&4294967295,x=D+(C<<22&4294967295|C>>>10),C=T+(A^x&(D^A))+R[8]+1770035416&4294967295,T=x+(C<<7&4294967295|C>>>25),C=A+(D^T&(x^D))+R[9]+2336552879&4294967295,A=T+(C<<12&4294967295|C>>>20),C=D+(x^A&(T^x))+R[10]+4294925233&4294967295,D=A+(C<<17&4294967295|C>>>15),C=x+(T^D&(A^T))+R[11]+2304563134&4294967295,x=D+(C<<22&4294967295|C>>>10),C=T+(A^x&(D^A))+R[12]+1804603682&4294967295,T=x+(C<<7&4294967295|C>>>25),C=A+(D^T&(x^D))+R[13]+4254626195&4294967295,A=T+(C<<12&4294967295|C>>>20),C=D+(x^A&(T^x))+R[14]+2792965006&4294967295,D=A+(C<<17&4294967295|C>>>15),C=x+(T^D&(A^T))+R[15]+1236535329&4294967295,x=D+(C<<22&4294967295|C>>>10),C=T+(D^A&(x^D))+R[1]+4129170786&4294967295,T=x+(C<<5&4294967295|C>>>27),C=A+(x^D&(T^x))+R[6]+3225465664&4294967295,A=T+(C<<9&4294967295|C>>>23),C=D+(T^x&(A^T))+R[11]+643717713&4294967295,D=A+(C<<14&4294967295|C>>>18),C=x+(A^T&(D^A))+R[0]+3921069994&4294967295,x=D+(C<<20&4294967295|C>>>12),C=T+(D^A&(x^D))+R[5]+3593408605&4294967295,T=x+(C<<5&4294967295|C>>>27),C=A+(x^D&(T^x))+R[10]+38016083&4294967295,A=T+(C<<9&4294967295|C>>>23),C=D+(T^x&(A^T))+R[15]+3634488961&4294967295,D=A+(C<<14&4294967295|C>>>18),C=x+(A^T&(D^A))+R[4]+3889429448&4294967295,x=D+(C<<20&4294967295|C>>>12),C=T+(D^A&(x^D))+R[9]+568446438&4294967295,T=x+(C<<5&4294967295|C>>>27),C=A+(x^D&(T^x))+R[14]+3275163606&4294967295,A=T+(C<<9&4294967295|C>>>23),C=D+(T^x&(A^T))+R[3]+4107603335&4294967295,D=A+(C<<14&4294967295|C>>>18),C=x+(A^T&(D^A))+R[8]+1163531501&4294967295,x=D+(C<<20&4294967295|C>>>12),C=T+(D^A&(x^D))+R[13]+2850285829&4294967295,T=x+(C<<5&4294967295|C>>>27),C=A+(x^D&(T^x))+R[2]+4243563512&4294967295,A=T+(C<<9&4294967295|C>>>23),C=D+(T^x&(A^T))+R[7]+1735328473&4294967295,D=A+(C<<14&4294967295|C>>>18),C=x+(A^T&(D^A))+R[12]+2368359562&4294967295,x=D+(C<<20&4294967295|C>>>12),C=T+(x^D^A)+R[5]+4294588738&4294967295,T=x+(C<<4&4294967295|C>>>28),C=A+(T^x^D)+R[8]+2272392833&4294967295,A=T+(C<<11&4294967295|C>>>21),C=D+(A^T^x)+R[11]+1839030562&4294967295,D=A+(C<<16&4294967295|C>>>16),C=x+(D^A^T)+R[14]+4259657740&4294967295,x=D+(C<<23&4294967295|C>>>9),C=T+(x^D^A)+R[1]+2763975236&4294967295,T=x+(C<<4&4294967295|C>>>28),C=A+(T^x^D)+R[4]+1272893353&4294967295,A=T+(C<<11&4294967295|C>>>21),C=D+(A^T^x)+R[7]+4139469664&4294967295,D=A+(C<<16&4294967295|C>>>16),C=x+(D^A^T)+R[10]+3200236656&4294967295,x=D+(C<<23&4294967295|C>>>9),C=T+(x^D^A)+R[13]+681279174&4294967295,T=x+(C<<4&4294967295|C>>>28),C=A+(T^x^D)+R[0]+3936430074&4294967295,A=T+(C<<11&4294967295|C>>>21),C=D+(A^T^x)+R[3]+3572445317&4294967295,D=A+(C<<16&4294967295|C>>>16),C=x+(D^A^T)+R[6]+76029189&4294967295,x=D+(C<<23&4294967295|C>>>9),C=T+(x^D^A)+R[9]+3654602809&4294967295,T=x+(C<<4&4294967295|C>>>28),C=A+(T^x^D)+R[12]+3873151461&4294967295,A=T+(C<<11&4294967295|C>>>21),C=D+(A^T^x)+R[15]+530742520&4294967295,D=A+(C<<16&4294967295|C>>>16),C=x+(D^A^T)+R[2]+3299628645&4294967295,x=D+(C<<23&4294967295|C>>>9),C=T+(D^(x|~A))+R[0]+4096336452&4294967295,T=x+(C<<6&4294967295|C>>>26),C=A+(x^(T|~D))+R[7]+1126891415&4294967295,A=T+(C<<10&4294967295|C>>>22),C=D+(T^(A|~x))+R[14]+2878612391&4294967295,D=A+(C<<15&4294967295|C>>>17),C=x+(A^(D|~T))+R[5]+4237533241&4294967295,x=D+(C<<21&4294967295|C>>>11),C=T+(D^(x|~A))+R[12]+1700485571&4294967295,T=x+(C<<6&4294967295|C>>>26),C=A+(x^(T|~D))+R[3]+2399980690&4294967295,A=T+(C<<10&4294967295|C>>>22),C=D+(T^(A|~x))+R[10]+4293915773&4294967295,D=A+(C<<15&4294967295|C>>>17),C=x+(A^(D|~T))+R[1]+2240044497&4294967295,x=D+(C<<21&4294967295|C>>>11),C=T+(D^(x|~A))+R[8]+1873313359&4294967295,T=x+(C<<6&4294967295|C>>>26),C=A+(x^(T|~D))+R[15]+4264355552&4294967295,A=T+(C<<10&4294967295|C>>>22),C=D+(T^(A|~x))+R[6]+2734768916&4294967295,D=A+(C<<15&4294967295|C>>>17),C=x+(A^(D|~T))+R[13]+1309151649&4294967295,x=D+(C<<21&4294967295|C>>>11),C=T+(D^(x|~A))+R[4]+4149444226&4294967295,T=x+(C<<6&4294967295|C>>>26),C=A+(x^(T|~D))+R[11]+3174756917&4294967295,A=T+(C<<10&4294967295|C>>>22),C=D+(T^(A|~x))+R[2]+718787259&4294967295,D=A+(C<<15&4294967295|C>>>17),C=x+(A^(D|~T))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+A&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var x=T-this.blockSize,R=this.B,D=this.h,A=0;A<T;){if(D==0)for(;A<=x;)i(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<T;)if(R[D++]=S.charCodeAt(A++),D==this.blockSize){i(this,R),D=0;break}}else for(;A<T;)if(R[D++]=S[A++],D==this.blockSize){i(this,R),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var x=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=x&255,x/=256;for(this.u(S),S=Array(16),T=x=0;4>T;++T)for(var R=0;32>R;R+=8)S[x++]=this.g[T]>>>R&255;return S};function s(S,T){var x=a;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=T(S)}function o(S,T){this.h=T;for(var x=[],R=!0,D=S.length-1;0<=D;D--){var A=S[D]|0;R&&A==T||(x[D]=A,R=!1)}this.g=x}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return P(u(-S));for(var T=[],x=1,R=0;S>=x;R++)T[R]=S/x|0,x*=4294967296;return new o(T,0)}function d(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return P(d(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=u(Math.pow(T,8)),R=h,D=0;D<S.length;D+=8){var A=Math.min(8,S.length-D),C=parseInt(S.substring(D,D+A),T);8>A?(A=u(Math.pow(T,A)),R=R.j(A).add(u(C))):(R=R.j(x),R=R.add(u(C)))}return R}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-P(this).m();for(var S=0,T=1,x=0;x<this.g.length;x++){var R=this.i(x);S+=(0<=R?R:4294967296+R)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(E(this))return"-"+P(this).toString(S);for(var T=u(Math.pow(S,6)),x=this,R="";;){var D=k(x,T).g;x=_(x,D.j(T));var A=((0<x.g.length?x.g[0]:x.h)>>>0).toString(S);if(x=D,w(x))return A+R;for(;6>A.length;)A="0"+A;R=A+R}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=_(this,S),E(S)?-1:w(S)?0:1};function P(S){for(var T=S.g.length,x=[],R=0;R<T;R++)x[R]=~S.g[R];return new o(x,~S.h).add(f)}t.abs=function(){return E(this)?P(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),x=[],R=0,D=0;D<=T;D++){var A=R+(this.i(D)&65535)+(S.i(D)&65535),C=(A>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);R=C>>>16,A&=65535,C&=65535,x[D]=C<<16|A}return new o(x,x[x.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(P(T))}t.j=function(S){if(w(this)||w(S))return h;if(E(this))return E(S)?P(this).j(P(S)):P(P(this).j(S));if(E(S))return P(this.j(P(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var T=this.g.length+S.g.length,x=[],R=0;R<2*T;R++)x[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<S.g.length;D++){var A=this.i(R)>>>16,C=this.i(R)&65535,U=S.i(D)>>>16,B=S.i(D)&65535;x[2*R+2*D]+=C*B,y(x,2*R+2*D),x[2*R+2*D+1]+=A*B,y(x,2*R+2*D+1),x[2*R+2*D+1]+=C*U,y(x,2*R+2*D+1),x[2*R+2*D+2]+=A*U,y(x,2*R+2*D+2)}for(R=0;R<T;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=T;R<2*T;R++)x[R]=0;return new o(x,0)};function y(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function v(S,T){this.g=S,this.h=T}function k(S,T){if(w(T))throw Error("division by zero");if(w(S))return new v(h,h);if(E(S))return T=k(P(S),T),new v(P(T.g),P(T.h));if(E(T))return T=k(S,P(T)),new v(P(T.g),T.h);if(30<S.g.length){if(E(S)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var x=f,R=T;0>=R.l(S);)x=V(x),R=V(R);var D=N(x,1),A=N(R,1);for(R=N(R,2),x=N(x,2);!w(R);){var C=A.add(R);0>=C.l(S)&&(D=D.add(x),A=C),R=N(R,1),x=N(x,1)}return T=_(S,D.j(T)),new v(D,T)}for(D=h;0<=S.l(T);){for(x=Math.max(1,Math.floor(S.m()/T.m())),R=Math.ceil(Math.log(x)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),A=u(x),C=A.j(T);E(C)||0<C.l(S);)x-=R,A=u(x),C=A.j(T);w(A)&&(A=f),D=D.add(A),S=_(S,C)}return new v(D,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),x=[],R=0;R<T;R++)x[R]=this.i(R)&S.i(R);return new o(x,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),x=[],R=0;R<T;R++)x[R]=this.i(R)|S.i(R);return new o(x,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),x=[],R=0;R<T;R++)x[R]=this.i(R)^S.i(R);return new o(x,this.h^S.h)};function V(S){for(var T=S.g.length+1,x=[],R=0;R<T;R++)x[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(x,S.h)}function N(S,T){var x=T>>5;T%=32;for(var R=S.g.length-x,D=[],A=0;A<R;A++)D[A]=0<T?S.i(A+x)>>>T|S.i(A+x+1)<<32-T:S.i(A+x);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Bi=o}).apply(typeof hE<"u"?hE:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pA,Xl,mA,Hd,ly,gA,yA,vA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,m){return c==Array.prototype||c==Object.prototype||(c[p]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var m=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var M=c[I];if(!(M in m))break e;m=m[M]}c=c[c.length-1],I=m[c],p=p(I),p!=I&&p!=null&&e(m,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var m=0,I=!1,M={next:function(){if(!I&&m<c.length){var F=m++;return{value:p(F,c[F]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,m){return c.call.apply(c.bind,arguments)}function h(c,p,m){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),c.apply(p,M)}}return function(){return c.apply(p,arguments)}}function f(c,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function w(c,p){function m(){}m.prototype=p.prototype,c.aa=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(I,M,F){for(var K=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)K[Ne-2]=arguments[Ne];return p.prototype[M].apply(I,K)}}function E(c){const p=c.length;if(0<p){const m=Array(p);for(let I=0;I<p;I++)m[I]=c[I];return m}return[]}function P(c,p){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const M=c.length||0,F=I.length||0;c.length=M+F;for(let K=0;K<F;K++)c[M+K]=I[K]}else c.push(I)}}class _{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(c){return/^[\s\xa0]*$/.test(c)}function v(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function k(c){return k[" "](c),c}k[" "]=function(){};var V=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function N(c,p,m){for(const I in c)p.call(m,c[I],I,c)}function S(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function T(c){const p={};for(const m in c)p[m]=c[m];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,p){let m,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(m in I)c[m]=I[m];for(let F=0;F<x.length;F++)m=x[F],Object.prototype.hasOwnProperty.call(I,m)&&(c[m]=I[m])}}function D(c){var p=1;c=c.split(":");const m=[];for(;0<p&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function A(c){a.setTimeout(()=>{throw c},0)}function C(){var c=q;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class U{constructor(){this.h=this.g=null}add(p,m){const I=B.get();I.set(p,m),this.h?this.h.next=I:this.g=I,this.h=I}}var B=new _(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let J,$=!1,q=new U,Q=()=>{const c=a.Promise.resolve(void 0);J=()=>{c.then(H)}};var H=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(m){A(m)}var p=B;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}$=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return c}();function xt(c,p){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(V){e:{try{k(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:mt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xt.aa.h.call(this)}}w(xt,oe);var mt={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),qe=0;function we(c,p,m,I,M){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!I,this.ha=M,this.key=++qe,this.da=this.fa=!1}function Me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Tt(c){this.src=c,this.g={},this.h=0}Tt.prototype.add=function(c,p,m,I,M){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var K=ni(c,p,I,M);return-1<K?(p=c[K],m||(p.fa=!1)):(p=new we(p,this.src,F,!!I,M),p.fa=m,c.push(p)),p};function Sr(c,p){var m=p.type;if(m in c.g){var I=c.g[m],M=Array.prototype.indexOf.call(I,p,void 0),F;(F=0<=M)&&Array.prototype.splice.call(I,M,1),F&&(Me(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function ni(c,p,m,I){for(var M=0;M<c.length;++M){var F=c[M];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==I)return M}return-1}var Vn="closure_lm_"+(1e6*Math.random()|0),ri={};function sl(c,p,m,I,M){if(I&&I.once)return al(c,p,m,I,M);if(Array.isArray(p)){for(var F=0;F<p.length;F++)sl(c,p[F],m,I,M);return null}return m=Vp(m),c&&c[ut]?c.K(p,m,u(I)?!!I.capture:!!I,M):ol(c,p,m,!1,I,M)}function ol(c,p,m,I,M,F){if(!p)throw Error("Invalid event type");var K=u(M)?!!M.capture:!!M,Ne=Dp(c);if(Ne||(c[Vn]=Ne=new Tt(c)),m=Ne.add(p,m,I,K,F),m.proxy)return m;if(I=Vc(),m.proxy=I,I.src=c,I.listener=m,c.addEventListener)Ve||(M=K),M===void 0&&(M=!1),c.addEventListener(p.toString(),I,M);else if(c.attachEvent)c.attachEvent(Mc(p.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Vc(){function c(m){return p.call(c.src,c.listener,m)}const p=QD;return c}function al(c,p,m,I,M){if(Array.isArray(p)){for(var F=0;F<p.length;F++)al(c,p[F],m,I,M);return null}return m=Vp(m),c&&c[ut]?c.L(p,m,u(I)?!!I.capture:!!I,M):ol(c,p,m,!0,I,M)}function nt(c,p,m,I,M){if(Array.isArray(p))for(var F=0;F<p.length;F++)nt(c,p[F],m,I,M);else I=u(I)?!!I.capture:!!I,m=Vp(m),c&&c[ut]?(c=c.i,p=String(p).toString(),p in c.g&&(F=c.g[p],m=ni(F,m,I,M),-1<m&&(Me(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete c.g[p],c.h--)))):c&&(c=Dp(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ni(p,m,I,M)),(m=-1<c?p[c]:null)&&ll(m))}function ll(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ut])Sr(p.i,c);else{var m=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(m,I,c.capture):p.detachEvent?p.detachEvent(Mc(m),I):p.addListener&&p.removeListener&&p.removeListener(I),(m=Dp(p))?(Sr(m,c),m.h==0&&(m.src=null,p[Vn]=null)):Me(c)}}}function Mc(c){return c in ri?ri[c]:ri[c]="on"+c}function QD(c,p){if(c.da)c=!0;else{p=new xt(p,this);var m=c.listener,I=c.ha||c.src;c.fa&&ll(c),c=m.call(I,p)}return c}function Dp(c){return c=c[Vn],c instanceof Tt?c:null}var Np="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vp(c){return typeof c=="function"?c:(c[Np]||(c[Np]=function(p){return c.handleEvent(p)}),c[Np])}function Bt(){re.call(this),this.i=new Tt(this),this.M=this,this.F=null}w(Bt,re),Bt.prototype[ut]=!0,Bt.prototype.removeEventListener=function(c,p,m,I){nt(this,c,p,m,I)};function tn(c,p){var m,I=c.F;if(I)for(m=[];I;I=I.F)m.push(I);if(c=c.M,I=p.type||p,typeof p=="string")p=new oe(p,c);else if(p instanceof oe)p.target=p.target||c;else{var M=p;p=new oe(I,c),R(p,M)}if(M=!0,m)for(var F=m.length-1;0<=F;F--){var K=p.g=m[F];M=Oc(K,I,!0,p)&&M}if(K=p.g=c,M=Oc(K,I,!0,p)&&M,M=Oc(K,I,!1,p)&&M,m)for(F=0;F<m.length;F++)K=p.g=m[F],M=Oc(K,I,!1,p)&&M}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var m=c.g[p],I=0;I<m.length;I++)Me(m[I]);delete c.g[p],c.h--}}this.F=null},Bt.prototype.K=function(c,p,m,I){return this.i.add(String(c),p,!1,m,I)},Bt.prototype.L=function(c,p,m,I){return this.i.add(String(c),p,!0,m,I)};function Oc(c,p,m,I){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,F=0;F<p.length;++F){var K=p[F];if(K&&!K.da&&K.capture==m){var Ne=K.listener,Vt=K.ha||K.src;K.fa&&Sr(c.i,K),M=Ne.call(Vt,I)!==!1&&M}}return M&&!I.defaultPrevented}function zw(c,p,m){if(typeof c=="function")m&&(c=f(c,m));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Ww(c){c.g=zw(()=>{c.g=null,c.i&&(c.i=!1,Ww(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class YD extends re{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ww(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ul(c){re.call(this),this.h=c,this.g={}}w(ul,re);var Hw=[];function Gw(c){N(c.g,function(p,m){this.g.hasOwnProperty(m)&&ll(p)},c),c.g={}}ul.prototype.N=function(){ul.aa.N.call(this),Gw(this)},ul.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mp=a.JSON.stringify,XD=a.JSON.parse,JD=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Op(){}Op.prototype.h=null;function qw(c){return c.h||(c.h=c.i())}function Kw(){}var cl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lp(){oe.call(this,"d")}w(Lp,oe);function Fp(){oe.call(this,"c")}w(Fp,oe);var ps={},Qw=null;function Lc(){return Qw=Qw||new Bt}ps.La="serverreachability";function Yw(c){oe.call(this,ps.La,c)}w(Yw,oe);function dl(c){const p=Lc();tn(p,new Yw(p))}ps.STAT_EVENT="statevent";function Xw(c,p){oe.call(this,ps.STAT_EVENT,c),this.stat=p}w(Xw,oe);function nn(c){const p=Lc();tn(p,new Xw(p,c))}ps.Ma="timingevent";function Jw(c,p){oe.call(this,ps.Ma,c),this.size=p}w(Jw,oe);function hl(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function fl(){this.g=!0}fl.prototype.xa=function(){this.g=!1};function ZD(c,p,m,I,M,F){c.info(function(){if(c.g)if(F)for(var K="",Ne=F.split("&"),Vt=0;Vt<Ne.length;Vt++){var Pe=Ne[Vt].split("=");if(1<Pe.length){var $t=Pe[0];Pe=Pe[1];var zt=$t.split("_");K=2<=zt.length&&zt[1]=="type"?K+($t+"="+Pe+"&"):K+($t+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+p+`
`+m+`
`+K})}function eN(c,p,m,I,M,F,K){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+p+`
`+m+`
`+F+" "+K})}function wo(c,p,m,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+nN(c,m)+(I?" "+I:"")})}function tN(c,p){c.info(function(){return"TIMEOUT: "+p})}fl.prototype.info=function(){};function nN(c,p){if(!c.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var I=m[c];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<M.length;K++)M[K]=""}}}}return Mp(m)}catch{return p}}var Fc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Up;function Uc(){}w(Uc,Op),Uc.prototype.g=function(){return new XMLHttpRequest},Uc.prototype.i=function(){return{}},Up=new Uc;function ii(c,p,m,I){this.j=c,this.i=p,this.l=m,this.R=I||1,this.U=new ul(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new e0}function e0(){this.i=null,this.g="",this.h=!1}var t0={},jp={};function Bp(c,p,m){c.L=1,c.v=zc(Pr(p)),c.m=m,c.P=!0,n0(c,null)}function n0(c,p){c.F=Date.now(),jc(c),c.A=Pr(c.v);var m=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),g0(m.i,"t",I),c.C=0,m=c.j.J,c.h=new e0,c.g=V0(c.j,m?p:null,!c.m),0<c.O&&(c.M=new YD(f(c.Y,c,c.g),c.O)),p=c.U,m=c.g,I=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(Hw[0]=M.toString()),M=Hw);for(var F=0;F<M.length;F++){var K=sl(m,M[F],I||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=c.H?T(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),dl(),ZD(c.i,c.u,c.A,c.l,c.R,c.m)}ii.prototype.ca=function(c){c=c.target;const p=this.M;p&&Cr(c)==3?p.j():this.Y(c)},ii.prototype.Y=function(c){try{if(c==this.g)e:{const zt=Cr(this.g);var p=this.g.Ba();const Io=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||I0(this.g)))){this.J||zt!=4||p==7||(p==8||0>=Io?dl(3):dl(2)),$p(this);var m=this.g.Z();this.X=m;t:if(r0(this)){var I=I0(this.g);c="";var M=I.length,F=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),pl(this);var K="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,c+=this.h.i.decode(I[p],{stream:!(F&&p==M-1)});I.length=0,this.h.g+=c,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,eN(this.i,this.u,this.A,this.l,this.R,zt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,Vt=this.g;if((Ne=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ne)){var Pe=Ne;break t}}Pe=null}if(m=Pe)wo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zp(this,m);else{this.o=!1,this.s=3,nn(12),ms(this),pl(this);break e}}if(this.P){m=!0;let Hn;for(;!this.J&&this.C<K.length;)if(Hn=rN(this,K),Hn==jp){zt==4&&(this.s=4,nn(14),m=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==t0){this.s=4,nn(15),wo(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else wo(this.i,this.l,Hn,null),zp(this,Hn);if(r0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||K.length!=0||this.h.h||(this.s=1,nn(16),m=!1),this.o=this.o&&m,!m)wo(this.i,this.l,K,"[Invalid Chunked Response]"),ms(this),pl(this);else if(0<K.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Qp($t),$t.M=!0,nn(11))}}else wo(this.i,this.l,K,null),zp(this,K);zt==4&&ms(this),this.o&&!this.J&&(zt==4?R0(this.j,this):(this.o=!1,jc(this)))}else wN(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),ms(this),pl(this)}}}catch{}finally{}};function r0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function rN(c,p){var m=c.C,I=p.indexOf(`
`,m);return I==-1?jp:(m=Number(p.substring(m,I)),isNaN(m)?t0:(I+=1,I+m>p.length?jp:(p=p.slice(I,I+m),c.C=I+m,p)))}ii.prototype.cancel=function(){this.J=!0,ms(this)};function jc(c){c.S=Date.now()+c.I,i0(c,c.I)}function i0(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=hl(f(c.ba,c),p)}function $p(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ii.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(tN(this.i,this.A),this.L!=2&&(dl(),nn(17)),ms(this),this.s=2,pl(this)):i0(this,this.S-c)};function pl(c){c.j.G==0||c.J||R0(c.j,c)}function ms(c){$p(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Gw(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function zp(c,p){try{var m=c.j;if(m.G!=0&&(m.g==c||Wp(m.h,c))){if(!c.K&&Wp(m.h,c)&&m.G==3){try{var I=m.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Qc(m),qc(m);else break e;Kp(m),nn(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=hl(f(m.Za,m),6e3));if(1>=a0(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ys(m,11)}else if((c.K||m.g==c)&&Qc(m),!y(p))for(M=m.Da.g.parse(p),p=0;p<M.length;p++){let Pe=M[p];if(m.T=Pe[0],Pe=Pe[1],m.G==2)if(Pe[0]=="c"){m.K=Pe[1],m.ia=Pe[2];const $t=Pe[3];$t!=null&&(m.la=$t,m.j.info("VER="+m.la));const zt=Pe[4];zt!=null&&(m.Aa=zt,m.j.info("SVER="+m.Aa));const Io=Pe[5];Io!=null&&typeof Io=="number"&&0<Io&&(I=1.5*Io,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const Hn=c.g;if(Hn){const Xc=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xc){var F=I.h;F.g||Xc.indexOf("spdy")==-1&&Xc.indexOf("quic")==-1&&Xc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Hp(F,F.h),F.h=null))}if(I.D){const Yp=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yp&&(I.ya=Yp,Ue(I.I,I.D,Yp))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var K=c;if(I.qa=N0(I,I.J?I.ia:null,I.W),K.K){l0(I.h,K);var Ne=K,Vt=I.L;Vt&&(Ne.I=Vt),Ne.B&&($p(Ne),jc(Ne)),I.g=K}else x0(I);0<m.i.length&&Kc(m)}else Pe[0]!="stop"&&Pe[0]!="close"||ys(m,7);else m.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?ys(m,7):qp(m):Pe[0]!="noop"&&m.l&&m.l.ta(Pe),m.v=0)}}dl(4)}catch{}}var iN=class{constructor(c,p){this.g=c,this.map=p}};function s0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function o0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function a0(c){return c.h?1:c.g?c.g.size:0}function Wp(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Hp(c,p){c.g?c.g.add(p):c.h=p}function l0(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}s0.prototype.cancel=function(){if(this.i=u0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function u0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.D);return p}return E(c.i)}function sN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],m=c.length,I=0;I<m;I++)p.push(c[I]);return p}p=[],m=0;for(I in c)p[m++]=c[I];return p}function oN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var m=0;m<c;m++)p.push(m);return p}p=[],m=0;for(const I in c)p[m++]=I;return p}}}function c0(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var m=oN(c),I=sN(c),M=I.length,F=0;F<M;F++)p.call(void 0,I[F],m&&m[F],c)}var d0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aN(c,p){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var I=c[m].indexOf("="),M=null;if(0<=I){var F=c[m].substring(0,I);M=c[m].substring(I+1)}else F=c[m];p(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function gs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gs){this.h=c.h,Bc(this,c.j),this.o=c.o,this.g=c.g,$c(this,c.s),this.l=c.l;var p=c.i,m=new yl;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),h0(this,m),this.m=c.m}else c&&(p=String(c).match(d0))?(this.h=!1,Bc(this,p[1]||"",!0),this.o=ml(p[2]||""),this.g=ml(p[3]||"",!0),$c(this,p[4]),this.l=ml(p[5]||"",!0),h0(this,p[6]||"",!0),this.m=ml(p[7]||"")):(this.h=!1,this.i=new yl(null,this.h))}gs.prototype.toString=function(){var c=[],p=this.j;p&&c.push(gl(p,f0,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(gl(p,f0,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(gl(m,m.charAt(0)=="/"?cN:uN,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",gl(m,hN)),c.join("")};function Pr(c){return new gs(c)}function Bc(c,p,m){c.j=m?ml(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function $c(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function h0(c,p,m){p instanceof yl?(c.i=p,fN(c.i,c.h)):(m||(p=gl(p,dN)),c.i=new yl(p,c.h))}function Ue(c,p,m){c.i.set(p,m)}function zc(c){return Ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ml(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gl(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,lN),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var f0=/[#\/\?@]/g,uN=/[#\?:]/g,cN=/[#\?]/g,dN=/[#\?@]/g,hN=/#/g;function yl(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function si(c){c.g||(c.g=new Map,c.h=0,c.i&&aN(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=yl.prototype,t.add=function(c,p){si(this),this.i=null,c=To(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function p0(c,p){si(c),p=To(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function m0(c,p){return si(c),p=To(c,p),c.g.has(p)}t.forEach=function(c,p){si(this),this.g.forEach(function(m,I){m.forEach(function(M){c.call(p,M,I,this)},this)},this)},t.na=function(){si(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let I=0;I<p.length;I++){const M=c[I];for(let F=0;F<M.length;F++)m.push(p[I])}return m},t.V=function(c){si(this);let p=[];if(typeof c=="string")m0(this,c)&&(p=p.concat(this.g.get(To(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)p=p.concat(c[m])}return p},t.set=function(c,p){return si(this),this.i=null,c=To(this,c),m0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function g0(c,p,m){p0(c,p),0<m.length&&(c.i=null,c.g.set(To(c,p),E(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var I=p[m];const F=encodeURIComponent(String(I)),K=this.V(I);for(I=0;I<K.length;I++){var M=F;K[I]!==""&&(M+="="+encodeURIComponent(String(K[I]))),c.push(M)}}return this.i=c.join("&")};function To(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function fN(c,p){p&&!c.j&&(si(c),c.i=null,c.g.forEach(function(m,I){var M=I.toLowerCase();I!=M&&(p0(this,I),g0(this,M,m))},c)),c.j=p}function pN(c,p){const m=new fl;if(a.Image){const I=new Image;I.onload=g(oi,m,"TestLoadImage: loaded",!0,p,I),I.onerror=g(oi,m,"TestLoadImage: error",!1,p,I),I.onabort=g(oi,m,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(oi,m,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}function mN(c,p){const m=new fl,I=new AbortController,M=setTimeout(()=>{I.abort(),oi(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:I.signal}).then(F=>{clearTimeout(M),F.ok?oi(m,"TestPingServer: ok",!0,p):oi(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),oi(m,"TestPingServer: error",!1,p)})}function oi(c,p,m,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(m)}catch{}}function gN(){this.g=new JD}function yN(c,p,m){const I=m||"";try{c0(c,function(M,F){let K=M;u(M)&&(K=Mp(M)),p.push(I+F+"="+encodeURIComponent(K))})}catch(M){throw p.push(I+"type="+encodeURIComponent("_badmap")),M}}function Wc(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Wc,Op),Wc.prototype.g=function(){return new Hc(this.l,this.j)},Wc.prototype.i=function(c){return function(){return c}}({});function Hc(c,p){Bt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Hc,Bt),t=Hc.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,_l(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_l(this)),this.g&&(this.readyState=3,_l(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;y0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function y0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?vl(this):_l(this),this.readyState==3&&y0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,vl(this))},t.Qa=function(c){this.g&&(this.response=c,vl(this))},t.ga=function(){this.g&&vl(this)};function vl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_l(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function _l(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Hc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function v0(c){let p="";return N(c,function(m,I){p+=I,p+=":",p+=m,p+=`\r
`}),p}function Gp(c,p,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=v0(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Ue(c,p,m))}function rt(c){Bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(rt,Bt);var vN=/^https?$/i,_N=["POST","PUT"];t=rt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Up.g(),this.v=this.o?qw(this.o):qw(Up),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){_0(this,F);return}if(c=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)m.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())m.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_N,p,void 0))||I||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of m)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{E0(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){_0(this,F)}};function _0(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,w0(c),Gc(c)}function w0(c){c.A||(c.A=!0,tn(c,"complete"),tn(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,tn(this,"complete"),tn(this,"abort"),Gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gc(this,!0)),rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?T0(this):this.bb())},t.bb=function(){T0(this)};function T0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Cr(c)!=4||c.Z()!=2)){if(c.u&&Cr(c)==4)zw(c.Ea,0,c);else if(tn(c,"readystatechange"),Cr(c)==4){c.h=!1;try{const K=c.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var I;if(I=K===0){var M=String(c.D).match(d0)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),I=!vN.test(M?M.toLowerCase():"")}m=I}if(m)tn(c,"complete"),tn(c,"success");else{c.m=6;try{var F=2<Cr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",w0(c)}}finally{Gc(c)}}}}function Gc(c,p){if(c.g){E0(c);const m=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||tn(c,"ready");try{m.onreadystatechange=I}catch{}}}function E0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Cr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),XD(p)}};function I0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wN(c){const p={};c=(c.g&&2<=Cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(y(c[I]))continue;var m=D(c[I]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[M]||[];p[M]=F,F.push(m)}S(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wl(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function S0(c){this.Aa=0,this.i=[],this.j=new fl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wl("baseRetryDelayMs",5e3,c),this.cb=wl("retryDelaySeedMs",1e4,c),this.Wa=wl("forwardChannelMaxRetries",2,c),this.wa=wl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new s0(c&&c.concurrentRequestLimit),this.Da=new gN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=S0.prototype,t.la=8,t.G=1,t.connect=function(c,p,m,I){nn(0),this.W=c,this.H=p||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=N0(this,null,this.W),Kc(this)};function qp(c){if(P0(c),c.G==3){var p=c.U++,m=Pr(c.I);if(Ue(m,"SID",c.K),Ue(m,"RID",p),Ue(m,"TYPE","terminate"),Tl(c,m),p=new ii(c,c.j,p),p.L=2,p.v=zc(Pr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=V0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),jc(p)}D0(c)}function qc(c){c.g&&(Qp(c),c.g.cancel(),c.g=null)}function P0(c){qc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Qc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Kc(c){if(!o0(c.h)&&!c.s){c.s=!0;var p=c.Ga;J||Q(),$||(J(),$=!0),q.add(p,c),c.B=0}}function TN(c,p){return a0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=hl(f(c.Ga,c,p),k0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const M=new ii(this,this.j,c);let F=this.o;if(this.S&&(F?(F=T(F),R(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=A0(this,M,p),m=Pr(this.I),Ue(m,"RID",c),Ue(m,"CVER",22),this.D&&Ue(m,"X-HTTP-Session-Id",this.D),Tl(this,m),F&&(this.O?p="headers="+encodeURIComponent(String(v0(F)))+"&"+p:this.m&&Gp(m,this.m,F)),Hp(this.h,M),this.Ua&&Ue(m,"TYPE","init"),this.P?(Ue(m,"$req",p),Ue(m,"SID","null"),M.T=!0,Bp(M,m,null)):Bp(M,m,p),this.G=2}}else this.G==3&&(c?C0(this,c):this.i.length==0||o0(this.h)||C0(this))};function C0(c,p){var m;p?m=p.l:m=c.U++;const I=Pr(c.I);Ue(I,"SID",c.K),Ue(I,"RID",m),Ue(I,"AID",c.T),Tl(c,I),c.m&&c.o&&Gp(I,c.m,c.o),m=new ii(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),p&&(c.i=p.D.concat(c.i)),p=A0(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hp(c.h,m),Bp(m,I,p)}function Tl(c,p){c.H&&N(c.H,function(m,I){Ue(p,I,m)}),c.l&&c0({},function(m,I){Ue(p,I,m)})}function A0(c,p,m){m=Math.min(c.i.length,m);var I=c.l?f(c.l.Na,c.l,c):null;e:{var M=c.i;let F=-1;for(;;){const K=["count="+m];F==-1?0<m?(F=M[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let Ne=!0;for(let Vt=0;Vt<m;Vt++){let Pe=M[Vt].g;const $t=M[Vt].map;if(Pe-=F,0>Pe)F=Math.max(0,M[Vt].g-100),Ne=!1;else try{yN($t,K,"req"+Pe+"_")}catch{I&&I($t)}}if(Ne){I=K.join("&");break e}}}return c=c.i.splice(0,m),p.D=c,I}function x0(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;J||Q(),$||(J(),$=!0),q.add(p,c),c.v=0}}function Kp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=hl(f(c.Fa,c),k0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,b0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=hl(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),qc(this),b0(this))};function Qp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function b0(c){c.g=new ii(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Pr(c.qa);Ue(p,"RID","rpc"),Ue(p,"SID",c.K),Ue(p,"AID",c.T),Ue(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ue(p,"TO",c.ja),Ue(p,"TYPE","xmlhttp"),Tl(c,p),c.m&&c.o&&Gp(p,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=zc(Pr(p)),m.m=null,m.P=!0,n0(m,c)}t.Za=function(){this.C!=null&&(this.C=null,qc(this),Kp(this),nn(19))};function Qc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function R0(c,p){var m=null;if(c.g==p){Qc(c),Qp(c),c.g=null;var I=2}else if(Wp(c.h,p))m=p.D,l0(c.h,p),I=1;else return;if(c.G!=0){if(p.o)if(I==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var M=c.B;I=Lc(),tn(I,new Jw(I,m)),Kc(c)}else x0(c);else if(M=p.s,M==3||M==0&&0<p.X||!(I==1&&TN(c,p)||I==2&&Kp(c)))switch(m&&0<m.length&&(p=c.h,p.i=p.i.concat(m)),M){case 1:ys(c,5);break;case 4:ys(c,10);break;case 3:ys(c,6);break;default:ys(c,2)}}}function k0(c,p){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*p}function ys(c,p){if(c.j.info("Error code "+p),p==2){var m=f(c.fb,c),I=c.Xa;const M=!I;I=new gs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bc(I,"https"),zc(I),M?pN(I.toString(),m):mN(I.toString(),m)}else nn(2);c.G=0,c.l&&c.l.sa(p),D0(c),P0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function D0(c){if(c.G=0,c.ka=[],c.l){const p=u0(c.h);(p.length!=0||c.i.length!=0)&&(P(c.ka,p),P(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function N0(c,p,m){var I=m instanceof gs?Pr(m):new gs(m);if(I.g!="")p&&(I.g=p+"."+I.g),$c(I,I.s);else{var M=a.location;I=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var F=new gs(null);I&&Bc(F,I),p&&(F.g=p),M&&$c(F,M),m&&(F.l=m),I=F}return m=c.D,p=c.ya,m&&p&&Ue(I,m,p),Ue(I,"VER",c.la),Tl(c,I),I}function V0(c,p,m){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new rt(new Wc({eb:m})):new rt(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function M0(){}t=M0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yc(){}Yc.prototype.g=function(c,p){return new wn(c,p)};function wn(c,p){Bt.call(this),this.g=new S0(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!y(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Eo(this)}w(wn,Bt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){qp(this.g)},wn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=Mp(c),c=m);p.i.push(new iN(p.Ya++,c)),p.G==3&&Kc(p)},wn.prototype.N=function(){this.g.l=null,delete this.j,qp(this.g),delete this.g,wn.aa.N.call(this)};function O0(c){Lp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const m in p){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}w(O0,Lp);function L0(){Fp.call(this),this.status=1}w(L0,Fp);function Eo(c){this.g=c}w(Eo,M0),Eo.prototype.ua=function(){tn(this.g,"a")},Eo.prototype.ta=function(c){tn(this.g,new O0(c))},Eo.prototype.sa=function(c){tn(this.g,new L0)},Eo.prototype.ra=function(){tn(this.g,"b")},Yc.prototype.createWebChannel=Yc.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,vA=function(){return new Yc},yA=function(){return Lc()},gA=ps,ly={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Hd=Fc,Zw.COMPLETE="complete",mA=Zw,Kw.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Xl=Kw,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,pA=rt}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const fE="@firebase/firestore",pE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new n_("@firebase/firestore");function Mo(){return Js.logLevel}function z(t,...e){if(Js.logLevel<=ge.DEBUG){const n=e.map(s_);Js.debug(`Firestore (${Xa}): ${t}`,...n)}}function dt(t,...e){if(Js.logLevel<=ge.ERROR){const n=e.map(s_);Js.error(`Firestore (${Xa}): ${t}`,...n)}}function Ki(t,...e){if(Js.logLevel<=ge.WARN){const n=e.map(s_);Js.warn(`Firestore (${Xa}): ${t}`,...n)}}function s_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_A(t,r,n)}function _A(t,e,n){let r=`FIRESTORE (${Xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dt(r),new Error(r)}function se(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||_A(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class jL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BL{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string",31837,{l:r}),new wA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class $L{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $L(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,In(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){se(this.o===void 0,3512);const r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=HL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function uy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return bm(i)===bm(s)?ce(i,s):bm(i)?1:-1}return ce(t.length,e.length)}const GL=55296,qL=57343;function bm(t){const e=t.charCodeAt(0);return e>=GL&&e<=qL}function Sa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function TA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__name__";class or{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=or.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=or.isNumericId(e),i=or.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?or.extractNumericId(e).compare(or.extractNumericId(n)):uy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bi.fromString(e.substring(4,e.length-2))}}class Ae extends or{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const KL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends or{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return KL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gE}static keyField(){return new Qe([gE])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ae.fromString(e))}static fromName(e){return new X(Ae.fromString(e).popFirst(5))}static empty(){return new X(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QL(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yE(t){if(!X.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vE(t){if(X.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function IA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function a_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=a_(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e){const n={typeString:t};return e&&(n.value=e),n}function vc(t,e){if(!IA(t))throw new Y(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Y(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=-62135596800,wE=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wE);return new be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_E)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wE}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vc(e,be._jsonSchema))return new be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_E;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:_t("string",be._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new be(0,0))}static max(){return new ae(new be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=-1;class Uh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function cy(t){return t.fields.find(e=>e.kind===2)}function Ss(t){return t.fields.filter(e=>e.kind!==2)}Uh.UNKNOWN_ID=-1;class Gd{constructor(e,n){this.fieldPath=e,this.kind=n}}class qu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new qu(0,Rn.min())}}function SA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new Rn(i,X.empty(),e)}function PA(t){return new Rn(t.readTime,t.key,Pa)}class Rn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(ae.min(),X.empty(),Pa)}static max(){return new Rn(ae.max(),X.empty(),Pa)}}function l_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==CA)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="SimpleDb";class Kf{static open(e,n,r,i){try{return new Kf(n,e.transaction(i,r))}catch(s){throw new fu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new mr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new fu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=u_(r.target.error);this.S.reject(new fu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(z(En,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new XL(n)}}class $i{static delete(e){return z(En,"Removing database:",e),bs(XC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!oA())return!1;if($i.F())return!0;const e=Ct(),n=$i.M(e),r=0<n&&n<10,i=xA(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,$i.M(Ct())===12.2&&dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(z(En,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Y(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new fu(e,o))},i.onupgradeneeded=s=>{z(En,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{z(En,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Kf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),O.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z(En,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function xA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class YL{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bs(this.U.delete())}}class fu extends Y{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ls(t){return t.name==="IndexedDbTransactionError"}class XL{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(z(En,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(z(En,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bs(r)}add(e){return z(En,"ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next(n=>(n===void 0&&(n=null),z(En,"GET",this.store.name,e,n),n))}delete(e){return z(En,"DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return z(En,"COUNT",this.store.name),bs(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){z(En,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=u_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new YL(a),u=n(a.primaryKey,a.value,l);if(u instanceof O){const d=u.catch(h=>(l.done(),O.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bs(t){return new O((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=u_(r.target.error);n(i)}})}let TE=!1;function u_(t){const e=$i.M(Ct());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TE||(TE=!0,setTimeout(()=>{throw r},0)),r}}return t}const pu="IndexBackfiller";class JL{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){z(pu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();z(pu,`Documents written: ${n}`)}catch(n){ls(n)?z(pu,"Ignoring IndexedDB error during index backfill: ",n):await as(n)}await this.re(6e4)})}}class ZL{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z(pu,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(z(pu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=PA(s);l_(o,r)>0&&(r=o)}),new Rn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=-1;function Qf(t){return t==null}function Ku(t){return t===0&&1/t==-1/0}function bA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="";function Jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=EE(e)),e=eF(t.get(n),e);return EE(e)}function eF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case jh:n+="";break;default:n+=s}}return n}function EE(t){return t+jh+""}function dr(t){const e=t.length;if(se(e>=2,64408,{path:t}),e===2)return se(t.charAt(0)===jh&&t.charAt(1)==="",56145,{path:t}),Ae.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(jh,s);switch((o<0||o>n)&&ne(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ne(61167,{path:t})}s=o+2}return new Ae(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="remoteDocuments",_c="owner",Po="owner",Qu="mutationQueues",tF="userId",Yn="mutations",IE="batchId",Os="userMutationsIndex",SE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e){return[t,Jt(e)]}function RA(t,e,n){return[t,Jt(e),n]}const nF={},Ca="documentMutations",Bh="remoteDocumentsV14",rF=["prefixPath","collectionGroup","readTime","documentId"],Kd="documentKeyIndex",iF=["prefixPath","collectionGroup","documentId"],kA="collectionGroupIndex",sF=["collectionGroup","readTime","prefixPath","documentId"],Yu="remoteDocumentGlobal",dy="remoteDocumentGlobalKey",Aa="targets",DA="queryTargetsIndex",oF=["canonicalId","targetId"],xa="targetDocuments",aF=["targetId","path"],c_="documentTargetsIndex",lF=["path","targetId"],$h="targetGlobalKey",$s="targetGlobal",Xu="collectionParents",uF=["collectionId","parent"],ba="clientMetadata",cF="clientId",Yf="bundles",dF="bundleId",Xf="namedQueries",hF="name",d_="indexConfiguration",fF="indexId",hy="collectionGroupIndex",pF="collectionGroup",mu="indexState",mF=["indexId","uid"],NA="sequenceNumberIndex",gF=["uid","sequenceNumber"],gu="indexEntries",yF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VA="documentKeyIndex",vF=["indexId","uid","orderedDocumentKey"],Jf="documentOverlays",_F=["userId","collectionPath","documentId"],fy="collectionPathOverlayIndex",wF=["userId","collectionPath","largestBatchId"],MA="collectionGroupOverlayIndex",TF=["userId","collectionGroup","largestBatchId"],h_="globals",EF="name",OA=[Qu,Yn,Ca,Ps,Aa,_c,$s,xa,ba,Yu,Xu,Yf,Xf],IF=[...OA,Jf],LA=[Qu,Yn,Ca,Bh,Aa,_c,$s,xa,ba,Yu,Xu,Yf,Xf,Jf],FA=LA,f_=[...FA,d_,mu,gu],SF=f_,UA=[...f_,h_],PF=UA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py extends AA{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function At(t,e){const n=ie(t);return $i.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}}class gd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=i??Ot.EMPTY,this.right=s??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CE(this.data.getIterator())}getIteratorFrom(e){return new CE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class CE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Co(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new mn([])}unionWith(e){let n=new ke(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new BA("Invalid base64 string: "+s):s}}(e);return new pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const CF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(se(!!t,39018),typeof t=="string"){let e=0;const n=CF.exec(t);if(se(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="server_timestamp",zA="__type__",WA="__previous_value__",HA="__local_write_time__";function p_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zA])==null?void 0:r.stringValue)===$A}function Zf(t){const e=t.mapValue.fields[WA];return p_(e)?Zf(e):e}function Ju(t){const e=Wr(t.mapValue.fields[HA].timestampValue);return new be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const zh="(default)";class Zs{constructor(e,n){this.projectId=e,this.database=n||zh}static empty(){return new Zs("","")}get isDefaultDatabase(){return this.database===zh}isEqual(e){return e instanceof Zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__type__",GA="__max__",xi={mapValue:{fields:{__type__:{stringValue:GA}}}},g_="__vector__",Ra="value",Qd={nullValue:"NULL_VALUE"};function Qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?p_(t)?4:qA(t)?9007199254740991:ep(t)?10:11:ne(28295,{value:t})}function Er(t,e){if(t===e)return!0;const n=Qi(t);if(n!==Qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ju(t).isEqual(Ju(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),a=Wr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hr(i.bytesValue).isEqual(Hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=We(i.doubleValue),a=We(s.doubleValue);return o===a?Ku(o)===Ku(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Sa(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(PE(o)!==PE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Er(o[l],a[l])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Zu(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=Qi(t),r=Qi(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=We(s.integerValue||s.doubleValue),l=We(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return AE(t.timestampValue,e.timestampValue);case 4:return AE(Ju(t),Ju(e));case 5:return uy(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Hr(s),l=Hr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=ce(a[u],l[u]);if(d!==0)return d}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce(We(s.latitude),We(o.latitude));return a!==0?a:ce(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,g,w,E;const a=s.fields||{},l=o.fields||{},u=(f=a[Ra])==null?void 0:f.arrayValue,d=(g=l[Ra])==null?void 0:g.arrayValue,h=ce(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((E=d==null?void 0:d.values)==null?void 0:E.length)||0);return h!==0?h:xE(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===xi.mapValue&&o===xi.mapValue)return 0;if(s===xi.mapValue)return 1;if(o===xi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=uy(l[h],d[h]);if(f!==0)return f;const g=Yi(a[l[h]],u[d[h]]);if(g!==0)return g}return ce(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function AE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Wr(t),r=Wr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function xE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Yi(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function ka(t){return my(t)}function my(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=my(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${my(n.fields[o])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function Yd(t){switch(Qi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zf(t);return e?16+Yd(e):16;case 5:return 2*t.stringValue.length;case 6:return Hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Yd(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return us(r.fields,(s,o)=>{i+=s.length+Yd(o)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function y_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gy(t){return!!t&&"integerValue"in t}function ec(t){return!!t&&"arrayValue"in t}function bE(t){return!!t&&"nullValue"in t}function RE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function ep(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[m_])==null?void 0:r.stringValue)===g_}function yu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yu(t.arrayValue.values[n]);return e}return{...t}}function qA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GA}const KA={mapValue:{fields:{[m_]:{stringValue:g_},[Ra]:{arrayValue:{}}}}};function xF(t){return"nullValue"in t?Qd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?y_(Zs.empty(),X.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ep(t)?KA:{mapValue:{}}:ne(35942,{value:t})}function bF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?y_(Zs.empty(),X.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?KA:"mapValue"in t?ep(t)?{mapValue:{}}:xi:ne(61959,{value:t})}function kE(t,e){const n=Yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function DE(t,e){const n=Yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){us(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yt(yu(this.value))}}function QA(t){const e=[];return us(t.fields,(n,r)=>{const i=new Qe([n]);if(Xd(r)){const s=QA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new st(e,0,ae.min(),ae.min(),ae.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new st(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new st(e,2,n,ae.min(),ae.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,ae.min(),ae.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.position=e,this.inclusive=n}}function NE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Yi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function RF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{}class ye extends YA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kF(e,n,r):n==="array-contains"?new VF(e,r):n==="in"?new nx(e,r):n==="not-in"?new MF(e,r):n==="array-contains-any"?new OF(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new DF(e,r):new NF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yi(n,this.value)):n!==null&&Qi(this.value)===Qi(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends YA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new De(e,n)}matches(e){return Na(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Na(t){return t.op==="and"}function yy(t){return t.op==="or"}function v_(t){return XA(t)&&Na(t)}function XA(t){for(const e of t.filters)if(e instanceof De)return!1;return!0}function vy(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+ka(t.value);if(v_(t))return t.filters.map(e=>vy(e)).join(",");{const e=t.filters.map(n=>vy(n)).join(",");return`${t.op}(${e})`}}function JA(t,e){return t instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&Er(r.value,i.value)}(t,e):t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JA(o,i.filters[a]),!0):!1}(t,e):void ne(19439)}function ZA(t,e){const n=t.filters.concat(e);return De.create(n,t.op)}function ex(t){return t instanceof ye?function(n){return`${n.field.canonicalString()} ${n.op} ${ka(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(ex).join(" ,")+"}"}(t):"Filter"}class kF extends ye{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class DF extends ye{constructor(e,n){super(e,"in",n),this.keys=tx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NF extends ye{constructor(e,n){super(e,"not-in",n),this.keys=tx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class VF extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ec(n)&&Zu(n.arrayValue,this.value)}}class nx extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zu(this.value.arrayValue,n)}}class MF extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zu(this.value.arrayValue,n)}}class OF extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ec(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function _y(t,e=null,n=[],r=[],i=null,s=null,o=null){return new LF(t,e,n,r,i,s,o)}function eo(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ka(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ka(r)).join(",")),e.Te=n}return e.Te}function wc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VE(t.startAt,e.startAt)&&VE(t.endAt,e.endAt)}function Hh(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Gh(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function ME(t,e,n){let r=Qd,i=!0;for(const s of Gh(t,e)){let o=Qd,a=!0;switch(s.op){case"<":case"<=":o=xF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Qd}kE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];kE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function OE(t,e,n){let r=xi,i=!0;for(const s of Gh(t,e)){let o=xi,a=!0;switch(s.op){case">=":case">":o=bF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=xi}DE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];DE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rx(t,e,n,r,i,s,o,a){return new tp(t,e,n,r,i,s,o,a)}function np(t){return new tp(t)}function LE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FF(t){return t.collectionGroup!==null}function vu(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ke(Qe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Wh(s,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new Wh(Qe.keyField(),r))}return e.Ie}function xn(t){const e=ie(t);return e.Ee||(e.Ee=UF(e,vu(t))),e.Ee}function UF(t,e){if(t.limitType==="F")return _y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wh(i.field,s)});const n=t.endAt?new Da(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Da(t.startAt.position,t.startAt.inclusive):null;return _y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wy(t,e,n){return new tp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rp(t,e){return wc(xn(t),xn(e))&&t.limitType===e.limitType}function ix(t){return`${eo(xn(t))}|lt:${t.limitType}`}function Oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ex(i)).join(", ")}]`),Qf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ka(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ka(i)).join(",")),`Target(${r})`}(xn(t))}; limitType=${t.limitType})`}function Tc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of vu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=NE(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,vu(r),i)||r.endAt&&!function(o,a,l){const u=NE(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,vu(r),i))}(t,e)}function sx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ox(t){return(e,n)=>{let r=!1;for(const i of vu(t)){const s=jF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jF(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Yi(l,u):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new Le(X.comparator);function Cn(){return BF}const ax=new Le(X.comparator);function Jl(...t){let e=ax;for(const n of t)e=e.insert(n.key,n);return e}function lx(t){let e=ax;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hr(){return _u()}function ux(){return _u()}function _u(){return new Zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const $F=new Le(X.comparator),zF=new ke(X.comparator);function fe(...t){let e=zF;for(const n of t)e=e.add(n);return e}const WF=new ke(ce);function __(){return WF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function cx(t){return{integerValue:""+t}}function HF(t,e){return bA(e)?cx(e):w_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this._=void 0}}function GF(t,e,n){return t instanceof tc?function(i,s){const o={fields:{[zA]:{stringValue:$A},[HA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&p_(s)&&(s=Zf(s)),s&&(o.fields[WA]=s),{mapValue:o}}(n,e):t instanceof Va?hx(t,e):t instanceof Ma?fx(t,e):function(i,s){const o=dx(i,s),a=FE(o)+FE(i.Ae);return gy(o)&&gy(i.Ae)?cx(a):w_(i.serializer,a)}(t,e)}function qF(t,e,n){return t instanceof Va?hx(t,e):t instanceof Ma?fx(t,e):n}function dx(t,e){return t instanceof nc?function(r){return gy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class tc extends ip{}class Va extends ip{constructor(e){super(),this.elements=e}}function hx(t,e){const n=px(e);for(const r of t.elements)n.some(i=>Er(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends ip{constructor(e){super(),this.elements=e}}function fx(t,e){let n=px(e);for(const r of t.elements)n=n.filter(i=>!Er(i,r));return{arrayValue:{values:n}}}class nc extends ip{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function FE(t){return We(t.integerValue||t.doubleValue)}function px(t){return ec(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,n){this.field=e,this.transform=n}}function QF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Va&&i instanceof Va||r instanceof Ma&&i instanceof Ma?Sa(r.elements,i.elements,Er):r instanceof nc&&i instanceof nc?Er(r.Ae,i.Ae):r instanceof tc&&i instanceof tc}(t.transform,e.transform)}class YF{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sp{}function mx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new op(t.key,Xt.none()):new Ja(t.key,t.data,Xt.none());{const n=t.data,r=Yt.empty();let i=new ke(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ei(t.key,r,new mn(i.toArray()),Xt.none())}}function XF(t,e,n){t instanceof Ja?function(i,s,o){const a=i.value.clone(),l=jE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ei?function(i,s,o){if(!Jd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=jE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(gx(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wu(t,e,n,r){return t instanceof Ja?function(s,o,a,l){if(!Jd(s.precondition,o))return a;const u=s.value.clone(),d=BE(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ei?function(s,o,a,l){if(!Jd(s.precondition,o))return a;const u=BE(s.fieldTransforms,l,o),d=o.data;return d.setAll(gx(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Jd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function JF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=dx(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function UE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sa(r,i,(s,o)=>QF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ja extends sp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ei extends sp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jE(t,e,n){const r=new Map;se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qF(o,a,n[i]))}return r}function BE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,GF(s,o,e))}return r}class op extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yx extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&XF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ux();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=mx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,(n,r)=>UE(n,r))&&Sa(this.baseMutations,e.baseMutations,(n,r)=>UE(n,r))}}class E_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return $F}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new E_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Te;function eU(t){switch(t){case j.OK:return ne(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function vx(t){if(t===void 0)return dt("GRPC error has no .code"),j.UNKNOWN;switch(t){case gt.OK:return j.OK;case gt.CANCELLED:return j.CANCELLED;case gt.UNKNOWN:return j.UNKNOWN;case gt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case gt.INTERNAL:return j.INTERNAL;case gt.UNAVAILABLE:return j.UNAVAILABLE;case gt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case gt.NOT_FOUND:return j.NOT_FOUND;case gt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case gt.ABORTED:return j.ABORTED;case gt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case gt.DATA_LOSS:return j.DATA_LOSS;default:return ne(39323,{code:t})}}(Te=gt||(gt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=new Bi([4294967295,4294967295],0);function $E(t){const e=tU().encode(t),n=new fA;return n.update(e),new Uint8Array(n.digest())}function zE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bi([n,r],0),new Bi([i,s],0)]}class S_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Bi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Bi.fromNumber(r)));return i.compare(nU)===1&&(i=new Bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$E(e),[r,i]=zE(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new S_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=$E(e),[r,i]=zE(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ec(ae.min(),i,new Le(ce),Cn(),fe())}}class Ic{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ic(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class _x{constructor(e,n){this.targetId=e,this.Ce=n}}class wx{constructor(e,n,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WE{constructor(){this.ve=0,this.Fe=HE(),this.Me=pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),n=fe(),r=fe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:s})}}),new Ic(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=HE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=yd(),this.He=yd(),this.Ye=new Le(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Hh(s))if(r===0){const o=new X(s.path);this.et(n,o,st.newNoDocument(o,ae.min()))}else se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Hr(r).toUint8Array()}catch(l){if(l instanceof BA)return Ki("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new S_(o,i,s)}catch(l){return Ki(l instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Hh(a.target)){const l=new X(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,st.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=fe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ec(e,n,this.Ye,this.je,r);return this.je=Cn(),this.Je=yd(),this.He=yd(),this.Ye=new Le(ce),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new WE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ke(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ke(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new WE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yd(){return new Le(X.comparator)}function HE(){return new Le(X.comparator)}const iU=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),sU=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),oU=(()=>({and:"AND",or:"OR"}))();class aU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ty(t,e){return t.useProto3Json||Qf(e)?e:{value:e}}function Oa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lU(t,e){return Oa(t,e.toTimestamp())}function ln(t){return se(!!t,49232),ae.fromTimestamp(function(n){const r=Wr(n);return new be(r.seconds,r.nanos)}(t))}function P_(t,e){return Ey(t,e).canonicalString()}function Ey(t,e){const n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ex(t){const e=Ae.fromString(t);return se(kx(e),10190,{key:e.toString()}),e}function qh(t,e){return P_(t.databaseId,e.path)}function zs(t,e){const n=Ex(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(Px(n))}function Ix(t,e){return P_(t.databaseId,e)}function Sx(t){const e=Ex(t);return e.length===4?Ae.emptyPath():Px(e)}function Iy(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Px(t){return se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function GE(t,e,n){return{name:qh(t,e),fields:n.value.mapValue.fields}}function uU(t,e,n){const r=zs(t,e.name),i=ln(e.updateTime),s=e.createTime?ln(e.createTime):ae.min(),o=new Yt({mapValue:{fields:e.fields}}),a=st.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function cU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(se(d===void 0||typeof d=="string",58123),pt.fromBase64String(d||"")):(se(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?j.UNKNOWN:vx(u.code);return new Y(d,u.message||"")}(o);n=new wx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zs(t,r.document.name),s=ln(r.document.updateTime),o=r.document.createTime?ln(r.document.createTime):ae.min(),a=new Yt({mapValue:{fields:r.document.fields}}),l=st.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Zd(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zs(t,r.document),s=r.readTime?ln(r.readTime):ae.min(),o=st.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zs(t,r.document),s=r.removedTargetIds||[];n=new Zd([],s,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ZF(i,s),a=r.targetId;n=new _x(a,o)}}return n}function Kh(t,e){let n;if(e instanceof Ja)n={update:GE(t,e.key,e.value)};else if(e instanceof op)n={delete:qh(t,e.key)};else if(e instanceof ei)n={update:GE(t,e.key,e.data),updateMask:gU(e.fieldMask)};else{if(!(e instanceof yx))return ne(16599,{Vt:e.type});n={verify:qh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:lU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne(27497)}(t,e.precondition)),n}function Sy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Xt.updateTime(ln(s.updateTime)):s.exists!==void 0?Xt.exists(s.exists):Xt.none()}(e.currentDocument):Xt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new tc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Va(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Ma(d)}else"increment"in a?l=new nc(o,a.increment):ne(16584,{proto:a});const u=Qe.fromServerFormat(a.fieldPath);return new KF(u,l)}(t,i)):[];if(e.update){e.update.name;const i=zs(t,e.update.name),s=new Yt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new mn(u.map(d=>Qe.fromServerFormat(d)))}(e.updateMask);return new ei(i,s,o,n,r)}return new Ja(i,s,n,r)}if(e.delete){const i=zs(t,e.delete);return new op(i,n)}if(e.verify){const i=zs(t,e.verify);return new yx(i,n)}return ne(1463,{proto:e})}function dU(t,e){return t&&t.length>0?(se(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?ln(i.updateTime):ln(s);return o.isEqual(ae.min())&&(o=ln(s)),new YF(o,i.transformResults||[])}(n,e))):[]}function Cx(t,e){return{documents:[Ix(t,e.path)]}}function Ax(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ix(t,i);const s=function(u){if(u.length!==0)return Rx(De.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Lo(f.field),direction:fU(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ty(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function xx(t){let e=Sx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){se(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=bx(h);return f instanceof De&&v_(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new Wh(Fo(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Qf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new Da(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,g=h.values||[];return new Da(g,f)}(n.endAt)),rx(e,i,o,s,a,"F",l,u)}function hU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fo(n.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fo(n.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fo(n.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fo(n.unaryFilter.field);return ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return ye.create(Fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>bx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function fU(t){return iU[t]}function pU(t){return sU[t]}function mU(t){return oU[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Fo(t){return Qe.fromServerFormat(t.fieldPath)}function Rx(t){return t instanceof ye?function(n){if(n.op==="=="){if(RE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(bE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(bE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:pU(n.op),value:n.value}}}(t):t instanceof De?function(n){const r=n.getFilters().map(i=>Rx(i));return r.length===1?r[0]:{compositeFilter:{op:mU(n.op),filters:r}}}(t):ne(54877,{filter:t})}function gU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.yt=e}}function yU(t,e){let n;if(e.document)n=uU(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=X.fromSegments(e.noDocument.path),i=no(e.noDocument.readTime);n=st.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=X.fromSegments(e.unknownDocument.path),i=no(e.unknownDocument.version);n=st.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new be(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function qE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:qh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Oa(s,o.version.toTimestamp()),createTime:Oa(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:to(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:to(e.version)}}return r}function Qh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function to(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function no(t){const e=new be(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function Rs(t,e){const n=(e.baseMutations||[]).map(s=>Sy(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Sy(t.yt,s)),i=be.fromMillis(e.localWriteTimeMs);return new T_(e.batchId,i,n,r)}function eu(t){const e=no(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?no(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return se(o===1,1966,{count:o}),xn(np(Sx(s.documents[0])))}(t.query):function(s){return xn(xx(s))}(t.query),new Dr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,pt.fromBase64String(t.resumeToken))}function Nx(t,e){const n=to(e.snapshotVersion),r=to(e.lastLimboFreeSnapshotVersion);let i;i=Hh(e.target)?Cx(t.yt,e.target):Ax(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vx(t){const e=xx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wy(e,e.limit,"L"):e}function Rm(t,e){return new I_(e.largestBatchId,Sy(t.yt,e.overlayMutation))}function KE(t,e){const n=e.path.lastSegment();return[t,Jt(e.path.popLast()),n]}function QE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:to(r.readTime),documentKey:Jt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{getBundleMetadata(e,n){return YE(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:no(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return YE(e).put(function(i){return{bundleId:i.id,createTime:to(ln(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return XE(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Vx(s.bundledQuery),readTime:no(s.readTime)}}(r)})}saveNamedQuery(e,n){return XE(e).put(function(i){return{name:i.name,readTime:to(ln(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function YE(t){return At(t,Yf)}function XE(t){return At(t,Xf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new ap(e,r)}getOverlay(e,n){return Rl(e).get(KE(this.userId,n)).next(r=>r?Rm(this.serializer,r):null)}getOverlays(e,n){const r=hr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new I_(n,o);i.push(this.St(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Jt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Rl(e).Z(fy,a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hr(),s=Jt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Rl(e).J(fy,o).next(a=>{for(const l of a){const u=Rm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Rl(e).ee({index:MA,range:a},(l,u,d)=>{const h=Rm(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,n){return Rl(e).put(function(i,s,o){const[a,l,u]=KE(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Kh(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Rl(t){return At(t,Jf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{bt(e){return At(e,h_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?pt.fromUint8Array(r):pt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(We(e.integerValue));else if("doubleValue"in e){const r=We(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ku(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Wr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Hr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?qA(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ep(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ne(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Ra,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(We(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),X.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ks.Kt=new ks;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=255;function wU(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function JE(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=wU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class TU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=JE(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=JE(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Ao),this.sn(255)}_n(){this.an(Ao),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ao?(this.sn(Ao),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ao?(this.an(Ao),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EU{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class IU{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class kl{constructor(){this.cn=new TU,this.ln=new EU(this.cn),this.hn=new IU(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ds(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:eh(this.En),directionalValue:eh(this.dn),orderedDocumentKey:eh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function li(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ZE(t.En,e.En),n!==0?n:(n=ZE(t.dn,e.dn),n!==0?n:X.comparator(t.In,e.In)))}function ZE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function eh(t){return sA()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function e1(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class t1{constructor(e){this.mn=new ke((n,r)=>Qe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(se(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=cy(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ss(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ke(Qe.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gd(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gd(r.field,r.dir==="asc"?0:1)));return new Uh(Uh.UNKNOWN_ID,this.collectionId,n,qu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){var n,r;if(se(t instanceof ye||t instanceof De,20012),t instanceof ye){if(t instanceof nx){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>ye.create(t.field,"==",s)))||[];return De.create(i,"or")}return t}const e=t.filters.map(i=>Mx(i));return De.create(e,t.op)}function SU(t){if(t.getFilters().length===0)return[];const e=Ay(Mx(t));return se(Ox(e),7391),Py(e)||Cy(e)?[e]:e.getFilters()}function Py(t){return t instanceof ye}function Cy(t){return t instanceof De&&v_(t)}function Ox(t){return Py(t)||Cy(t)||function(n){if(n instanceof De&&yy(n)){for(const r of n.getFilters())if(!Py(r)&&!Cy(r))return!1;return!0}return!1}(t)}function Ay(t){if(se(t instanceof ye||t instanceof De,34018),t instanceof ye)return t;if(t.filters.length===1)return Ay(t.filters[0]);const e=t.filters.map(r=>Ay(r));let n=De.create(e,t.op);return n=Yh(n),Ox(n)?n:(se(n instanceof De,64498),se(Na(n),40251),se(n.filters.length>1,57927),n.filters.reduce((r,i)=>C_(r,i)))}function C_(t,e){let n;return se(t instanceof ye||t instanceof De,38388),se(e instanceof ye||e instanceof De,25473),n=t instanceof ye?e instanceof ye?function(i,s){return De.create([i,s],"and")}(t,e):n1(t,e):e instanceof ye?n1(e,t):function(i,s){if(se(i.filters.length>0&&s.filters.length>0,48005),Na(i)&&Na(s))return ZA(i,s.getFilters());const o=yy(i)?i:s,a=yy(i)?s:i,l=o.filters.map(u=>C_(u,a));return De.create(l,"or")}(t,e),Yh(n)}function n1(t,e){if(Na(e))return ZA(e,t.getFilters());{const n=e.filters.map(r=>C_(t,r));return De.create(n,"or")}}function Yh(t){if(se(t instanceof ye||t instanceof De,11850),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return Yh(e[0]);if(XA(t))return t;const n=e.map(i=>Yh(i)),r=[];return n.forEach(i=>{i instanceof ye?r.push(i):i instanceof De&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.Cn=new A_}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Rn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class A_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ke(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="IndexedDbIndexManager",vd=new Uint8Array(0);class CU{constructor(e,n){this.databaseId=n,this.vn=new A_,this.Fn=new Zr(r=>eo(r),(r,i)=>wc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Jt(i)};return i1(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[TA(n),""],!1,!0);return i1(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(dr(o.parent))}return r})}addFieldIndex(e,n){const r=Dl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=bo(e);return s.next(a=>{o.put(QE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Dl(e),i=bo(e),s=xo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Dl(e),r=xo(e),i=bo(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return O.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new t1(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=xo(e);let i=!0;const s=new Map;return O.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=fe();const a=[];return O.forEach(s,(l,u)=>{z(r1,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${eo(n)}`);const d=function(v,k){const V=cy(k);if(V===void 0)return null;for(const N of Gh(v,V.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(u,l),h=function(v,k){const V=new Map;for(const N of Ss(k))for(const S of Gh(v,N.fieldPath))switch(S.op){case"==":case"in":V.set(N.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return V.set(N.fieldPath.canonicalString(),S.value),Array.from(V.values())}return null}(u,l),f=function(v,k){const V=[];let N=!0;for(const S of Ss(k)){const T=S.kind===0?ME(v,S.fieldPath,v.startAt):OE(v,S.fieldPath,v.startAt);V.push(T.value),N&&(N=T.inclusive)}return new Da(V,N)}(u,l),g=function(v,k){const V=[];let N=!0;for(const S of Ss(k)){const T=S.kind===0?OE(v,S.fieldPath,v.endAt):ME(v,S.fieldPath,v.endAt);V.push(T.value),N&&(N=T.inclusive)}return new Da(V,N)}(u,l),w=this.On(l,u,f),E=this.On(l,u,g),P=this.Nn(l,u,h),_=this.Bn(l.indexId,d,w,f.inclusive,E,g.inclusive,P);return O.forEach(_,y=>r.Y(y,n.limit).next(v=>{v.forEach(k=>{const V=X.fromSegments(k.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return O.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=SU(De.create(e.filters,"and")).map(r=>_y(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/u]):vd,g=this.kn(e,f,r[h%u],i),w=this.qn(e,f,s[h%u],o),E=a.map(P=>this.kn(e,f,P,!0));d.push(...this.createRange(g,w,E))}return d}kn(e,n,r,i){const s=new Ds(e,X.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Ds(e,X.empty(),n,r);return i?s.An():s}xn(e,n){const r=new t1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return O.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new ke(Qe.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:u=u.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new kl;for(const i of Ss(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ks.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new kl;return ks.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new kl;return ks.Kt.Dt(y_(this.databaseId,n),r.Pn(function(s){const o=Ss(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new kl);let s=0;for(const o of Ss(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&ec(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ks.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new kl;l.seed(a.un()),ks.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Dl(e),i=bo(e);return(n?r.J(hy,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new qu(h.sequenceNumber,new Rn(no(h.readTime),new X(dr(h.documentKey)),h.largestBatchId)):qu.empty(),g=d.fields.map(([w,E])=>new Gd(Qe.fromServerFormat(w),E));return new Uh(d.indexId,d.collectionGroup,g,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ce(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Dl(e),s=bo(e);return this.Gn(e).next(o=>i.J(hy,IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,l=>s.put(QE(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,l=>this.zn(e,i,l).next(u=>{const d=this.jn(s,l);return u.isEqual(d)?O.resolve():this.Jn(e,s,l,u,d)}))))})}Hn(e,n,r,i){return xo(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return xo(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=xo(e);let s=new ke(li);return i.ee({index:VA,range:IDBKeyRange.only([r.indexId,this.uid,eh(this.$n(r,n))])},(o,a)=>{s=s.add(new Ds(r.indexId,n,e1(a.arrayValue),e1(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new ke(li);const i=this.Qn(n,e);if(i==null)return r;const s=cy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(ec(o))for(const a of o.arrayValue.values||[])r=r.add(new Ds(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Ds(n.indexId,e.key,vd,i));return r}Jn(e,n,r,i,s){z(r1,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,f){const g=l.getIterator(),w=u.getIterator();let E=Co(g),P=Co(w);for(;E||P;){let _=!1,y=!1;if(E&&P){const v=d(E,P);v<0?y=!0:v>0&&(_=!0)}else E!=null?y=!0:_=!0;_?(h(P),P=Co(w)):y?(f(E),E=Co(g)):(E=Co(g),P=Co(w))}}(i,s,li,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),O.waitFor(o)}Gn(e){let n=1;return bo(e).ee({index:NA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>li(o,a)).filter((o,a,l)=>!a||li(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=li(o,e),l=li(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,vd,X.empty()),l=i[o+1].Vn(this.uid,vd,X.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return li(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(s1)}getMinOffset(e,n){return O.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||ne(44426))).next(s1)}}function i1(t){return At(t,Xu)}function xo(t){return At(t,gu)}function Dl(t){return At(t,d_)}function bo(t){return At(t,mu)}function s1(t){se(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;l_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Rn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lx=41943040;class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e,n){const r=t.store(Yn),i=t.store(Ca),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,f)=>(a++,f.delete()));s.push(l.next(()=>{se(a===1,47070,{batchId:n.batchId})}));const u=[];for(const d of n.mutations){const h=RA(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return O.waitFor(s).next(()=>u)}function Xh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(Lx,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);class lp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){se(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new lp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).ee({index:Os,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Uo(e),o=ui(e);return o.add({}).next(a=>{se(typeof a=="number",49019);const l=new T_(a,n,r,i),u=function(g,w,E){const P=E.baseMutations.map(y=>Kh(g.yt,y)),_=E.mutations.map(y=>Kh(g.yt,y));return{userId:w,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:P,mutations:_}}(this.serializer,this.userId,l),d=[];let h=new ke((f,g)=>ce(f.canonicalString(),g.canonicalString()));for(const f of i){const g=RA(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(u)),d.push(s.put(g,nF))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),O.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ui(e).get(n).next(r=>r?(se(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Rs(this.serializer,r)):null)}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ui(e).ee({index:Os,range:i},(o,a,l)=>{a.userId===this.userId&&(se(a.batchId>=r,47524,{tr:r}),s=Rs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Bs;return ui(e).ee({index:Os,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Bs],[this.userId,Number.POSITIVE_INFINITY]);return ui(e).J(Os,n).next(r=>r.map(i=>Rs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Uo(e).ee({range:i},(o,a,l)=>{const[u,d,h]=o,f=dr(d);if(u===this.userId&&n.path.isEqual(f))return ui(e).get(h).next(g=>{if(!g)throw ne(61480,{nr:o,batchId:h});se(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(Rs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(ce);const i=[];return n.forEach(s=>{const o=qd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Uo(e).ee({range:a},(u,d,h)=>{const[f,g,w]=u,E=dr(g);f===this.userId&&s.path.isEqual(E)?r=r.add(w):h.done()});i.push(l)}),O.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=qd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ke(ce);return Uo(e).ee({range:o},(l,u,d)=>{const[h,f,g]=l,w=dr(f);h===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(g)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ui(e).get(s).next(o=>{if(o===null)throw ne(35274,{batchId:s});se(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Rs(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Fx(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Uo(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=dr(s[1]);i.push(l)}else a.done()}).next(()=>{se(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return Ux(e,this.userId,n)}_r(e){return jx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Bs,lastStreamToken:""})}}function Ux(t,e,n){const r=qd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Uo(t).ee({range:s,X:!0},(a,l,u)=>{const[d,h,f]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function ui(t){return At(t,Yn)}function Uo(t){return At(t,Ca)}function jx(t){return At(t,Qu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new ro(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ae.fromTimestamp(new be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ro(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(se(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ro(e).ee((o,a)=>{const l=eu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ro(e).ee((r,i)=>{const s=eu(i);n(s)})}lr(e){return a1(e).get($h).next(n=>(se(n!==null,2888),n))}hr(e,n){return a1(e).put($h,n)}Pr(e,n){return Ro(e).put(Nx(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=eo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ro(e).ee({range:i,index:DA},(o,a,l)=>{const u=eu(a);wc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=wi(e);return n.forEach(o=>{const a=Jt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=wi(e);return O.forEach(n,s=>{const o=Jt(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=wi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wi(e);let s=fe();return i.ee({range:r,X:!0},(o,a,l)=>{const u=dr(o[1]),d=new X(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Jt(n.path),i=IDBKeyRange.bound([r],[TA(r)],!1,!0);let s=0;return wi(e).ee({index:c_,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Ro(e).get(n).next(r=>r?eu(r):null)}}function Ro(t){return At(t,Aa)}function a1(t){return At(t,$s)}function wi(t){return At(t,xa)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="LruGarbageCollector",xU=1048576;function u1([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class bU{constructor(e){this.Ir=e,this.buffer=new ke(u1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();u1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Bx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){z(l1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ls(n)?z(l1,"Ignoring IndexedDB error during garbage collection: ",n):await as(n)}await this.Vr(3e5)})}}class RU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(pn.ce);const r=new bU(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(o1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Mo()<=ge.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function $x(t,e){return new RU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n){this.db=e,this.garbageCollector=$x(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return _d(e,r)}removeReference(e,n,r){return _d(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return _d(e,n)}br(e,n){return function(i,s){let o=!1;return jx(i).te(a=>Ux(i,a,s).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),wi(e).delete(function(h){return[0,Jt(h.path)]}(o))))});i.push(l)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return _d(e,n)}Sr(e,n){const r=wi(e);let i,s=pn.ce;return r.ee({index:c_},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==pn.ce&&n(new X(dr(i)),s),s=u,i=l):s=pn.ce}).next(()=>{s!==pn.ce&&n(new X(dr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _d(t,e){return wi(t).put(function(r,i){return{targetId:0,path:Jt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.changes=new Zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vs(e).put(r)}removeEntry(e,n,r){return vs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Qh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=st.newInvalidDocument(n);return vs(e).ee({index:Kd,range:IDBKeyRange.only(Nl(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:st.newInvalidDocument(n)};return vs(e).ee({index:Kd,range:IDBKeyRange.only(Nl(n))},(i,s)=>{r={document:this.Cr(n,s),size:Xh(s)}}).next(()=>r)}getEntries(e,n){let r=Cn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Cn(),i=new Le(X.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Xh(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return O.resolve();let i=new ke(h1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Nl(i.first()),Nl(i.last())),o=i.getIterator();let a=o.getNext();return vs(e).ee({index:Kd,range:s},(l,u,d)=>{const h=X.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&h1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.j(Nl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Qh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vs(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Cn();for(const h of u){const f=this.Cr(X.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Tc(n,f)||i.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Cn();const o=d1(n,r),a=d1(n,Rn.max());return vs(e).ee({index:kA,range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.Cr(X.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new NU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return c1(e).get(dy).next(n=>(se(!!n,20021),n))}Dr(e,n){return c1(e).put(dy,n)}Cr(e,n){if(n){const r=yU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return st.newInvalidDocument(e)}}function Wx(t){return new DU(t)}class NU extends zx{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Zr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ke((s,o)=>ce(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=qE(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Xh(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=qE(this.Nr.serializer,o.convertToNoDocument(ae.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function c1(t){return At(t,Yu)}function vs(t){return At(t,Bh)}function Nl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function d1(t,e){const n=e.documentKey.path.toArray();return[t,Qh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function h1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ce(n[s],r[s]),i)return i;return i=ce(n.length,r.length),i||(i=ce(n[n.length-2],r[r.length-2]),i||ce(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wu(r.mutation,i,mn.empty(),be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Jl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Cn();const o=_u(),a=function(){return _u()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ei)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),wu(d.mutation,u,d.mutation.getFieldMask(),be.now())):o.set(u.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new VU(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=_u();let i=new Le((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||mn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||fe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=ux();d.forEach(f=>{if(!s.has(f)){const g=mx(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(hr());let a=Pa,l=s;return o.next(u=>O.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,fe())).next(d=>({batchId:a,changes:lx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=Jl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Jl();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,l=>{const u=function(h,f){return new tp(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,st.newInvalidDocument(d)))});let a=Jl();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&wu(d.mutation,u,mn.empty(),be.now()),Tc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ln(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Vx(i.bundledQuery),readTime:ln(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(){this.overlays=new Le(X.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=hr(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=hr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=hr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return O.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I_(n,r));let s=this.qr.get(n);s===void 0&&(s=fe(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.Qr=new ke(Rt.$r),this.Ur=new ke(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new X(new Ae([])),r=new Rt(n,e),i=new Rt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new Ae([])),r=new Rt(n,e),i=new Rt(n,e+1);let s=fe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ke(Rt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new T_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Bs:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),i=new Rt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(ce);return n.forEach(i=>{const s=new Rt(i,0),o=new Rt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const o=new Rt(new X(s),0);let a=new ke(ce);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),O.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{const s=new Rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Rt(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.ri=e,this.docs=function(){return new Le(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Cn();const o=n.path,a=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||l_(PA(d),r)<=0||(i.has(d.key)||Tc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jU(this)}getSize(e){return O.resolve(this.size)}}class jU extends zx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.persistence=e,this.si=new Zr(n=>eo(n),wc),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new x_,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n){this.ui={},this.overlays={},this.ci=new pn(0),this.li=!1,this.li=!0,this.hi=new LU,this.referenceDelegate=e(this),this.Pi=new BU(this),this.indexManager=new PU,this.remoteDocumentCache=function(i){return new UU(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Dx(n),this.Ii=new MU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new FU(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const i=new $U(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class $U extends AA{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Ri=new x_,this.Vi=null}static mi(e){return new up(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{const i=X.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jh{constructor(e,n){this.persistence=e,this.pi=new Zr(r=>Jt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$x(this,n)}static mi(e,n){return new Jh(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yd(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Kf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(_c)}(e),function(l){l.createObjectStore(Qu,{keyPath:tF}),l.createObjectStore(Yn,{keyPath:IE,autoIncrement:!0}).createIndex(Os,SE,{unique:!0}),l.createObjectStore(Ca)}(e),f1(e),function(l){l.createObjectStore(Ps)}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(xa),l.deleteObjectStore(Aa),l.deleteObjectStore($s)}(e),f1(e)),o=o.next(()=>function(l){const u=l.store($s),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put($h,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Yn).J().next(h=>{l.deleteObjectStore(Yn),l.createObjectStore(Yn,{keyPath:IE,autoIncrement:!0}).createIndex(Os,SE,{unique:!0});const f=u.store(Yn),g=h.map(w=>f.put(w));return O.waitFor(g)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(ba,{keyPath:cF})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Yu)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Yf,{keyPath:dF})})(e),function(l){l.createObjectStore(Xf,{keyPath:hF})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Jf,{keyPath:_F});u.createIndex(fy,wF,{unique:!1}),u.createIndex(MA,TF,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Bh,{keyPath:rF});u.createIndex(Kd,iF),u.createIndex(kA,sF)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ps))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(d_,{keyPath:fF,autoIncrement:!0}).createIndex(hy,pF,{unique:!1}),l.createObjectStore(mu,{keyPath:mF}).createIndex(NA,gF,{unique:!1}),l.createObjectStore(gu,{keyPath:yF}).createIndex(VA,vF,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(mu).clear()}).next(()=>{n.objectStore(gu).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(h_,{keyPath:EF})})(e)})),r<18&&i>=18&&sA()&&(o=o.next(()=>{n.objectStore(mu).clear()}).next(()=>{n.objectStore(gu).clear()})),o}wi(e){let n=0;return e.store(Ps).ee((r,i)=>{n+=Xh(i)}).next(()=>{const r={byteSize:n};return e.store(Yu).put(dy,r)})}yi(e){const n=e.store(Qu),r=e.store(Yn);return n.J().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Bs],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Os,o).next(a=>O.forEach(a,l=>{se(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=Rs(this.serializer,l);return Fx(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(xa),r=e.store(Ps);return e.store($s).get($h).next(i=>{const s=[];return r.ee((o,a)=>{const l=new Ae(o),u=function(h){return[0,Jt(h)]}(l);s.push(n.get(u).next(d=>d?O.resolve():(h=>n.put({targetId:0,path:Jt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(s))})}bi(e,n){e.createObjectStore(Xu,{keyPath:uF});const r=n.store(Xu),i=new A_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Jt(l)})}};return n.store(Ps).ee({X:!0},(o,a)=>{const l=new Ae(o);return s(l.popLast())}).next(()=>n.store(Ca).ee({X:!0},([o,a,l],u)=>{const d=dr(a);return s(d.popLast())}))}Di(e){const n=e.store(Aa);return n.ee((r,i)=>{const s=eu(i),o=Nx(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(Ps),i=[];return r.ee((s,o)=>{const a=n.store(Bh),l=function(h){return h.document?new X(Ae.fromString(h.document.name).popFirst(5)):h.noDocument?X.fromSegments(h.noDocument.path):h.unknownDocument?X.fromSegments(h.unknownDocument.path):ne(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>O.waitFor(i))}Fi(e,n){const r=n.store(Yn),i=Wx(this.serializer),s=new b_(up.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??fe();Rs(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),O.forEach(a,(l,u)=>{const d=new Dt(u),h=ap.wt(this.serializer,d),f=s.getIndexManager(d),g=lp.wt(d,this.serializer,f,s.referenceDelegate);return new Hx(i,g,h,f).recalculateAndSaveOverlaysForDocumentKeys(new py(n,pn.ce),l).next()})})}}function f1(t){t.createObjectStore(xa,{keyPath:aF}).createIndex(c_,lF,{unique:!0}),t.createObjectStore(Aa,{keyPath:"targetId"}).createIndex(DA,oF,{unique:!0}),t.createObjectStore($s)}const ci="IndexedDbPersistence",km=18e5,Dm=5e3,Nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",WU="main";class R_{constructor(e,n,r,i,s,o,a,l,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!R_.v())throw new Y(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kU(this,i),this.$i=n+WU,this.serializer=new Dx(l),this.Ui=new $i(this.$i,this.Ni,new zU(this.serializer)),this.hi=new _U,this.Pi=new AU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wx(this.serializer),this.Ii=new vU,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&dt(ci,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(j.FAILED_PRECONDITION,Nm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new pn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ls(e))return z(ci,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z(ci,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Vl(e).get(Po).next(n=>O.resolve(this.es(n)))}ts(e){return wd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,km)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=At(n,ba);return r.J().next(i=>{const s=this.ss(i,km),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):Vl(e).get(Po).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dm)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Y(j.FAILED_PRECONDITION,Nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||wd(e).J().next(r=>this.ss(r,Dm).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z(ci,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[_c,ba],e=>{const n=new py(e,pn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>wd(e).J().next(n=>this.ss(n,km).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return lp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CU(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ap.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){z(ci,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?PF:l===17?UA:l===16?SF:l===15?f_:l===14?FA:l===13?LA:l===12?IF:l===11?OA:void ne(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new py(a,this.ci?this.ci.next():pn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Y(j.FAILED_PRECONDITION,CA);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Vl(e).get(Po).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Dm)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(j.FAILED_PRECONDITION,Nm)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vl(e).put(Po,n)}static v(){return $i.v()}Zi(e){const n=Vl(e);return n.get(Po).next(r=>this.es(r)?(z(ci,"Releasing primary lease."),n.delete(Po)):O.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;iA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return z(ci,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dt(ci,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){dt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vl(t){return At(t,_c)}function wd(t){return At(t,ba)}function Gx(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new k_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return iA()?8:xA(Ct())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new HU;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Mo()<=ge.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(Mo()<=ge.DEBUG&&z("QueryEngine","Query:",Oo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Mo()<=ge.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):O.resolve())}ys(e,n){if(LE(n))return O.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wy(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=fe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,wy(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return LE(n)||i.isEqual(ae.min())?O.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?O.resolve(null):(Mo()<=ge.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oo(n)),this.vs(e,o,n,SA(i,Pa)).next(a=>a))})}Ds(e,n){let r=new ke(ox(e));return n.forEach((i,s)=>{Tc(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Mo()<=ge.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Oo(n)),this.ps.getDocumentsMatchingQuery(e,n,Rn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="LocalStore",GU=3e8;class qU{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Le(ce),this.xs=new Zr(s=>eo(s),wc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Kx(t,e,n,r){return new qU(t,e,n,r)}async function Qx(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=fe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function KU(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let g=O.resolve();return f.forEach(w=>{g=g.next(()=>d.getEntry(l,w)).next(E=>{const P=u.docVersions.get(w);se(P!==null,48541),E.version.compareTo(P)<0&&(h.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yx(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function QU(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(E,P,_){return E.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=GU?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,g,d)&&a.push(n.Pi.updateTargetData(s,g))});let l=Cn(),u=fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(YU(s,o,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(ae.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function YU(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Cn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z(D_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function XU(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bs),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zh(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function La(t,e,n){const r=ie(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ls(o))throw o;z(D_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function xy(t,e,n){const r=ie(t);let i=ae.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=ie(l),f=h.xs.get(d);return f!==void 0?O.resolve(h.Ms.get(f)):h.Pi.getTargetData(u,d)}(r,o,xn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:fe())).next(a=>(Zx(r,sx(e),a),{documents:a,Qs:s})))}function Xx(t,e){const n=ie(t),r=ie(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Jx(t,e){const n=ie(t),r=n.Os.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,SA(r,Pa),Number.MAX_SAFE_INTEGER)).then(i=>(Zx(n,e,i),i))}function Zx(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firestore_clients";function p1(t,e){return`${eb}_${t}_${e}`}const tb="firestore_mutations";function m1(t,e,n){let r=`${tb}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const nb="firestore_targets";function Vm(t,e){return`${nb}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="SharedClientState";class ef{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Y(i.error.code,i.error.message))),o?new ef(e,n,i.state,s):(dt(ar,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Y(r.error.code,r.error.message))),s?new Tu(e,r.state,i):(dt(ar,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=__();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=bA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new tf(e,s):(dt(ar,`Failed to parse client data for instance '${e}': ${n}`),null)}}class N_{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new N_(n.clientId,n.onlineState):(dt(ar,`Failed to parse online state: ${e}`),null)}}class by{constructor(){this.activeTargetIds=__()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mm{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Le(ce),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=p1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new by),this.ro=new RegExp(`^${eb}_${o}_([^_]*)$`),this.io=new RegExp(`^${tb}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${nb}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(p1(this.persistenceKey,r));if(i){const s=tf.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Vm(this.persistenceKey,e));if(i){const s=Tu.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vm(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return z(ar,"READ",e,n),n}setItem(e,n){z(ar,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){z(ar,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(z(ar,"EVENT",n.key,n.newValue),n.key===this.eo)return void dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=pn.ce;if(s!=null)try{const a=JSON.parse(s);se(typeof a=="number",30636,{So:s}),o=a}catch(a){dt(ar,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==pn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new ef(this.currentUser,e,n,r),s=m1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=m1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Vm(this.persistenceKey,e),s=new Tu(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return tf.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ef.Ws(new Dt(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Tu.Ws(i,n)}uo(e){return N_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);z(ar,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=__();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class rb{constructor(){this.Mo=new by,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new by,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="ConnectivityMonitor";class y1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){z(g1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){z(g1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function Ry(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",ZU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===zh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Ry(),a=this.zo(e,n.toUriEncodedString());z(Om,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),d=Qa(u);return this.Jo(e,a,l,r,d).then(h=>(z(Om,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ki(Om,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=ZU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class n4 extends e4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Ry();return new Promise((a,l)=>{const u=new pA;u.setWithCredentials(!0),u.listenOnce(mA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hd.NO_ERROR:const h=u.getResponseJson();z(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Hd.TIMEOUT:z(Gt,`RPC '${e}' ${o} timed out`),l(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const f=u.getStatus();if(z(Gt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const E=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(w.status);l(new Y(E,w.message))}else l(new Y(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(j.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{z(Gt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);z(Gt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=Ry(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vA(),a=yA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");z(Gt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,g=!1;const w=new t4({Yo:P=>{g?z(Gt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(z(Gt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),z(Gt,`RPC '${e}' stream ${i} sending:`,P),h.send(P))},Zo:()=>h.close()}),E=(P,_,y)=>{P.listen(_,v=>{try{y(v)}catch(k){setTimeout(()=>{throw k},0)}})};return E(h,Xl.EventType.OPEN,()=>{g||(z(Gt,`RPC '${e}' stream ${i} transport opened.`),w.o_())}),E(h,Xl.EventType.CLOSE,()=>{g||(g=!0,z(Gt,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(h))}),E(h,Xl.EventType.ERROR,P=>{g||(g=!0,Ki(Gt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),E(h,Xl.EventType.MESSAGE,P=>{var _;if(!g){const y=P.data[0];se(!!y,16349);const v=y,k=(v==null?void 0:v.error)||((_=v[0])==null?void 0:_.error);if(k){z(Gt,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let N=function(x){const R=gt[x];if(R!==void 0)return vx(R)}(V),S=k.message;N===void 0&&(N=j.INTERNAL,S="Unknown error status: "+V+" with message "+k.message),g=!0,w.a_(new Y(N,S)),h.close()}else z(Gt,`RPC '${e}' stream ${i} received:`,y),w.u_(y)}}),E(a,gA.STAT_EVENT,P=>{P.stat===ly.PROXY?z(Gt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===ly.NOPROXY&&z(Gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof window<"u"?window:null}function th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t){return new aU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="PersistentStream";class ob{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(dt(n.toString()),dt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return z(v1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(z(v1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r4 extends ob{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cU(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?ln(o.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Iy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Hh(l)?{documents:Cx(s,l)}:{query:Ax(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Tx(s,o.resumeToken);const u=Ty(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Oa(s,o.snapshotVersion.toTimestamp());const u=Ty(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=hU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Iy(this.serializer),n.removeTarget=e,this.q_(n)}}class i4 extends ob{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dU(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Iy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Kh(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{}class o4 extends s4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Ey(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Ey(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class a4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dt(n),this.aa=!1):z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class l4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{mo(this)&&(z(io,"Restarting streams for network reachability change."),await async function(l){const u=ie(l);u.Ea.add(4),await Sc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await dp(u)}(this))})}),this.Ra=new a4(r,i)}}async function dp(t){if(mo(t))for(const e of t.da)await e(!0)}async function Sc(t){for(const e of t.da)await e(!1)}function hp(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),O_(n)?M_(n):el(n).O_()&&V_(n,e))}function Fa(t,e){const n=ie(t),r=el(n);n.Ia.delete(e),r.O_()&&ab(n,e),n.Ia.size===0&&(r.O_()?r.L_():mo(n)&&n.Ra.set("Unknown"))}function V_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(t).Y_(e)}function ab(t,e){t.Va.Ue(e),el(t).Z_(e)}function M_(t){t.Va=new rU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),el(t).start(),t.Ra.ua()}function O_(t){return mo(t)&&!el(t).x_()&&t.Ia.size>0}function mo(t){return ie(t).Ea.size===0}function lb(t){t.Va=void 0}async function u4(t){t.Ra.set("Online")}async function c4(t){t.Ia.forEach((e,n)=>{V_(t,e)})}async function d4(t,e){lb(t),O_(t)?(t.Ra.ha(e),M_(t)):t.Ra.set("Unknown")}async function h4(t,e,n){if(t.Ra.set("Online"),e instanceof wx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){z(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(t,r)}else if(e instanceof Zd?t.Va.Ze(e):e instanceof _x?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await Yx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(pt.EMPTY_BYTE_STRING,d.snapshotVersion)),ab(s,l);const h=new Dr(d.target,l,u,d.sequenceNumber);V_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){z(io,"Failed to raise snapshot:",r),await nf(t,r)}}async function nf(t,e,n){if(!ls(e))throw e;t.Ea.add(1),await Sc(t),t.Ra.set("Offline"),n||(n=()=>Yx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z(io,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await dp(t)})}function ub(t,e){return e().catch(n=>nf(t,n,e))}async function Za(t){const e=ie(t),n=Xi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bs;for(;f4(e);)try{const i=await XU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,p4(e,i)}catch(i){await nf(e,i)}cb(e)&&db(e)}function f4(t){return mo(t)&&t.Ta.length<10}function p4(t,e){t.Ta.push(e);const n=Xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cb(t){return mo(t)&&!Xi(t).x_()&&t.Ta.length>0}function db(t){Xi(t).start()}async function m4(t){Xi(t).ra()}async function g4(t){const e=Xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function y4(t,e,n){const r=t.Ta.shift(),i=E_.from(r,e,n);await ub(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Za(t)}async function v4(t,e){e&&Xi(t).X_&&await async function(r,i){if(function(o){return eU(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();Xi(r).B_(),await ub(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Za(r)}}(t,e),cb(t)&&db(t)}async function _1(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),z(io,"RemoteStore received new credentials");const r=mo(n);n.Ea.add(3),await Sc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await dp(n)}async function ky(t,e){const n=ie(t);e?(n.Ea.delete(2),await dp(n)):e||(n.Ea.add(2),await Sc(n),n.Ra.set("Unknown"))}function el(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.sa(),new r4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:u4.bind(null,t),t_:c4.bind(null,t),r_:d4.bind(null,t),H_:h4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),O_(t)?M_(t):t.Ra.set("Unknown")):(await t.ma.stop(),lb(t))})),t.ma}function Xi(t){return t.fa||(t.fa=function(n,r,i){const s=ie(n);return s.sa(),new i4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:m4.bind(null,t),r_:v4.bind(null,t),ta:g4.bind(null,t),na:y4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Za(t)):(await t.fa.stop(),t.Ta.length>0&&(z(io,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new L_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F_(t,e){if(dt("AsyncQueue",`${e}: ${t}`),ls(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{static emptySet(e){return new ca(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Jl(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.ga=new Le(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ua(e,n,ca.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class w4{constructor(){this.queries=T1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=T1(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function T1(){return new Zr(t=>ix(t),rp)}async function hb(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new _4,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=F_(o,`Initialization of query '${Oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&U_(n)}async function fb(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function T4(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&U_(n)}function E4(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function U_(t){t.Ca.forEach(e=>{e.next()})}var Dy,E1;(E1=Dy||(Dy={})).Ma="default",E1.Cache="cache";class pb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.key=e}}class gb{constructor(e){this.key=e}}class I4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fe(),this.mutatedKeys=fe(),this.eu=ox(e),this.tu=new ca(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new w1,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=Tc(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;f&&g?f.data.isEqual(g.data)?w!==E&&(r.track({type:3,doc:g}),P=!0):this.su(f,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),P=!0):f&&!g&&(r.track({type:1,doc:f}),P=!0,(l||u)&&(a=!0)),P&&(g?(o=o.add(g),s=E?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(g,w){const E=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:P})}};return E(g)-E(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ua(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new gb(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new mb(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tl="SyncEngine";class S4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class P4{constructor(e){this.key=e,this.hu=!1}}class C4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zr(a=>ix(a),rp),this.Iu=new Map,this.Eu=new Set,this.du=new Le(X.comparator),this.Au=new Map,this.Ru=new x_,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function A4(t,e,n=!0){const r=fp(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await yb(r,e,n,!0),i}async function x4(t,e){const n=fp(t);await yb(n,e,!0,!1)}async function yb(t,e,n,r){const i=await Zh(t.localStore,xn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await j_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&hp(t.remoteStore,i),a}async function j_(t,e,n,r,i){t.pu=(h,f,g)=>async function(E,P,_,y){let v=P.view.ru(_);v.Cs&&(v=await xy(E.localStore,P.query,!1).then(({documents:S})=>P.view.ru(S,v)));const k=y&&y.targetChanges.get(P.targetId),V=y&&y.targetMismatches.get(P.targetId)!=null,N=P.view.applyChanges(v,E.isPrimaryClient,k,V);return Ny(E,P.targetId,N.au),N.snapshot}(t,h,f,g);const s=await xy(t.localStore,e,!0),o=new I4(e,s.Qs),a=o.ru(s.documents),l=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Ny(t,n,u.au);const d=new S4(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function b4(t,e,n){const r=ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!rp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await La(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Fa(r.remoteStore,i.targetId),ja(r,i.targetId)}).catch(as)):(ja(r,i.targetId),await La(r.localStore,i.targetId,!0))}async function R4(t,e){const n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fa(n.remoteStore,r.targetId))}async function k4(t,e,n){const r=W_(t);try{const i=await function(o,a){const l=ie(o),u=be.now(),d=a.reduce((g,w)=>g.add(w.key),fe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Cn(),E=fe();return l.Ns.getEntries(g,d).next(P=>{w=P,w.forEach((_,y)=>{y.isValidDocument()||(E=E.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(P=>{h=P;const _=[];for(const y of a){const v=JF(y,h.get(y.key).overlayedDocument);v!=null&&_.push(new ei(y.key,v,QA(v.value.mapValue),Xt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,_,a)}).next(P=>{f=P;const _=P.applyToLocalDocumentSet(h,E);return l.documentOverlayCache.saveOverlays(g,P.batchId,_)})}).then(()=>({batchId:f.batchId,changes:lx(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Le(ce)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await cs(r,i.changes),await Za(r.remoteStore)}catch(i){const s=F_(i,"Failed to persist write");n.reject(s)}}async function vb(t,e){const n=ie(t);try{const r=await QU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?se(o.hu,14607):i.removedDocuments.size>0&&(se(o.hu,42227),o.hu=!1))}),await cs(n,r,e)}catch(r){await as(r)}}function I1(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(u=!0)}),u&&U_(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D4(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Le(X.comparator);o=o.insert(s,st.newNoDocument(s,ae.min()));const a=fe().add(s),l=new Ec(ae.min(),new Map,new Le(ce),o,a);await vb(r,l),r.du=r.du.remove(s),r.Au.delete(e),z_(r)}else await La(r.localStore,e,!1).then(()=>ja(r,e,n)).catch(as)}async function N4(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await KU(n.localStore,e);$_(n,r,null),B_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cs(n,i)}catch(i){await as(i)}}async function V4(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(se(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);$_(r,e,n),B_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cs(r,i)}catch(i){await as(i)}}function B_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $_(t,e,n){const r=ie(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ja(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||_b(t,r)})}function _b(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fa(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),z_(t))}function Ny(t,e,n){for(const r of n)r instanceof mb?(t.Ru.addReference(r.key,e),M4(t,r)):r instanceof gb?(z(tl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||_b(t,r.key)):ne(19791,{wu:r})}function M4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(z(tl,"New document in limbo: "+n),t.Eu.add(r),z_(t))}function z_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Ae.fromString(e)),r=t.fu.next();t.Au.set(r,new P4(n)),t.du=t.du.insert(n,r),hp(t.remoteStore,new Dr(xn(np(n.path)),r,"TargetPurposeLimboResolution",pn.ce))}}async function cs(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=k_.As(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const d=ie(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(u,f=>O.forEach(f.Es,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>O.forEach(f.ds,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!ls(h))throw h;z(D_,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const g=d.Ms.get(f),w=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(f,E)}}}(r.localStore,s))}async function O4(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){z(tl,"User change. New user:",e.toKey());const r=await Qx(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new Y(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cs(n,r.Ls)}}function L4(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return fe().add(r.key);{let i=fe();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function F4(t,e){const n=ie(t),r=await xy(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&Ny(n,e.targetId,i.au),i}async function U4(t,e){const n=ie(t);return Jx(n.localStore,e).then(r=>cs(n,r))}async function j4(t,e,n,r){const i=ie(t),s=await function(a,l){const u=ie(a),d=ie(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(f=>f?u.localDocuments.getDocuments(h,f):O.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Za(i.remoteStore):n==="acknowledged"||n==="rejected"?($_(i,e,r||null),B_(i,e),function(a,l){ie(ie(a).mutationQueue).ir(l)}(i.localStore,e)):ne(6720,"Unknown batchState",{Su:n}),await cs(i,s)):z(tl,"Cannot apply mutation batch with id: "+e)}async function B4(t,e){const n=ie(t);if(fp(n),W_(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await S1(n,r.toArray());n.gu=!0,await ky(n.remoteStore,!0);for(const s of i)hp(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ja(n,o),La(n.localStore,o,!0))),Fa(n.remoteStore,o)}),await i,await S1(n,r),function(o){const a=ie(o);a.Au.forEach((l,u)=>{Fa(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Le(X.comparator)}(n),n.gu=!1,await ky(n.remoteStore,!1)}}async function S1(t,e,n){const r=ie(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Zh(r.localStore,xn(l[0]));for(const u of l){const d=r.Tu.get(u),h=await F4(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await Xx(r.localStore,o);a=await Zh(r.localStore,u),await j_(r,wb(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function wb(t){return rx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $4(t){return function(n){return ie(ie(n).persistence).Ts()}(ie(t).localStore)}async function z4(t,e,n,r){const i=ie(t);if(i.gu)return void z(tl,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Jx(i.localStore,sx(s[0])),a=Ec.createSynthesizedRemoteEventForCurrentChange(e,n==="current",pt.EMPTY_BYTE_STRING);await cs(i,o,a);break}case"rejected":await La(i.localStore,e,!0),ja(i,e,r);break;default:ne(64155,n)}}async function W4(t,e,n){const r=fp(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){z(tl,"Adding an already active target "+i);continue}const s=await Xx(r.localStore,i),o=await Zh(r.localStore,s);await j_(r,wb(s),o.targetId,!1,o.resumeToken),hp(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await La(r.localStore,i,!1).then(()=>{Fa(r.remoteStore,i),ja(r,i)}).catch(as)}}function fp(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D4.bind(null,e),e.Pu.H_=T4.bind(null,e.eventManager),e.Pu.yu=E4.bind(null,e.eventManager),e}function W_(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}class rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Kx(this.persistence,new qx,e.initialUser,this.serializer)}Cu(e){return new b_(up.mi,this.serializer)}Du(e){return new rb}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rc.provider={build:()=>new rc};class H4 extends rc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){se(this.persistence.referenceDelegate instanceof Jh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Bx(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new b_(r=>Jh.mi(r,n),this.serializer)}}class Tb extends rc{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await W_(this.xu.syncEngine),await Za(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Kx(this.persistence,new qx,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Bx(r,e.asyncQueue,n)}Mu(e,n){const r=new ZL(n,this.persistence);return new JL(e.asyncQueue,r)}Cu(e){const n=Gx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new R_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ib(),th(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new rb}}class G4 extends Tb{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Mm&&(this.sharedClientState.syncEngine={Co:j4.bind(null,n),vo:z4.bind(null,n),Fo:W4.bind(null,n),Ts:$4.bind(null,n),Do:U4.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await B4(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=ib();if(!Mm.v(n))throw new Y(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Gx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ic{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O4.bind(null,this.syncEngine),await ky(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w4}()}createDatastore(e){const n=cp(e.databaseInfo.databaseId),r=function(s){return new n4(s)}(e.databaseInfo);return function(s,o,a,l){return new o4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new l4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>I1(this.syncEngine,n,0),function(){return y1.v()?new y1:new JU}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new C4(i,s,o,a,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);z(io,"RemoteStore shutting down."),s.Ea.add(5),await Sc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ic.provider={build:()=>new ic};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="FirestoreClient";class q4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dt.UNAUTHENTICATED,this.clientId=o_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{z(Ji,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z(Ji,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=F_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lm(t,e){t.asyncQueue.verifyOperationInProgress(),z(Ji,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Qx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function P1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K4(t);z(Ji,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_1(e.remoteStore,i)),t._onlineComponents=e}async function K4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z(Ji,"Using user provided OfflineComponentProvider");try{await Lm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await Lm(t,new rc)}}else z(Ji,"Using default OfflineComponentProvider"),await Lm(t,new H4(void 0));return t._offlineComponents}async function Ib(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z(Ji,"Using user provided OnlineComponentProvider"),await P1(t,t._uninitializedComponentsProvider._online)):(z(Ji,"Using default OnlineComponentProvider"),await P1(t,new ic))),t._onlineComponents}function Q4(t){return Ib(t).then(e=>e.syncEngine)}async function Sb(t){const e=await Ib(t),n=e.eventManager;return n.onListen=A4.bind(null,e.syncEngine),n.onUnlisten=b4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R4.bind(null,e.syncEngine),n}function Y4(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Eb({next:f=>{d.Nu(),o.enqueueAndForget(()=>fb(s,h));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new Y(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new Y(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new pb(np(a.path),d,{includeMetadataChanges:!0,qa:!0});return hb(s,h)}(await Sb(t),t.asyncQueue,e,n,r)),r.promise}function X4(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Eb({next:f=>{d.Nu(),o.enqueueAndForget(()=>fb(s,h)),f.fromCache&&l.source==="server"?u.reject(new Y(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new pb(a,d,{includeMetadataChanges:!0,qa:!0});return hb(s,h)}(await Sb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firestore.googleapis.com",A1=!0;class x1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cb,this.ssl=A1}else this.host=e.host,this.ssl=e.ssl??A1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xU)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pb(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new UL;switch(r.type){case"firstParty":return new zL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=C1.get(n);r&&(z("ComponentProvider","Removing Datastore"),C1.delete(n),r.terminate())}(this),Promise.resolve()}}function J4(t,e,n,r={}){var u;t=Wn(t,pp);const i=Qa(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(tA(`https://${a}`),nA("Firestore",!0)),s.host!==Cb&&s.host!==a&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Ys(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Dt.MOCK_USER;else{d=f2(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Dt(f)}t._authCredentials=new jL(new wA(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mp(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vc(n,wt._jsonSchema))return new wt(e,r||null,new X(Ae.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:_t("string",wt._jsonSchemaVersion),referencePath:_t("string")};class zi extends mp{constructor(e,n,r){super(e,n,np(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new X(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function Ge(t,e,...n){if(t=tt(t),EA("collection","path",e),t instanceof pp){const r=Ae.fromString(e,...n);return vE(r),new zi(t,null,r)}{if(!(t instanceof wt||t instanceof zi))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return vE(r),new zi(t.firestore,null,r)}}function Ft(t,e,...n){if(t=tt(t),arguments.length===1&&(e=o_.newId()),EA("doc","path",e),t instanceof pp){const r=Ae.fromString(e,...n);return yE(r),new wt(t,null,new X(r))}{if(!(t instanceof wt||t instanceof zi))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return yE(r),new wt(t.firestore,t instanceof zi?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="AsyncQueue";class R1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sb(this,"async_queue_retry"),this._c=()=>{const r=th();r&&z(b1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=th();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ls(e))throw e;z(b1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,dt("INTERNAL UNHANDLED ERROR: ",k1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=L_.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:k1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function k1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ds extends pp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new R1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R1(e),this._firestoreClient=void 0,await e}}}function Z4(t,e){const n=typeof t=="object"?t:cA(),r=typeof t=="string"?t:e||zh,i=i_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=d2("firestore");s&&J4(i,...s)}return i}function H_(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ab(t),t._firestoreClient}function Ab(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,d){return new AF(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Pb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new q4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function e3(t,e){Ki("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return xb(t,ic.provider,{build:r=>new Tb(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function t3(t){Ki("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();xb(t,ic.provider,{build:n=>new G4(n,e.cacheSizeBytes)})}function xb(t,e,n){if((t=Wn(t,ds))._firestoreClient||t._terminated)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Ab(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(pt.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vc(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:_t("string",Un._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gr._jsonSchemaVersion}}static fromJSON(e){if(vc(e,gr._jsonSchema))return new gr(e.latitude,e.longitude)}}gr._jsonSchemaVersion="firestore/geoPoint/1.0",gr._jsonSchema={type:_t("string",gr._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vc(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yr(e.vectorValues);throw new Y(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:_t("string",yr._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=/^__.*__$/;class r3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ja(e,this.data,n,this.fieldTransforms)}}class bb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class q_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new q_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&n3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cp(e)}Cc(e,n,r,i=!1){return new q_({Ac:e,methodName:n,Dc:r,path:Qe.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K_(t){const e=t._freezeSettings(),n=cp(t._databaseId);return new i3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kb(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Q_("Data must be an object, but it was:",o,r);const a=Db(r,o);let l,u;if(s.merge)l=new mn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Vy(e,h,n);if(!o.contains(f))throw new Y(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Vb(d,f)||d.push(f)}l=new mn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new r3(new Yt(a),l,u)}class yp extends G_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}function s3(t,e,n,r){const i=t.Cc(1,e,n);Q_("Data must be an object, but it was:",i,r);const s=[],o=Yt.empty();us(r,(l,u)=>{const d=Y_(e,l,n);u=tt(u);const h=i.yc(d);if(u instanceof yp)s.push(d);else{const f=vp(u,h);f!=null&&(s.push(d),o.set(d,f))}});const a=new mn(s);return new bb(o,a,i.fieldTransforms)}function o3(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Vy(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Vy(e,s[f])),l.push(s[f+1]);const u=[],d=Yt.empty();for(let f=a.length-1;f>=0;--f)if(!Vb(u,a[f])){const g=a[f];let w=l[f];w=tt(w);const E=o.yc(g);if(w instanceof yp)u.push(g);else{const P=vp(w,E);P!=null&&(u.push(g),d.set(g,P))}}const h=new mn(u);return new bb(d,h,o.fieldTransforms)}function vp(t,e){if(Nb(t=tt(t)))return Q_("Unsupported field value:",e,t),Db(t,e);if(t instanceof G_)return function(r,i){if(!Rb(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=vp(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=be.fromDate(r);return{timestampValue:Oa(i.serializer,s)}}if(r instanceof be){const s=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oa(i.serializer,s)}}if(r instanceof gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:Tx(i.serializer,r._byteString)};if(r instanceof wt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:P_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof yr)return function(o,a){return{mapValue:{fields:{[m_]:{stringValue:g_},[Ra]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return w_(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${a_(r)}`)}(t,e)}function Db(t,e){const n={};return jA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,(r,i)=>{const s=vp(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Nb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof gr||t instanceof Un||t instanceof wt||t instanceof G_||t instanceof yr)}function Q_(t,e,n){if(!Nb(n)||!IA(n)){const r=a_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Vy(t,e,n){if((e=tt(e))instanceof gp)return e._internalPath;if(typeof e=="string")return Y_(t,e);throw rf("Field path arguments must be of type string or ",t,!1,void 0,n)}const a3=new RegExp("[~\\*/\\[\\]]");function Y_(t,e,n){if(e.search(a3)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gp(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(j.INVALID_ARGUMENT,a+t+l)}function Vb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ob("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l3 extends Mb{data(){return super.data()}}function Ob(t,e){return typeof e=="string"?Y_(t,e):e instanceof gp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c3{convertValue(e,n="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return us(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ra].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>We(o.doubleValue));return new yr(n)}convertGeoPoint(e){return new gr(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);se(kx(r),9688,{name:e});const i=new Zs(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||dt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ws extends Mb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ob("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:_t("string",Ws._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class nh extends Ws{data(e={}){return super.data(e)}}class da{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new tu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nh(this._firestore,this._userDataWriter,r.key,r,new tu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new nh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new nh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:d3(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){t=Wn(t,wt);const e=Wn(t.firestore,ds);return Y4(H_(e),t._key).then(n=>h3(e,t,n))}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:_t("string",da._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class Fb extends c3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function Pt(t){t=Wn(t,mp);const e=Wn(t.firestore,ds),n=H_(e),r=new Fb(e);return u3(t._query),X4(n,t._query).then(i=>new da(e,r,t,i))}function sc(t,e,n){t=Wn(t,wt);const r=Wn(t.firestore,ds),i=Lb(t.converter,e,n);return wp(r,[kb(K_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xt.none())])}function Zi(t,e,n,...r){t=Wn(t,wt);const i=Wn(t.firestore,ds),s=K_(i);let o;return o=typeof(e=tt(e))=="string"||e instanceof gp?o3(s,"updateDoc",t._key,e,n,r):s3(s,"updateDoc",t._key,e),wp(i,[o.toMutation(t._key,Xt.exists(!0))])}function es(t){return wp(Wn(t.firestore,ds),[new op(t._key,Xt.none())])}function Jo(t,e){const n=Wn(t.firestore,ds),r=Ft(t),i=Lb(t.converter,e);return wp(n,[kb(K_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function wp(t,e){return function(r,i){const s=new mr;return r.asyncQueue.enqueueAndForget(async()=>k4(await Q4(r),i,s)),s.promise}(H_(t),e)}function h3(t,e,n){const r=n.docs.get(e._key),i=new Fb(t);return new Ws(t,i,e._key,r,new tu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Xa=i})(Ya),Ia(new Xs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ds(new BL(r.getProvider("auth-internal")),new WL(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zs(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ji(fE,pE,e),ji(fE,pE,"esm2020")})();function Ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f3=Ub,jb=new gc("auth","Firebase",Ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new n_("@firebase/auth");function p3(t,...e){sf.logLevel<=ge.WARN&&sf.warn(`Auth (${Ya}): ${t}`,...e)}function rh(t,...e){sf.logLevel<=ge.ERROR&&sf.error(`Auth (${Ya}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw X_(t,...e)}function vr(t,...e){return X_(t,...e)}function Bb(t,e,n){const r={...f3(),[e]:n};return new gc("auth","Firebase",r).create(e,{appName:t.name})}function _r(t){return Bb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jb.create(t,...e)}function le(t,e,...n){if(!t)throw X_(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rh(e),new Error(e)}function Gr(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function m3(){return D1()==="http:"||D1()==="https:"}function D1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m3()||v2()||"connection"in navigator)?navigator.onLine:!0}function y3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gr(n>e,"Short delay should be less than long delay!"),this.isMobile=g2()||_2()}get(){return g3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e){Gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],w3=new Pc(3e4,6e4);function ti(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rr(t,e,n,r,i={}){return zb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=yc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return y2()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Qa(t.emulatorConfig.host)&&(u.credentials="include"),$b.fetch()(await Wb(t,t.config.apiHost,n,a),u)})}async function zb(t,e,n){t._canInitEmulator=!1;const r={...v3,...e};try{const i=new E3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ed(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ed(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ed(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bb(t,d,u);nr(t,d)}}catch(i){if(i instanceof Jr)throw i;nr(t,"network-request-failed",{message:String(i)})}}async function Cc(t,e,n,r,i={}){const s=await rr(t,e,n,r,i);return"mfaPendingCredential"in s&&nr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Wb(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?J_(t.config,i):`${t.config.apiScheme}://${i}`;return _3.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function T3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vr(this.auth,"network-request-failed")),w3.get())})}}function Ed(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vr(t,e,r);return i.customData._tokenResponse=n,i}function N1(t){return t!==void 0&&t.enterprise!==void 0}class I3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return T3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function S3(t,e){return rr(t,"GET","/v2/recaptchaConfig",ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(t,e){return rr(t,"POST","/v1/accounts:delete",e)}async function of(t,e){return rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C3(t,e=!1){const n=tt(t),r=await n.getIdToken(e),i=Z_(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Eu(Fm(i.auth_time)),issuedAtTime:Eu(Fm(i.iat)),expirationTime:Eu(Fm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fm(t){return Number(t)*1e3}function Z_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{const i=YC(n);return i?JSON.parse(i):(rh("Failed to decode base64 JWT payload"),null)}catch(i){return rh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function V1(t){const e=Z_(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jr&&A3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(t){var h;const e=t.auth,n=await t.getIdToken(),r=await so(t,of(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?Hb(i.providerUserInfo):[],o=R3(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Oy(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function b3(t){const e=tt(t);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Hb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(t,e){const n=await zb(t,{},async()=>{const r=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Wb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Qa(t.emulatorConfig.host)&&(l.credentials="include"),$b.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D3(t,e){return rr(t,"POST","/v2/accounts:revokeToken",ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=V1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await k3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ha;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ha,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new x3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Oy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await so(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C3(this,e)}reload(){return b3(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await af(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await so(this,P3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:w,stsTokenManager:E}=n;le(h&&E,e,"internal-error");const P=ha.fromJSON(this.name,E);le(typeof h=="string",e,"internal-error"),di(r,e.name),di(i,e.name),le(typeof f=="boolean",e,"internal-error"),le(typeof g=="boolean",e,"internal-error"),di(s,e.name),di(o,e.name),di(a,e.name),di(l,e.name),di(u,e.name),di(d,e.name);const _=new Jn({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(_.providerData=w.map(y=>({...y}))),l&&(_._redirectEventId=l),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new ha;i.updateFromServerResponse(n);const s=new Jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await af(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Hb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ha;a.updateFromIdToken(r);const l=new Jn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Oy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new Map;function Vr(t){Gr(t instanceof Function,"Expected a class definition");let e=M1.get(t);return e?(Gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gb.type="NONE";const O1=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t,e,n){return`firebase:${t}:${e}:${n}`}class fa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ih(this.userKey,i.apiKey,s),this.fullPersistenceKey=ih("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await of(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fa(Vr(O1),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Vr(O1);const o=ih(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await of(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Jn._fromGetAccountInfoResponse(e,f,d)}else h=Jn._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new fa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Zb(e))return"Webos";if(Kb(e))return"Safari";if((e.includes("chrome/")||Qb(e))&&!e.includes("edge/"))return"Chrome";if(Xb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qb(t=Ct()){return/firefox\//i.test(t)}function Kb(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qb(t=Ct()){return/crios\//i.test(t)}function Yb(t=Ct()){return/iemobile/i.test(t)}function Xb(t=Ct()){return/android/i.test(t)}function Jb(t=Ct()){return/blackberry/i.test(t)}function Zb(t=Ct()){return/webos/i.test(t)}function ew(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function N3(t=Ct()){var e;return ew(t)&&!!((e=window.navigator)!=null&&e.standalone)}function V3(){return w2()&&document.documentMode===10}function eR(t=Ct()){return ew(t)||Xb(t)||Zb(t)||Jb(t)||/windows phone/i.test(t)||Yb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t,e=[]){let n;switch(t){case"Browser":n=L1(Ct());break;case"Worker":n=`${L1(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ya}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(t,e={}){return rr(t,"GET","/v2/passwordPolicy",ti(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=6;class F3{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??L3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F1(this),this.idTokenSubscription=new F1(this),this.beforeStateQueue=new M3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await of(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(In(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(_r(this));const n=e?tt(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O3(this),n=new F3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await D3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&p3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hs(t){return tt(t)}class F1{constructor(e){this.auth=e,this.observer=null,this.addObserver=C2(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j3(t){Tp=t}function nR(t){return Tp.loadJS(t)}function B3(){return Tp.recaptchaEnterpriseScript}function $3(){return Tp.gapiScript}function z3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class W3{constructor(){this.enterprise=new H3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class H3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G3="recaptcha-enterprise",rR="NO_RECAPTCHA";class q3{constructor(e){this.type=G3,this.auth=hs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{S3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new I3(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;N1(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(rR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new W3().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&N1(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=B3();l.length!==0&&(l+=a),nR(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Ml(t,e,n,r=!1,i=!1){const s=new q3(t);let o;if(i)o=rR;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function lf(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ml(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ml(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Ml(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Ml(t,e,n,!1,!0);return r(t,d)}return Promise.reject(l)})}else{const a=await Ml(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t,e){const n=i_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ys(s,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function Q3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Y3(t,e,n){const r=hs(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=iR(e),{host:o,port:a}=X3(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Ys(u,r.config.emulator)&&Ys(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Qa(o)?(tA(`${s}//${o}${l}`),nA("Auth",!0)):i||J3()}function iR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function X3(t){const e=iR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:U1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:U1(o)}}}function U1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function Z3(t,e){return rr(t,"POST","/v1/accounts:update",e)}async function ej(t,e){return rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e){return Cc(t,"POST","/v1/accounts:signInWithPassword",ti(t,e))}async function sR(t,e){return rr(t,"POST","/v1/accounts:sendOobCode",ti(t,e))}async function nj(t,e){return sR(t,e)}async function rj(t,e){return sR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e){return Cc(t,"POST","/v1/accounts:signInWithEmailLink",ti(t,e))}async function sj(t,e){return Cc(t,"POST","/v1/accounts:signInWithEmailLink",ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends tw{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new oc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new oc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,n,"signInWithPassword",tj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ij(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,r,"signUpPassword",ej,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sj(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(t,e){return Cc(t,"POST","/v1/accounts:signInWithIdp",ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="http://localhost";class oo extends tw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new oo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return pa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pa(e,n)}buildRequest(){const e={requestUri:oj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lj(t){const e=Ql(Yl(t)).link,n=e?Ql(Yl(e)).deep_link_id:null,r=Ql(Yl(t)).deep_link_id;return(r?Ql(Yl(r)).link:null)||r||n||e||t}class nw{constructor(e){const n=Ql(Yl(e)),r=n.apiKey??null,i=n.oobCode??null,s=aj(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=lj(e);try{return new nw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.providerId=nl.PROVIDER_ID}static credential(e,n){return oc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nw.parseLink(n);return le(r,"argument-error"),oc._fromEmailAndCode(e,r.code,r.tenantId)}}nl.PROVIDER_ID="password";nl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends oR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Ac{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oo._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ei.credential(n,r)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Ac{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Ac{constructor(){super("twitter.com")}static credential(e,n){return oo._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return Cc(t,"POST","/v1/accounts:signUp",ti(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Jn._fromIdTokenResponse(e,r,i),o=j1(r);return new ao({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=j1(r);return new ao({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function j1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends Jr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new uf(e,n,r,i)}}function aR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(t,s,e,r):s})}async function cj(t,e,n=!1){const r=await so(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ao._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject(_r(r));const i="reauthenticate";try{const s=await so(t,aR(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Z_(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),ao._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t,e,n=!1){if(In(t.app))return Promise.reject(_r(t));const r="signIn",i=await aR(t,r,e),s=await ao._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function hj(t,e){return lR(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t,e,n){var r;le(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),le(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),le(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(le(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(le(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t){const e=hs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fj(t,e,n){const r=hs(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&uR(r,i,n),await lf(r,i,"getOobCode",rj,"EMAIL_PASSWORD_PROVIDER")}async function pj(t,e,n){if(In(t.app))return Promise.reject(_r(t));const r=hs(t),o=await lf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uj,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&cR(t),l}),a=await ao._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function mj(t,e,n){return In(t.app)?Promise.reject(_r(t)):hj(tt(t),nl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cR(t),r})}async function gj(t,e){const n=tt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&uR(n.auth,i,e);const{email:s}=await nj(n.auth,i);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e){return rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=tt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await so(r,yj(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _j(t,e){const n=tt(t);return In(n.auth.app)?Promise.reject(_r(n.auth)):dR(n,e,null)}function wj(t,e){return dR(tt(t),null,e)}async function dR(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await so(t,Z3(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e){return tt(t).setPersistence(e)}function Tj(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function Ej(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function Ij(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function $1(t){return tt(t).signOut()}async function Sj(t){return tt(t).delete()}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=1e3,Cj=10;class fR extends hR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);V3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Cj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Pj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fR.type="LOCAL";const pR=fR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends hR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mR.type="SESSION";const gR=mR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ep(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Aj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=rw("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function bj(t){wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function Rj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Dj(){return yR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firebaseLocalStorageDb",Nj=1,df="firebaseLocalStorage",_R="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ip(t,e){return t.transaction([df],e?"readwrite":"readonly").objectStore(df)}function Vj(){const t=indexedDB.deleteDatabase(vR);return new xc(t).toPromise()}function Ly(){const t=indexedDB.open(vR,Nj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(df,{keyPath:_R})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(df)?e(r):(r.close(),await Vj(),e(await Ly()))})})}async function z1(t,e,n){const r=Ip(t,!0).put({[_R]:e,value:n});return new xc(r).toPromise()}async function Mj(t,e){const n=Ip(t,!1).get(e),r=await new xc(n).toPromise();return r===void 0?null:r.value}function W1(t,e){const n=Ip(t,!0).delete(e);return new xc(n).toPromise()}const Oj=800,Lj=3;class wR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Lj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ep._getInstance(Dj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Rj(),!this.activeServiceWorker)return;this.sender=new xj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ly();return await z1(e,cf,"1"),await W1(e,cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>z1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ip(i,!1).getAll();return new xc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wR.type="LOCAL";const TR=wR;new Pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){return e?Vr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw extends tw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Uj(t){return lR(t.auth,new iw(t),t.bypassAuthState)}function jj(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),dj(n,new iw(t),t.bypassAuthState)}async function Bj(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),cj(n,new iw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uj;case"linkViaPopup":case"linkViaRedirect":return Bj;case"reauthViaPopup":case"reauthViaRedirect":return jj;default:nr(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new Pc(2e3,1e4);class Zo extends ER{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const e=rw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$j.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="pendingRedirect",sh=new Map;class Wj extends ER{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const r=await Hj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hj(t,e){const n=Kj(e),r=qj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Gj(t,e){sh.set(t._key(),e)}function qj(t){return Vr(t._redirectPersistence)}function Kj(t){return ih(zj,t.config.apiKey,t.name)}async function Qj(t,e,n=!1){if(In(t.app))return Promise.reject(_r(t));const r=hs(t),i=Fj(r,e),o=await new Wj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=10*60*1e3;class Xj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Jj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IR(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(vr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yj&&this.cachedEventUids.clear(),this.cachedEventUids.has(H1(e))}saveEventToCache(e){this.cachedEventUids.add(H1(e)),this.lastProcessedEventTime=Date.now()}}function H1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Jj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t,e={}){return rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tB=/^https?/;async function nB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Zj(t);for(const n of e)try{if(rB(n))return}catch{}nr(t,"unauthorized-domain")}function rB(t){const e=My(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tB.test(n))return!1;if(eB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=new Pc(3e4,6e4);function G1(){const t=wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sB(t){return new Promise((e,n)=>{var i,s,o;function r(){G1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G1(),n(vr(t,"network-request-failed"))},timeout:iB.get()})}if((s=(i=wr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=wr().gapi)!=null&&o.load)r();else{const a=z3("iframefcb");return wr()[a]=()=>{gapi.load?r():n(vr(t,"network-request-failed"))},nR(`${$3()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw oh=null,e})}let oh=null;function oB(t){return oh=oh||sB(t),oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=new Pc(5e3,15e3),lB="__/auth/iframe",uB="emulator/auth/iframe",cB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hB(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?J_(e,uB):`https://${t.config.authDomain}/${lB}`,r={apiKey:e.apiKey,appName:t.name,v:Ya},i=dB.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yc(r).slice(1)}`}async function fB(t){const e=await oB(t),n=wr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:hB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=vr(t,"network-request-failed"),a=wr().setTimeout(()=>{s(o)},aB.get());function l(){wr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mB=500,gB=600,yB="_blank",vB="http://localhost";class q1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _B(t,e,n,r=mB,i=gB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...pB,width:r.toString(),height:i.toString(),top:s,left:o},u=Ct().toLowerCase();n&&(a=Qb(u)?yB:n),qb(u)&&(e=e||vB,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,w])=>`${f}${g}=${w},`,"");if(N3(u)&&a!=="_self")return wB(e||"",a),new q1(null);const h=window.open(e||"",a,d);le(h,t,"popup-blocked");try{h.focus()}catch{}return new q1(h)}function wB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="__/auth/handler",EB="emulator/auth/handler",IB=encodeURIComponent("fac");async function K1(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ya,eventId:i};if(e instanceof oR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",P2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Ac){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${IB}=${encodeURIComponent(l)}`:"";return`${SB(t)}?${yc(a).slice(1)}${u}`}function SB({config:t}){return t.emulator?J_(t,EB):`https://${t.authDomain}/${TB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class PB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gR,this._completeRedirectFn=Qj,this._overrideRedirectResult=Gj}async _openPopup(e,n,r,i){var o;Gr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await K1(e,n,r,My(),i);return _B(e,s,rw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await K1(e,n,r,My(),i);return bj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fB(e),r=new Xj(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Um,{type:Um},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Um];s!==void 0&&n(!!s),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eR()||Kb()||ew()}}const CB=PB;var Q1="@firebase/auth",Y1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bB(t){Ia(new Xs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tR(t)},u=new U3(r,i,s,l);return Q3(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ia(new Xs("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(r=>new AB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(Q1,Y1,xB(t)),ji(Q1,Y1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=5*60,kB=eA("authIdTokenMaxAge")||RB;let X1=null;const DB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kB)return;const i=n==null?void 0:n.token;X1!==i&&(X1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function NB(t=cA()){const e=i_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=K3(t,{popupRedirectResolver:CB,persistence:[TR,pR,gR]}),r=eA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=DB(s.toString());Ej(n,o,()=>o(n.currentUser)),Tj(n,a=>o(a))}}const i=JC("auth");return i&&Y3(n,`http://${i}`),n}function VB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}j3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=vr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bB("Browser");const MB={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},SR=uA(MB),he=Z4(SR),bt=NB(SR),OB=async()=>{try{await B1(bt,TR)}catch(t){console.warn("IndexedDB persistence unavailable, falling back to local storage.",t);try{await B1(bt,pR)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}};typeof window<"u"&&(t3(he).catch(t=>{t.code==="failed-precondition"?e3(he).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):t.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",t):console.error("Unexpected error enabling multi-tab persistence for Firestore.",t)}),OB().catch(t=>{console.error("Unexpected error configuring Firebase Auth persistence.",t)}));const LB=1;let jm=0;function FB(){return jm=(jm+1)%Number.MAX_VALUE,jm.toString()}const rn={state:{toasts:[]},listeners:[],getState:()=>rn.state,setState:t=>{typeof t=="function"?rn.state=t(rn.state):rn.state={...rn.state,...t},rn.listeners.forEach(e=>e(rn.state))},subscribe:t=>(rn.listeners.push(t),()=>{rn.listeners=rn.listeners.filter(e=>e!==t)})},UB=({...t})=>{const e=FB(),n=i=>rn.setState(s=>({...s,toasts:s.toasts.map(o=>o.id===e?{...o,...i}:o)})),r=()=>rn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return rn.setState(i=>({...i,toasts:[{...t,id:e,dismiss:r},...i.toasts].slice(0,LB)})),{id:e,dismiss:r,update:n}};function sw(){const[t,e]=b.useState(rn.getState());return b.useEffect(()=>rn.subscribe(r=>{e(r)}),[]),b.useEffect(()=>{const n=[];return t.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(i)}),()=>{n.forEach(r=>clearTimeout(r))}},[t.toasts]),{toast:UB,toasts:t.toasts}}const PR=b.createContext(null),jB=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(!0),[s,o]=b.useState(null),{toast:a}=sw();b.useEffect(()=>{const _=Ij(bt,async y=>{if(y){n({id:y.uid,uid:y.uid,email:y.email,displayName:y.displayName,photoURL:y.photoURL});const v=Ft(he,`users/${y.uid}/preferences`,"display"),k={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto"};try{const V=await _p(v);V.exists()?o({...k,...V.data()}):o(k)}catch(V){console.error("Failed to load preferences",V),o(k)}}else n(null),o(null);i(!1)});return()=>_()},[]);const l=async(_,y)=>{try{await mj(bt,_,y)}catch(v){throw a({title:"Error al iniciar sesin",description:v.message,variant:"destructive"}),v}},u=async(_,y)=>{try{const{user:v}=await pj(bt,_,y),k={url:`${window.location.origin}/auth`};await gj(v,k),await $1(bt)}catch(v){throw a({title:"Error al registrarse",description:v.message,variant:"destructive"}),v}},d=async _=>{try{await fj(bt,_)}catch(y){throw a({title:"Error al restablecer contrasea",description:y.message,variant:"destructive"}),y}},h=async()=>{try{await $1(bt),n(null),o(null)}catch(_){throw a({title:"Error al cerrar sesin",description:_.message,variant:"destructive"}),_}},f=async _=>{if(bt.currentUser)try{await _j(bt.currentUser,_),n(y=>y&&{...y,email:_})}catch(y){throw a({title:"Error al actualizar correo",description:y.message,variant:"destructive"}),y}},g=async _=>{if(bt.currentUser)try{await wj(bt.currentUser,_)}catch(y){throw a({title:"Error al actualizar contrasea",description:y.message,variant:"destructive"}),y}},w=async _=>{if(!bt.currentUser)return;const y=Ft(he,`users/${bt.currentUser.uid}/preferences`,"display");try{await sc(y,_,{merge:!0}),o(v=>({...v??{},..._}))}catch(v){throw console.error("Failed to save preferences",v),a({title:"Error al guardar preferencias",description:v.message,variant:"destructive"}),v}},E=async _=>{if(bt.currentUser)try{await vj(bt.currentUser,_),n(y=>y&&{...y,..._})}catch(y){throw a({title:"Error al actualizar perfil",description:y.message,variant:"destructive"}),y}},P=async()=>{if(bt.currentUser)try{await Sj(bt.currentUser),n(null),o(null)}catch(_){throw a({title:"Error al eliminar cuenta",description:_.message,variant:"destructive"}),_}};return L.jsx(PR.Provider,{value:{user:e,login:l,register:u,logout:h,resetPassword:d,updateEmail:f,updatePassword:g,preferences:s,savePreferences:w,updateProfile:E,deleteAccount:P,loadingAuth:r},children:t})},ow=()=>b.useContext(PR);function qr(t){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(t)}function en(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Fe(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function at(t){Fe(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||qr(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function aw(t,e){Fe(2,arguments);var n=at(t),r=en(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function BB(t,e){Fe(2,arguments);var n=at(t).getTime(),r=en(e);return new Date(n+r)}var $B={};function rl(){return $B}function hf(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function hn(t){Fe(1,arguments);var e=at(t);return e.setHours(0,0,0,0),e}var zB=864e5;function WB(t,e){Fe(2,arguments);var n=hn(t),r=hn(e),i=n.getTime()-hf(n),s=r.getTime()-hf(r);return Math.round((i-s)/zB)}function HB(t,e){Fe(2,arguments);var n=at(t),r=at(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}var lw=6e4,uw=36e5,GB=1e3;function qB(t){return Fe(1,arguments),t instanceof Date||qr(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function KB(t){if(Fe(1,arguments),!qB(t)&&typeof t!="number")return!1;var e=at(t);return!isNaN(Number(e))}function J1(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function QB(t,e){Fe(2,arguments);var n=at(t),r=at(e),i=J1(n,r),s=Math.abs(WB(n,r));n.setDate(n.getDate()-i*s);var o=+(J1(n,r)===-i),a=i*(s-o);return a===0?0:a}function CR(t,e){Fe(2,arguments);var n=en(e);return BB(t,-n)}var YB=864e5;function XB(t){Fe(1,arguments);var e=at(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/YB)+1}function Ba(t){Fe(1,arguments);var e=1,n=at(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function AR(t){Fe(1,arguments);var e=at(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Ba(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=Ba(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function JB(t){Fe(1,arguments);var e=AR(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Ba(n);return r}var ZB=6048e5;function xR(t){Fe(1,arguments);var e=at(t),n=Ba(e).getTime()-JB(e).getTime();return Math.round(n/ZB)+1}function lo(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var d=rl(),h=en((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=at(t),g=f.getUTCDay(),w=(g<h?7:0)+g-h;return f.setUTCDate(f.getUTCDate()-w),f.setUTCHours(0,0,0,0),f}function cw(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var d=at(t),h=d.getUTCFullYear(),f=rl(),g=en((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(h+1,0,g),w.setUTCHours(0,0,0,0);var E=lo(w,e),P=new Date(0);P.setUTCFullYear(h,0,g),P.setUTCHours(0,0,0,0);var _=lo(P,e);return d.getTime()>=E.getTime()?h+1:d.getTime()>=_.getTime()?h:h-1}function e6(t,e){var n,r,i,s,o,a,l,u;Fe(1,arguments);var d=rl(),h=en((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=cw(t,e),g=new Date(0);g.setUTCFullYear(f,0,h),g.setUTCHours(0,0,0,0);var w=lo(g,e);return w}var t6=6048e5;function bR(t,e){Fe(1,arguments);var n=at(t),r=lo(n,e).getTime()-e6(n,e).getTime();return Math.round(r/t6)+1}function xe(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var n6={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return xe(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):xe(r+1,2)},d:function(e,n){return xe(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return xe(e.getUTCHours()%12||12,n.length)},H:function(e,n){return xe(e.getUTCHours(),n.length)},m:function(e,n){return xe(e.getUTCMinutes(),n.length)},s:function(e,n){return xe(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return xe(s,n.length)}};const hi=n6;var ko={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},r6={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return hi.y(e,n)},Y:function(e,n,r,i){var s=cw(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return xe(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):xe(o,n.length)},R:function(e,n){var r=AR(e);return xe(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return xe(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return xe(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return xe(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return hi.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return xe(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=bR(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):xe(s,n.length)},I:function(e,n,r){var i=xR(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):xe(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):hi.d(e,n)},D:function(e,n,r){var i=XB(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):xe(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return xe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return xe(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return xe(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=ko.noon:i===0?s=ko.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=ko.evening:i>=12?s=ko.afternoon:i>=4?s=ko.morning:s=ko.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return hi.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):hi.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):xe(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):xe(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):hi.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):hi.s(e,n)},S:function(e,n){return hi.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return eI(o);case"XXXX":case"XX":return Cs(o);case"XXXXX":case"XXX":default:return Cs(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return eI(o);case"xxxx":case"xx":return Cs(o);case"xxxxx":case"xxx":default:return Cs(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Z1(o,":");case"OOOO":default:return"GMT"+Cs(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Z1(o,":");case"zzzz":default:return"GMT"+Cs(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return xe(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return xe(o,n.length)}};function Z1(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+xe(s,2)}function eI(t,e){if(t%60===0){var n=t>0?"-":"+";return n+xe(Math.abs(t)/60,2)}return Cs(t,e)}function Cs(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=xe(Math.floor(i/60),2),o=xe(i%60,2);return r+s+n+o}const i6=r6;var tI=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},RR=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},s6=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return tI(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",tI(i,n)).replace("{{time}}",RR(s,n))},o6={p:RR,P:s6};const Fy=o6;var a6=["D","DD"],l6=["YY","YYYY"];function kR(t){return a6.indexOf(t)!==-1}function DR(t){return l6.indexOf(t)!==-1}function ff(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var u6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},c6=function(e,n,r){var i,s=u6[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const d6=c6;function Bm(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var h6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},p6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},m6={date:Bm({formats:h6,defaultWidth:"full"}),time:Bm({formats:f6,defaultWidth:"full"}),dateTime:Bm({formats:p6,defaultWidth:"full"})};const g6=m6;var y6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},v6=function(e,n,r,i){return y6[e]};const _6=v6;function Ol(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var w6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},T6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},E6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},S6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},C6=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},A6={ordinalNumber:C6,era:Ol({values:w6,defaultWidth:"wide"}),quarter:Ol({values:T6,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ol({values:E6,defaultWidth:"wide"}),day:Ol({values:I6,defaultWidth:"wide"}),dayPeriod:Ol({values:S6,defaultWidth:"wide",formattingValues:P6,defaultFormattingWidth:"wide"})};const x6=A6;function Ll(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?R6(a,function(h){return h.test(o)}):b6(a,function(h){return h.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var d=e.slice(o.length);return{value:u,rest:d}}}function b6(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function R6(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function k6(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var D6=/^(\d+)(th|st|nd|rd)?/i,N6=/\d+/i,V6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},M6={any:[/^b/i,/^(a|c)/i]},O6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},L6={any:[/1/i,/2/i,/3/i,/4/i]},F6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},U6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},j6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},B6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},z6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},W6={ordinalNumber:k6({matchPattern:D6,parsePattern:N6,valueCallback:function(e){return parseInt(e,10)}}),era:Ll({matchPatterns:V6,defaultMatchWidth:"wide",parsePatterns:M6,defaultParseWidth:"any"}),quarter:Ll({matchPatterns:O6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ll({matchPatterns:F6,defaultMatchWidth:"wide",parsePatterns:U6,defaultParseWidth:"any"}),day:Ll({matchPatterns:j6,defaultMatchWidth:"wide",parsePatterns:B6,defaultParseWidth:"any"}),dayPeriod:Ll({matchPatterns:$6,defaultMatchWidth:"any",parsePatterns:z6,defaultParseWidth:"any"})};const H6=W6;var G6={code:"en-US",formatDistance:d6,formatLong:g6,formatRelative:_6,localize:x6,match:H6,options:{weekStartsOn:0,firstWeekContainsDate:1}};const NR=G6;var q6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,K6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Q6=/^'([^]*?)'?$/,Y6=/''/g,X6=/[a-zA-Z]/;function Lt(t,e,n){var r,i,s,o,a,l,u,d,h,f,g,w,E,P,_,y,v,k;Fe(2,arguments);var V=String(e),N=rl(),S=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:N.locale)!==null&&r!==void 0?r:NR,T=en((s=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:N.firstWeekContainsDate)!==null&&o!==void 0?o:(h=N.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=en((g=(w=(E=(P=n==null?void 0:n.weekStartsOn)!==null&&P!==void 0?P:n==null||(_=n.locale)===null||_===void 0||(y=_.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&E!==void 0?E:N.weekStartsOn)!==null&&w!==void 0?w:(v=N.locale)===null||v===void 0||(k=v.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&g!==void 0?g:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var R=at(t);if(!KB(R))throw new RangeError("Invalid time value");var D=hf(R),A=CR(R,D),C={firstWeekContainsDate:T,weekStartsOn:x,locale:S,_originalDate:R},U=V.match(K6).map(function(B){var G=B[0];if(G==="p"||G==="P"){var J=Fy[G];return J(B,S.formatLong)}return B}).join("").match(q6).map(function(B){if(B==="''")return"'";var G=B[0];if(G==="'")return J6(B);var J=i6[G];if(J)return!(n!=null&&n.useAdditionalWeekYearTokens)&&DR(B)&&ff(B,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&kR(B)&&ff(B,e,String(t)),J(A,B,S.localize,C);if(G.match(X6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+G+"`");return B}).join("");return U}function J6(t){var e=t.match(Q6);return e?e[1].replace(Y6,"'"):t}function Z6(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function nI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e$(t,e){if(t){if(typeof t=="string")return nI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nI(t,e):void 0}}function rI(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e$(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){a=!0,s=u},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}function ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uy(t,e){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Uy(t,e)}function Ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uy(t,e)}function pf(t){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pf(t)}function VR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VR=function(){return!!t})()}function t$(t,e){if(e&&(qr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(t)}function Se(t){var e=VR();return function(){var n,r=pf(t);if(e){var i=pf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return t$(this,n)}}function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n$(t,e){if(qr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MR(t){var e=n$(t,"string");return qr(e)=="symbol"?e:e+""}function iI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MR(r.key),r)}}function _e(t,e,n){return e&&iI(t.prototype,e),n&&iI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z(t,e,n){return(e=MR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r$=10,OR=function(){function t(){ve(this,t),Z(this,"priority",void 0),Z(this,"subPriority",0)}return _e(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),i$=function(t){Ie(n,t);var e=Se(n);function n(r,i,s,o,a){var l;return ve(this,n),l=e.call(this),l.value=r,l.validateValue=i,l.setValue=s,l.priority=o,a&&(l.subPriority=a),l}return _e(n,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),n}(OR),s$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",r$),Z(ee(r),"subPriority",-1),r}return _e(n,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),n}(OR),Ce=function(){function t(){ve(this,t),Z(this,"incompatibleTokens",void 0),Z(this,"priority",void 0),Z(this,"subPriority",void 0)}return _e(t,[{key:"run",value:function(n,r,i,s){var o=this.parse(n,r,i,s);return o?{setter:new i$(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}(),o$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",140),Z(ee(r),"incompatibleTokens",["R","u","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),ht={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ur={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ft(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ye(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function cr(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*uw+s*lw+o*GB),rest:e.slice(n[0].length)}}function LR(t){return Ye(ht.anyDigitsSigned,t)}function lt(t,e){switch(t){case 1:return Ye(ht.singleDigit,e);case 2:return Ye(ht.twoDigits,e);case 3:return Ye(ht.threeDigits,e);case 4:return Ye(ht.fourDigits,e);default:return Ye(new RegExp("^\\d{1,"+t+"}"),e)}}function mf(t,e){switch(t){case 1:return Ye(ht.singleDigitSigned,e);case 2:return Ye(ht.twoDigitsSigned,e);case 3:return Ye(ht.threeDigitsSigned,e);case 4:return Ye(ht.fourDigitsSigned,e);default:return Ye(new RegExp("^-?\\d{1,"+t+"}"),e)}}function dw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function FR(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var s=r+50,o=Math.floor(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function UR(t){return t%400===0||t%4===0&&t%100!==0}var a$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",130),Z(ee(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){var a=function(u){return{year:u,isTwoDigitYear:s==="yy"}};switch(s){case"y":return ft(lt(4,i),a);case"yo":return ft(o.ordinalNumber(i,{unit:"year"}),a);default:return ft(lt(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var l=FR(o.year,a);return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}var u=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),l$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",130),Z(ee(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){var a=function(u){return{year:u,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return ft(lt(4,i),a);case"Yo":return ft(o.ordinalNumber(i,{unit:"year"}),a);default:return ft(lt(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var l=cw(i,a);if(o.isTwoDigitYear){var u=FR(o.year,l);return i.setUTCFullYear(u,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),lo(i,a)}var d=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(d,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),lo(i,a)}}]),n}(Ce),u$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",130),Z(ee(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s){return mf(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),Ba(a)}}]),n}(Ce),c$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",130),Z(ee(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s){return mf(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),d$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",120),Z(ee(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return lt(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),h$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",120),Z(ee(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return lt(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),f$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Z(ee(r),"priority",110),r}return _e(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u-1};switch(s){case"M":return ft(Ye(ht.month,i),a);case"MM":return ft(lt(2,i),a);case"Mo":return ft(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),p$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",110),Z(ee(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u-1};switch(s){case"L":return ft(Ye(ht.month,i),a);case"LL":return ft(lt(2,i),a);case"Lo":return ft(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),n}(Ce);function m$(t,e,n){Fe(2,arguments);var r=at(t),i=en(e),s=bR(r,n)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var g$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",100),Z(ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"w":return Ye(ht.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return lo(m$(i,o,a),a)}}]),n}(Ce);function y$(t,e){Fe(2,arguments);var n=at(t),r=en(e),i=xR(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}var v$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",100),Z(ee(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"I":return Ye(ht.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return Ba(y$(i,o))}}]),n}(Ce),_$=[31,28,31,30,31,30,31,31,30,31,30,31],w$=[31,29,31,30,31,30,31,31,30,31,30,31],T$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",90),Z(ee(r),"subPriority",1),Z(ee(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"d":return Ye(ht.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=UR(o),l=i.getUTCMonth();return a?s>=1&&s<=w$[l]:s>=1&&s<=_$[l]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),E$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",90),Z(ee(r),"subpriority",1),Z(ee(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return Ye(ht.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=UR(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),n}(Ce);function hw(t,e,n){var r,i,s,o,a,l,u,d;Fe(2,arguments);var h=rl(),f=en((r=(i=(s=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(a=n.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&i!==void 0?i:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=at(t),w=en(e),E=g.getUTCDay(),P=w%7,_=(P+7)%7,y=(_<f?7:0)+w-E;return g.setUTCDate(g.getUTCDate()+y),g}var I$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",90),Z(ee(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=hw(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),S$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",90),Z(ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o,a){var l=function(d){var h=Math.floor((d-1)/7)*7;return(d+a.weekStartsOn+6)%7+h};switch(s){case"e":case"ee":return ft(lt(s.length,i),l);case"eo":return ft(o.ordinalNumber(i,{unit:"day"}),l);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=hw(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),P$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",90),Z(ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o,a){var l=function(d){var h=Math.floor((d-1)/7)*7;return(d+a.weekStartsOn+6)%7+h};switch(s){case"c":case"cc":return ft(lt(s.length,i),l);case"co":return ft(o.ordinalNumber(i,{unit:"day"}),l);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=hw(i,o,a),i.setUTCHours(0,0,0,0),i}}]),n}(Ce);function C$(t,e){Fe(2,arguments);var n=en(e);n%7===0&&(n=n-7);var r=1,i=at(t),s=i.getUTCDay(),o=n%7,a=(o+7)%7,l=(a<r?7:0)+n-s;return i.setUTCDate(i.getUTCDate()+l),i}var A$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",90),Z(ee(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){var a=function(u){return u===0?7:u};switch(s){case"i":case"ii":return lt(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return ft(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return ft(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return ft(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return ft(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=C$(i,o),i.setUTCHours(0,0,0,0),i}}]),n}(Ce),x$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",80),Z(ee(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(dw(o),0,0,0),i}}]),n}(Ce),b$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",80),Z(ee(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(dw(o),0,0,0),i}}]),n}(Ce),R$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",80),Z(ee(r),"incompatibleTokens",["a","b","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(dw(o),0,0,0),i}}]),n}(Ce),k$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",70),Z(ee(r),"incompatibleTokens",["H","K","k","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"h":return Ye(ht.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Ce),D$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",70),Z(ee(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"H":return Ye(ht.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),n}(Ce),N$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",70),Z(ee(r),"incompatibleTokens",["h","H","k","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"K":return Ye(ht.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),n}(Ce),V$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",70),Z(ee(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"k":return Ye(ht.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),n}(Ce),M$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",60),Z(ee(r),"incompatibleTokens",["t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"m":return Ye(ht.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),n}(Ce),O$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",50),Z(ee(r),"incompatibleTokens",["t","T"]),r}return _e(n,[{key:"parse",value:function(i,s,o){switch(s){case"s":return Ye(ht.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return lt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),n}(Ce),L$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",30),Z(ee(r),"incompatibleTokens",["t","T"]),r}return _e(n,[{key:"parse",value:function(i,s){var o=function(l){return Math.floor(l*Math.pow(10,-s.length+3))};return ft(lt(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),n}(Ce),F$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",10),Z(ee(r),"incompatibleTokens",["t","T","x"]),r}return _e(n,[{key:"parse",value:function(i,s){switch(s){case"X":return cr(ur.basicOptionalMinutes,i);case"XX":return cr(ur.basic,i);case"XXXX":return cr(ur.basicOptionalSeconds,i);case"XXXXX":return cr(ur.extendedOptionalSeconds,i);case"XXX":default:return cr(ur.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Ce),U$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",10),Z(ee(r),"incompatibleTokens",["t","T","X"]),r}return _e(n,[{key:"parse",value:function(i,s){switch(s){case"x":return cr(ur.basicOptionalMinutes,i);case"xx":return cr(ur.basic,i);case"xxxx":return cr(ur.basicOptionalSeconds,i);case"xxxxx":return cr(ur.extendedOptionalSeconds,i);case"xxx":default:return cr(ur.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),n}(Ce),j$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",40),Z(ee(r),"incompatibleTokens","*"),r}return _e(n,[{key:"parse",value:function(i){return LR(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Ce),B$=function(t){Ie(n,t);var e=Se(n);function n(){var r;ve(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),Z(ee(r),"priority",20),Z(ee(r),"incompatibleTokens","*"),r}return _e(n,[{key:"parse",value:function(i){return LR(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Ce),$$={G:new o$,y:new a$,Y:new l$,R:new u$,u:new c$,Q:new d$,q:new h$,M:new f$,L:new p$,w:new g$,I:new v$,d:new T$,D:new E$,E:new I$,e:new S$,c:new P$,i:new A$,a:new x$,b:new b$,B:new R$,h:new k$,H:new D$,K:new N$,k:new V$,m:new M$,s:new O$,S:new L$,X:new F$,x:new U$,t:new j$,T:new B$},z$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,H$=/^'([^]*?)'?$/,G$=/''/g,q$=/\S/,K$=/[a-zA-Z]/;function Q$(t,e,n,r){var i,s,o,a,l,u,d,h,f,g,w,E,P,_,y,v,k,V;Fe(3,arguments);var N=String(t),S=String(e),T=rl(),x=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:T.locale)!==null&&i!==void 0?i:NR;if(!x.match)throw new RangeError("locale must contain match property");var R=en((o=(a=(l=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(d=r.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&l!==void 0?l:T.firstWeekContainsDate)!==null&&a!==void 0?a:(f=T.locale)===null||f===void 0||(g=f.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=en((w=(E=(P=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(y=r.locale)===null||y===void 0||(v=y.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&P!==void 0?P:T.weekStartsOn)!==null&&E!==void 0?E:(k=T.locale)===null||k===void 0||(V=k.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&w!==void 0?w:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(S==="")return N===""?at(n):new Date(NaN);var A={firstWeekContainsDate:R,weekStartsOn:D,locale:x},C=[new s$],U=S.match(W$).map(function(qe){var we=qe[0];if(we in Fy){var Me=Fy[we];return Me(qe,x.formatLong)}return qe}).join("").match(z$),B=[],G=rI(U),J;try{var $=function(){var we=J.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&DR(we)&&ff(we,S,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&kR(we)&&ff(we,S,t);var Me=we[0],Tt=$$[Me];if(Tt){var Sr=Tt.incompatibleTokens;if(Array.isArray(Sr)){var ni=B.find(function(ri){return Sr.includes(ri.token)||ri.token===Me});if(ni)throw new RangeError("The format string mustn't contain `".concat(ni.fullToken,"` and `").concat(we,"` at the same time"))}else if(Tt.incompatibleTokens==="*"&&B.length>0)throw new RangeError("The format string mustn't contain `".concat(we,"` and any other token at the same time"));B.push({token:Me,fullToken:we});var Vn=Tt.run(N,we,x.match,A);if(!Vn)return{v:new Date(NaN)};C.push(Vn.setter),N=Vn.rest}else{if(Me.match(K$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Me+"`");if(we==="''"?we="'":Me==="'"&&(we=Y$(we)),N.indexOf(we)===0)N=N.slice(we.length);else return{v:new Date(NaN)}}};for(G.s();!(J=G.n()).done;){var q=$();if(qr(q)==="object")return q.v}}catch(qe){G.e(qe)}finally{G.f()}if(N.length>0&&q$.test(N))return new Date(NaN);var Q=C.map(function(qe){return qe.priority}).sort(function(qe,we){return we-qe}).filter(function(qe,we,Me){return Me.indexOf(qe)===we}).map(function(qe){return C.filter(function(we){return we.priority===qe}).sort(function(we,Me){return Me.subPriority-we.subPriority})}).map(function(qe){return qe[0]}),H=at(n);if(isNaN(H.getTime()))return new Date(NaN);var re=CR(H,hf(H)),oe={},Ve=rI(Q),xt;try{for(Ve.s();!(xt=Ve.n()).done;){var mt=xt.value;if(!mt.validate(re,A))return new Date(NaN);var ut=mt.set(re,oe,A);Array.isArray(ut)?(re=ut[0],Z6(oe,ut[1])):re=ut}}catch(qe){Ve.e(qe)}finally{Ve.f()}return re}function Y$(t){return t.match(H$)[1].replace(G$,"'")}function de(t,e){var n;Fe(1,arguments);var r=en((n=e==null?void 0:e.additionalDigits)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=e5(t),s;if(i.date){var o=t5(i.date,r);s=n5(o.restDateString,o.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var a=s.getTime(),l=0,u;if(i.time&&(l=r5(i.time),isNaN(l)))return new Date(NaN);if(i.timezone){if(u=i5(i.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(a+l),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(a+l+u)}var Id={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},X$=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,J$=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Z$=/^([+-])(\d{2})(?::?(\d{2}))?$/;function e5(t){var e={},n=t.split(Id.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Id.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Id.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var i=Id.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function t5(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function n5(t,e){if(e===null)return new Date(NaN);var n=t.match(X$);if(!n)return new Date(NaN);var r=!!n[4],i=Fl(n[1]),s=Fl(n[2])-1,o=Fl(n[3]),a=Fl(n[4]),l=Fl(n[5])-1;if(r)return u5(e,a,l)?s5(e,a,l):new Date(NaN);var u=new Date(0);return!a5(e,s,o)||!l5(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}function Fl(t){return t?parseInt(t):1}function r5(t){var e=t.match(J$);if(!e)return NaN;var n=$m(e[1]),r=$m(e[2]),i=$m(e[3]);return c5(n,r,i)?n*uw+r*lw+i*1e3:NaN}function $m(t){return t&&parseFloat(t.replace(",","."))||0}function i5(t){if(t==="Z")return 0;var e=t.match(Z$);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return d5(r,i)?n*(r*uw+i*lw):NaN}function s5(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var o5=[31,null,31,30,31,30,31,31,30,31,30,31];function jR(t){return t%400===0||t%4===0&&t%100!==0}function a5(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(o5[e]||(jR(t)?29:28))}function l5(t,e){return e>=1&&e<=(jR(t)?366:365)}function u5(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function c5(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function d5(t,e){return e>=0&&e<=59}const gf=(t,e)=>{if(!t||!e)return 0;const n=hn(de(t)),r=hn(de(e));return QB(n,r)+1},Ul=t=>{if(t==null||t==="")return null;const e=parseFloat(String(t).replace(",","."));return isNaN(e)?null:e},zm=(t,e)=>!t||!Array.isArray(t)||!e?[]:[...t].sort((r,i)=>{const s=r.timestamp?de(r.timestamp):r.iso_date?de(r.iso_date):0,o=i.timestamp?de(i.timestamp):i.iso_date?de(i.iso_date):0;return HB(s,o)}).map(r=>{const i=Ul(r.temperature_raw),s=Ul(r.temperature_corrected),o=l=>{if(!l)return null;const u=Ul(l.temperature),d=Ul(l.temperature_corrected);return l.use_corrected&&d!==null?d:u!==null?u:d!==null?d:null};let a=Ul(r.temperature_chart);if(a==null&&Array.isArray(r.measurements)){const u=r.measurements.find(d=>d&&d.selected&&o(d)!==null)||r.measurements.find(d=>o(d)!==null);u&&(a=o(u))}return a==null&&(r.use_corrected&&s!==null?a=s:i!==null?a=i:s!==null&&(a=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?Lt(de(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?Lt(de(r.timestamp),"dd/MM"):r.iso_date?Lt(de(r.iso_date),"dd/MM"):"N/A",cycleDay:gf(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:r.measurements||[],temperature_chart:a,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),h5=async t=>{const e=Ge(he,`users/${t}/cycles`),n=await Pt(e);if(n.empty)return null;const r=n.docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.end_date===null||l.end_date===void 0).sort((l,u)=>(u.start_date||"").localeCompare(l.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=Ge(he,`users/${t}/cycles/${i.id}/entries`),o=await Pt(s),a=await Promise.all(o.docs.map(async l=>{let u=[];try{const d=Ge(he,`users/${t}/cycles/${i.id}/entries/${l.id}/measurements`);u=(await Pt(d)).docs.map(f=>({id:f.id,...f.data()}))}catch(d){console.error("Error fetching measurements for entry",l.id,d)}return{id:l.id,...l.data(),measurements:u}}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:a}},f5=async(t,e)=>{const n=Ge(he,`users/${t}/cycles`),i=(await Pt(n)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>o.end_date!==null&&o.end_date!==void 0||e&&o.start_date&&o.start_date<e).sort((o,a)=>(a.start_date||"").localeCompare(o.start_date||""));return await Promise.all(i.map(async o=>{const a=Ge(he,`users/${t}/cycles/${o.id}/entries`),l=await Pt(a),u=await Promise.all(l.docs.map(async d=>{let h=[];try{const f=Ge(he,`users/${t}/cycles/${o.id}/entries/${d.id}/measurements`);h=(await Pt(f)).docs.map(w=>({id:w.id,...w.data()}))}catch(f){console.error("Error fetching measurements for entry",d.id,f)}return{id:d.id,...d.data(),measurements:h}}));return{id:o.id,startDate:o.start_date,endDate:o.end_date,needsCompletion:!o.end_date,ignoredForAutoCalculations:!!o.ignored_auto_calculations,data:u}}))},p5=async(t,e)=>{const n=Ft(he,`users/${t}/cycles/${e}`),r=await _p(n);if(!r.exists())return null;const i=r.data(),s=Ge(he,`users/${t}/cycles/${e}/entries`),o=await Pt(s),a=await Promise.all(o.docs.map(async l=>{let u=[];try{const d=Ge(he,`users/${t}/cycles/${e}/entries/${l.id}/measurements`);u=(await Pt(d)).docs.map(f=>({id:f.id,...f.data()}))}catch(d){console.error("Error fetching measurements for entry",l.id,d)}return{id:l.id,...l.data(),measurements:u}}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:a}},sI=async(t,e)=>{const n=Ge(he,`users/${t}/cycles`),r=await Pt(n),i=de(e),s=r.docs.find(a=>{const l=a.data(),u=l.start_date?de(l.start_date):null,d=l.end_date?de(l.end_date):null;if(!u||!i)return!1;const h=d??new Date("9999-12-31");return i>=u&&i<=h});if(s){const a={id:s.id,startDate:s.data().start_date,endDate:s.data().end_date},l=new Error("Cycle dates overlap with an existing cycle");throw l.code="cycle-overlap",l.conflictCycle=a,l}return{id:(await Jo(Ge(he,`users/${t}/cycles`),{user_id:t,start_date:e,ignored_auto_calculations:!1,end_date:null})).id,start_date:e}},m5=async t=>{var d;const e=t.user_id,n=t.timestamp??new Date().toISOString(),r=(d=t.measurements)==null?void 0:d.find(h=>h.selected),i={timestamp:n,temperature_raw:(r==null?void 0:r.temperature)??null,temperature_corrected:(r==null?void 0:r.temperature_corrected)??null,use_corrected:!1,temperature_chart:r?r.temperature_corrected??r.temperature:null,mucus_sensation:t.mucus_sensation,mucus_appearance:t.mucus_appearance,fertility_symbol:t.fertility_symbol,observations:t.observations,had_relations:!!(t.had_relations??t.hadRelations??!1),ignored:t.ignored,peak_marker:t.peak_marker??null},s=Ge(he,`users/${e}/cycles`),o=await Pt(s),a=de(n),l=o.docs.filter(h=>{const f=h.data(),g=f.start_date?de(f.start_date):null,w=f.end_date?de(f.end_date):null;return g&&a>=g&&(!w||a<=w)});let u=null;if(l.length>1?u=l.sort((h,f)=>{const g=de(h.data().start_date);return de(f.data().start_date)-g})[0]:l.length===1&&(u=l[0]),u){const h=await Jo(Ge(he,`users/${e}/cycles/${u.id}/entries`),i);if(t.measurements&&t.measurements.length){const f=Ge(he,`users/${e}/cycles/${u.id}/entries/${h.id}/measurements`);for(const g of t.measurements)await Jo(f,g)}return{id:h.id}}if(t.cycle_id){const h=await Jo(Ge(he,`users/${e}/cycles/${t.cycle_id}/entries`),i);if(t.measurements&&t.measurements.length){const f=Ge(he,`users/${e}/cycles/${t.cycle_id}/entries/${h.id}/measurements`);for(const g of t.measurements)await Jo(f,g)}return{id:h.id}}return{id:null}},Wm=async(t,e,n,r)=>{const i=Ft(he,`users/${t}/cycles/${e}/entries/${n}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],o={};for(const a of s)Object.prototype.hasOwnProperty.call(r,a)&&(o[a]=r[a]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(o.timestamp=r.timestamp),Object.keys(o).length===0)return{id:n};if(await Zi(i,o),r.measurements){const a=Ge(he,`users/${t}/cycles/${e}/entries/${n}/measurements`),l=await Pt(a);await Promise.all(l.docs.map(u=>es(u.ref)));for(const u of r.measurements)await Jo(a,u)}return{id:n}},oI=async(t,e,n)=>{await es(Ft(he,`users/${t}/cycles/${e}/entries/${n}`))},g5=async(t,e,n)=>{const r=Ft(he,`users/${e}/cycles/${t}`);if(!(await _p(r)).exists())throw new Error("Cycle not found");await Zi(r,{end_date:n})},jl=async(t,e,n,r,i=!1)=>{const s=Ft(he,`users/${e}/cycles/${t}`),o=await _p(s);if(!o.exists())throw new Error("Cycle not found");const a=o.data(),l=n??a.start_date,u=r!==void 0?r:a.end_date,d=l?de(l):null,h=u?de(u):null;if(d&&h&&h<d)throw new Error("End date cannot be earlier than start date");const f=Ge(he,`users/${e}/cycles`),w=(await Pt(f)).docs.find(_=>{if(_.id===t)return!1;const y=_.data(),v=y.start_date?de(y.start_date):null,k=y.end_date?de(y.end_date):null;if(!v)return!1;const V=k??new Date("9999-12-31"),N=h??new Date("9999-12-31");return d<=V&&v<=N}),E=w?{id:w.id,startDate:w.data().start_date,endDate:w.data().end_date}:null;if(i)return{overlap:E};if(w){const _=new Error("Cycle dates overlap with an existing cycle");throw _.code="cycle-overlap",_.conflictCycle=E,_}const P={};n!==void 0&&(P.start_date=n),r!==void 0&&(P.end_date=r),await Zi(s,P)},y5=async(t,e,n)=>{const r=Ft(he,`users/${t}/cycles/${e}`);await Zi(r,{ignored_auto_calculations:n})},v5=async(t,e,n,r)=>{if(!n)return;const i=Ge(he,`users/${t}/cycles`),s=await Pt(i),o=s.docs.find(N=>N.id===e);if(!o)return;const a=o.data(),l=r||a.start_date||null,u=l?de(l):null,d=s.docs.filter(N=>N.id!==e).map(N=>({id:N.id,data:N.data()})).filter(({data:N})=>N.start_date).sort((N,S)=>de(N.data.start_date).getTime()-de(S.data.start_date).getTime()),h=u??de(n),f=d.find(({data:N})=>{try{return de(N.start_date)>h}catch(S){return console.error("Error parsing next cycle start date",S),!1}});if(!f)return;const g=de(f.data.start_date),w=f.data.end_date?de(f.data.end_date):null,E=de(n);let P=aw(E,1);g&&P<g&&(P=g),w&&P>w&&(P=w);const _=Lt(P,"yyyy-MM-dd"),y=Ge(he,`users/${t}/cycles/${f.id}/entries`),v=await Pt(y),k=l||a.start_date;await Promise.all(v.docs.map(async N=>{const S=N.data(),T=S.timestamp?de(S.timestamp):S.iso_date?de(S.iso_date):null;if(!T)return;const x=Lt(T,"yyyy-MM-dd");if(T<P){const R={...S,cycle_day:gf(x,k)},D=Ft(he,`users/${t}/cycles/${e}/entries/${N.id}`);await sc(D,R);const A=Ge(he,`users/${t}/cycles/${f.id}/entries/${N.id}/measurements`),C=await Pt(A);await Promise.all(C.docs.map(async U=>{const B=Ft(he,`users/${t}/cycles/${e}/entries/${N.id}/measurements/${U.id}`);await sc(B,U.data()),await es(U.ref)})),await es(N.ref)}else await Zi(N.ref,{cycle_day:gf(x,_)})}));const V=Ft(he,`users/${t}/cycles/${f.id}`);await Zi(V,{start_date:_})},_5=async(t,e,n)=>{const r=Ge(he,`users/${t}/cycles`),i=await Pt(r),s=de(n),o=i.docs.find(l=>{if(l.id===e)return!1;const u=l.data(),d=u.start_date?de(u.start_date):null,h=u.end_date?de(u.end_date):null;return!d||!h?!1:d<=s&&h>=s});if(o){const l=Ft(he,`users/${t}/cycles/${o.id}`),u=Lt(aw(s,-1),"yyyy-MM-dd");await Zi(l,{end_date:u});const d=Ge(he,`users/${t}/cycles/${o.id}/entries`),h=await Pt(d);await Promise.all(h.docs.map(async f=>{const g=f.data(),w=g.timestamp?de(g.timestamp):null;if(w&&w>=s){const E={...g,cycle_day:gf(Lt(w,"yyyy-MM-dd"),n)},P=Ft(he,`users/${t}/cycles/${e}/entries/${f.id}`);await sc(P,E);const _=Ge(he,`users/${t}/cycles/${o.id}/entries/${f.id}/measurements`),y=await Pt(_);await Promise.all(y.docs.map(async v=>{const k=Ft(he,`users/${t}/cycles/${e}/entries/${f.id}/measurements/${v.id}`);await sc(k,v.data()),await es(v.ref)})),await es(f.ref)}}))}const a=Ft(he,`users/${t}/cycles/${e}`);await Zi(a,{start_date:n})},aI=async(t,e)=>{const n=Ge(he,`users/${t}/cycles/${e}/entries`),r=await Pt(n);await Promise.all(r.docs.map(i=>es(i.ref))),await es(Ft(he,`users/${t}/cycles/${e}`))},w5="RNFApp",T5=1,yf="cycleData",fw="cycle-data:",pw=()=>typeof indexedDB<"u",mw=()=>typeof localStorage<"u",E5=t=>typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t)),I5=()=>new Promise((t,e)=>{const n=indexedDB.open(w5,T5);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(yf)||r.createObjectStore(yf)},n.onsuccess=()=>{t(n.result)},n.onerror=()=>{e(n.error)}}),gw=async(t,e)=>{const n=await I5();return new Promise((r,i)=>{const s=n.transaction(yf,t),o=s.objectStore(yf),a=e(o);s.oncomplete=()=>{n.close(),r(a==null?void 0:a.result)},s.onerror=()=>{n.close(),i(s.error??(a==null?void 0:a.error))}})},lI=async t=>{if(!t)return null;if(pw())try{return await gw("readonly",n=>n.get(t))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(mw())try{const e=localStorage.getItem(`${fw}${t}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},S5=async(t,e)=>{if(!t)return;const n=E5(e);if(pw())try{await gw("readwrite",r=>r.put(n,t));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(mw())try{localStorage.setItem(`${fw}${t}`,JSON.stringify(n))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},P5=async t=>{if(t){if(pw())try{await gw("readwrite",e=>e.delete(t))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(mw())try{localStorage.removeItem(`${fw}${t}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}},BR=b.createContext(null),_s={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1},Hm=(t,e)=>{if(!e)return t;const n=hn(de(e));return t.filter(r=>de(r.isoDate)<=n)},Gm=(t,e)=>{if(!e)return t;const n=hn(de(e));return t.filter(r=>de(r.isoDate)>=n)},Sd=t=>{if(t==null||t==="")return null;const e=parseFloat(String(t).replace(",","."));return isNaN(e)?null:e},Do=t=>t?typeof t=="string"?Lt(hn(de(t)),"yyyy-MM-dd"):typeof t.toDate=="function"?Lt(hn(t.toDate()),"yyyy-MM-dd"):Lt(hn(new Date(t)),"yyyy-MM-dd"):null,C5=({children:t})=>{const{user:e}=ow(),{toast:n}=sw(),[r,i]=b.useState(_s),[s,o]=b.useState([]),[a,l]=b.useState(!0),u=b.useRef(!1),d=b.useRef(null),h=b.useCallback(()=>{i(_s),o([]),l(!1),u.current=!1},[]),f=b.useCallback(async({silent:A=!1}={})=>{if(!(e!=null&&e.uid)){const B=d.current;d.current=null,B&&P5(B).catch(G=>console.error("Failed to clear cached cycle data on sign-out.",G)),h();return}d.current=e.uid;let C=!1;if(!u.current)try{const B=await lI(e.uid);B&&(i(B.currentCycle??_s),o(B.archivedCycles??[]),u.current=!0,C=!0,A||l(!1))}catch(B){console.error("Failed to hydrate cycle data from cache.",B)}const U=!A&&!C&&!u.current;U&&l(!0);try{const B=await h5(e.uid);let G=_s;if(B){const q=Do(B.startDate),Q=Do(B.endDate),H=zm(B.data,q),re=Gm(H,q),oe=Hm(re,Q);G={...B,startDate:q,endDate:Q,data:oe}}const $=(await f5(e.uid,B?B.startDate:null)).map(q=>{const Q=Do(q.startDate),H=Do(q.endDate),re=zm(q.data||[],Q),oe=Gm(re,Q),Ve=Hm(oe,H);return{...q,startDate:Q??Lt(hn(new Date),"yyyy-MM-dd"),endDate:H,needsCompletion:q.needsCompletion,data:Ve}});i(G),o($),await S5(e.uid,{currentCycle:G,archivedCycles:$}),u.current=!0}catch(B){if(console.error("Error in loadCycleData:",B),B.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!C)try{const G=await lI(e.uid);G?(i(G.currentCycle??_s),o(G.archivedCycles??[]),u.current=!0):(i(_s),o([]),u.current=!1)}catch(G){console.error("Failed to recover cycle data from cache after error.",G),i(_s),o([]),u.current=!1}}finally{U&&l(!1)}},[e,h]);b.useEffect(()=>{if(!(e!=null&&e.uid)){h();return}f().catch(A=>console.error("Initial cycle data load failed:",A))},[e==null?void 0:e.uid,f,h]);const g=b.useCallback(async(A,C,U=null)=>{var G;const B=U??r.id;if(!(e!=null&&e.uid)||!B)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");l(!0);try{const J=A.measurements.find(nt=>nt.selected)||A.measurements[0],$=J&&J.time&&J.time.trim()!==""?J.time:Lt(new Date,"HH:mm"),q=Q$(`${A.isoDate} ${$}`,"yyyy-MM-dd HH:mm",new Date),Q=B===r.id?r:s.find(nt=>nt.id===B);let H=C;!H&&Q&&(H=Q.data.find(nt=>nt.isoDate===A.isoDate)),H&&String(H.id).startsWith("placeholder-")&&(H=null);const re=((G=Q==null?void 0:Q.data)==null?void 0:G.find(nt=>(nt==null?void 0:nt.peak_marker)==="peak"))||null;A.peak_marker==="peak"&&re&&re.id!==(H==null?void 0:H.id)&&await Wm(e.uid,B,re.id,{peak_marker:null});const oe=Sd(J.temperature),Ve=Sd(J.temperature_corrected),xt=!!J.use_corrected&&Ve!==null,mt=xt?Ve:oe,ut=Object.prototype.hasOwnProperty.call(A,"peak_marker"),we=(Array.isArray(A.measurements)?A.measurements:[]).some(nt=>{if(!nt)return!1;const ll=Sd(nt.temperature),Mc=Sd(nt.temperature_corrected);return ll!==null||Mc!==null}),Me=nt=>nt==null?"":String(nt).trim(),Tt=Me(A.mucusSensation??A.mucus_sensation??""),Sr=Me(A.mucusAppearance??A.mucus_appearance??""),ni=Me(A.observations??""),Vn=A.fertility_symbol??A.fertilitySymbol??null,ri=Vn!=null&&Vn!==""&&Vn!=="none",sl=!!(A.had_relations??A.hadRelations??!1),ol=A.peak_marker==="peak",Vc=!we&&Tt===""&&Sr===""&&!ri&&ni===""&&!sl&&!ol,al={cycle_id:B,user_id:e.uid,timestamp:Lt(q,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:A.measurements,mucus_sensation:A.mucusSensation||null,mucus_appearance:A.mucusAppearance||null,fertility_symbol:A.fertility_symbol==="none"?null:A.fertility_symbol,observations:A.observations||null,had_relations:sl,ignored:H?A.ignored??H.ignored:A.ignored||!1,peak_marker:ut?A.peak_marker??null:(H==null?void 0:H.peak_marker)??null,temperature_raw:oe,temperature_corrected:Ve,use_corrected:xt,temperature_chart:mt};if(H){const nt=ut&&(H==null?void 0:H.peak_marker)==="peak"&&!ol;Vc&&nt?await oI(e.uid,B,H.id):await Wm(e.uid,B,H.id,al)}else{if(Vc)return;await m5(al)}await f({silent:!0})}catch(J){throw console.error("Error adding/updating data point:",J),J}finally{l(!1)}},[e,r,s,f]),w=b.useCallback(async(A,C=null)=>{const U=C??r.id;if(!(!(e!=null&&e.uid)||!U)){l(!0);try{await oI(e.uid,U,A),await f({silent:!0})}catch(B){throw console.error("Error deleting record:",B),B}finally{l(!1)}}},[e,r.id,f]),E=b.useCallback(async(A,C)=>{var q;if(!(e!=null&&e.uid))return;const U=A===r.id,B=U?r:s.find(Q=>Q.id===A);if(!B)throw new Error("Cycle not found for toggling ignore state.");const G=(q=B.data)==null?void 0:q.find(Q=>Q.id===C);if(!G)throw new Error("Record not found for toggling ignore state.");const J=!G.ignored,$=Q=>{U?i(H=>H.id!==A?H:{...H,data:H.data.map(re=>re.id===C?{...re,ignored:Q}:re)}):o(H=>H.map(re=>re.id!==A?re:{...re,data:(re.data||[]).map(oe=>oe.id===C?{...oe,ignored:Q}:oe)}))};try{$(J),await Wm(e.uid,A,C,{ignored:J}),f({silent:!0}).catch(Q=>console.error("Background cycle data refresh failed after toggling ignore state:",Q))}catch(Q){throw console.error("Error toggling ignore state:",Q),$(!J),Q}},[e,r,s,f]),P=b.useCallback(async(A,C)=>{if(!(e!=null&&e.uid)||!A)return;const U=r,B=s,G=J=>!J||J.id!==A||J.ignoredForAutoCalculations===C?J:{...J,ignoredForAutoCalculations:C};i(J=>G(J)),o(J=>J.map($=>G($)));try{await y5(e.uid,A,C),f({silent:!0}).catch(J=>console.error("Background cycle data refresh failed after updating ignore configuration:",J))}catch(J){throw console.error("Error updating cycle ignore configuration:",J),i(U),o(B),n({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),J}},[e,r,s,f,n]),_=b.useCallback(async A=>{if(e!=null&&e.uid){l(!0);try{const C=hn(A?de(A):new Date);if(r.id&&A){const G=hn(de(r.startDate));if(C<=G){n({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),l(!1);return}}if(r.id){const G=Lt(aw(C,-1),"yyyy-MM-dd");await g5(r.id,e.uid,G)}const U=Lt(C,"yyyy-MM-dd"),B=await sI(e.uid,U);i({id:B.id,startDate:B.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await f({silent:!0})}catch(C){console.error("Error starting new cycle:",C);try{r.id&&await jl(r.id,e.uid,void 0,null)}catch(U){console.error("Rollback failed:",U)}throw n({title:"Error",description:"No se pudo iniciar el nuevo ciclo.",variant:"destructive"}),C}finally{l(!1)}}},[e,r,f,n]),y=b.useCallback(A=>{if(!A)return"Las fechas coinciden con otro ciclo.";const{startDate:C,endDate:U}=A,B=$=>{if(!$)return null;try{return Lt(de($),"dd/MM/yyyy")}catch(q){return console.error("Failed to format overlap date",q),$}},G=B(C)??"sin fecha de inicio",J=U?B(U):"en curso";return`Las fechas coinciden con el ciclo del ${G} al ${J}.`},[]),v=b.useCallback(async(A,C)=>{if(e!=null&&e.uid){if(!C){n({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}l(!0);try{const U=await sI(e.uid,A);try{await jl(U.id,e.uid,void 0,C)}catch(B){try{await aI(e.uid,U.id)}catch(G){console.error("Failed to clean up cycle after overlap error:",G)}throw B}await f({silent:!0})}catch(U){console.error("Error adding archived cycle:",U);const B=U.code==="cycle-overlap"?y(U.conflictCycle):"No se pudo crear el ciclo.";throw n({title:"Error",description:B,variant:"destructive"}),U}finally{l(!1)}}},[e,f,n,y]),k=b.useCallback(async A=>{if(e!=null&&e.uid){l(!0);try{await aI(e.uid,A),await f({silent:!0})}catch(C){throw console.error("Error deleting cycle:",C),n({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),C}finally{l(!1)}}},[e,f,n]),V=b.useCallback(async(A,C,U)=>{if(!(e!=null&&e.uid))return null;try{return(await jl(A,e.uid,C,U,!0)).overlap}catch(B){return console.error("Error checking cycle overlap:",B),null}},[e]),N=b.useCallback(async(A,C,U,B=!1)=>{if(e!=null&&e.uid){l(!0);try{B&&C?(await _5(e.uid,A,C),U!==void 0&&await jl(A,e.uid,void 0,U)):await jl(A,e.uid,C,U),await f({silent:!0})}catch(G){console.error("Error updating cycle dates:",G);const J=G.code==="cycle-overlap"?y(G.conflictCycle):"No se pudieron actualizar las fechas.";throw n({title:"Error",description:J,variant:"destructive"}),G}finally{l(!1)}}},[e,f,n,y]),S=b.useCallback((A,C)=>N(A,C,void 0,!0),[N]),T=b.useCallback(async(A,C,U)=>{!(e!=null&&e.uid)||!A||!C||await v5(e.uid,A,C,U)},[e]),x=b.useCallback(async A=>{if(!(e!=null&&e.uid))return null;l(!0);try{const C=await p5(e.uid,A);if(!C)return null;const U=Do(C.startDate),B=Do(C.endDate),G=zm(C.data||[],U),J=Gm(G,U),$=Hm(J,B);return{...C,startDate:U??Lt(hn(new Date),"yyyy-MM-dd"),endDate:B,data:$}}catch(C){return console.error("Error fetching cycle by ID:",C),null}finally{l(!1)}},[e]),R=b.useCallback(({silent:A=!0}={})=>f({silent:A}),[f]),D={currentCycle:r,archivedCycles:s,addOrUpdateDataPoint:g,deleteRecord:w,startNewCycle:_,updateCycleDates:N,forceUpdateCycleStart:S,forceShiftNextCycleStart:T,checkCycleOverlap:V,isLoading:a,getCycleById:x,refreshData:R,toggleIgnoreRecord:E,setCycleIgnoreForAutoCalculations:P,addArchivedCycle:v,deleteCycle:k};return L.jsx(BR.Provider,{value:D,children:t})},OH=()=>{const t=b.useContext(BR);if(!t)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return t},uI=({children:t})=>L.jsxs("div",{className:"relative min-h-screen overflow-hidden app-background",children:[L.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[L.jsx("div",{className:"wave wave--left-1"}),L.jsx("div",{className:"wave wave--left-2"}),L.jsx("div",{className:"wave wave--left-3"}),L.jsx("div",{className:"wave wave--right-1"}),L.jsx("div",{className:"wave wave--right-2"}),L.jsx("div",{className:"wave wave--right-3"})]}),L.jsx("div",{className:"pointer-events-none absolute inset-0",children:L.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),L.jsx("div",{className:"relative z-10 flex min-h-screen flex-col",children:t})]});var A5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),il=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>b.createElement("svg",{ref:u,...A5,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${x5(t)}`,...l},[...e.map(([d,h])=>b.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},b5=il("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),R5=il("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),k5=il("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),D5=il("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),N5=il("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),V5=il("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M5=()=>{const t=po(),e=[{to:"/records",label:"Mis registros",icon:k5},{to:"/chart",label:"Grfica",icon:R5},{to:"/",label:"Ciclo actual",icon:D5},{to:"/archived-cycles",label:"Mis ciclos",icon:b5,isActive:n=>n.startsWith("/archived-cycles")||n.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:N5}];return L.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:L.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:n,label:r,icon:i,isActive:s})=>L.jsx("li",{className:"flex",children:L.jsx(ZO,{to:n,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:o})=>{const l=(s?s(t.pathname):!1)||o;return L.jsxs(L.Fragment,{children:[L.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${l?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),L.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:L.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${l?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),L.jsx("span",{className:"sr-only",children:r})]})}})},n))})})},No=({children:t,hideBottomNav:e=!1})=>{const n=e?"flex-1 w-full overflow-y-auto":"flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return L.jsxs("div",{className:"relative flex min-h-[100dvh] flex-col overflow-hidden",children:[L.jsx("main",{className:`relative z-10 ${n}`,children:t}),!e&&L.jsx("div",{className:"relative z-10",children:L.jsx(M5,{})})]})};function $R(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=$R(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zR(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=$R(t))&&(r&&(r+=" "),r+=e);return r}function O5(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=WR(e))&&(r&&(r+=" "),r+=n);return r}function WR(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=WR(t[r]))&&(n&&(n+=" "),n+=e);return n}var yw="-";function L5(t){var e=U5(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(yw);return l[0]===""&&l.length!==1&&l.shift(),HR(l,e)||F5(a)}function o(a,l){var u=n[a]||[];return l&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function HR(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?HR(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(yw);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var cI=/^\[(.+)\]$/;function F5(t){if(cI.test(t)){var e=cI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function U5(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=B5(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];jy(a,r,o,e)}),r}function jy(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:dI(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(j5(i)){jy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];jy(l,dI(e,a),n,r)})})}function dI(t,e){var n=t;return e.split(yw).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function j5(t){return t.isThemeGetter}function B5(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],u=a[1];return[e+l,u]})):o});return[r,s]}):t}function $5(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var GR="!";function z5(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,u=0,d,h=0;h<o.length;h++){var f=o[h];if(l===0){if(f===r&&(n||o.slice(h,h+i)===e)){a.push(o.slice(u,h)),u=h+i;continue}if(f==="/"){d=h;continue}}f==="["?l++:f==="]"&&l--}var g=a.length===0?o:o.substring(u),w=g.startsWith(GR),E=w?g.substring(1):g,P=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:w,baseClassName:E,maybePostfixModifierPosition:P}}}function W5(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function H5(t){return{cache:$5(t.cacheSize),splitModifiers:z5(t),...L5(t)}}var G5=/\s+/;function q5(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(G5).map(function(o){var a=n(o),l=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,f=r(h?d.substring(0,h):d),g=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(d),!f)return{isTailwindClass:!1,originalClassName:o};g=!1}var w=W5(l).join(":"),E=u?w+GR:w;return{isTailwindClass:!0,modifierId:E,classGroupId:f,originalClassName:o,hasPostfixModifier:g}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,u=o.hasPostfixModifier,d=a+l;return s.has(d)?!1:(s.add(d),i(l,u).forEach(function(h){return s.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function K5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(u){var d=e[0],h=e.slice(1),f=h.reduce(function(g,w){return w(g)},d());return r=H5(f),i=r.cache.get,s=r.cache.set,o=l,l(u)}function l(u){var d=i(u);if(d)return d;var h=q5(u,r);return s(u,h),h}return function(){return o(O5.apply(null,arguments))}}function je(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var qR=/^\[(?:([a-z-]+):)?(.+)\]$/i,Q5=/^\d+\/\d+$/,Y5=new Set(["px","full","screen"]),X5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Z5=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function qn(t){return Ls(t)||Y5.has(t)||Q5.test(t)||By(t)}function By(t){return go(t,"length",s9)}function e9(t){return go(t,"size",KR)}function t9(t){return go(t,"position",KR)}function n9(t){return go(t,"url",o9)}function Pd(t){return go(t,"number",Ls)}function Ls(t){return!Number.isNaN(Number(t))}function r9(t){return t.endsWith("%")&&Ls(t.slice(0,-1))}function Bl(t){return hI(t)||go(t,"number",hI)}function me(t){return qR.test(t)}function $l(){return!0}function fi(t){return X5.test(t)}function i9(t){return go(t,"",a9)}function go(t,e,n){var r=qR.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function s9(t){return J5.test(t)}function KR(){return!1}function o9(t){return t.startsWith("url(")}function hI(t){return Number.isInteger(Number(t))}function a9(t){return Z5.test(t)}function l9(){var t=je("colors"),e=je("spacing"),n=je("blur"),r=je("brightness"),i=je("borderColor"),s=je("borderRadius"),o=je("borderSpacing"),a=je("borderWidth"),l=je("contrast"),u=je("grayscale"),d=je("hueRotate"),h=je("invert"),f=je("gap"),g=je("gradientColorStops"),w=je("gradientColorStopPositions"),E=je("inset"),P=je("margin"),_=je("opacity"),y=je("padding"),v=je("saturate"),k=je("scale"),V=je("sepia"),N=je("skew"),S=je("space"),T=je("translate"),x=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},D=function(){return["auto",me,e]},A=function(){return[me,e]},C=function(){return["",qn]},U=function(){return["auto",Ls,me]},B=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},G=function(){return["solid","dashed","dotted","double","none"]},J=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},q=function(){return["","0",me]},Q=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},H=function(){return[Ls,Pd]},re=function(){return[Ls,me]};return{cacheSize:500,theme:{colors:[$l],spacing:[qn],blur:["none","",fi,me],brightness:H(),borderColor:[t],borderRadius:["none","","full",fi,me],borderSpacing:A(),borderWidth:C(),contrast:H(),grayscale:q(),hueRotate:re(),invert:q(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[r9,By],inset:D(),margin:D(),opacity:H(),padding:A(),saturate:H(),scale:H(),sepia:q(),skew:re(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[fi]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(B(),[me])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bl]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Bl]}],"grid-cols":[{"grid-cols":[$l]}],"col-start-end":[{col:["auto",{span:["full",Bl]},me]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[$l]}],"row-start-end":[{row:["auto",{span:[Bl]},me]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",me,e]}],"min-w":[{"min-w":["min","max","fit",me,qn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[fi]},fi,me]}],h:[{h:[me,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",me,qn]}],"max-h":[{"max-h":[me,e,"min","max","fit"]}],"font-size":[{text:["base",fi,By]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pd]}],"font-family":[{font:[$l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",Ls,Pd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",me,qn]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(G(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",qn]}],"underline-offset":[{"underline-offset":["auto",me,qn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(B(),[t9])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",e9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},n9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[].concat(G(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(G())}],"outline-offset":[{"outline-offset":[me,qn]}],"outline-w":[{outline:[qn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[qn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fi,i9]}],"shadow-color":[{shadow:[$l]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":J()}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",fi,me]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Bl,me]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[qn,Pd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var u9=K5(l9);function yo(...t){return u9(zR(t))}function Sn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function fI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function c9(...t){return e=>{let n=!1;const r=t.map(i=>{const s=fI(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():fI(t[i],null)}}}}function ts(...t){return b.useCallback(c9(...t),t)}function LH(t,e){const n=b.createContext(e),r=s=>{const{children:o,...a}=s,l=b.useMemo(()=>a,Object.values(a));return L.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function QR(t,e=[]){let n=[];function r(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const u=h=>{var _;const{scope:f,children:g,...w}=h,E=((_=f==null?void 0:f[t])==null?void 0:_[l])||a,P=b.useMemo(()=>w,Object.values(w));return L.jsx(E.Provider,{value:P,children:g})};u.displayName=s+"Provider";function d(h,f){var E;const g=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,w=b.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,d9(i,...e)]}function d9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(s)[`__scope${u}`];return{...a,...h}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function vf(t){const e=f9(t),n=b.forwardRef((r,i)=>{const{children:s,...o}=r,a=b.Children.toArray(s),l=a.find(m9);if(l){const u=l.props.children,d=a.map(h=>h===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return L.jsx(e,{...o,ref:i,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return L.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var h9=vf("Slot");function f9(t){const e=b.forwardRef((n,r)=>{const{children:i,...s}=n,o=b.isValidElement(i)?y9(i):void 0,a=ts(o,r);if(b.isValidElement(i)){const l=g9(s,i.props);return i.type!==b.Fragment&&(l.ref=a),b.cloneElement(i,l)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var p9=Symbol("radix.slottable");function m9(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===p9}function g9(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function y9(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function v9(t){const e=t+"CollectionProvider",[n,r]=QR(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=E=>{const{scope:P,children:_}=E,y=It.useRef(null),v=It.useRef(new Map).current;return L.jsx(i,{scope:P,itemMap:v,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=vf(a),u=It.forwardRef((E,P)=>{const{scope:_,children:y}=E,v=s(a,_),k=ts(P,v.collectionRef);return L.jsx(l,{ref:k,children:y})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=vf(d),g=It.forwardRef((E,P)=>{const{scope:_,children:y,...v}=E,k=It.useRef(null),V=ts(P,k),N=s(d,_);return It.useEffect(()=>(N.itemMap.set(k,{ref:k,...v}),()=>void N.itemMap.delete(k))),L.jsx(f,{[h]:"",ref:V,children:y})});g.displayName=d;function w(E){const P=s(t+"CollectionConsumer",E);return It.useCallback(()=>{const y=P.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(P.itemMap.values()).sort((N,S)=>v.indexOf(N.ref.current)-v.indexOf(S.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},w,r]}var _9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ir=_9.reduce((t,e)=>{const n=vf(`Primitive.${e}`),r=b.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),L.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function YR(t,e){t&&zf.flushSync(()=>t.dispatchEvent(e))}function uo(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function w9(t,e=globalThis==null?void 0:globalThis.document){const n=uo(t);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var T9="DismissableLayer",$y="dismissableLayer.update",E9="dismissableLayer.pointerDownOutside",I9="dismissableLayer.focusOutside",pI,XR=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),JR=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=b.useContext(XR),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=b.useState({}),w=ts(e,S=>h(S)),E=Array.from(u.layers),[P]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=E.indexOf(P),y=d?E.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,k=y>=_,V=P9(S=>{const T=S.target,x=[...u.branches].some(R=>R.contains(T));!k||x||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},f),N=C9(S=>{const T=S.target;[...u.branches].some(R=>R.contains(T))||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},f);return w9(S=>{y===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},f),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pI=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),mI(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=pI)}},[d,f,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),mI())},[d,u]),b.useEffect(()=>{const S=()=>g({});return document.addEventListener($y,S),()=>document.removeEventListener($y,S)},[]),L.jsx(Ir.div,{...l,ref:w,style:{pointerEvents:v?k?"auto":"none":void 0,...t.style},onFocusCapture:Sn(t.onFocusCapture,N.onFocusCapture),onBlurCapture:Sn(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Sn(t.onPointerDownCapture,V.onPointerDownCapture)})});JR.displayName=T9;var S9="DismissableLayerBranch",ZR=b.forwardRef((t,e)=>{const n=b.useContext(XR),r=b.useRef(null),i=ts(e,r);return b.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),L.jsx(Ir.div,{...t,ref:i})});ZR.displayName=S9;function P9(t,e=globalThis==null?void 0:globalThis.document){const n=uo(t),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){ek(E9,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function C9(t,e=globalThis==null?void 0:globalThis.document){const n=uo(t),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&ek(I9,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mI(){const t=new CustomEvent($y);document.dispatchEvent(t)}function ek(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?YR(i,s):i.dispatchEvent(s)}var A9=JR,x9=ZR,ac=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},b9="Portal",tk=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=b.useState(!1);ac(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?YM.createPortal(L.jsx(Ir.div,{...r,ref:e}),o):null});tk.displayName=b9;function R9(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var nk=t=>{const{present:e,children:n}=t,r=k9(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),s=ts(r.ref,D9(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:s}):null};nk.displayName="Presence";function k9(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=R9(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=Cd(r.current);s.current=a==="mounted"?u:"none"},[a]),ac(()=>{const u=r.current,d=i.current;if(d!==t){const f=s.current,g=Cd(u);t?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),ac(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const E=Cd(r.current).includes(g.animationName);if(g.target===e&&E&&(l("ANIMATION_END"),!i.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},f=g=>{g.target===e&&(s.current=Cd(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Cd(t){return(t==null?void 0:t.animationName)||"none"}function D9(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var N9=VS[" useInsertionEffect ".trim().toString()]||ac;function V9({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=M9({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=b.useCallback(d=>{var h;if(a){const f=O9(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else s(d)},[a,t,s,o]);return[l,u]}function M9({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),s=b.useRef(e);return N9(()=>{s.current=e},[e]),b.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function O9(t){return typeof t=="function"}var L9=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),F9="VisuallyHidden",vw=b.forwardRef((t,e)=>L.jsx(Ir.span,{...t,ref:e,style:{...L9,...t.style}}));vw.displayName=F9;var _w="ToastProvider",[ww,U9,j9]=v9("Toast"),[rk,FH]=QR("Toast",[j9]),[B9,Sp]=rk(_w),ik=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[u,d]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${_w}\`. Expected non-empty \`string\`.`),L.jsx(ww.Provider,{scope:e,children:L.jsx(B9,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>d(g=>g+1),[]),onToastRemove:b.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};ik.displayName=_w;var sk="ToastViewport",$9=["F8"],zy="toast.viewportPause",Wy="toast.viewportResume",ok=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=$9,label:i="Notifications ({hotkey})",...s}=t,o=Sp(sk,n),a=U9(n),l=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=ts(e,h,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;b.useEffect(()=>{const P=_=>{var v;r.length!==0&&r.every(k=>_[k]||_.code===k)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),b.useEffect(()=>{const P=l.current,_=h.current;if(w&&P&&_){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(zy);_.dispatchEvent(N),o.isClosePausedRef.current=!0}},v=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Wy);_.dispatchEvent(N),o.isClosePausedRef.current=!1}},k=N=>{!P.contains(N.relatedTarget)&&v()},V=()=>{P.contains(document.activeElement)||v()};return P.addEventListener("focusin",y),P.addEventListener("focusout",k),P.addEventListener("pointermove",y),P.addEventListener("pointerleave",V),window.addEventListener("blur",y),window.addEventListener("focus",v),()=>{P.removeEventListener("focusin",y),P.removeEventListener("focusout",k),P.removeEventListener("pointermove",y),P.removeEventListener("pointerleave",V),window.removeEventListener("blur",y),window.removeEventListener("focus",v)}}},[w,o.isClosePausedRef]);const E=b.useCallback(({tabbingDirection:P})=>{const y=a().map(v=>{const k=v.ref.current,V=[k,...tz(k)];return P==="forwards"?V:V.reverse()});return(P==="forwards"?y.reverse():y).flat()},[a]);return b.useEffect(()=>{const P=h.current;if(P){const _=y=>{var V,N,S;const v=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!v){const T=document.activeElement,x=y.shiftKey;if(y.target===P&&x){(V=u.current)==null||V.focus();return}const A=E({tabbingDirection:x?"backwards":"forwards"}),C=A.findIndex(U=>U===T);qm(A.slice(C+1))?y.preventDefault():x?(N=u.current)==null||N.focus():(S=d.current)==null||S.focus()}};return P.addEventListener("keydown",_),()=>P.removeEventListener("keydown",_)}},[a,E]),L.jsxs(x9,{ref:l,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&L.jsx(Hy,{ref:u,onFocusFromOutsideViewport:()=>{const P=E({tabbingDirection:"forwards"});qm(P)}}),L.jsx(ww.Slot,{scope:n,children:L.jsx(Ir.ol,{tabIndex:-1,...s,ref:f})}),w&&L.jsx(Hy,{ref:d,onFocusFromOutsideViewport:()=>{const P=E({tabbingDirection:"backwards"});qm(P)}})]})});ok.displayName=sk;var ak="ToastFocusProxy",Hy=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Sp(ak,n);return L.jsx(vw,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});Hy.displayName=ak;var bc="Toast",z9="toast.swipeStart",W9="toast.swipeMove",H9="toast.swipeCancel",G9="toast.swipeEnd",lk=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=V9({prop:r,defaultProp:i??!0,onChange:s,caller:bc});return L.jsx(nk,{present:n||a,children:L.jsx(Q9,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:uo(t.onPause),onResume:uo(t.onResume),onSwipeStart:Sn(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Sn(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Sn(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Sn(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});lk.displayName=bc;var[q9,K9]=rk(bc,{onClose(){}}),Q9=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:g,...w}=t,E=Sp(bc,n),[P,_]=b.useState(null),y=ts(e,U=>_(U)),v=b.useRef(null),k=b.useRef(null),V=i||E.duration,N=b.useRef(0),S=b.useRef(V),T=b.useRef(0),{onToastAdd:x,onToastRemove:R}=E,D=uo(()=>{var B;(P==null?void 0:P.contains(document.activeElement))&&((B=E.viewport)==null||B.focus()),o()}),A=b.useCallback(U=>{!U||U===1/0||(window.clearTimeout(T.current),N.current=new Date().getTime(),T.current=window.setTimeout(D,U))},[D]);b.useEffect(()=>{const U=E.viewport;if(U){const B=()=>{A(S.current),u==null||u()},G=()=>{const J=new Date().getTime()-N.current;S.current=S.current-J,window.clearTimeout(T.current),l==null||l()};return U.addEventListener(zy,G),U.addEventListener(Wy,B),()=>{U.removeEventListener(zy,G),U.removeEventListener(Wy,B)}}},[E.viewport,V,l,u,A]),b.useEffect(()=>{s&&!E.isClosePausedRef.current&&A(V)},[s,V,E.isClosePausedRef,A]),b.useEffect(()=>(x(),()=>R()),[x,R]);const C=b.useMemo(()=>P?mk(P):null,[P]);return E.viewport?L.jsxs(L.Fragment,{children:[C&&L.jsx(Y9,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:C}),L.jsx(q9,{scope:n,onClose:D,children:zf.createPortal(L.jsx(ww.ItemSlot,{scope:n,children:L.jsx(A9,{asChild:!0,onEscapeKeyDown:Sn(a,()=>{E.isFocusedToastEscapeKeyDownRef.current||D(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:L.jsx(Ir.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":E.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Sn(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Sn(t.onPointerDown,U=>{U.button===0&&(v.current={x:U.clientX,y:U.clientY})}),onPointerMove:Sn(t.onPointerMove,U=>{if(!v.current)return;const B=U.clientX-v.current.x,G=U.clientY-v.current.y,J=!!k.current,$=["left","right"].includes(E.swipeDirection),q=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,Q=$?q(0,B):0,H=$?0:q(0,G),re=U.pointerType==="touch"?10:2,oe={x:Q,y:H},Ve={originalEvent:U,delta:oe};J?(k.current=oe,Ad(W9,h,Ve,{discrete:!1})):gI(oe,E.swipeDirection,re)?(k.current=oe,Ad(z9,d,Ve,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(B)>re||Math.abs(G)>re)&&(v.current=null)}),onPointerUp:Sn(t.onPointerUp,U=>{const B=k.current,G=U.target;if(G.hasPointerCapture(U.pointerId)&&G.releasePointerCapture(U.pointerId),k.current=null,v.current=null,B){const J=U.currentTarget,$={originalEvent:U,delta:B};gI(B,E.swipeDirection,E.swipeThreshold)?Ad(G9,g,$,{discrete:!0}):Ad(H9,f,$,{discrete:!0}),J.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),Y9=t=>{const{__scopeToast:e,children:n,...r}=t,i=Sp(bc,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return Z9(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:L.jsx(tk,{asChild:!0,children:L.jsx(vw,{...r,children:s&&L.jsxs(L.Fragment,{children:[i.label," ",n]})})})},X9="ToastTitle",uk=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return L.jsx(Ir.div,{...r,ref:e})});uk.displayName=X9;var J9="ToastDescription",ck=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return L.jsx(Ir.div,{...r,ref:e})});ck.displayName=J9;var dk="ToastAction",hk=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?L.jsx(pk,{altText:n,asChild:!0,children:L.jsx(Tw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${dk}\`. Expected non-empty \`string\`.`),null)});hk.displayName=dk;var fk="ToastClose",Tw=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=K9(fk,n);return L.jsx(pk,{asChild:!0,children:L.jsx(Ir.button,{type:"button",...r,ref:e,onClick:Sn(t.onClick,i.onClose)})})});Tw.displayName=fk;var pk=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return L.jsx(Ir.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function mk(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),ez(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...mk(r))}}),e}function Ad(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?YR(i,s):i.dispatchEvent(s)}var gI=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Z9(t=()=>{}){const e=uo(t);ac(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function ez(t){return t.nodeType===t.ELEMENT_NODE}function tz(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function qm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var nz=ik,gk=ok,yk=lk,vk=uk,_k=ck,wk=hk,Tk=Tw;const yI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,vI=zR,Ek=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return vI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const f=yI(d)||yI(h);return i[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...g}=d;return Object.entries(g).every(w=>{let[E,P]=w;return Array.isArray(P)?P.includes({...s,...a}[E]):{...s,...a}[E]===P})?[...u,h,f]:u},[]);return vI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},rz=nz,Ik=It.forwardRef(({className:t,...e},n)=>L.jsx(gk,{ref:n,className:yo("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ik.displayName=gk.displayName;const iz=Ek("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Sk=It.forwardRef(({className:t,variant:e,...n},r)=>L.jsx(yk,{ref:r,className:yo(iz({variant:e}),t),...n}));Sk.displayName=yk.displayName;const sz=It.forwardRef(({className:t,...e},n)=>L.jsx(wk,{ref:n,className:yo("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));sz.displayName=wk.displayName;const Pk=It.forwardRef(({className:t,...e},n)=>L.jsx(Tk,{ref:n,className:yo("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:L.jsx(V5,{className:"h-4 w-4"})}));Pk.displayName=Tk.displayName;const Ck=It.forwardRef(({className:t,...e},n)=>L.jsx(vk,{ref:n,className:yo("text-sm font-semibold",t),...e}));Ck.displayName=vk.displayName;const Ak=It.forwardRef(({className:t,...e},n)=>L.jsx(_k,{ref:n,className:yo("text-sm opacity-90",t),...e}));Ak.displayName=_k.displayName;function oz(){const{toasts:t}=sw();return L.jsxs(rz,{children:[t.map(({id:e,title:n,description:r,action:i,...s})=>L.jsxs(Sk,{...s,children:[L.jsxs("div",{className:"grid gap-1",children:[n&&L.jsx(Ck,{children:n}),r&&L.jsx(Ak,{children:r})]}),i,L.jsx(Pk,{})]},e)),L.jsx(Ik,{})]})}const xk=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Pp=b.createContext({}),Ew=b.createContext(null),Cp=typeof document<"u",az=Cp?b.useLayoutEffect:b.useEffect,bk=b.createContext({strict:!1}),Iw=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),lz="framerAppearId",Rk="data-"+Iw(lz);function uz(t,e,n,r){const{visualElement:i}=b.useContext(Pp),s=b.useContext(bk),o=b.useContext(Ew),a=b.useContext(xk).reducedMotion,l=b.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;b.useInsertionEffect(()=>{u&&u.update(n,o)});const d=b.useRef(!!(n[Rk]&&!window.HandoffComplete));return az(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),b.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function ea(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cz(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ea(n)&&(n.current=r))},[e])}function lc(t){return typeof t=="string"||Array.isArray(t)}function Ap(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Sw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pw=["initial",...Sw];function xp(t){return Ap(t.animate)||Pw.some(e=>lc(t[e]))}function kk(t){return!!(xp(t)||t.variants)}function dz(t,e){if(xp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||lc(n)?n:void 0,animate:lc(r)?r:void 0}}return t.inherit!==!1?e:{}}function hz(t){const{initial:e,animate:n}=dz(t,b.useContext(Pp));return b.useMemo(()=>({initial:e,animate:n}),[_I(e),_I(n)])}function _I(t){return Array.isArray(t)?t.join(" "):t}const wI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uc={};for(const t in wI)uc[t]={isEnabled:e=>wI[t].some(n=>!!e[n])};function fz(t){for(const e in t)uc[e]={...uc[e],...t[e]}}const Dk=b.createContext({}),Nk=b.createContext({}),pz=Symbol.for("motionComponentSymbol");function mz({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&fz(t);function s(a,l){let u;const d={...b.useContext(xk),...a,layoutId:gz(a)},{isStatic:h}=d,f=hz(a),g=r(a,h);if(!h&&Cp){f.visualElement=uz(i,g,d,e);const w=b.useContext(Nk),E=b.useContext(bk).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,E,t,w))}return b.createElement(Pp.Provider,{value:f},u&&f.visualElement?b.createElement(u,{visualElement:f.visualElement,...d}):null,n(i,a,cz(g,f.visualElement,l),g,h,f.visualElement))}const o=b.forwardRef(s);return o[pz]=i,o}function gz({layoutId:t}){const e=b.useContext(Dk).id;return e&&t!==void 0?e+"-"+t:t}function yz(t){function e(r,i={}){return mz(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const vz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cw(t){return typeof t!="string"||t.includes("-")?!1:!!(vz.indexOf(t)>-1||/[A-Z]/.test(t))}const _f={};function _z(t){Object.assign(_f,t)}const Rc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vo=new Set(Rc);function Vk(t,{layout:e,layoutId:n}){return vo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_f[t]||t==="opacity")}const _n=t=>!!(t&&t.getVelocity),wz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Tz=Rc.length;function Ez(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<Tz;o++){const a=Rc[o];if(t[a]!==void 0){const l=wz[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const Mk=t=>e=>typeof e=="string"&&e.startsWith(t),Ok=Mk("--"),Gy=Mk("var(--"),Iz=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Sz=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ns=(t,e,n)=>Math.min(Math.max(n,t),e),_o={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Iu={..._o,transform:t=>ns(0,1,t)},xd={..._o,default:1},Su=t=>Math.round(t*1e5)/1e5,bp=/(-)?([\d]*\.?[\d])+/g,Lk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Pz=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function kc(t){return typeof t=="string"}const Dc=t=>({test:e=>kc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pi=Dc("deg"),Tr=Dc("%"),ue=Dc("px"),Cz=Dc("vh"),Az=Dc("vw"),TI={...Tr,parse:t=>Tr.parse(t)/100,transform:t=>Tr.transform(t*100)},EI={..._o,transform:Math.round},Fk={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,size:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,rotate:pi,rotateX:pi,rotateY:pi,rotateZ:pi,scale:xd,scaleX:xd,scaleY:xd,scaleZ:xd,skew:pi,skewX:pi,skewY:pi,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Iu,originX:TI,originY:TI,originZ:ue,zIndex:EI,fillOpacity:Iu,strokeOpacity:Iu,numOctaves:EI};function Aw(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,d=!0;for(const h in e){const f=e[h];if(Ok(h)){s[h]=f;continue}const g=Fk[h],w=Sz(f,g);if(vo.has(h)){if(l=!0,o[h]=w,!d)continue;f!==(g.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=w):i[h]=w}if(e.transform||(l||r?i.transform=Ez(t.transform,n,d,r):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=a;i.transformOrigin=`${h} ${f} ${g}`}}const xw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Uk(t,e,n){for(const r in e)!_n(e[r])&&!Vk(r,n)&&(t[r]=e[r])}function xz({transformTemplate:t},e,n){return b.useMemo(()=>{const r=xw();return Aw(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function bz(t,e,n){const r=t.style||{},i={};return Uk(i,r,t),Object.assign(i,xz(t,e,n)),t.transformValues?t.transformValues(i):i}function Rz(t,e,n){const r={},i=bz(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const kz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kz.has(t)}let jk=t=>!wf(t);function Dz(t){t&&(jk=e=>e.startsWith("on")?!wf(e):t(e))}try{Dz(require("@emotion/is-prop-valid").default)}catch{}function Nz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(jk(i)||n===!0&&wf(i)||!e&&!wf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function II(t,e,n){return typeof t=="string"?t:ue.transform(e+n*t)}function Vz(t,e,n){const r=II(e,t.x,t.width),i=II(n,t.y,t.height);return`${r} ${i}`}const Mz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Oz={offset:"strokeDashoffset",array:"strokeDasharray"};function Lz(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Mz:Oz;t[s.offset]=ue.transform(-r);const o=ue.transform(e),a=ue.transform(n);t[s.array]=`${o} ${a}`}function bw(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h,f){if(Aw(t,u,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:w,dimensions:E}=t;g.transform&&(E&&(w.transform=g.transform),delete g.transform),E&&(i!==void 0||s!==void 0||w.transform)&&(w.transformOrigin=Vz(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&Lz(g,o,a,l,!1)}const Bk=()=>({...xw(),attrs:{}}),Rw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Fz(t,e,n,r){const i=b.useMemo(()=>{const s=Bk();return bw(s,e,{enableHardwareAcceleration:!1},Rw(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Uk(s,t.style,t),i.style={...s,...i.style}}return i}function Uz(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Cw(n)?Fz:Rz)(r,s,o,n),d={...Nz(r,typeof n=="string",t),...l,ref:i},{children:h}=r,f=b.useMemo(()=>_n(h)?h.get():h,[h]);return b.createElement(n,{...d,children:f})}}function $k(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const zk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wk(t,e,n,r){$k(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(zk.has(i)?i:Iw(i),e.attrs[i])}function kw(t,e){const{style:n}=t,r={};for(const i in n)(_n(n[i])||e.style&&_n(e.style[i])||Vk(i,t))&&(r[i]=n[i]);return r}function Hk(t,e){const n=kw(t,e);for(const r in t)if(_n(t[r])||_n(e[r])){const i=Rc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Dw(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function jz(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Tf=t=>Array.isArray(t),Bz=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),$z=t=>Tf(t)?t[t.length-1]||0:t;function ah(t){const e=_n(t)?t.get():t;return Bz(e)?e.toValue():e}function zz({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:Wz(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Gk=t=>(e,n)=>{const r=b.useContext(Pp),i=b.useContext(Ew),s=()=>zz(t,e,r,i);return n?s():jz(s)};function Wz(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=ah(s[f]);let{initial:o,animate:a}=t;const l=xp(t),u=kk(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!Ap(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const w=Dw(t,g);if(!w)return;const{transitionEnd:E,transition:P,..._}=w;for(const y in _){let v=_[y];if(Array.isArray(v)){const k=d?v.length-1:0;v=v[k]}v!==null&&(i[y]=v)}for(const y in E)i[y]=E[y]}),i}const ot=t=>t;class SI{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Hz(t){let e=new SI,n=new SI,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const h=d&&i,f=h?e:n;return u&&o.add(l),f.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const d=e.order[u];d(l),o.has(d)&&(a.schedule(d),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const bd=["prepare","read","update","preRender","render","postRender"],Gz=40;function qz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=bd.reduce((h,f)=>(h[f]=Hz(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,Gz),1),i.timestamp=h,i.isProcessing=!0,bd.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:bd.reduce((h,f)=>{const g=s[f];return h[f]=(w,E=!1,P=!1)=>(n||l(),g.schedule(w,E,P)),h},{}),cancel:h=>bd.forEach(f=>s[f].cancel(h)),state:i,steps:s}}const{schedule:ze,cancel:Kr,state:qt,steps:Km}=qz(typeof requestAnimationFrame<"u"?requestAnimationFrame:ot,!0),Kz={useVisualState:Gk({scrapeMotionValuesFromProps:Hk,createRenderState:Bk,onMount:(t,e,{renderState:n,latestValues:r})=>{ze.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ze.render(()=>{bw(n,r,{enableHardwareAcceleration:!1},Rw(e.tagName),t.transformTemplate),Wk(e,n)})}})},Qz={useVisualState:Gk({scrapeMotionValuesFromProps:kw,createRenderState:xw})};function Yz(t,{forwardMotionProps:e=!1},n,r){return{...Cw(t)?Kz:Qz,preloadedFeatures:n,useRender:Uz(e),createVisualElement:r,Component:t}}function Mr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const qk=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Rp(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Xz=t=>e=>qk(e)&&t(e,Rp(e));function Lr(t,e,n,r){return Mr(t,e,Xz(n),r)}const Jz=(t,e)=>n=>e(t(n)),Wi=(...t)=>t.reduce(Jz);function Kk(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const PI=Kk("dragHorizontal"),CI=Kk("dragVertical");function Qk(t){let e=!1;if(t==="y")e=CI();else if(t==="x")e=PI();else{const n=PI(),r=CI();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Yk(){const t=Qk(!0);return t?(t(),!1):!0}class fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function AI(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||Yk())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&ze.update(()=>a[r](s,o))};return Lr(t.current,n,i,{passive:!t.getProps()[r]})}class Zz extends fs{mount(){this.unmount=Wi(AI(this.node,!0),AI(this.node,!1))}unmount(){}}class eW extends fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wi(Mr(this.node.current,"focus",()=>this.onFocus()),Mr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Xk=(t,e)=>e?t===e?!0:Xk(t,e.parentElement):!1;function Qm(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Rp(n))}class tW extends fs{constructor(){super(...arguments),this.removeStartListeners=ot,this.removeEndListeners=ot,this.removeAccessibleListeners=ot,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Lr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ze.update(()=>{!h&&!Xk(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Lr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Wi(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Qm("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&ze.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=Mr(this.node.current,"keyup",o),Qm("down",(a,l)=>{this.startPress(a,l)})},n=Mr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Qm("cancel",(s,o)=>this.cancelPress(s,o))},i=Mr(this.node.current,"blur",r);this.removeAccessibleListeners=Wi(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ze.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Yk()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ze.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Lr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Mr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const qy=new WeakMap,Ym=new WeakMap,nW=t=>{const e=qy.get(t.target);e&&e(t)},rW=t=>{t.forEach(nW)};function iW({root:t,...e}){const n=t||document;Ym.has(n)||Ym.set(n,{});const r=Ym.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(rW,{root:t,...e})),r[i]}function sW(t,e,n){const r=iW(e);return qy.set(t,n),r.observe(t),()=>{qy.delete(t),r.unobserve(t)}}const oW={some:0,all:1};class aW extends fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:oW[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return sW(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(lW(e,n))&&this.startObserver()}unmount(){}}function lW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uW={inView:{Feature:aW},tap:{Feature:tW},focus:{Feature:eW},hover:{Feature:Zz}};function Jk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function cW(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function dW(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function kp(t,e,n){const r=t.getProps();return Dw(r,e,n!==void 0?n:r.custom,cW(t),dW(t))}let hW=ot,Nw=ot;const Hi=t=>t*1e3,Fr=t=>t/1e3,fW={current:!1},Zk=t=>Array.isArray(t)&&typeof t[0]=="number";function eD(t){return!!(!t||typeof t=="string"&&tD[t]||Zk(t)||Array.isArray(t)&&t.every(eD))}const nu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,tD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nu([0,.65,.55,1]),circOut:nu([.55,0,1,.45]),backIn:nu([.31,.01,.66,-.59]),backOut:nu([.33,1.53,.69,.99])};function nD(t){if(t)return Zk(t)?nu(t):Array.isArray(t)?t.map(nD):tD[t]}function pW(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=nD(a);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function mW(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const rD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,gW=1e-7,yW=12;function vW(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=rD(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>gW&&++a<yW);return o}function Nc(t,e,n,r){if(t===e&&n===r)return ot;const i=s=>vW(s,0,1,t,n);return s=>s===0||s===1?s:rD(i(s),e,r)}const _W=Nc(.42,0,1,1),wW=Nc(0,0,.58,1),iD=Nc(.42,0,.58,1),TW=t=>Array.isArray(t)&&typeof t[0]!="number",sD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oD=t=>e=>1-t(1-e),Vw=t=>1-Math.sin(Math.acos(t)),aD=oD(Vw),EW=sD(Vw),lD=Nc(.33,1.53,.69,.99),Mw=oD(lD),IW=sD(Mw),SW=t=>(t*=2)<1?.5*Mw(t):.5*(2-Math.pow(2,-10*(t-1))),PW={linear:ot,easeIn:_W,easeInOut:iD,easeOut:wW,circIn:Vw,circInOut:EW,circOut:aD,backIn:Mw,backInOut:IW,backOut:lD,anticipate:SW},xI=t=>{if(Array.isArray(t)){Nw(t.length===4);const[e,n,r,i]=t;return Nc(e,n,r,i)}else if(typeof t=="string")return PW[t];return t},Ow=(t,e)=>n=>!!(kc(n)&&Pz.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),uD=(t,e,n)=>r=>{if(!kc(r))return r;const[i,s,o,a]=r.match(bp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},CW=t=>ns(0,255,t),Xm={..._o,transform:t=>Math.round(CW(t))},Fs={test:Ow("rgb","red"),parse:uD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xm.transform(t)+", "+Xm.transform(e)+", "+Xm.transform(n)+", "+Su(Iu.transform(r))+")"};function AW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ky={test:Ow("#"),parse:AW,transform:Fs.transform},ta={test:Ow("hsl","hue"),parse:uD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Tr.transform(Su(e))+", "+Tr.transform(Su(n))+", "+Su(Iu.transform(r))+")"},sn={test:t=>Fs.test(t)||Ky.test(t)||ta.test(t),parse:t=>Fs.test(t)?Fs.parse(t):ta.test(t)?ta.parse(t):Ky.parse(t),transform:t=>kc(t)?t:t.hasOwnProperty("red")?Fs.transform(t):ta.transform(t)},Xe=(t,e,n)=>-n*t+n*e+t;function Jm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Jm(l,a,t+1/3),s=Jm(l,a,t),o=Jm(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Zm=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},bW=[Ky,Fs,ta],RW=t=>bW.find(e=>e.test(t));function bI(t){const e=RW(t);let n=e.parse(t);return e===ta&&(n=xW(n)),n}const cD=(t,e)=>{const n=bI(t),r=bI(e),i={...n};return s=>(i.red=Zm(n.red,r.red,s),i.green=Zm(n.green,r.green,s),i.blue=Zm(n.blue,r.blue,s),i.alpha=Xe(n.alpha,r.alpha,s),Fs.transform(i))};function kW(t){var e,n;return isNaN(t)&&kc(t)&&(((e=t.match(bp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Lk))===null||n===void 0?void 0:n.length)||0)>0}const dD={regex:Iz,countKey:"Vars",token:"${v}",parse:ot},hD={regex:Lk,countKey:"Colors",token:"${c}",parse:sn.parse},fD={regex:bp,countKey:"Numbers",token:"${n}",parse:_o.parse};function eg(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Ef(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&eg(n,dD),eg(n,hD),eg(n,fD),n}function pD(t){return Ef(t).values}function mD(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Ef(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(dD.token,o[l]):l<r+n?a=a.replace(hD.token,sn.transform(o[l])):a=a.replace(fD.token,Su(o[l]));return a}}const DW=t=>typeof t=="number"?0:t;function NW(t){const e=pD(t);return mD(t)(e.map(DW))}const rs={test:kW,parse:pD,createTransformer:mD,getAnimatableNone:NW},gD=(t,e)=>n=>`${n>0?e:t}`;function yD(t,e){return typeof t=="number"?n=>Xe(t,e,n):sn.test(t)?cD(t,e):t.startsWith("var(")?gD(t,e):_D(t,e)}const vD=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>yD(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},VW=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=yD(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},_D=(t,e)=>{const n=rs.createTransformer(e),r=Ef(t),i=Ef(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Wi(vD(r.values,i.values),n):gD(t,e)},cc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},RI=(t,e)=>n=>Xe(t,e,n);function MW(t){return typeof t=="number"?RI:typeof t=="string"?sn.test(t)?cD:_D:Array.isArray(t)?vD:typeof t=="object"?VW:RI}function OW(t,e,n){const r=[],i=n||MW(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ot:e;a=Wi(l,a)}r.push(a)}return r}function wD(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Nw(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=OW(e,r,i),a=o.length,l=u=>{let d=0;if(a>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=cc(t[d],t[d+1],u);return o[d](h)};return n?u=>l(ns(t[0],t[s-1],u)):l}function LW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=cc(0,e,r);t.push(Xe(n,1,i))}}function FW(t){const e=[0];return LW(e,t.length-1),e}function UW(t,e){return t.map(n=>n*e)}function jW(t,e){return t.map(()=>e||iD).splice(0,t.length-1)}function If({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=TW(r)?r.map(xI):xI(r),s={done:!1,value:e[0]},o=UW(n&&n.length===e.length?n:FW(e),t),a=wD(o,e,{ease:Array.isArray(i)?i:jW(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function TD(t,e){return e?t*(1e3/e):0}const BW=5;function ED(t,e,n){const r=Math.max(e-BW,0);return TD(n-t(r),e-r)}const tg=.001,$W=.01,kI=10,zW=.05,WW=1;function HW({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;hW(t<=Hi(kI));let o=1-e;o=ns(zW,WW,o),t=ns($W,kI,Fr(t)),o<1?(i=u=>{const d=u*o,h=d*t,f=d-n,g=Qy(u,o),w=Math.exp(-h);return tg-f/g*w},s=u=>{const h=u*o*t,f=h*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,w=Math.exp(-h),E=Qy(Math.pow(u,2),o);return(-i(u)+tg>0?-1:1)*((f-g)*w)/E}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-tg+d*h},s=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,l=qW(i,s,a);if(t=Hi(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const GW=12;function qW(t,e,n){let r=n;for(let i=1;i<GW;i++)r=r-t(r)/e(r);return r}function Qy(t,e){return t*Math.sqrt(1-e*e)}const KW=["duration","bounce"],QW=["stiffness","damping","mass"];function DI(t,e){return e.some(n=>t[n]!==void 0)}function YW(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!DI(t,QW)&&DI(t,KW)){const n=HW(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function ID({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=YW({...r,velocity:-Fr(r.velocity||0)}),g=h||0,w=l/(2*Math.sqrt(a*u)),E=s-i,P=Fr(Math.sqrt(a/u)),_=Math.abs(E)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let y;if(w<1){const v=Qy(P,w);y=k=>{const V=Math.exp(-w*P*k);return s-V*((g+w*P*E)/v*Math.sin(v*k)+E*Math.cos(v*k))}}else if(w===1)y=v=>s-Math.exp(-P*v)*(E+(g+P*E)*v);else{const v=P*Math.sqrt(w*w-1);y=k=>{const V=Math.exp(-w*P*k),N=Math.min(v*k,300);return s-V*((g+w*P*E)*Math.sinh(N)+v*E*Math.cosh(N))/v}}return{calculatedDuration:f&&d||null,next:v=>{const k=y(v);if(f)o.done=v>=d;else{let V=g;v!==0&&(w<1?V=ED(y,v,k):V=0);const N=Math.abs(V)<=n,S=Math.abs(s-k)<=e;o.done=N&&S}return o.value=o.done?s:k,o}}}function NI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},g=T=>a!==void 0&&T<a||l!==void 0&&T>l,w=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let E=n*e;const P=h+E,_=o===void 0?P:o(P);_!==P&&(E=_-h);const y=T=>-E*Math.exp(-T/r),v=T=>_+y(T),k=T=>{const x=y(T),R=v(T);f.done=Math.abs(x)<=u,f.value=f.done?_:R};let V,N;const S=T=>{g(f.value)&&(V=T,N=ID({keyframes:[f.value,w(f.value)],velocity:ED(v,T,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:T=>{let x=!1;return!N&&V===void 0&&(x=!0,k(T),S(T)),V!==void 0&&T>V?N.next(T-V):(!x&&k(T),f)}}}const XW=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ze.update(e,!0),stop:()=>Kr(e),now:()=>qt.isProcessing?qt.timestamp:performance.now()}},VI=2e4;function MI(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<VI;)e+=n,r=t.next(e);return e>=VI?1/0:e}const JW={decay:NI,inertia:NI,tween:If,keyframes:If,spring:ID};function Sf({autoplay:t=!0,delay:e=0,driver:n=XW,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:h,...f}){let g=1,w=!1,E,P;const _=()=>{P=new Promise(H=>{E=H})};_();let y;const v=JW[i]||If;let k;v!==If&&typeof r[0]!="number"&&(k=wD([0,100],r,{clamp:!1}),r=[0,100]);const V=v({...f,keyframes:r});let N;a==="mirror"&&(N=v({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let S="idle",T=null,x=null,R=null;V.calculatedDuration===null&&s&&(V.calculatedDuration=MI(V));const{calculatedDuration:D}=V;let A=1/0,C=1/0;D!==null&&(A=D+o,C=A*(s+1)-o);let U=0;const B=H=>{if(x===null)return;g>0&&(x=Math.min(x,H)),g<0&&(x=Math.min(H-C/g,x)),T!==null?U=T:U=Math.round(H-x)*g;const re=U-e*(g>=0?1:-1),oe=g>=0?re<0:re>C;U=Math.max(re,0),S==="finished"&&T===null&&(U=C);let Ve=U,xt=V;if(s){const we=Math.min(U,C)/A;let Me=Math.floor(we),Tt=we%1;!Tt&&we>=1&&(Tt=1),Tt===1&&Me--,Me=Math.min(Me,s+1),!!(Me%2)&&(a==="reverse"?(Tt=1-Tt,o&&(Tt-=o/A)):a==="mirror"&&(xt=N)),Ve=ns(0,1,Tt)*A}const mt=oe?{done:!1,value:r[0]}:xt.next(Ve);k&&(mt.value=k(mt.value));let{done:ut}=mt;!oe&&D!==null&&(ut=g>=0?U>=C:U<=0);const qe=T===null&&(S==="finished"||S==="running"&&ut);return h&&h(mt.value),qe&&$(),mt},G=()=>{y&&y.stop(),y=void 0},J=()=>{S="idle",G(),E(),_(),x=R=null},$=()=>{S="finished",d&&d(),G(),E()},q=()=>{if(w)return;y||(y=n(B));const H=y.now();l&&l(),T!==null?x=H-T:(!x||S==="finished")&&(x=H),S==="finished"&&_(),R=x,T=null,S="running",y.start()};t&&q();const Q={then(H,re){return P.then(H,re)},get time(){return Fr(U)},set time(H){H=Hi(H),U=H,T!==null||!y||g===0?T=H:x=y.now()-H/g},get duration(){const H=V.calculatedDuration===null?MI(V):V.calculatedDuration;return Fr(H)},get speed(){return g},set speed(H){H===g||!y||(g=H,Q.time=Fr(U))},get state(){return S},play:q,pause:()=>{S="paused",T=U},stop:()=>{w=!0,S!=="idle"&&(S="idle",u&&u(),J())},cancel:()=>{R!==null&&B(R),J()},complete:()=>{S="finished"},sample:H=>(x=0,B(H))};return Q}function ZW(t){let e;return()=>(e===void 0&&(e=t()),e)}const e8=ZW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),t8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Rd=10,n8=2e4,r8=(t,e)=>e.type==="spring"||t==="backgroundColor"||!eD(e.ease);function i8(t,e,{onUpdate:n,onComplete:r,...i}){if(!(e8()&&t8.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const d=()=>{l=new Promise(v=>{a=v})};d();let{keyframes:h,duration:f=300,ease:g,times:w}=i;if(r8(e,i)){const v=Sf({...i,repeat:0,delay:0});let k={done:!1,value:h[0]};const V=[];let N=0;for(;!k.done&&N<n8;)k=v.sample(N),V.push(k.value),N+=Rd;w=void 0,h=V,f=N-Rd,g="linear"}const E=pW(t.owner.current,e,h,{...i,duration:f,ease:g,times:w}),P=()=>{u=!1,E.cancel()},_=()=>{u=!0,ze.update(P),a(),d()};return E.onfinish=()=>{u||(t.set(mW(h,i)),r&&r(),_())},{then(v,k){return l.then(v,k)},attachTimeline(v){return E.timeline=v,E.onfinish=null,ot},get time(){return Fr(E.currentTime||0)},set time(v){E.currentTime=Hi(v)},get speed(){return E.playbackRate},set speed(v){E.playbackRate=v},get duration(){return Fr(f)},play:()=>{o||(E.play(),Kr(P))},pause:()=>E.pause(),stop:()=>{if(o=!0,E.playState==="idle")return;const{currentTime:v}=E;if(v){const k=Sf({...i,autoplay:!1});t.setWithVelocity(k.sample(v-Rd).value,k.sample(v).value,Rd)}_()},complete:()=>{u||E.finish()},cancel:_}}function s8({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ot,pause:ot,stop:ot,then:s=>(s(),Promise.resolve()),cancel:ot,complete:ot});return e?Sf({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const o8={type:"spring",stiffness:500,damping:25,restSpeed:10},a8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l8={type:"keyframes",duration:.8},u8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},c8=(t,{keyframes:e})=>e.length>2?l8:vo.has(t)?t.startsWith("scale")?a8(e[1]):o8:u8,Yy=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(rs.test(e)||e==="0")&&!e.startsWith("url(")),d8=new Set(["brightness","contrast","saturate","opacity"]);function h8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bp)||[];if(!r)return t;const i=n.replace(r,"");let s=d8.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const f8=/([a-z-]*)\(.*?\)/g,Xy={...rs,getAnimatableNone:t=>{const e=t.match(f8);return e?e.map(h8).join(" "):t}},p8={...Fk,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:Xy,WebkitFilter:Xy},Lw=t=>p8[t];function SD(t,e){let n=Lw(t);return n!==Xy&&(n=rs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const PD=t=>/^0[^.\s]+$/.test(t);function m8(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||PD(t)}function g8(t,e,n,r){const i=Yy(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),m8(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];s[d]=SD(e,a)}return s}function y8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function Fw(t,e){return t[e]||t.default||t}const v8={skipAnimations:!1},Uw=(t,e,n,r={})=>i=>{const s=Fw(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Hi(o);const l=g8(e,t,n,s),u=l[0],d=l[l.length-1],h=Yy(t,u),f=Yy(t,d);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:w=>{e.set(w),s.onUpdate&&s.onUpdate(w)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(y8(s)||(g={...g,...c8(t,g)}),g.duration&&(g.duration=Hi(g.duration)),g.repeatDelay&&(g.repeatDelay=Hi(g.repeatDelay)),!h||!f||fW.current||s.type===!1||v8.skipAnimations)return s8(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const w=i8(e,t,g);if(w)return w}return Sf(g)};function Pf(t){return!!(_n(t)&&t.add)}const CD=t=>/^\-?\d*\.?\d+$/.test(t);function jw(t,e){t.indexOf(e)===-1&&t.push(e)}function Bw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class $w{constructor(){this.subscriptions=[]}add(e){return jw(this.subscriptions,e),()=>Bw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _8=t=>!isNaN(parseFloat(t));class w8{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=qt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,ze.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ze.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=_8(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new $w);const r=this.events[e].add(n);return e==="change"?()=>{r(),ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?TD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $a(t,e){return new w8(t,e)}const AD=t=>e=>e.test(t),T8={test:t=>t==="auto",parse:t=>t},xD=[_o,ue,Tr,pi,Az,Cz,T8],zl=t=>xD.find(AD(t)),E8=[...xD,sn,rs],I8=t=>E8.find(AD(t));function S8(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$a(n))}function P8(t,e){const n=kp(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=$z(s[o]);S8(t,o,a)}}function C8(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),d!=null&&(typeof d=="string"&&(CD(d)||PD(d))?d=parseFloat(d):!I8(d)&&rs.test(u)&&(d=SD(l,u)),t.addValue(l,$a(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function A8(t,e){return e?(e[t]||e.default||e).from:void 0}function x8(t,e,n){const r={};for(const i in t){const s=A8(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function b8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function R8(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function bD(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h),g=a[h];if(!f||g===void 0||d&&b8(d,h))continue;const w={delay:n,elapsed:0,...Fw(s||{},h)};if(window.HandoffAppearAnimations){const _=t.getProps()[Rk];if(_){const y=window.HandoffAppearAnimations(_,h,f,ze);y!==null&&(w.elapsed=y,w.isHandoff=!0)}}let E=!w.isHandoff&&!R8(f,g);if(w.type==="spring"&&(f.getVelocity()||w.velocity)&&(E=!1),f.animation&&(E=!1),E)continue;f.start(Uw(h,f,g,t.shouldReduceMotion&&vo.has(h)?{type:!1}:w));const P=f.animation;Pf(l)&&(l.add(h),P.then(()=>l.remove(h))),u.push(P)}return o&&Promise.all(u).then(()=>{o&&P8(t,o)}),u}function Jy(t,e,n={}){const r=kp(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(bD(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return k8(t,e,u+l,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function k8(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(D8).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(Jy(u,e,{...s,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function D8(t,e){return t.sortNodePosition(e)}function N8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Jy(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Jy(t,e,n);else{const i=typeof e=="function"?kp(t,e,n.custom):e;r=Promise.all(bD(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const V8=[...Sw].reverse(),M8=Sw.length;function O8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>N8(t,n,r)))}function L8(t){let e=O8(t);const n=U8();let r=!0;const i=(l,u)=>{const d=kp(t,u);if(d){const{transition:h,transitionEnd:f,...g}=d;l={...l,...g,...f}}return l};function s(l){e=l(t)}function o(l,u){const d=t.getProps(),h=t.getVariantContext(!0)||{},f=[],g=new Set;let w={},E=1/0;for(let _=0;_<M8;_++){const y=V8[_],v=n[y],k=d[y]!==void 0?d[y]:h[y],V=lc(k),N=y===u?v.isActive:null;N===!1&&(E=_);let S=k===h[y]&&k!==d[y]&&V;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...w},!v.isActive&&N===null||!k&&!v.prevProp||Ap(k)||typeof k=="boolean")continue;let x=F8(v.prevProp,k)||y===u&&v.isActive&&!S&&V||_>E&&V,R=!1;const D=Array.isArray(k)?k:[k];let A=D.reduce(i,{});N===!1&&(A={});const{prevResolvedValues:C={}}=v,U={...C,...A},B=G=>{x=!0,g.has(G)&&(R=!0,g.delete(G)),v.needsAnimating[G]=!0};for(const G in U){const J=A[G],$=C[G];if(w.hasOwnProperty(G))continue;let q=!1;Tf(J)&&Tf($)?q=!Jk(J,$):q=J!==$,q?J!==void 0?B(G):g.add(G):J!==void 0&&g.has(G)?B(G):v.protectedKeys[G]=!0}v.prevProp=k,v.prevResolvedValues=A,v.isActive&&(w={...w,...A}),r&&t.blockInitialAnimation&&(x=!1),x&&(!S||R)&&f.push(...D.map(G=>({animation:G,options:{type:y,...l}})))}if(g.size){const _={};g.forEach(y=>{const v=t.getBaseTarget(y);v!==void 0&&(_[y]=v)}),f.push({animation:_})}let P=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(f):Promise.resolve()}function a(l,u,d){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var w;return(w=g.animationState)===null||w===void 0?void 0:w.setActive(l,u)}),n[l].isActive=u;const f=o(d,l);for(const g in n)n[g].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function F8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Jk(e,t):!1}function ws(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function U8(){return{animate:ws(!0),whileInView:ws(),whileHover:ws(),whileTap:ws(),whileDrag:ws(),whileFocus:ws(),exit:ws()}}class j8 extends fs{constructor(e){super(e),e.animationState||(e.animationState=L8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Ap(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let B8=0;class $8 extends fs{constructor(){super(...arguments),this.id=B8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const z8={animation:{Feature:j8},exit:{Feature:$8}},OI=(t,e)=>Math.abs(t-e);function W8(t,e){const n=OI(t.x,e.x),r=OI(t.y,e.y);return Math.sqrt(n**2+r**2)}class RD{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=rg(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=W8(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:w}=h,{timestamp:E}=qt;this.history.push({...w,timestamp:E});const{onStart:P,onMove:_}=this.handlers;f||(P&&P(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ng(f,this.transformPagePoint),ze.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=rg(h.type==="pointercancel"?this.lastMoveEventInfo:ng(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,P),w&&w(h,P)},!qk(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Rp(e),a=ng(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=qt;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,rg(a,this.history)),this.removeListeners=Wi(Lr(this.contextWindow,"pointermove",this.handlePointerMove),Lr(this.contextWindow,"pointerup",this.handlePointerUp),Lr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Kr(this.updatePoint)}}function ng(t,e){return e?{point:e(t.point)}:t}function LI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rg({point:t},e){return{point:t,delta:LI(t,kD(e)),offset:LI(t,H8(e)),velocity:G8(e,.1)}}function H8(t){return t[0]}function kD(t){return t[t.length-1]}function G8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=kD(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Hi(e)));)n--;if(!r)return{x:0,y:0};const s=Fr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function kn(t){return t.max-t.min}function Zy(t,e=0,n=.01){return Math.abs(t-e)<=n}function FI(t,e,n,r=.5){t.origin=r,t.originPoint=Xe(e.min,e.max,t.origin),t.scale=kn(n)/kn(e),(Zy(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Xe(n.min,n.max,t.origin)-t.originPoint,(Zy(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Pu(t,e,n,r){FI(t.x,e.x,n.x,r?r.originX:void 0),FI(t.y,e.y,n.y,r?r.originY:void 0)}function UI(t,e,n){t.min=n.min+e.min,t.max=t.min+kn(e)}function q8(t,e,n){UI(t.x,e.x,n.x),UI(t.y,e.y,n.y)}function jI(t,e,n){t.min=e.min-n.min,t.max=t.min+kn(e)}function Cu(t,e,n){jI(t.x,e.x,n.x),jI(t.y,e.y,n.y)}function K8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xe(n,t,r.max):Math.min(t,n)),t}function BI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Q8(t,{top:e,left:n,bottom:r,right:i}){return{x:BI(t.x,n,i),y:BI(t.y,e,r)}}function $I(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Y8(t,e){return{x:$I(t.x,e.x),y:$I(t.y,e.y)}}function X8(t,e){let n=.5;const r=kn(t),i=kn(e);return i>r?n=cc(e.min,e.max-r,t.min):r>i&&(n=cc(t.min,t.max-i,e.min)),ns(0,1,n)}function J8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ev=.35;function Z8(t=ev){return t===!1?t=0:t===!0&&(t=ev),{x:zI(t,"left","right"),y:zI(t,"top","bottom")}}function zI(t,e,n){return{min:WI(t,e),max:WI(t,n)}}function WI(t,e){return typeof t=="number"?t:t[e]||0}const HI=()=>({translate:0,scale:1,origin:0,originPoint:0}),na=()=>({x:HI(),y:HI()}),GI=()=>({min:0,max:0}),yt=()=>({x:GI(),y:GI()});function On(t){return[t("x"),t("y")]}function DD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function e7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function t7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ig(t){return t===void 0||t===1}function tv({scale:t,scaleX:e,scaleY:n}){return!ig(t)||!ig(e)||!ig(n)}function As(t){return tv(t)||ND(t)||t.z||t.rotate||t.rotateX||t.rotateY}function ND(t){return qI(t.x)||qI(t.y)}function qI(t){return t&&t!=="0%"}function Cf(t,e,n){const r=t-n,i=e*r;return n+i}function KI(t,e,n,r,i){return i!==void 0&&(t=Cf(t,i,r)),Cf(t,n,r)+e}function nv(t,e=0,n=1,r,i){t.min=KI(t.min,e,n,r,i),t.max=KI(t.max,e,n,r,i)}function VD(t,{x:e,y:n}){nv(t.x,e.translate,e.scale,e.originPoint),nv(t.y,n.translate,n.scale,n.originPoint)}function n7(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ra(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VD(t,o)),r&&As(s.latestValues)&&ra(t,s.latestValues))}e.x=QI(e.x),e.y=QI(e.y)}function QI(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function yi(t,e){t.min=t.min+e,t.max=t.max+e}function YI(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Xe(t.min,t.max,s);nv(t,e[n],e[r],o,e.scale)}const r7=["x","scaleX","originX"],i7=["y","scaleY","originY"];function ra(t,e){YI(t.x,e,r7),YI(t.y,e,i7)}function MD(t,e){return DD(t7(t.getBoundingClientRect(),e))}function s7(t,e,n){const r=MD(t,n),{scroll:i}=e;return i&&(yi(r.x,i.offset.x),yi(r.y,i.offset.y)),r}const OD=({current:t})=>t?t.ownerDocument.defaultView:null,o7=new WeakMap;class a7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Rp(d,"page").point)},s=(d,h)=>{const{drag:f,dragPropagation:g,onDragStart:w}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Qk(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),On(P=>{let _=this.getAxisMotionValue(P).get()||0;if(Tr.test(_)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[P];v&&(_=kn(v)*(parseFloat(_)/100))}}this.originPoint[P]=_}),w&&ze.update(()=>w(d,h),!1,!0);const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:w,onDrag:E}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:P}=h;if(g&&this.currentDirection===null){this.currentDirection=l7(P),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",h.point,P),this.updateAxis("y",h.point,P),this.visualElement.render(),E&&E(d,h)},a=(d,h)=>this.stop(d,h),l=()=>On(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new RD(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:OD(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ze.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!kd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=K8(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ea(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Q8(i.layoutBox,n):this.constraints=!1,this.elastic=Z8(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&On(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=J8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ea(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=s7(r,i.root,this.visualElement.getTransformPagePoint());let o=Y8(i.layout.layoutBox,s);if(n){const a=n(e7(o));this.hasMutatedConstraints=!!a,a&&(o=DD(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=On(d=>{if(!kd(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Uw(e,r,0,n))}stopAnimation(){On(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){On(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){On(n=>{const{drag:r}=this.getProps();if(!kd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Xe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ea(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};On(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=X8({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),On(o=>{if(!kd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Xe(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;o7.set(this.visualElement,this);const e=this.visualElement.current,n=Lr(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ea(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Mr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(On(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=ev,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function kd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function l7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class u7 extends fs{constructor(e){super(e),this.removeGroupControls=ot,this.removeListeners=ot,this.controls=new a7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const XI=t=>(e,n)=>{t&&ze.update(()=>t(e,n))};class c7 extends fs{constructor(){super(...arguments),this.removePointerDownListener=ot}onPointerDown(e){this.session=new RD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:XI(e),onStart:XI(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ze.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Lr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function d7(){const t=b.useContext(Ew);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=b.useId();return b.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const lh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=JI(t,e.target.x),r=JI(t,e.target.y);return`${n}% ${r}%`}},h7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=rs.parse(t);if(i.length>5)return r;const s=rs.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Xe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class f7 extends It.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;_z(p7),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),lh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LD(t){const[e,n]=d7(),r=b.useContext(Dk);return It.createElement(f7,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(Nk),isPresent:e,safeToRemove:n})}const p7={borderRadius:{...Wl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wl,borderTopRightRadius:Wl,borderBottomLeftRadius:Wl,borderBottomRightRadius:Wl,boxShadow:h7},FD=["TopLeft","TopRight","BottomLeft","BottomRight"],m7=FD.length,ZI=t=>typeof t=="string"?parseFloat(t):t,eS=t=>typeof t=="number"||ue.test(t);function g7(t,e,n,r,i,s){i?(t.opacity=Xe(0,n.opacity!==void 0?n.opacity:1,y7(r)),t.opacityExit=Xe(e.opacity!==void 0?e.opacity:1,0,v7(r))):s&&(t.opacity=Xe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<m7;o++){const a=`border${FD[o]}Radius`;let l=tS(e,a),u=tS(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||eS(l)===eS(u)?(t[a]=Math.max(Xe(ZI(l),ZI(u),r),0),(Tr.test(u)||Tr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Xe(e.rotate||0,n.rotate||0,r))}function tS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const y7=UD(0,.5,aD),v7=UD(.5,.95,ot);function UD(t,e,n){return r=>r<t?0:r>e?1:n(cc(t,e,r))}function nS(t,e){t.min=e.min,t.max=e.max}function Mn(t,e){nS(t.x,e.x),nS(t.y,e.y)}function rS(t,e,n,r,i){return t-=e,t=Cf(t,1/n,r),i!==void 0&&(t=Cf(t,1/i,r)),t}function _7(t,e=0,n=1,r=.5,i,s=t,o=t){if(Tr.test(e)&&(e=parseFloat(e),e=Xe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Xe(s.min,s.max,r);t===s&&(a-=e),t.min=rS(t.min,e,n,a,i),t.max=rS(t.max,e,n,a,i)}function iS(t,e,[n,r,i],s,o){_7(t,e[n],e[r],e[i],e.scale,s,o)}const w7=["x","scaleX","originX"],T7=["y","scaleY","originY"];function sS(t,e,n,r){iS(t.x,e,w7,n?n.x:void 0,r?r.x:void 0),iS(t.y,e,T7,n?n.y:void 0,r?r.y:void 0)}function oS(t){return t.translate===0&&t.scale===1}function jD(t){return oS(t.x)&&oS(t.y)}function E7(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function BD(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function aS(t){return kn(t.x)/kn(t.y)}class I7{constructor(){this.members=[]}add(e){jw(this.members,e),e.scheduleRender()}remove(e){if(Bw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lS(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const S7=(t,e)=>t.depth-e.depth;class P7{constructor(){this.children=[],this.isDirty=!1}add(e){jw(this.children,e),this.isDirty=!0}remove(e){Bw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(S7),this.isDirty=!1,this.children.forEach(e)}}function C7(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Kr(r),t(s-e))};return ze.read(r,!0),()=>Kr(r)}function A7(t){window.MotionDebug&&window.MotionDebug.record(t)}function x7(t){return t instanceof SVGElement&&t.tagName!=="svg"}function b7(t,e,n){const r=_n(t)?t:$a(t);return r.start(Uw("",r,e,n)),r.animation}const uS=["","X","Y","Z"],R7={visibility:"hidden"},cS=1e3;let k7=0;const xs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $D({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=k7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xs.totalNodes=xs.resolvedTargetDeltas=xs.recalculatedProjection=0,this.nodes.forEach(V7),this.nodes.forEach(U7),this.nodes.forEach(j7),this.nodes.forEach(M7),A7(xs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new P7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $w),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=x7(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=C7(f,250),lh.hasAnimatedSinceResize&&(lh.hasAnimatedSinceResize=!1,this.nodes.forEach(hS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||d.getDefaultTransition()||H7,{onLayoutAnimationStart:P,onLayoutAnimationComplete:_}=d.getProps(),y=!this.targetLayout||!BD(this.targetLayout,w)||g,v=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const k={...Fw(E,"layout"),onPlay:P,onComplete:_};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else f||hS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Kr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(B7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dS);return}this.isUpdating||this.nodes.forEach(L7),this.isUpdating=!1,this.nodes.forEach(F7),this.nodes.forEach(D7),this.nodes.forEach(N7),this.clearAllSnapshots();const a=performance.now();qt.delta=ns(0,1e3/60,a-qt.timestamp),qt.timestamp=a,qt.isProcessing=!0,Km.update.process(qt),Km.preRender.process(qt),Km.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(O7),this.sharedNodes.forEach($7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!jD(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||As(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),G7(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return yt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(yi(a.x,l.offset.x),yi(a.y,l.offset.y)),a}removeElementScroll(o){const a=yt();Mn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){Mn(a,o);const{scroll:f}=this.root;f&&(yi(a.x,-f.offset.x),yi(a.y,-f.offset.y))}yi(a.x,d.offset.x),yi(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=yt();Mn(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ra(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),As(d.latestValues)&&ra(l,d.latestValues)}return As(this.latestValues)&&ra(l,this.latestValues),l}removeTransform(o){const a=yt();Mn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!As(u.latestValues))continue;tv(u.latestValues)&&u.updateSnapshot();const d=yt(),h=u.measurePageBox();Mn(d,h),sS(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return As(this.latestValues)&&sS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=qt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Cu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),VD(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Cu(this.relativeTargetOrigin,this.target,g.target),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tv(this.parent.latestValues)||ND(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Mn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;n7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:w}=a;if(!w){this.projectionTransform&&(this.projectionDelta=na(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=na(),this.projectionDeltaWithTransform=na());const E=this.projectionTransform;Pu(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=lS(this.projectionDelta,this.treeScale),(this.projectionTransform!==E||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),xs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=yt(),g=l?l.source:void 0,w=this.layout?this.layout.source:void 0,E=g!==w,P=this.getStack(),_=!P||P.members.length<=1,y=!!(E&&!_&&this.options.crossfade===!0&&!this.path.some(W7));this.animationProgress=0;let v;this.mixTargetDelta=k=>{const V=k/1e3;fS(h.x,o.x,V),fS(h.y,o.y,V),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cu(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),z7(this.relativeTarget,this.relativeTargetOrigin,f,V),v&&E7(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=yt()),Mn(v,this.relativeTarget)),E&&(this.animationValues=d,g7(d,u,this.latestValues,V,y,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Kr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ze.update(()=>{lh.hasAnimatedSinceResize=!0,this.currentAnimation=b7(0,cS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&zD(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||yt();const h=kn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=kn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Mn(a,l),ra(a,d),Pu(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new I7),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<uS.length;d++){const h="rotate"+uS[d];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return R7;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ah(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=ah(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!As(this.latestValues)&&(E.transform=d?d({},""):"none",this.hasProjected=!1),E}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=lS(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:g,y:w}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const E in _f){if(f[E]===void 0)continue;const{correct:P,applyTo:_}=_f[E],y=u.transform==="none"?f[E]:P(f[E],h);if(_){const v=_.length;for(let k=0;k<v;k++)u[_[k]]=y}else u[E]=y}return this.options.layoutId&&(u.pointerEvents=h===this?ah(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(dS),this.root.sharedNodes.clear()}}}function D7(t){t.updateLayout()}function N7(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?On(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=kn(f);f.min=r[h].min,f.max=f.min+g}):zD(s,n.layoutBox,r)&&On(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=kn(r[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=na();Pu(a,r,n.layoutBox);const l=na();o?Pu(l,t.applyTransform(i,!0),n.measuredBox):Pu(l,r,n.layoutBox);const u=!jD(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const w=yt();Cu(w,n.layoutBox,f.layoutBox);const E=yt();Cu(E,r,g.layoutBox),BD(w,E)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=w,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function V7(t){xs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function M7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function O7(t){t.clearSnapshot()}function dS(t){t.clearMeasurements()}function L7(t){t.isLayoutDirty=!1}function F7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function U7(t){t.resolveTargetDelta()}function j7(t){t.calcProjection()}function B7(t){t.resetRotation()}function $7(t){t.removeLeadSnapshot()}function fS(t,e,n){t.translate=Xe(e.translate,0,n),t.scale=Xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function pS(t,e,n,r){t.min=Xe(e.min,n.min,r),t.max=Xe(e.max,n.max,r)}function z7(t,e,n,r){pS(t.x,e.x,n.x,r),pS(t.y,e.y,n.y,r)}function W7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const H7={duration:.45,ease:[.4,0,.1,1]},mS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),gS=mS("applewebkit/")&&!mS("chrome/")?Math.round:ot;function yS(t){t.min=gS(t.min),t.max=gS(t.max)}function G7(t){yS(t.x),yS(t.y)}function zD(t,e,n){return t==="position"||t==="preserve-aspect"&&!Zy(aS(e),aS(n),.2)}const q7=$D({attachResizeListener:(t,e)=>Mr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sg={current:void 0},WD=$D({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sg.current){const t=new q7({});t.mount(window),t.setOptions({layoutScroll:!0}),sg.current=t}return sg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),K7={pan:{Feature:c7},drag:{Feature:u7,ProjectionNode:WD,MeasureLayout:LD}},Q7=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Y7(t){const e=Q7.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function rv(t,e,n=1){const[r,i]=Y7(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return CD(o)?parseFloat(o):o}else return Gy(i)?rv(i,e,n+1):i}function X7(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Gy(s))return;const o=rv(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Gy(s))continue;const o=rv(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const J7=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),HD=t=>J7.has(t),Z7=t=>Object.keys(t).some(HD),vS=t=>t===_o||t===ue,_S=(t,e)=>parseFloat(t.split(", ")[e]),wS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return _S(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?_S(s[1],t):0}},eH=new Set(["x","y","z"]),tH=Rc.filter(t=>!eH.has(t));function nH(t){const e=[];return tH.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const za={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wS(4,13),y:wS(5,14)};za.translateX=za.x;za.translateY=za.y;const rH=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=za[u](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),t[u]=za[u](l,s)}),t},iH=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(HD);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=zl(d);const f=e[l];let g;if(Tf(f)){const w=f.length,E=f[0]===null?1:0;d=f[E],h=zl(d);for(let P=E;P<w&&f[P]!==null;P++)g?Nw(zl(f[P])===g):g=zl(f[P])}else g=zl(f);if(h!==g)if(vS(h)&&vS(g)){const w=u.get();typeof w=="string"&&u.set(parseFloat(w)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&g===ue&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(d===0||f===0)?d===0?u.set(g.transform(d)):e[l]=h.transform(f):(o||(s=nH(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=rH(e,t,a);return s.length&&s.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),Cp&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function sH(t,e,n,r){return Z7(e)?iH(t,e,n,r):{target:e,transitionEnd:r}}const oH=(t,e,n,r)=>{const i=X7(t,e,r);return e=i.target,r=i.transitionEnd,sH(t,e,n,r)},iv={current:null},GD={current:!1};function aH(){if(GD.current=!0,!!Cp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>iv.current=t.matches;t.addListener(e),e()}else iv.current=!1}function lH(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(_n(s))t.addValue(i,s),Pf(r)&&r.add(i);else if(_n(o))t.addValue(i,$a(s,{owner:t})),Pf(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,$a(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const TS=new WeakMap,qD=Object.keys(uc),uH=qD.length,ES=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cH=Pw.length;class dH{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ze.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=xp(n),this.isVariantNode=kk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];a[h]!==void 0&&_n(f)&&(f.set(a[h],!1),Pf(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,TS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),GD.current||aH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){TS.delete(this.current),this.projection&&this.projection.unmount(),Kr(this.notifyUpdate),Kr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=vo.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ze.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<uH;l++){const u=qD[l],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:g}=uc[u];f&&(o=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||h&&ea(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ES.length;r++){const i=ES[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=lH(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<cH;r++){const i=Pw[r],s=this.props[i];(lc(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=$a(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Dw(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!_n(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new $w),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class KD extends dH{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=x8(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){C8(this,r,o);const a=oH(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function hH(t){return window.getComputedStyle(t)}class fH extends KD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(vo.has(n)){const r=Lw(n);return r&&r.default||0}else{const r=hH(e),i=(Ok(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return MD(e,n)}build(e,n,r,i){Aw(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return kw(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_n(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){$k(e,n,r,i)}}class pH extends KD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(vo.has(n)){const r=Lw(n);return r&&r.default||0}return n=zk.has(n)?n:Iw(n),e.getAttribute(n)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,n){return Hk(e,n)}build(e,n,r,i){bw(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){Wk(e,n,r,i)}mount(e){this.isSVGTag=Rw(e.tagName),super.mount(e)}}const mH=(t,e)=>Cw(t)?new pH(e,{enableHardwareAcceleration:!1}):new fH(e,{enableHardwareAcceleration:!0}),gH={layout:{ProjectionNode:WD,MeasureLayout:LD}},yH={...z8,...uW,...K7,...gH},Dd=yz((t,e)=>Yz(t,e,yH,mH)),vH=Ek("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),sv=It.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?h9:"button";return L.jsx(o,{className:yo(vH({variant:e,size:n,className:t})),ref:s,...i})});sv.displayName="Button";function _H(){const[t,e]=b.useState(!1),[n,r]=b.useState(null);b.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let o,a;const l=u=>{u&&u.addEventListener("statechange",()=>{u.state==="installed"&&navigator.serviceWorker.controller&&(r(u),e(!0))})};return navigator.serviceWorker.ready.then(u=>{o=u,u.waiting&&(r(u.waiting),e(!0)),a=()=>{l(u.installing)},u.addEventListener("updatefound",a)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),o&&a&&o.removeEventListener("updatefound",a)}},[]);const i=()=>{n&&n.postMessage({type:"SKIP_WAITING"}),e(!1)};return t?L.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:L.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[L.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),L.jsxs("div",{className:"flex items-center justify-end gap-2",children:[L.jsx(sv,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),L.jsx(sv,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}const wH=b.lazy(()=>fo(()=>import("./AuthPage-6e8391f4.js"),["assets/AuthPage-6e8391f4.js","assets/input-c95d25ec.js","assets/label-270ed458.js","assets/InstallPrompt-f1214dae.js","assets/eye-fe5b932b.js"])),TH=b.lazy(()=>fo(()=>import("./DashboardPage-43ecb127.js"),["assets/DashboardPage-43ecb127.js","assets/NewCycleDialog-c52b1f5b.js","assets/OverlapWarningDialog-038e0dd4.js","assets/useCycleData-9f76d19f.js","assets/badge-4c7d2230.js","assets/input-c95d25ec.js","assets/computePeakStatuses-8ec0bab9.js","assets/label-270ed458.js","assets/checkbox-2e1f35be.js","assets/eye-fe5b932b.js","assets/useFertilityChart-b6d45542.js"])),EH=b.lazy(()=>fo(()=>import("./ArchivedCyclesPage-e14ac466.js"),["assets/ArchivedCyclesPage-e14ac466.js","assets/useCycleData-9f76d19f.js","assets/badge-4c7d2230.js","assets/input-c95d25ec.js","assets/OverlapWarningDialog-038e0dd4.js","assets/DeletionDialog-31da8265.js"])),IH=b.lazy(()=>fo(()=>import("./CycleDetailPage-f27c93da.js"),["assets/CycleDetailPage-f27c93da.js","assets/DeletionDialog-31da8265.js","assets/badge-4c7d2230.js","assets/useCycleData-9f76d19f.js","assets/RecordsPage-689fc63f.js","assets/NewCycleDialog-c52b1f5b.js","assets/OverlapWarningDialog-038e0dd4.js","assets/input-c95d25ec.js","assets/computePeakStatuses-8ec0bab9.js","assets/label-270ed458.js","assets/checkbox-2e1f35be.js","assets/eye-fe5b932b.js","assets/arrow-left-da98c05b.js"])),SH=b.lazy(()=>fo(()=>import("./SettingsPage-7ea0d73a.js"),["assets/SettingsPage-7ea0d73a.js","assets/input-c95d25ec.js","assets/label-270ed458.js","assets/useCycleData-9f76d19f.js","assets/checkbox-2e1f35be.js","assets/InstallPrompt-f1214dae.js"])),PH=b.lazy(()=>fo(()=>import("./ChartPage-d29ed2cd.js"),["assets/ChartPage-d29ed2cd.js","assets/computePeakStatuses-8ec0bab9.js","assets/input-c95d25ec.js","assets/label-270ed458.js","assets/useCycleData-9f76d19f.js","assets/checkbox-2e1f35be.js","assets/badge-4c7d2230.js","assets/eye-fe5b932b.js","assets/useFertilityChart-b6d45542.js","assets/arrow-left-da98c05b.js"])),CH=b.lazy(()=>fo(()=>import("./RecordsPage-689fc63f.js"),["assets/RecordsPage-689fc63f.js","assets/NewCycleDialog-c52b1f5b.js","assets/OverlapWarningDialog-038e0dd4.js","assets/useCycleData-9f76d19f.js","assets/badge-4c7d2230.js","assets/input-c95d25ec.js","assets/computePeakStatuses-8ec0bab9.js","assets/label-270ed458.js","assets/checkbox-2e1f35be.js","assets/eye-fe5b932b.js","assets/DeletionDialog-31da8265.js"]));function Vo({children:t}){const{user:e}=ow();return e?t:L.jsx(ey,{to:"/auth",replace:!0})}function AH(){const{user:t,loadingAuth:e}=ow();if(e)return L.jsx(uI,{children:L.jsxs("div",{className:"flex min-h-[100dvh] flex-col items-center justify-center space-y-4 px-4",children:[L.jsx(Dd.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),L.jsx(Dd.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const n=t?L.jsx(No,{children:L.jsx("div",{className:"flex min-h-[100dvh] items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):L.jsxs("div",{className:"flex min-h-[100dvh] flex-col items-center justify-center space-y-4 px-4",children:[L.jsx(Dd.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),L.jsx(Dd.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return L.jsx(uI,{children:L.jsx(b.Suspense,{fallback:n,children:L.jsxs(BO,{children:[L.jsx(Ar,{path:"/auth",element:t?L.jsx(ey,{to:"/",replace:!0}):L.jsx(wH,{})}),L.jsx(Ar,{path:"/",element:L.jsx(Vo,{children:L.jsx(No,{children:L.jsx(TH,{})})})}),L.jsx(Ar,{path:"/chart/:cycleId?",element:L.jsx(Vo,{children:L.jsx(PH,{})})}),L.jsx(Ar,{path:"/records",element:L.jsx(Vo,{children:L.jsx(No,{children:L.jsx(CH,{})})})}),L.jsx(Ar,{path:"/archived-cycles",element:L.jsx(Vo,{children:L.jsx(No,{children:L.jsx(EH,{})})})}),L.jsx(Ar,{path:"/settings",element:L.jsx(Vo,{children:L.jsx(No,{children:L.jsx(SH,{})})})}),L.jsx(Ar,{path:"/cycle/:cycleId",element:L.jsx(Vo,{children:L.jsx(No,{children:L.jsx(IH,{})})})}),L.jsx(Ar,{path:"*",element:L.jsx(ey,{to:t?"/":"/auth",replace:!0})})]})})})}function xH(){return L.jsxs(QO,{basename:"/",children:[L.jsx(_H,{}),L.jsxs(jB,{children:[L.jsx(C5,{children:L.jsx(r2,{children:L.jsx(AH,{})})}),L.jsx(oz,{})]})]})}og.createRoot(document.getElementById("root")).render(L.jsx(It.StrictMode,{children:L.jsx(xH,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const t=new URL("sw.js","/");navigator.serviceWorker.register(t).catch(e=>{console.error("Service worker registration failed:",e)})});export{hf as $,b5 as A,sv as B,k5 as C,ts as D,nk as E,Sn as F,uo as G,ac as H,yo as I,zf as J,po as K,JO as L,No as M,D5 as N,WB as O,Ir as P,KB as Q,It as R,vH as S,Fe as T,N5 as U,at as V,en as W,V5 as X,BB as Y,rl as Z,qr as _,WC as a,az as a0,ze as a1,jz as a2,Ew as a3,Dk as a4,NR as a5,qB as a6,JR as a7,tk as a8,vf as a9,V9 as aa,Q$ as ab,Bm as ac,Ol as ad,k6 as ae,Ll as af,Ek as ag,VS as ah,YM as ai,LH as aj,OH as ak,Z as al,sw as b,il as c,Ft as d,he as e,de as f,Lt as g,GD as h,aH as i,L as j,QB as k,hn as l,Dd as m,aw as n,R5 as o,iv as p,DH as q,b as r,sc as s,fo as t,ow as u,kH as v,RH as w,IS as x,zm as y,QR as z};
