import{u as $,a as ee,b as ae,r as t,j as e,B as i}from"./index-f990749f.js";import{I as c}from"./input-d884c3cd.js";import{L as n}from"./label-03db48ed.js";import{S as R,a as I,b as O,c as q,d}from"./select-bff7c354.js";import{D as se,a as te,b as le,c as ie,d as ne,e as re}from"./dialog-4560ab56.js";const he=()=>{const{user:a,updateEmail:G,updatePassword:V,preferences:l,savePreferences:B,logout:H,updateProfile:M,deleteAccount:J}=$(),h=ee(),{toast:r}=ae(),[f,x]=t.useState((a==null?void 0:a.email)||""),[u,g]=t.useState(""),[p,j]=t.useState((a==null?void 0:a.displayName)||""),[v,y]=t.useState((a==null?void 0:a.photoURL)||""),[S,b]=t.useState((l==null?void 0:l.theme)||"light"),[C,w]=t.useState((l==null?void 0:l.units)||"metric"),[N,D]=t.useState(!1),[P,E]=t.useState(!1),[L,A]=t.useState(!1),[z,T]=t.useState(!1),[U,k]=t.useState(!1),[m,F]=t.useState(!1),[K,o]=t.useState(!1);t.useEffect(()=>{x((a==null?void 0:a.email)||""),j((a==null?void 0:a.displayName)||""),y((a==null?void 0:a.photoURL)||"")},[a]),t.useEffect(()=>{l&&(b(l.theme||"light"),w(l.units||"metric"))},[l]);const Q=async s=>{s.preventDefault(),D(!0);try{await G(f),r({title:"Correo actualizado"})}finally{D(!1)}},W=async s=>{if(s.preventDefault(),!!u){E(!0);try{await V(u),g(""),r({title:"Contraseña actualizada"})}finally{E(!1)}}},X=async s=>{s.preventDefault(),A(!0);try{await M({displayName:p,photoURL:v}),r({title:"Perfil actualizado"})}finally{A(!1)}},Y=async s=>{s.preventDefault(),T(!0);try{await B({theme:S,units:C}),r({title:"Preferencias guardadas"})}finally{T(!1)}},Z=async()=>{k(!0);try{await H(),h("/auth")}finally{k(!1)}},_=async()=>{F(!0);try{await J(),h("/auth")}finally{F(!1),o(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto space-y-8 px-4",children:[e.jsxs("form",{onSubmit:Q,className:"space-y-2",children:[e.jsx(n,{htmlFor:"email",children:"Correo"}),e.jsx(c,{id:"email",type:"email",required:!0,value:f,onChange:s=>x(s.target.value)}),e.jsx(i,{type:"submit",className:"mt-2",disabled:N,children:N?"Actualizando...":"Actualizar correo"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-2",children:[e.jsx(n,{htmlFor:"password",children:"Contraseña nueva"}),e.jsx(c,{id:"password",type:"password",required:!0,minLength:6,value:u,onChange:s=>g(s.target.value)}),e.jsx(i,{type:"submit",className:"mt-2",disabled:P,children:P?"Actualizando...":"Actualizar contraseña"})]}),e.jsxs("form",{onSubmit:X,className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Nombre"}),e.jsx(c,{id:"name",required:!0,value:p,onChange:s=>j(s.target.value)}),e.jsx(n,{htmlFor:"avatar",children:"URL del avatar"}),e.jsx(c,{id:"avatar",type:"url",value:v,onChange:s=>y(s.target.value)}),e.jsx(i,{type:"submit",className:"mt-2",disabled:L,children:L?"Guardando...":"Actualizar perfil"})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Tema"}),e.jsxs(R,{value:S,onValueChange:b,children:[e.jsx(I,{children:e.jsx(O,{placeholder:"Tema"})}),e.jsxs(q,{children:[e.jsx(d,{value:"light",children:"Claro"}),e.jsx(d,{value:"dark",children:"Oscuro"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Unidades"}),e.jsxs(R,{value:C,onValueChange:w,children:[e.jsx(I,{children:e.jsx(O,{placeholder:"Unidades"})}),e.jsxs(q,{children:[e.jsx(d,{value:"metric",children:"Métrico"}),e.jsx(d,{value:"imperial",children:"Imperial"})]})]})]}),e.jsx(i,{type:"submit",disabled:z,children:z?"Guardando...":"Guardar preferencias"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{variant:"outline",onClick:Z,disabled:U,className:"w-full",children:U?"Cerrando...":"Cerrar sesión"}),e.jsx(i,{variant:"destructive",onClick:()=>o(!0),className:"w-full",children:"Eliminar cuenta"})]}),e.jsx(se,{open:K,onOpenChange:o,children:e.jsxs(te,{children:[e.jsxs(le,{children:[e.jsx(ie,{children:"¿Eliminar cuenta?"}),e.jsx(ne,{children:"Esta acción es irreversible. Todos tus datos serán eliminados."})]}),e.jsxs(re,{children:[e.jsx(i,{variant:"outline",onClick:()=>o(!1),disabled:m,children:"Cancelar"}),e.jsx(i,{variant:"destructive",onClick:_,disabled:m,children:m?"Eliminando...":"Eliminar"})]})]})})]})};export{he as default};
