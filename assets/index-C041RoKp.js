const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-CnkgwsHx.js","assets/input-D9upNPQ0.js","assets/label-DmhTYPl7.js","assets/InstallPrompt-DuMtRlGW.js","assets/eye-fkTjB7nE.js","assets/DashboardPage-D-LgS0_q.js","assets/NewCycleDialog-pYL8DOtB.js","assets/OverlapWarningDialog-CRNazV6l.js","assets/useCycleData-fUMApAkg.js","assets/badge-BbO7fxzd.js","assets/computePeakStatuses-Dl9gvYQS.js","assets/checkbox-DTslPdqR.js","assets/useFertilityChart-Bo-tTrQP.js","assets/ArchivedCyclesPage-PUsHy3gC.js","assets/DeletionDialog-BtycWigc.js","assets/CycleDetailPage-BuElGJMp.js","assets/RecordsPage-rKEZsGq4.js","assets/arrow-left-CEy_h0Do.js","assets/SettingsPage-tGr7aFBg.js","assets/ChartPage-hYbC8MgA.js"])))=>i.map(i=>d[i]);
function uD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var BW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qg={exports:{}},vc={},Gg={exports:{}},We={};var Q0;function cD(){if(Q0)return We;Q0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,R={};function C(N,K,he){this.props=N,this.context=K,this.refs=R,this.updater=he||E}C.prototype.isReactComponent={},C.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=C.prototype;function V(N,K,he){this.props=N,this.context=K,this.refs=R,this.updater=he||E}var M=V.prototype=new B;M.constructor=V,b(M,C.prototype),M.isPureReactComponent=!0;var z=Array.isArray,te=Object.prototype.hasOwnProperty,Z={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(N,K,he){var pe,me={},Se=null,Me=null;if(K!=null)for(pe in K.ref!==void 0&&(Me=K.ref),K.key!==void 0&&(Se=""+K.key),K)te.call(K,pe)&&!x.hasOwnProperty(pe)&&(me[pe]=K[pe]);var Be=arguments.length-2;if(Be===1)me.children=he;else if(1<Be){for(var He=Array(Be),ct=0;ct<Be;ct++)He[ct]=arguments[ct+2];me.children=He}if(N&&N.defaultProps)for(pe in Be=N.defaultProps,Be)me[pe]===void 0&&(me[pe]=Be[pe]);return{$$typeof:n,type:N,key:Se,ref:Me,props:me,_owner:Z.current}}function D(N,K){return{$$typeof:n,type:N.type,key:K,ref:N.ref,props:N.props,_owner:N._owner}}function F(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function L(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return K[he]})}var U=/\/+/g;function P(N,K){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):K.toString(36)}function Y(N,K,he,pe,me){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var Me=!1;if(N===null)Me=!0;else switch(Se){case"string":case"number":Me=!0;break;case"object":switch(N.$$typeof){case n:case e:Me=!0}}if(Me)return Me=N,me=me(Me),N=pe===""?"."+P(Me,0):pe,z(me)?(he="",N!=null&&(he=N.replace(U,"$&/")+"/"),Y(me,K,he,"",function(ct){return ct})):me!=null&&(F(me)&&(me=D(me,he+(!me.key||Me&&Me.key===me.key?"":(""+me.key).replace(U,"$&/")+"/")+N)),K.push(me)),1;if(Me=0,pe=pe===""?".":pe+":",z(N))for(var Be=0;Be<N.length;Be++){Se=N[Be];var He=pe+P(Se,Be);Me+=Y(Se,K,he,He,me)}else if(He=v(N),typeof He=="function")for(N=He.call(N),Be=0;!(Se=N.next()).done;)Se=Se.value,He=pe+P(Se,Be++),Me+=Y(Se,K,he,He,me);else if(Se==="object")throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Me}function se(N,K,he){if(N==null)return N;var pe=[],me=0;return Y(N,pe,"","",function(Se){return K.call(he,Se,me++)}),pe}function re(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var oe={current:null},ee={transition:null},de={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:ee,ReactCurrentOwner:Z};function ne(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:se,forEach:function(N,K,he){se(N,function(){K.apply(this,arguments)},he)},count:function(N){var K=0;return se(N,function(){K++}),K},toArray:function(N){return se(N,function(K){return K})||[]},only:function(N){if(!F(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},We.Component=C,We.Fragment=t,We.Profiler=i,We.PureComponent=V,We.StrictMode=r,We.Suspense=d,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,We.act=ne,We.cloneElement=function(N,K,he){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var pe=b({},N.props),me=N.key,Se=N.ref,Me=N._owner;if(K!=null){if(K.ref!==void 0&&(Se=K.ref,Me=Z.current),K.key!==void 0&&(me=""+K.key),N.type&&N.type.defaultProps)var Be=N.type.defaultProps;for(He in K)te.call(K,He)&&!x.hasOwnProperty(He)&&(pe[He]=K[He]===void 0&&Be!==void 0?Be[He]:K[He])}var He=arguments.length-2;if(He===1)pe.children=he;else if(1<He){Be=Array(He);for(var ct=0;ct<He;ct++)Be[ct]=arguments[ct+2];pe.children=Be}return{$$typeof:n,type:N.type,key:me,ref:Se,props:pe,_owner:Me}},We.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:s,_context:N},N.Consumer=N},We.createElement=S,We.createFactory=function(N){var K=S.bind(null,N);return K.type=N,K},We.createRef=function(){return{current:null}},We.forwardRef=function(N){return{$$typeof:u,render:N}},We.isValidElement=F,We.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:re}},We.memo=function(N,K){return{$$typeof:h,type:N,compare:K===void 0?null:K}},We.startTransition=function(N){var K=ee.transition;ee.transition={};try{N()}finally{ee.transition=K}},We.unstable_act=ne,We.useCallback=function(N,K){return oe.current.useCallback(N,K)},We.useContext=function(N){return oe.current.useContext(N)},We.useDebugValue=function(){},We.useDeferredValue=function(N){return oe.current.useDeferredValue(N)},We.useEffect=function(N,K){return oe.current.useEffect(N,K)},We.useId=function(){return oe.current.useId()},We.useImperativeHandle=function(N,K,he){return oe.current.useImperativeHandle(N,K,he)},We.useInsertionEffect=function(N,K){return oe.current.useInsertionEffect(N,K)},We.useLayoutEffect=function(N,K){return oe.current.useLayoutEffect(N,K)},We.useMemo=function(N,K){return oe.current.useMemo(N,K)},We.useReducer=function(N,K,he){return oe.current.useReducer(N,K,he)},We.useRef=function(N){return oe.current.useRef(N)},We.useState=function(N){return oe.current.useState(N)},We.useSyncExternalStore=function(N,K,he){return oe.current.useSyncExternalStore(N,K,he)},We.useTransition=function(){return oe.current.useTransition()},We.version="18.3.1",We}var Y0;function Hv(){return Y0||(Y0=1,Gg.exports=cD()),Gg.exports}var X0;function dD(){if(X0)return vc;X0=1;var n=Hv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},v=null,E=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(E=d.ref);for(m in d)r.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:v,ref:E,props:g,_owner:i.current}}return vc.Fragment=t,vc.jsx=a,vc.jsxs=a,vc}var J0;function hD(){return J0||(J0=1,qg.exports=dD()),qg.exports}var X=hD(),k=Hv();const en=Wv(k),qv=uD({__proto__:null,default:en},[k]);var nf={},Kg={exports:{}},jn={},Qg={exports:{}},Yg={};var Z0;function fD(){return Z0||(Z0=1,(function(n){function e(ee,de){var ne=ee.length;ee.push(de);e:for(;0<ne;){var N=ne-1>>>1,K=ee[N];if(0<i(K,de))ee[N]=de,ee[ne]=K,ne=N;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var de=ee[0],ne=ee.pop();if(ne!==de){ee[0]=ne;e:for(var N=0,K=ee.length,he=K>>>1;N<he;){var pe=2*(N+1)-1,me=ee[pe],Se=pe+1,Me=ee[Se];if(0>i(me,ne))Se<K&&0>i(Me,me)?(ee[N]=Me,ee[Se]=ne,N=Se):(ee[N]=me,ee[pe]=ne,N=pe);else if(Se<K&&0>i(Me,ne))ee[N]=Me,ee[Se]=ne,N=Se;else break e}}return de}function i(ee,de){var ne=ee.sortIndex-de.sortIndex;return ne!==0?ne:ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,E=!1,b=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(ee){for(var de=t(h);de!==null;){if(de.callback===null)r(h);else if(de.startTime<=ee)r(h),de.sortIndex=de.expirationTime,e(d,de);else break;de=t(h)}}function z(ee){if(R=!1,M(ee),!b)if(t(d)!==null)b=!0,re(te);else{var de=t(h);de!==null&&oe(z,de.startTime-ee)}}function te(ee,de){b=!1,R&&(R=!1,B(S),S=-1),E=!0;var ne=v;try{for(M(de),g=t(d);g!==null&&(!(g.expirationTime>de)||ee&&!L());){var N=g.callback;if(typeof N=="function"){g.callback=null,v=g.priorityLevel;var K=N(g.expirationTime<=de);de=n.unstable_now(),typeof K=="function"?g.callback=K:g===t(d)&&r(d),M(de)}else r(d);g=t(d)}if(g!==null)var he=!0;else{var pe=t(h);pe!==null&&oe(z,pe.startTime-de),he=!1}return he}finally{g=null,v=ne,E=!1}}var Z=!1,x=null,S=-1,D=5,F=-1;function L(){return!(n.unstable_now()-F<D)}function U(){if(x!==null){var ee=n.unstable_now();F=ee;var de=!0;try{de=x(!0,ee)}finally{de?P():(Z=!1,x=null)}}else Z=!1}var P;if(typeof V=="function")P=function(){V(U)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,se=Y.port2;Y.port1.onmessage=U,P=function(){se.postMessage(null)}}else P=function(){C(U,0)};function re(ee){x=ee,Z||(Z=!0,P())}function oe(ee,de){S=C(function(){ee(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){b||E||(b=!0,re(te))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var ne=v;v=de;try{return ee()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ne=v;v=ee;try{return de()}finally{v=ne}},n.unstable_scheduleCallback=function(ee,de,ne){var N=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?N+ne:N):ne=N,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,ee={id:m++,callback:de,priorityLevel:ee,startTime:ne,expirationTime:K,sortIndex:-1},ne>N?(ee.sortIndex=ne,e(h,ee),t(d)===null&&ee===t(h)&&(R?(B(S),S=-1):R=!0,oe(z,ne-N))):(ee.sortIndex=K,e(d,ee),b||E||(b=!0,re(te))),ee},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ee){var de=v;return function(){var ne=v;v=de;try{return ee.apply(this,arguments)}finally{v=ne}}}})(Yg)),Yg}var eE;function pD(){return eE||(eE=1,Qg.exports=fD()),Qg.exports}var tE;function mD(){if(tE)return jn;tE=1;var n=Hv(),e=pD();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function E(o,l,c,p){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,l,c,p){if(l===null||typeof l>"u"||E(o,l,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function R(o,l,c,p,y,_,I){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=o,this.type=l,this.sanitizeURL=_,this.removeEmptyString=I}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new R(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];C[l]=new R(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new R(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new R(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new R(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new R(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new R(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new R(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new R(o,5,!1,o.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function V(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(B,V);C[l]=new R(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(B,V);C[l]=new R(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(B,V);C[l]=new R(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new R(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new R(o,1,!1,o.toLowerCase(),null,!0,!0)});function M(o,l,c,p){var y=C.hasOwnProperty(l)?C[l]:null;(y!==null?y.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,c,y,p)&&(c=null),p||y===null?v(l)&&(c===null?o.removeAttribute(l):o.setAttribute(l,""+c)):y.mustUseProperty?o[y.propertyName]=c===null?y.type===3?!1:"":c:(l=y.attributeName,p=y.attributeNamespace,c===null?o.removeAttribute(l):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?o.setAttributeNS(p,l,c):o.setAttribute(l,c))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),Z=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),ee=Symbol.iterator;function de(o){return o===null||typeof o!="object"?null:(o=ee&&o[ee]||o["@@iterator"],typeof o=="function"?o:null)}var ne=Object.assign,N;function K(o){if(N===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);N=l&&l[1]||""}return`
`+N+o}var he=!1;function pe(o,l){if(!o||he)return"";he=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Q){var p=Q}Reflect.construct(o,[],l)}else{try{l.call()}catch(Q){p=Q}o.call(l.prototype)}else{try{throw Error()}catch(Q){p=Q}o()}}catch(Q){if(Q&&p&&typeof Q.stack=="string"){for(var y=Q.stack.split(`
`),_=p.stack.split(`
`),I=y.length-1,O=_.length-1;1<=I&&0<=O&&y[I]!==_[O];)O--;for(;1<=I&&0<=O;I--,O--)if(y[I]!==_[O]){if(I!==1||O!==1)do if(I--,O--,0>O||y[I]!==_[O]){var j=`
`+y[I].replace(" at new "," at ");return o.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",o.displayName)),j}while(1<=I&&0<=O);break}}}finally{he=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?K(o):""}function me(o){switch(o.tag){case 5:return K(o.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return o=pe(o.type,!1),o;case 11:return o=pe(o.type.render,!1),o;case 1:return o=pe(o.type,!0),o;default:return""}}function Se(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case Z:return"Portal";case D:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case Y:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case U:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case se:return l=o.displayName||null,l!==null?l:Se(o.type)||"Memo";case re:l=o._payload,o=o._init;try{return Se(o(l))}catch{}}return null}function Me(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Se(l);case 8:return l===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function He(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ct(o){var l=He(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(I){p=""+I,_.call(this,I)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Xt(o){o._valueTracker||(o._valueTracker=ct(o))}function ns(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),p="";return o&&(p=He(o)?o.checked?"true":"false":o.value),o=p,o!==c?(l.setValue(o),!0):!1}function Or(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function wr(o,l){var c=l.checked;return ne({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function Oa(o,l){var c=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;c=Be(l.value!=null?l.value:c),o._wrapperState={initialChecked:p,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function vi(o,l){l=l.checked,l!=null&&M(o,"checked",l,!1)}function Mr(o,l){vi(o,l);var c=Be(l.value),p=l.type;if(c!=null)p==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?St(o,l.type,c):l.hasOwnProperty("defaultValue")&&St(o,l.type,Be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function rs(o,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,c||l===o.value||(o.value=l),o.defaultValue=l}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function St(o,l,c){(l!=="number"||Or(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var $e=Array.isArray;function qn(o,l,c,p){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&p&&(o[c].defaultSelected=!0)}else{for(c=""+Be(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function wo(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Au(o,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if($e(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}o._wrapperState={initialValue:Be(c)}}function $d(o,l){var c=Be(l.value),p=Be(l.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),l.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),p!=null&&(o.defaultValue=""+p)}function is(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function bu(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ma(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?bu(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var ss,zd=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,p,y){MSApp.execUnsafeLocalFunction(function(){return o(l,c,p,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(ss=ss||document.createElement("div"),ss.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=ss.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function To(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wd=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(o){Wd.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),os[l]=os[o]})});function as(o,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||os.hasOwnProperty(o)&&os[o]?(""+l).trim():l+"px"}function La(o,l){o=o.style;for(var c in l)if(l.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=as(c,l[c],p);c==="float"&&(c="cssFloat"),p?o.setProperty(c,y):o[c]=y}}var xu=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tr(o,l){if(l){if(xu[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Fa(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ls=null;function Ua(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var _i=null,wi=null,Dt=null;function Ru(o){if(o=rc(o)){if(typeof _i!="function")throw Error(t(280));var l=o.stateNode;l&&(l=yh(l),_i(o.stateNode,o.type,l))}}function us(o){wi?Dt?Dt.push(o):Dt=[o]:wi=o}function cs(){if(wi){var o=wi,l=Dt;if(Dt=wi=null,Ru(o),l)for(o=0;o<l.length;o++)Ru(l[o])}}function Hd(o,l){return o(l)}function qd(){}var Lr=!1;function Gd(o,l,c){if(Lr)return o(l,c);Lr=!0;try{return Hd(o,l,c)}finally{Lr=!1,(wi!==null||Dt!==null)&&(qd(),cs())}}function Eo(o,l){var c=o.stateNode;if(c===null)return null;var p=yh(c);if(p===null)return null;c=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var ds=!1;if(u)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){ds=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{ds=!1}function Kd(o,l,c,p,y,_,I,O,j){var Q=Array.prototype.slice.call(arguments,3);try{l.apply(c,Q)}catch(ue){this.onError(ue)}}var Ti=!1,Fr=null,ja=!1,lr=null,Qd={onError:function(o){Ti=!0,Fr=o}};function Yd(o,l,c,p,y,_,I,O,j){Ti=!1,Fr=null,Kd.apply(Qd,arguments)}function ku(o,l,c,p,y,_,I,O,j){if(Yd.apply(this,arguments),Ti){if(Ti){var Q=Fr;Ti=!1,Fr=null}else throw Error(t(198));ja||(ja=!0,lr=Q)}}function Er(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function Du(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Xd(o){if(Er(o)!==o)throw Error(t(188))}function Jd(o){var l=o.alternate;if(!l){if(l=Er(o),l===null)throw Error(t(188));return l!==o?null:o}for(var c=o,p=l;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return Xd(y),o;if(_===p)return Xd(y),l;_=_.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=_;else{for(var I=!1,O=y.child;O;){if(O===c){I=!0,c=y,p=_;break}if(O===p){I=!0,p=y,c=_;break}O=O.sibling}if(!I){for(O=_.child;O;){if(O===c){I=!0,c=_,p=y;break}if(O===p){I=!0,p=_,c=y;break}O=O.sibling}if(!I)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:l}function Zd(o){return o=Jd(o),o!==null?Io(o):null}function Io(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Io(o);if(l!==null)return l;o=o.sibling}return null}var Nu=e.unstable_scheduleCallback,Ba=e.unstable_cancelCallback,Po=e.unstable_shouldYield,Ei=e.unstable_requestPaint,yt=e.unstable_now,Im=e.unstable_getCurrentPriorityLevel,$a=e.unstable_ImmediatePriority,Vu=e.unstable_UserBlockingPriority,So=e.unstable_NormalPriority,Ou=e.unstable_LowPriority,za=e.unstable_IdlePriority,Co=null,Gn=null;function eh(o){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Co,o,void 0,(o.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Ao,Ur=Math.log,ur=Math.LN2;function Ao(o){return o>>>=0,o===0?32:31-(Ur(o)/ur|0)|0}var jr=64,fs=4194304;function rt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ii(o,l){var c=o.pendingLanes;if(c===0)return 0;var p=0,y=o.suspendedLanes,_=o.pingedLanes,I=c&268435455;if(I!==0){var O=I&~y;O!==0?p=rt(O):(_&=I,_!==0&&(p=rt(_)))}else I=c&~y,I!==0?p=rt(I):_!==0&&(p=rt(_));if(p===0)return 0;if(l!==0&&l!==p&&(l&y)===0&&(y=p&-p,_=l&-l,y>=_||y===16&&(_&4194240)!==0))return l;if((p&4)!==0&&(p|=c&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)c=31-Kn(l),y=1<<c,p|=o[c],l&=~y;return p}function bo(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xo(o,l){for(var c=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes;0<_;){var I=31-Kn(_),O=1<<I,j=y[I];j===-1?((O&c)===0||(O&p)!==0)&&(y[I]=bo(O,l)):j<=l&&(o.expiredLanes|=O),_&=~O}}function Mu(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Lu(){var o=jr;return jr<<=1,(jr&4194240)===0&&(jr=64),o}function Fu(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Ro(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Kn(l),o[l]=c}function Pm(o,l){var c=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<c;){var y=31-Kn(c),_=1<<y;l[y]=0,p[y]=-1,o[y]=-1,c&=~_}}function Uu(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var p=31-Kn(c),y=1<<p;y&l|o[p]&l&&(o[p]|=l),c&=~y}}var Ke=0;function Br(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ju,Wa,Bu,$u,zu,$r=!1,Ha=[],zr=null,Wr=null,dn=null,ko=new Map,Pi=new Map,Qn=[],th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ps(o,l){switch(o){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":ko.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(l.pointerId)}}function Ir(o,l,c,p,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:c,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},l!==null&&(l=rc(l),l!==null&&Wa(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function nh(o,l,c,p,y){switch(l){case"focusin":return zr=Ir(zr,o,l,c,p,y),!0;case"dragenter":return Wr=Ir(Wr,o,l,c,p,y),!0;case"mouseover":return dn=Ir(dn,o,l,c,p,y),!0;case"pointerover":var _=y.pointerId;return ko.set(_,Ir(ko.get(_)||null,o,l,c,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Pi.set(_,Ir(Pi.get(_)||null,o,l,c,p,y)),!0}return!1}function qa(o){var l=Oo(o.target);if(l!==null){var c=Er(l);if(c!==null){if(l=c.tag,l===13){if(l=Du(c),l!==null){o.blockedOn=l,zu(o.priority,function(){Bu(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ht(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=Ga(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var p=new c.constructor(c.type,c);ls=p,c.target.dispatchEvent(p),ls=null}else return l=rc(c),l!==null&&Wa(l),o.blockedOn=c,!1;l.shift()}return!0}function rh(o,l,c){ht(o)&&c.delete(l)}function Sm(){$r=!1,zr!==null&&ht(zr)&&(zr=null),Wr!==null&&ht(Wr)&&(Wr=null),dn!==null&&ht(dn)&&(dn=null),ko.forEach(rh),Pi.forEach(rh)}function ms(o,l){o.blockedOn===l&&(o.blockedOn=null,$r||($r=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Sm)))}function gs(o){function l(y){return ms(y,o)}if(0<Ha.length){ms(Ha[0],o);for(var c=1;c<Ha.length;c++){var p=Ha[c];p.blockedOn===o&&(p.blockedOn=null)}}for(zr!==null&&ms(zr,o),Wr!==null&&ms(Wr,o),dn!==null&&ms(dn,o),ko.forEach(l),Pi.forEach(l),c=0;c<Qn.length;c++)p=Qn[c],p.blockedOn===o&&(p.blockedOn=null);for(;0<Qn.length&&(c=Qn[0],c.blockedOn===null);)qa(c),c.blockedOn===null&&Qn.shift()}var Si=z.ReactCurrentBatchConfig,Ci=!0;function Hr(o,l,c,p){var y=Ke,_=Si.transition;Si.transition=null;try{Ke=1,Wu(o,l,c,p)}finally{Ke=y,Si.transition=_}}function ih(o,l,c,p){var y=Ke,_=Si.transition;Si.transition=null;try{Ke=4,Wu(o,l,c,p)}finally{Ke=y,Si.transition=_}}function Wu(o,l,c,p){if(Ci){var y=Ga(o,l,c,p);if(y===null)Mm(o,l,p,qr,c),ps(o,p);else if(nh(y,o,l,c,p))p.stopPropagation();else if(ps(o,p),l&4&&-1<th.indexOf(o)){for(;y!==null;){var _=rc(y);if(_!==null&&ju(_),_=Ga(o,l,c,p),_===null&&Mm(o,l,p,qr,c),_===y)break;y=_}y!==null&&p.stopPropagation()}else Mm(o,l,p,null,c)}}var qr=null;function Ga(o,l,c,p){if(qr=null,o=Ua(p),o=Oo(o),o!==null)if(l=Er(o),l===null)o=null;else if(c=l.tag,c===13){if(o=Du(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return qr=o,null}function Ka(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Im()){case $a:return 1;case Vu:return 4;case So:case Ou:return 16;case za:return 536870912;default:return 16}default:return 16}}var Yn=null,Qa=null,Ai=null;function sh(){if(Ai)return Ai;var o,l=Qa,c=l.length,p,y="value"in Yn?Yn.value:Yn.textContent,_=y.length;for(o=0;o<c&&l[o]===y[o];o++);var I=c-o;for(p=1;p<=I&&l[c-p]===y[_-p];p++);return Ai=y.slice(o,1<p?1-p:void 0)}function Do(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Gr(){return!0}function Hu(){return!1}function yn(o){function l(c,p,y,_,I){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(c=o[O],this[O]=c?c(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Gr:Hu,this.isPropagationStopped=Hu,this}return ne(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),l}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=yn(Kr),ys=ne({},Kr,{view:0,detail:0}),Ya=yn(ys),Xa,Ja,Xn,Vo=ne({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fe,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Xn&&(Xn&&o.type==="mousemove"?(Xa=o.screenX-Xn.screenX,Ja=o.screenY-Xn.screenY):Ja=Xa=0,Xn=o),Xa)},movementY:function(o){return"movementY"in o?o.movementY:Ja}}),qu=yn(Vo),oh=ne({},Vo,{dataTransfer:0}),ah=yn(oh),Za=ne({},ys,{relatedTarget:0}),hn=yn(Za),lh=ne({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=yn(lh),vs=ne({},Kr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),f=yn(vs),w=ne({},Kr,{data:0}),T=yn(w),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=J[o])?!!l[o]:!1}function Fe(){return ge}var Lt=ne({},ys,{key:function(o){if(o.key){var l=A[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Do(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?q[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fe,charCode:function(o){return o.type==="keypress"?Do(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Do(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ot=yn(Lt),Wt=ne({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jn=yn(Wt),bi=ne({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fe}),Qr=yn(bi),Yr=ne({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),el=yn(Yr),Gu=ne({},Vo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),rk=yn(Gu),ik=[9,13,27,32],Cm=u&&"CompositionEvent"in window,Ku=null;u&&"documentMode"in document&&(Ku=document.documentMode);var sk=u&&"TextEvent"in window&&!Ku,Bw=u&&(!Cm||Ku&&8<Ku&&11>=Ku),$w=" ",zw=!1;function Ww(o,l){switch(o){case"keyup":return ik.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var tl=!1;function ok(o,l){switch(o){case"compositionend":return Hw(l);case"keypress":return l.which!==32?null:(zw=!0,$w);case"textInput":return o=l.data,o===$w&&zw?null:o;default:return null}}function ak(o,l){if(tl)return o==="compositionend"||!Cm&&Ww(o,l)?(o=sh(),Ai=Qa=Yn=null,tl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bw&&l.locale!=="ko"?null:l.data;default:return null}}var lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qw(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!lk[o.type]:l==="textarea"}function Gw(o,l,c,p){us(p),l=ph(l,"onChange"),0<l.length&&(c=new No("onChange","change",null,c,p),o.push({event:c,listeners:l}))}var Qu=null,Yu=null;function uk(o){dT(o,0)}function ch(o){var l=ol(o);if(ns(l))return o}function ck(o,l){if(o==="change")return l}var Kw=!1;if(u){var Am;if(u){var bm="oninput"in document;if(!bm){var Qw=document.createElement("div");Qw.setAttribute("oninput","return;"),bm=typeof Qw.oninput=="function"}Am=bm}else Am=!1;Kw=Am&&(!document.documentMode||9<document.documentMode)}function Yw(){Qu&&(Qu.detachEvent("onpropertychange",Xw),Yu=Qu=null)}function Xw(o){if(o.propertyName==="value"&&ch(Yu)){var l=[];Gw(l,Yu,o,Ua(o)),Gd(uk,l)}}function dk(o,l,c){o==="focusin"?(Yw(),Qu=l,Yu=c,Qu.attachEvent("onpropertychange",Xw)):o==="focusout"&&Yw()}function hk(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ch(Yu)}function fk(o,l){if(o==="click")return ch(l)}function pk(o,l){if(o==="input"||o==="change")return ch(l)}function mk(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Pr=typeof Object.is=="function"?Object.is:mk;function Xu(o,l){if(Pr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(l,y)||!Pr(o[y],l[y]))return!1}return!0}function Jw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Zw(o,l){var c=Jw(o);o=0;for(var p;c;){if(c.nodeType===3){if(p=o+c.textContent.length,o<=l&&p>=l)return{node:c,offset:l-o};o=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Jw(c)}}function eT(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?eT(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function tT(){for(var o=window,l=Or();l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=Or(o.document)}return l}function xm(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function gk(o){var l=tT(),c=o.focusedElem,p=o.selectionRange;if(l!==c&&c&&c.ownerDocument&&eT(c.ownerDocument.documentElement,c)){if(p!==null&&xm(c)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(o,c.value.length);else if(o=(l=c.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=c.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!o.extend&&_>p&&(y=p,p=_,_=y),y=Zw(c,_);var I=Zw(c,p);y&&I&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==I.node||o.focusOffset!==I.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),_>p?(o.addRange(l),o.extend(I.node,I.offset)):(l.setEnd(I.node,I.offset),o.addRange(l)))}}for(l=[],o=c;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)o=l[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var yk=u&&"documentMode"in document&&11>=document.documentMode,nl=null,Rm=null,Ju=null,km=!1;function nT(o,l,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;km||nl==null||nl!==Or(p)||(p=nl,"selectionStart"in p&&xm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ju&&Xu(Ju,p)||(Ju=p,p=ph(Rm,"onSelect"),0<p.length&&(l=new No("onSelect","select",null,l,c),o.push({event:l,listeners:p}),l.target=nl)))}function dh(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var rl={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Dm={},rT={};u&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function hh(o){if(Dm[o])return Dm[o];if(!rl[o])return o;var l=rl[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in rT)return Dm[o]=l[c];return o}var iT=hh("animationend"),sT=hh("animationiteration"),oT=hh("animationstart"),aT=hh("transitionend"),lT=new Map,uT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(o,l){lT.set(o,l),s(l,[o])}for(var Nm=0;Nm<uT.length;Nm++){var Vm=uT[Nm],vk=Vm.toLowerCase(),_k=Vm[0].toUpperCase()+Vm.slice(1);_s(vk,"on"+_k)}_s(iT,"onAnimationEnd"),_s(sT,"onAnimationIteration"),_s(oT,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(aT,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zu));function cT(o,l,c){var p=o.type||"unknown-event";o.currentTarget=c,ku(p,l,void 0,o),o.currentTarget=null}function dT(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var p=o[c],y=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var I=p.length-1;0<=I;I--){var O=p[I],j=O.instance,Q=O.currentTarget;if(O=O.listener,j!==_&&y.isPropagationStopped())break e;cT(y,O,Q),_=j}else for(I=0;I<p.length;I++){if(O=p[I],j=O.instance,Q=O.currentTarget,O=O.listener,j!==_&&y.isPropagationStopped())break e;cT(y,O,Q),_=j}}}if(ja)throw o=lr,ja=!1,lr=null,o}function vt(o,l){var c=l[$m];c===void 0&&(c=l[$m]=new Set);var p=o+"__bubble";c.has(p)||(hT(l,o,2,!1),c.add(p))}function Om(o,l,c){var p=0;l&&(p|=4),hT(c,o,p,l)}var fh="_reactListening"+Math.random().toString(36).slice(2);function ec(o){if(!o[fh]){o[fh]=!0,r.forEach(function(c){c!=="selectionchange"&&(wk.has(c)||Om(c,!1,o),Om(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[fh]||(l[fh]=!0,Om("selectionchange",!1,l))}}function hT(o,l,c,p){switch(Ka(l)){case 1:var y=Hr;break;case 4:y=ih;break;default:y=Wu}c=y.bind(null,l,c,o),y=void 0,!ds||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function Mm(o,l,c,p,y){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var O=p.stateNode.containerInfo;if(O===y||O.nodeType===8&&O.parentNode===y)break;if(I===4)for(I=p.return;I!==null;){var j=I.tag;if((j===3||j===4)&&(j=I.stateNode.containerInfo,j===y||j.nodeType===8&&j.parentNode===y))return;I=I.return}for(;O!==null;){if(I=Oo(O),I===null)return;if(j=I.tag,j===5||j===6){p=_=I;continue e}O=O.parentNode}}p=p.return}Gd(function(){var Q=_,ue=Ua(c),ce=[];e:{var ae=lT.get(o);if(ae!==void 0){var we=No,Pe=o;switch(o){case"keypress":if(Do(c)===0)break e;case"keydown":case"keyup":we=ot;break;case"focusin":Pe="focus",we=hn;break;case"focusout":Pe="blur",we=hn;break;case"beforeblur":case"afterblur":we=hn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Qr;break;case iT:case sT:case oT:we=uh;break;case aT:we=el;break;case"scroll":we=Ya;break;case"wheel":we=rk;break;case"copy":case"cut":case"paste":we=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Jn}var Ce=(l&4)!==0,Ft=!Ce&&o==="scroll",H=Ce?ae!==null?ae+"Capture":null:ae;Ce=[];for(var $=Q,G;$!==null;){G=$;var fe=G.stateNode;if(G.tag===5&&fe!==null&&(G=fe,H!==null&&(fe=Eo($,H),fe!=null&&Ce.push(tc($,fe,G)))),Ft)break;$=$.return}0<Ce.length&&(ae=new we(ae,Pe,null,c,ue),ce.push({event:ae,listeners:Ce}))}}if((l&7)===0){e:{if(ae=o==="mouseover"||o==="pointerover",we=o==="mouseout"||o==="pointerout",ae&&c!==ls&&(Pe=c.relatedTarget||c.fromElement)&&(Oo(Pe)||Pe[xi]))break e;if((we||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,we?(Pe=c.relatedTarget||c.toElement,we=Q,Pe=Pe?Oo(Pe):null,Pe!==null&&(Ft=Er(Pe),Pe!==Ft||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(we=null,Pe=Q),we!==Pe)){if(Ce=qu,fe="onMouseLeave",H="onMouseEnter",$="mouse",(o==="pointerout"||o==="pointerover")&&(Ce=Jn,fe="onPointerLeave",H="onPointerEnter",$="pointer"),Ft=we==null?ae:ol(we),G=Pe==null?ae:ol(Pe),ae=new Ce(fe,$+"leave",we,c,ue),ae.target=Ft,ae.relatedTarget=G,fe=null,Oo(ue)===Q&&(Ce=new Ce(H,$+"enter",Pe,c,ue),Ce.target=G,Ce.relatedTarget=Ft,fe=Ce),Ft=fe,we&&Pe)t:{for(Ce=we,H=Pe,$=0,G=Ce;G;G=il(G))$++;for(G=0,fe=H;fe;fe=il(fe))G++;for(;0<$-G;)Ce=il(Ce),$--;for(;0<G-$;)H=il(H),G--;for(;$--;){if(Ce===H||H!==null&&Ce===H.alternate)break t;Ce=il(Ce),H=il(H)}Ce=null}else Ce=null;we!==null&&fT(ce,ae,we,Ce,!1),Pe!==null&&Ft!==null&&fT(ce,Ft,Pe,Ce,!0)}}e:{if(ae=Q?ol(Q):window,we=ae.nodeName&&ae.nodeName.toLowerCase(),we==="select"||we==="input"&&ae.type==="file")var be=ck;else if(qw(ae))if(Kw)be=pk;else{be=hk;var De=dk}else(we=ae.nodeName)&&we.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(be=fk);if(be&&(be=be(o,Q))){Gw(ce,be,c,ue);break e}De&&De(o,ae,Q),o==="focusout"&&(De=ae._wrapperState)&&De.controlled&&ae.type==="number"&&St(ae,"number",ae.value)}switch(De=Q?ol(Q):window,o){case"focusin":(qw(De)||De.contentEditable==="true")&&(nl=De,Rm=Q,Ju=null);break;case"focusout":Ju=Rm=nl=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,nT(ce,c,ue);break;case"selectionchange":if(yk)break;case"keydown":case"keyup":nT(ce,c,ue)}var Ne;if(Cm)e:{switch(o){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else tl?Ww(o,c)&&(Oe="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(Bw&&c.locale!=="ko"&&(tl||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&tl&&(Ne=sh()):(Yn=ue,Qa="value"in Yn?Yn.value:Yn.textContent,tl=!0)),De=ph(Q,Oe),0<De.length&&(Oe=new T(Oe,o,null,c,ue),ce.push({event:Oe,listeners:De}),Ne?Oe.data=Ne:(Ne=Hw(c),Ne!==null&&(Oe.data=Ne)))),(Ne=sk?ok(o,c):ak(o,c))&&(Q=ph(Q,"onBeforeInput"),0<Q.length&&(ue=new T("onBeforeInput","beforeinput",null,c,ue),ce.push({event:ue,listeners:Q}),ue.data=Ne))}dT(ce,l)})}function tc(o,l,c){return{instance:o,listener:l,currentTarget:c}}function ph(o,l){for(var c=l+"Capture",p=[];o!==null;){var y=o,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=Eo(o,c),_!=null&&p.unshift(tc(o,_,y)),_=Eo(o,l),_!=null&&p.push(tc(o,_,y))),o=o.return}return p}function il(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function fT(o,l,c,p,y){for(var _=l._reactName,I=[];c!==null&&c!==p;){var O=c,j=O.alternate,Q=O.stateNode;if(j!==null&&j===p)break;O.tag===5&&Q!==null&&(O=Q,y?(j=Eo(c,_),j!=null&&I.unshift(tc(c,j,O))):y||(j=Eo(c,_),j!=null&&I.push(tc(c,j,O)))),c=c.return}I.length!==0&&o.push({event:l,listeners:I})}var Tk=/\r\n?/g,Ek=/\u0000|\uFFFD/g;function pT(o){return(typeof o=="string"?o:""+o).replace(Tk,`
`).replace(Ek,"")}function mh(o,l,c){if(l=pT(l),pT(o)!==l&&c)throw Error(t(425))}function gh(){}var Lm=null,Fm=null;function Um(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,Ik=typeof clearTimeout=="function"?clearTimeout:void 0,mT=typeof Promise=="function"?Promise:void 0,Pk=typeof queueMicrotask=="function"?queueMicrotask:typeof mT<"u"?function(o){return mT.resolve(null).then(o).catch(Sk)}:jm;function Sk(o){setTimeout(function(){throw o})}function Bm(o,l){var c=l,p=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){o.removeChild(y),gs(l);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);gs(l)}function ws(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function gT(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}var sl=Math.random().toString(36).slice(2),Xr="__reactFiber$"+sl,nc="__reactProps$"+sl,xi="__reactContainer$"+sl,$m="__reactEvents$"+sl,Ck="__reactListeners$"+sl,Ak="__reactHandles$"+sl;function Oo(o){var l=o[Xr];if(l)return l;for(var c=o.parentNode;c;){if(l=c[xi]||c[Xr]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=gT(o);o!==null;){if(c=o[Xr])return c;o=gT(o)}return l}o=c,c=o.parentNode}return null}function rc(o){return o=o[Xr]||o[xi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ol(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function yh(o){return o[nc]||null}var zm=[],al=-1;function Ts(o){return{current:o}}function _t(o){0>al||(o.current=zm[al],zm[al]=null,al--)}function ft(o,l){al++,zm[al]=o.current,o.current=l}var Es={},vn=Ts(Es),On=Ts(!1),Mo=Es;function ll(o,l){var c=o.type.contextTypes;if(!c)return Es;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in c)y[_]=l[_];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Mn(o){return o=o.childContextTypes,o!=null}function vh(){_t(On),_t(vn)}function yT(o,l,c){if(vn.current!==Es)throw Error(t(168));ft(vn,l),ft(On,c)}function vT(o,l,c){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in l))throw Error(t(108,Me(o)||"Unknown",y));return ne({},c,p)}function _h(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Es,Mo=vn.current,ft(vn,o),ft(On,On.current),!0}function _T(o,l,c){var p=o.stateNode;if(!p)throw Error(t(169));c?(o=vT(o,l,Mo),p.__reactInternalMemoizedMergedChildContext=o,_t(On),_t(vn),ft(vn,o)):_t(On),ft(On,c)}var Ri=null,wh=!1,Wm=!1;function wT(o){Ri===null?Ri=[o]:Ri.push(o)}function bk(o){wh=!0,wT(o)}function Is(){if(!Wm&&Ri!==null){Wm=!0;var o=0,l=Ke;try{var c=Ri;for(Ke=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}Ri=null,wh=!1}catch(y){throw Ri!==null&&(Ri=Ri.slice(o+1)),Nu($a,Is),y}finally{Ke=l,Wm=!1}}return null}var ul=[],cl=0,Th=null,Eh=0,cr=[],dr=0,Lo=null,ki=1,Di="";function Fo(o,l){ul[cl++]=Eh,ul[cl++]=Th,Th=o,Eh=l}function TT(o,l,c){cr[dr++]=ki,cr[dr++]=Di,cr[dr++]=Lo,Lo=o;var p=ki;o=Di;var y=32-Kn(p)-1;p&=~(1<<y),c+=1;var _=32-Kn(l)+y;if(30<_){var I=y-y%5;_=(p&(1<<I)-1).toString(32),p>>=I,y-=I,ki=1<<32-Kn(l)+y|c<<y|p,Di=_+o}else ki=1<<_|c<<y|p,Di=o}function Hm(o){o.return!==null&&(Fo(o,1),TT(o,1,0))}function qm(o){for(;o===Th;)Th=ul[--cl],ul[cl]=null,Eh=ul[--cl],ul[cl]=null;for(;o===Lo;)Lo=cr[--dr],cr[dr]=null,Di=cr[--dr],cr[dr]=null,ki=cr[--dr],cr[dr]=null}var Zn=null,er=null,Et=!1,Sr=null;function ET(o,l){var c=mr(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,l=o.deletions,l===null?(o.deletions=[c],o.flags|=16):l.push(c)}function IT(o,l){switch(o.tag){case 5:var c=o.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Zn=o,er=ws(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Zn=o,er=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Lo!==null?{id:ki,overflow:Di}:null,o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=mr(18,null,null,0),c.stateNode=l,c.return=o,o.child=c,Zn=o,er=null,!0):!1;default:return!1}}function Gm(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Km(o){if(Et){var l=er;if(l){var c=l;if(!IT(o,l)){if(Gm(o))throw Error(t(418));l=ws(c.nextSibling);var p=Zn;l&&IT(o,l)?ET(p,c):(o.flags=o.flags&-4097|2,Et=!1,Zn=o)}}else{if(Gm(o))throw Error(t(418));o.flags=o.flags&-4097|2,Et=!1,Zn=o}}}function PT(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Zn=o}function Ih(o){if(o!==Zn)return!1;if(!Et)return PT(o),Et=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Um(o.type,o.memoizedProps)),l&&(l=er)){if(Gm(o))throw ST(),Error(t(418));for(;l;)ET(o,l),l=ws(l.nextSibling)}if(PT(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(l===0){er=ws(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}o=o.nextSibling}er=null}}else er=Zn?ws(o.stateNode.nextSibling):null;return!0}function ST(){for(var o=er;o;)o=ws(o.nextSibling)}function dl(){er=Zn=null,Et=!1}function Qm(o){Sr===null?Sr=[o]:Sr.push(o)}var xk=z.ReactCurrentBatchConfig;function ic(o,l,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,o));var y=p,_=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(I){var O=y.refs;I===null?delete O[_]:O[_]=I},l._stringRef=_,l)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function Ph(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function CT(o){var l=o._init;return l(o._payload)}function AT(o){function l(H,$){if(o){var G=H.deletions;G===null?(H.deletions=[$],H.flags|=16):G.push($)}}function c(H,$){if(!o)return null;for(;$!==null;)l(H,$),$=$.sibling;return null}function p(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function y(H,$){return H=ks(H,$),H.index=0,H.sibling=null,H}function _(H,$,G){return H.index=G,o?(G=H.alternate,G!==null?(G=G.index,G<$?(H.flags|=2,$):G):(H.flags|=2,$)):(H.flags|=1048576,$)}function I(H){return o&&H.alternate===null&&(H.flags|=2),H}function O(H,$,G,fe){return $===null||$.tag!==6?($=jg(G,H.mode,fe),$.return=H,$):($=y($,G),$.return=H,$)}function j(H,$,G,fe){var be=G.type;return be===x?ue(H,$,G.props.children,fe,G.key):$!==null&&($.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===re&&CT(be)===$.type)?(fe=y($,G.props),fe.ref=ic(H,$,G),fe.return=H,fe):(fe=Kh(G.type,G.key,G.props,null,H.mode,fe),fe.ref=ic(H,$,G),fe.return=H,fe)}function Q(H,$,G,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=Bg(G,H.mode,fe),$.return=H,$):($=y($,G.children||[]),$.return=H,$)}function ue(H,$,G,fe,be){return $===null||$.tag!==7?($=qo(G,H.mode,fe,be),$.return=H,$):($=y($,G),$.return=H,$)}function ce(H,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return $=jg(""+$,H.mode,G),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case te:return G=Kh($.type,$.key,$.props,null,H.mode,G),G.ref=ic(H,null,$),G.return=H,G;case Z:return $=Bg($,H.mode,G),$.return=H,$;case re:var fe=$._init;return ce(H,fe($._payload),G)}if($e($)||de($))return $=qo($,H.mode,G,null),$.return=H,$;Ph(H,$)}return null}function ae(H,$,G,fe){var be=$!==null?$.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return be!==null?null:O(H,$,""+G,fe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case te:return G.key===be?j(H,$,G,fe):null;case Z:return G.key===be?Q(H,$,G,fe):null;case re:return be=G._init,ae(H,$,be(G._payload),fe)}if($e(G)||de(G))return be!==null?null:ue(H,$,G,fe,null);Ph(H,G)}return null}function we(H,$,G,fe,be){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return H=H.get(G)||null,O($,H,""+fe,be);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case te:return H=H.get(fe.key===null?G:fe.key)||null,j($,H,fe,be);case Z:return H=H.get(fe.key===null?G:fe.key)||null,Q($,H,fe,be);case re:var De=fe._init;return we(H,$,G,De(fe._payload),be)}if($e(fe)||de(fe))return H=H.get(G)||null,ue($,H,fe,be,null);Ph($,fe)}return null}function Pe(H,$,G,fe){for(var be=null,De=null,Ne=$,Oe=$=0,an=null;Ne!==null&&Oe<G.length;Oe++){Ne.index>Oe?(an=Ne,Ne=null):an=Ne.sibling;var nt=ae(H,Ne,G[Oe],fe);if(nt===null){Ne===null&&(Ne=an);break}o&&Ne&&nt.alternate===null&&l(H,Ne),$=_(nt,$,Oe),De===null?be=nt:De.sibling=nt,De=nt,Ne=an}if(Oe===G.length)return c(H,Ne),Et&&Fo(H,Oe),be;if(Ne===null){for(;Oe<G.length;Oe++)Ne=ce(H,G[Oe],fe),Ne!==null&&($=_(Ne,$,Oe),De===null?be=Ne:De.sibling=Ne,De=Ne);return Et&&Fo(H,Oe),be}for(Ne=p(H,Ne);Oe<G.length;Oe++)an=we(Ne,H,Oe,G[Oe],fe),an!==null&&(o&&an.alternate!==null&&Ne.delete(an.key===null?Oe:an.key),$=_(an,$,Oe),De===null?be=an:De.sibling=an,De=an);return o&&Ne.forEach(function(Ds){return l(H,Ds)}),Et&&Fo(H,Oe),be}function Ce(H,$,G,fe){var be=de(G);if(typeof be!="function")throw Error(t(150));if(G=be.call(G),G==null)throw Error(t(151));for(var De=be=null,Ne=$,Oe=$=0,an=null,nt=G.next();Ne!==null&&!nt.done;Oe++,nt=G.next()){Ne.index>Oe?(an=Ne,Ne=null):an=Ne.sibling;var Ds=ae(H,Ne,nt.value,fe);if(Ds===null){Ne===null&&(Ne=an);break}o&&Ne&&Ds.alternate===null&&l(H,Ne),$=_(Ds,$,Oe),De===null?be=Ds:De.sibling=Ds,De=Ds,Ne=an}if(nt.done)return c(H,Ne),Et&&Fo(H,Oe),be;if(Ne===null){for(;!nt.done;Oe++,nt=G.next())nt=ce(H,nt.value,fe),nt!==null&&($=_(nt,$,Oe),De===null?be=nt:De.sibling=nt,De=nt);return Et&&Fo(H,Oe),be}for(Ne=p(H,Ne);!nt.done;Oe++,nt=G.next())nt=we(Ne,H,Oe,nt.value,fe),nt!==null&&(o&&nt.alternate!==null&&Ne.delete(nt.key===null?Oe:nt.key),$=_(nt,$,Oe),De===null?be=nt:De.sibling=nt,De=nt);return o&&Ne.forEach(function(lD){return l(H,lD)}),Et&&Fo(H,Oe),be}function Ft(H,$,G,fe){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case te:e:{for(var be=G.key,De=$;De!==null;){if(De.key===be){if(be=G.type,be===x){if(De.tag===7){c(H,De.sibling),$=y(De,G.props.children),$.return=H,H=$;break e}}else if(De.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===re&&CT(be)===De.type){c(H,De.sibling),$=y(De,G.props),$.ref=ic(H,De,G),$.return=H,H=$;break e}c(H,De);break}else l(H,De);De=De.sibling}G.type===x?($=qo(G.props.children,H.mode,fe,G.key),$.return=H,H=$):(fe=Kh(G.type,G.key,G.props,null,H.mode,fe),fe.ref=ic(H,$,G),fe.return=H,H=fe)}return I(H);case Z:e:{for(De=G.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){c(H,$.sibling),$=y($,G.children||[]),$.return=H,H=$;break e}else{c(H,$);break}else l(H,$);$=$.sibling}$=Bg(G,H.mode,fe),$.return=H,H=$}return I(H);case re:return De=G._init,Ft(H,$,De(G._payload),fe)}if($e(G))return Pe(H,$,G,fe);if(de(G))return Ce(H,$,G,fe);Ph(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,$!==null&&$.tag===6?(c(H,$.sibling),$=y($,G),$.return=H,H=$):(c(H,$),$=jg(G,H.mode,fe),$.return=H,H=$),I(H)):c(H,$)}return Ft}var hl=AT(!0),bT=AT(!1),Sh=Ts(null),Ch=null,fl=null,Ym=null;function Xm(){Ym=fl=Ch=null}function Jm(o){var l=Sh.current;_t(Sh),o._currentValue=l}function Zm(o,l,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===c)break;o=o.return}}function pl(o,l){Ch=o,Ym=fl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Ln=!0),o.firstContext=null)}function hr(o){var l=o._currentValue;if(Ym!==o)if(o={context:o,memoizedValue:l,next:null},fl===null){if(Ch===null)throw Error(t(308));fl=o,Ch.dependencies={lanes:0,firstContext:o}}else fl=fl.next=o;return l}var Uo=null;function eg(o){Uo===null?Uo=[o]:Uo.push(o)}function xT(o,l,c,p){var y=l.interleaved;return y===null?(c.next=c,eg(l)):(c.next=y.next,y.next=c),l.interleaved=c,Ni(o,p)}function Ni(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,c=o.alternate,c!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var Ps=!1;function tg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RT(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Vi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Ss(o,l,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Ze&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,Ni(o,c)}return y=p.interleaved,y===null?(l.next=l,eg(p)):(l.next=y.next,y.next=l),p.interleaved=l,Ni(o,c)}function Ah(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Uu(o,c)}}function kT(o,l){var c=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var I={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?y=_=I:_=_.next=I,c=c.next}while(c!==null);_===null?y=_=l:_=_.next=l}else y=_=l;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function bh(o,l,c,p){var y=o.updateQueue;Ps=!1;var _=y.firstBaseUpdate,I=y.lastBaseUpdate,O=y.shared.pending;if(O!==null){y.shared.pending=null;var j=O,Q=j.next;j.next=null,I===null?_=Q:I.next=Q,I=j;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,O=ue.lastBaseUpdate,O!==I&&(O===null?ue.firstBaseUpdate=Q:O.next=Q,ue.lastBaseUpdate=j))}if(_!==null){var ce=y.baseState;I=0,ue=Q=j=null,O=_;do{var ae=O.lane,we=O.eventTime;if((p&ae)===ae){ue!==null&&(ue=ue.next={eventTime:we,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Pe=o,Ce=O;switch(ae=l,we=c,Ce.tag){case 1:if(Pe=Ce.payload,typeof Pe=="function"){ce=Pe.call(we,ce,ae);break e}ce=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ce.payload,ae=typeof Pe=="function"?Pe.call(we,ce,ae):Pe,ae==null)break e;ce=ne({},ce,ae);break e;case 2:Ps=!0}}O.callback!==null&&O.lane!==0&&(o.flags|=64,ae=y.effects,ae===null?y.effects=[O]:ae.push(O))}else we={eventTime:we,lane:ae,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ue===null?(Q=ue=we,j=ce):ue=ue.next=we,I|=ae;if(O=O.next,O===null){if(O=y.shared.pending,O===null)break;ae=O,O=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(ue===null&&(j=ce),y.baseState=j,y.firstBaseUpdate=Q,y.lastBaseUpdate=ue,l=y.shared.interleaved,l!==null){y=l;do I|=y.lane,y=y.next;while(y!==l)}else _===null&&(y.shared.lanes=0);$o|=I,o.lanes=I,o.memoizedState=ce}}function DT(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var sc={},Jr=Ts(sc),oc=Ts(sc),ac=Ts(sc);function jo(o){if(o===sc)throw Error(t(174));return o}function ng(o,l){switch(ft(ac,l),ft(oc,o),ft(Jr,sc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ma(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Ma(l,o)}_t(Jr),ft(Jr,l)}function ml(){_t(Jr),_t(oc),_t(ac)}function NT(o){jo(ac.current);var l=jo(Jr.current),c=Ma(l,o.type);l!==c&&(ft(oc,o),ft(Jr,c))}function rg(o){oc.current===o&&(_t(Jr),_t(oc))}var Ct=Ts(0);function xh(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ig=[];function sg(){for(var o=0;o<ig.length;o++)ig[o]._workInProgressVersionPrimary=null;ig.length=0}var Rh=z.ReactCurrentDispatcher,og=z.ReactCurrentBatchConfig,Bo=0,At=null,Jt=null,sn=null,kh=!1,lc=!1,uc=0,Rk=0;function _n(){throw Error(t(321))}function ag(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!Pr(o[c],l[c]))return!1;return!0}function lg(o,l,c,p,y,_){if(Bo=_,At=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Rh.current=o===null||o.memoizedState===null?Vk:Ok,o=c(p,y),lc){_=0;do{if(lc=!1,uc=0,25<=_)throw Error(t(301));_+=1,sn=Jt=null,l.updateQueue=null,Rh.current=Mk,o=c(p,y)}while(lc)}if(Rh.current=Vh,l=Jt!==null&&Jt.next!==null,Bo=0,sn=Jt=At=null,kh=!1,l)throw Error(t(300));return o}function ug(){var o=uc!==0;return uc=0,o}function Zr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?At.memoizedState=sn=o:sn=sn.next=o,sn}function fr(){if(Jt===null){var o=At.alternate;o=o!==null?o.memoizedState:null}else o=Jt.next;var l=sn===null?At.memoizedState:sn.next;if(l!==null)sn=l,Jt=o;else{if(o===null)throw Error(t(310));Jt=o,o={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},sn===null?At.memoizedState=sn=o:sn=sn.next=o}return sn}function cc(o,l){return typeof l=="function"?l(o):l}function cg(o){var l=fr(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=Jt,y=p.baseQueue,_=c.pending;if(_!==null){if(y!==null){var I=y.next;y.next=_.next,_.next=I}p.baseQueue=y=_,c.pending=null}if(y!==null){_=y.next,p=p.baseState;var O=I=null,j=null,Q=_;do{var ue=Q.lane;if((Bo&ue)===ue)j!==null&&(j=j.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),p=Q.hasEagerState?Q.eagerState:o(p,Q.action);else{var ce={lane:ue,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};j===null?(O=j=ce,I=p):j=j.next=ce,At.lanes|=ue,$o|=ue}Q=Q.next}while(Q!==null&&Q!==_);j===null?I=p:j.next=O,Pr(p,l.memoizedState)||(Ln=!0),l.memoizedState=p,l.baseState=I,l.baseQueue=j,c.lastRenderedState=p}if(o=c.interleaved,o!==null){y=o;do _=y.lane,At.lanes|=_,$o|=_,y=y.next;while(y!==o)}else y===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function dg(o){var l=fr(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=c.dispatch,y=c.pending,_=l.memoizedState;if(y!==null){c.pending=null;var I=y=y.next;do _=o(_,I.action),I=I.next;while(I!==y);Pr(_,l.memoizedState)||(Ln=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),c.lastRenderedState=_}return[_,p]}function VT(){}function OT(o,l){var c=At,p=fr(),y=l(),_=!Pr(p.memoizedState,y);if(_&&(p.memoizedState=y,Ln=!0),p=p.queue,hg(FT.bind(null,c,p,o),[o]),p.getSnapshot!==l||_||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,dc(9,LT.bind(null,c,p,y,l),void 0,null),on===null)throw Error(t(349));(Bo&30)!==0||MT(c,l,y)}return y}function MT(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=At.updateQueue,l===null?(l={lastEffect:null,stores:null},At.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function LT(o,l,c,p){l.value=c,l.getSnapshot=p,UT(l)&&jT(o)}function FT(o,l,c){return c(function(){UT(l)&&jT(o)})}function UT(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!Pr(o,c)}catch{return!0}}function jT(o){var l=Ni(o,1);l!==null&&xr(l,o,1,-1)}function BT(o){var l=Zr();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:o},l.queue=o,o=o.dispatch=Nk.bind(null,At,o),[l.memoizedState,o]}function dc(o,l,c,p){return o={tag:o,create:l,destroy:c,deps:p,next:null},l=At.updateQueue,l===null?(l={lastEffect:null,stores:null},At.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect,c===null?l.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,l.lastEffect=o)),o}function $T(){return fr().memoizedState}function Dh(o,l,c,p){var y=Zr();At.flags|=o,y.memoizedState=dc(1|l,c,void 0,p===void 0?null:p)}function Nh(o,l,c,p){var y=fr();p=p===void 0?null:p;var _=void 0;if(Jt!==null){var I=Jt.memoizedState;if(_=I.destroy,p!==null&&ag(p,I.deps)){y.memoizedState=dc(l,c,_,p);return}}At.flags|=o,y.memoizedState=dc(1|l,c,_,p)}function zT(o,l){return Dh(8390656,8,o,l)}function hg(o,l){return Nh(2048,8,o,l)}function WT(o,l){return Nh(4,2,o,l)}function HT(o,l){return Nh(4,4,o,l)}function qT(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function GT(o,l,c){return c=c!=null?c.concat([o]):null,Nh(4,4,qT.bind(null,l,o),c)}function fg(){}function KT(o,l){var c=fr();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&ag(l,p[1])?p[0]:(c.memoizedState=[o,l],o)}function QT(o,l){var c=fr();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&ag(l,p[1])?p[0]:(o=o(),c.memoizedState=[o,l],o)}function YT(o,l,c){return(Bo&21)===0?(o.baseState&&(o.baseState=!1,Ln=!0),o.memoizedState=c):(Pr(c,l)||(c=Lu(),At.lanes|=c,$o|=c,o.baseState=!0),l)}function kk(o,l){var c=Ke;Ke=c!==0&&4>c?c:4,o(!0);var p=og.transition;og.transition={};try{o(!1),l()}finally{Ke=c,og.transition=p}}function XT(){return fr().memoizedState}function Dk(o,l,c){var p=xs(o);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},JT(o))ZT(l,c);else if(c=xT(o,l,c,p),c!==null){var y=Rn();xr(c,o,p,y),e0(c,l,p)}}function Nk(o,l,c){var p=xs(o),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(JT(o))ZT(l,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var I=l.lastRenderedState,O=_(I,c);if(y.hasEagerState=!0,y.eagerState=O,Pr(O,I)){var j=l.interleaved;j===null?(y.next=y,eg(l)):(y.next=j.next,j.next=y),l.interleaved=y;return}}catch{}c=xT(o,l,y,p),c!==null&&(y=Rn(),xr(c,o,p,y),e0(c,l,p))}}function JT(o){var l=o.alternate;return o===At||l!==null&&l===At}function ZT(o,l){lc=kh=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function e0(o,l,c){if((c&4194240)!==0){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Uu(o,c)}}var Vh={readContext:hr,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},Vk={readContext:hr,useCallback:function(o,l){return Zr().memoizedState=[o,l===void 0?null:l],o},useContext:hr,useEffect:zT,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,Dh(4194308,4,qT.bind(null,l,o),c)},useLayoutEffect:function(o,l){return Dh(4194308,4,o,l)},useInsertionEffect:function(o,l){return Dh(4,2,o,l)},useMemo:function(o,l){var c=Zr();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var p=Zr();return l=c!==void 0?c(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=Dk.bind(null,At,o),[p.memoizedState,o]},useRef:function(o){var l=Zr();return o={current:o},l.memoizedState=o},useState:BT,useDebugValue:fg,useDeferredValue:function(o){return Zr().memoizedState=o},useTransition:function(){var o=BT(!1),l=o[0];return o=kk.bind(null,o[1]),Zr().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var p=At,y=Zr();if(Et){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),on===null)throw Error(t(349));(Bo&30)!==0||MT(p,l,c)}y.memoizedState=c;var _={value:c,getSnapshot:l};return y.queue=_,zT(FT.bind(null,p,_,o),[o]),p.flags|=2048,dc(9,LT.bind(null,p,_,c,l),void 0,null),c},useId:function(){var o=Zr(),l=on.identifierPrefix;if(Et){var c=Di,p=ki;c=(p&~(1<<32-Kn(p)-1)).toString(32)+c,l=":"+l+"R"+c,c=uc++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=Rk++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},Ok={readContext:hr,useCallback:KT,useContext:hr,useEffect:hg,useImperativeHandle:GT,useInsertionEffect:WT,useLayoutEffect:HT,useMemo:QT,useReducer:cg,useRef:$T,useState:function(){return cg(cc)},useDebugValue:fg,useDeferredValue:function(o){var l=fr();return YT(l,Jt.memoizedState,o)},useTransition:function(){var o=cg(cc)[0],l=fr().memoizedState;return[o,l]},useMutableSource:VT,useSyncExternalStore:OT,useId:XT,unstable_isNewReconciler:!1},Mk={readContext:hr,useCallback:KT,useContext:hr,useEffect:hg,useImperativeHandle:GT,useInsertionEffect:WT,useLayoutEffect:HT,useMemo:QT,useReducer:dg,useRef:$T,useState:function(){return dg(cc)},useDebugValue:fg,useDeferredValue:function(o){var l=fr();return Jt===null?l.memoizedState=o:YT(l,Jt.memoizedState,o)},useTransition:function(){var o=dg(cc)[0],l=fr().memoizedState;return[o,l]},useMutableSource:VT,useSyncExternalStore:OT,useId:XT,unstable_isNewReconciler:!1};function Cr(o,l){if(o&&o.defaultProps){l=ne({},l),o=o.defaultProps;for(var c in o)l[c]===void 0&&(l[c]=o[c]);return l}return l}function pg(o,l,c,p){l=o.memoizedState,c=c(p,l),c=c==null?l:ne({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Oh={isMounted:function(o){return(o=o._reactInternals)?Er(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var p=Rn(),y=xs(o),_=Vi(p,y);_.payload=l,c!=null&&(_.callback=c),l=Ss(o,_,y),l!==null&&(xr(l,o,y,p),Ah(l,o,y))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var p=Rn(),y=xs(o),_=Vi(p,y);_.tag=1,_.payload=l,c!=null&&(_.callback=c),l=Ss(o,_,y),l!==null&&(xr(l,o,y,p),Ah(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=Rn(),p=xs(o),y=Vi(c,p);y.tag=2,l!=null&&(y.callback=l),l=Ss(o,y,p),l!==null&&(xr(l,o,p,c),Ah(l,o,p))}};function t0(o,l,c,p,y,_,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,_,I):l.prototype&&l.prototype.isPureReactComponent?!Xu(c,p)||!Xu(y,_):!0}function n0(o,l,c){var p=!1,y=Es,_=l.contextType;return typeof _=="object"&&_!==null?_=hr(_):(y=Mn(l)?Mo:vn.current,p=l.contextTypes,_=(p=p!=null)?ll(o,y):Es),l=new l(c,_),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Oh,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=_),l}function r0(o,l,c,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==o&&Oh.enqueueReplaceState(l,l.state,null)}function mg(o,l,c,p){var y=o.stateNode;y.props=c,y.state=o.memoizedState,y.refs={},tg(o);var _=l.contextType;typeof _=="object"&&_!==null?y.context=hr(_):(_=Mn(l)?Mo:vn.current,y.context=ll(o,_)),y.state=o.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(pg(o,l,_,c),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&Oh.enqueueReplaceState(y,y.state,null),bh(o,c,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function gl(o,l){try{var c="",p=l;do c+=me(p),p=p.return;while(p);var y=c}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:l,stack:y,digest:null}}function gg(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function yg(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var Lk=typeof WeakMap=="function"?WeakMap:Map;function i0(o,l,c){c=Vi(-1,c),c.tag=3,c.payload={element:null};var p=l.value;return c.callback=function(){$h||($h=!0,Dg=p),yg(o,l)},c}function s0(o,l,c){c=Vi(-1,c),c.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;c.payload=function(){return p(y)},c.callback=function(){yg(o,l)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){yg(o,l),typeof p!="function"&&(As===null?As=new Set([this]):As.add(this));var I=l.stack;this.componentDidCatch(l.value,{componentStack:I!==null?I:""})}),c}function o0(o,l,c){var p=o.pingCache;if(p===null){p=o.pingCache=new Lk;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(c)||(y.add(c),o=Xk.bind(null,o,l,c),l.then(o,o))}function a0(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function l0(o,l,c,p,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=Vi(-1,1),l.tag=2,Ss(c,l,1))),c.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var Fk=z.ReactCurrentOwner,Ln=!1;function xn(o,l,c,p){l.child=o===null?bT(l,null,c,p):hl(l,o.child,c,p)}function u0(o,l,c,p,y){c=c.render;var _=l.ref;return pl(l,y),p=lg(o,l,c,p,_,y),c=ug(),o!==null&&!Ln?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Oi(o,l,y)):(Et&&c&&Hm(l),l.flags|=1,xn(o,l,p,y),l.child)}function c0(o,l,c,p,y){if(o===null){var _=c.type;return typeof _=="function"&&!Ug(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=_,d0(o,l,_,p,y)):(o=Kh(c.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,(o.lanes&y)===0){var I=_.memoizedProps;if(c=c.compare,c=c!==null?c:Xu,c(I,p)&&o.ref===l.ref)return Oi(o,l,y)}return l.flags|=1,o=ks(_,p),o.ref=l.ref,o.return=l,l.child=o}function d0(o,l,c,p,y){if(o!==null){var _=o.memoizedProps;if(Xu(_,p)&&o.ref===l.ref)if(Ln=!1,l.pendingProps=p=_,(o.lanes&y)!==0)(o.flags&131072)!==0&&(Ln=!0);else return l.lanes=o.lanes,Oi(o,l,y)}return vg(o,l,c,p,y)}function h0(o,l,c){var p=l.pendingProps,y=p.children,_=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(vl,tr),tr|=c;else{if((c&1073741824)===0)return o=_!==null?_.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,ft(vl,tr),tr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:c,ft(vl,tr),tr|=p}else _!==null?(p=_.baseLanes|c,l.memoizedState=null):p=c,ft(vl,tr),tr|=p;return xn(o,l,y,c),l.child}function f0(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function vg(o,l,c,p,y){var _=Mn(c)?Mo:vn.current;return _=ll(l,_),pl(l,y),c=lg(o,l,c,p,_,y),p=ug(),o!==null&&!Ln?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Oi(o,l,y)):(Et&&p&&Hm(l),l.flags|=1,xn(o,l,c,y),l.child)}function p0(o,l,c,p,y){if(Mn(c)){var _=!0;_h(l)}else _=!1;if(pl(l,y),l.stateNode===null)Lh(o,l),n0(l,c,p),mg(l,c,p,y),p=!0;else if(o===null){var I=l.stateNode,O=l.memoizedProps;I.props=O;var j=I.context,Q=c.contextType;typeof Q=="object"&&Q!==null?Q=hr(Q):(Q=Mn(c)?Mo:vn.current,Q=ll(l,Q));var ue=c.getDerivedStateFromProps,ce=typeof ue=="function"||typeof I.getSnapshotBeforeUpdate=="function";ce||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(O!==p||j!==Q)&&r0(l,I,p,Q),Ps=!1;var ae=l.memoizedState;I.state=ae,bh(l,p,I,y),j=l.memoizedState,O!==p||ae!==j||On.current||Ps?(typeof ue=="function"&&(pg(l,c,ue,p),j=l.memoizedState),(O=Ps||t0(l,c,O,p,ae,j,Q))?(ce||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(l.flags|=4194308)):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=j),I.props=p,I.state=j,I.context=Q,p=O):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{I=l.stateNode,RT(o,l),O=l.memoizedProps,Q=l.type===l.elementType?O:Cr(l.type,O),I.props=Q,ce=l.pendingProps,ae=I.context,j=c.contextType,typeof j=="object"&&j!==null?j=hr(j):(j=Mn(c)?Mo:vn.current,j=ll(l,j));var we=c.getDerivedStateFromProps;(ue=typeof we=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(O!==ce||ae!==j)&&r0(l,I,p,j),Ps=!1,ae=l.memoizedState,I.state=ae,bh(l,p,I,y);var Pe=l.memoizedState;O!==ce||ae!==Pe||On.current||Ps?(typeof we=="function"&&(pg(l,c,we,p),Pe=l.memoizedState),(Q=Ps||t0(l,c,Q,p,ae,Pe,j)||!1)?(ue||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,Pe,j),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,Pe,j)),typeof I.componentDidUpdate=="function"&&(l.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof I.componentDidUpdate!="function"||O===o.memoizedProps&&ae===o.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&ae===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Pe),I.props=p,I.state=Pe,I.context=j,p=Q):(typeof I.componentDidUpdate!="function"||O===o.memoizedProps&&ae===o.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&ae===o.memoizedState||(l.flags|=1024),p=!1)}return _g(o,l,c,p,_,y)}function _g(o,l,c,p,y,_){f0(o,l);var I=(l.flags&128)!==0;if(!p&&!I)return y&&_T(l,c,!1),Oi(o,l,_);p=l.stateNode,Fk.current=l;var O=I&&typeof c.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&I?(l.child=hl(l,o.child,null,_),l.child=hl(l,null,O,_)):xn(o,l,O,_),l.memoizedState=p.state,y&&_T(l,c,!0),l.child}function m0(o){var l=o.stateNode;l.pendingContext?yT(o,l.pendingContext,l.pendingContext!==l.context):l.context&&yT(o,l.context,!1),ng(o,l.containerInfo)}function g0(o,l,c,p,y){return dl(),Qm(y),l.flags|=256,xn(o,l,c,p),l.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function Tg(o){return{baseLanes:o,cachePool:null,transitions:null}}function y0(o,l,c){var p=l.pendingProps,y=Ct.current,_=!1,I=(l.flags&128)!==0,O;if((O=I)||(O=o!==null&&o.memoizedState===null?!1:(y&2)!==0),O?(_=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),ft(Ct,y&1),o===null)return Km(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(I=p.children,o=p.fallback,_?(p=l.mode,_=l.child,I={mode:"hidden",children:I},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=I):_=Qh(I,p,0,null),o=qo(o,p,c,null),_.return=l,o.return=l,_.sibling=o,l.child=_,l.child.memoizedState=Tg(c),l.memoizedState=wg,o):Eg(l,I));if(y=o.memoizedState,y!==null&&(O=y.dehydrated,O!==null))return Uk(o,l,I,p,O,y,c);if(_){_=p.fallback,I=l.mode,y=o.child,O=y.sibling;var j={mode:"hidden",children:p.children};return(I&1)===0&&l.child!==y?(p=l.child,p.childLanes=0,p.pendingProps=j,l.deletions=null):(p=ks(y,j),p.subtreeFlags=y.subtreeFlags&14680064),O!==null?_=ks(O,_):(_=qo(_,I,c,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,I=o.child.memoizedState,I=I===null?Tg(c):{baseLanes:I.baseLanes|c,cachePool:null,transitions:I.transitions},_.memoizedState=I,_.childLanes=o.childLanes&~c,l.memoizedState=wg,p}return _=o.child,o=_.sibling,p=ks(_,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=c),p.return=l,p.sibling=null,o!==null&&(c=l.deletions,c===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=p,l.memoizedState=null,p}function Eg(o,l){return l=Qh({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Mh(o,l,c,p){return p!==null&&Qm(p),hl(l,o.child,null,c),o=Eg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Uk(o,l,c,p,y,_,I){if(c)return l.flags&256?(l.flags&=-257,p=gg(Error(t(422))),Mh(o,l,I,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(_=p.fallback,y=l.mode,p=Qh({mode:"visible",children:p.children},y,0,null),_=qo(_,y,I,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,(l.mode&1)!==0&&hl(l,o.child,null,I),l.child.memoizedState=Tg(I),l.memoizedState=wg,_);if((l.mode&1)===0)return Mh(o,l,I,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var O=p.dgst;return p=O,_=Error(t(419)),p=gg(_,p,void 0),Mh(o,l,I,p)}if(O=(I&o.childLanes)!==0,Ln||O){if(p=on,p!==null){switch(I&-I){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|I))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,Ni(o,y),xr(p,o,y,-1))}return Fg(),p=gg(Error(t(421))),Mh(o,l,I,p)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=Jk.bind(null,o),y._reactRetry=l,null):(o=_.treeContext,er=ws(y.nextSibling),Zn=l,Et=!0,Sr=null,o!==null&&(cr[dr++]=ki,cr[dr++]=Di,cr[dr++]=Lo,ki=o.id,Di=o.overflow,Lo=l),l=Eg(l,p.children),l.flags|=4096,l)}function v0(o,l,c){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),Zm(o.return,l,c)}function Ig(o,l,c,p,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=c,_.tailMode=y)}function _0(o,l,c){var p=l.pendingProps,y=p.revealOrder,_=p.tail;if(xn(o,l,p.children,c),p=Ct.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&v0(o,c,l);else if(o.tag===19)v0(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(ft(Ct,p),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&xh(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),Ig(l,!1,y,c,_);break;case"backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&xh(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}Ig(l,!0,c,null,_);break;case"together":Ig(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Lh(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Oi(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),$o|=l.lanes,(c&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,c=ks(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=ks(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function jk(o,l,c){switch(l.tag){case 3:m0(l),dl();break;case 5:NT(l);break;case 1:Mn(l.type)&&_h(l);break;case 4:ng(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,y=l.memoizedProps.value;ft(Sh,p._currentValue),p._currentValue=y;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(ft(Ct,Ct.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?y0(o,l,c):(ft(Ct,Ct.current&1),o=Oi(o,l,c),o!==null?o.sibling:null);ft(Ct,Ct.current&1);break;case 19:if(p=(c&l.childLanes)!==0,(o.flags&128)!==0){if(p)return _0(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ft(Ct,Ct.current),p)break;return null;case 22:case 23:return l.lanes=0,h0(o,l,c)}return Oi(o,l,c)}var w0,Pg,T0,E0;w0=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Pg=function(){},T0=function(o,l,c,p){var y=o.memoizedProps;if(y!==p){o=l.stateNode,jo(Jr.current);var _=null;switch(c){case"input":y=wr(o,y),p=wr(o,p),_=[];break;case"select":y=ne({},y,{value:void 0}),p=ne({},p,{value:void 0}),_=[];break;case"textarea":y=wo(o,y),p=wo(o,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=gh)}Tr(c,p);var I;c=null;for(Q in y)if(!p.hasOwnProperty(Q)&&y.hasOwnProperty(Q)&&y[Q]!=null)if(Q==="style"){var O=y[Q];for(I in O)O.hasOwnProperty(I)&&(c||(c={}),c[I]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?_||(_=[]):(_=_||[]).push(Q,null));for(Q in p){var j=p[Q];if(O=y?.[Q],p.hasOwnProperty(Q)&&j!==O&&(j!=null||O!=null))if(Q==="style")if(O){for(I in O)!O.hasOwnProperty(I)||j&&j.hasOwnProperty(I)||(c||(c={}),c[I]="");for(I in j)j.hasOwnProperty(I)&&O[I]!==j[I]&&(c||(c={}),c[I]=j[I])}else c||(_||(_=[]),_.push(Q,c)),c=j;else Q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,O=O?O.__html:void 0,j!=null&&O!==j&&(_=_||[]).push(Q,j)):Q==="children"?typeof j!="string"&&typeof j!="number"||(_=_||[]).push(Q,""+j):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(j!=null&&Q==="onScroll"&&vt("scroll",o),_||O===j||(_=[])):(_=_||[]).push(Q,j))}c&&(_=_||[]).push("style",c);var Q=_;(l.updateQueue=Q)&&(l.flags|=4)}},E0=function(o,l,c,p){c!==p&&(l.flags|=4)};function hc(o,l){if(!Et)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function wn(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=c,l}function Bk(o,l,c){var p=l.pendingProps;switch(qm(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(l),null;case 1:return Mn(l.type)&&vh(),wn(l),null;case 3:return p=l.stateNode,ml(),_t(On),_t(vn),sg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Ih(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Sr!==null&&(Og(Sr),Sr=null))),Pg(o,l),wn(l),null;case 5:rg(l);var y=jo(ac.current);if(c=l.type,o!==null&&l.stateNode!=null)T0(o,l,c,p,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return wn(l),null}if(o=jo(Jr.current),Ih(l)){p=l.stateNode,c=l.type;var _=l.memoizedProps;switch(p[Xr]=l,p[nc]=_,o=(l.mode&1)!==0,c){case"dialog":vt("cancel",p),vt("close",p);break;case"iframe":case"object":case"embed":vt("load",p);break;case"video":case"audio":for(y=0;y<Zu.length;y++)vt(Zu[y],p);break;case"source":vt("error",p);break;case"img":case"image":case"link":vt("error",p),vt("load",p);break;case"details":vt("toggle",p);break;case"input":Oa(p,_),vt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},vt("invalid",p);break;case"textarea":Au(p,_),vt("invalid",p)}Tr(c,_),y=null;for(var I in _)if(_.hasOwnProperty(I)){var O=_[I];I==="children"?typeof O=="string"?p.textContent!==O&&(_.suppressHydrationWarning!==!0&&mh(p.textContent,O,o),y=["children",O]):typeof O=="number"&&p.textContent!==""+O&&(_.suppressHydrationWarning!==!0&&mh(p.textContent,O,o),y=["children",""+O]):i.hasOwnProperty(I)&&O!=null&&I==="onScroll"&&vt("scroll",p)}switch(c){case"input":Xt(p),rs(p,_,!0);break;case"textarea":Xt(p),is(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=gh)}p=y,l.updateQueue=p,p!==null&&(l.flags|=4)}else{I=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=bu(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=I.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=I.createElement(c,{is:p.is}):(o=I.createElement(c),c==="select"&&(I=o,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):o=I.createElementNS(o,c),o[Xr]=l,o[nc]=p,w0(o,l,!1,!1),l.stateNode=o;e:{switch(I=Fa(c,p),c){case"dialog":vt("cancel",o),vt("close",o),y=p;break;case"iframe":case"object":case"embed":vt("load",o),y=p;break;case"video":case"audio":for(y=0;y<Zu.length;y++)vt(Zu[y],o);y=p;break;case"source":vt("error",o),y=p;break;case"img":case"image":case"link":vt("error",o),vt("load",o),y=p;break;case"details":vt("toggle",o),y=p;break;case"input":Oa(o,p),y=wr(o,p),vt("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=ne({},p,{value:void 0}),vt("invalid",o);break;case"textarea":Au(o,p),y=wo(o,p),vt("invalid",o);break;default:y=p}Tr(c,y),O=y;for(_ in O)if(O.hasOwnProperty(_)){var j=O[_];_==="style"?La(o,j):_==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&zd(o,j)):_==="children"?typeof j=="string"?(c!=="textarea"||j!=="")&&To(o,j):typeof j=="number"&&To(o,""+j):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?j!=null&&_==="onScroll"&&vt("scroll",o):j!=null&&M(o,_,j,I))}switch(c){case"input":Xt(o),rs(o,p,!1);break;case"textarea":Xt(o),is(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Be(p.value));break;case"select":o.multiple=!!p.multiple,_=p.value,_!=null?qn(o,!!p.multiple,_,!1):p.defaultValue!=null&&qn(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=gh)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return wn(l),null;case 6:if(o&&l.stateNode!=null)E0(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(c=jo(ac.current),jo(Jr.current),Ih(l)){if(p=l.stateNode,c=l.memoizedProps,p[Xr]=l,(_=p.nodeValue!==c)&&(o=Zn,o!==null))switch(o.tag){case 3:mh(p.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&mh(p.nodeValue,c,(o.mode&1)!==0)}_&&(l.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Xr]=l,l.stateNode=p}return wn(l),null;case 13:if(_t(Ct),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Et&&er!==null&&(l.mode&1)!==0&&(l.flags&128)===0)ST(),dl(),l.flags|=98560,_=!1;else if(_=Ih(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Xr]=l}else dl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;wn(l),_=!1}else Sr!==null&&(Og(Sr),Sr=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Ct.current&1)!==0?Zt===0&&(Zt=3):Fg())),l.updateQueue!==null&&(l.flags|=4),wn(l),null);case 4:return ml(),Pg(o,l),o===null&&ec(l.stateNode.containerInfo),wn(l),null;case 10:return Jm(l.type._context),wn(l),null;case 17:return Mn(l.type)&&vh(),wn(l),null;case 19:if(_t(Ct),_=l.memoizedState,_===null)return wn(l),null;if(p=(l.flags&128)!==0,I=_.rendering,I===null)if(p)hc(_,!1);else{if(Zt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(I=xh(o),I!==null){for(l.flags|=128,hc(_,!1),p=I.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=c,c=l.child;c!==null;)_=c,o=p,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,o=I.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return ft(Ct,Ct.current&1|2),l.child}o=o.sibling}_.tail!==null&&yt()>_l&&(l.flags|=128,p=!0,hc(_,!1),l.lanes=4194304)}else{if(!p)if(o=xh(I),o!==null){if(l.flags|=128,p=!0,c=o.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),hc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!I.alternate&&!Et)return wn(l),null}else 2*yt()-_.renderingStartTime>_l&&c!==1073741824&&(l.flags|=128,p=!0,hc(_,!1),l.lanes=4194304);_.isBackwards?(I.sibling=l.child,l.child=I):(c=_.last,c!==null?c.sibling=I:l.child=I,_.last=I)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=yt(),l.sibling=null,c=Ct.current,ft(Ct,p?c&1|2:c&1),l):(wn(l),null);case 22:case 23:return Lg(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(tr&1073741824)!==0&&(wn(l),l.subtreeFlags&6&&(l.flags|=8192)):wn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function $k(o,l){switch(qm(l),l.tag){case 1:return Mn(l.type)&&vh(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return ml(),_t(On),_t(vn),sg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return rg(l),null;case 13:if(_t(Ct),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));dl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return _t(Ct),null;case 4:return ml(),null;case 10:return Jm(l.type._context),null;case 22:case 23:return Lg(),null;case 24:return null;default:return null}}var Fh=!1,Tn=!1,zk=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function yl(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Nt(o,l,p)}else c.current=null}function Sg(o,l,c){try{c()}catch(p){Nt(o,l,p)}}var I0=!1;function Wk(o,l){if(Lm=Ci,o=tT(),xm(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var I=0,O=-1,j=-1,Q=0,ue=0,ce=o,ae=null;t:for(;;){for(var we;ce!==c||y!==0&&ce.nodeType!==3||(O=I+y),ce!==_||p!==0&&ce.nodeType!==3||(j=I+p),ce.nodeType===3&&(I+=ce.nodeValue.length),(we=ce.firstChild)!==null;)ae=ce,ce=we;for(;;){if(ce===o)break t;if(ae===c&&++Q===y&&(O=I),ae===_&&++ue===p&&(j=I),(we=ce.nextSibling)!==null)break;ce=ae,ae=ce.parentNode}ce=we}c=O===-1||j===-1?null:{start:O,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(Fm={focusedElem:o,selectionRange:c},Ci=!1,Ee=l;Ee!==null;)if(l=Ee,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ee=o;else for(;Ee!==null;){l=Ee;try{var Pe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ce=Pe.memoizedProps,Ft=Pe.memoizedState,H=l.stateNode,$=H.getSnapshotBeforeUpdate(l.elementType===l.type?Ce:Cr(l.type,Ce),Ft);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var G=l.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Nt(l,l.return,fe)}if(o=l.sibling,o!==null){o.return=l.return,Ee=o;break}Ee=l.return}return Pe=I0,I0=!1,Pe}function fc(o,l,c){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var _=y.destroy;y.destroy=void 0,_!==void 0&&Sg(l,c,_)}y=y.next}while(y!==p)}}function Uh(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==l)}}function Cg(o){var l=o.ref;if(l!==null){var c=o.stateNode;o.tag,o=c,typeof l=="function"?l(o):l.current=o}}function P0(o){var l=o.alternate;l!==null&&(o.alternate=null,P0(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Xr],delete l[nc],delete l[$m],delete l[Ck],delete l[Ak])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function S0(o){return o.tag===5||o.tag===3||o.tag===4}function C0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||S0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ag(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=gh));else if(p!==4&&(o=o.child,o!==null))for(Ag(o,l,c),o=o.sibling;o!==null;)Ag(o,l,c),o=o.sibling}function bg(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(bg(o,l,c),o=o.sibling;o!==null;)bg(o,l,c),o=o.sibling}var fn=null,Ar=!1;function Cs(o,l,c){for(c=c.child;c!==null;)A0(o,l,c),c=c.sibling}function A0(o,l,c){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Co,c)}catch{}switch(c.tag){case 5:Tn||yl(c,l);case 6:var p=fn,y=Ar;fn=null,Cs(o,l,c),fn=p,Ar=y,fn!==null&&(Ar?(o=fn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):fn.removeChild(c.stateNode));break;case 18:fn!==null&&(Ar?(o=fn,c=c.stateNode,o.nodeType===8?Bm(o.parentNode,c):o.nodeType===1&&Bm(o,c),gs(o)):Bm(fn,c.stateNode));break;case 4:p=fn,y=Ar,fn=c.stateNode.containerInfo,Ar=!0,Cs(o,l,c),fn=p,Ar=y;break;case 0:case 11:case 14:case 15:if(!Tn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,I=_.destroy;_=_.tag,I!==void 0&&((_&2)!==0||(_&4)!==0)&&Sg(c,l,I),y=y.next}while(y!==p)}Cs(o,l,c);break;case 1:if(!Tn&&(yl(c,l),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(O){Nt(c,l,O)}Cs(o,l,c);break;case 21:Cs(o,l,c);break;case 22:c.mode&1?(Tn=(p=Tn)||c.memoizedState!==null,Cs(o,l,c),Tn=p):Cs(o,l,c);break;default:Cs(o,l,c)}}function b0(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new zk),l.forEach(function(p){var y=Zk.bind(null,o,p);c.has(p)||(c.add(p),p.then(y,y))})}}function br(o,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var _=o,I=l,O=I;e:for(;O!==null;){switch(O.tag){case 5:fn=O.stateNode,Ar=!1;break e;case 3:fn=O.stateNode.containerInfo,Ar=!0;break e;case 4:fn=O.stateNode.containerInfo,Ar=!0;break e}O=O.return}if(fn===null)throw Error(t(160));A0(_,I,y),fn=null,Ar=!1;var j=y.alternate;j!==null&&(j.return=null),y.return=null}catch(Q){Nt(y,l,Q)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)x0(l,o),l=l.sibling}function x0(o,l){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(br(l,o),ei(o),p&4){try{fc(3,o,o.return),Uh(3,o)}catch(Ce){Nt(o,o.return,Ce)}try{fc(5,o,o.return)}catch(Ce){Nt(o,o.return,Ce)}}break;case 1:br(l,o),ei(o),p&512&&c!==null&&yl(c,c.return);break;case 5:if(br(l,o),ei(o),p&512&&c!==null&&yl(c,c.return),o.flags&32){var y=o.stateNode;try{To(y,"")}catch(Ce){Nt(o,o.return,Ce)}}if(p&4&&(y=o.stateNode,y!=null)){var _=o.memoizedProps,I=c!==null?c.memoizedProps:_,O=o.type,j=o.updateQueue;if(o.updateQueue=null,j!==null)try{O==="input"&&_.type==="radio"&&_.name!=null&&vi(y,_),Fa(O,I);var Q=Fa(O,_);for(I=0;I<j.length;I+=2){var ue=j[I],ce=j[I+1];ue==="style"?La(y,ce):ue==="dangerouslySetInnerHTML"?zd(y,ce):ue==="children"?To(y,ce):M(y,ue,ce,Q)}switch(O){case"input":Mr(y,_);break;case"textarea":$d(y,_);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var we=_.value;we!=null?qn(y,!!_.multiple,we,!1):ae!==!!_.multiple&&(_.defaultValue!=null?qn(y,!!_.multiple,_.defaultValue,!0):qn(y,!!_.multiple,_.multiple?[]:"",!1))}y[nc]=_}catch(Ce){Nt(o,o.return,Ce)}}break;case 6:if(br(l,o),ei(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,_=o.memoizedProps;try{y.nodeValue=_}catch(Ce){Nt(o,o.return,Ce)}}break;case 3:if(br(l,o),ei(o),p&4&&c!==null&&c.memoizedState.isDehydrated)try{gs(l.containerInfo)}catch(Ce){Nt(o,o.return,Ce)}break;case 4:br(l,o),ei(o);break;case 13:br(l,o),ei(o),y=o.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(kg=yt())),p&4&&b0(o);break;case 22:if(ue=c!==null&&c.memoizedState!==null,o.mode&1?(Tn=(Q=Tn)||ue,br(l,o),Tn=Q):br(l,o),ei(o),p&8192){if(Q=o.memoizedState!==null,(o.stateNode.isHidden=Q)&&!ue&&(o.mode&1)!==0)for(Ee=o,ue=o.child;ue!==null;){for(ce=Ee=ue;Ee!==null;){switch(ae=Ee,we=ae.child,ae.tag){case 0:case 11:case 14:case 15:fc(4,ae,ae.return);break;case 1:yl(ae,ae.return);var Pe=ae.stateNode;if(typeof Pe.componentWillUnmount=="function"){p=ae,c=ae.return;try{l=p,Pe.props=l.memoizedProps,Pe.state=l.memoizedState,Pe.componentWillUnmount()}catch(Ce){Nt(p,c,Ce)}}break;case 5:yl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){D0(ce);continue}}we!==null?(we.return=ae,Ee=we):D0(ce)}ue=ue.sibling}e:for(ue=null,ce=o;;){if(ce.tag===5){if(ue===null){ue=ce;try{y=ce.stateNode,Q?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(O=ce.stateNode,j=ce.memoizedProps.style,I=j!=null&&j.hasOwnProperty("display")?j.display:null,O.style.display=as("display",I))}catch(Ce){Nt(o,o.return,Ce)}}}else if(ce.tag===6){if(ue===null)try{ce.stateNode.nodeValue=Q?"":ce.memoizedProps}catch(Ce){Nt(o,o.return,Ce)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===o)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===o)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===o)break e;ue===ce&&(ue=null),ce=ce.return}ue===ce&&(ue=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:br(l,o),ei(o),p&4&&b0(o);break;case 21:break;default:br(l,o),ei(o)}}function ei(o){var l=o.flags;if(l&2){try{e:{for(var c=o.return;c!==null;){if(S0(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(To(y,""),p.flags&=-33);var _=C0(o);bg(o,_,y);break;case 3:case 4:var I=p.stateNode.containerInfo,O=C0(o);Ag(o,O,I);break;default:throw Error(t(161))}}catch(j){Nt(o,o.return,j)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Hk(o,l,c){Ee=o,R0(o)}function R0(o,l,c){for(var p=(o.mode&1)!==0;Ee!==null;){var y=Ee,_=y.child;if(y.tag===22&&p){var I=y.memoizedState!==null||Fh;if(!I){var O=y.alternate,j=O!==null&&O.memoizedState!==null||Tn;O=Fh;var Q=Tn;if(Fh=I,(Tn=j)&&!Q)for(Ee=y;Ee!==null;)I=Ee,j=I.child,I.tag===22&&I.memoizedState!==null?N0(y):j!==null?(j.return=I,Ee=j):N0(y);for(;_!==null;)Ee=_,R0(_),_=_.sibling;Ee=y,Fh=O,Tn=Q}k0(o)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Ee=_):k0(o)}}function k0(o){for(;Ee!==null;){var l=Ee;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Tn||Uh(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Tn)if(c===null)p.componentDidMount();else{var y=l.elementType===l.type?c.memoizedProps:Cr(l.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&DT(l,_,p);break;case 3:var I=l.updateQueue;if(I!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}DT(l,I,c)}break;case 5:var O=l.stateNode;if(c===null&&l.flags&4){c=O;var j=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&c.focus();break;case"img":j.src&&(c.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Q=l.alternate;if(Q!==null){var ue=Q.memoizedState;if(ue!==null){var ce=ue.dehydrated;ce!==null&&gs(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tn||l.flags&512&&Cg(l)}catch(ae){Nt(l,l.return,ae)}}if(l===o){Ee=null;break}if(c=l.sibling,c!==null){c.return=l.return,Ee=c;break}Ee=l.return}}function D0(o){for(;Ee!==null;){var l=Ee;if(l===o){Ee=null;break}var c=l.sibling;if(c!==null){c.return=l.return,Ee=c;break}Ee=l.return}}function N0(o){for(;Ee!==null;){var l=Ee;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{Uh(4,l)}catch(j){Nt(l,c,j)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var y=l.return;try{p.componentDidMount()}catch(j){Nt(l,y,j)}}var _=l.return;try{Cg(l)}catch(j){Nt(l,_,j)}break;case 5:var I=l.return;try{Cg(l)}catch(j){Nt(l,I,j)}}}catch(j){Nt(l,l.return,j)}if(l===o){Ee=null;break}var O=l.sibling;if(O!==null){O.return=l.return,Ee=O;break}Ee=l.return}}var qk=Math.ceil,jh=z.ReactCurrentDispatcher,xg=z.ReactCurrentOwner,pr=z.ReactCurrentBatchConfig,Ze=0,on=null,Ht=null,pn=0,tr=0,vl=Ts(0),Zt=0,pc=null,$o=0,Bh=0,Rg=0,mc=null,Fn=null,kg=0,_l=1/0,Mi=null,$h=!1,Dg=null,As=null,zh=!1,bs=null,Wh=0,gc=0,Ng=null,Hh=-1,qh=0;function Rn(){return(Ze&6)!==0?yt():Hh!==-1?Hh:Hh=yt()}function xs(o){return(o.mode&1)===0?1:(Ze&2)!==0&&pn!==0?pn&-pn:xk.transition!==null?(qh===0&&(qh=Lu()),qh):(o=Ke,o!==0||(o=window.event,o=o===void 0?16:Ka(o.type)),o)}function xr(o,l,c,p){if(50<gc)throw gc=0,Ng=null,Error(t(185));Ro(o,c,p),((Ze&2)===0||o!==on)&&(o===on&&((Ze&2)===0&&(Bh|=c),Zt===4&&Rs(o,pn)),Un(o,p),c===1&&Ze===0&&(l.mode&1)===0&&(_l=yt()+500,wh&&Is()))}function Un(o,l){var c=o.callbackNode;xo(o,l);var p=Ii(o,o===on?pn:0);if(p===0)c!==null&&Ba(c),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(c!=null&&Ba(c),l===1)o.tag===0?bk(O0.bind(null,o)):wT(O0.bind(null,o)),Pk(function(){(Ze&6)===0&&Is()}),c=null;else{switch(Br(p)){case 1:c=$a;break;case 4:c=Vu;break;case 16:c=So;break;case 536870912:c=za;break;default:c=So}c=z0(c,V0.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function V0(o,l){if(Hh=-1,qh=0,(Ze&6)!==0)throw Error(t(327));var c=o.callbackNode;if(wl()&&o.callbackNode!==c)return null;var p=Ii(o,o===on?pn:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||l)l=Gh(o,p);else{l=p;var y=Ze;Ze|=2;var _=L0();(on!==o||pn!==l)&&(Mi=null,_l=yt()+500,Wo(o,l));do try{Qk();break}catch(O){M0(o,O)}while(!0);Xm(),jh.current=_,Ze=y,Ht!==null?l=0:(on=null,pn=0,l=Zt)}if(l!==0){if(l===2&&(y=Mu(o),y!==0&&(p=y,l=Vg(o,y))),l===1)throw c=pc,Wo(o,0),Rs(o,p),Un(o,yt()),c;if(l===6)Rs(o,p);else{if(y=o.current.alternate,(p&30)===0&&!Gk(y)&&(l=Gh(o,p),l===2&&(_=Mu(o),_!==0&&(p=_,l=Vg(o,_))),l===1))throw c=pc,Wo(o,0),Rs(o,p),Un(o,yt()),c;switch(o.finishedWork=y,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:Ho(o,Fn,Mi);break;case 3:if(Rs(o,p),(p&130023424)===p&&(l=kg+500-yt(),10<l)){if(Ii(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){Rn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=jm(Ho.bind(null,o,Fn,Mi),l);break}Ho(o,Fn,Mi);break;case 4:if(Rs(o,p),(p&4194240)===p)break;for(l=o.eventTimes,y=-1;0<p;){var I=31-Kn(p);_=1<<I,I=l[I],I>y&&(y=I),p&=~_}if(p=y,p=yt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*qk(p/1960))-p,10<p){o.timeoutHandle=jm(Ho.bind(null,o,Fn,Mi),p);break}Ho(o,Fn,Mi);break;case 5:Ho(o,Fn,Mi);break;default:throw Error(t(329))}}}return Un(o,yt()),o.callbackNode===c?V0.bind(null,o):null}function Vg(o,l){var c=mc;return o.current.memoizedState.isDehydrated&&(Wo(o,l).flags|=256),o=Gh(o,l),o!==2&&(l=Fn,Fn=c,l!==null&&Og(l)),o}function Og(o){Fn===null?Fn=o:Fn.push.apply(Fn,o)}function Gk(o){for(var l=o;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],_=y.getSnapshot;y=y.value;try{if(!Pr(_(),y))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Rs(o,l){for(l&=~Rg,l&=~Bh,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-Kn(l),p=1<<c;o[c]=-1,l&=~p}}function O0(o){if((Ze&6)!==0)throw Error(t(327));wl();var l=Ii(o,0);if((l&1)===0)return Un(o,yt()),null;var c=Gh(o,l);if(o.tag!==0&&c===2){var p=Mu(o);p!==0&&(l=p,c=Vg(o,p))}if(c===1)throw c=pc,Wo(o,0),Rs(o,l),Un(o,yt()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Ho(o,Fn,Mi),Un(o,yt()),null}function Mg(o,l){var c=Ze;Ze|=1;try{return o(l)}finally{Ze=c,Ze===0&&(_l=yt()+500,wh&&Is())}}function zo(o){bs!==null&&bs.tag===0&&(Ze&6)===0&&wl();var l=Ze;Ze|=1;var c=pr.transition,p=Ke;try{if(pr.transition=null,Ke=1,o)return o()}finally{Ke=p,pr.transition=c,Ze=l,(Ze&6)===0&&Is()}}function Lg(){tr=vl.current,_t(vl)}function Wo(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,Ik(c)),Ht!==null)for(c=Ht.return;c!==null;){var p=c;switch(qm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&vh();break;case 3:ml(),_t(On),_t(vn),sg();break;case 5:rg(p);break;case 4:ml();break;case 13:_t(Ct);break;case 19:_t(Ct);break;case 10:Jm(p.type._context);break;case 22:case 23:Lg()}c=c.return}if(on=o,Ht=o=ks(o.current,null),pn=tr=l,Zt=0,pc=null,Rg=Bh=$o=0,Fn=mc=null,Uo!==null){for(l=0;l<Uo.length;l++)if(c=Uo[l],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,_=c.pending;if(_!==null){var I=_.next;_.next=y,p.next=I}c.pending=p}Uo=null}return o}function M0(o,l){do{var c=Ht;try{if(Xm(),Rh.current=Vh,kh){for(var p=At.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}kh=!1}if(Bo=0,sn=Jt=At=null,lc=!1,uc=0,xg.current=null,c===null||c.return===null){Zt=1,pc=l,Ht=null;break}e:{var _=o,I=c.return,O=c,j=l;if(l=pn,O.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Q=j,ue=O,ce=ue.tag;if((ue.mode&1)===0&&(ce===0||ce===11||ce===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var we=a0(I);if(we!==null){we.flags&=-257,l0(we,I,O,_,l),we.mode&1&&o0(_,Q,l),l=we,j=Q;var Pe=l.updateQueue;if(Pe===null){var Ce=new Set;Ce.add(j),l.updateQueue=Ce}else Pe.add(j);break e}else{if((l&1)===0){o0(_,Q,l),Fg();break e}j=Error(t(426))}}else if(Et&&O.mode&1){var Ft=a0(I);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),l0(Ft,I,O,_,l),Qm(gl(j,O));break e}}_=j=gl(j,O),Zt!==4&&(Zt=2),mc===null?mc=[_]:mc.push(_),_=I;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var H=i0(_,j,l);kT(_,H);break e;case 1:O=j;var $=_.type,G=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(As===null||!As.has(G)))){_.flags|=65536,l&=-l,_.lanes|=l;var fe=s0(_,O,l);kT(_,fe);break e}}_=_.return}while(_!==null)}U0(c)}catch(be){l=be,Ht===c&&c!==null&&(Ht=c=c.return);continue}break}while(!0)}function L0(){var o=jh.current;return jh.current=Vh,o===null?Vh:o}function Fg(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),on===null||($o&268435455)===0&&(Bh&268435455)===0||Rs(on,pn)}function Gh(o,l){var c=Ze;Ze|=2;var p=L0();(on!==o||pn!==l)&&(Mi=null,Wo(o,l));do try{Kk();break}catch(y){M0(o,y)}while(!0);if(Xm(),Ze=c,jh.current=p,Ht!==null)throw Error(t(261));return on=null,pn=0,Zt}function Kk(){for(;Ht!==null;)F0(Ht)}function Qk(){for(;Ht!==null&&!Po();)F0(Ht)}function F0(o){var l=$0(o.alternate,o,tr);o.memoizedProps=o.pendingProps,l===null?U0(o):Ht=l,xg.current=null}function U0(o){var l=o;do{var c=l.alternate;if(o=l.return,(l.flags&32768)===0){if(c=Bk(c,l,tr),c!==null){Ht=c;return}}else{if(c=$k(c,l),c!==null){c.flags&=32767,Ht=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Zt=6,Ht=null;return}}if(l=l.sibling,l!==null){Ht=l;return}Ht=l=o}while(l!==null);Zt===0&&(Zt=5)}function Ho(o,l,c){var p=Ke,y=pr.transition;try{pr.transition=null,Ke=1,Yk(o,l,c,p)}finally{pr.transition=y,Ke=p}return null}function Yk(o,l,c,p){do wl();while(bs!==null);if((Ze&6)!==0)throw Error(t(327));c=o.finishedWork;var y=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=c.lanes|c.childLanes;if(Pm(o,_),o===on&&(Ht=on=null,pn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||zh||(zh=!0,z0(So,function(){return wl(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=pr.transition,pr.transition=null;var I=Ke;Ke=1;var O=Ze;Ze|=4,xg.current=null,Wk(o,c),x0(c,o),gk(Fm),Ci=!!Lm,Fm=Lm=null,o.current=c,Hk(c),Ei(),Ze=O,Ke=I,pr.transition=_}else o.current=c;if(zh&&(zh=!1,bs=o,Wh=y),_=o.pendingLanes,_===0&&(As=null),eh(c.stateNode),Un(o,yt()),l!==null)for(p=o.onRecoverableError,c=0;c<l.length;c++)y=l[c],p(y.value,{componentStack:y.stack,digest:y.digest});if($h)throw $h=!1,o=Dg,Dg=null,o;return(Wh&1)!==0&&o.tag!==0&&wl(),_=o.pendingLanes,(_&1)!==0?o===Ng?gc++:(gc=0,Ng=o):gc=0,Is(),null}function wl(){if(bs!==null){var o=Br(Wh),l=pr.transition,c=Ke;try{if(pr.transition=null,Ke=16>o?16:o,bs===null)var p=!1;else{if(o=bs,bs=null,Wh=0,(Ze&6)!==0)throw Error(t(331));var y=Ze;for(Ze|=4,Ee=o.current;Ee!==null;){var _=Ee,I=_.child;if((Ee.flags&16)!==0){var O=_.deletions;if(O!==null){for(var j=0;j<O.length;j++){var Q=O[j];for(Ee=Q;Ee!==null;){var ue=Ee;switch(ue.tag){case 0:case 11:case 15:fc(8,ue,_)}var ce=ue.child;if(ce!==null)ce.return=ue,Ee=ce;else for(;Ee!==null;){ue=Ee;var ae=ue.sibling,we=ue.return;if(P0(ue),ue===Q){Ee=null;break}if(ae!==null){ae.return=we,Ee=ae;break}Ee=we}}}var Pe=_.alternate;if(Pe!==null){var Ce=Pe.child;if(Ce!==null){Pe.child=null;do{var Ft=Ce.sibling;Ce.sibling=null,Ce=Ft}while(Ce!==null)}}Ee=_}}if((_.subtreeFlags&2064)!==0&&I!==null)I.return=_,Ee=I;else e:for(;Ee!==null;){if(_=Ee,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:fc(9,_,_.return)}var H=_.sibling;if(H!==null){H.return=_.return,Ee=H;break e}Ee=_.return}}var $=o.current;for(Ee=$;Ee!==null;){I=Ee;var G=I.child;if((I.subtreeFlags&2064)!==0&&G!==null)G.return=I,Ee=G;else e:for(I=$;Ee!==null;){if(O=Ee,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Uh(9,O)}}catch(be){Nt(O,O.return,be)}if(O===I){Ee=null;break e}var fe=O.sibling;if(fe!==null){fe.return=O.return,Ee=fe;break e}Ee=O.return}}if(Ze=y,Is(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Co,o)}catch{}p=!0}return p}finally{Ke=c,pr.transition=l}}return!1}function j0(o,l,c){l=gl(c,l),l=i0(o,l,1),o=Ss(o,l,1),l=Rn(),o!==null&&(Ro(o,1,l),Un(o,l))}function Nt(o,l,c){if(o.tag===3)j0(o,o,c);else for(;l!==null;){if(l.tag===3){j0(l,o,c);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(As===null||!As.has(p))){o=gl(c,o),o=s0(l,o,1),l=Ss(l,o,1),o=Rn(),l!==null&&(Ro(l,1,o),Un(l,o));break}}l=l.return}}function Xk(o,l,c){var p=o.pingCache;p!==null&&p.delete(l),l=Rn(),o.pingedLanes|=o.suspendedLanes&c,on===o&&(pn&c)===c&&(Zt===4||Zt===3&&(pn&130023424)===pn&&500>yt()-kg?Wo(o,0):Rg|=c),Un(o,l)}function B0(o,l){l===0&&((o.mode&1)===0?l=1:(l=fs,fs<<=1,(fs&130023424)===0&&(fs=4194304)));var c=Rn();o=Ni(o,l),o!==null&&(Ro(o,l,c),Un(o,c))}function Jk(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),B0(o,c)}function Zk(o,l){var c=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),B0(o,c)}var $0;$0=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||On.current)Ln=!0;else{if((o.lanes&c)===0&&(l.flags&128)===0)return Ln=!1,jk(o,l,c);Ln=(o.flags&131072)!==0}else Ln=!1,Et&&(l.flags&1048576)!==0&&TT(l,Eh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Lh(o,l),o=l.pendingProps;var y=ll(l,vn.current);pl(l,c),y=lg(null,l,p,o,y,c);var _=ug();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Mn(p)?(_=!0,_h(l)):_=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,tg(l),y.updater=Oh,l.stateNode=y,y._reactInternals=l,mg(l,p,o,c),l=_g(null,l,p,!0,_,c)):(l.tag=0,Et&&_&&Hm(l),xn(null,l,y,c),l=l.child),l;case 16:p=l.elementType;e:{switch(Lh(o,l),o=l.pendingProps,y=p._init,p=y(p._payload),l.type=p,y=l.tag=tD(p),o=Cr(p,o),y){case 0:l=vg(null,l,p,o,c);break e;case 1:l=p0(null,l,p,o,c);break e;case 11:l=u0(null,l,p,o,c);break e;case 14:l=c0(null,l,p,Cr(p.type,o),c);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Cr(p,y),vg(o,l,p,y,c);case 1:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Cr(p,y),p0(o,l,p,y,c);case 3:e:{if(m0(l),o===null)throw Error(t(387));p=l.pendingProps,_=l.memoizedState,y=_.element,RT(o,l),bh(l,p,null,c);var I=l.memoizedState;if(p=I.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){y=gl(Error(t(423)),l),l=g0(o,l,p,c,y);break e}else if(p!==y){y=gl(Error(t(424)),l),l=g0(o,l,p,c,y);break e}else for(er=ws(l.stateNode.containerInfo.firstChild),Zn=l,Et=!0,Sr=null,c=bT(l,null,p,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(dl(),p===y){l=Oi(o,l,c);break e}xn(o,l,p,c)}l=l.child}return l;case 5:return NT(l),o===null&&Km(l),p=l.type,y=l.pendingProps,_=o!==null?o.memoizedProps:null,I=y.children,Um(p,y)?I=null:_!==null&&Um(p,_)&&(l.flags|=32),f0(o,l),xn(o,l,I,c),l.child;case 6:return o===null&&Km(l),null;case 13:return y0(o,l,c);case 4:return ng(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=hl(l,null,p,c):xn(o,l,p,c),l.child;case 11:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Cr(p,y),u0(o,l,p,y,c);case 7:return xn(o,l,l.pendingProps,c),l.child;case 8:return xn(o,l,l.pendingProps.children,c),l.child;case 12:return xn(o,l,l.pendingProps.children,c),l.child;case 10:e:{if(p=l.type._context,y=l.pendingProps,_=l.memoizedProps,I=y.value,ft(Sh,p._currentValue),p._currentValue=I,_!==null)if(Pr(_.value,I)){if(_.children===y.children&&!On.current){l=Oi(o,l,c);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var O=_.dependencies;if(O!==null){I=_.child;for(var j=O.firstContext;j!==null;){if(j.context===p){if(_.tag===1){j=Vi(-1,c&-c),j.tag=2;var Q=_.updateQueue;if(Q!==null){Q=Q.shared;var ue=Q.pending;ue===null?j.next=j:(j.next=ue.next,ue.next=j),Q.pending=j}}_.lanes|=c,j=_.alternate,j!==null&&(j.lanes|=c),Zm(_.return,c,l),O.lanes|=c;break}j=j.next}}else if(_.tag===10)I=_.type===l.type?null:_.child;else if(_.tag===18){if(I=_.return,I===null)throw Error(t(341));I.lanes|=c,O=I.alternate,O!==null&&(O.lanes|=c),Zm(I,c,l),I=_.sibling}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===l){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}xn(o,l,y.children,c),l=l.child}return l;case 9:return y=l.type,p=l.pendingProps.children,pl(l,c),y=hr(y),p=p(y),l.flags|=1,xn(o,l,p,c),l.child;case 14:return p=l.type,y=Cr(p,l.pendingProps),y=Cr(p.type,y),c0(o,l,p,y,c);case 15:return d0(o,l,l.type,l.pendingProps,c);case 17:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Cr(p,y),Lh(o,l),l.tag=1,Mn(p)?(o=!0,_h(l)):o=!1,pl(l,c),n0(l,p,y),mg(l,p,y,c),_g(null,l,p,!0,o,c);case 19:return _0(o,l,c);case 22:return h0(o,l,c)}throw Error(t(156,l.tag))};function z0(o,l){return Nu(o,l)}function eD(o,l,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(o,l,c,p){return new eD(o,l,c,p)}function Ug(o){return o=o.prototype,!(!o||!o.isReactComponent)}function tD(o){if(typeof o=="function")return Ug(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===se)return 14}return 2}function ks(o,l){var c=o.alternate;return c===null?(c=mr(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function Kh(o,l,c,p,y,_){var I=2;if(p=o,typeof o=="function")Ug(o)&&(I=1);else if(typeof o=="string")I=5;else e:switch(o){case x:return qo(c.children,y,_,l);case S:I=8,y|=8;break;case D:return o=mr(12,c,l,y|2),o.elementType=D,o.lanes=_,o;case P:return o=mr(13,c,l,y),o.elementType=P,o.lanes=_,o;case Y:return o=mr(19,c,l,y),o.elementType=Y,o.lanes=_,o;case oe:return Qh(c,y,_,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:I=10;break e;case L:I=9;break e;case U:I=11;break e;case se:I=14;break e;case re:I=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=mr(I,c,l,y),l.elementType=o,l.type=p,l.lanes=_,l}function qo(o,l,c,p){return o=mr(7,o,p,l),o.lanes=c,o}function Qh(o,l,c,p){return o=mr(22,o,p,l),o.elementType=oe,o.lanes=c,o.stateNode={isHidden:!1},o}function jg(o,l,c){return o=mr(6,o,null,l),o.lanes=c,o}function Bg(o,l,c){return l=mr(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function nD(o,l,c,p,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function $g(o,l,c,p,y,_,I,O,j){return o=new nD(o,l,c,O,j),l===1?(l=1,_===!0&&(l|=8)):l=0,_=mr(3,null,null,l),o.current=_,_.stateNode=o,_.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},tg(_),o}function rD(o,l,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:p==null?null:""+p,children:o,containerInfo:l,implementation:c}}function W0(o){if(!o)return Es;o=o._reactInternals;e:{if(Er(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Mn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Mn(c))return vT(o,c,l)}return l}function H0(o,l,c,p,y,_,I,O,j){return o=$g(c,p,!0,o,y,_,I,O,j),o.context=W0(null),c=o.current,p=Rn(),y=xs(c),_=Vi(p,y),_.callback=l??null,Ss(c,_,y),o.current.lanes=y,Ro(o,y,p),Un(o,p),o}function Yh(o,l,c,p){var y=l.current,_=Rn(),I=xs(y);return c=W0(c),l.context===null?l.context=c:l.pendingContext=c,l=Vi(_,I),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=Ss(y,l,I),o!==null&&(xr(o,y,I,_),Ah(o,y,I)),I}function Xh(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function q0(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function zg(o,l){q0(o,l),(o=o.alternate)&&q0(o,l)}function iD(){return null}var G0=typeof reportError=="function"?reportError:function(o){console.error(o)};function Wg(o){this._internalRoot=o}Jh.prototype.render=Wg.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Yh(o,l,null,null)},Jh.prototype.unmount=Wg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;zo(function(){Yh(null,o,null,null)}),l[xi]=null}};function Jh(o){this._internalRoot=o}Jh.prototype.unstable_scheduleHydration=function(o){if(o){var l=$u();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Qn.length&&l!==0&&l<Qn[c].priority;c++);Qn.splice(c,0,o),c===0&&qa(o)}};function Hg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Zh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function K0(){}function sD(o,l,c,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var Q=Xh(I);_.call(Q)}}var I=H0(l,p,o,0,null,!1,!1,"",K0);return o._reactRootContainer=I,o[xi]=I.current,ec(o.nodeType===8?o.parentNode:o),zo(),I}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var O=p;p=function(){var Q=Xh(j);O.call(Q)}}var j=$g(o,0,!1,null,null,!1,!1,"",K0);return o._reactRootContainer=j,o[xi]=j.current,ec(o.nodeType===8?o.parentNode:o),zo(function(){Yh(l,j,c,p)}),j}function ef(o,l,c,p,y){var _=c._reactRootContainer;if(_){var I=_;if(typeof y=="function"){var O=y;y=function(){var j=Xh(I);O.call(j)}}Yh(l,I,o,y)}else I=sD(c,l,o,y,p);return Xh(I)}ju=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=rt(l.pendingLanes);c!==0&&(Uu(l,c|1),Un(l,yt()),(Ze&6)===0&&(_l=yt()+500,Is()))}break;case 13:zo(function(){var p=Ni(o,1);if(p!==null){var y=Rn();xr(p,o,1,y)}}),zg(o,1)}},Wa=function(o){if(o.tag===13){var l=Ni(o,134217728);if(l!==null){var c=Rn();xr(l,o,134217728,c)}zg(o,134217728)}},Bu=function(o){if(o.tag===13){var l=xs(o),c=Ni(o,l);if(c!==null){var p=Rn();xr(c,o,l,p)}zg(o,l)}},$u=function(){return Ke},zu=function(o,l){var c=Ke;try{return Ke=o,l()}finally{Ke=c}},_i=function(o,l,c){switch(l){case"input":if(Mr(o,c),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var p=c[l];if(p!==o&&p.form===o.form){var y=yh(p);if(!y)throw Error(t(90));ns(p),Mr(p,y)}}}break;case"textarea":$d(o,c);break;case"select":l=c.value,l!=null&&qn(o,!!c.multiple,l,!1)}},Hd=Mg,qd=zo;var oD={usingClientEntryPoint:!1,Events:[rc,ol,yh,us,cs,Mg]},yc={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aD={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zd(o),o===null?null:o.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||iD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{Co=tf.inject(aD),Gn=tf}catch{}}return jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oD,jn.createPortal=function(o,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(l))throw Error(t(200));return rD(o,l,null,c)},jn.createRoot=function(o,l){if(!Hg(o))throw Error(t(299));var c=!1,p="",y=G0;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=$g(o,1,!1,null,null,c,!1,p,y),o[xi]=l.current,ec(o.nodeType===8?o.parentNode:o),new Wg(l)},jn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Zd(l),o=o===null?null:o.stateNode,o},jn.flushSync=function(o){return zo(o)},jn.hydrate=function(o,l,c){if(!Zh(l))throw Error(t(200));return ef(null,o,l,!0,c)},jn.hydrateRoot=function(o,l,c){if(!Hg(o))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,_="",I=G0;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(I=c.onRecoverableError)),l=H0(l,null,o,1,c??null,y,!1,_,I),o[xi]=l.current,ec(o),p)for(o=0;o<p.length;o++)c=p[o],y=c._getVersion,y=y(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,y]:l.mutableSourceEagerHydrationData.push(c,y);return new Jh(l)},jn.render=function(o,l,c){if(!Zh(l))throw Error(t(200));return ef(null,o,l,!1,c)},jn.unmountComponentAtNode=function(o){if(!Zh(o))throw Error(t(40));return o._reactRootContainer?(zo(function(){ef(null,null,o,!1,function(){o._reactRootContainer=null,o[xi]=null})}),!0):!1},jn.unstable_batchedUpdates=Mg,jn.unstable_renderSubtreeIntoContainer=function(o,l,c,p){if(!Zh(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return ef(o,l,c,!1,p)},jn.version="18.3.1-next-f1338f8080-20240426",jn}var nE;function jS(){if(nE)return Kg.exports;nE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kg.exports=mD(),Kg.exports}var rE;function gD(){if(rE)return nf;rE=1;var n=jS();return nf.createRoot=n.createRoot,nf.hydrateRoot=n.hydrateRoot,nf}var yD=gD();const vD=Wv(yD),_D="modulepreload",wD=function(n){return"/"+n},iE={},Yi=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=wD(h),h in iE)return;iE[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":_D,m||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((E,b)=>{v.addEventListener("load",E),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var Gv=jS();const TD=Wv(Gv);function nd(){return nd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nd.apply(this,arguments)}var qs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(qs||(qs={}));const sE="popstate";function ED(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Oy("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:jf(i)}return PD(e,t,null,n)}function kt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ID(){return Math.random().toString(36).substr(2,8)}function oE(n,e){return{usr:n.state,key:n.key,idx:e}}function Oy(n,e,t,r){return t===void 0&&(t=null),nd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?gu(e):e,{state:t,key:e&&e.key||r||ID()})}function jf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function PD(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=qs.Pop,d=null,h=m();h==null&&(h=0,a.replaceState(nd({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=qs.Pop;let C=m(),B=C==null?null:C-h;h=C,d&&d({action:u,location:R.location,delta:B})}function v(C,B){u=qs.Push;let V=Oy(R.location,C,B);h=m()+1;let M=oE(V,h),z=R.createHref(V);try{a.pushState(M,"",z)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;i.location.assign(z)}s&&d&&d({action:u,location:R.location,delta:1})}function E(C,B){u=qs.Replace;let V=Oy(R.location,C,B);h=m();let M=oE(V,h),z=R.createHref(V);a.replaceState(M,"",z),s&&d&&d({action:u,location:R.location,delta:0})}function b(C){let B=i.location.origin!=="null"?i.location.origin:i.location.href,V=typeof C=="string"?C:jf(C);return V=V.replace(/ $/,"%20"),kt(B,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,B)}let R={get action(){return u},get location(){return n(i,a)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(sE,g),d=C,()=>{i.removeEventListener(sE,g),d=null}},createHref(C){return e(i,C)},createURL:b,encodeLocation(C){let B=b(C);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:v,replace:E,go(C){return a.go(C)}};return R}var aE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(aE||(aE={}));function SD(n,e,t){return t===void 0&&(t="/"),CD(n,e,t)}function CD(n,e,t,r){let i=typeof e=="string"?gu(e):e,s=Gl(i.pathname||"/",t);if(s==null)return null;let a=BS(n);AD(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=FD(s);u=MD(a[d],h)}return u}function BS(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(kt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=Ks([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),BS(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:VD(h,s.index),routesMeta:m})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let d of $S(s.path))i(s,a,d)}),e}function $S(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=$S(r.join("/")),u=[];return u.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...a),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function AD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:OD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const bD=/^:[\w-]+$/,xD=3,RD=2,kD=1,DD=10,ND=-2,lE=n=>n==="*";function VD(n,e){let t=n.split("/"),r=t.length;return t.some(lE)&&(r+=ND),e&&(r+=RD),t.filter(i=>!lE(i)).reduce((i,s)=>i+(bD.test(s)?xD:s===""?kD:DD),r)}function OD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function MD(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=My({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),v=d.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:Ks([s,g.pathname]),pathnameBase:zD(Ks([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=Ks([s,g.pathnameBase]))}return a}function My(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=LD(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:v,isOptional:E}=m;if(v==="*"){let R=u[g]||"";a=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const b=u[g];return E&&!b?h[v]=void 0:h[v]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function LD(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Kv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Gl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const UD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jD=n=>UD.test(n);function BD(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?gu(n):n,s;if(t)if(jD(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Kv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=uE(t.substring(1),"/"):s=uE(t,e)}else s=e;return{pathname:s,search:WD(r),hash:HD(i)}}function uE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Xg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $D(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Qv(n,e){let t=$D(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Yv(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=gu(n):(i=nd({},n),kt(!i.pathname||!i.pathname.includes("?"),Xg("?","pathname","search",i)),kt(!i.pathname||!i.pathname.includes("#"),Xg("#","pathname","hash",i)),kt(!i.search||!i.search.includes("#"),Xg("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let d=BD(i,u),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const Ks=n=>n.join("/").replace(/\/\/+/g,"/"),zD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),WD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const zS=["post","put","patch","delete"];new Set(zS);const GD=["get",...zS];new Set(GD);function rd(){return rd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rd.apply(this,arguments)}const Np=k.createContext(null),WS=k.createContext(null),Xi=k.createContext(null),Vp=k.createContext(null),Ji=k.createContext({outlet:null,matches:[],isDataRoute:!1}),HS=k.createContext(null);function KD(n,e){let{relative:t}=e===void 0?{}:e;yu()||kt(!1);let{basename:r,navigator:i}=k.useContext(Xi),{hash:s,pathname:a,search:u}=Op(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:Ks([r,a])),i.createHref({pathname:d,search:u,hash:s})}function yu(){return k.useContext(Vp)!=null}function xa(){return yu()||kt(!1),k.useContext(Vp).location}function qS(n){k.useContext(Xi).static||k.useLayoutEffect(n)}function GS(){let{isDataRoute:n}=k.useContext(Ji);return n?aN():QD()}function QD(){yu()||kt(!1);let n=k.useContext(Np),{basename:e,future:t,navigator:r}=k.useContext(Xi),{matches:i}=k.useContext(Ji),{pathname:s}=xa(),a=JSON.stringify(Qv(i,t.v7_relativeSplatPath)),u=k.useRef(!1);return qS(()=>{u.current=!0}),k.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=Yv(h,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ks([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,s,n])}function $W(){let{matches:n}=k.useContext(Ji),e=n[n.length-1];return e?e.params:{}}function Op(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(Xi),{matches:i}=k.useContext(Ji),{pathname:s}=xa(),a=JSON.stringify(Qv(i,r.v7_relativeSplatPath));return k.useMemo(()=>Yv(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function YD(n,e){return XD(n,e)}function XD(n,e,t,r){yu()||kt(!1);let{navigator:i}=k.useContext(Xi),{matches:s}=k.useContext(Ji),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=xa(),m;if(e){var g;let C=typeof e=="string"?gu(e):e;d==="/"||(g=C.pathname)!=null&&g.startsWith(d)||kt(!1),m=C}else m=h;let v=m.pathname||"/",E=v;if(d!=="/"){let C=d.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=SD(n,{pathname:E}),R=nN(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Ks([d,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Ks([d,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,t,r);return e&&R?k.createElement(Vp.Provider,{value:{location:rd({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:qs.Pop}},R):R}function JD(){let n=oN(),e=qD(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const ZD=k.createElement(JD,null);class eN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(Ji.Provider,{value:this.props.routeContext},k.createElement(HS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tN(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(Np);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Ji.Provider,{value:e},r)}function nN(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||kt(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:v,errors:E}=t,b=g.route.loader&&v[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||b){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let E,b=!1,R=null,C=null;t&&(E=u&&g.route.id?u[g.route.id]:void 0,R=g.route.errorElement||ZD,d&&(h<0&&v===0?(lN("route-fallback"),b=!0,C=null):h===v&&(b=!0,C=g.route.hydrateFallbackElement||null)));let B=e.concat(a.slice(0,v+1)),V=()=>{let M;return E?M=R:b?M=C:g.route.Component?M=k.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=m,k.createElement(tN,{match:g,routeContext:{outlet:m,matches:B,isDataRoute:t!=null},children:M})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?k.createElement(eN,{location:t.location,revalidation:t.revalidation,component:R,error:E,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}var KS=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(KS||{}),QS=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(QS||{});function rN(n){let e=k.useContext(Np);return e||kt(!1),e}function iN(n){let e=k.useContext(WS);return e||kt(!1),e}function sN(n){let e=k.useContext(Ji);return e||kt(!1),e}function YS(n){let e=sN(),t=e.matches[e.matches.length-1];return t.route.id||kt(!1),t.route.id}function oN(){var n;let e=k.useContext(HS),t=iN(),r=YS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function aN(){let{router:n}=rN(KS.UseNavigateStable),e=YS(QS.UseNavigateStable),t=k.useRef(!1);return qS(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,rd({fromRouteId:e},s)))},[n,e])}const cE={};function lN(n,e,t){cE[n]||(cE[n]=!0)}function uN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Ly(n){let{to:e,replace:t,state:r,relative:i}=n;yu()||kt(!1);let{future:s,static:a}=k.useContext(Xi),{matches:u}=k.useContext(Ji),{pathname:d}=xa(),h=GS(),m=Yv(e,Qv(u,s.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(m);return k.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function Li(n){kt(!1)}function cN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=qs.Pop,navigator:s,static:a=!1,future:u}=n;yu()&&kt(!1);let d=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:d,navigator:s,static:a,future:rd({v7_relativeSplatPath:!1},u)}),[d,u,s,a]);typeof r=="string"&&(r=gu(r));let{pathname:m="/",search:g="",hash:v="",state:E=null,key:b="default"}=r,R=k.useMemo(()=>{let C=Gl(m,d);return C==null?null:{location:{pathname:C,search:g,hash:v,state:E,key:b},navigationType:i}},[d,m,g,v,E,b,i]);return R==null?null:k.createElement(Xi.Provider,{value:h},k.createElement(Vp.Provider,{children:t,value:R}))}function dN(n){let{children:e,location:t}=n;return YD(Fy(e),t)}new Promise(()=>{});function Fy(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,Fy(r.props.children,s));return}r.type!==Li&&kt(!1),!r.props.index||!r.props.children||kt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Fy(r.props.children,s)),t.push(a)}),t}function Bf(){return Bf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bf.apply(this,arguments)}function XS(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function hN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function fN(n,e){return n.button===0&&(!e||e==="_self")&&!hN(n)}const pN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gN="6";try{window.__reactRouterVersion=gN}catch{}const yN=k.createContext({isTransitioning:!1}),vN="startTransition",dE=qv[vN];function _N(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=ED({window:i,v5Compat:!0}));let a=s.current,[u,d]=k.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},m=k.useCallback(g=>{h&&dE?dE(()=>d(g)):d(g)},[d,h]);return k.useLayoutEffect(()=>a.listen(m),[a,m]),k.useEffect(()=>uN(r),[r]),k.createElement(cN,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const wN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EN=k.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g}=e,v=XS(e,pN),{basename:E}=k.useContext(Xi),b,R=!1;if(typeof h=="string"&&TN.test(h)&&(b=h,wN))try{let M=new URL(window.location.href),z=h.startsWith("//")?new URL(M.protocol+h):new URL(h),te=Gl(z.pathname,E);z.origin===M.origin&&te!=null?h=te+z.search+z.hash:R=!0}catch{}let C=KD(h,{relative:i}),B=SN(h,{replace:a,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function V(M){r&&r(M),M.defaultPrevented||B(M)}return k.createElement("a",Bf({},v,{href:b||C,onClick:R||s?r:V,ref:t,target:d}))}),IN=k.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:u,to:d,viewTransition:h,children:m}=e,g=XS(e,mN),v=Op(d,{relative:g.relative}),E=xa(),b=k.useContext(WS),{navigator:R,basename:C}=k.useContext(Xi),B=b!=null&&CN(v)&&h===!0,V=R.encodeLocation?R.encodeLocation(v).pathname:v.pathname,M=E.pathname,z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(M=M.toLowerCase(),z=z?z.toLowerCase():null,V=V.toLowerCase()),z&&C&&(z=Gl(z,C)||z);const te=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let Z=M===V||!a&&M.startsWith(V)&&M.charAt(te)==="/",x=z!=null&&(z===V||!a&&z.startsWith(V)&&z.charAt(V.length)==="/"),S={isActive:Z,isPending:x,isTransitioning:B},D=Z?r:void 0,F;typeof s=="function"?F=s(S):F=[s,Z?"active":null,x?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(S):u;return k.createElement(EN,Bf({},g,{"aria-current":D,className:F,ref:t,style:L,to:d,viewTransition:h}),typeof m=="function"?m(S):m)});var Uy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Uy||(Uy={}));var hE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(hE||(hE={}));function PN(n){let e=k.useContext(Np);return e||kt(!1),e}function SN(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,d=GS(),h=xa(),m=Op(n,{relative:a});return k.useCallback(g=>{if(fN(g,t)){g.preventDefault();let v=r!==void 0?r:jf(h)===jf(m);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[h,d,m,r,i,t,n,s,a,u])}function CN(n,e){e===void 0&&(e={});let t=k.useContext(yN);t==null&&kt(!1);let{basename:r}=PN(Uy.useViewTransitionState),i=Op(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Gl(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Gl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return My(i.pathname,a)!=null||My(i.pathname,s)!=null}class AN extends en.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?X.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[X.jsx("h2",{children:"Se produjo un error"}),X.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(this.state.error?.stack||this.state.error)})]}):this.props.children}}const bN=()=>{};var fE={};const JS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},xN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ZS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let v=(u&15)<<2|h>>6,E=h&63;d||(E=64,a||(v=64)),r.push(t[m],t[g],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new RN;const v=s<<2|u>>4;if(r.push(v),h!==64){const E=u<<4&240|h>>2;if(r.push(E),g!==64){const b=h<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(n){const e=JS(n);return ZS.encodeByteArray(e,!0)},$f=function(n){return kN(n).replace(/\./g,"")},eC=function(n){try{return ZS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DN=()=>tC().__FIREBASE_DEFAULTS__,NN=()=>{if(typeof process>"u"||typeof fE>"u")return;const n=fE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eC(n[1]);return e&&JSON.parse(e)},Mp=()=>{try{return bN()||DN()||NN()||VN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nC=n=>Mp()?.emulatorHosts?.[n],rC=n=>{const e=nC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iC=()=>Mp()?.config,sC=n=>Mp()?.[`_${n}`];class ON{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ho(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xv(n){return(await fetch(n,{credentials:"include"})).ok}function MN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$f(JSON.stringify(t)),$f(JSON.stringify(a)),""].join(".")}const Bc={};function LN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Bc))Bc[e]?n.emulator.push(e):n.prod.push(e);return n}function FN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pE=!1;function Jv(n,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||Bc[n]===e||Bc[n]||pE)return;Bc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=LN().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{pE=!0,a()},v}function m(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=FN(r),E=t("text"),b=document.getElementById(E)||document.createElement("span"),R=t("learnmore"),C=document.getElementById(R)||document.createElement("a"),B=t("preprendIcon"),V=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;u(M),m(C,R);const z=h();d(V,B),M.append(V,b,C,z),document.body.appendChild(M)}s?(b.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function oC(){const n=Mp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function aC(){return!oC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lC(){return!oC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function uC(){try{return typeof indexedDB=="object"}catch{return!1}}function WN(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const HN="FirebaseError";class gi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=HN,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?qN(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new gi(i,u,r)}}function qN(n,e){return n.replace(GN,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GN=/\{\$([^}]+)}/g;function KN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(mE(s)&&mE(a)){if(!pa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function mE(n){return n!==null&&typeof n=="object"}function Sd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Vc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function QN(n,e){const t=new YN(n,e);return t.subscribe.bind(t)}class YN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jg),i.error===void 0&&(i.error=Jg),i.complete===void 0&&(i.complete=Jg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jg(){}function pt(n){return n&&n._delegate?n._delegate:n}class to{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yo="[DEFAULT]";let JN=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ON;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eV(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZN(n){return n===Yo?void 0:n}function eV(n){return n.instantiationMode==="EAGER"}class tV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const nV={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},rV=Ge.INFO,iV={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},sV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=iV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zv{constructor(e){this.name=e,this._logLevel=rV,this._logHandler=sV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const oV=(n,e)=>e.some(t=>n instanceof t);let gE,yE;function aV(){return gE||(gE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lV(){return yE||(yE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cC=new WeakMap,jy=new WeakMap,dC=new WeakMap,Zg=new WeakMap,e_=new WeakMap;function uV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Qs(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&cC.set(t,n)}).catch(()=>{}),e_.set(e,n),e}function cV(n){if(jy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});jy.set(n,e)}let By={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function dV(n){By=n(By)}function hV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ey(this),e,...t);return dC.set(r,e.sort?e.sort():[e]),Qs(r)}:lV().includes(n)?function(...e){return n.apply(ey(this),e),Qs(cC.get(this))}:function(...e){return Qs(n.apply(ey(this),e))}}function fV(n){return typeof n=="function"?hV(n):(n instanceof IDBTransaction&&cV(n),oV(n,aV())?new Proxy(n,By):n)}function Qs(n){if(n instanceof IDBRequest)return uV(n);if(Zg.has(n))return Zg.get(n);const e=fV(n);return e!==n&&(Zg.set(n,e),e_.set(e,n)),e}const ey=n=>e_.get(n);function pV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=Qs(a);return r&&a.addEventListener("upgradeneeded",d=>{r(Qs(a.result),d.oldVersion,d.newVersion,Qs(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const mV=["get","getKey","getAll","getAllKeys","count"],gV=["put","add","delete","clear"],ty=new Map;function vE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ty.get(e))return ty.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=gV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mV.includes(t)))return;const s=async function(a,...u){const d=this.transaction(a,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&d.done]))[0]};return ty.set(e,s),s}dV(n=>({...n,get:(e,t,r)=>vE(e,t)||n.get(e,t,r),has:(e,t)=>!!vE(e,t)||n.has(e,t)}));class yV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vV(n){return n.getComponent()?.type==="VERSION"}const $y="@firebase/app",_E="0.14.6";const Wi=new Zv("@firebase/app"),_V="@firebase/app-compat",wV="@firebase/analytics-compat",TV="@firebase/analytics",EV="@firebase/app-check-compat",IV="@firebase/app-check",PV="@firebase/auth",SV="@firebase/auth-compat",CV="@firebase/database",AV="@firebase/data-connect",bV="@firebase/database-compat",xV="@firebase/functions",RV="@firebase/functions-compat",kV="@firebase/installations",DV="@firebase/installations-compat",NV="@firebase/messaging",VV="@firebase/messaging-compat",OV="@firebase/performance",MV="@firebase/performance-compat",LV="@firebase/remote-config",FV="@firebase/remote-config-compat",UV="@firebase/storage",jV="@firebase/storage-compat",BV="@firebase/firestore",$V="@firebase/ai",zV="@firebase/firestore-compat",WV="firebase",HV="12.6.0";const zy="[DEFAULT]",qV={[$y]:"fire-core",[_V]:"fire-core-compat",[TV]:"fire-analytics",[wV]:"fire-analytics-compat",[IV]:"fire-app-check",[EV]:"fire-app-check-compat",[PV]:"fire-auth",[SV]:"fire-auth-compat",[CV]:"fire-rtdb",[AV]:"fire-data-connect",[bV]:"fire-rtdb-compat",[xV]:"fire-fn",[RV]:"fire-fn-compat",[kV]:"fire-iid",[DV]:"fire-iid-compat",[NV]:"fire-fcm",[VV]:"fire-fcm-compat",[OV]:"fire-perf",[MV]:"fire-perf-compat",[LV]:"fire-rc",[FV]:"fire-rc-compat",[UV]:"fire-gcs",[jV]:"fire-gcs-compat",[BV]:"fire-fst",[zV]:"fire-fst-compat",[$V]:"fire-vertex","fire-js":"fire-js",[WV]:"fire-js-all"};const zf=new Map,GV=new Map,Wy=new Map;function wE(n,e){try{n.container.addComponent(e)}catch(t){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){const e=n.name;if(Wy.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;Wy.set(e,n);for(const t of zf.values())wE(t,n);for(const t of GV.values())wE(t,n);return!0}function Lp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Bn(n){return n==null?!1:n.settings!==void 0}const KV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Pd("app","Firebase",KV);class QV{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}const vu=HV;function hC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:zy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ys.create("bad-app-name",{appName:String(i)});if(t||(t=iC()),!t)throw Ys.create("no-options");const s=zf.get(i);if(s){if(pa(t,s.options)&&pa(r,s.config))return s;throw Ys.create("duplicate-app",{appName:i})}const a=new tV(i);for(const d of Wy.values())a.addComponent(d);const u=new QV(t,r,a);return zf.set(i,u),u}function t_(n=zy){const e=zf.get(n);if(!e&&n===zy&&iC())return hC();if(!e)throw Ys.create("no-app",{appName:n});return e}function ai(n,e,t){let r=qV[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(a.join(" "));return}ma(new to(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const YV="firebase-heartbeat-database",XV=1,id="firebase-heartbeat-store";let ny=null;function fC(){return ny||(ny=pV(YV,XV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(id)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ys.create("idb-open",{originalErrorMessage:n.message})})),ny}async function JV(n){try{const t=(await fC()).transaction(id),r=await t.objectStore(id).get(pC(n));return await t.done,r}catch(e){if(e instanceof gi)Wi.warn(e.message);else{const t=Ys.create("idb-get",{originalErrorMessage:e?.message});Wi.warn(t.message)}}}async function TE(n,e){try{const r=(await fC()).transaction(id,"readwrite");await r.objectStore(id).put(e,pC(n)),await r.done}catch(t){if(t instanceof gi)Wi.warn(t.message);else{const r=Ys.create("idb-set",{originalErrorMessage:t?.message});Wi.warn(r.message)}}}function pC(n){return`${n.name}!${n.options.appId}`}const ZV=1024,eO=30;class tO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=EE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>eO){const i=iO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Wi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=EE(),{heartbeatsToSend:t,unsentEntries:r}=nO(this._heartbeatsCache.heartbeats),i=$f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Wi.warn(e),""}}}function EE(){return new Date().toISOString().substring(0,10)}function nO(n,e=ZV){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),IE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),IE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uC()?WN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return TE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return TE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function IE(n){return $f(JSON.stringify({version:2,heartbeats:n})).length}function iO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function sO(n){ma(new to("platform-logger",e=>new yV(e),"PRIVATE")),ma(new to("heartbeat",e=>new tO(e),"PRIVATE")),ai($y,_E,n),ai($y,_E,"esm2020"),ai("fire-js","")}sO("");var oO="firebase",aO="12.7.0";ai(oO,aO,"app");var PE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xs,mC;(function(){var n;function e(x,S){function D(){}D.prototype=S.prototype,x.F=S.prototype,x.prototype=new D,x.prototype.constructor=x,x.D=function(F,L,U){for(var P=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)P[Y-2]=arguments[Y];return S.prototype[L].apply(F,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,S,D){D||(D=0);const F=Array(16);if(typeof S=="string")for(var L=0;L<16;++L)F[L]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(L=0;L<16;++L)F[L]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=x.g[0],D=x.g[1],L=x.g[2];let U=x.g[3],P;P=S+(U^D&(L^U))+F[0]+3614090360&4294967295,S=D+(P<<7&4294967295|P>>>25),P=U+(L^S&(D^L))+F[1]+3905402710&4294967295,U=S+(P<<12&4294967295|P>>>20),P=L+(D^U&(S^D))+F[2]+606105819&4294967295,L=U+(P<<17&4294967295|P>>>15),P=D+(S^L&(U^S))+F[3]+3250441966&4294967295,D=L+(P<<22&4294967295|P>>>10),P=S+(U^D&(L^U))+F[4]+4118548399&4294967295,S=D+(P<<7&4294967295|P>>>25),P=U+(L^S&(D^L))+F[5]+1200080426&4294967295,U=S+(P<<12&4294967295|P>>>20),P=L+(D^U&(S^D))+F[6]+2821735955&4294967295,L=U+(P<<17&4294967295|P>>>15),P=D+(S^L&(U^S))+F[7]+4249261313&4294967295,D=L+(P<<22&4294967295|P>>>10),P=S+(U^D&(L^U))+F[8]+1770035416&4294967295,S=D+(P<<7&4294967295|P>>>25),P=U+(L^S&(D^L))+F[9]+2336552879&4294967295,U=S+(P<<12&4294967295|P>>>20),P=L+(D^U&(S^D))+F[10]+4294925233&4294967295,L=U+(P<<17&4294967295|P>>>15),P=D+(S^L&(U^S))+F[11]+2304563134&4294967295,D=L+(P<<22&4294967295|P>>>10),P=S+(U^D&(L^U))+F[12]+1804603682&4294967295,S=D+(P<<7&4294967295|P>>>25),P=U+(L^S&(D^L))+F[13]+4254626195&4294967295,U=S+(P<<12&4294967295|P>>>20),P=L+(D^U&(S^D))+F[14]+2792965006&4294967295,L=U+(P<<17&4294967295|P>>>15),P=D+(S^L&(U^S))+F[15]+1236535329&4294967295,D=L+(P<<22&4294967295|P>>>10),P=S+(L^U&(D^L))+F[1]+4129170786&4294967295,S=D+(P<<5&4294967295|P>>>27),P=U+(D^L&(S^D))+F[6]+3225465664&4294967295,U=S+(P<<9&4294967295|P>>>23),P=L+(S^D&(U^S))+F[11]+643717713&4294967295,L=U+(P<<14&4294967295|P>>>18),P=D+(U^S&(L^U))+F[0]+3921069994&4294967295,D=L+(P<<20&4294967295|P>>>12),P=S+(L^U&(D^L))+F[5]+3593408605&4294967295,S=D+(P<<5&4294967295|P>>>27),P=U+(D^L&(S^D))+F[10]+38016083&4294967295,U=S+(P<<9&4294967295|P>>>23),P=L+(S^D&(U^S))+F[15]+3634488961&4294967295,L=U+(P<<14&4294967295|P>>>18),P=D+(U^S&(L^U))+F[4]+3889429448&4294967295,D=L+(P<<20&4294967295|P>>>12),P=S+(L^U&(D^L))+F[9]+568446438&4294967295,S=D+(P<<5&4294967295|P>>>27),P=U+(D^L&(S^D))+F[14]+3275163606&4294967295,U=S+(P<<9&4294967295|P>>>23),P=L+(S^D&(U^S))+F[3]+4107603335&4294967295,L=U+(P<<14&4294967295|P>>>18),P=D+(U^S&(L^U))+F[8]+1163531501&4294967295,D=L+(P<<20&4294967295|P>>>12),P=S+(L^U&(D^L))+F[13]+2850285829&4294967295,S=D+(P<<5&4294967295|P>>>27),P=U+(D^L&(S^D))+F[2]+4243563512&4294967295,U=S+(P<<9&4294967295|P>>>23),P=L+(S^D&(U^S))+F[7]+1735328473&4294967295,L=U+(P<<14&4294967295|P>>>18),P=D+(U^S&(L^U))+F[12]+2368359562&4294967295,D=L+(P<<20&4294967295|P>>>12),P=S+(D^L^U)+F[5]+4294588738&4294967295,S=D+(P<<4&4294967295|P>>>28),P=U+(S^D^L)+F[8]+2272392833&4294967295,U=S+(P<<11&4294967295|P>>>21),P=L+(U^S^D)+F[11]+1839030562&4294967295,L=U+(P<<16&4294967295|P>>>16),P=D+(L^U^S)+F[14]+4259657740&4294967295,D=L+(P<<23&4294967295|P>>>9),P=S+(D^L^U)+F[1]+2763975236&4294967295,S=D+(P<<4&4294967295|P>>>28),P=U+(S^D^L)+F[4]+1272893353&4294967295,U=S+(P<<11&4294967295|P>>>21),P=L+(U^S^D)+F[7]+4139469664&4294967295,L=U+(P<<16&4294967295|P>>>16),P=D+(L^U^S)+F[10]+3200236656&4294967295,D=L+(P<<23&4294967295|P>>>9),P=S+(D^L^U)+F[13]+681279174&4294967295,S=D+(P<<4&4294967295|P>>>28),P=U+(S^D^L)+F[0]+3936430074&4294967295,U=S+(P<<11&4294967295|P>>>21),P=L+(U^S^D)+F[3]+3572445317&4294967295,L=U+(P<<16&4294967295|P>>>16),P=D+(L^U^S)+F[6]+76029189&4294967295,D=L+(P<<23&4294967295|P>>>9),P=S+(D^L^U)+F[9]+3654602809&4294967295,S=D+(P<<4&4294967295|P>>>28),P=U+(S^D^L)+F[12]+3873151461&4294967295,U=S+(P<<11&4294967295|P>>>21),P=L+(U^S^D)+F[15]+530742520&4294967295,L=U+(P<<16&4294967295|P>>>16),P=D+(L^U^S)+F[2]+3299628645&4294967295,D=L+(P<<23&4294967295|P>>>9),P=S+(L^(D|~U))+F[0]+4096336452&4294967295,S=D+(P<<6&4294967295|P>>>26),P=U+(D^(S|~L))+F[7]+1126891415&4294967295,U=S+(P<<10&4294967295|P>>>22),P=L+(S^(U|~D))+F[14]+2878612391&4294967295,L=U+(P<<15&4294967295|P>>>17),P=D+(U^(L|~S))+F[5]+4237533241&4294967295,D=L+(P<<21&4294967295|P>>>11),P=S+(L^(D|~U))+F[12]+1700485571&4294967295,S=D+(P<<6&4294967295|P>>>26),P=U+(D^(S|~L))+F[3]+2399980690&4294967295,U=S+(P<<10&4294967295|P>>>22),P=L+(S^(U|~D))+F[10]+4293915773&4294967295,L=U+(P<<15&4294967295|P>>>17),P=D+(U^(L|~S))+F[1]+2240044497&4294967295,D=L+(P<<21&4294967295|P>>>11),P=S+(L^(D|~U))+F[8]+1873313359&4294967295,S=D+(P<<6&4294967295|P>>>26),P=U+(D^(S|~L))+F[15]+4264355552&4294967295,U=S+(P<<10&4294967295|P>>>22),P=L+(S^(U|~D))+F[6]+2734768916&4294967295,L=U+(P<<15&4294967295|P>>>17),P=D+(U^(L|~S))+F[13]+1309151649&4294967295,D=L+(P<<21&4294967295|P>>>11),P=S+(L^(D|~U))+F[4]+4149444226&4294967295,S=D+(P<<6&4294967295|P>>>26),P=U+(D^(S|~L))+F[11]+3174756917&4294967295,U=S+(P<<10&4294967295|P>>>22),P=L+(S^(U|~D))+F[2]+718787259&4294967295,L=U+(P<<15&4294967295|P>>>17),P=D+(U^(L|~S))+F[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+U&4294967295}r.prototype.v=function(x,S){S===void 0&&(S=x.length);const D=S-this.blockSize,F=this.C;let L=this.h,U=0;for(;U<S;){if(L==0)for(;U<=D;)i(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<S;)if(F[L++]=x.charCodeAt(U++),L==this.blockSize){i(this,F),L=0;break}}else for(;U<S;)if(F[L++]=x[U++],L==this.blockSize){i(this,F),L=0;break}}this.h=L,this.o+=S},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;S=this.o*8;for(var D=x.length-8;D<x.length;++D)x[D]=S&255,S/=256;for(this.v(x),x=Array(16),S=0,D=0;D<4;++D)for(let F=0;F<32;F+=8)x[S++]=this.g[D]>>>F&255;return x};function s(x,S){var D=u;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=S(x)}function a(x,S){this.h=S;const D=[];let F=!0;for(let L=x.length-1;L>=0;L--){const U=x[L]|0;F&&U==S||(D[L]=U,F=!1)}this.g=D}var u={};function d(x){return-128<=x&&x<128?s(x,function(S){return new a([S|0],S<0?-1:0)}):new a([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return g;if(x<0)return C(h(-x));const S=[];let D=1;for(let F=0;x>=D;F++)S[F]=x/D|0,D*=4294967296;return new a(S,0)}function m(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return C(m(x.substring(1),S));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=h(Math.pow(S,8));let F=g;for(let U=0;U<x.length;U+=8){var L=Math.min(8,x.length-U);const P=parseInt(x.substring(U,U+L),S);L<8?(L=h(Math.pow(S,L)),F=F.j(L).add(h(P))):(F=F.j(D),F=F.add(h(P)))}return F}var g=d(0),v=d(1),E=d(16777216);n=a.prototype,n.m=function(){if(R(this))return-C(this).m();let x=0,S=1;for(let D=0;D<this.g.length;D++){const F=this.i(D);x+=(F>=0?F:4294967296+F)*S,S*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(R(this))return"-"+C(this).toString(x);const S=h(Math.pow(x,6));var D=this;let F="";for(;;){const L=z(D,S).g;D=B(D,L.j(S));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(x);if(D=L,b(D))return U+F;for(;U.length<6;)U="0"+U;F=U+F}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(let S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function R(x){return x.h==-1}n.l=function(x){return x=B(this,x),R(x)?-1:b(x)?0:1};function C(x){const S=x.g.length,D=[];for(let F=0;F<S;F++)D[F]=~x.g[F];return new a(D,~x.h).add(v)}n.abs=function(){return R(this)?C(this):this},n.add=function(x){const S=Math.max(this.g.length,x.g.length),D=[];let F=0;for(let L=0;L<=S;L++){let U=F+(this.i(L)&65535)+(x.i(L)&65535),P=(U>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);F=P>>>16,U&=65535,P&=65535,D[L]=P<<16|U}return new a(D,D[D.length-1]&-2147483648?-1:0)};function B(x,S){return x.add(C(S))}n.j=function(x){if(b(this)||b(x))return g;if(R(this))return R(x)?C(this).j(C(x)):C(C(this).j(x));if(R(x))return C(this.j(C(x)));if(this.l(E)<0&&x.l(E)<0)return h(this.m()*x.m());const S=this.g.length+x.g.length,D=[];for(var F=0;F<2*S;F++)D[F]=0;for(F=0;F<this.g.length;F++)for(let L=0;L<x.g.length;L++){const U=this.i(F)>>>16,P=this.i(F)&65535,Y=x.i(L)>>>16,se=x.i(L)&65535;D[2*F+2*L]+=P*se,V(D,2*F+2*L),D[2*F+2*L+1]+=U*se,V(D,2*F+2*L+1),D[2*F+2*L+1]+=P*Y,V(D,2*F+2*L+1),D[2*F+2*L+2]+=U*Y,V(D,2*F+2*L+2)}for(x=0;x<S;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=S;x<2*S;x++)D[x]=0;return new a(D,0)};function V(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function M(x,S){this.g=x,this.h=S}function z(x,S){if(b(S))throw Error("division by zero");if(b(x))return new M(g,g);if(R(x))return S=z(C(x),S),new M(C(S.g),C(S.h));if(R(S))return S=z(x,C(S)),new M(C(S.g),S.h);if(x.g.length>30){if(R(x)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var D=v,F=S;F.l(x)<=0;)D=te(D),F=te(F);var L=Z(D,1),U=Z(F,1);for(F=Z(F,2),D=Z(D,2);!b(F);){var P=U.add(F);P.l(x)<=0&&(L=L.add(D),U=P),F=Z(F,1),D=Z(D,1)}return S=B(x,L.j(S)),new M(L,S)}for(L=g;x.l(S)>=0;){for(D=Math.max(1,Math.floor(x.m()/S.m())),F=Math.ceil(Math.log(D)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),U=h(D),P=U.j(S);R(P)||P.l(x)>0;)D-=F,U=h(D),P=U.j(S);b(U)&&(U=v),L=L.add(U),x=B(x,P)}return new M(L,x)}n.B=function(x){return z(this,x).h},n.and=function(x){const S=Math.max(this.g.length,x.g.length),D=[];for(let F=0;F<S;F++)D[F]=this.i(F)&x.i(F);return new a(D,this.h&x.h)},n.or=function(x){const S=Math.max(this.g.length,x.g.length),D=[];for(let F=0;F<S;F++)D[F]=this.i(F)|x.i(F);return new a(D,this.h|x.h)},n.xor=function(x){const S=Math.max(this.g.length,x.g.length),D=[];for(let F=0;F<S;F++)D[F]=this.i(F)^x.i(F);return new a(D,this.h^x.h)};function te(x){const S=x.g.length+1,D=[];for(let F=0;F<S;F++)D[F]=x.i(F)<<1|x.i(F-1)>>>31;return new a(D,x.h)}function Z(x,S){const D=S>>5;S%=32;const F=x.g.length-D,L=[];for(let U=0;U<F;U++)L[U]=S>0?x.i(U+D)>>>S|x.i(U+D+1)<<32-S:x.i(U+D);return new a(L,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,Xs=a}).apply(typeof PE<"u"?PE:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var gC,Oc,yC,Ef,Hy,vC,_C,wC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var w=0;w<f.length;++w){var T=f[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(f,w){if(w)e:{var T=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var q=f[A];if(!(q in T))break e;T=T[q]}f=f[f.length-1],A=T[f],w=w(A),w!=A&&w!=null&&e(T,f,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(w){var T=[],A;for(A in w)Object.prototype.hasOwnProperty.call(w,A)&&T.push([A,w[A]]);return T}});var s=s||{},a=this||self;function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function d(f,w,T){return f.call.apply(f.bind,arguments)}function h(f,w,T){return h=d,h.apply(null,arguments)}function m(f,w){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function g(f,w){function T(){}T.prototype=w.prototype,f.Z=w.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(A,q,J){for(var ge=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ge[Fe-2]=arguments[Fe];return w.prototype[q].apply(A,ge)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const w=f.length;if(w>0){const T=Array(w);for(let A=0;A<w;A++)T[A]=f[A];return T}return[]}function b(f,w){for(let A=1;A<arguments.length;A++){const q=arguments[A];var T=typeof q;if(T=T!="object"?T:q?Array.isArray(q)?"array":T:"null",T=="array"||T=="object"&&typeof q.length=="number"){T=f.length||0;const J=q.length||0;f.length=T+J;for(let ge=0;ge<J;ge++)f[T+ge]=q[ge]}else f.push(q)}}class R{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function C(f){a.setTimeout(()=>{throw f},0)}function B(){var f=x;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class V{constructor(){this.h=this.g=null}add(w,T){const A=M.get();A.set(w,T),this.h?this.h.next=A:this.g=A,this.h=A}}var M=new R(()=>new z,f=>f.reset());class z{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Z=!1,x=new V,S=()=>{const f=Promise.resolve(void 0);te=()=>{f.then(D)}};function D(){for(var f;f=B();){try{f.h.call(f.g)}catch(T){C(T)}var w=M;w.j(f),w.h<100&&(w.h++,f.next=w.g,w.g=f)}Z=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};a.addEventListener("test",T,w),a.removeEventListener("test",T,w)}catch{}return f})();function P(f){return/^[\s\xa0]*$/.test(f)}function Y(f,w){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,w)}g(Y,L),Y.prototype.init=function(f,w){const T=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget,w||(T=="mouseover"?w=f.fromElement:T=="mouseout"&&(w=f.toElement)),this.relatedTarget=w,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),re=0;function oe(f,w,T,A,q){this.listener=f,this.proxy=null,this.src=w,this.type=T,this.capture=!!A,this.ha=q,this.key=++re,this.da=this.fa=!1}function ee(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function de(f,w,T){for(const A in f)w.call(T,f[A],A,f)}function ne(f,w){for(const T in f)w.call(void 0,f[T],T,f)}function N(f){const w={};for(const T in f)w[T]=f[T];return w}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(f,w){let T,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(T in A)f[T]=A[T];for(let J=0;J<K.length;J++)T=K[J],Object.prototype.hasOwnProperty.call(A,T)&&(f[T]=A[T])}}function pe(f){this.src=f,this.g={},this.h=0}pe.prototype.add=function(f,w,T,A,q){const J=f.toString();f=this.g[J],f||(f=this.g[J]=[],this.h++);const ge=Se(f,w,A,q);return ge>-1?(w=f[ge],T||(w.fa=!1)):(w=new oe(w,this.src,J,!!A,q),w.fa=T,f.push(w)),w};function me(f,w){const T=w.type;if(T in f.g){var A=f.g[T],q=Array.prototype.indexOf.call(A,w,void 0),J;(J=q>=0)&&Array.prototype.splice.call(A,q,1),J&&(ee(w),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Se(f,w,T,A){for(let q=0;q<f.length;++q){const J=f[q];if(!J.da&&J.listener==w&&J.capture==!!T&&J.ha==A)return q}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Be={};function He(f,w,T,A,q){if(Array.isArray(w)){for(let J=0;J<w.length;J++)He(f,w[J],T,A,q);return null}return T=rs(T),f&&f[se]?f.J(w,T,u(A)?!!A.capture:!1,q):ct(f,w,T,!1,A,q)}function ct(f,w,T,A,q,J){if(!w)throw Error("Invalid event type");const ge=u(q)?!!q.capture:!!q;let Fe=vi(f);if(Fe||(f[Me]=Fe=new pe(f)),T=Fe.add(w,T,A,ge,J),T.proxy)return T;if(A=Xt(),T.proxy=A,A.src=f,A.listener=T,f.addEventListener)U||(q=ge),q===void 0&&(q=!1),f.addEventListener(w.toString(),A,q);else if(f.attachEvent)f.attachEvent(wr(w.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Xt(){function f(T){return w.call(f.src,f.listener,T)}const w=Oa;return f}function ns(f,w,T,A,q){if(Array.isArray(w))for(var J=0;J<w.length;J++)ns(f,w[J],T,A,q);else A=u(A)?!!A.capture:!!A,T=rs(T),f&&f[se]?(f=f.i,J=String(w).toString(),J in f.g&&(w=f.g[J],T=Se(w,T,A,q),T>-1&&(ee(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete f.g[J],f.h--)))):f&&(f=vi(f))&&(w=f.g[w.toString()],f=-1,w&&(f=Se(w,T,A,q)),(T=f>-1?w[f]:null)&&Or(T))}function Or(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[se])me(w.i,f);else{var T=f.type,A=f.proxy;w.removeEventListener?w.removeEventListener(T,A,f.capture):w.detachEvent?w.detachEvent(wr(T),A):w.addListener&&w.removeListener&&w.removeListener(A),(T=vi(w))?(me(T,f),T.h==0&&(T.src=null,w[Me]=null)):ee(f)}}}function wr(f){return f in Be?Be[f]:Be[f]="on"+f}function Oa(f,w){if(f.da)f=!0;else{w=new Y(w,this);const T=f.listener,A=f.ha||f.src;f.fa&&Or(f),f=T.call(A,w)}return f}function vi(f){return f=f[Me],f instanceof pe?f:null}var Mr="__closure_events_fn_"+(Math.random()*1e9>>>0);function rs(f){return typeof f=="function"?f:(f[Mr]||(f[Mr]=function(w){return f.handleEvent(w)}),f[Mr])}function St(){F.call(this),this.i=new pe(this),this.M=this,this.G=null}g(St,F),St.prototype[se]=!0,St.prototype.removeEventListener=function(f,w,T,A){ns(this,f,w,T,A)};function $e(f,w){var T,A=f.G;if(A)for(T=[];A;A=A.G)T.push(A);if(f=f.M,A=w.type||w,typeof w=="string")w=new L(w,f);else if(w instanceof L)w.target=w.target||f;else{var q=w;w=new L(A,f),he(w,q)}q=!0;let J,ge;if(T)for(ge=T.length-1;ge>=0;ge--)J=w.g=T[ge],q=qn(J,A,!0,w)&&q;if(J=w.g=f,q=qn(J,A,!0,w)&&q,q=qn(J,A,!1,w)&&q,T)for(ge=0;ge<T.length;ge++)J=w.g=T[ge],q=qn(J,A,!1,w)&&q}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var f=this.i;for(const w in f.g){const T=f.g[w];for(let A=0;A<T.length;A++)ee(T[A]);delete f.g[w],f.h--}}this.G=null},St.prototype.J=function(f,w,T,A){return this.i.add(String(f),w,!1,T,A)},St.prototype.K=function(f,w,T,A){return this.i.add(String(f),w,!0,T,A)};function qn(f,w,T,A){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();let q=!0;for(let J=0;J<w.length;++J){const ge=w[J];if(ge&&!ge.da&&ge.capture==T){const Fe=ge.listener,Lt=ge.ha||ge.src;ge.fa&&me(f.i,ge),q=Fe.call(Lt,A)!==!1&&q}}return q&&!A.defaultPrevented}function wo(f,w){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(f,w||0)}function Au(f){f.g=wo(()=>{f.g=null,f.i&&(f.i=!1,Au(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class $d extends F{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Au(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(f){F.call(this),this.h=f,this.g={}}g(is,F);var bu=[];function Ma(f){de(f.g,function(w,T){this.g.hasOwnProperty(T)&&Or(w)},f),f.g={}}is.prototype.N=function(){is.Z.N.call(this),Ma(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=a.JSON.stringify,zd=a.JSON.parse,To=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function os(){}function Wd(){}var as={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function La(){L.call(this,"d")}g(La,L);function xu(){L.call(this,"c")}g(xu,L);var Tr={},Fa=null;function ls(){return Fa=Fa||new St}Tr.Ia="serverreachability";function Ua(f){L.call(this,Tr.Ia,f)}g(Ua,L);function _i(f){const w=ls();$e(w,new Ua(w))}Tr.STAT_EVENT="statevent";function wi(f,w){L.call(this,Tr.STAT_EVENT,f),this.stat=w}g(wi,L);function Dt(f){const w=ls();$e(w,new wi(w,f))}Tr.Ja="timingevent";function Ru(f,w){L.call(this,Tr.Ja,f),this.size=w}g(Ru,L);function us(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},w)}function cs(){this.g=!0}cs.prototype.ua=function(){this.g=!1};function Hd(f,w,T,A,q,J){f.info(function(){if(f.g)if(J){var ge="",Fe=J.split("&");for(let ot=0;ot<Fe.length;ot++){var Lt=Fe[ot].split("=");if(Lt.length>1){const Wt=Lt[0];Lt=Lt[1];const Jn=Wt.split("_");ge=Jn.length>=2&&Jn[1]=="type"?ge+(Wt+"="+Lt+"&"):ge+(Wt+"=redacted&")}}}else ge=null;else ge=J;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+w+`
`+T+`
`+ge})}function qd(f,w,T,A,q,J,ge){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+w+`
`+T+`
`+J+" "+ge})}function Lr(f,w,T,A){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Eo(f,T)+(A?" "+A:"")})}function Gd(f,w){f.info(function(){return"TIMEOUT: "+w})}cs.prototype.info=function(){};function Eo(f,w){if(!f.g)return w;if(!w)return null;try{const J=JSON.parse(w);if(J){for(f=0;f<J.length;f++)if(Array.isArray(J[f])){var T=J[f];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return ss(J)}catch{return w}}var ds={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kd;function Ti(){}g(Ti,os),Ti.prototype.g=function(){return new XMLHttpRequest},Kd=new Ti;function Fr(f){return encodeURIComponent(String(f))}function ja(f){var w=1;f=f.split(":");const T=[];for(;w>0&&f.length;)T.push(f.shift()),w--;return f.length&&T.push(f.join(":")),T}function lr(f,w,T,A){this.j=f,this.i=w,this.l=T,this.S=A||1,this.V=new is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qd}function Qd(){this.i=null,this.g="",this.h=!1}var Yd={},ku={};function Er(f,w,T){f.M=1,f.A=Ii(ur(w)),f.u=T,f.R=!0,Du(f,null)}function Du(f,w){f.F=Date.now(),Io(f),f.B=ur(f.A);var T=f.B,A=f.S;Array.isArray(A)||(A=[String(A)]),$u(T.i,"t",A),f.C=0,T=f.j.L,f.h=new Qd,f.g=oh(f.j,T?w:null,!f.u),f.P>0&&(f.O=new $d(h(f.Y,f,f.g),f.P)),w=f.V,T=f.g,A=f.ba;var q="readystatechange";Array.isArray(q)||(q&&(bu[0]=q.toString()),q=bu);for(let J=0;J<q.length;J++){const ge=He(T,q[J],A||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=f.J?N(f.J):{},f.u?(f.v||(f.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,w)):(f.v="GET",f.g.ea(f.B,f.v,null,w)),_i(),Hd(f.i,f.v,f.B,f.l,f.S,f.u)}lr.prototype.ba=function(f){f=f.target;const w=this.O;w&&Hr(f)==3?w.j():this.Y(f)},lr.prototype.Y=function(f){try{if(f==this.g)e:{const Fe=Hr(this.g),Lt=this.g.ya(),ot=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||ih(this.g)))){this.K||Fe!=4||Lt==7||(Lt==8||ot<=0?_i(3):_i(2)),Ba(this);var w=this.g.ca();this.X=w;var T=Xd(this);if(this.o=w==200,qd(this.i,this.v,this.B,this.l,this.S,Fe,w),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(A)){var J=A;break t}}J=null}if(f=J)Lr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yt(this,f);else{this.o=!1,this.m=3,Dt(12),Ei(this),Po(this);break e}}if(this.R){f=!0;let Wt;for(;!this.K&&this.C<T.length;)if(Wt=Zd(this,T),Wt==ku){Fe==4&&(this.m=4,Dt(14),f=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Yd){this.m=4,Dt(15),Lr(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else Lr(this.i,this.l,Wt,null),yt(this,Wt);if(Jd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||T.length!=0||this.h.h||(this.m=1,Dt(16),f=!1),this.o=this.o&&f,!f)Lr(this.i,this.l,T,"[Invalid Chunked Response]"),Ei(this),Po(this);else if(T.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),No(ge),ge.P=!0,Dt(11))}}else Lr(this.i,this.l,T,null),yt(this,T);Fe==4&&Ei(this),this.o&&!this.K&&(Fe==4?Xa(this.j,this):(this.o=!1,Io(this)))}else Wu(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Ei(this),Po(this)}}}catch{}};function Xd(f){if(!Jd(f))return f.g.la();const w=ih(f.g);if(w==="")return"";let T="";const A=w.length,q=Hr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ei(f),Po(f),"";f.h.i=new a.TextDecoder}for(let J=0;J<A;J++)f.h.h=!0,T+=f.h.i.decode(w[J],{stream:!(q&&J==A-1)});return w.length=0,f.h.g+=T,f.C=0,f.h.g}function Jd(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Zd(f,w){var T=f.C,A=w.indexOf(`
`,T);return A==-1?ku:(T=Number(w.substring(T,A)),isNaN(T)?Yd:(A+=1,A+T>w.length?ku:(w=w.slice(A,A+T),f.C=A+T,w)))}lr.prototype.cancel=function(){this.K=!0,Ei(this)};function Io(f){f.T=Date.now()+f.H,Nu(f,f.H)}function Nu(f,w){if(f.D!=null)throw Error("WatchDog timer not null");f.D=us(h(f.aa,f),w)}function Ba(f){f.D&&(a.clearTimeout(f.D),f.D=null)}lr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Gd(this.i,this.B),this.M!=2&&(_i(),Dt(17)),Ei(this),this.m=2,Po(this)):Nu(this,this.T-f)};function Po(f){f.j.I==0||f.K||Xa(f.j,f)}function Ei(f){Ba(f);var w=f.O;w&&typeof w.dispose=="function"&&w.dispose(),f.O=null,Ma(f.V),f.g&&(w=f.g,f.g=null,w.abort(),w.dispose())}function yt(f,w){try{var T=f.j;if(T.I!=0&&(T.g==f||Ou(T.h,f))){if(!f.L&&Ou(T.h,f)&&T.I==3){try{var A=T.Ba.g.parse(w)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)Ya(T),Yn(T);else break e;Kr(T),Dt(18)}}else T.xa=q[1],0<T.xa-T.K&&q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=us(h(T.Va,T),6e3));So(T.h)<=1&&T.ta&&(T.ta=void 0)}else Xn(T,11)}else if((f.L||T.g==f)&&Ya(T),!P(w))for(q=T.Ba.g.parse(w),w=0;w<q.length;w++){let ot=q[w];const Wt=ot[0];if(!(Wt<=T.K))if(T.K=Wt,ot=ot[1],T.I==2)if(ot[0]=="c"){T.M=ot[1],T.ba=ot[2];const Jn=ot[3];Jn!=null&&(T.ka=Jn,T.j.info("VER="+T.ka));const bi=ot[4];bi!=null&&(T.za=bi,T.j.info("SVER="+T.za));const Qr=ot[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(A=1.5*Qr,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Yr=f.g;if(Yr){const el=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(el){var J=A.h;J.g||el.indexOf("spdy")==-1&&el.indexOf("quic")==-1&&el.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(za(J,J.h),J.h=null))}if(A.G){const Gu=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gu&&(A.wa=Gu,rt(A.J,A.G,Gu))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var ge=f;if(A.na=qu(A,A.L?A.ba:null,A.W),ge.L){Co(A.h,ge);var Fe=ge,Lt=A.O;Lt&&(Fe.H=Lt),Fe.D&&(Ba(Fe),Io(Fe)),A.g=ge}else yn(A);T.i.length>0&&Ai(T)}else ot[0]!="stop"&&ot[0]!="close"||Xn(T,7);else T.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Xn(T,7):Ka(T):ot[0]!="noop"&&T.l&&T.l.qa(ot),T.A=0)}}_i(4)}catch{}}var Im=class{constructor(f,w){this.g=f,this.map=w}};function $a(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vu(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function So(f){return f.h?1:f.g?f.g.size:0}function Ou(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function za(f,w){f.g?f.g.add(w):f.h=w}function Co(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}$a.prototype.cancel=function(){if(this.i=Gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Gn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const T of f.g.values())w=w.concat(T.G);return w}return E(f.i)}var eh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(f,w){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const A=f[T].indexOf("=");let q,J=null;A>=0?(q=f[T].substring(0,A),J=f[T].substring(A+1)):q=f[T],w(q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Ur(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;f instanceof Ur?(this.l=f.l,Ao(this,f.j),this.o=f.o,this.g=f.g,jr(this,f.u),this.h=f.h,fs(this,zu(f.i)),this.m=f.m):f&&(w=String(f).match(eh))?(this.l=!1,Ao(this,w[1]||"",!0),this.o=bo(w[2]||""),this.g=bo(w[3]||"",!0),jr(this,w[4]),this.h=bo(w[5]||"",!0),fs(this,w[6]||"",!0),this.m=bo(w[7]||"")):(this.l=!1,this.i=new Ke(null,this.l))}Ur.prototype.toString=function(){const f=[];var w=this.j;w&&f.push(xo(w,Lu,!0),":");var T=this.g;return(T||w=="file")&&(f.push("//"),(w=this.o)&&f.push(xo(w,Lu,!0),"@"),f.push(Fr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(xo(T,T.charAt(0)=="/"?Ro:Fu,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",xo(T,Uu)),f.join("")},Ur.prototype.resolve=function(f){const w=ur(this);let T=!!f.j;T?Ao(w,f.j):T=!!f.o,T?w.o=f.o:T=!!f.g,T?w.g=f.g:T=f.u!=null;var A=f.h;if(T)jr(w,f.u);else if(T=!!f.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=w.h.lastIndexOf("/");q!=-1&&(A=w.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const J=[];for(let ge=0;ge<q.length;){const Fe=q[ge++];Fe=="."?A&&ge==q.length&&J.push(""):Fe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&ge==q.length&&J.push("")):(J.push(Fe),A=!0)}A=J.join("/")}else A=q}return T?w.h=A:T=f.i.toString()!=="",T?fs(w,zu(f.i)):T=!!f.m,T&&(w.m=f.m),w};function ur(f){return new Ur(f)}function Ao(f,w,T){f.j=T?bo(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function jr(f,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);f.u=w}else f.u=null}function fs(f,w,T){w instanceof Ke?(f.i=w,Ha(f.i,f.l)):(T||(w=xo(w,Pm)),f.i=new Ke(w,f.l))}function rt(f,w,T){f.i.set(w,T)}function Ii(f){return rt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function bo(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function xo(f,w,T){return typeof f=="string"?(f=encodeURI(f).replace(w,Mu),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Mu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Lu=/[#\/\?@]/g,Fu=/[#\?:]/g,Ro=/[#\?]/g,Pm=/[#\?@]/g,Uu=/#/g;function Ke(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Br(f){f.g||(f.g=new Map,f.h=0,f.i&&Kn(f.i,function(w,T){f.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=Ke.prototype,n.add=function(f,w){Br(this),this.i=null,f=$r(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(w),this.h+=1,this};function ju(f,w){Br(f),w=$r(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Wa(f,w){return Br(f),w=$r(f,w),f.g.has(w)}n.forEach=function(f,w){Br(this),this.g.forEach(function(T,A){T.forEach(function(q){f.call(w,q,A,this)},this)},this)};function Bu(f,w){Br(f);let T=[];if(typeof w=="string")Wa(f,w)&&(T=T.concat(f.g.get($r(f,w))));else for(f=Array.from(f.g.values()),w=0;w<f.length;w++)T=T.concat(f[w]);return T}n.set=function(f,w){return Br(this),this.i=null,f=$r(this,f),Wa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=Bu(this,f),f.length>0?String(f[0]):w):w};function $u(f,w,T){ju(f,w),T.length>0&&(f.i=null,f.g.set($r(f,w),E(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(let A=0;A<w.length;A++){var T=w[A];const q=Fr(T);T=Bu(this,T);for(let J=0;J<T.length;J++){let ge=q;T[J]!==""&&(ge+="="+Fr(T[J])),f.push(ge)}}return this.i=f.join("&")};function zu(f){const w=new Ke;return w.i=f.i,f.g&&(w.g=new Map(f.g),w.h=f.h),w}function $r(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Ha(f,w){w&&!f.j&&(Br(f),f.i=null,f.g.forEach(function(T,A){const q=A.toLowerCase();A!=q&&(ju(this,A),$u(this,q,T))},f)),f.j=w}function zr(f,w){const T=new cs;if(a.Image){const A=new Image;A.onload=m(dn,T,"TestLoadImage: loaded",!0,w,A),A.onerror=m(dn,T,"TestLoadImage: error",!1,w,A),A.onabort=m(dn,T,"TestLoadImage: abort",!1,w,A),A.ontimeout=m(dn,T,"TestLoadImage: timeout",!1,w,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else w(!1)}function Wr(f,w){const T=new cs,A=new AbortController,q=setTimeout(()=>{A.abort(),dn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:A.signal}).then(J=>{clearTimeout(q),J.ok?dn(T,"TestPingServer: ok",!0,w):dn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(q),dn(T,"TestPingServer: error",!1,w)})}function dn(f,w,T,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(T)}catch{}}function ko(){this.g=new To}function Pi(f){this.i=f.Sb||null,this.h=f.ab||!1}g(Pi,os),Pi.prototype.g=function(){return new Qn(this.i,this.h)};function Qn(f,w){St.call(this),this.H=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Qn,St),n=Qn.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=w,this.readyState=1,Ir(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(w.body=f),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;th(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function th(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?ps(this):Ir(this),this.readyState==3&&th(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ps(this))},n.Na=function(f){this.g&&(this.response=f,ps(this))},n.ga=function(){this.g&&ps(this)};function ps(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Ir(f)}n.setRequestHeader=function(f,w){this.A.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=w.next();return f.join(`\r
`)};function Ir(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function nh(f){let w="";return de(f,function(T,A){w+=A,w+=":",w+=T,w+=`\r
`}),w}function qa(f,w,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=nh(T),typeof f=="string"?T!=null&&Fr(T):rt(f,w,T))}function ht(f){St.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ht,St);var rh=/^https?$/i,Sm=["POST","PUT"];n=ht.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,w,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kd.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(J){ms(this,J);return}if(f=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)T.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())T.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(J=>J.toLowerCase()=="content-type"),q=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Sm,w,void 0)>=0)||A||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of T)this.g.setRequestHeader(J,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(J){ms(this,J)}};function ms(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.o=5,gs(f),Ci(f)}function gs(f){f.A||(f.A=!0,$e(f,"complete"),$e(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,$e(this,"complete"),$e(this,"abort"),Ci(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Si(this):this.Xa())},n.Xa=function(){Si(this)};function Si(f){if(f.h&&typeof s<"u"){if(f.v&&Hr(f)==4)setTimeout(f.Ca.bind(f),0);else if($e(f,"readystatechange"),Hr(f)==4){f.h=!1;try{const J=f.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var A;if(A=J===0){let ge=String(f.D).match(eh)[1]||null;!ge&&a.self&&a.self.location&&(ge=a.self.location.protocol.slice(0,-1)),A=!rh.test(ge?ge.toLowerCase():"")}T=A}if(T)$e(f,"complete"),$e(f,"success");else{f.o=6;try{var q=Hr(f)>2?f.g.statusText:""}catch{q=""}f.l=q+" ["+f.ca()+"]",gs(f)}}finally{Ci(f)}}}}function Ci(f,w){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,w||$e(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Hr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Hr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),zd(w)}};function ih(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Wu(f){const w={};f=(f.g&&Hr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(P(f[A]))continue;var T=ja(f[A]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const J=w[q]||[];w[q]=J,J.push(T)}ne(w,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qr(f,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||w}function Ga(f){this.za=0,this.i=[],this.j=new cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qr("baseRetryDelayMs",5e3,f),this.Za=qr("retryDelaySeedMs",1e4,f),this.Ta=qr("forwardChannelMaxRetries",2,f),this.va=qr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new $a(f&&f.concurrentRequestLimit),this.Ba=new ko,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ga.prototype,n.ka=8,n.I=1,n.connect=function(f,w,T,A){Dt(0),this.W=f,this.H=w||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=qu(this,null,this.W),Ai(this)};function Ka(f){if(Qa(f),f.I==3){var w=f.V++,T=ur(f.J);if(rt(T,"SID",f.M),rt(T,"RID",w),rt(T,"TYPE","terminate"),Gr(f,T),w=new lr(f,f.j,w),w.M=2,w.A=Ii(ur(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&a.Image&&(new Image().src=w.A,T=!0),T||(w.g=oh(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Io(w)}Vo(f)}function Yn(f){f.g&&(No(f),f.g.cancel(),f.g=null)}function Qa(f){Yn(f),f.v&&(a.clearTimeout(f.v),f.v=null),Ya(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Ai(f){if(!Vu(f.h)&&!f.m){f.m=!0;var w=f.Ea;te||S(),Z||(te(),Z=!0),x.add(w,f),f.D=0}}function sh(f,w){return So(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=w.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=us(h(f.Ea,f,w),Ja(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const q=new lr(this,this.j,f);let J=this.o;if(this.U&&(J?(J=N(J),he(J,this.U)):J=this.U),this.u!==null||this.R||(q.J=J,J=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(w+=A,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Hu(this,q,w),T=ur(this.J),rt(T,"RID",f),rt(T,"CVER",22),this.G&&rt(T,"X-HTTP-Session-Id",this.G),Gr(this,T),J&&(this.R?w="headers="+Fr(nh(J))+"&"+w:this.u&&qa(T,this.u,J)),za(this.h,q),this.Ra&&rt(T,"TYPE","init"),this.S?(rt(T,"$req",w),rt(T,"SID","null"),q.U=!0,Er(q,T,null)):Er(q,T,w),this.I=2}}else this.I==3&&(f?Do(this,f):this.i.length==0||Vu(this.h)||Do(this))};function Do(f,w){var T;w?T=w.l:T=f.V++;const A=ur(f.J);rt(A,"SID",f.M),rt(A,"RID",T),rt(A,"AID",f.K),Gr(f,A),f.u&&f.o&&qa(A,f.u,f.o),T=new lr(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),w&&(f.i=w.G.concat(f.i)),w=Hu(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),za(f.h,T),Er(T,A,w)}function Gr(f,w){f.H&&de(f.H,function(T,A){rt(w,A,T)}),f.l&&de({},function(T,A){rt(w,A,T)})}function Hu(f,w,T){T=Math.min(f.i.length,T);const A=f.l?h(f.l.Ka,f.l,f):null;e:{var q=f.i;let Fe=-1;for(;;){const Lt=["count="+T];Fe==-1?T>0?(Fe=q[0].g,Lt.push("ofs="+Fe)):Fe=0:Lt.push("ofs="+Fe);let ot=!0;for(let Wt=0;Wt<T;Wt++){var J=q[Wt].g;const Jn=q[Wt].map;if(J-=Fe,J<0)Fe=Math.max(0,q[Wt].g-100),ot=!1;else try{J="req"+J+"_"||"";try{var ge=Jn instanceof Map?Jn:Object.entries(Jn);for(const[bi,Qr]of ge){let Yr=Qr;u(Qr)&&(Yr=ss(Qr)),Lt.push(J+bi+"="+encodeURIComponent(Yr))}}catch(bi){throw Lt.push(J+"type="+encodeURIComponent("_badmap")),bi}}catch{A&&A(Jn)}}if(ot){ge=Lt.join("&");break e}}ge=void 0}return f=f.i.splice(0,T),w.G=f,ge}function yn(f){if(!f.g&&!f.v){f.Y=1;var w=f.Da;te||S(),Z||(te(),Z=!0),x.add(w,f),f.A=0}}function Kr(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=us(h(f.Da,f),Ja(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,ys(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=us(h(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Yn(this),ys(this))};function No(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function ys(f){f.g=new lr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var w=ur(f.na);rt(w,"RID","rpc"),rt(w,"SID",f.M),rt(w,"AID",f.K),rt(w,"CI",f.F?"0":"1"),!f.F&&f.ia&&rt(w,"TO",f.ia),rt(w,"TYPE","xmlhttp"),Gr(f,w),f.u&&f.o&&qa(w,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Ii(ur(w)),T.u=null,T.R=!0,Du(T,f)}n.Va=function(){this.C!=null&&(this.C=null,Yn(this),Kr(this),Dt(19))};function Ya(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Xa(f,w){var T=null;if(f.g==w){Ya(f),No(f),f.g=null;var A=2}else if(Ou(f.h,w))T=w.G,Co(f.h,w),A=1;else return;if(f.I!=0){if(w.o)if(A==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var q=f.D;A=ls(),$e(A,new Ru(A,T)),Ai(f)}else yn(f);else if(q=w.m,q==3||q==0&&w.X>0||!(A==1&&sh(f,w)||A==2&&Kr(f)))switch(T&&T.length>0&&(w=f.h,w.i=w.i.concat(T)),q){case 1:Xn(f,5);break;case 4:Xn(f,10);break;case 3:Xn(f,6);break;default:Xn(f,2)}}}function Ja(f,w){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*w}function Xn(f,w){if(f.j.info("Error code "+w),w==2){var T=h(f.bb,f),A=f.Ua;const q=!A;A=new Ur(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ao(A,"https"),Ii(A),q?zr(A.toString(),T):Wr(A.toString(),T)}else Dt(2);f.I=0,f.l&&f.l.pa(w),Vo(f),Qa(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Vo(f){if(f.I=0,f.ja=[],f.l){const w=Gn(f.h);(w.length!=0||f.i.length!=0)&&(b(f.ja,w),b(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function qu(f,w,T){var A=T instanceof Ur?ur(T):new Ur(T);if(A.g!="")w&&(A.g=w+"."+A.g),jr(A,A.u);else{var q=a.location;A=q.protocol,w=w?w+"."+q.hostname:q.hostname,q=+q.port;const J=new Ur(null);A&&Ao(J,A),w&&(J.g=w),q&&jr(J,q),T&&(J.h=T),A=J}return T=f.G,w=f.wa,T&&w&&rt(A,T,w),rt(A,"VER",f.ka),Gr(f,A),A}function oh(f,w,T){if(w&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Aa&&!f.ma?new ht(new Pi({ab:T})):new ht(f.ma),w.Fa(f.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}n=ah.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Za(){}Za.prototype.g=function(f,w){return new hn(f,w)};function hn(f,w){St.call(this),this.g=new Ga(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(f?f["X-WebChannel-Client-Profile"]=w.sa:f={"X-WebChannel-Client-Profile":w.sa}),this.g.U=f,(f=w&&w.Qb)&&!P(f)&&(this.g.u=f),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!P(w)&&(this.g.G=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new vs(this)}g(hn,St),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ka(this.g)},hn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=ss(f),f=T);w.i.push(new Im(w.Ya++,f)),w.I==3&&Ai(w)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ka(this.g),delete this.g,hn.Z.N.call(this)};function lh(f){La.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const T in w){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}g(lh,La);function uh(){xu.call(this),this.status=1}g(uh,xu);function vs(f){this.g=f}g(vs,ah),vs.prototype.ra=function(){$e(this.g,"a")},vs.prototype.qa=function(f){$e(this.g,new lh(f))},vs.prototype.pa=function(f){$e(this.g,new uh)},vs.prototype.oa=function(){$e(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,wC=function(){return new Za},_C=function(){return ls()},vC=Tr,Hy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,Ef=ds,hs.COMPLETE="complete",yC=hs,Wd.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",St.prototype.listen=St.prototype.J,Oc=Wd,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,gC=ht}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const SE="@firebase/firestore",CE="4.9.3";let cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");let _u="12.7.0";const ga=new Zv("@firebase/firestore");function kl(){return ga.logLevel}function le(n,...e){if(ga.logLevel<=Ge.DEBUG){const t=e.map(n_);ga.debug(`Firestore (${_u}): ${n}`,...t)}}function Ut(n,...e){if(ga.logLevel<=Ge.ERROR){const t=e.map(n_);ga.error(`Firestore (${_u}): ${n}`,...t)}}function no(n,...e){if(ga.logLevel<=Ge.WARN){const t=e.map(n_);ga.warn(`Firestore (${_u}): ${n}`,...t)}}function n_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TC(n,r,t)}function TC(n,e,t){let r=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ut(r),new Error(r)}function xe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||TC(e,i,r)}function Ae(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends gi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class li{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class EC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class uO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cO{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new li,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},u=d=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new li)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new EC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class dO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0,3512);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class r_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=pO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function qy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return ry(i)===ry(s)?Le(i,s):ry(i)?1:-1}return Le(n.length,e.length)}const mO=55296,gO=57343;function ry(n){const e=n.charCodeAt(0);return e>=mO&&e<=gO}function Kl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function IC(n){return n+"\0"}const bE="__name__";class ti{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ti.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Le(e.length,t.length)}static compareSegments(e,t){const r=ti.isNumericId(e),i=ti.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ti.extractNumericId(e).compare(ti.extractNumericId(t)):qy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class st extends ti{construct(e,t,r){return new st(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const yO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends ti{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return yO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bE}static keyField(){return new bt([bE])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ye(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ye(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new ye(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class ve{constructor(e){this.path=e}static fromPath(e){return new ve(st.fromString(e))}static fromName(e){return new ve(st.fromString(e).popFirst(5))}static empty(){return new ve(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new st(e.slice()))}}function PC(n,e,t){if(!t)throw new ye(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vO(n,e,t,r){if(e===!0&&r===!0)throw new ye(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xE(n){if(!ve.isDocumentKey(n))throw new ye(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RE(n){if(ve.isDocumentKey(n))throw new ye(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function i_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function _r(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=i_(n);throw new ye(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Cd(n,e){if(!SC(n))throw new ye(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ye(ie.INVALID_ARGUMENT,t);return!0}const kE=-62135596800,DE=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DE);return new lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kE)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DE}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cd(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Qt("string",lt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new lt(0,0))}static max(){return new Re(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ql=-1;class Wf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Gy(n){return n.fields.find((e=>e.kind===2))}function Xo(n){return n.fields.filter((e=>e.kind!==2))}Wf.UNKNOWN_ID=-1;class If{constructor(e,t){this.fieldPath=e,this.kind=t}}class sd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sd(0,or.min())}}function CC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new or(i,ve.empty(),e)}function AC(n){return new or(n.readTime,n.key,Ql)}class or{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new or(Re.min(),ve.empty(),Ql)}static max(){return new or(Re.max(),ve.empty(),Ql)}}function s_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}const bC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fo(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==bC)throw n;le("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):W.reject(t)}static resolve(e){return new W(((t,r)=>{t(e)}))}static reject(e){return new W(((t,r)=>{r(e)}))}static waitFor(e){return new W(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(d=>r(d)))})),a=!0,s===i&&t()}))}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next((i=>i?W.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new W(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next((m=>{a[h]=m,++u,u===s&&r(a)}),(m=>i(m)))}}))}static doWhile(e,t){return new W(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const nr="SimpleDb";class Fp{static open(e,t,r,i){try{return new Fp(t,e.transaction(i,r))}catch(s){throw new $c(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new li,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new $c(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=o_(r.target.error);this.S.reject(new $c(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(nr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wO(t)}}class Js{static delete(e){return le(nr,"Removing database:",e),na(tC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!uC())return!1;if(Js.F())return!0;const e=nn(),t=Js.M(e),r=0<t&&t<10,i=RC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Js.M(nn())===12.2&&Ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(nr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new $c(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ye(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ye(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new $c(e,a))},i.onupgradeneeded=s=>{le(nr,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{le(nr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const u=Fp.open(this.db,e,s?"readonly":"readwrite",r),d=i(u).next((h=>(u.C(),h))).catch((h=>(u.abort(h),W.reject(h)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,h=d.name!=="FirebaseError"&&a<3;if(le(nr,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function RC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _O{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return na(this.U.delete())}}class $c extends ye{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function po(n){return n.name==="IndexedDbTransactionError"}class wO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(nr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(nr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),na(r)}add(e){return le(nr,"ADD",this.store.name,e,e),na(this.store.add(e))}get(e){return na(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(nr,"GET",this.store.name,e,t),t)))}delete(e){return le(nr,"DELETE",this.store.name,e),na(this.store.delete(e))}count(){return le(nr,"COUNT",this.store.name),na(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new W(((a,u)=>{s.onerror=d=>{u(d.target.error)},s.onsuccess=d=>{a(d.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((u,d)=>{a.push(d)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){le(nr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new W(((r,i)=>{t.onerror=s=>{const a=o_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((u=>{u?a.continue():r()})):r()}}))}H(e,t){const r=[];return new W(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const d=new _O(u),h=t(u.primaryKey,u.value,d);if(h instanceof W){const m=h.catch((g=>(d.done(),W.reject(g))));r.push(m)}d.isDone?i():d.G===null?u.continue():u.continue(d.G)}})).next((()=>W.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function na(n){return new W(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=o_(r.target.error);t(i)}}))}let NE=!1;function o_(n){const e=Js.M(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NE||(NE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const zc="IndexBackfiller";class TO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(zc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(zc,`Documents written: ${t}`)}catch(t){po(t)?le(zc,"Ignoring IndexedDB error during index backfill: ",t):await fo(t)}await this.re(6e4)}))}}class EO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return W.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return le(zc,`Processing collection: ${a}`),this.oe(e,a,i).next((u=>{i-=u,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((u=>(le(zc,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=AC(s);s_(a,r)>0&&(r=a)})),new or(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $n{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$n.ce=-1;const ua=-1;function Up(n){return n==null}function od(n){return n===0&&1/n==-1/0}function kC(n){return typeof n=="number"&&Number.isInteger(n)&&!od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Hf="";function An(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VE(e)),e=IO(n.get(t),e);return VE(e)}function IO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Hf:t+="";break;default:t+=s}}return t}function VE(n){return n+Hf+""}function si(n){const e=n.length;if(xe(e>=2,64408,{path:n}),e===2)return xe(n.charAt(0)===Hf&&n.charAt(1)==="",56145,{path:n}),st.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Hf,s);switch((a<0||a>t)&&Ie(50515,{path:n}),n.charAt(a+1)){case"":const u=n.substring(s,a);let d;i.length===0?d=u:(i+=u,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Ie(61167,{path:n})}s=a+2}return new st(r)}const Jo="remoteDocuments",Ad="owner",Tl="owner",ad="mutationQueues",PO="userId",kr="mutations",OE="batchId",oa="userMutationsIndex",ME=["userId","batchId"];function Pf(n,e){return[n,An(e)]}function DC(n,e,t){return[n,An(e),t]}const SO={},Yl="documentMutations",qf="remoteDocumentsV14",CO=["prefixPath","collectionGroup","readTime","documentId"],Sf="documentKeyIndex",AO=["prefixPath","collectionGroup","documentId"],NC="collectionGroupIndex",bO=["collectionGroup","readTime","prefixPath","documentId"],ld="remoteDocumentGlobal",Ky="remoteDocumentGlobalKey",Xl="targets",VC="queryTargetsIndex",xO=["canonicalId","targetId"],Jl="targetDocuments",RO=["targetId","path"],a_="documentTargetsIndex",kO=["path","targetId"],Gf="targetGlobalKey",ca="targetGlobal",ud="collectionParents",DO=["collectionId","parent"],Zl="clientMetadata",NO="clientId",jp="bundles",VO="bundleId",Bp="namedQueries",OO="name",l_="indexConfiguration",MO="indexId",Qy="collectionGroupIndex",LO="collectionGroup",Wc="indexState",FO=["indexId","uid"],OC="sequenceNumberIndex",UO=["uid","sequenceNumber"],Hc="indexEntries",jO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MC="documentKeyIndex",BO=["indexId","uid","orderedDocumentKey"],$p="documentOverlays",$O=["userId","collectionPath","documentId"],Yy="collectionPathOverlayIndex",zO=["userId","collectionPath","largestBatchId"],LC="collectionGroupOverlayIndex",WO=["userId","collectionGroup","largestBatchId"],u_="globals",HO="name",FC=[ad,kr,Yl,Jo,Xl,Ad,ca,Jl,Zl,ld,ud,jp,Bp],qO=[...FC,$p],UC=[ad,kr,Yl,qf,Xl,Ad,ca,Jl,Zl,ld,ud,jp,Bp,$p],jC=UC,c_=[...jC,l_,Wc,Hc],GO=c_,BC=[...c_,u_],KO=BC;class Xy extends xC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function rn(n,e){const t=Ae(n);return Js.O(t.le,e)}function LE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $C(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??mn.RED,this.left=i??mn.EMPTY,this.right=s??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new mn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ut{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FE(this.data.getIterator())}getIteratorFrom(e){return new FE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ut(this.comparator);return t.data=e,t}}class FE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function El(n){return n.hasNext()?n.getNext():void 0}class zn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new zn([])}unionWith(e){let t=new ut(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class zC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zC("Invalid base64 string: "+s):s}})(e);return new zt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const QO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(n){if(xe(!!n,39018),typeof n=="string"){let e=0;const t=QO.exec(n);if(xe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qi(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}const WC="server_timestamp",HC="__type__",qC="__previous_value__",GC="__local_write_time__";function d_(n){return(n?.mapValue?.fields||{})[HC]?.stringValue===WC}function zp(n){const e=n.mapValue.fields[qC];return d_(e)?zp(e):e}function cd(n){const e=Hi(n.mapValue.fields[GC].timestampValue);return new lt(e.seconds,e.nanos)}class YO{constructor(e,t,r,i,s,a,u,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=m}}const Kf="(default)";class ya{constructor(e,t){this.projectId=e,this.database=t||Kf}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===Kf}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}const h_="__type__",KC="__max__",Gs={mapValue:{fields:{__type__:{stringValue:KC}}}},f_="__vector__",eu="value",Cf={nullValue:"NULL_VALUE"};function ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d_(n)?4:QC(n)?9007199254740991:Wp(n)?10:11:Ie(28295,{value:n})}function mi(n,e){if(n===e)return!0;const t=ro(n);if(t!==ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cd(n).isEqual(cd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Hi(i.timestampValue),u=Hi(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return qi(i.bytesValue).isEqual(qi(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return It(i.geoPointValue.latitude)===It(s.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return It(i.integerValue)===It(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=It(i.doubleValue),u=It(s.doubleValue);return a===u?od(a)===od(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return Kl(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(LE(a)!==LE(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!mi(a[d],u[d])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function dd(n,e){return(n.values||[]).find((t=>mi(t,e)))!==void 0}function io(n,e){if(n===e)return 0;const t=ro(n),r=ro(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=It(s.integerValue||s.doubleValue),d=It(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return UE(n.timestampValue,e.timestampValue);case 4:return UE(cd(n),cd(e));case 5:return qy(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=qi(s),d=qi(a);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=Le(u[h],d[h]);if(m!==0)return m}return Le(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Le(It(s.latitude),It(a.latitude));return u!==0?u:Le(It(s.longitude),It(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jE(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},d=a.fields||{},h=u[eu]?.arrayValue,m=d[eu]?.arrayValue,g=Le(h?.values?.length||0,m?.values?.length||0);return g!==0?g:jE(h,m)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Gs.mapValue&&a===Gs.mapValue)return 0;if(s===Gs.mapValue)return 1;if(a===Gs.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),h=a.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const v=qy(d[g],m[g]);if(v!==0)return v;const E=io(u[d[g]],h[m[g]]);if(E!==0)return E}return Le(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function UE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Hi(n),r=Hi(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function jE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=io(t[i],r[i]);if(s)return s}return Le(t.length,r.length)}function tu(n){return Jy(n)}function Jy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Hi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Jy(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Jy(t.fields[a])}`;return i+"}"})(n.mapValue):Ie(61005,{value:n})}function Af(n){switch(ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zp(n);return e?16+Af(e):16;case 5:return 2*n.stringValue.length;case 6:return qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Af(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return mo(r.fields,((s,a)=>{i+=s.length+Af(a)})),i})(n.mapValue);default:throw Ie(13486,{value:n})}}function p_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zy(n){return!!n&&"integerValue"in n}function hd(n){return!!n&&"arrayValue"in n}function BE(n){return!!n&&"nullValue"in n}function $E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bf(n){return!!n&&"mapValue"in n}function Wp(n){return(n?.mapValue?.fields||{})[h_]?.stringValue===f_}function qc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return mo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=qc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qc(n.arrayValue.values[t]);return e}return{...n}}function QC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KC}const YC={mapValue:{fields:{[h_]:{stringValue:f_},[eu]:{arrayValue:{}}}}};function XO(n){return"nullValue"in n?Cf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?p_(ya.empty(),ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Wp(n)?YC:{mapValue:{}}:Ie(35942,{value:n})}function JO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?p_(ya.empty(),ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?YC:"mapValue"in n?Wp(n)?{mapValue:{}}:Gs:Ie(61959,{value:n})}function zE(n,e){const t=io(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function WE(n,e){const t=io(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qc(t)}setAll(e){let t=bt.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=qc(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mo(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Sn(qc(this.value))}}function XC(n){const e=[];return mo(n.fields,((t,r)=>{const i=new bt([t]);if(bf(r)){const s=XC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new zn(e)}class Vt{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Vt(e,0,Re.min(),Re.min(),Re.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,i){return new Vt(e,1,t,Re.min(),r,i,0)}static newNoDocument(e,t){return new Vt(e,2,t,Re.min(),Re.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new Vt(e,3,t,Re.min(),Re.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nu{constructor(e,t){this.position=e,this.inclusive=t}}function HE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ve.comparator(ve.fromName(a.referenceValue),t.key):r=io(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}class Qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class JC{}class Qe extends JC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new eM(e,t,r):t==="array-contains"?new rM(e,r):t==="in"?new iA(e,r):t==="not-in"?new iM(e,r):t==="array-contains-any"?new sM(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tM(e,r):new nM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(io(t,this.value)):t!==null&&ro(this.value)===ro(t)&&this.matchesComparison(io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dt extends JC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dt(e,t)}matches(e){return ru(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ru(n){return n.op==="and"}function ev(n){return n.op==="or"}function m_(n){return ZC(n)&&ru(n)}function ZC(n){for(const e of n.filters)if(e instanceof dt)return!1;return!0}function tv(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+tu(n.value);if(m_(n))return n.filters.map((e=>tv(e))).join(",");{const e=n.filters.map((t=>tv(t))).join(",");return`${n.op}(${e})`}}function eA(n,e){return n instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&mi(r.value,i.value)})(n,e):n instanceof dt?(function(r,i){return i instanceof dt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&eA(a,i.filters[u])),!0):!1})(n,e):void Ie(19439)}function tA(n,e){const t=n.filters.concat(e);return dt.create(t,n.op)}function nA(n){return n instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${tu(t.value)}`})(n):n instanceof dt?(function(t){return t.op.toString()+" {"+t.getFilters().map(nA).join(" ,")+"}"})(n):"Filter"}class eM extends Qe{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class tM extends Qe{constructor(e,t){super(e,"in",t),this.keys=rA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nM extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=rA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rA(n,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class rM extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hd(t)&&dd(t.arrayValue,this.value)}}class iA extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dd(this.value.arrayValue,t)}}class iM extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dd(this.value.arrayValue,t)}}class sM extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>dd(this.value.arrayValue,r)))}}class oM{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function nv(n,e=null,t=[],r=[],i=null,s=null,a=null){return new oM(n,e,t,r,i,s,a)}function va(n){const e=Ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>tv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Up(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>tu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>tu(r))).join(",")),e.Te=t}return e.Te}function bd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qE(n.startAt,e.startAt)&&qE(n.endAt,e.endAt)}function Yf(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Xf(n,e){return n.filters.filter((t=>t instanceof Qe&&t.field.isEqual(e)))}function GE(n,e,t){let r=Cf,i=!0;for(const s of Xf(n,e)){let a=Cf,u=!0;switch(s.op){case"<":case"<=":a=XO(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=Cf}zE({value:r,inclusive:i},{value:a,inclusive:u})<0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];zE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function KE(n,e,t){let r=Gs,i=!0;for(const s of Xf(n,e)){let a=Gs,u=!0;switch(s.op){case">=":case">":a=JO(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=Gs}WE({value:r,inclusive:i},{value:a,inclusive:u})>0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];WE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class Hp{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sA(n,e,t,r,i,s,a,u){return new Hp(n,e,t,r,i,s,a,u)}function qp(n){return new Hp(n)}function QE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aM(n){return n.collectionGroup!==null}function Gc(n){const e=Ae(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ut(bt.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Qf(s,r))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new Qf(bt.keyField(),r))}return e.Ie}function sr(n){const e=Ae(n);return e.Ee||(e.Ee=lM(e,Gc(n))),e.Ee}function lM(n,e){if(n.limitType==="F")return nv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Qf(i.field,s)}));const t=n.endAt?new nu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nu(n.startAt.position,n.startAt.inclusive):null;return nv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rv(n,e,t){return new Hp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gp(n,e){return bd(sr(n),sr(e))&&n.limitType===e.limitType}function oA(n){return`${va(sr(n))}|lt:${n.limitType}`}function Dl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>nA(i))).join(", ")}]`),Up(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>tu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>tu(i))).join(",")),`Target(${r})`})(sr(n))}; limitType=${n.limitType})`}function xd(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Gc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){const h=HE(a,u,d);return a.inclusive?h<=0:h<0})(r.startAt,Gc(r),i)||r.endAt&&!(function(a,u,d){const h=HE(a,u,d);return a.inclusive?h>=0:h>0})(r.endAt,Gc(r),i))})(n,e)}function aA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lA(n){return(e,t)=>{let r=!1;for(const i of Gc(n)){const s=uM(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uM(n,e,t){const r=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(s,a,u){const d=a.data.field(s),h=u.data.field(s);return d!==null&&h!==null?io(d,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}class Zi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return $C(this.inner)}size(){return this.innerSize}}const cM=new mt(ve.comparator);function ir(){return cM}const uA=new mt(ve.comparator);function Mc(...n){let e=uA;for(const t of n)e=e.insert(t.key,t);return e}function cA(n){let e=uA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function oi(){return Kc()}function dA(){return Kc()}function Kc(){return new Zi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const dM=new mt(ve.comparator),hM=new ut(ve.comparator);function ze(...n){let e=hM;for(const t of n)e=e.add(t);return e}const fM=new ut(Le);function g_(){return fM}function y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function hA(n){return{integerValue:""+n}}function pM(n,e){return kC(e)?hA(e):y_(n,e)}class Kp{constructor(){this._=void 0}}function mM(n,e,t){return n instanceof fd?(function(i,s){const a={fields:{[HC]:{stringValue:WC},[GC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&d_(s)&&(s=zp(s)),s&&(a.fields[qC]=s),{mapValue:a}})(t,e):n instanceof iu?pA(n,e):n instanceof su?mA(n,e):(function(i,s){const a=fA(i,s),u=YE(a)+YE(i.Ae);return Zy(a)&&Zy(i.Ae)?hA(u):y_(i.serializer,u)})(n,e)}function gM(n,e,t){return n instanceof iu?pA(n,e):n instanceof su?mA(n,e):t}function fA(n,e){return n instanceof pd?(function(r){return Zy(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class fd extends Kp{}class iu extends Kp{constructor(e){super(),this.elements=e}}function pA(n,e){const t=gA(e);for(const r of n.elements)t.some((i=>mi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class su extends Kp{constructor(e){super(),this.elements=e}}function mA(n,e){let t=gA(e);for(const r of n.elements)t=t.filter((i=>!mi(i,r)));return{arrayValue:{values:t}}}class pd extends Kp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function YE(n){return It(n.integerValue||n.doubleValue)}function gA(n){return hd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yM{constructor(e,t){this.field=e,this.transform=t}}function vM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof iu&&i instanceof iu||r instanceof su&&i instanceof su?Kl(r.elements,i.elements,mi):r instanceof pd&&i instanceof pd?mi(r.Ae,i.Ae):r instanceof fd&&i instanceof fd})(n.transform,e.transform)}class _M{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qp{}function yA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yp(n.key,Cn.none()):new wu(n.key,n.data,Cn.none());{const t=n.data,r=Sn.empty();let i=new ut(bt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new es(n.key,r,new zn(i.toArray()),Cn.none())}}function wM(n,e,t){n instanceof wu?(function(i,s,a){const u=i.value.clone(),d=JE(i.fieldTransforms,s,a.transformResults);u.setAll(d),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof es?(function(i,s,a){if(!xf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=JE(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(vA(i)),d.setAll(u),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Qc(n,e,t,r){return n instanceof wu?(function(s,a,u,d){if(!xf(s.precondition,a))return u;const h=s.value.clone(),m=ZE(s.fieldTransforms,d,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof es?(function(s,a,u,d){if(!xf(s.precondition,a))return u;const h=ZE(s.fieldTransforms,d,a),m=a.data;return m.setAll(vA(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,u){return xf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function TM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=fA(r.transform,i||null);s!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,s))}return t||null}function XE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Kl(r,i,((s,a)=>vM(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wu extends Qp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends Qp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function JE(n,e,t){const r=new Map;xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,gM(a,u,t[i]))}return r}function ZE(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,mM(s,a,e))}return r}class Yp extends Qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends Qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class v_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&wM(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dA();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const d=yA(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,((t,r)=>XE(t,r)))&&Kl(this.baseMutations,e.baseMutations,((t,r)=>XE(t,r)))}}class __{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return dM})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new __(e,t,r,i)}}class w_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EM{constructor(e,t){this.count=e,this.unchangedNames=t}}var qt,Je;function IM(n){switch(n){case ie.OK:return Ie(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function wA(n){if(n===void 0)return Ut("GRPC error has no .code"),ie.UNKNOWN;switch(n){case qt.OK:return ie.OK;case qt.CANCELLED:return ie.CANCELLED;case qt.UNKNOWN:return ie.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ie.INTERNAL;case qt.UNAVAILABLE:return ie.UNAVAILABLE;case qt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case qt.NOT_FOUND:return ie.NOT_FOUND;case qt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case qt.ABORTED:return ie.ABORTED;case qt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case qt.DATA_LOSS:return ie.DATA_LOSS;default:return Ie(39323,{code:n})}}(Je=qt||(qt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";function PM(){return new TextEncoder}const SM=new Xs([4294967295,4294967295],0);function eI(n){const e=PM().encode(n),t=new mC;return t.update(e),new Uint8Array(t.digest())}function tI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xs([t,r],0),new Xs([i,s],0)]}class T_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Xs.fromNumber(r)));return i.compare(SM)===1&&(i=new Xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eI(e),[r,i]=tI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new T_(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=eI(e),[r,i]=tI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,kd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Rd(Re.min(),i,new mt(Le),ir(),ze())}}class kd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kd(r,t,ze(),ze(),ze())}}class Rf{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class TA{constructor(e,t){this.targetId=e,this.Ce=t}}class EA{constructor(e,t,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nI{constructor(){this.ve=0,this.Fe=rI(),this.Me=zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:s})}})),new kd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CM{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=of(),this.He=of(),this.Ye=new mt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Yf(s))if(r===0){const a=new ve(s.path);this.et(t,a,Vt.newNoDocument(a,Re.min()))}else xe(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=qi(r).toUint8Array()}catch(d){if(d instanceof zC)return no("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new T_(a,i,s)}catch(d){return no(d instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&Yf(u.target)){const d=new ve(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Vt.newNoDocument(d,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=ze();this.He.forEach(((s,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Rd(e,t,this.Ye,this.je,r);return this.je=ir(),this.Je=of(),this.He=of(),this.Ye=new mt(Le),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ut(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ut(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function of(){return new mt(ve.comparator)}function rI(){return new mt(ve.comparator)}const AM={asc:"ASCENDING",desc:"DESCENDING"},bM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xM={and:"AND",or:"OR"};class RM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iv(n,e){return n.useProto3Json||Up(e)?e:{value:e}}function ou(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kM(n,e){return ou(n,e.toTimestamp())}function Vn(n){return xe(!!n,49232),Re.fromTimestamp((function(t){const r=Hi(t);return new lt(r.seconds,r.nanos)})(n))}function E_(n,e){return sv(n,e).canonicalString()}function sv(n,e){const t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function PA(n){const e=st.fromString(n);return xe(NA(e),10190,{key:e.toString()}),e}function Jf(n,e){return E_(n.databaseId,e.path)}function da(n,e){const t=PA(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(AA(t))}function SA(n,e){return E_(n.databaseId,e)}function CA(n){const e=PA(n);return e.length===4?st.emptyPath():AA(e)}function ov(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AA(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iI(n,e,t){return{name:Jf(n,e),fields:t.value.mapValue.fields}}function DM(n,e,t){const r=da(n,e.name),i=Vn(e.updateTime),s=e.createTime?Vn(e.createTime):Re.min(),a=new Sn({mapValue:{fields:e.fields}}),u=Vt.newFoundDocument(r,i,s,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function NM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(xe(m===void 0||typeof m=="string",58123),zt.fromBase64String(m||"")):(xe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),zt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const m=h.code===void 0?ie.UNKNOWN:wA(h.code);return new ye(m,h.message||"")})(a);t=new EA(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=da(n,r.document.name),s=Vn(r.document.updateTime),a=r.document.createTime?Vn(r.document.createTime):Re.min(),u=new Sn({mapValue:{fields:r.document.fields}}),d=Vt.newFoundDocument(i,s,a,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Rf(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=da(n,r.document),s=r.readTime?Vn(r.readTime):Re.min(),a=Vt.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Rf([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=da(n,r.document),s=r.removedTargetIds||[];t=new Rf([],s,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new EM(i,s),u=r.targetId;t=new TA(u,a)}}return t}function Zf(n,e){let t;if(e instanceof wu)t={update:iI(n,e.key,e.value)};else if(e instanceof Yp)t={delete:Jf(n,e.key)};else if(e instanceof es)t={update:iI(n,e.key,e.data),updateMask:UM(e.fieldMask)};else{if(!(e instanceof _A))return Ie(16599,{Vt:e.type});t={verify:Jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof fd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof iu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof su)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:kM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie(27497)})(n,e.precondition)),t}function av(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Cn.updateTime(Vn(s.updateTime)):s.exists!==void 0?Cn.exists(s.exists):Cn.none()})(e.currentDocument):Cn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,u){let d=null;if("setToServerValue"in u)xe(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new fd;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];d=new iu(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];d=new su(m)}else"increment"in u?d=new pd(a,u.increment):Ie(16584,{proto:u});const h=bt.fromServerFormat(u.fieldPath);return new yM(h,d)})(n,i))):[];if(e.update){e.update.name;const i=da(n,e.update.name),s=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new zn(h.map((m=>bt.fromServerFormat(m))))})(e.updateMask);return new es(i,s,a,t,r)}return new wu(i,s,t,r)}if(e.delete){const i=da(n,e.delete);return new Yp(i,t)}if(e.verify){const i=da(n,e.verify);return new _A(i,t)}return Ie(1463,{proto:e})}function VM(n,e){return n&&n.length>0?(xe(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Vn(i.updateTime):Vn(s);return a.isEqual(Re.min())&&(a=Vn(s)),new _M(a,i.transformResults||[])})(t,e)))):[]}function bA(n,e){return{documents:[SA(n,e.path)]}}function xA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SA(n,i);const s=(function(h){if(h.length!==0)return DA(dt.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:Nl(v.field),direction:MM(v.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=iv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function RA(n){let e=CA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xe(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const v=kA(g);return v instanceof dt&&m_(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((v=>(function(b){return new Qf(Vl(b.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,Up(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(g){const v=!!g.before,E=g.values||[];return new nu(E,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const v=!g.before,E=g.values||[];return new nu(E,v)})(t.endAt)),sA(e,i,a,s,u,"F",d,h)}function OM(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Vl(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vl(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vl(t.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vl(t.unaryFilter.field);return Qe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qe.create(Vl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return dt.create(t.compositeFilter.filters.map((r=>kA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function MM(n){return AM[n]}function LM(n){return bM[n]}function FM(n){return xM[n]}function Nl(n){return{fieldPath:n.canonicalString()}}function Vl(n){return bt.fromServerFormat(n.fieldPath)}function DA(n){return n instanceof Qe?(function(t){if(t.op==="=="){if($E(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NAN"}};if(BE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($E(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NAN"}};if(BE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(t.field),op:LM(t.op),value:t.value}}})(n):n instanceof dt?(function(t){const r=t.getFilters().map((i=>DA(i)));return r.length===1?r[0]:{compositeFilter:{op:FM(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function UM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function NA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Fi{constructor(e,t,r,i,s=Re.min(),a=Re.min(),u=zt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VA{constructor(e){this.yt=e}}function jM(n,e){let t;if(e.document)t=DM(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ve.fromSegments(e.noDocument.path),i=wa(e.noDocument.readTime);t=Vt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=ve.fromSegments(e.unknownDocument.path),i=wa(e.unknownDocument.version);t=Vt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new lt(i[0],i[1]);return Re.fromTimestamp(s)})(e.readTime)),t}function sI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:Jf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:ou(s,a.version.toTimestamp()),createTime:ou(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_a(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:_a(e.version)}}return r}function ep(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _a(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wa(n){const e=new lt(n.seconds,n.nanoseconds);return Re.fromTimestamp(e)}function ra(n,e){const t=(e.baseMutations||[]).map((s=>av(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>av(n.yt,s))),i=lt.fromMillis(e.localWriteTimeMs);return new v_(e.batchId,i,t,r)}function Fc(n){const e=wa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?wa(n.lastLimboFreeSnapshotVersion):Re.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return xe(a===1,1966,{count:a}),sr(qp(CA(s.documents[0])))})(n.query):(function(s){return sr(RA(s))})(n.query),new Fi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,zt.fromBase64String(n.resumeToken))}function OA(n,e){const t=_a(e.snapshotVersion),r=_a(e.lastLimboFreeSnapshotVersion);let i;i=Yf(e.target)?bA(n.yt,e.target):xA(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:va(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function MA(n){const e=RA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rv(e,e.limit,"L"):e}function iy(n,e){return new w_(e.largestBatchId,av(n.yt,e.overlayMutation))}function oI(n,e){const t=e.path.lastSegment();return[n,An(e.path.popLast()),t]}function aI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:_a(r.readTime),documentKey:An(r.documentKey.path),largestBatchId:r.largestBatchId}}class BM{getBundleMetadata(e,t){return lI(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:wa(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return lI(e).put((function(i){return{bundleId:i.id,createTime:_a(Vn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return uI(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:MA(s.bundledQuery),readTime:wa(s.readTime)}})(r)}))}saveNamedQuery(e,t){return uI(e).put((function(i){return{name:i.name,readTime:_a(Vn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function lI(n){return rn(n,jp)}function uI(n){return rn(n,Bp)}class Xp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Xp(e,r)}getOverlay(e,t){return _c(e).get(oI(this.userId,t)).next((r=>r?iy(this.serializer,r):null))}getOverlays(e,t){const r=oi();return W.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const u=new w_(t,a);i.push(this.St(e,u))})),W.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(An(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(_c(e).Z(Yy,u))})),W.waitFor(s)}getOverlaysForCollection(e,t,r){const i=oi(),s=An(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return _c(e).J(Yy,a).next((u=>{for(const d of u){const h=iy(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=oi();let a;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _c(e).ee({index:LC,range:u},((d,h,m)=>{const g=iy(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):m.done()})).next((()=>s))}St(e,t){return _c(e).put((function(i,s,a){const[u,d,h]=oI(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Zf(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function _c(n){return rn(n,$p)}class $M{bt(e){return rn(e,u_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?zt.fromUint8Array(r):zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ia{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(It(e.integerValue));else if("doubleValue"in e){const r=It(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),od(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Hi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(qi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?QC(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Wp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=eu,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(It(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ve.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ia.Kt=new ia;const Il=255;function zM(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function cI(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=zM(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class WM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=cI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=cI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Il),this.sn(255)}_n(){this.an(Il),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Il?(this.sn(Il),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Il?(this.an(Il),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HM{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class qM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wc{constructor(){this.cn=new WM,this.ln=new HM(this.cn),this.hn=new qM(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class sa{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new sa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:kf(this.En),directionalValue:kf(this.dn),orderedDocumentKey:kf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ns(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=dI(n.En,e.En),t!==0?t:(t=dI(n.dn,e.dn),t!==0?t:ve.comparator(n.In,e.In)))}function dI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function kf(n){return lC()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function hI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class fI{constructor(e){this.mn=new ut(((t,r)=>bt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Gy(e);if(t!==void 0&&!this.wn(t))return!1;const r=Xo(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const d=r[s];if(!this.Sn(u,d)||!this.bn(this.fn[a++],d))return!1}++s}for(;s<r.length;++s){const u=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new ut(bt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new If(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new If(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new If(r.field,r.dir==="asc"?0:1)));return new Wf(Wf.UNKNOWN_ID,this.collectionId,t,sd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function LA(n){if(xe(n instanceof Qe||n instanceof dt,20012),n instanceof Qe){if(n instanceof iA){const t=n.value.arrayValue?.values?.map((r=>Qe.create(n.field,"==",r)))||[];return dt.create(t,"or")}return n}const e=n.filters.map((t=>LA(t)));return dt.create(e,n.op)}function GM(n){if(n.getFilters().length===0)return[];const e=cv(LA(n));return xe(FA(e),7391),lv(e)||uv(e)?[e]:e.getFilters()}function lv(n){return n instanceof Qe}function uv(n){return n instanceof dt&&m_(n)}function FA(n){return lv(n)||uv(n)||(function(t){if(t instanceof dt&&ev(t)){for(const r of t.getFilters())if(!lv(r)&&!uv(r))return!1;return!0}return!1})(n)}function cv(n){if(xe(n instanceof Qe||n instanceof dt,34018),n instanceof Qe)return n;if(n.filters.length===1)return cv(n.filters[0]);const e=n.filters.map((r=>cv(r)));let t=dt.create(e,n.op);return t=tp(t),FA(t)?t:(xe(t instanceof dt,64498),xe(ru(t),40251),xe(t.filters.length>1,57927),t.filters.reduce(((r,i)=>I_(r,i))))}function I_(n,e){let t;return xe(n instanceof Qe||n instanceof dt,38388),xe(e instanceof Qe||e instanceof dt,25473),t=n instanceof Qe?e instanceof Qe?(function(i,s){return dt.create([i,s],"and")})(n,e):pI(n,e):e instanceof Qe?pI(e,n):(function(i,s){if(xe(i.filters.length>0&&s.filters.length>0,48005),ru(i)&&ru(s))return tA(i,s.getFilters());const a=ev(i)?i:s,u=ev(i)?s:i,d=a.filters.map((h=>I_(h,u)));return dt.create(d,"or")})(n,e),tp(t)}function pI(n,e){if(ru(e))return tA(e,n.getFilters());{const t=e.filters.map((r=>I_(n,r)));return dt.create(t,"or")}}function tp(n){if(xe(n instanceof Qe||n instanceof dt,11850),n instanceof Qe)return n;const e=n.getFilters();if(e.length===1)return tp(e[0]);if(ZC(n))return n;const t=e.map((i=>tp(i))),r=[];return t.forEach((i=>{i instanceof Qe?r.push(i):i instanceof dt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:dt.create(r,n.op)}class KM{constructor(){this.Cn=new P_}addToCollectionParentIndex(e,t){return this.Cn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(or.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(or.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class P_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ut(st.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(st.comparator)).toArray()}}const mI="IndexedDbIndexManager",af=new Uint8Array(0);class QM{constructor(e,t){this.databaseId=t,this.vn=new P_,this.Fn=new Zi((r=>va(r)),((r,i)=>bd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:An(i)};return gI(e).put(s)}return W.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[IC(t),""],!1,!0);return gI(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(si(a.parent))}return r}))}addFieldIndex(e,t){const r=Tc(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Sl(e);return s.next((u=>{a.put(aI(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Tc(e),i=Sl(e),s=Pl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Tc(e),r=Pl(e),i=Sl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return W.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new fI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Pl(e);let i=!0;const s=new Map;return W.forEach(this.Mn(t),(a=>this.xn(e,a).next((u=>{i&&(i=!!u),s.set(a,u)})))).next((()=>{if(i){let a=ze();const u=[];return W.forEach(s,((d,h)=>{le(mI,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((z=>`${z.fieldPath}:${z.kind}`)).join(",")}`})(d)} to execute ${va(t)}`);const m=(function(M,z){const te=Gy(z);if(te===void 0)return null;for(const Z of Xf(M,te.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(h,d),g=(function(M,z){const te=new Map;for(const Z of Xo(z))for(const x of Xf(M,Z.fieldPath))switch(x.op){case"==":case"in":te.set(Z.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return te.set(Z.fieldPath.canonicalString(),x.value),Array.from(te.values())}return null})(h,d),v=(function(M,z){const te=[];let Z=!0;for(const x of Xo(z)){const S=x.kind===0?GE(M,x.fieldPath,M.startAt):KE(M,x.fieldPath,M.startAt);te.push(S.value),Z&&(Z=S.inclusive)}return new nu(te,Z)})(h,d),E=(function(M,z){const te=[];let Z=!0;for(const x of Xo(z)){const S=x.kind===0?KE(M,x.fieldPath,M.endAt):GE(M,x.fieldPath,M.endAt);te.push(S.value),Z&&(Z=S.inclusive)}return new nu(te,Z)})(h,d),b=this.On(d,h,v),R=this.On(d,h,E),C=this.Nn(d,h,g),B=this.Bn(d.indexId,m,b,v.inclusive,R,E.inclusive,C);return W.forEach(B,(V=>r.Y(V,t.limit).next((M=>{M.forEach((z=>{const te=ve.fromSegments(z.documentKey);a.has(te)||(a=a.add(te),u.push(te))}))}))))})).next((()=>u))}return W.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=GM(dt.create(e.filters,"and")).map((r=>nv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,u){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),h=d/(t!=null?t.length:1),m=[];for(let g=0;g<d;++g){const v=t?this.Ln(t[g/h]):af,E=this.kn(e,v,r[g%h],i),b=this.qn(e,v,s[g%h],a),R=u.map((C=>this.kn(e,v,C,!0)));m.push(...this.createRange(E,b,R))}return m}kn(e,t,r,i){const s=new sa(e,ve.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new sa(e,ve.empty(),t,r);return i?s.An():s}xn(e,t){const r=new fI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const u of s)r.yn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return W.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(d){let h=new ut(bt.comparator),m=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:h=h.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new wc;for(const i of Xo(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);ia.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new wc;return ia.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new wc;return ia.Kt.Dt(p_(this.databaseId,t),r.Pn((function(s){const a=Xo(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new wc);let s=0;for(const a of Xo(e)){const u=r[s++];for(const d of i)if(this.Un(t,a.fieldPath)&&hd(u))i=this.Kn(i,a,u);else{const h=d.Pn(a.kind);ia.Kt.Dt(u,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const u of i){const d=new wc;d.seed(u.un()),ia.Kt.Dt(a,d.Pn(t.kind)),s.push(d)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Tc(e),i=Sl(e);return(t?r.J(Qy,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return W.forEach(s,(u=>i.get([u.indexId,this.uid]).next((d=>{a.push((function(m,g){const v=g?new sd(g.sequenceNumber,new or(wa(g.readTime),new ve(si(g.documentKey)),g.largestBatchId)):sd.empty(),E=m.fields.map((([b,R])=>new If(bt.fromServerFormat(b),R)));return new Wf(m.indexId,m.collectionGroup,E,v)})(u,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Le(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Tc(e),s=Sl(e);return this.Gn(e).next((a=>i.J(Qy,IDBKeyRange.bound(t,t)).next((u=>W.forEach(u,(d=>s.put(aI(d.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?W.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),W.forEach(u,(d=>this.zn(e,i,d).next((h=>{const m=this.jn(s,d);return h.isEqual(m)?W.resolve():this.Jn(e,s,d,h,m)})))))))}))}Hn(e,t,r,i){return Pl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Pl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Pl(e);let s=new ut(Ns);return i.ee({index:MC,range:IDBKeyRange.only([r.indexId,this.uid,kf(this.$n(r,t))])},((a,u)=>{s=s.add(new sa(r.indexId,t,hI(u.arrayValue),hI(u.directionalValue)))})).next((()=>s))}jn(e,t){let r=new ut(Ns);const i=this.Qn(t,e);if(i==null)return r;const s=Gy(t);if(s!=null){const a=e.data.field(s.fieldPath);if(hd(a))for(const u of a.arrayValue.values||[])r=r.add(new sa(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new sa(t.indexId,e.key,af,i));return r}Jn(e,t,r,i,s){le(mI,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,m,g,v){const E=d.getIterator(),b=h.getIterator();let R=El(E),C=El(b);for(;R||C;){let B=!1,V=!1;if(R&&C){const M=m(R,C);M<0?V=!0:M>0&&(B=!0)}else R!=null?V=!0:B=!0;B?(g(C),C=El(b)):V?(v(R),R=El(E)):(R=El(E),C=El(b))}})(i,s,Ns,(u=>{a.push(this.Hn(e,t,r,u))}),(u=>{a.push(this.Yn(e,t,r,u))})),W.waitFor(a)}Gn(e){let t=1;return Sl(e).ee({index:OC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,u)=>Ns(a,u))).filter(((a,u,d)=>!u||Ns(a,d[u-1])!==0));const i=[];i.push(e);for(const a of r){const u=Ns(a,e),d=Ns(a,t);if(u===0)i[0]=e.An();else if(u>0&&d<0)i.push(a),i.push(a.An());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const u=i[a].Vn(this.uid,af,ve.empty()),d=i[a+1].Vn(this.uid,af,ve.empty());s.push(IDBKeyRange.bound(u,d))}return s}Zn(e,t){return Ns(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yI)}getMinOffset(e,t){return W.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(yI)}}function gI(n){return rn(n,ud)}function Pl(n){return rn(n,Hc)}function Tc(n){return rn(n,l_)}function Sl(n){return rn(n,Wc)}function yI(n){xe(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;s_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new or(e.readTime,e.documentKey,t)}const vI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UA=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function jA(n,e,t){const r=n.store(kr),i=n.store(Yl),s=[],a=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:a},((m,g,v)=>(u++,v.delete())));s.push(d.next((()=>{xe(u===1,47070,{batchId:t.batchId})})));const h=[];for(const m of t.mutations){const g=DC(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return W.waitFor(s).next((()=>h))}function np(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie(14731);e=n.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(UA,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class Jp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){xe(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Jp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vs(e).ee({index:oa,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=Ol(e),a=Vs(e);return a.add({}).next((u=>{xe(typeof u=="number",49019);const d=new v_(u,t,r,i),h=(function(E,b,R){const C=R.baseMutations.map((V=>Zf(E.yt,V))),B=R.mutations.map((V=>Zf(E.yt,V)));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:C,mutations:B}})(this.serializer,this.userId,d),m=[];let g=new ut(((v,E)=>Le(v.canonicalString(),E.canonicalString())));for(const v of i){const E=DC(this.userId,v.key.path,u);g=g.add(v.key.path.popLast()),m.push(a.put(h)),m.push(s.put(E,SO))}return g.forEach((v=>{m.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),W.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,t){return Vs(e).get(t).next((r=>r?(xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ra(this.serializer,r)):null))}er(e,t){return this.Xn[t]?W.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Vs(e).ee({index:oa,range:i},((a,u,d)=>{u.userId===this.userId&&(xe(u.batchId>=r,47524,{tr:r}),s=ra(this.serializer,u)),d.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ua;return Vs(e).ee({index:oa,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ua],[this.userId,Number.POSITIVE_INFINITY]);return Vs(e).J(oa,t).next((r=>r.map((i=>ra(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Pf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ol(e).ee({range:i},((a,u,d)=>{const[h,m,g]=a,v=si(m);if(h===this.userId&&t.path.isEqual(v))return Vs(e).get(g).next((E=>{if(!E)throw Ie(61480,{nr:a,batchId:g});xe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:g}),s.push(ra(this.serializer,E))}));d.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Le);const i=[];return t.forEach((s=>{const a=Pf(this.userId,s.path),u=IDBKeyRange.lowerBound(a),d=Ol(e).ee({range:u},((h,m,g)=>{const[v,E,b]=h,R=si(E);v===this.userId&&s.path.isEqual(R)?r=r.add(b):g.done()}));i.push(d)})),W.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Pf(this.userId,r),a=IDBKeyRange.lowerBound(s);let u=new ut(Le);return Ol(e).ee({range:a},((d,h,m)=>{const[g,v,E]=d,b=si(v);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(u=u.add(E)):m.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(Vs(e).get(s).next((a=>{if(a===null)throw Ie(35274,{batchId:s});xe(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ra(this.serializer,a))})))})),W.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return jA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),W.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Ol(e).ee({range:r},((s,a,u)=>{if(s[0]===this.userId){const d=si(s[1]);i.push(d)}else u.done()})).next((()=>{xe(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return BA(e,this.userId,t)}_r(e){return $A(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ua,lastStreamToken:""}))}}function BA(n,e,t){const r=Pf(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Ol(n).ee({range:s,X:!0},((u,d,h)=>{const[m,g,v]=u;m===e&&g===i&&(a=!0),h.done()})).next((()=>a))}function Vs(n){return rn(n,kr)}function Ol(n){return rn(n,Yl)}function $A(n){return rn(n,ad)}class Ta{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ta(0)}static cr(){return new Ta(-1)}}class YM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ta(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Re.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Cl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(xe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Cl(e).ee(((a,u)=>{const d=Fc(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))})).next((()=>W.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Cl(e).ee(((r,i)=>{const s=Fc(i);t(s)}))}lr(e){return _I(e).get(Gf).next((t=>(xe(t!==null,2888),t)))}hr(e,t){return _I(e).put(Gf,t)}Pr(e,t){return Cl(e).put(OA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=va(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Cl(e).ee({range:i,index:VC},((a,u,d)=>{const h=Fc(u);bd(t,h.target)&&(s=h,d.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Bs(e);return t.forEach((a=>{const u=An(a.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,a))})),W.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bs(e);return W.forEach(t,(s=>{const a=An(s.path);return W.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Bs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bs(e);let s=ze();return i.ee({range:r,X:!0},((a,u,d)=>{const h=si(a[1]),m=new ve(h);s=s.add(m)})).next((()=>s))}containsKey(e,t){const r=An(t.path),i=IDBKeyRange.bound([r],[IC(r)],!1,!0);let s=0;return Bs(e).ee({index:a_,X:!0,range:i},(([a,u],d,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}At(e,t){return Cl(e).get(t).next((r=>r?Fc(r):null))}}function Cl(n){return rn(n,Xl)}function _I(n){return rn(n,ca)}function Bs(n){return rn(n,Jl)}const wI="LruGarbageCollector",XM=1048576;function TI([n,e],[t,r]){const i=Le(n,t);return i===0?Le(e,r):i}class JM{constructor(e){this.Ir=e,this.buffer=new ut(TI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(wI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){po(t)?le(wI,"Ignoring IndexedDB error during garbage collection: ",t):await fo(t)}await this.Vr(3e5)}))}}class ZM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return W.resolve($n.ce);const r=new JM(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(vI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,u,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),kl()<=Ge.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function WA(n,e){return new ZM(n,e)}class eL{constructor(e,t){this.db=e,this.garbageCollector=WA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}br(e,t){return(function(i,s){let a=!1;return $A(i).te((u=>BA(i,u,s).next((d=>(d&&(a=!0),W.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,u)=>{if(u<=t){const d=this.br(e,a).next((h=>{if(!h)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Re.min()),Bs(e).delete((function(g){return[0,An(g.path)]})(a)))))}));i.push(d)}})).next((()=>W.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}Sr(e,t){const r=Bs(e);let i,s=$n.ce;return r.ee({index:a_},(([a,u],{path:d,sequenceNumber:h})=>{a===0?(s!==$n.ce&&t(new ve(si(i)),s),s=h,i=d):s=$n.ce})).next((()=>{s!==$n.ce&&t(new ve(si(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(n,e){return Bs(n).put((function(r,i){return{targetId:0,path:An(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class HA{constructor(){this.changes=new Zi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Go(e).put(r)}removeEntry(e,t,r){return Go(e).delete((function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],ep(a),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Vt.newInvalidDocument(t);return Go(e).ee({index:Sf,range:IDBKeyRange.only(Ec(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Vt.newInvalidDocument(t)};return Go(e).ee({index:Sf,range:IDBKeyRange.only(Ec(t))},((i,s)=>{r={document:this.Cr(t,s),size:np(s)}})).next((()=>r))}getEntries(e,t){let r=ir();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=ir(),i=new mt(ve.comparator);return this.Fr(e,t,((s,a)=>{const u=this.Cr(s,a);r=r.insert(s,u),i=i.insert(s,np(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return W.resolve();let i=new ut(PI);t.forEach((d=>i=i.add(d)));const s=IDBKeyRange.bound(Ec(i.first()),Ec(i.last())),a=i.getIterator();let u=a.getNext();return Go(e).ee({index:Sf,range:s},((d,h,m)=>{const g=ve.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&PI(u,g)<0;)r(u,null),u=a.getNext();u&&u.isEqual(g)&&(r(u,h),u=a.hasNext()?a.getNext():null),u?m.j(Ec(u)):m.done()})).next((()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Go(e).J(IDBKeyRange.bound(u,d,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let m=ir();for(const g of h){const v=this.Cr(ve.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(xd(t,v)||i.has(v.key))&&(m=m.insert(v.key,v))}return m}))}getAllFromCollectionGroup(e,t,r,i){let s=ir();const a=II(t,r),u=II(t,or.max());return Go(e).ee({index:NC,range:IDBKeyRange.bound(a,u,!0)},((d,h,m)=>{const g=this.Cr(ve.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()})).next((()=>s))}newChangeBuffer(e){return new nL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return EI(e).get(Ky).next((t=>(xe(!!t,20021),t)))}Dr(e,t){return EI(e).put(Ky,t)}Cr(e,t){if(t){const r=jM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Re.min())))return r}return Vt.newInvalidDocument(e)}}function qA(n){return new tL(n)}class nL extends HA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Zi((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new ut(((s,a)=>Le(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),a.isValidDocument()){const d=sI(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=np(d);r+=h-u.size,t.push(this.Nr.addEntry(e,s,d))}else if(r-=u.size,this.trackRemovals){const d=sI(this.Nr.serializer,a.convertToNoDocument(Re.min()));t.push(this.Nr.addEntry(e,s,d))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function EI(n){return rn(n,ld)}function Go(n){return rn(n,qf)}function Ec(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function II(n,e){const t=e.documentKey.path.toArray();return[n,ep(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Le(t[s],r[s]),i)return i;return i=Le(t.length,r.length),i||(i=Le(t[t.length-2],r[r.length-2]),i||Le(t[t.length-1],r[r.length-1]))}class rL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Qc(r.mutation,i,zn.empty(),lt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const i=oi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Mc();return s.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=oi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=ir();const a=Kc(),u=(function(){return Kc()})();return t.forEach(((d,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof es)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),Qc(m.mutation,h,m.mutation.getFieldMask(),lt.now())):a.set(h.key,zn.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>u.set(h,new rL(m,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Kc();let i=new mt(((a,u)=>a-u)),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||zn.empty();m=u.applyToLocalView(h,m),r.set(d,m);const g=(i.get(u.batchId)||ze()).add(d);i=i.insert(u.batchId,g)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,g=dA();m.forEach((v=>{if(!s.has(v)){const E=yA(t.get(v),r.get(v));E!==null&&g.set(v,E),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return W.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ve.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(oi());let u=Ql,d=s;return a.next((h=>W.forEach(h,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?W.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,ze()))).next((m=>({batchId:u,changes:cA(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((r=>{let i=Mc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Mc();return this.indexManager.getCollectionParents(e,s).next((u=>W.forEach(u,(d=>{const h=(function(g,v){return new Hp(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{a=a.insert(g,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((d,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Vt.newInvalidDocument(m)))}));let u=Mc();return a.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&Qc(m.mutation,h,zn.empty(),lt.now()),xd(t,h)&&(u=u.insert(d,h))})),u}))}}class iL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return W.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:MA(i.bundledQuery),readTime:Vn(i.readTime)}})(t)),W.resolve()}}class sL{constructor(){this.overlays=new mt(ve.comparator),this.qr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=oi();return W.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),W.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const i=oi(),s=t.length+1,a=new ve(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new mt(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=oi(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=oi(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return W.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new w_(t,r));let s=this.qr.get(t);s===void 0&&(s=ze(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class oL{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}class S_{constructor(){this.Qr=new ut(un.$r),this.Ur=new ut(un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new un(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new un(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ve(new st([])),r=new un(t,e),i=new un(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new st([])),r=new un(t,e),i=new un(t,e+1);let s=ze();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new un(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}class aL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ut(un.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new v_(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Zr=this.Zr.add(new un(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return W.resolve(a)}lookupMutationBatch(e,t){return W.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ua:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),i=new un(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const u=this.Xr(a.Yr);s.push(u)})),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Le);return t.forEach((i=>{const s=new un(i,0),a=new un(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(u=>{r=r.add(u.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ve.isDocumentKey(s)||(s=s.child(""));const a=new un(new ve(s),0);let u=new ut(Le);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Yr)),!0)}),a),W.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(t.mutations,(i=>{const s=new un(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new un(t,0),i=this.Zr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lL{constructor(e){this.ri=e,this.docs=(function(){return new mt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let r=ir();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vt.newInvalidDocument(i))})),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ir();const a=t.path,u=new ve(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||s_(AC(m),r)<=0||(i.has(m.key)||xd(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return W.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new uL(this)}getSize(e){return W.resolve(this.size)}}class uL extends HA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),W.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class cL{constructor(e){this.persistence=e,this.si=new Zi((t=>va(t)),bd),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new S_,this.targetCount=0,this.ai=Ta.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),W.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ta(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Pr(t),W.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),W.waitFor(s).next((()=>i))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this._i.containsKey(t))}}class C_{constructor(e,t){this.ui={},this.overlays={},this.ci=new $n(0),this.li=!1,this.li=!0,this.hi=new oL,this.referenceDelegate=e(this),this.Pi=new cL(this),this.indexManager=new KM,this.remoteDocumentCache=(function(i){return new lL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new VA(t),this.Ii=new iL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new aL(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const i=new dL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dL extends xC{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new S_,this.Vi=null}static mi(e){return new Zp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const i=ve.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class rp{constructor(e,t){this.persistence=e,this.pi=new Zi((r=>An(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=WA(this,t)}static mi(e,t){return new rp(e,t)}Ei(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return W.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?W.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((u=>{u||(r++,s.removeEntry(a,Re.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}br(e,t,r){return W.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hL{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Fp("createOrUpgrade",t);r<1&&i>=1&&((function(d){d.createObjectStore(Ad)})(e),(function(d){d.createObjectStore(ad,{keyPath:PO}),d.createObjectStore(kr,{keyPath:OE,autoIncrement:!0}).createIndex(oa,ME,{unique:!0}),d.createObjectStore(Yl)})(e),SI(e),(function(d){d.createObjectStore(Jo)})(e));let a=W.resolve();return r<3&&i>=3&&(r!==0&&((function(d){d.deleteObjectStore(Jl),d.deleteObjectStore(Xl),d.deleteObjectStore(ca)})(e),SI(e)),a=a.next((()=>(function(d){const h=d.store(ca),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return h.put(Gf,m)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(d,h){return h.store(kr).J().next((g=>{d.deleteObjectStore(kr),d.createObjectStore(kr,{keyPath:OE,autoIncrement:!0}).createIndex(oa,ME,{unique:!0});const v=h.store(kr),E=g.map((b=>v.put(b)));return W.waitFor(E)}))})(e,s)))),a=a.next((()=>{(function(d){d.createObjectStore(Zl,{keyPath:NO})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(d){d.createObjectStore(ld)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(jp,{keyPath:VO})})(e),(function(d){d.createObjectStore(Bp,{keyPath:OO})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore($p,{keyPath:$O});h.createIndex(Yy,zO,{unique:!1}),h.createIndex(LC,WO,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(qf,{keyPath:CO});h.createIndex(Sf,AO),h.createIndex(NC,bO)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Jo)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(d){d.createObjectStore(l_,{keyPath:MO,autoIncrement:!0}).createIndex(Qy,LO,{unique:!1}),d.createObjectStore(Wc,{keyPath:FO}).createIndex(OC,UO,{unique:!1}),d.createObjectStore(Hc,{keyPath:jO}).createIndex(MC,BO,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(Wc).clear()})).next((()=>{t.objectStore(Hc).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(u_,{keyPath:HO})})(e)}))),r<18&&i>=18&&lC()&&(a=a.next((()=>{t.objectStore(Wc).clear()})).next((()=>{t.objectStore(Hc).clear()}))),a}wi(e){let t=0;return e.store(Jo).ee(((r,i)=>{t+=np(i)})).next((()=>{const r={byteSize:t};return e.store(ld).put(Ky,r)}))}yi(e){const t=e.store(ad),r=e.store(kr);return t.J().next((i=>W.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,ua],[s.userId,s.lastAcknowledgedBatchId]);return r.J(oa,a).next((u=>W.forEach(u,(d=>{xe(d.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const h=ra(this.serializer,d);return jA(e,s.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(Jl),r=e.store(Jo);return e.store(ca).get(Gf).next((i=>{const s=[];return r.ee(((a,u)=>{const d=new st(a),h=(function(g){return[0,An(g)]})(d);s.push(t.get(h).next((m=>m?W.resolve():(g=>t.put({targetId:0,path:An(g),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>W.waitFor(s)))}))}bi(e,t){e.createObjectStore(ud,{keyPath:DO});const r=t.store(ud),i=new P_,s=a=>{if(i.add(a)){const u=a.lastSegment(),d=a.popLast();return r.put({collectionId:u,parent:An(d)})}};return t.store(Jo).ee({X:!0},((a,u)=>{const d=new st(a);return s(d.popLast())})).next((()=>t.store(Yl).ee({X:!0},(([a,u,d],h)=>{const m=si(u);return s(m.popLast())}))))}Di(e){const t=e.store(Xl);return t.ee(((r,i)=>{const s=Fc(i),a=OA(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Jo),i=[];return r.ee(((s,a)=>{const u=t.store(qf),d=(function(g){return g.document?new ve(st.fromString(g.document.name).popFirst(5)):g.noDocument?ve.fromSegments(g.noDocument.path):g.unknownDocument?ve.fromSegments(g.unknownDocument.path):Ie(36783)})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(h))})).next((()=>W.waitFor(i)))}Fi(e,t){const r=t.store(kr),i=qA(this.serializer),s=new C_(Zp.mi,this.serializer.yt);return r.J().next((a=>{const u=new Map;return a.forEach((d=>{let h=u.get(d.userId)??ze();ra(this.serializer,d).keys().forEach((m=>h=h.add(m))),u.set(d.userId,h)})),W.forEach(u,((d,h)=>{const m=new cn(h),g=Xp.wt(this.serializer,m),v=s.getIndexManager(m),E=Jp.wt(m,this.serializer,v,s.referenceDelegate);return new GA(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new Xy(t,$n.ce),d).next()}))}))}}function SI(n){n.createObjectStore(Jl,{keyPath:RO}).createIndex(a_,kO,{unique:!0}),n.createObjectStore(Xl,{keyPath:"targetId"}).createIndex(VC,xO,{unique:!0}),n.createObjectStore(ca)}const Os="IndexedDbPersistence",sy=18e5,oy=5e3,ay="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fL="main";class A_{constructor(e,t,r,i,s,a,u,d,h,m,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=u,this.xi=h,this.Oi=m,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!A_.v())throw new ye(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eL(this,i),this.$i=t+fL,this.serializer=new VA(d),this.Ui=new Js(this.$i,this.Ni,new hL(this.serializer)),this.hi=new $M,this.Pi=new YM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qA(this.serializer),this.Ii=new BM,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&Ut(Os,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ie.FAILED_PRECONDITION,ay);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new $n(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(po(e))return le(Os,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(Os,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ic(e).get(Tl).next((t=>W.resolve(this.es(t))))}ts(e){return uf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,sy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=rn(t,Zl);return r.J().next((i=>{const s=this.ss(i,sy),a=i.filter((u=>s.indexOf(u)===-1));return W.forEach(a,(u=>r.delete(u.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?W.resolve(!0):Ic(e).get(Tl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,oy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ye(ie.FAILED_PRECONDITION,ay);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).J().next((r=>this.ss(r,oy).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||a&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(Os,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ad,Zl],(e=>{const t=new Xy(e,$n.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>uf(e).J().next((t=>this.ss(t,sy).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Jp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Xp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){le(Os,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(d){return d===18?KO:d===17?BC:d===16?GO:d===15?c_:d===14?jC:d===13?UC:d===12?qO:d===11?FC:void Ie(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(u=>(a=new Xy(u,this.ci?this.ci.next():$n.ce),t==="readwrite-primary"?this.Hi(a).next((d=>!!d||this.Yi(a))).next((d=>{if(!d)throw Ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ye(ie.FAILED_PRECONDITION,bC);return r(a)})).next((d=>this.Xi(a).next((()=>d)))):this.Is(a).next((()=>r(a)))))).then((u=>(a.raiseOnCommittedEvent(),u)))}Is(e){return Ic(e).get(Tl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,oy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ie.FAILED_PRECONDITION,ay)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ic(e).put(Tl,t)}static v(){return Js.v()}Zi(e){const t=Ic(e);return t.get(Tl).next((r=>this.es(r)?(le(Os,"Releasing primary lease."),t.delete(Tl)):W.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ut(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;aC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(Os,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ut(Os,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ut("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ic(n){return rn(n,Ad)}function uf(n){return rn(n,Zl)}function KA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class b_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new b_(e,t.fromCache,r,i)}}class pL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return aC()?8:RC(nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new pL;return this.Ss(e,t,a).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(kl()<=Ge.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Dl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(kl()<=Ge.DEBUG&&le("QueryEngine","Query:",Dl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(kl()<=Ge.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Dl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):W.resolve())}ys(e,t){if(QE(t))return W.resolve(null);let r=sr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=rv(t,null,"F"),r=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=ze(...s);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const h=this.Ds(t,u);return this.Cs(t,h,a,d.readTime)?this.ys(e,rv(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,r,i){return QE(t)||i.isEqual(Re.min())?W.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?W.resolve(null):(kl()<=Ge.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dl(t)),this.vs(e,a,t,CC(i,Ql)).next((u=>u)))}))}Ds(e,t){let r=new ut(lA(e));return t.forEach(((i,s)=>{xd(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return kl()<=Ge.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Dl(t)),this.ps.getDocumentsMatchingQuery(e,t,or.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const x_="LocalStore",mL=3e8;class gL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new mt(Le),this.xs=new Zi((s=>va(s)),bd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function YA(n,e,t,r){return new gL(n,e,t,r)}async function XA(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let d=ze();for(const h of i){a.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function yL(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,m){const g=h.batch,v=g.keys();let E=W.resolve();return v.forEach((b=>{E=E.next((()=>m.getEntry(d,b))).next((R=>{const C=h.docVersions.get(b);xe(C!==null,48541),R.version.compareTo(C)<0&&(g.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),m.addEntry(R)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function JA(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function vL(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;u.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let E=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(zt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,r)),i=i.insert(g,E),(function(R,C,B){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=mL?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(v,E,m)&&u.push(t.Pi.updateTargetData(s,E))}));let d=ir(),h=ze();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(_L(s,a,e.documentUpdates).next((m=>{d=m.ks,h=m.qs}))),!r.isEqual(Re.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return W.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(t.Ms=i,s)))}function _L(n,e,t){let r=ze(),i=ze();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=ir();return t.forEach(((u,d)=>{const h=s.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Re.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):le(x_,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{ks:a,qs:i}}))}function wL(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ua),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ip(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,W.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Fi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function au(n,e,t){const r=Ae(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!po(a))throw a;le(x_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function dv(n,e,t){const r=Ae(n);let i=Re.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,m){const g=Ae(d),v=g.xs.get(m);return v!==void 0?W.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,m)})(r,a,sr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,u.targetId).next((d=>{s=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Re.min(),t?s:ze()))).next((u=>(tb(r,aA(e),u),{documents:u,Qs:s})))))}function ZA(n,e){const t=Ae(n),r=Ae(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function eb(n,e){const t=Ae(n),r=t.Os.get(e)||Re.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,CC(r,Ql),Number.MAX_SAFE_INTEGER))).then((i=>(tb(t,e,i),i)))}function tb(n,e,t){let r=n.Os.get(e)||Re.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}const nb="firestore_clients";function CI(n,e){return`${nb}_${n}_${e}`}const rb="firestore_mutations";function AI(n,e,t){let r=`${rb}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const ib="firestore_targets";function ly(n,e){return`${ib}_${n}_${e}`}const ni="SharedClientState";class sp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ye(i.error.code,i.error.message))),a?new sp(e,t,i.state,s):(Ut(ni,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ye(r.error.code,r.error.message))),s?new Yc(e,r.state,i):(Ut(ni,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class op{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=g_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=kC(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new op(e,s):(Ut(ni,`Failed to parse client data for instance '${e}': ${t}`),null)}}class R_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new R_(t.clientId,t.onlineState):(Ut(ni,`Failed to parse online state: ${e}`),null)}}class hv{constructor(){this.activeTargetIds=g_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uy{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new mt(Le),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=CI(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new hv),this.ro=new RegExp(`^${nb}_${a}_([^_]*)$`),this.io=new RegExp(`^${rb}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ib}_${a}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(CI(this.persistenceKey,r));if(i){const s=op.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(ly(this.persistenceKey,e));if(i){const s=Yc.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ly(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return le(ni,"READ",e,t),t}setItem(e,t){le(ni,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){le(ni,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(le(ni,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=$n.ce;if(s!=null)try{const u=JSON.parse(s);xe(typeof u=="number",30636,{So:s}),a=u}catch(u){Ut(ni,"Failed to read sequence number from WebStorage",u)}return a})(t.newValue);r!==$n.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new sp(this.currentUser,e,t,r),s=AI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=AI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=ly(this.persistenceKey,e),s=new Yc(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return op.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return sp.Ws(new cn(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return Yc.Ws(i,t)}uo(e){return R_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);le(ni,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],u=[];return s.forEach((d=>{i.has(d)||a.push(d)})),i.forEach((d=>{s.has(d)||u.push(d)})),this.syncEngine.Fo(a,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=g_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class sb{constructor(){this.Mo=new hv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TL{Oo(e){}shutdown(){}}const bI="ConnectivityMonitor";class xI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(bI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(bI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let cf=null;function fv(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}const cy="RestConnection",EL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Kf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=fv(),u=this.zo(e,t.toUriEncodedString());le(cy,`Sending RPC '${e}' ${a}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,s);const{host:h}=new URL(u),m=ho(h);return this.Jo(e,u,d,r,m).then((g=>(le(cy,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw no(cy,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_u})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=EL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class PL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const En="WebChannelConnection";class SL extends IL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=fv();return new Promise(((u,d)=>{const h=new gC;h.setWithCredentials(!0),h.listenOnce(yC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ef.NO_ERROR:const g=h.getResponseJson();le(En,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Ef.TIMEOUT:le(En,`RPC '${e}' ${a} timed out`),d(new ye(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const v=h.getStatus();if(le(En,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E?.error;if(b&&b.status&&b.message){const R=(function(B){const V=B.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(V)>=0?V:ie.UNKNOWN})(b.status);d(new ye(R,b.message))}else d(new ye(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new ye(ie.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{le(En,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);le(En,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=fv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=wC(),u=_C(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=s.join("");le(En,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=a.createWebChannel(m,d);this.I_(g);let v=!1,E=!1;const b=new PL({Yo:C=>{E?le(En,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(le(En,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),le(En,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},Zo:()=>g.close()}),R=(C,B,V)=>{C.listen(B,(M=>{try{V(M)}catch(z){setTimeout((()=>{throw z}),0)}}))};return R(g,Oc.EventType.OPEN,(()=>{E||(le(En,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),R(g,Oc.EventType.CLOSE,(()=>{E||(E=!0,le(En,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(g))})),R(g,Oc.EventType.ERROR,(C=>{E||(E=!0,no(En,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),b.a_(new ye(ie.UNAVAILABLE,"The operation could not be completed")))})),R(g,Oc.EventType.MESSAGE,(C=>{if(!E){const B=C.data[0];xe(!!B,16349);const V=B,M=V?.error||V[0]?.error;if(M){le(En,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let te=(function(S){const D=qt[S];if(D!==void 0)return wA(D)})(z),Z=M.message;te===void 0&&(te=ie.INTERNAL,Z="Unknown error status: "+z+" with message "+M.message),E=!0,b.a_(new ye(te,Z)),g.close()}else le(En,`RPC '${e}' stream ${i} received:`,B),b.u_(B)}})),R(u,vC.STAT_EVENT,(C=>{C.stat===Hy.PROXY?le(En,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Hy.NOPROXY&&le(En,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ob(){return typeof window<"u"?window:null}function Df(){return typeof document<"u"?document:null}function em(n){return new RM(n,!0)}class ab{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const RI="PersistentStream";class lb{constructor(e,t,r,i,s,a,u,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ab(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ut(t.toString()),Ut("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ye(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(RI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(RI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CL extends lb{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=NM(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Re.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Re.min():a.readTime?Vn(a.readTime):Re.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ov(this.serializer),t.addTarget=(function(s,a){let u;const d=a.target;if(u=Yf(d)?{documents:bA(s,d)}:{query:xA(s,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=IA(s,a.resumeToken);const h=iv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Re.min())>0){u.readTime=ou(s,a.snapshotVersion.toTimestamp());const h=iv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=OM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ov(this.serializer),t.removeTarget=e,this.q_(t)}}class AL extends lb{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=VM(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ov(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Zf(this.serializer,r)))};this.q_(t)}}class bL{}class xL extends bL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,sv(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ie.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,sv(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ie.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ut(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ea="RemoteStore";class kL{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Ra(this)&&(le(Ea,"Restarting streams for network reachability change."),await(async function(d){const h=Ae(d);h.Ea.add(4),await Dd(h),h.Ra.set("Unknown"),h.Ea.delete(4),await tm(h)})(this))}))})),this.Ra=new RL(r,i)}}async function tm(n){if(Ra(n))for(const e of n.da)await e(!0)}async function Dd(n){for(const e of n.da)await e(!1)}function nm(n,e){const t=Ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),N_(t)?D_(t):Eu(t).O_()&&k_(t,e))}function lu(n,e){const t=Ae(n),r=Eu(t);t.Ia.delete(e),r.O_()&&ub(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ra(t)&&t.Ra.set("Unknown"))}function k_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Eu(n).Y_(e)}function ub(n,e){n.Va.Ue(e),Eu(n).Z_(e)}function D_(n){n.Va=new CM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Eu(n).start(),n.Ra.ua()}function N_(n){return Ra(n)&&!Eu(n).x_()&&n.Ia.size>0}function Ra(n){return Ae(n).Ea.size===0}function cb(n){n.Va=void 0}async function DL(n){n.Ra.set("Online")}async function NL(n){n.Ia.forEach(((e,t)=>{k_(n,e)}))}async function VL(n,e){cb(n),N_(n)?(n.Ra.ha(e),D_(n)):n.Ra.set("Unknown")}async function OL(n,e,t){if(n.Ra.set("Online"),e instanceof EA&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){le(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ap(n,r)}else if(e instanceof Rf?n.Va.Ze(e):e instanceof TA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const r=await JA(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.Va.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const m=s.Ia.get(d);if(!m)return;s.Ia.set(d,m.withResumeToken(zt.EMPTY_BYTE_STRING,m.snapshotVersion)),ub(s,d);const g=new Fi(m.target,d,h,m.sequenceNumber);k_(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){le(Ea,"Failed to raise snapshot:",r),await ap(n,r)}}async function ap(n,e,t){if(!po(e))throw e;n.Ea.add(1),await Dd(n),n.Ra.set("Offline"),t||(t=()=>JA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Ea,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await tm(n)}))}function db(n,e){return e().catch((t=>ap(n,t,e)))}async function Tu(n){const e=Ae(n),t=so(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ua;for(;ML(e);)try{const i=await wL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,LL(e,i)}catch(i){await ap(e,i)}hb(e)&&fb(e)}function ML(n){return Ra(n)&&n.Ta.length<10}function LL(n,e){n.Ta.push(e);const t=so(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hb(n){return Ra(n)&&!so(n).x_()&&n.Ta.length>0}function fb(n){so(n).start()}async function FL(n){so(n).ra()}async function UL(n){const e=so(n);for(const t of n.Ta)e.ea(t.mutations)}async function jL(n,e,t){const r=n.Ta.shift(),i=__.from(r,e,t);await db(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Tu(n)}async function BL(n,e){e&&so(n).X_&&await(async function(r,i){if((function(a){return IM(a)&&a!==ie.ABORTED})(i.code)){const s=r.Ta.shift();so(r).B_(),await db(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Tu(r)}})(n,e),hb(n)&&fb(n)}async function kI(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),le(Ea,"RemoteStore received new credentials");const r=Ra(t);t.Ea.add(3),await Dd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await tm(t)}async function pv(n,e){const t=Ae(n);e?(t.Ea.delete(2),await tm(t)):e||(t.Ea.add(2),await Dd(t),t.Ra.set("Unknown"))}function Eu(n){return n.ma||(n.ma=(function(t,r,i){const s=Ae(t);return s.sa(),new CL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:DL.bind(null,n),t_:NL.bind(null,n),r_:VL.bind(null,n),H_:OL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),N_(n)?D_(n):n.Ra.set("Unknown")):(await n.ma.stop(),cb(n))}))),n.ma}function so(n){return n.fa||(n.fa=(function(t,r,i){const s=Ae(t);return s.sa(),new AL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:FL.bind(null,n),r_:BL.bind(null,n),ta:UL.bind(null,n),na:jL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Tu(n)):(await n.fa.stop(),n.Ta.length>0&&(le(Ea,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class V_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new V_(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O_(n,e){if(Ut("AsyncQueue",`${e}: ${n}`),po(n))return new ye(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=Mc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new $l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DI{constructor(){this.ga=new mt(ve.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class uu{constructor(e,t,r,i,s,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new uu(e,t,$l.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class $L{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zL{constructor(){this.queries=NI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ae(t),s=i.queries;i.queries=NI(),s.forEach(((a,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new ye(ie.ABORTED,"Firestore shutting down"))}}function NI(){return new Zi((n=>oA(n)),Gp)}async function pb(n,e){const t=Ae(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new $L,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=O_(a,`Initialization of query '${Dl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&M_(t)}async function mb(n,e){const t=Ae(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WL(n,e){const t=Ae(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Sa)u.Fa(i)&&(r=!0);a.wa=i}}r&&M_(t)}function HL(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function M_(n){n.Ca.forEach((e=>{e.next()}))}var mv,VI;(VI=mv||(mv={})).Ma="default",VI.Cache="cache";class gb{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new uu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=uu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mv.Cache}}class yb{constructor(e){this.key=e}}class vb{constructor(e){this.key=e}}class qL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=lA(e),this.tu=new $l(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new DI,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),E=xd(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;v&&E?v.data.isEqual(E.data)?b!==R&&(r.track({type:3,doc:E}),C=!0):this.su(v,E)||(r.track({type:2,doc:E}),C=!0,(d&&this.eu(E,d)>0||h&&this.eu(E,h)<0)&&(u=!0)):!v&&E?(r.track({type:0,doc:E}),C=!0):v&&!E&&(r.track({type:1,doc:v}),C=!0,(d||h)&&(u=!0)),C&&(E?(a=a.add(E),s=R?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,g)=>(function(E,b){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:C})}};return R(E)-R(b)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,h=d!==this.Za;return this.Za=d,a.length!==0||h?{snapshot:new uu(this.query,e.tu,s,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new vb(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new yb(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return uu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Iu="SyncEngine";class GL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KL{constructor(e){this.key=e,this.hu=!1}}class QL{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Zi((u=>oA(u)),Gp),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ve.comparator),this.Au=new Map,this.Ru=new S_,this.Vu={},this.mu=new Map,this.fu=Ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YL(n,e,t=!0){const r=rm(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await _b(r,e,t,!0),i}async function XL(n,e){const t=rm(n);await _b(t,e,!0,!1)}async function _b(n,e,t,r){const i=await ip(n.localStore,sr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await L_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&nm(n.remoteStore,i),u}async function L_(n,e,t,r,i){n.pu=(g,v,E)=>(async function(R,C,B,V){let M=C.view.ru(B);M.Cs&&(M=await dv(R.localStore,C.query,!1).then((({documents:x})=>C.view.ru(x,M))));const z=V&&V.targetChanges.get(C.targetId),te=V&&V.targetMismatches.get(C.targetId)!=null,Z=C.view.applyChanges(M,R.isPrimaryClient,z,te);return gv(R,C.targetId,Z.au),Z.snapshot})(n,g,v,E);const s=await dv(n.localStore,e,!0),a=new qL(e,s.Qs),u=a.ru(s.documents),d=kd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,d);gv(n,t,h.au);const m=new GL(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function JL(n,e,t){const r=Ae(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Gp(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await au(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&lu(r.remoteStore,i.targetId),cu(r,i.targetId)})).catch(fo)):(cu(r,i.targetId),await au(r.localStore,i.targetId,!0))}async function ZL(n,e){const t=Ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),lu(t.remoteStore,r.targetId))}async function e2(n,e,t){const r=B_(n);try{const i=await(function(a,u){const d=Ae(a),h=lt.now(),m=u.reduce(((E,b)=>E.add(b.key)),ze());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=ir(),R=ze();return d.Ns.getEntries(E,m).next((C=>{b=C,b.forEach(((B,V)=>{V.isValidDocument()||(R=R.add(B))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,b))).next((C=>{g=C;const B=[];for(const V of u){const M=TM(V,g.get(V.key).overlayedDocument);M!=null&&B.push(new es(V.key,M,XC(M.value.mapValue),Cn.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,B,u)})).next((C=>{v=C;const B=C.applyToLocalDocumentSet(g,R);return d.documentOverlayCache.saveOverlays(E,C.batchId,B)}))})).then((()=>({batchId:v.batchId,changes:cA(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let h=a.Vu[a.currentUser.toKey()];h||(h=new mt(Le)),h=h.insert(u,d),a.Vu[a.currentUser.toKey()]=h})(r,i.batchId,t),await go(r,i.changes),await Tu(r.remoteStore)}catch(i){const s=O_(i,"Failed to persist write");t.reject(s)}}async function wb(n,e){const t=Ae(n);try{const r=await vL(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?xe(a.hu,14607):i.removedDocuments.size>0&&(xe(a.hu,42227),a.hu=!1))})),await go(t,r,e)}catch(r){await fo(r)}}function OI(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const d=Ae(a);d.onlineState=u;let h=!1;d.queries.forEach(((m,g)=>{for(const v of g.Sa)v.va(u)&&(h=!0)})),h&&M_(d)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t2(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new mt(ve.comparator);a=a.insert(s,Vt.newNoDocument(s,Re.min()));const u=ze().add(s),d=new Rd(Re.min(),new Map,new mt(Le),a,u);await wb(r,d),r.du=r.du.remove(s),r.Au.delete(e),j_(r)}else await au(r.localStore,e,!1).then((()=>cu(r,e,t))).catch(fo)}async function n2(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=await yL(t.localStore,e);U_(t,r,null),F_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await go(t,i)}catch(i){await fo(i)}}async function r2(n,e,t){const r=Ae(n);try{const i=await(function(a,u){const d=Ae(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(xe(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);U_(r,e,t),F_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await go(r,i)}catch(i){await fo(i)}}function F_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function U_(n,e,t){const r=Ae(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function cu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Tb(n,r)}))}function Tb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(lu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),j_(n))}function gv(n,e,t){for(const r of t)r instanceof yb?(n.Ru.addReference(r.key,e),i2(n,r)):r instanceof vb?(le(Iu,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Tb(n,r.key)):Ie(19791,{wu:r})}function i2(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(Iu,"New document in limbo: "+t),n.Eu.add(r),j_(n))}function j_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(st.fromString(e)),r=n.fu.next();n.Au.set(r,new KL(t)),n.du=n.du.insert(t,r),nm(n.remoteStore,new Fi(sr(qp(t.path)),r,"TargetPurposeLimboResolution",$n.ce))}}async function go(n,e,t){const r=Ae(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{a.push(r.pu(d,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=b_.As(d.targetId,h);s.push(m)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(d,h){const m=Ae(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>W.forEach(h,(v=>W.forEach(v.Es,(E=>m.persistence.referenceDelegate.addReference(g,v.targetId,E))).next((()=>W.forEach(v.ds,(E=>m.persistence.referenceDelegate.removeReference(g,v.targetId,E)))))))))}catch(g){if(!po(g))throw g;le(x_,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const E=m.Ms.get(v),b=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(v,R)}}})(r.localStore,s))}async function s2(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){le(Iu,"User change. New user:",e.toKey());const r=await XA(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((d=>{d.reject(new ye(ie.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await go(t,r.Ls)}}function o2(n,e){const t=Ae(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}async function a2(n,e){const t=Ae(n),r=await dv(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&gv(t,e.targetId,i.au),i}async function l2(n,e){const t=Ae(n);return eb(t.localStore,e).then((r=>go(t,r)))}async function u2(n,e,t,r){const i=Ae(n),s=await(function(u,d){const h=Ae(u),m=Ae(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>m.er(g,d).next((v=>v?h.localDocuments.getDocuments(g,v):W.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await Tu(i.remoteStore):t==="acknowledged"||t==="rejected"?(U_(i,e,r||null),F_(i,e),(function(u,d){Ae(Ae(u).mutationQueue).ir(d)})(i.localStore,e)):Ie(6720,"Unknown batchState",{Su:t}),await go(i,s)):le(Iu,"Cannot apply mutation batch with id: "+e)}async function c2(n,e){const t=Ae(n);if(rm(t),B_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await MI(t,r.toArray());t.gu=!0,await pv(t.remoteStore,!0);for(const s of i)nm(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(cu(t,a),au(t.localStore,a,!0)))),lu(t.remoteStore,a)})),await i,await MI(t,r),(function(a){const u=Ae(a);u.Au.forEach(((d,h)=>{lu(u.remoteStore,h)})),u.Ru.Jr(),u.Au=new Map,u.du=new mt(ve.comparator)})(t),t.gu=!1,await pv(t.remoteStore,!1)}}async function MI(n,e,t){const r=Ae(n),i=[],s=[];for(const a of e){let u;const d=r.Iu.get(a);if(d&&d.length!==0){u=await ip(r.localStore,sr(d[0]));for(const h of d){const m=r.Tu.get(h),g=await a2(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await ZA(r.localStore,a);u=await ip(r.localStore,h),await L_(r,Eb(h),a,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(s),i}function Eb(n){return sA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function d2(n){return(function(t){return Ae(Ae(t).persistence).Ts()})(Ae(n).localStore)}async function h2(n,e,t,r){const i=Ae(n);if(i.gu)return void le(Iu,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await eb(i.localStore,aA(s[0])),u=Rd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",zt.EMPTY_BYTE_STRING);await go(i,a,u);break}case"rejected":await au(i.localStore,e,!0),cu(i,e,r);break;default:Ie(64155,t)}}async function f2(n,e,t){const r=rm(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){le(Iu,"Adding an already active target "+i);continue}const s=await ZA(r.localStore,i),a=await ip(r.localStore,s);await L_(r,Eb(s),a.targetId,!1,a.resumeToken),nm(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await au(r.localStore,i,!1).then((()=>{lu(r.remoteStore,i),cu(r,i)})).catch(fo)}}function rm(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t2.bind(null,e),e.Pu.H_=WL.bind(null,e.eventManager),e.Pu.yu=HL.bind(null,e.eventManager),e}function B_(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r2.bind(null,e),e}class md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=em(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return YA(this.persistence,new QA,e.initialUser,this.serializer)}Cu(e){return new C_(Zp.mi,this.serializer)}Du(e){return new sb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}md.provider={build:()=>new md};class p2 extends md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xe(this.persistence.referenceDelegate instanceof rp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new C_((r=>rp.mi(r,t)),this.serializer)}}class Ib extends md{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await B_(this.xu.syncEngine),await Tu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return YA(this.persistence,new QA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new zA(r,e.asyncQueue,t)}Mu(e,t){const r=new EO(t,this.persistence);return new TO(e.asyncQueue,r)}Cu(e){const t=KA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new A_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ob(),Df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new sb}}class m2 extends Ib{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof uy&&(this.sharedClientState.syncEngine={Co:u2.bind(null,t),vo:h2.bind(null,t),Fo:f2.bind(null,t),Ts:d2.bind(null,t),Do:l2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await c2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=ob();if(!uy.v(t))throw new ye(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,this.syncEngine),await pv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zL})()}createDatastore(e){const t=em(e.databaseInfo.databaseId),r=(function(s){return new SL(s)})(e.databaseInfo);return(function(s,a,u,d){return new xL(s,a,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new kL(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>OI(this.syncEngine,t,0)),(function(){return xI.v()?new xI:new TL})())}createSyncEngine(e,t){return(function(i,s,a,u,d,h,m){const g=new QL(i,s,a,u,d,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ae(t);le(Ea,"RemoteStore shutting down."),r.Ea.add(5),await Dd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gd.provider={build:()=>new gd};class Pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ut("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const oo="FirestoreClient";class g2{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cn.UNAUTHENTICATED,this.clientId=r_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{le(oo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(le(oo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=O_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function dy(n,e){n.asyncQueue.verifyOperationInProgress(),le(oo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await XA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function LI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await y2(n);le(oo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>kI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>kI(e.remoteStore,i))),n._onlineComponents=e}async function y2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(oo,"Using user provided OfflineComponentProvider");try{await dy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;no("Error using user provided cache. Falling back to memory cache: "+t),await dy(n,new md)}}else le(oo,"Using default OfflineComponentProvider"),await dy(n,new p2(void 0));return n._offlineComponents}async function Sb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(oo,"Using user provided OnlineComponentProvider"),await LI(n,n._uninitializedComponentsProvider._online)):(le(oo,"Using default OnlineComponentProvider"),await LI(n,new gd))),n._onlineComponents}function v2(n){return Sb(n).then((e=>e.syncEngine))}async function Cb(n){const e=await Sb(n),t=e.eventManager;return t.onListen=YL.bind(null,e.syncEngine),t.onUnlisten=JL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZL.bind(null,e.syncEngine),t}function _2(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new Pb({next:v=>{m.Nu(),a.enqueueAndForget((()=>mb(s,g)));const E=v.docs.has(u);!E&&v.fromCache?h.reject(new ye(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&d&&d.source==="server"?h.reject(new ye(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new gb(qp(u.path),m,{includeMetadataChanges:!0,qa:!0});return pb(s,g)})(await Cb(n),n.asyncQueue,e,t,r))),r.promise}function w2(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new Pb({next:v=>{m.Nu(),a.enqueueAndForget((()=>mb(s,g))),v.fromCache&&d.source==="server"?h.reject(new ye(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new gb(u,m,{includeMetadataChanges:!0,qa:!0});return pb(s,g)})(await Cb(n),n.asyncQueue,e,t,r))),r.promise}function Ab(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const FI=new Map;const bb="firestore.googleapis.com",UI=!0;class jI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bb,this.ssl=UI}else this.host=e.host,this.ssl=e.ssl??UI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XM)throw new ye(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ab(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lO;switch(r.type){case"firstParty":return new hO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=FI.get(t);r&&(le("ComponentProvider","Removing Datastore"),FI.delete(t),r.terminate())})(this),Promise.resolve()}}function T2(n,e,t,r={}){n=_r(n,im);const i=ho(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(Xv(`https://${u}`),Jv("Firestore",!0)),s.host!==bb&&s.host!==u&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...s,host:u,ssl:i,emulatorOptions:r};if(!pa(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=cn.MOCK_USER;else{h=MN(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ye(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new cn(g)}n._authCredentials=new uO(new EC(h,m))}}class sm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sm(this.firestore,e,this._query)}}class Yt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Cd(t,Yt._jsonSchema))return new Yt(e,r||null,new ve(st.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:Qt("string",Yt._jsonSchemaVersion),referencePath:Qt("string")};class Zs extends sm{constructor(e,t,r){super(e,t,qp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new ve(e))}withConverter(e){return new Zs(this.firestore,e,this._path)}}function Pt(n,e,...t){if(n=pt(n),PC("collection","path",e),n instanceof im){const r=st.fromString(e,...t);return RE(r),new Zs(n,null,r)}{if(!(n instanceof Yt||n instanceof Zs))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return RE(r),new Zs(n.firestore,null,r)}}function gn(n,e,...t){if(n=pt(n),arguments.length===1&&(e=r_.newId()),PC("doc","path",e),n instanceof im){const r=st.fromString(e,...t);return xE(r),new Yt(n,null,new ve(r))}{if(!(n instanceof Yt||n instanceof Zs))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return xE(r),new Yt(n.firestore,n instanceof Zs?n.converter:null,new ve(r))}}const BI="AsyncQueue";class $I{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ab(this,"async_queue_retry"),this._c=()=>{const r=Df();r&&le(BI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Df();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Df();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new li;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;le(BI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ut("INTERNAL UNHANDLED ERROR: ",zI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=V_.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:zI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function zI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class yo extends im{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $I,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $I(e),this._firestoreClient=void 0,await e}}}function E2(n,e){const t=typeof n=="object"?n:t_(),r=typeof n=="string"?n:Kf,i=Lp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=rC("firestore");s&&T2(i,...s)}return i}function $_(n){if(n._terminated)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xb(n),n._firestoreClient}function xb(n){const e=n._freezeSettings(),t=(function(i,s,a,u){return new YO(i,s,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Ab(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new g2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function I2(n,e){no("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Rb(n,gd.provider,{build:r=>new Ib(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function P2(n){no("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Rb(n,gd.provider,{build:t=>new m2(t,e.cacheSizeBytes)})}function Rb(n,e,t){if((n=_r(n,yo))._firestoreClient||n._terminated)throw new ye(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ye(ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xb(n)}class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(zt.fromBase64String(e))}catch(t){throw new ye(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vr(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cd(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:Qt("string",vr._jsonSchemaVersion),bytes:Qt("string")};class om{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class z_{constructor(e){this._methodName=e}}class ui{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(Cd(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:Qt("string",ui._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};class ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cd(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ci(e.vectorValues);throw new ye(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:Qt("string",ci._jsonSchemaVersion),vectorValues:Qt("object")};const S2=/^__.*__$/;class C2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,t,this.fieldTransforms):new wu(e,this.data,t,this.fieldTransforms)}}class kb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Db(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class W_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new W_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Db(this.Ac)&&S2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||em(e)}Cc(e,t,r,i=!1){return new W_({Ac:e,methodName:t,Dc:r,path:bt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H_(n){const e=n._freezeSettings(),t=em(n._databaseId);return new A2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nb(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);q_("Data must be an object, but it was:",a,r);const u=Vb(r,a);let d,h;if(s.merge)d=new zn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const v=yv(e,g,t);if(!a.contains(v))throw new ye(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Mb(m,v)||m.push(v)}d=new zn(m),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new C2(new Sn(u),d,h)}class am extends z_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof am}}function b2(n,e,t,r){const i=n.Cc(1,e,t);q_("Data must be an object, but it was:",i,r);const s=[],a=Sn.empty();mo(r,((d,h)=>{const m=G_(e,d,t);h=pt(h);const g=i.yc(m);if(h instanceof am)s.push(m);else{const v=lm(h,g);v!=null&&(s.push(m),a.set(m,v))}}));const u=new zn(s);return new kb(a,u,i.fieldTransforms)}function x2(n,e,t,r,i,s){const a=n.Cc(1,e,t),u=[yv(e,r,t)],d=[i];if(s.length%2!=0)throw new ye(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(yv(e,s[v])),d.push(s[v+1]);const h=[],m=Sn.empty();for(let v=u.length-1;v>=0;--v)if(!Mb(h,u[v])){const E=u[v];let b=d[v];b=pt(b);const R=a.yc(E);if(b instanceof am)h.push(E);else{const C=lm(b,R);C!=null&&(h.push(E),m.set(E,C))}}const g=new zn(h);return new kb(m,g,a.fieldTransforms)}function lm(n,e){if(Ob(n=pt(n)))return q_("Unsupported field value:",e,n),Vb(n,e);if(n instanceof z_)return(function(r,i){if(!Db(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let d=lm(u,i.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:ou(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ou(i.serializer,s)}}if(r instanceof ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:IA(i.serializer,r._byteString)};if(r instanceof Yt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:E_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ci)return(function(a,u){return{mapValue:{fields:{[h_]:{stringValue:f_},[eu]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return y_(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${i_(r)}`)})(n,e)}function Vb(n,e){const t={};return $C(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(n,((r,i)=>{const s=lm(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Ob(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof ui||n instanceof vr||n instanceof Yt||n instanceof z_||n instanceof ci)}function q_(n,e,t){if(!Ob(t)||!SC(t)){const r=i_(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function yv(n,e,t){if((e=pt(e))instanceof om)return e._internalPath;if(typeof e=="string")return G_(n,e);throw lp("Field path arguments must be of type string or ",n,!1,void 0,t)}const R2=new RegExp("[~\\*/\\[\\]]");function G_(n,e,t){if(e.search(R2)>=0)throw lp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new om(...e.split("."))._internalPath}catch{throw lp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ye(ie.INVALID_ARGUMENT,u+n+d)}function Mb(n,e){return n.some((t=>t.isEqual(e)))}class Lb{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class k2 extends Lb{data(){return super.data()}}function Fb(n,e){return typeof e=="string"?G_(n,e):e instanceof om?e._internalPath:e._delegate._internalPath}function D2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N2{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return mo(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[eu].arrayValue?.values?.map((r=>It(r.doubleValue)));return new ci(t)}convertGeoPoint(e){return new ui(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cd(e));default:return null}}convertTimestamp(e){const t=Hi(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=st.fromString(e);xe(NA(r),9688,{name:e});const i=new ya(r.get(1),r.get(3)),s=new ve(r.popFirst(5));return i.isEqual(t)||Ut(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Ub(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends Lb{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Fb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ha._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Qt("string",ha._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Nf extends ha{data(e={}){return super.data(e)}}class zl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Uc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Nf(this._firestore,this._userDataWriter,r.key,r,new Uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const d=new Nf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Uc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const d=new Nf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Uc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:V2(u.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=r_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function V2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function um(n){n=_r(n,Yt);const e=_r(n.firestore,yo);return _2($_(e),n._key).then((t=>O2(e,n,t)))}zl._jsonSchemaVersion="firestore/querySnapshot/1.0",zl._jsonSchema={type:Qt("string",zl._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class jb extends N2{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}function tn(n){n=_r(n,sm);const e=_r(n.firestore,yo),t=$_(e),r=new jb(e);return D2(n._query),w2(t,n._query).then((i=>new zl(e,r,n,i)))}function yd(n,e,t){n=_r(n,Yt);const r=_r(n.firestore,yo),i=Ub(n.converter,e,t);return cm(r,[Nb(H_(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Cn.none())])}function ao(n,e,t,...r){n=_r(n,Yt);const i=_r(n.firestore,yo),s=H_(i);let a;return a=typeof(e=pt(e))=="string"||e instanceof om?x2(s,"updateDoc",n._key,e,t,r):b2(s,"updateDoc",n._key,e),cm(i,[a.toMutation(n._key,Cn.exists(!0))])}function lo(n){return cm(_r(n.firestore,yo),[new Yp(n._key,Cn.none())])}function Ml(n,e){const t=_r(n.firestore,yo),r=gn(n),i=Ub(n.converter,e);return cm(t,[Nb(H_(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then((()=>r))}function cm(n,e){return(function(r,i){const s=new li;return r.asyncQueue.enqueueAndForget((async()=>e2(await v2(r),i,s))),s.promise})($_(n),e)}function O2(n,e,t){const r=t.docs.get(e._key),i=new jb(n);return new ha(n,i,e._key,r,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){_u=i})(vu),ma(new to("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new yo(new cO(r.getProvider("auth-internal")),new fO(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ye(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(h.options.projectId,m)})(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),ai(SE,CE,e),ai(SE,CE,"esm2020")})();function Bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M2=Bb,$b=new Pd("auth","Firebase",Bb());const up=new Zv("@firebase/auth");function L2(n,...e){up.logLevel<=Ge.WARN&&up.warn(`Auth (${vu}): ${n}`,...e)}function Vf(n,...e){up.logLevel<=Ge.ERROR&&up.error(`Auth (${vu}): ${n}`,...e)}function Nr(n,...e){throw K_(n,...e)}function di(n,...e){return K_(n,...e)}function zb(n,e,t){const r={...M2(),[e]:t};return new Pd("auth","Firebase",r).create(e,{appName:n.name})}function hi(n){return zb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return $b.create(n,...e)}function ke(n,e,...t){if(!n)throw K_(e,...t)}function Ui(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Vf(e),new Error(e)}function Gi(n,e){n||Ui(e)}function vv(){return typeof self<"u"&&self.location?.href||""}function F2(){return WI()==="http:"||WI()==="https:"}function WI(){return typeof self<"u"&&self.location?.protocol||null}function U2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F2()||BN()||"connection"in navigator)?navigator.onLine:!0}function j2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Nd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gi(t>e,"Short delay should be less than long delay!"),this.isMobile=UN()||$N()}get(){return U2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Q_(n,e){Gi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Wb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z2=new Nd(3e4,6e4);function ts(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Vr(n,e,t,r,i={}){return Hb(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=Sd({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...s};return jN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&ho(n.emulatorConfig.host)&&(h.credentials="include"),Wb.fetch()(await qb(n,n.config.apiHost,t,u),h)})}async function Hb(n,e,t){n._canInitEmulator=!1;const r={...B2,...e};try{const i=new H2(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw df(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw df(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw df(n,"user-disabled",a);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zb(n,m,h);Nr(n,m)}}catch(i){if(i instanceof gi)throw i;Nr(n,"network-request-failed",{message:String(i)})}}async function Vd(n,e,t,r,i={}){const s=await Vr(n,e,t,r,i);return"mfaPendingCredential"in s&&Nr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function qb(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Q_(n.config,i):`${n.config.apiScheme}://${i}`;return $2.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function W2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(di(this.auth,"network-request-failed")),z2.get())})}}function df(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=di(n,e,r);return i.customData._tokenResponse=t,i}function HI(n){return n!==void 0&&n.enterprise!==void 0}class q2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return W2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function G2(n,e){return Vr(n,"GET","/v2/recaptchaConfig",ts(n,e))}async function K2(n,e){return Vr(n,"POST","/v1/accounts:delete",e)}async function cp(n,e){return Vr(n,"POST","/v1/accounts:lookup",e)}function Xc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q2(n,e=!1){const t=pt(n),r=await t.getIdToken(e),i=Y_(r);ke(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Xc(hy(i.auth_time)),issuedAtTime:Xc(hy(i.iat)),expirationTime:Xc(hy(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function hy(n){return Number(n)*1e3}function Y_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Vf("JWT malformed, contained fewer than 3 sections"),null;try{const i=eC(t);return i?JSON.parse(i):(Vf("Failed to decode base64 JWT payload"),null)}catch(i){return Vf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qI(n){const e=Y_(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ia(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gi&&Y2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Y2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class X2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _v{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dp(n){const e=n.auth,t=await n.getIdToken(),r=await Ia(n,cp(e,{idToken:t}));ke(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?Gb(i.providerUserInfo):[],a=Z2(n.providerData,s),u=n.isAnonymous,d=!(n.email&&i.passwordHash)&&!a?.length,h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _v(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function J2(n){const e=pt(n);await dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Gb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function eF(n,e){const t=await Hb(n,{},async()=>{const r=Sd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await qb(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&ho(n.emulatorConfig.host)&&(d.credentials="include"),Wb.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tF(n,e){return Vr(n,"POST","/v2/accounts:revokeToken",ts(n,e))}class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=qI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await eF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Wl;return r&&(ke(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ke(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ke(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return Ui("not implemented")}}function Ms(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Dr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new X2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _v(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q2(this,e)}reload(){return J2(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await Ia(this,K2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:R}=t;ke(g&&R,e,"internal-error");const C=Wl.fromJSON(this.name,R);ke(typeof g=="string",e,"internal-error"),Ms(r,e.name),Ms(i,e.name),ke(typeof v=="boolean",e,"internal-error"),ke(typeof E=="boolean",e,"internal-error"),Ms(s,e.name),Ms(a,e.name),Ms(u,e.name),Ms(d,e.name),Ms(h,e.name),Ms(m,e.name);const B=new Dr({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:C,createdAt:h,lastLoginAt:m});return b&&Array.isArray(b)&&(B.providerData=b.map(V=>({...V}))),d&&(B._redirectEventId=d),B}static async _fromIdTokenResponse(e,t,r=!1){const i=new Wl;i.updateFromServerResponse(t);const s=new Dr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await dp(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ke(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Gb(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Wl;u.updateFromIdToken(r);const d=new Dr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _v(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,h),d}}const GI=new Map;function ji(n){Gi(n instanceof Function,"Expected a class definition");let e=GI.get(n);return e?(Gi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GI.set(n,e),e)}class Kb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kb.type="NONE";const KI=Kb;function Of(n,e,t){return`firebase:${n}:${e}:${t}`}class Hl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Of(this.userKey,i.apiKey,s),this.fullPersistenceKey=Of("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cp(this.auth,{idToken:e}).catch(()=>{});return t?Dr._fromGetAccountInfoResponse(this.auth,t,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Hl(ji(KI),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||ji(KI);const a=Of(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const v=await cp(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Dr._fromGetAccountInfoResponse(e,v,m)}else g=Dr._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Hl(s,e,r):(s=d[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Hl(s,e,r))}}function QI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ex(e))return"Blackberry";if(tx(e))return"Webos";if(Yb(e))return"Safari";if((e.includes("chrome/")||Xb(e))&&!e.includes("edge/"))return"Chrome";if(Zb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Qb(n=nn()){return/firefox\//i.test(n)}function Yb(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xb(n=nn()){return/crios\//i.test(n)}function Jb(n=nn()){return/iemobile/i.test(n)}function Zb(n=nn()){return/android/i.test(n)}function ex(n=nn()){return/blackberry/i.test(n)}function tx(n=nn()){return/webos/i.test(n)}function X_(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nF(n=nn()){return X_(n)&&!!window.navigator?.standalone}function rF(){return zN()&&document.documentMode===10}function nx(n=nn()){return X_(n)||Zb(n)||tx(n)||ex(n)||/windows phone/i.test(n)||Jb(n)}function rx(n,e=[]){let t;switch(n){case"Browser":t=QI(nn());break;case"Worker":t=`${QI(nn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vu}/${r}`}class iF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const d=e(s);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function sF(n,e={}){return Vr(n,"GET","/v2/passwordPolicy",ts(n,e))}const oF=6;class aF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class lF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YI(this),this.idTokenSubscription=new YI(this),this.beforeStateQueue=new iF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ji(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Hl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cp(this,{idToken:e}),r=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Bn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(hi(this));const t=e?pt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sF(this),t=new aF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ji(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await Hl.create(this,[ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&L2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vo(n){return pt(n)}class YI{constructor(e){this.auth=e,this.observer=null,this.addObserver=QN(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uF(n){dm=n}function ix(n){return dm.loadJS(n)}function cF(){return dm.recaptchaEnterpriseScript}function dF(){return dm.gapiScript}function hF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class fF{constructor(){this.enterprise=new pF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mF="recaptcha-enterprise",sx="NO_RECAPTCHA";class gF{constructor(e){this.type=mF,this.auth=vo(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{G2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new q2(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,a,u){const d=window.grecaptcha;HI(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(sx)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&HI(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=cF();d.length!==0&&(d+=u),ix(d).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function XI(n,e,t,r=!1,i=!1){const s=new gF(n);let a;if(i)a=sx;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function hp(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await XI(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await XI(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function yF(n,e){const t=Lp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(pa(s,e??{}))return i;Nr(i,"already-initialized")}return t.initialize({options:e})}function vF(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ji);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function _F(n,e,t){const r=vo(n);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ox(e),{host:a,port:u}=wF(e),d=u===null?"":`:${u}`,h={url:`${s}//${a}${d}/`},m=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(pa(h,r.config.emulator)&&pa(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ho(a)?(Xv(`${s}//${a}${d}`),Jv("Auth",!0)):TF()}function ox(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wF(n){const e=ox(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:JI(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:JI(a)}}}function JI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function TF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class J_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,t){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function EF(n,e){return Vr(n,"POST","/v1/accounts:update",e)}async function IF(n,e){return Vr(n,"POST","/v1/accounts:signUp",e)}async function PF(n,e){return Vd(n,"POST","/v1/accounts:signInWithPassword",ts(n,e))}async function ax(n,e){return Vr(n,"POST","/v1/accounts:sendOobCode",ts(n,e))}async function SF(n,e){return ax(n,e)}async function CF(n,e){return ax(n,e)}async function AF(n,e){return Vd(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))}async function bF(n,e){return Vd(n,"POST","/v1/accounts:signInWithEmailLink",ts(n,e))}class vd extends J_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new vd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hp(e,t,"signInWithPassword",PF);case"emailLink":return AF(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hp(e,r,"signUpPassword",IF);case"emailLink":return bF(e,{idToken:t,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ql(n,e){return Vd(n,"POST","/v1/accounts:signInWithIdp",ts(n,e))}const xF="http://localhost";class Pa extends J_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Pa(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ql(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ql(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ql(e,t)}buildRequest(){const e={requestUri:xF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sd(t)}return e}}function RF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kF(n){const e=Nc(Vc(n)).link,t=e?Nc(Vc(e)).deep_link_id:null,r=Nc(Vc(n)).deep_link_id;return(r?Nc(Vc(r)).link:null)||r||t||e||n}class Z_{constructor(e){const t=Nc(Vc(e)),r=t.apiKey??null,i=t.oobCode??null,s=RF(t.mode??null);ke(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=kF(e);try{return new Z_(t)}catch{return null}}}class Pu{constructor(){this.providerId=Pu.PROVIDER_ID}static credential(e,t){return vd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Z_.parseLink(t);return ke(r,"argument-error"),vd._fromEmailAndCode(e,r.code,r.tenantId)}}Pu.PROVIDER_ID="password";Pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Od extends lx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $s extends Od{constructor(){super("facebook.com")}static credential(e){return Pa._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";class zs extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pa._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zs.credential(t,r)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";class Ws extends Od{constructor(){super("github.com")}static credential(e){return Pa._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";class Hs extends Od{constructor(){super("twitter.com")}static credential(e,t){return Pa._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hs.credential(t,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";async function DF(n,e){return Vd(n,"POST","/v1/accounts:signUp",ts(n,e))}class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Dr._fromIdTokenResponse(e,r,i),a=ZI(r);return new Sa({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ZI(r);return new Sa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ZI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class fp extends gi{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new fp(e,t,r,i)}}function ux(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fp._fromErrorAndOperation(n,s,e,r):s})}async function NF(n,e,t=!1){const r=await Ia(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",r)}async function VF(n,e,t=!1){const{auth:r}=n;if(Bn(r.app))return Promise.reject(hi(r));const i="reauthenticate";try{const s=await Ia(n,ux(r,i,e,n),t);ke(s.idToken,r,"internal-error");const a=Y_(s.idToken);ke(a,r,"internal-error");const{sub:u}=a;return ke(n.uid===u,r,"user-mismatch"),Sa._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Nr(r,"user-mismatch"),s}}async function cx(n,e,t=!1){if(Bn(n.app))return Promise.reject(hi(n));const r="signIn",i=await ux(n,r,e),s=await Sa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function OF(n,e){return cx(vo(n),e)}function MF(n,e,t){ke(t.url?.length>0,n,"invalid-continue-uri"),ke(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ke(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ke(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ke(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function dx(n){const e=vo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LF(n,e,t){const r=vo(n);await hp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CF)}async function FF(n,e,t){if(Bn(n.app))return Promise.reject(hi(n));const r=vo(n),a=await hp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DF).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&dx(n),d}),u=await Sa._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function UF(n,e,t){return Bn(n.app)?Promise.reject(hi(n)):OF(pt(n),Pu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dx(n),r})}async function jF(n,e){const t=pt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&MF(t.auth,i,e);const{email:s}=await SF(t.auth,i);s!==n.email&&await n.reload()}async function BF(n,e){return Vr(n,"POST","/v1/accounts:update",e)}async function $F(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=pt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Ia(r,BF(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function zF(n,e){const t=pt(n);return Bn(t.auth.app)?Promise.reject(hi(t.auth)):hx(t,e,null)}function WF(n,e){return hx(pt(n),null,e)}async function hx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await Ia(n,EF(r,s));await n._updateTokensIfNecessary(a,!0)}function eP(n,e){return pt(n).setPersistence(e)}function HF(n,e,t,r){return pt(n).onIdTokenChanged(e,t,r)}function qF(n,e,t){return pt(n).beforeAuthStateChanged(e,t)}function GF(n,e,t,r){return pt(n).onAuthStateChanged(e,t,r)}function tP(n){return pt(n).signOut()}async function KF(n){return pt(n).delete()}const pp="__sak";class fx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pp,"1"),this.storage.removeItem(pp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const QF=1e3,YF=10;class px extends fx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);rF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,YF):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},QF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}px.type="LOCAL";const mx=px;class gx extends fx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gx.type="SESSION";const yx=gx;function XF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new hm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),d=await XF(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hm.receivers=[];function ew(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class JF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,d)=>{const h=ew("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function fi(){return window}function ZF(n){fi().location.href=n}function vx(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function eU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tU(){return navigator?.serviceWorker?.controller||null}function nU(){return vx()?self:null}const _x="firebaseLocalStorageDb",rU=1,mp="firebaseLocalStorage",wx="fbase_key";class Md{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fm(n,e){return n.transaction([mp],e?"readwrite":"readonly").objectStore(mp)}function iU(){const n=indexedDB.deleteDatabase(_x);return new Md(n).toPromise()}function wv(){const n=indexedDB.open(_x,rU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(mp,{keyPath:wx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(mp)?e(r):(r.close(),await iU(),e(await wv()))})})}async function nP(n,e,t){const r=fm(n,!0).put({[wx]:e,value:t});return new Md(r).toPromise()}async function sU(n,e){const t=fm(n,!1).get(e),r=await new Md(t).toPromise();return r===void 0?null:r.value}function rP(n,e){const t=fm(n,!0).delete(e);return new Md(t).toPromise()}const oU=800,aU=3;class Tx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>aU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hm._getInstance(nU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await eU(),!this.activeServiceWorker)return;this.sender=new JF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wv();return await nP(e,pp,"1"),await rP(e,pp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nP(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=fm(i,!1).getAll();return new Md(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tx.type="LOCAL";const Ex=Tx;new Nd(3e4,6e4);function lU(n,e){return e?ji(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class tw extends J_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ql(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uU(n){return cx(n.auth,new tw(n),n.bypassAuthState)}function cU(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),VF(t,new tw(n),n.bypassAuthState)}async function dU(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),NF(t,new tw(n),n.bypassAuthState)}class Ix{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uU;case"linkViaPopup":case"linkViaRedirect":return dU;case"reauthViaPopup":case"reauthViaRedirect":return cU;default:Nr(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hU=new Nd(2e3,1e4);class Ll extends Ix{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=ew();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hU.get())};e()}}Ll.currentPopupAction=null;const fU="pendingRedirect",Mf=new Map;class pU extends Ix{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Mf.get(this.auth._key());if(!e){try{const r=await mU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Mf.set(this.auth._key(),e)}return this.bypassAuthState||Mf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mU(n,e){const t=vU(e),r=yU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function gU(n,e){Mf.set(n._key(),e)}function yU(n){return ji(n._redirectPersistence)}function vU(n){return Of(fU,n.config.apiKey,n.name)}async function _U(n,e,t=!1){if(Bn(n.app))return Promise.reject(hi(n));const r=vo(n),i=lU(r,e),a=await new pU(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const wU=600*1e3;class TU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Px(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wU&&this.cachedEventUids.clear(),this.cachedEventUids.has(iP(e))}saveEventToCache(e){this.cachedEventUids.add(iP(e)),this.lastProcessedEventTime=Date.now()}}function iP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Px({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function EU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Px(n);default:return!1}}async function IU(n,e={}){return Vr(n,"GET","/v1/projects",e)}const PU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SU=/^https?/;async function CU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IU(n);for(const t of e)try{if(AU(t))return}catch{}Nr(n,"unauthorized-domain")}function AU(n){const e=vv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!SU.test(t))return!1;if(PU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bU=new Nd(3e4,6e4);function sP(){const n=fi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xU(n){return new Promise((e,t)=>{function r(){sP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sP(),t(di(n,"network-request-failed"))},timeout:bU.get()})}if(fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fi().gapi?.load)r();else{const i=hF("iframefcb");return fi()[i]=()=>{gapi.load?r():t(di(n,"network-request-failed"))},ix(`${dF()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Lf=null,e})}let Lf=null;function RU(n){return Lf=Lf||xU(n),Lf}const kU=new Nd(5e3,15e3),DU="__/auth/iframe",NU="emulator/auth/iframe",VU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MU(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Q_(e,NU):`https://${n.config.authDomain}/${DU}`,r={apiKey:e.apiKey,appName:n.name,v:vu},i=OU.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Sd(r).slice(1)}`}async function LU(n){const e=await RU(n),t=fi().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:MU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=di(n,"network-request-failed"),u=fi().setTimeout(()=>{s(a)},kU.get());function d(){fi().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(a)})}))}const FU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UU=500,jU=600,BU="_blank",$U="http://localhost";class oP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zU(n,e,t,r=UU,i=jU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...FU,width:r.toString(),height:i.toString(),top:s,left:a},h=nn().toLowerCase();t&&(u=Xb(h)?BU:t),Qb(h)&&(e=e||$U,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if(nF(h)&&u!=="_self")return WU(e||"",u),new oP(null);const g=window.open(e||"",u,m);ke(g,n,"popup-blocked");try{g.focus()}catch{}return new oP(g)}function WU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const HU="__/auth/handler",qU="emulator/auth/handler",GU=encodeURIComponent("fac");async function aP(n,e,t,r,i,s){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vu,eventId:i};if(e instanceof lx){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",KN(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Od){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${GU}=${encodeURIComponent(d)}`:"";return`${KU(n)}?${Sd(u).slice(1)}${h}`}function KU({config:n}){return n.emulator?Q_(n,qU):`https://${n.authDomain}/${HU}`}const fy="webStorageSupport";class QU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yx,this._completeRedirectFn=_U,this._overrideRedirectResult=gU}async _openPopup(e,t,r,i){Gi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await aP(e,t,r,vv(),i);return zU(e,s,ew())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await aP(e,t,r,vv(),i);return ZF(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Gi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await LU(e),r=new TU(e);return t.register("authEvent",i=>(ke(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fy,{type:fy},i=>{const s=i?.[0]?.[fy];s!==void 0&&t(!!s),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nx()||Yb()||X_()}}const YU=QU;var lP="@firebase/auth",uP="1.12.0";class XU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function JU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZU(n){ma(new to("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;ke(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rx(n)},h=new lF(r,i,s,d);return vF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ma(new to("auth-internal",e=>{const t=vo(e.getProvider("auth").getImmediate());return(r=>new XU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(lP,uP,JU(n)),ai(lP,uP,"esm2020")}const e4=300,t4=sC("authIdTokenMaxAge")||e4;let cP=null;const n4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>t4)return;const i=t?.token;cP!==i&&(cP=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r4(n=t_()){const e=Lp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=yF(n,{popupRedirectResolver:YU,persistence:[Ex,mx,yx]}),r=sC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=n4(s.toString());qF(t,a,()=>a(t.currentUser)),HF(t,u=>a(u))}}const i=nC("auth");return i&&_F(t,`http://${i}`),t}function i4(){return document.getElementsByTagName("head")?.[0]??document}uF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=di("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",i4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZU("Browser");const s4={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},Sx=hC(s4),je=E2(Sx),ln=r4(Sx),o4=async()=>{try{await eP(ln,Ex)}catch(n){console.warn("IndexedDB persistence unavailable, falling back to local storage.",n);try{await eP(ln,mx)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}};typeof window<"u"&&(P2(je).catch(n=>{n.code==="failed-precondition"?I2(je).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):n.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",n):console.error("Unexpected error enabling multi-tab persistence for Firestore.",n)}),o4().catch(n=>{console.error("Unexpected error configuring Firebase Auth persistence.",n)}));const a4=1;let py=0;function l4(){return py=(py+1)%Number.MAX_VALUE,py.toString()}const kn={state:{toasts:[]},listeners:[],getState:()=>kn.state,setState:n=>{typeof n=="function"?kn.state=n(kn.state):kn.state={...kn.state,...n},kn.listeners.forEach(e=>e(kn.state))},subscribe:n=>(kn.listeners.push(n),()=>{kn.listeners=kn.listeners.filter(e=>e!==n)})},u4=({...n})=>{const e=l4(),t=i=>kn.setState(s=>({...s,toasts:s.toasts.map(a=>a.id===e?{...a,...i}:a)})),r=()=>kn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return kn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:r},...i.toasts].slice(0,a4)})),{id:e,dismiss:r,update:t}};function nw(){const[n,e]=k.useState(kn.getState());return k.useEffect(()=>kn.subscribe(r=>{e(r)}),[]),k.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:u4,toasts:n.toasts}}const Cx=k.createContext(null),c4=({children:n})=>{const[e,t]=k.useState(null),[r,i]=k.useState(!0),[s,a]=k.useState(null),{toast:u}=nw();k.useEffect(()=>{const B=GF(ln,async V=>{if(V){t({id:V.uid,uid:V.uid,email:V.email,displayName:V.displayName,photoURL:V.photoURL});const M=gn(je,`users/${V.uid}/preferences`,"display"),z={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,combineMode:"estandar"};try{const te=await um(M);te.exists()?a({...z,...te.data()}):a(z)}catch(te){console.error("Failed to load preferences",te),a(z)}}else t(null),a(null);i(!1)});return()=>B()},[]);const d=async(B,V)=>{try{await UF(ln,B,V)}catch(M){throw u({title:"Error al iniciar sesin",description:M.message,variant:"destructive"}),M}},h=async(B,V)=>{try{const{user:M}=await FF(ln,B,V),z={url:`${window.location.origin}/auth`};await jF(M,z),await tP(ln)}catch(M){throw u({title:"Error al registrarse",description:M.message,variant:"destructive"}),M}},m=async B=>{try{await LF(ln,B)}catch(V){throw u({title:"Error al restablecer contrasea",description:V.message,variant:"destructive"}),V}},g=async()=>{try{await tP(ln),t(null),a(null)}catch(B){throw u({title:"Error al cerrar sesin",description:B.message,variant:"destructive"}),B}},v=async B=>{if(ln.currentUser)try{await zF(ln.currentUser,B),t(V=>V&&{...V,email:B})}catch(V){throw u({title:"Error al actualizar correo",description:V.message,variant:"destructive"}),V}},E=async B=>{if(ln.currentUser)try{await WF(ln.currentUser,B)}catch(V){throw u({title:"Error al actualizar contrasea",description:V.message,variant:"destructive"}),V}},b=async B=>{if(!ln.currentUser)return;const V=gn(je,`users/${ln.currentUser.uid}/preferences`,"display");try{await yd(V,B,{merge:!0}),a(M=>({...M??{},...B}))}catch(M){throw console.error("Failed to save preferences",M),u({title:"Error al guardar preferencias",description:M.message,variant:"destructive"}),M}},R=async B=>{if(ln.currentUser)try{await $F(ln.currentUser,B),t(V=>V&&{...V,...B})}catch(V){throw u({title:"Error al actualizar perfil",description:V.message,variant:"destructive"}),V}},C=async()=>{if(ln.currentUser)try{await KF(ln.currentUser),t(null),a(null)}catch(B){throw u({title:"Error al eliminar cuenta",description:B.message,variant:"destructive"}),B}};return X.jsx(Cx.Provider,{value:{user:e,login:d,register:h,logout:g,resetPassword:m,updateEmail:v,updatePassword:E,preferences:s,savePreferences:b,updateProfile:R,deleteAccount:C,loadingAuth:r},children:n})},rw=()=>k.useContext(Cx);function Ki(n){"@babel/helpers - typeof";return Ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(n)}function bn(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function gt(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Ot(n){gt(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||Ki(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function iw(n,e){gt(2,arguments);var t=Ot(n),r=bn(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function d4(n,e){gt(2,arguments);var t=Ot(n).getTime(),r=bn(e);return new Date(t+r)}var h4={};function Su(){return h4}function gp(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function Nn(n){gt(1,arguments);var e=Ot(n);return e.setHours(0,0,0,0),e}var f4=864e5;function p4(n,e){gt(2,arguments);var t=Nn(n),r=Nn(e),i=t.getTime()-gp(t),s=r.getTime()-gp(r);return Math.round((i-s)/f4)}function m4(n,e){gt(2,arguments);var t=Ot(n),r=Ot(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var sw=6e4,ow=36e5,g4=1e3;function y4(n){return gt(1,arguments),n instanceof Date||Ki(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function v4(n){if(gt(1,arguments),!y4(n)&&typeof n!="number")return!1;var e=Ot(n);return!isNaN(Number(e))}function dP(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function _4(n,e){gt(2,arguments);var t=Ot(n),r=Ot(e),i=dP(t,r),s=Math.abs(p4(t,r));t.setDate(t.getDate()-i*s);var a=+(dP(t,r)===-i),u=i*(s-a);return u===0?0:u}function Ax(n,e){gt(2,arguments);var t=bn(e);return d4(n,-t)}var w4=864e5;function T4(n){gt(1,arguments);var e=Ot(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/w4)+1}function du(n){gt(1,arguments);var e=1,t=Ot(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function bx(n){gt(1,arguments);var e=Ot(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=du(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=du(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function E4(n){gt(1,arguments);var e=bx(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=du(t);return r}var I4=6048e5;function xx(n){gt(1,arguments);var e=Ot(n),t=du(e).getTime()-E4(e).getTime();return Math.round(t/I4)+1}function Ca(n,e){var t,r,i,s,a,u,d,h;gt(1,arguments);var m=Su(),g=bn((t=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=Ot(n),E=v.getUTCDay(),b=(E<g?7:0)+E-g;return v.setUTCDate(v.getUTCDate()-b),v.setUTCHours(0,0,0,0),v}function aw(n,e){var t,r,i,s,a,u,d,h;gt(1,arguments);var m=Ot(n),g=m.getUTCFullYear(),v=Su(),E=bn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:v.firstWeekContainsDate)!==null&&r!==void 0?r:(d=v.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(g+1,0,E),b.setUTCHours(0,0,0,0);var R=Ca(b,e),C=new Date(0);C.setUTCFullYear(g,0,E),C.setUTCHours(0,0,0,0);var B=Ca(C,e);return m.getTime()>=R.getTime()?g+1:m.getTime()>=B.getTime()?g:g-1}function P4(n,e){var t,r,i,s,a,u,d,h;gt(1,arguments);var m=Su(),g=bn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),v=aw(n,e),E=new Date(0);E.setUTCFullYear(v,0,g),E.setUTCHours(0,0,0,0);var b=Ca(E,e);return b}var S4=6048e5;function Rx(n,e){gt(1,arguments);var t=Ot(n),r=Ca(t,e).getTime()-P4(t,e).getTime();return Math.round(r/S4)+1}function at(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var Ls={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return at(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):at(r+1,2)},d:function(e,t){return at(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return at(e.getUTCHours()%12||12,t.length)},H:function(e,t){return at(e.getUTCHours(),t.length)},m:function(e,t){return at(e.getUTCMinutes(),t.length)},s:function(e,t){return at(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return at(s,t.length)}},Al={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},C4={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Ls.y(e,t)},Y:function(e,t,r,i){var s=aw(e,i),a=s>0?s:1-s;if(t==="YY"){var u=a%100;return at(u,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):at(a,t.length)},R:function(e,t){var r=bx(e);return at(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return at(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return at(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return at(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return Ls.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return at(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=Rx(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):at(s,t.length)},I:function(e,t,r){var i=xx(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):at(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ls.d(e,t)},D:function(e,t,r){var i=T4(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):at(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return at(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return at(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return at(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=Al.noon:i===0?s=Al.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=Al.evening:i>=12?s=Al.afternoon:i>=4?s=Al.morning:s=Al.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Ls.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ls.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):at(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):at(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ls.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ls.s(e,t)},S:function(e,t){return Ls.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return fP(a);case"XXXX":case"XX":return Zo(a);default:return Zo(a,":")}},x:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return fP(a);case"xxxx":case"xx":return Zo(a);default:return Zo(a,":")}},O:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+hP(a,":");default:return"GMT"+Zo(a,":")}},z:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+hP(a,":");default:return"GMT"+Zo(a,":")}},t:function(e,t,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return at(a,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,a=s.getTime();return at(a,t.length)}};function hP(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+at(s,2)}function fP(n,e){if(n%60===0){var t=n>0?"-":"+";return t+at(Math.abs(n)/60,2)}return Zo(n,e)}function Zo(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=at(Math.floor(i/60),2),a=at(i%60,2);return r+s+t+a}var pP=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},kx=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},A4=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return pP(e,t);var a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",pP(i,t)).replace("{{time}}",kx(s,t))},Tv={p:kx,P:A4},b4=["D","DD"],x4=["YY","YYYY"];function Dx(n){return b4.indexOf(n)!==-1}function Nx(n){return x4.indexOf(n)!==-1}function yp(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var R4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},k4=function(e,t,r){var i,s=R4[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function my(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var D4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},V4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},O4={date:my({formats:D4,defaultWidth:"full"}),time:my({formats:N4,defaultWidth:"full"}),dateTime:my({formats:V4,defaultWidth:"full"})},M4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},L4=function(e,t,r,i){return M4[e]};function Pc(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var u=n.defaultWidth,d=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[d]||n.values[u]}var h=n.argumentCallback?n.argumentCallback(e):e;return i[h]}}var F4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},j4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},W4=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},H4={ordinalNumber:W4,era:Pc({values:F4,defaultWidth:"wide"}),quarter:Pc({values:U4,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Pc({values:j4,defaultWidth:"wide"}),day:Pc({values:B4,defaultWidth:"wide"}),dayPeriod:Pc({values:$4,defaultWidth:"wide",formattingValues:z4,defaultFormattingWidth:"wide"})};function Sc(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?G4(u,function(g){return g.test(a)}):q4(u,function(g){return g.test(a)}),h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;var m=e.slice(a.length);return{value:h,rest:m}}}function q4(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function G4(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function K4(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var u=e.slice(i.length);return{value:a,rest:u}}}var Q4=/^(\d+)(th|st|nd|rd)?/i,Y4=/\d+/i,X4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},J4={any:[/^b/i,/^(a|c)/i]},Z4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e3={any:[/1/i,/2/i,/3/i,/4/i]},t3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},n3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},r3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},i3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},s3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},o3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},a3={ordinalNumber:K4({matchPattern:Q4,parsePattern:Y4,valueCallback:function(e){return parseInt(e,10)}}),era:Sc({matchPatterns:X4,defaultMatchWidth:"wide",parsePatterns:J4,defaultParseWidth:"any"}),quarter:Sc({matchPatterns:Z4,defaultMatchWidth:"wide",parsePatterns:e3,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Sc({matchPatterns:t3,defaultMatchWidth:"wide",parsePatterns:n3,defaultParseWidth:"any"}),day:Sc({matchPatterns:r3,defaultMatchWidth:"wide",parsePatterns:i3,defaultParseWidth:"any"}),dayPeriod:Sc({matchPatterns:s3,defaultMatchWidth:"any",parsePatterns:o3,defaultParseWidth:"any"})},Vx={code:"en-US",formatDistance:k4,formatLong:O4,formatRelative:L4,localize:H4,match:a3,options:{weekStartsOn:0,firstWeekContainsDate:1}},l3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,u3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,c3=/^'([^]*?)'?$/,d3=/''/g,h3=/[a-zA-Z]/;function Kt(n,e,t){var r,i,s,a,u,d,h,m,g,v,E,b,R,C,B,V,M,z;gt(2,arguments);var te=String(e),Z=Su(),x=(r=(i=t?.locale)!==null&&i!==void 0?i:Z.locale)!==null&&r!==void 0?r:Vx,S=bn((s=(a=(u=(d=t?.firstWeekContainsDate)!==null&&d!==void 0?d:t==null||(h=t.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:Z.firstWeekContainsDate)!==null&&a!==void 0?a:(g=Z.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=bn((E=(b=(R=(C=t?.weekStartsOn)!==null&&C!==void 0?C:t==null||(B=t.locale)===null||B===void 0||(V=B.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&R!==void 0?R:Z.weekStartsOn)!==null&&b!==void 0?b:(M=Z.locale)===null||M===void 0||(z=M.options)===null||z===void 0?void 0:z.weekStartsOn)!==null&&E!==void 0?E:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var F=Ot(n);if(!v4(F))throw new RangeError("Invalid time value");var L=gp(F),U=Ax(F,L),P={firstWeekContainsDate:S,weekStartsOn:D,locale:x,_originalDate:F},Y=te.match(u3).map(function(se){var re=se[0];if(re==="p"||re==="P"){var oe=Tv[re];return oe(se,x.formatLong)}return se}).join("").match(l3).map(function(se){if(se==="''")return"'";var re=se[0];if(re==="'")return f3(se);var oe=C4[re];if(oe)return!(t!=null&&t.useAdditionalWeekYearTokens)&&Nx(se)&&yp(se,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&Dx(se)&&yp(se,e,String(n)),oe(U,se,x.localize,P);if(re.match(h3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+re+"`");return se}).join("");return Y}function f3(n){var e=n.match(c3);return e?e[1].replace(d3,"'"):n}function p3(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function mP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function m3(n,e){if(n){if(typeof n=="string")return mP(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mP(n,e):void 0}}function gP(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=m3(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}function Te(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ev(n,e){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Ev(n,e)}function et(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ev(n,e)}function vp(n){return vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vp(n)}function Ox(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ox=function(){return!!n})()}function g3(n,e){if(e&&(Ki(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(n)}function tt(n){var e=Ox();return function(){var t,r=vp(n);if(e){var i=vp(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return g3(this,t)}}function Ye(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function y3(n,e){if(Ki(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ki(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Mx(n){var e=y3(n,"string");return Ki(e)=="symbol"?e:e+""}function v3(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Mx(r.key),r)}}function Xe(n,e,t){return e&&v3(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function _e(n,e,t){return(e=Mx(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _3=10,Lx=(function(){function n(){Ye(this,n),_e(this,"priority",void 0),_e(this,"subPriority",0)}return Xe(n,[{key:"validate",value:function(t,r){return!0}}]),n})(),w3=(function(n){et(t,n);var e=tt(t);function t(r,i,s,a,u){var d;return Ye(this,t),d=e.call(this),d.value=r,d.validateValue=i,d.setValue=s,d.priority=a,u&&(d.subPriority=u),d}return Xe(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,a){return this.setValue(i,s,this.value,a)}}]),t})(Lx),T3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",_3),_e(Te(r),"subPriority",-1),r}return Xe(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}}]),t})(Lx),it=(function(){function n(){Ye(this,n),_e(this,"incompatibleTokens",void 0),_e(this,"priority",void 0),_e(this,"subPriority",void 0)}return Xe(n,[{key:"run",value:function(t,r,i,s){var a=this.parse(t,r,i,s);return a?{setter:new w3(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n})(),E3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",140),_e(Te(r),"incompatibleTokens",["R","u","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"});case"GGGGG":return a.era(i,{width:"narrow"});default:return a.era(i,{width:"wide"})||a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,a){return s.era=a,i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),Bt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ri={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $t(n,e){return n&&{value:e(n.value),rest:n.rest}}function xt(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ii(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*ow+s*sw+a*g4),rest:e.slice(t[0].length)}}function Fx(n){return xt(Bt.anyDigitsSigned,n)}function Mt(n,e){switch(n){case 1:return xt(Bt.singleDigit,e);case 2:return xt(Bt.twoDigits,e);case 3:return xt(Bt.threeDigits,e);case 4:return xt(Bt.fourDigits,e);default:return xt(new RegExp("^\\d{1,"+n+"}"),e)}}function _p(n,e){switch(n){case 1:return xt(Bt.singleDigitSigned,e);case 2:return xt(Bt.twoDigitsSigned,e);case 3:return xt(Bt.threeDigitsSigned,e);case 4:return xt(Bt.fourDigitsSigned,e);default:return xt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function lw(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Ux(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,a=Math.floor(s/100)*100,u=n>=s%100;i=n+a-(u?100:0)}return t?i:1-i}function jx(n){return n%400===0||n%4===0&&n%100!==0}var I3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="yy"}};switch(s){case"y":return $t(Mt(4,i),u);case"yo":return $t(a.ordinalNumber(i,{unit:"year"}),u);default:return $t(Mt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a){var u=i.getUTCFullYear();if(a.isTwoDigitYear){var d=Ux(a.year,u);return i.setUTCFullYear(d,0,1),i.setUTCHours(0,0,0,0),i}var h=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(h,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),P3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return $t(Mt(4,i),u);case"Yo":return $t(a.ordinalNumber(i,{unit:"year"}),u);default:return $t(Mt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a,u){var d=aw(i,u);if(a.isTwoDigitYear){var h=Ux(a.year,d);return i.setUTCFullYear(h,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Ca(i,u)}var m=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(m,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Ca(i,u)}}]),t})(it),S3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s){return _p(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,a){var u=new Date(0);return u.setUTCFullYear(a,0,4),u.setUTCHours(0,0,0,0),du(u)}}]),t})(it),C3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s){return _p(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,a){return i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),A3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",120),_e(Te(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"Q":case"QQ":return Mt(s.length,i);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});default:return a.quarter(i,{width:"wide",context:"formatting"})||a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),b3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",120),_e(Te(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"q":case"qq":return Mt(s.length,i);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});default:return a.quarter(i,{width:"wide",context:"standalone"})||a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),x3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_e(Te(r),"priority",110),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"M":return $t(xt(Bt.month,i),u);case"MM":return $t(Mt(2,i),u);case"Mo":return $t(a.ordinalNumber(i,{unit:"month"}),u);case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});default:return a.month(i,{width:"wide",context:"formatting"})||a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),R3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",110),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"L":return $t(xt(Bt.month,i),u);case"LL":return $t(Mt(2,i),u);case"Lo":return $t(a.ordinalNumber(i,{unit:"month"}),u);case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});default:return a.month(i,{width:"wide",context:"standalone"})||a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(it);function k3(n,e,t){gt(2,arguments);var r=Ot(n),i=bn(e),s=Rx(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var D3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",100),_e(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"w":return xt(Bt.week,i);case"wo":return a.ordinalNumber(i,{unit:"week"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a,u){return Ca(k3(i,a,u),u)}}]),t})(it);function N3(n,e){gt(2,arguments);var t=Ot(n),r=bn(e),i=xx(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var V3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",100),_e(Te(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"I":return xt(Bt.week,i);case"Io":return a.ordinalNumber(i,{unit:"week"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a){return du(N3(i,a))}}]),t})(it),O3=[31,28,31,30,31,30,31,31,30,31,30,31],M3=[31,29,31,30,31,30,31,31,30,31,30,31],L3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"subPriority",1),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"d":return xt(Bt.date,i);case"do":return a.ordinalNumber(i,{unit:"date"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=jx(a),d=i.getUTCMonth();return u?s>=1&&s<=M3[d]:s>=1&&s<=O3[d]}},{key:"set",value:function(i,s,a){return i.setUTCDate(a),i.setUTCHours(0,0,0,0),i}}]),t})(it),F3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"subpriority",1),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"D":case"DD":return xt(Bt.dayOfYear,i);case"Do":return a.ordinalNumber(i,{unit:"date"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=jx(a);return u?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,a){return i.setUTCMonth(0,a),i.setUTCHours(0,0,0,0),i}}]),t})(it);function uw(n,e,t){var r,i,s,a,u,d,h,m;gt(2,arguments);var g=Su(),v=bn((r=(i=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:g.weekStartsOn)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&r!==void 0?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var E=Ot(n),b=bn(e),R=E.getUTCDay(),C=b%7,B=(C+7)%7,V=(B<v?7:0)+b-R;return E.setUTCDate(E.getUTCDate()+V),E}var U3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=uw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(it),j3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"e":case"ee":return $t(Mt(s.length,i),d);case"eo":return $t(a.ordinalNumber(i,{unit:"day"}),d);case"eee":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=uw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(it),B3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"c":case"cc":return $t(Mt(s.length,i),d);case"co":return $t(a.ordinalNumber(i,{unit:"day"}),d);case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});default:return a.day(i,{width:"wide",context:"standalone"})||a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=uw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(it);function $3(n,e){gt(2,arguments);var t=bn(e);t%7===0&&(t=t-7);var r=1,i=Ot(n),s=i.getUTCDay(),a=t%7,u=(a+7)%7,d=(u<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+d),i}var z3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h===0?7:h};switch(s){case"i":case"ii":return Mt(s.length,i);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return $t(a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiii":return $t(a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiiii":return $t(a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);default:return $t(a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,a){return i=$3(i,a),i.setUTCHours(0,0,0,0),i}}]),t})(it),W3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",80),_e(Te(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(lw(a),0,0,0),i}}]),t})(it),H3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",80),_e(Te(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(lw(a),0,0,0),i}}]),t})(it),q3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",80),_e(Te(r),"incompatibleTokens",["a","b","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(lw(a),0,0,0),i}}]),t})(it),G3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"h":return xt(Bt.hour12h,i);case"ho":return a.ordinalNumber(i,{unit:"hour"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):!u&&a===12?i.setUTCHours(0,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(it),K3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"H":return xt(Bt.hour23h,i);case"Ho":return a.ordinalNumber(i,{unit:"hour"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,a){return i.setUTCHours(a,0,0,0),i}}]),t})(it),Q3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"K":return xt(Bt.hour11h,i);case"Ko":return a.ordinalNumber(i,{unit:"hour"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(it),Y3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"k":return xt(Bt.hour24h,i);case"ko":return a.ordinalNumber(i,{unit:"hour"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,a){var u=a<=24?a%24:a;return i.setUTCHours(u,0,0,0),i}}]),t})(it),X3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",60),_e(Te(r),"incompatibleTokens",["t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"m":return xt(Bt.minute,i);case"mo":return a.ordinalNumber(i,{unit:"minute"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCMinutes(a,0,0),i}}]),t})(it),J3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",50),_e(Te(r),"incompatibleTokens",["t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"s":return xt(Bt.second,i);case"so":return a.ordinalNumber(i,{unit:"second"});default:return Mt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCSeconds(a,0),i}}]),t})(it),Z3=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",30),_e(Te(r),"incompatibleTokens",["t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s){var a=function(d){return Math.floor(d*Math.pow(10,-s.length+3))};return $t(Mt(s.length,i),a)}},{key:"set",value:function(i,s,a){return i.setUTCMilliseconds(a),i}}]),t})(it),ej=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",10),_e(Te(r),"incompatibleTokens",["t","T","x"]),r}return Xe(t,[{key:"parse",value:function(i,s){switch(s){case"X":return ii(ri.basicOptionalMinutes,i);case"XX":return ii(ri.basic,i);case"XXXX":return ii(ri.basicOptionalSeconds,i);case"XXXXX":return ii(ri.extendedOptionalSeconds,i);default:return ii(ri.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(it),tj=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",10),_e(Te(r),"incompatibleTokens",["t","T","X"]),r}return Xe(t,[{key:"parse",value:function(i,s){switch(s){case"x":return ii(ri.basicOptionalMinutes,i);case"xx":return ii(ri.basic,i);case"xxxx":return ii(ri.basicOptionalSeconds,i);case"xxxxx":return ii(ri.extendedOptionalSeconds,i);default:return ii(ri.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(it),nj=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",40),_e(Te(r),"incompatibleTokens","*"),r}return Xe(t,[{key:"parse",value:function(i){return Fx(i)}},{key:"set",value:function(i,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t})(it),rj=(function(n){et(t,n);var e=tt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",20),_e(Te(r),"incompatibleTokens","*"),r}return Xe(t,[{key:"parse",value:function(i){return Fx(i)}},{key:"set",value:function(i,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t})(it),ij={G:new E3,y:new I3,Y:new P3,R:new S3,u:new C3,Q:new A3,q:new b3,M:new x3,L:new R3,w:new D3,I:new V3,d:new L3,D:new F3,E:new U3,e:new j3,c:new B3,i:new z3,a:new W3,b:new H3,B:new q3,h:new G3,H:new K3,K:new Q3,k:new Y3,m:new X3,s:new J3,S:new Z3,X:new ej,x:new tj,t:new nj,T:new rj},sj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aj=/^'([^]*?)'?$/,lj=/''/g,uj=/\S/,cj=/[a-zA-Z]/;function dj(n,e,t,r){var i,s,a,u,d,h,m,g,v,E,b,R,C,B;gt(3,arguments);var V=String(n),M=String(e),z=Su(),te=(i=(s=void 0)!==null&&s!==void 0?s:z.locale)!==null&&i!==void 0?i:Vx;if(!te.match)throw new RangeError("locale must contain match property");var Z=bn((a=(u=(d=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&d!==void 0?d:z.firstWeekContainsDate)!==null&&u!==void 0?u:(m=z.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(Z>=1&&Z<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=bn((v=(E=(b=(R=void 0)!==null&&R!==void 0?R:void 0)!==null&&b!==void 0?b:z.weekStartsOn)!==null&&E!==void 0?E:(C=z.locale)===null||C===void 0||(B=C.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&v!==void 0?v:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(M==="")return V===""?Ot(t):new Date(NaN);var S={firstWeekContainsDate:Z,weekStartsOn:x,locale:te},D=[new T3],F=M.match(oj).map(function(pe){var me=pe[0];if(me in Tv){var Se=Tv[me];return Se(pe,te.formatLong)}return pe}).join("").match(sj),L=[],U=gP(F),P;try{var Y=function(){var me=P.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&Nx(me)&&yp(me,M,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Dx(me)&&yp(me,M,n);var Se=me[0],Me=ij[Se];if(Me){var Be=Me.incompatibleTokens;if(Array.isArray(Be)){var He=L.find(function(Xt){return Be.includes(Xt.token)||Xt.token===Se});if(He)throw new RangeError("The format string mustn't contain `".concat(He.fullToken,"` and `").concat(me,"` at the same time"))}else if(Me.incompatibleTokens==="*"&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(me,"` and any other token at the same time"));L.push({token:Se,fullToken:me});var ct=Me.run(V,me,te.match,S);if(!ct)return{v:new Date(NaN)};D.push(ct.setter),V=ct.rest}else{if(Se.match(cj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Se+"`");if(me==="''"?me="'":Se==="'"&&(me=hj(me)),V.indexOf(me)===0)V=V.slice(me.length);else return{v:new Date(NaN)}}};for(U.s();!(P=U.n()).done;){var se=Y();if(Ki(se)==="object")return se.v}}catch(pe){U.e(pe)}finally{U.f()}if(V.length>0&&uj.test(V))return new Date(NaN);var re=D.map(function(pe){return pe.priority}).sort(function(pe,me){return me-pe}).filter(function(pe,me,Se){return Se.indexOf(pe)===me}).map(function(pe){return D.filter(function(me){return me.priority===pe}).sort(function(me,Se){return Se.subPriority-me.subPriority})}).map(function(pe){return pe[0]}),oe=Ot(t);if(isNaN(oe.getTime()))return new Date(NaN);var ee=Ax(oe,gp(oe)),de={},ne=gP(re),N;try{for(ne.s();!(N=ne.n()).done;){var K=N.value;if(!K.validate(ee,S))return new Date(NaN);var he=K.set(ee,de,S);Array.isArray(he)?(ee=he[0],p3(de,he[1])):ee=he}}catch(pe){ne.e(pe)}finally{ne.f()}return ee}function hj(n){return n.match(aj)[1].replace(lj,"'")}function Ue(n,e){var t;gt(1,arguments);var r=bn((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=gj(n),s;if(i.date){var a=yj(i.date,r);s=vj(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var u=s.getTime(),d=0,h;if(i.time&&(d=_j(i.time),isNaN(d)))return new Date(NaN);if(i.timezone){if(h=wj(i.timezone),isNaN(h))return new Date(NaN)}else{var m=new Date(u+d),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(u+d+h)}var hf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fj=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,pj=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,mj=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gj(n){var e={},t=n.split(hf.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],hf.timeZoneDelimiter.test(e.date)&&(e.date=n.split(hf.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=hf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function yj(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function vj(n,e){if(e===null)return new Date(NaN);var t=n.match(fj);if(!t)return new Date(NaN);var r=!!t[4],i=Cc(t[1]),s=Cc(t[2])-1,a=Cc(t[3]),u=Cc(t[4]),d=Cc(t[5])-1;if(r)return Sj(e,u,d)?Tj(e,u,d):new Date(NaN);var h=new Date(0);return!Ij(e,s,a)||!Pj(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}function Cc(n){return n?parseInt(n):1}function _j(n){var e=n.match(pj);if(!e)return NaN;var t=gy(e[1]),r=gy(e[2]),i=gy(e[3]);return Cj(t,r,i)?t*ow+r*sw+i*1e3:NaN}function gy(n){return n&&parseFloat(n.replace(",","."))||0}function wj(n){if(n==="Z")return 0;var e=n.match(mj);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Aj(r,i)?t*(r*ow+i*sw):NaN}function Tj(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var Ej=[31,null,31,30,31,30,31,31,30,31,30,31];function Bx(n){return n%400===0||n%4===0&&n%100!==0}function Ij(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Ej[e]||(Bx(n)?29:28))}function Pj(n,e){return e>=1&&e<=(Bx(n)?366:365)}function Sj(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Cj(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Aj(n,e){return e>=0&&e<=59}const wp=(n,e)=>{if(!n||!e)return 0;const t=Nn(Ue(n)),r=Nn(Ue(e));return _4(t,r)+1},Ac=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},yy=(n,e)=>!n||!Array.isArray(n)||!e?[]:[...n].sort((r,i)=>{const s=r.timestamp?Ue(r.timestamp):r.iso_date?Ue(r.iso_date):0,a=i.timestamp?Ue(i.timestamp):i.iso_date?Ue(i.iso_date):0;return m4(s,a)}).map(r=>{const i=Ac(r.temperature_raw),s=Ac(r.temperature_corrected),a=d=>{if(!d)return null;const h=Ac(d.temperature),m=Ac(d.temperature_corrected);return d.use_corrected&&m!==null?m:h!==null?h:m!==null?m:null};let u=Ac(r.temperature_chart);if(u==null&&Array.isArray(r.measurements)){const h=r.measurements.find(m=>m&&m.selected&&a(m)!==null)||r.measurements.find(m=>a(m)!==null);h&&(u=a(h))}return u==null&&(r.use_corrected&&s!==null?u=s:i!==null?u=i:s!==null&&(u=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?Kt(Ue(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?Kt(Ue(r.timestamp),"dd/MM"):r.iso_date?Kt(Ue(r.iso_date),"dd/MM"):"N/A",cycleDay:wp(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:r.measurements||[],temperature_chart:u,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),bj=async n=>{const e=Pt(je,`users/${n}/cycles`),t=await tn(e);if(t.empty)return null;const r=t.docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.end_date===null||d.end_date===void 0).sort((d,h)=>(h.start_date||"").localeCompare(d.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=Pt(je,`users/${n}/cycles/${i.id}/entries`),a=await tn(s),u=await Promise.all(a.docs.map(async d=>{let h=[];try{const m=Pt(je,`users/${n}/cycles/${i.id}/entries/${d.id}/measurements`);h=(await tn(m)).docs.map(v=>({id:v.id,...v.data()}))}catch(m){console.error("Error fetching measurements for entry",d.id,m)}return{id:d.id,...d.data(),measurements:h}}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},xj=async(n,e)=>{const t=Pt(je,`users/${n}/cycles`),i=(await tn(t)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.end_date!==null&&a.end_date!==void 0||e&&a.start_date&&a.start_date<e).sort((a,u)=>(u.start_date||"").localeCompare(a.start_date||""));return await Promise.all(i.map(async a=>{const u=Pt(je,`users/${n}/cycles/${a.id}/entries`),d=await tn(u),h=await Promise.all(d.docs.map(async m=>{let g=[];try{const v=Pt(je,`users/${n}/cycles/${a.id}/entries/${m.id}/measurements`);g=(await tn(v)).docs.map(b=>({id:b.id,...b.data()}))}catch(v){console.error("Error fetching measurements for entry",m.id,v)}return{id:m.id,...m.data(),measurements:g}}));return{id:a.id,startDate:a.start_date,endDate:a.end_date,needsCompletion:!a.end_date,ignoredForAutoCalculations:!!a.ignored_auto_calculations,data:h}}))},Rj=async(n,e)=>{const t=gn(je,`users/${n}/cycles/${e}`),r=await um(t);if(!r.exists())return null;const i=r.data(),s=Pt(je,`users/${n}/cycles/${e}/entries`),a=await tn(s),u=await Promise.all(a.docs.map(async d=>{let h=[];try{const m=Pt(je,`users/${n}/cycles/${e}/entries/${d.id}/measurements`);h=(await tn(m)).docs.map(v=>({id:v.id,...v.data()}))}catch(m){console.error("Error fetching measurements for entry",d.id,m)}return{id:d.id,...d.data(),measurements:h}}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},yP=async(n,e)=>{const t=Pt(je,`users/${n}/cycles`),r=await tn(t),i=Ue(e),s=r.docs.find(u=>{const d=u.data(),h=d.start_date?Ue(d.start_date):null,m=d.end_date?Ue(d.end_date):null;if(!h||!i)return!1;const g=m??new Date("9999-12-31");return i>=h&&i<=g});if(s){const u={id:s.id,startDate:s.data().start_date,endDate:s.data().end_date},d=new Error("Cycle dates overlap with an existing cycle");throw d.code="cycle-overlap",d.conflictCycle=u,d}return{id:(await Ml(Pt(je,`users/${n}/cycles`),{user_id:n,start_date:e,ignored_auto_calculations:!1,end_date:null})).id,start_date:e}},kj=async n=>{const e=n.user_id,t=n.timestamp??new Date().toISOString(),r=n.measurements?.find(m=>m.selected),i={timestamp:t,temperature_raw:r?.temperature??null,temperature_corrected:r?.temperature_corrected??null,use_corrected:!1,temperature_chart:r?r.temperature_corrected??r.temperature:null,mucus_sensation:n.mucus_sensation,mucus_appearance:n.mucus_appearance,fertility_symbol:n.fertility_symbol,observations:n.observations,had_relations:!!(n.had_relations??n.hadRelations??!1),ignored:n.ignored,peak_marker:n.peak_marker??null},s=Pt(je,`users/${e}/cycles`),a=await tn(s),u=Ue(t),d=a.docs.filter(m=>{const g=m.data(),v=g.start_date?Ue(g.start_date):null,E=g.end_date?Ue(g.end_date):null;return v&&u>=v&&(!E||u<=E)});let h=null;if(d.length>1?h=d.sort((m,g)=>{const v=Ue(m.data().start_date);return Ue(g.data().start_date)-v})[0]:d.length===1&&(h=d[0]),h){const m=await Ml(Pt(je,`users/${e}/cycles/${h.id}/entries`),i);if(n.measurements&&n.measurements.length){const g=Pt(je,`users/${e}/cycles/${h.id}/entries/${m.id}/measurements`);for(const v of n.measurements)await Ml(g,v)}return{id:m.id}}if(n.cycle_id){const m=await Ml(Pt(je,`users/${e}/cycles/${n.cycle_id}/entries`),i);if(n.measurements&&n.measurements.length){const g=Pt(je,`users/${e}/cycles/${n.cycle_id}/entries/${m.id}/measurements`);for(const v of n.measurements)await Ml(g,v)}return{id:m.id}}return{id:null}},vy=async(n,e,t,r)=>{const i=gn(je,`users/${n}/cycles/${e}/entries/${t}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],a={};for(const u of s)Object.prototype.hasOwnProperty.call(r,u)&&(a[u]=r[u]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(a.timestamp=r.timestamp),Object.keys(a).length===0)return{id:t};if(await ao(i,a),r.measurements){const u=Pt(je,`users/${n}/cycles/${e}/entries/${t}/measurements`),d=await tn(u);await Promise.all(d.docs.map(h=>lo(h.ref)));for(const h of r.measurements)await Ml(u,h)}return{id:t}},vP=async(n,e,t)=>{await lo(gn(je,`users/${n}/cycles/${e}/entries/${t}`))},Dj=async(n,e,t)=>{const r=gn(je,`users/${e}/cycles/${n}`);if(!(await um(r)).exists())throw new Error("Cycle not found");await ao(r,{end_date:t})},bc=async(n,e,t,r,i=!1)=>{const s=gn(je,`users/${e}/cycles/${n}`),a=await um(s);if(!a.exists())throw new Error("Cycle not found");const u=a.data(),d=t??u.start_date,h=r!==void 0?r:u.end_date,m=d?Ue(d):null,g=h?Ue(h):null;if(m&&g&&g<m)throw new Error("End date cannot be earlier than start date");const v=Pt(je,`users/${e}/cycles`),b=(await tn(v)).docs.find(B=>{if(B.id===n)return!1;const V=B.data(),M=V.start_date?Ue(V.start_date):null,z=V.end_date?Ue(V.end_date):null;if(!M)return!1;const te=z??new Date("9999-12-31"),Z=g??new Date("9999-12-31");return m<=te&&M<=Z}),R=b?{id:b.id,startDate:b.data().start_date,endDate:b.data().end_date}:null;if(i)return{overlap:R};if(b){const B=new Error("Cycle dates overlap with an existing cycle");throw B.code="cycle-overlap",B.conflictCycle=R,B}const C={};t!==void 0&&(C.start_date=t),r!==void 0&&(C.end_date=r),await ao(s,C)},Nj=async(n,e,t)=>{const r=gn(je,`users/${n}/cycles/${e}`);await ao(r,{ignored_auto_calculations:t})},Vj=async(n,e,t,r)=>{if(!t)return;const i=Pt(je,`users/${n}/cycles`),s=await tn(i),a=s.docs.find(Z=>Z.id===e);if(!a)return;const u=a.data(),d=r||u.start_date||null,h=d?Ue(d):null,m=s.docs.filter(Z=>Z.id!==e).map(Z=>({id:Z.id,data:Z.data()})).filter(({data:Z})=>Z.start_date).sort((Z,x)=>Ue(Z.data.start_date).getTime()-Ue(x.data.start_date).getTime()),g=h??Ue(t),v=m.find(({data:Z})=>{try{return Ue(Z.start_date)>g}catch(x){return console.error("Error parsing next cycle start date",x),!1}});if(!v)return;const E=Ue(v.data.start_date),b=v.data.end_date?Ue(v.data.end_date):null,R=Ue(t);let C=iw(R,1);E&&C<E&&(C=E),b&&C>b&&(C=b);const B=Kt(C,"yyyy-MM-dd"),V=Pt(je,`users/${n}/cycles/${v.id}/entries`),M=await tn(V),z=d||u.start_date;await Promise.all(M.docs.map(async Z=>{const x=Z.data(),S=x.timestamp?Ue(x.timestamp):x.iso_date?Ue(x.iso_date):null;if(!S)return;const D=Kt(S,"yyyy-MM-dd");if(S<C){const F={...x,cycle_day:wp(D,z)},L=gn(je,`users/${n}/cycles/${e}/entries/${Z.id}`);await yd(L,F);const U=Pt(je,`users/${n}/cycles/${v.id}/entries/${Z.id}/measurements`),P=await tn(U);await Promise.all(P.docs.map(async Y=>{const se=gn(je,`users/${n}/cycles/${e}/entries/${Z.id}/measurements/${Y.id}`);await yd(se,Y.data()),await lo(Y.ref)})),await lo(Z.ref)}else await ao(Z.ref,{cycle_day:wp(D,B)})}));const te=gn(je,`users/${n}/cycles/${v.id}`);await ao(te,{start_date:B})},Oj=async(n,e,t)=>{const r=Pt(je,`users/${n}/cycles`),i=await tn(r),s=Ue(t),a=i.docs.find(d=>{if(d.id===e)return!1;const h=d.data(),m=h.start_date?Ue(h.start_date):null,g=h.end_date?Ue(h.end_date):null;return!m||!g?!1:m<=s&&g>=s});if(a){const d=gn(je,`users/${n}/cycles/${a.id}`),h=Kt(iw(s,-1),"yyyy-MM-dd");await ao(d,{end_date:h});const m=Pt(je,`users/${n}/cycles/${a.id}/entries`),g=await tn(m);await Promise.all(g.docs.map(async v=>{const E=v.data(),b=E.timestamp?Ue(E.timestamp):null;if(b&&b>=s){const R={...E,cycle_day:wp(Kt(b,"yyyy-MM-dd"),t)},C=gn(je,`users/${n}/cycles/${e}/entries/${v.id}`);await yd(C,R);const B=Pt(je,`users/${n}/cycles/${a.id}/entries/${v.id}/measurements`),V=await tn(B);await Promise.all(V.docs.map(async M=>{const z=gn(je,`users/${n}/cycles/${e}/entries/${v.id}/measurements/${M.id}`);await yd(z,M.data()),await lo(M.ref)})),await lo(v.ref)}}))}const u=gn(je,`users/${n}/cycles/${e}`);await ao(u,{start_date:t})},_P=async(n,e)=>{const t=Pt(je,`users/${n}/cycles/${e}/entries`),r=await tn(t);await Promise.all(r.docs.map(i=>lo(i.ref))),await lo(gn(je,`users/${n}/cycles/${e}`))},Mj="RNFApp",Lj=1,Tp="cycleData",cw="cycle-data:",dw=()=>typeof indexedDB<"u",hw=()=>typeof localStorage<"u",Fj=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),Uj=()=>new Promise((n,e)=>{const t=indexedDB.open(Mj,Lj);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(Tp)||r.createObjectStore(Tp)},t.onsuccess=()=>{n(t.result)},t.onerror=()=>{e(t.error)}}),fw=async(n,e)=>{const t=await Uj();return new Promise((r,i)=>{const s=t.transaction(Tp,n),a=s.objectStore(Tp),u=e(a);s.oncomplete=()=>{t.close(),r(u?.result)},s.onerror=()=>{t.close(),i(s.error??u?.error)}})},wP=async n=>{if(!n)return null;if(dw())try{return await fw("readonly",t=>t.get(n))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(hw())try{const e=localStorage.getItem(`${cw}${n}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},jj=async(n,e)=>{if(!n)return;const t=Fj(e);if(dw())try{await fw("readwrite",r=>r.put(t,n));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(hw())try{localStorage.setItem(`${cw}${n}`,JSON.stringify(t))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},Bj=async n=>{if(n){if(dw())try{await fw("readwrite",e=>e.delete(n))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(hw())try{localStorage.removeItem(`${cw}${n}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}};const $j="type.googleapis.com/google.protobuf.Int64Value",zj="type.googleapis.com/google.protobuf.UInt64Value";function $x(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ep(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ep(e));if(typeof n=="function"||typeof n=="object")return $x(n,e=>Ep(e));throw new Error("Data cannot be encoded in JSON: "+n)}function hu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case $j:case zj:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>hu(e)):typeof n=="function"||typeof n=="object"?$x(n,e=>hu(e)):n}const pw="functions";const TP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wn extends gi{constructor(e,t,r){super(`${pw}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Wn.prototype)}}function Wj(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ip(n,e){let t=Wj(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!TP[a])return new Wn("internal","internal");t=TP[a],r=a}const u=s.message;typeof u=="string"&&(r=u),i=s.details,i!==void 0&&(i=hu(i))}}catch{}return t==="ok"?null:new Wn(t,r,i)}class Hj{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Bn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const Iv="us-central1",qj=/^data: (.*?)(?:\n|$)/;function Gj(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Wn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class Kj{constructor(e,t,r,i,s=Iv,a=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new Hj(e,t,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Iv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Qj(n,e,t){const r=ho(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Xv(n.emulatorOrigin+"/backends"),Jv("Functions",!0))}function Yj(n,e,t){const r=i=>Jj(n,e,i,{});return r.stream=(i,s)=>eB(n,e,i,s),r}function zx(n){return n.emulatorOrigin&&ho(n.emulatorOrigin)?"include":void 0}async function Xj(n,e,t,r,i){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:zx(i)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function Wx(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function Jj(n,e,t,r){const i=n._url(e);return Zj(n,i,t,r)}async function Zj(n,e,t,r){t=Ep(t);const i={data:t},s=await Wx(n,r),a=r.timeout||7e4,u=Gj(a),d=await Promise.race([Xj(e,i,s,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!d)throw new Wn("cancelled","Firebase Functions instance was deleted.");const h=Ip(d.status,d.json);if(h)throw h;if(!d.json)throw new Wn("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Wn("internal","Response is missing data field.");return{data:hu(m)}}function eB(n,e,t,r){const i=n._url(e);return tB(n,i,t,r||{})}async function tB(n,e,t,r){t=Ep(t);const i={data:t},s=await Wx(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r?.signal,credentials:zx(n)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const b=new Wn("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const E=Ip(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let u,d;const h=new Promise((v,E)=>{u=v,d=E});r?.signal?.addEventListener("abort",()=>{const v=new Wn("cancelled","Request was cancelled.");d(v)});const m=a.body.getReader(),g=nB(m,u,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:E,done:b}=await v.read();return{value:E,done:b}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:h}}function nB(n,e,t,r){const i=(a,u)=>{const d=a.match(qj);if(!d)return;const h=d[1];try{const m=JSON.parse(h);if("result"in m){e(hu(m.result));return}if("message"in m){u.enqueue(hu(m.message));return}if("error"in m){const g=Ip(0,m);u.error(g),t(g);return}}catch(m){if(m instanceof Wn){u.error(m),t(m);return}}},s=new TextDecoder;return new ReadableStream({start(a){let u="";return d();async function d(){if(r?.aborted){const h=new Wn("cancelled","Request was cancelled");return a.error(h),t(h),Promise.resolve()}try{const{value:h,done:m}=await n.read();if(m){u.trim()&&i(u.trim(),a),a.close();return}if(r?.aborted){const v=new Wn("cancelled","Request was cancelled");a.error(v),t(v),await n.cancel();return}u+=s.decode(h,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&i(v.trim(),a);return d()}catch(h){const m=h instanceof Wn?h:Ip(0,null);a.error(m),t(m)}}},cancel(){return n.cancel()}})}const EP="@firebase/functions",IP="0.13.1";const rB="auth-internal",iB="app-check-internal",sB="messaging-internal";function oB(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider(rB),a=t.getProvider(sB),u=t.getProvider(iB);return new Kj(i,s,a,u,r)};ma(new to(pw,e,"PUBLIC").setMultipleInstances(!0)),ai(EP,IP,n),ai(EP,IP,"esm2020")}function aB(n=t_(),e=Iv){const r=Lp(pt(n),pw).getImmediate({identifier:e}),i=rC("functions");return i&&lB(r,...i),r}function lB(n,e,t){Qj(pt(n),e,t)}function uB(n,e,t){return Yj(pt(n),e)}oB();const cB=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=r,t.setPlatform=i,t},dB=n=>n.CapacitorPlatforms=cB(n),Hx=dB(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Hx.addPlatform;Hx.setPlatform;var fu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(fu||(fu={}));class _y extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const hB=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},fB=n=>{var e,t,r,i,s;const a=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},d=u.Plugins=u.Plugins||{},h=n.CapacitorPlatforms,m=()=>a!==null?a.name:hB(n),g=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||m,v=()=>g()!=="web",E=((t=h?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||v,b=x=>{const S=z.get(x);return!!(S?.platforms.has(g())||B(x))},R=((r=h?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||b,C=x=>{var S;return(S=u.PluginHeaders)===null||S===void 0?void 0:S.find(D=>D.name===x)},B=((i=h?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||C,V=x=>n.console.error(x),M=(x,S,D)=>Promise.reject(`${D} does not have an implementation of "${S}".`),z=new Map,te=(x,S={})=>{const D=z.get(x);if(D)return console.warn(`Capacitor plugin "${x}" already registered. Cannot register plugins twice.`),D.proxy;const F=g(),L=B(x);let U;const P=async()=>(!U&&F in S?U=typeof S[F]=="function"?U=await S[F]():U=S[F]:a!==null&&!U&&"web"in S&&(U=typeof S.web=="function"?U=await S.web():U=S.web),U),Y=(ne,N)=>{var K,he;if(L){const pe=L?.methods.find(me=>N===me.name);if(pe)return pe.rtype==="promise"?me=>u.nativePromise(x,N.toString(),me):(me,Se)=>u.nativeCallback(x,N.toString(),me,Se);if(ne)return(K=ne[N])===null||K===void 0?void 0:K.bind(ne)}else{if(ne)return(he=ne[N])===null||he===void 0?void 0:he.bind(ne);throw new _y(`"${x}" plugin is not implemented on ${F}`,fu.Unimplemented)}},se=ne=>{let N;const K=(...he)=>{const pe=P().then(me=>{const Se=Y(me,ne);if(Se){const Me=Se(...he);return N=Me?.remove,Me}else throw new _y(`"${x}.${ne}()" is not implemented on ${F}`,fu.Unimplemented)});return ne==="addListener"&&(pe.remove=async()=>N()),pe};return K.toString=()=>`${ne.toString()}() { [capacitor code] }`,Object.defineProperty(K,"name",{value:ne,writable:!1,configurable:!1}),K},re=se("addListener"),oe=se("removeListener"),ee=(ne,N)=>{const K=re({eventName:ne},N),he=async()=>{const me=await K;oe({eventName:ne,callbackId:me},N)},pe=new Promise(me=>K.then(()=>me({remove:he})));return pe.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await he()},pe},de=new Proxy({},{get(ne,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?ee:re;case"removeListener":return oe;default:return se(N)}}});return d[x]=de,z.set(x,{name:x,proxy:de,platforms:new Set([...Object.keys(S),...L?[F]:[]])}),de},Z=((s=h?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||te;return u.convertFileSrc||(u.convertFileSrc=x=>x),u.getPlatform=g,u.handleError=V,u.isNativePlatform=E,u.isPluginAvailable=R,u.pluginMethodNoop=M,u.registerPlugin=Z,u.Exception=_y,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},pB=n=>n.Capacitor=fB(n),_d=pB(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),qx=_d.registerPlugin;_d.Plugins;class Gx{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new _d.Exception(e,fu.Unimplemented)}unavailable(e="not available"){return new _d.Exception(e,fu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const PP=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),SP=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class mB extends Gx{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=SP(i).trim(),s=SP(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=PP(e.key),r=PP(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}qx("CapacitorCookies",{web:()=>new mB});const gB=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),yB=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=n[e[a]],i),{})},vB=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[s,a]=i;let u,d;return Array.isArray(a)?(d="",a.forEach(h=>{u=e?encodeURIComponent(h):h,d+=`${s}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(a):a,d=`${s}=${u}`),`${r}&${d}`},"").substr(1):null,_B=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=yB(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.data||{}))s.set(a,u);t.body=s.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{s.append(d,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class wB extends Gx{async request(e){const t=_B(e,e.webFetchExtra),r=vB(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let d,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),d=await gB(h);break;case"json":d=await s.json();break;default:d=await s.text()}const m={};return s.headers.forEach((g,v)=>{m[v]=g}),{data:d,headers:m,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}qx("CapacitorHttp",{web:()=>new wB});const TB=n=>{if(!n)return null;const e=n.unit,t=Number(n.value);return Number.isFinite(t)?e==="fahrenheit"?(t-32)/1.8:t:null};async function EB(){const{HealthConnect:n}=await Yi(async()=>{const{HealthConnect:h}=await import("./index-BaekDcuz.js");return{HealthConnect:h}},[]),e=["BasalBodyTemperature"],t=["BasalBodyTemperature","READ_BASAL_BODY_TEMPERATURE","android.permission.health.READ_BASAL_BODY_TEMPERATURE"],r=h=>String(h||"").toLowerCase().replace(/^android\.permission\.health\./,"").replace(/^read_/,"").replace(/[^a-z0-9]/g,""),i=await n.checkAvailability(),s=typeof i=="string"?i:i?.availability??i?.value??i?.status;if(s!=="Available")throw new Error(`HEALTH_CONNECT_${s||"Unknown"}`);const a=h=>{const m=h?.read,g=t.map(r),v=E=>g.includes(r(E));return Array.isArray(m)&&m.every(E=>typeof E=="string")?m.some(v):Array.isArray(m)&&m.every(E=>typeof E=="boolean")?m.every(Boolean):Array.isArray(m)&&m.every(E=>E&&typeof E=="object")?m.some(E=>{const b=E.permission??E.name??E.type??E.recordType??E.value,R=E.granted??E.allowed??E.isGranted??E.status;return v(b)&&!!R}):m&&typeof m=="object"?Object.entries(m).some(([E,b])=>{const R=typeof b=="boolean"?b:!!(b?.granted??b?.allowed??b?.value??b?.status);return v(E)&&R}):!1},u=await n.checkHealthPermissions({read:e,write:[]});if(a(u))return!0;await n.requestHealthPermissions({read:e,write:[]});const d=await n.checkHealthPermissions({read:e,write:[]});return a(d)}async function IB({startDate:n}){if(!_d.isNativePlatform())throw new Error("HEALTH_CONNECT_ONLY_IN_APP");const{HealthConnect:e}=await Yi(async()=>{const{HealthConnect:m}=await import("./index-BaekDcuz.js");return{HealthConnect:m}},[]),t=await e.checkAvailability(),r=typeof t=="string"?t:t?.availability??t?.value??t?.status;if(r!=="Available")throw new Error(`HEALTH_CONNECT_${r||"Unknown"}`);if(!await EB())throw new Error("HEALTH_CONNECT_PERMISSION_DENIED");const s=Ue(n);if(!n||Number.isNaN(s?.getTime?.()))throw new Error("HEALTH_CONNECT_INVALID_START_DATE");const a=Nn(s),u=new Date;return((await e.readRecords({type:"BasalBodyTemperature",timeRangeFilter:{type:"between",startTime:a,endTime:u},ascendingOrder:!0,pageSize:500}))?.records||[]).map(m=>{const g=TB(m.temperature);if(g==null)return null;const v=new Date(m.time);return{externalId:m?.metadata?.id||null,dataOrigin:m?.metadata?.dataOrigin||null,timestampMs:v.getTime(),timestamp:Kt(v,"yyyy-MM-dd'T'HH:mm:ssXXX"),localDate:Kt(v,"yyyy-MM-dd"),time:Kt(v,"HH:mm"),temperatureC:Number(g.toFixed(2))}}).filter(Boolean)}const Kx=k.createContext(null),Ko={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1},wy=(n,e)=>{if(!e)return n;const t=Nn(Ue(e));return n.filter(r=>Ue(r.isoDate)<=t)},Ty=(n,e)=>{if(!e)return n;const t=Nn(Ue(e));return n.filter(r=>Ue(r.isoDate)>=t)},ff=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},bl=n=>n?typeof n=="string"?Kt(Nn(Ue(n)),"yyyy-MM-dd"):typeof n.toDate=="function"?Kt(Nn(n.toDate()),"yyyy-MM-dd"):Kt(Nn(new Date(n)),"yyyy-MM-dd"):null,PB=({children:n})=>{const{user:e}=rw(),{toast:t}=nw(),[r,i]=k.useState(Ko),[s,a]=k.useState([]),[u,d]=k.useState(!0),h=k.useRef(!1),m=k.useRef(null),g=k.useCallback(()=>{i(Ko),a([]),d(!1),h.current=!1},[]),v=k.useCallback(async({silent:P=!1}={})=>{if(!e?.uid){const re=m.current;m.current=null,re&&Bj(re).catch(oe=>console.error("Failed to clear cached cycle data on sign-out.",oe)),g();return}m.current=e.uid;let Y=!1;if(!h.current)try{const re=await wP(e.uid);re&&(i(re.currentCycle??Ko),a(re.archivedCycles??[]),h.current=!0,Y=!0,P||d(!1))}catch(re){console.error("Failed to hydrate cycle data from cache.",re)}const se=!P&&!Y&&!h.current;se&&d(!0);try{const re=await bj(e.uid);let oe=Ko;if(re){const ne=bl(re.startDate),N=bl(re.endDate),K=yy(re.data,ne),he=Ty(K,ne),pe=wy(he,N);oe={...re,startDate:ne,endDate:N,data:pe}}const de=(await xj(e.uid,re?re.startDate:null)).map(ne=>{const N=bl(ne.startDate),K=bl(ne.endDate),he=yy(ne.data||[],N),pe=Ty(he,N),me=wy(pe,K);return{...ne,startDate:N??Kt(Nn(new Date),"yyyy-MM-dd"),endDate:K,needsCompletion:ne.needsCompletion,data:me}});i(oe),a(de),await jj(e.uid,{currentCycle:oe,archivedCycles:de}),h.current=!0}catch(re){if(console.error("Error in loadCycleData:",re),re.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!Y)try{const oe=await wP(e.uid);oe?(i(oe.currentCycle??Ko),a(oe.archivedCycles??[]),h.current=!0):(i(Ko),a([]),h.current=!1)}catch(oe){console.error("Failed to recover cycle data from cache after error.",oe),i(Ko),a([]),h.current=!1}}finally{se&&d(!1)}},[e,g]);k.useEffect(()=>{if(!e?.uid){g();return}v().catch(P=>console.error("Initial cycle data load failed:",P))},[e?.uid,v,g]);const E=k.useCallback(async(P,Y,se=null)=>{const re=se??r.id;if(!e?.uid||!re)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");d(!0);try{const oe=P.measurements.find($e=>$e.selected)||P.measurements[0],ee=oe&&oe.time&&oe.time.trim()!==""?oe.time:Kt(new Date,"HH:mm"),de=dj(`${P.isoDate} ${ee}`,"yyyy-MM-dd HH:mm",new Date),ne=re===r.id?r:s.find($e=>$e.id===re);let N=Y;!N&&ne&&(N=ne.data.find($e=>$e.isoDate===P.isoDate)),N&&String(N.id).startsWith("placeholder-")&&(N=null);const K=ne?.data?.find($e=>$e?.peak_marker==="peak")||null;P.peak_marker==="peak"&&K&&K.id!==N?.id&&await vy(e.uid,re,K.id,{peak_marker:null});const he=ff(oe.temperature),pe=ff(oe.temperature_corrected),me=!!oe.use_corrected&&pe!==null,Se=me?pe:he,Me=Object.prototype.hasOwnProperty.call(P,"peak_marker"),He=(Array.isArray(P.measurements)?P.measurements:[]).some($e=>{if(!$e)return!1;const qn=ff($e.temperature),wo=ff($e.temperature_corrected);return qn!==null||wo!==null}),ct=$e=>$e==null?"":String($e).trim(),Xt=ct(P.mucusSensation??P.mucus_sensation??""),ns=ct(P.mucusAppearance??P.mucus_appearance??""),Or=ct(P.observations??""),wr=P.fertility_symbol??P.fertilitySymbol??null,Oa=wr!=null&&wr!==""&&wr!=="none",vi=!!(P.had_relations??P.hadRelations??!1),Mr=P.peak_marker==="peak",rs=!He&&Xt===""&&ns===""&&!Oa&&Or===""&&!vi&&!Mr,St={cycle_id:re,user_id:e.uid,timestamp:Kt(de,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:P.measurements,mucus_sensation:P.mucusSensation||null,mucus_appearance:P.mucusAppearance||null,fertility_symbol:P.fertility_symbol==="none"?null:P.fertility_symbol,observations:P.observations||null,had_relations:vi,ignored:N?P.ignored??N.ignored:P.ignored||!1,peak_marker:Me?P.peak_marker??null:N?.peak_marker??null,temperature_raw:he,temperature_corrected:pe,use_corrected:me,temperature_chart:Se};if(N){const $e=Me&&N?.peak_marker==="peak"&&!Mr;rs&&$e?await vP(e.uid,re,N.id):await vy(e.uid,re,N.id,St)}else{if(rs)return;await kj(St)}await v({silent:!0})}catch(oe){throw console.error("Error adding/updating data point:",oe),oe}finally{d(!1)}},[e,r,s,v]),b=k.useCallback(async(P,Y=null)=>{const se=Y??r.id;if(!(!e?.uid||!se)){d(!0);try{await vP(e.uid,se,P),await v({silent:!0})}catch(re){throw console.error("Error deleting record:",re),re}finally{d(!1)}}},[e,r.id,v]),R=k.useCallback(async(P,Y)=>{if(!e?.uid)return;const se=P===r.id,re=se?r:s.find(ne=>ne.id===P);if(!re)throw new Error("Cycle not found for toggling ignore state.");const oe=re.data?.find(ne=>ne.id===Y);if(!oe)throw new Error("Record not found for toggling ignore state.");const ee=!oe.ignored,de=ne=>{se?i(N=>N.id!==P?N:{...N,data:N.data.map(K=>K.id===Y?{...K,ignored:ne}:K)}):a(N=>N.map(K=>K.id!==P?K:{...K,data:(K.data||[]).map(he=>he.id===Y?{...he,ignored:ne}:he)}))};try{de(ee),await vy(e.uid,P,Y,{ignored:ee}),v({silent:!0}).catch(ne=>console.error("Background cycle data refresh failed after toggling ignore state:",ne))}catch(ne){throw console.error("Error toggling ignore state:",ne),de(!ee),ne}},[e,r,s,v]),C=k.useCallback(async(P,Y)=>{if(!e?.uid||!P)return;const se=r,re=s,oe=ee=>!ee||ee.id!==P||ee.ignoredForAutoCalculations===Y?ee:{...ee,ignoredForAutoCalculations:Y};i(ee=>oe(ee)),a(ee=>ee.map(de=>oe(de)));try{await Nj(e.uid,P,Y),v({silent:!0}).catch(ee=>console.error("Background cycle data refresh failed after updating ignore configuration:",ee))}catch(ee){throw console.error("Error updating cycle ignore configuration:",ee),i(se),a(re),t({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),ee}},[e,r,s,v,t]),B=k.useCallback(async P=>{if(e?.uid){d(!0);try{const Y=Nn(P?Ue(P):new Date);if(r.id&&P){const oe=Nn(Ue(r.startDate));if(Y<=oe){t({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),d(!1);return}}if(r.id){const oe=Kt(iw(Y,-1),"yyyy-MM-dd");await Dj(r.id,e.uid,oe)}const se=Kt(Y,"yyyy-MM-dd"),re=await yP(e.uid,se);i({id:re.id,startDate:re.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await v({silent:!0})}catch(Y){console.error("Error starting new cycle:",Y);try{r.id&&await bc(r.id,e.uid,void 0,null)}catch(se){console.error("Rollback failed:",se)}throw t({title:"Error",description:"No se pudo iniciar el nuevo ciclo.",variant:"destructive"}),Y}finally{d(!1)}}},[e,r,v,t]),V=k.useCallback(P=>{if(!P)return"Las fechas coinciden con otro ciclo.";const{startDate:Y,endDate:se}=P,re=de=>{if(!de)return null;try{return Kt(Ue(de),"dd/MM/yyyy")}catch(ne){return console.error("Failed to format overlap date",ne),de}},oe=re(Y)??"sin fecha de inicio",ee=se?re(se):"en curso";return`Las fechas coinciden con el ciclo del ${oe} al ${ee}.`},[]),M=k.useCallback(async(P,Y)=>{if(e?.uid){if(!Y){t({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}d(!0);try{const se=await yP(e.uid,P);try{await bc(se.id,e.uid,void 0,Y)}catch(re){try{await _P(e.uid,se.id)}catch(oe){console.error("Failed to clean up cycle after overlap error:",oe)}throw re}await v({silent:!0})}catch(se){console.error("Error adding archived cycle:",se);const re=se.code==="cycle-overlap"?V(se.conflictCycle):"No se pudo crear el ciclo.";throw t({title:"Error",description:re,variant:"destructive"}),se}finally{d(!1)}}},[e,v,t,V]),z=k.useCallback(async P=>{if(e?.uid){d(!0);try{await _P(e.uid,P),await v({silent:!0})}catch(Y){throw console.error("Error deleting cycle:",Y),t({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),Y}finally{d(!1)}}},[e,v,t]),te=k.useCallback(async(P,Y,se)=>{if(!e?.uid)return null;try{return(await bc(P,e.uid,Y,se,!0)).overlap}catch(re){return console.error("Error checking cycle overlap:",re),null}},[e]),Z=k.useCallback(async(P,Y,se,re=!1)=>{if(e?.uid){d(!0);try{re&&Y?(await Oj(e.uid,P,Y),se!==void 0&&await bc(P,e.uid,void 0,se)):await bc(P,e.uid,Y,se),await v({silent:!0})}catch(oe){console.error("Error updating cycle dates:",oe);const ee=oe.code==="cycle-overlap"?V(oe.conflictCycle):"No se pudieron actualizar las fechas.";throw t({title:"Error",description:ee,variant:"destructive"}),oe}finally{d(!1)}}},[e,v,t,V]),x=k.useCallback((P,Y)=>Z(P,Y,void 0,!0),[Z]),S=k.useCallback(async(P,Y,se)=>{!e?.uid||!P||!Y||await Vj(e.uid,P,Y,se)},[e]),D=k.useCallback(async P=>{if(!e?.uid)return null;d(!0);try{const Y=await Rj(e.uid,P);if(!Y)return null;const se=bl(Y.startDate),re=bl(Y.endDate),oe=yy(Y.data||[],se),ee=Ty(oe,se),de=wy(ee,re);return{...Y,startDate:se??Kt(Nn(new Date),"yyyy-MM-dd"),endDate:re,data:de}}catch(Y){return console.error("Error fetching cycle by ID:",Y),null}finally{d(!1)}},[e]),F=k.useCallback(({silent:P=!0}={})=>v({silent:P}),[v]),L=k.useCallback(async()=>{if(!e?.uid)throw new Error("NO_USER");if(!r?.id||!r?.startDate)throw new Error("NO_CURRENT_CYCLE");d(!0);try{const P=await IB({startDate:r.startDate});if(!P.length){t({title:"Sin registros",description:"No se encontraron temperaturas en Health Connect."});return}const Y=aB(),oe=(await uB(Y,"syncBasalBodyTemperature")({cycleId:r.id,items:P}))?.data;return t({title:"Sincronizacin hecha",description:`Nuevos: ${oe?.createdMeasurements??0}  Ya estaban: ${oe?.skippedMeasurements??0}  Rechazados: ${oe?.rejected??0}`}),await v({silent:!0}),oe}catch(P){console.error(P);const se=(re=>typeof re=="string"?re:re?.message??JSON.stringify(re))(P);return se.includes("HEALTH_CONNECT_NotInstalled")||se.includes("HEALTH_CONNECT_NotSupported")?(t({title:"Health Connect no disponible",description:"Instala Health Connect para poder sincronizar tus registros.",variant:"destructive"}),null):se.includes("HEALTH_CONNECT_ONLY_IN_APP")?(t({title:"Solo en la app Android",description:"La sincronizacin est disponible nicamente en la app Android.",variant:"destructive"}),null):se.includes("HEALTH_CONNECT_PERMISSION_DENIED")?(t({title:"Permisos requeridos",description:"Debes conceder permisos de Health Connect para sincronizar.",variant:"destructive"}),null):se.includes("HEALTH_CONNECT_INVALID_START_DATE")?(t({title:"Fecha de inicio invlida",description:"No se pudo leer la fecha de inicio del ciclo actual.",variant:"destructive"}),null):(t({title:"Error al sincronizar",description:se,variant:"destructive"}),null)}finally{d(!1)}},[e,r,v,t]),U={currentCycle:r,archivedCycles:s,syncHealthConnectTemperatures:L,addOrUpdateDataPoint:E,deleteRecord:b,startNewCycle:B,updateCycleDates:Z,forceUpdateCycleStart:x,forceShiftNextCycleStart:S,checkCycleOverlap:te,isLoading:u,getCycleById:D,refreshData:F,toggleIgnoreRecord:R,setCycleIgnoreForAutoCalculations:C,addArchivedCycle:M,deleteCycle:z};return X.jsx(Kx.Provider,{value:U,children:n})},qW=()=>{const n=k.useContext(Kx);if(!n)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return n},CP=({children:n})=>X.jsxs("div",{className:"relative h-app overflow-hidden app-background",children:[X.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[X.jsx("div",{className:"wave wave--left-1"}),X.jsx("div",{className:"wave wave--left-2"}),X.jsx("div",{className:"wave wave--left-3"}),X.jsx("div",{className:"wave wave--right-1"}),X.jsx("div",{className:"wave wave--right-2"}),X.jsx("div",{className:"wave wave--right-3"})]}),X.jsx("div",{className:"pointer-events-none absolute inset-0",children:X.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),X.jsx("div",{className:"relative z-10 flex h-app flex-col",children:n})]});var SB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CB=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cu=(n,e)=>{const t=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...d},h)=>k.createElement("svg",{ref:h,...SB,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${CB(n)}`,...d},[...e.map(([m,g])=>k.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},AB=Cu("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),bB=Cu("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),xB=Cu("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),RB=Cu("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),kB=Cu("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),DB=Cu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),NB=()=>{const n=xa(),e=[{to:"/records",label:"Mis registros",icon:xB},{to:"/chart",label:"Grfica",icon:bB},{to:"/",label:"Ciclo actual",icon:RB},{to:"/archived-cycles",label:"Mis ciclos",icon:AB,isActive:t=>t.startsWith("/archived-cycles")||t.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:kB}];return X.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:X.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:t,label:r,icon:i,isActive:s})=>X.jsx("li",{className:"flex",children:X.jsx(IN,{to:t,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:a})=>{const d=(s?s(n.pathname):!1)||a;return X.jsxs(X.Fragment,{children:[X.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${d?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),X.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:X.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${d?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),X.jsx("span",{className:"sr-only",children:r})]})}})},t))})})},xl=({children:n,hideBottomNav:e=!1})=>{const t=e?"relative z-10 flex-1 w-full overflow-y-auto":"relative z-10 flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return X.jsxs("div",{className:"relative flex min-h-app flex-col overflow-hidden",children:[X.jsx("main",{className:t,children:n}),!e&&X.jsx(NB,{})]})};function Qx(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Qx(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Yx(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Qx(n))&&(r&&(r+=" "),r+=e);return r}function VB(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=Xx(e))&&(r&&(r+=" "),r+=t);return r}function Xx(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=Xx(n[r]))&&(t&&(t+=" "),t+=e);return t}var mw="-";function OB(n){var e=LB(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(u){var d=u.split(mw);return d[0]===""&&d.length!==1&&d.shift(),Jx(d,e)||MB(u)}function a(u,d){var h=t[u]||[];return d&&i[u]?[].concat(h,i[u]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function Jx(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?Jx(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(mw);return e.validators.find(function(a){var u=a.validator;return u(s)})?.classGroupId}}var AP=/^\[(.+)\]$/;function MB(n){if(AP.test(n)){var e=AP.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function LB(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=UB(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],u=s[1];Pv(u,r,a,e)}),r}function Pv(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:bP(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(FB(i)){Pv(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var u=a[0],d=a[1];Pv(d,bP(e,u),t,r)})})}function bP(n,e){var t=n;return e.split(mw).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function FB(n){return n.isThemeGetter}function UB(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var d=u[0],h=u[1];return[e+d,h]})):a});return[r,s]}):n}function jB(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return i(a,u),u},set:function(a,u){t.has(a)?t.set(a,u):i(a,u)}}}var Zx="!";function BB(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var u=[],d=0,h=0,m,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+i)===e)){u.push(a.slice(h,g)),h=g+i;continue}if(v==="/"){m=g;continue}}v==="["?d++:v==="]"&&d--}var E=u.length===0?a:a.substring(h),b=E.startsWith(Zx),R=b?E.substring(1):E,C=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:R,maybePostfixModifierPosition:C}}}function $B(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function zB(n){return{cache:jB(n.cacheSize),splitModifiers:BB(n),...OB(n)}}var WB=/\s+/;function HB(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(WB).map(function(a){var u=t(a),d=u.modifiers,h=u.hasImportantModifier,m=u.baseClassName,g=u.maybePostfixModifierPosition,v=r(g?m.substring(0,g):m),E=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(m),!v)return{isTailwindClass:!1,originalClassName:a};E=!1}var b=$B(d).join(":"),R=h?b+Zx:b;return{isTailwindClass:!0,modifierId:R,classGroupId:v,originalClassName:a,hasPostfixModifier:E}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,m=u+d;return s.has(m)?!1:(s.add(m),i(d,h).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function qB(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=u;function u(h){var m=e[0],g=e.slice(1),v=g.reduce(function(E,b){return b(E)},m());return r=zB(v),i=r.cache.get,s=r.cache.set,a=d,d(h)}function d(h){var m=i(h);if(m)return m;var g=HB(h,r);return s(h,g),g}return function(){return a(VB.apply(null,arguments))}}function wt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var e1=/^\[(?:([a-z-]+):)?(.+)\]$/i,GB=/^\d+\/\d+$/,KB=new Set(["px","full","screen"]),QB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,YB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,XB=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Rr(n){return aa(n)||KB.has(n)||GB.test(n)||Sv(n)}function Sv(n){return ka(n,"length",r6)}function JB(n){return ka(n,"size",t1)}function ZB(n){return ka(n,"position",t1)}function e6(n){return ka(n,"url",i6)}function pf(n){return ka(n,"number",aa)}function aa(n){return!Number.isNaN(Number(n))}function t6(n){return n.endsWith("%")&&aa(n.slice(0,-1))}function xc(n){return xP(n)||ka(n,"number",xP)}function qe(n){return e1.test(n)}function Rc(){return!0}function Fs(n){return QB.test(n)}function n6(n){return ka(n,"",s6)}function ka(n,e,t){var r=e1.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function r6(n){return YB.test(n)}function t1(){return!1}function i6(n){return n.startsWith("url(")}function xP(n){return Number.isInteger(Number(n))}function s6(n){return XB.test(n)}function o6(){var n=wt("colors"),e=wt("spacing"),t=wt("blur"),r=wt("brightness"),i=wt("borderColor"),s=wt("borderRadius"),a=wt("borderSpacing"),u=wt("borderWidth"),d=wt("contrast"),h=wt("grayscale"),m=wt("hueRotate"),g=wt("invert"),v=wt("gap"),E=wt("gradientColorStops"),b=wt("gradientColorStopPositions"),R=wt("inset"),C=wt("margin"),B=wt("opacity"),V=wt("padding"),M=wt("saturate"),z=wt("scale"),te=wt("sepia"),Z=wt("skew"),x=wt("space"),S=wt("translate"),D=function(){return["auto","contain","none"]},F=function(){return["auto","hidden","clip","visible","scroll"]},L=function(){return["auto",qe,e]},U=function(){return[qe,e]},P=function(){return["",Rr]},Y=function(){return["auto",aa,qe]},se=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},re=function(){return["solid","dashed","dotted","double","none"]},oe=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},ee=function(){return["start","end","center","between","around","evenly","stretch"]},de=function(){return["","0",qe]},ne=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},N=function(){return[aa,pf]},K=function(){return[aa,qe]};return{cacheSize:500,theme:{colors:[Rc],spacing:[Rr],blur:["none","",Fs,qe],brightness:N(),borderColor:[n],borderRadius:["none","","full",Fs,qe],borderSpacing:U(),borderWidth:P(),contrast:N(),grayscale:de(),hueRotate:K(),invert:de(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[t6,Sv],inset:L(),margin:L(),opacity:N(),padding:U(),saturate:N(),scale:N(),sepia:de(),skew:K(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Fs]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(se(),[qe])}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[R]}],"inset-x":[{"inset-x":[R]}],"inset-y":[{"inset-y":[R]}],start:[{start:[R]}],end:[{end:[R]}],top:[{top:[R]}],right:[{right:[R]}],bottom:[{bottom:[R]}],left:[{left:[R]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xc]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:de()}],shrink:[{shrink:de()}],order:[{order:["first","last","none",xc]}],"grid-cols":[{"grid-cols":[Rc]}],"col-start-end":[{col:["auto",{span:["full",xc]},qe]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[Rc]}],"row-start-end":[{row:["auto",{span:[xc]},qe]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(ee())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(ee(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(ee(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[V]}],px:[{px:[V]}],py:[{py:[V]}],ps:[{ps:[V]}],pe:[{pe:[V]}],pt:[{pt:[V]}],pr:[{pr:[V]}],pb:[{pb:[V]}],pl:[{pl:[V]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",qe,e]}],"min-w":[{"min-w":["min","max","fit",qe,Rr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Fs]},Fs,qe]}],h:[{h:[qe,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",qe,Rr]}],"max-h":[{"max-h":[qe,e,"min","max","fit"]}],"font-size":[{text:["base",Fs,Sv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pf]}],"font-family":[{font:[Rc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",aa,pf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qe,Rr]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(re(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Rr]}],"underline-offset":[{"underline-offset":["auto",qe,Rr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(se(),[ZB])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",JB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},e6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[].concat(re(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:re()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(re())}],"outline-offset":[{"outline-offset":[qe,Rr]}],"outline-w":[{outline:[Rr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[Rr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Fs,n6]}],"shadow-color":[{shadow:[Rc]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":oe()}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Fs,qe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[M]}],sepia:[{sepia:[te]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[z]}],"scale-x":[{"scale-x":[z]}],"scale-y":[{"scale-y":[z]}],rotate:[{rotate:[xc,qe]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Rr,pf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var a6=qB(o6);function Da(...n){return a6(Yx(n))}function rr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function RP(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function pm(...n){return e=>{let t=!1;const r=n.map(i=>{const s=RP(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():RP(n[i],null)}}}}function Aa(...n){return k.useCallback(pm(...n),n)}function GW(n,e){const t=k.createContext(e),r=s=>{const{children:a,...u}=s,d=k.useMemo(()=>u,Object.values(u));return X.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function i(s){const a=k.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function n1(n,e=[]){let t=[];function r(s,a){const u=k.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:E,...b}=g,R=v?.[n]?.[d]||u,C=k.useMemo(()=>b,Object.values(b));return X.jsx(R.Provider,{value:C,children:E})};h.displayName=s+"Provider";function m(g,v){const E=v?.[n]?.[d]||u,b=k.useContext(E);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const i=()=>{const s=t.map(a=>k.createContext(a));return function(u){const d=u?.[n]||s;return k.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[r,l6(i,...e)]}function l6(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((u,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...u,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function kP(n){const e=u6(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(d6);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return X.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return X.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function u6(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=f6(i),u=h6(s,i.props);return i.type!==k.Fragment&&(u.ref=r?pm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var c6=Symbol("radix.slottable");function d6(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===c6}function h6(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function f6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function p6(n){const e=n+"CollectionProvider",[t,r]=n1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=R=>{const{scope:C,children:B}=R,V=en.useRef(null),M=en.useRef(new Map).current;return X.jsx(i,{scope:C,itemMap:M,collectionRef:V,children:B})};a.displayName=e;const u=n+"CollectionSlot",d=kP(u),h=en.forwardRef((R,C)=>{const{scope:B,children:V}=R,M=s(u,B),z=Aa(C,M.collectionRef);return X.jsx(d,{ref:z,children:V})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=kP(m),E=en.forwardRef((R,C)=>{const{scope:B,children:V,...M}=R,z=en.useRef(null),te=Aa(C,z),Z=s(m,B);return en.useEffect(()=>(Z.itemMap.set(z,{ref:z,...M}),()=>{Z.itemMap.delete(z)})),X.jsx(v,{[g]:"",ref:te,children:V})});E.displayName=m;function b(R){const C=s(n+"CollectionConsumer",R);return en.useCallback(()=>{const V=C.collectionRef.current;if(!V)return[];const M=Array.from(V.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((Z,x)=>M.indexOf(Z.ref.current)-M.indexOf(x.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:h,ItemSlot:E},b,r]}function m6(n){const e=g6(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(v6);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return X.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return X.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function g6(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=w6(i),u=_6(s,i.props);return i.type!==k.Fragment&&(u.ref=r?pm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var y6=Symbol("radix.slottable");function v6(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===y6}function _6(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function w6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var T6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yi=T6.reduce((n,e)=>{const t=m6(`Primitive.${e}`),r=k.forwardRef((i,s)=>{const{asChild:a,...u}=i,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),X.jsx(d,{...u,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function r1(n,e){n&&Gv.flushSync(()=>n.dispatchEvent(e))}function ba(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>e.current?.(...t),[])}function E6(n,e=globalThis?.document){const t=ba(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var I6="DismissableLayer",Cv="dismissableLayer.update",P6="dismissableLayer.pointerDownOutside",S6="dismissableLayer.focusOutside",DP,i1=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),s1=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:u,...d}=n,h=k.useContext(i1),[m,g]=k.useState(null),v=m?.ownerDocument??globalThis?.document,[,E]=k.useState({}),b=Aa(e,x=>g(x)),R=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),B=R.indexOf(C),V=m?R.indexOf(m):-1,M=h.layersWithOutsidePointerEventsDisabled.size>0,z=V>=B,te=A6(x=>{const S=x.target,D=[...h.branches].some(F=>F.contains(S));!z||D||(i?.(x),a?.(x),x.defaultPrevented||u?.())},v),Z=b6(x=>{const S=x.target;[...h.branches].some(F=>F.contains(S))||(s?.(x),a?.(x),x.defaultPrevented||u?.())},v);return E6(x=>{V===h.layers.size-1&&(r?.(x),!x.defaultPrevented&&u&&(x.preventDefault(),u()))},v),k.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(DP=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),NP(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=DP)}},[m,v,t,h]),k.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),NP())},[m,h]),k.useEffect(()=>{const x=()=>E({});return document.addEventListener(Cv,x),()=>document.removeEventListener(Cv,x)},[]),X.jsx(yi.div,{...d,ref:b,style:{pointerEvents:M?z?"auto":"none":void 0,...n.style},onFocusCapture:rr(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:rr(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:rr(n.onPointerDownCapture,te.onPointerDownCapture)})});s1.displayName=I6;var C6="DismissableLayerBranch",o1=k.forwardRef((n,e)=>{const t=k.useContext(i1),r=k.useRef(null),i=Aa(e,r);return k.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),X.jsx(yi.div,{...n,ref:i})});o1.displayName=C6;function A6(n,e=globalThis?.document){const t=ba(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=u=>{if(u.target&&!r.current){let d=function(){a1(P6,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function b6(n,e=globalThis?.document){const t=ba(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&a1(S6,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NP(){const n=new CustomEvent(Cv);document.dispatchEvent(n)}function a1(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?r1(i,s):i.dispatchEvent(s)}var x6=s1,R6=o1,wd=globalThis?.document?k.useLayoutEffect:()=>{},k6="Portal",l1=k.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=k.useState(!1);wd(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?TD.createPortal(X.jsx(yi.div,{...r,ref:e}),a):null});l1.displayName=k6;function D6(n,e){return k.useReducer((t,r)=>e[t][r]??t,n)}var u1=n=>{const{present:e,children:t}=n,r=N6(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=Aa(r.ref,V6(i));return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};u1.displayName="Presence";function N6(n){const[e,t]=k.useState(),r=k.useRef(null),i=k.useRef(n),s=k.useRef("none"),a=n?"mounted":"unmounted",[u,d]=D6(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const h=mf(r.current);s.current=u==="mounted"?h:"none"},[u]),wd(()=>{const h=r.current,m=i.current;if(m!==n){const v=s.current,E=mf(h);n?d("MOUNT"):E==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&v!==E?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),wd(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=E=>{const R=mf(r.current).includes(CSS.escape(E.animationName));if(E.target===e&&R&&(d("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},v=E=>{E.target===e&&(s.current=mf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:k.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function mf(n){return n?.animationName||"none"}function V6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var O6=qv[" useInsertionEffect ".trim().toString()]||wd;function M6({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=L6({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const m=k.useRef(n!==void 0);k.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=k.useCallback(m=>{if(u){const g=F6(m)?m(n):m;g!==n&&a.current?.(g)}else s(m)},[u,n,s,a]);return[d,h]}function L6({defaultProp:n,onChange:e}){const[t,r]=k.useState(n),i=k.useRef(t),s=k.useRef(e);return O6(()=>{s.current=e},[e]),k.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function F6(n){return typeof n=="function"}var U6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),j6="VisuallyHidden",gw=k.forwardRef((n,e)=>X.jsx(yi.span,{...n,ref:e,style:{...U6,...n.style}}));gw.displayName=j6;var yw="ToastProvider",[vw,B6,$6]=p6("Toast"),[c1]=n1("Toast",[$6]),[z6,mm]=c1(yw),d1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=n,[u,d]=k.useState(null),[h,m]=k.useState(0),g=k.useRef(!1),v=k.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${yw}\`. Expected non-empty \`string\`.`),X.jsx(vw.Provider,{scope:e,children:X.jsx(z6,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:k.useCallback(()=>m(E=>E+1),[]),onToastRemove:k.useCallback(()=>m(E=>E-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:a})})};d1.displayName=yw;var h1="ToastViewport",W6=["F8"],Av="toast.viewportPause",bv="toast.viewportResume",f1=k.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=W6,label:i="Notifications ({hotkey})",...s}=n,a=mm(h1,t),u=B6(t),d=k.useRef(null),h=k.useRef(null),m=k.useRef(null),g=k.useRef(null),v=Aa(e,g,a.onViewportChange),E=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=a.toastCount>0;k.useEffect(()=>{const C=B=>{r.length!==0&&r.every(M=>B[M]||B.code===M)&&g.current?.focus()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),k.useEffect(()=>{const C=d.current,B=g.current;if(b&&C&&B){const V=()=>{if(!a.isClosePausedRef.current){const Z=new CustomEvent(Av);B.dispatchEvent(Z),a.isClosePausedRef.current=!0}},M=()=>{if(a.isClosePausedRef.current){const Z=new CustomEvent(bv);B.dispatchEvent(Z),a.isClosePausedRef.current=!1}},z=Z=>{!C.contains(Z.relatedTarget)&&M()},te=()=>{C.contains(document.activeElement)||M()};return C.addEventListener("focusin",V),C.addEventListener("focusout",z),C.addEventListener("pointermove",V),C.addEventListener("pointerleave",te),window.addEventListener("blur",V),window.addEventListener("focus",M),()=>{C.removeEventListener("focusin",V),C.removeEventListener("focusout",z),C.removeEventListener("pointermove",V),C.removeEventListener("pointerleave",te),window.removeEventListener("blur",V),window.removeEventListener("focus",M)}}},[b,a.isClosePausedRef]);const R=k.useCallback(({tabbingDirection:C})=>{const V=u().map(M=>{const z=M.ref.current,te=[z,...r5(z)];return C==="forwards"?te:te.reverse()});return(C==="forwards"?V.reverse():V).flat()},[u]);return k.useEffect(()=>{const C=g.current;if(C){const B=V=>{const M=V.altKey||V.ctrlKey||V.metaKey;if(V.key==="Tab"&&!M){const te=document.activeElement,Z=V.shiftKey;if(V.target===C&&Z){h.current?.focus();return}const D=R({tabbingDirection:Z?"backwards":"forwards"}),F=D.findIndex(L=>L===te);Ey(D.slice(F+1))?V.preventDefault():Z?h.current?.focus():m.current?.focus()}};return C.addEventListener("keydown",B),()=>C.removeEventListener("keydown",B)}},[u,R]),X.jsxs(R6,{ref:d,role:"region","aria-label":i.replace("{hotkey}",E),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&X.jsx(xv,{ref:h,onFocusFromOutsideViewport:()=>{const C=R({tabbingDirection:"forwards"});Ey(C)}}),X.jsx(vw.Slot,{scope:t,children:X.jsx(yi.ol,{tabIndex:-1,...s,ref:v})}),b&&X.jsx(xv,{ref:m,onFocusFromOutsideViewport:()=>{const C=R({tabbingDirection:"backwards"});Ey(C)}})]})});f1.displayName=h1;var p1="ToastFocusProxy",xv=k.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=mm(p1,t);return X.jsx(gw,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const u=a.relatedTarget;!s.viewport?.contains(u)&&r()}})});xv.displayName=p1;var Ld="Toast",H6="toast.swipeStart",q6="toast.swipeMove",G6="toast.swipeCancel",K6="toast.swipeEnd",m1=k.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...a}=n,[u,d]=M6({prop:r,defaultProp:i??!0,onChange:s,caller:Ld});return X.jsx(u1,{present:t||u,children:X.jsx(X6,{open:u,...a,ref:e,onClose:()=>d(!1),onPause:ba(n.onPause),onResume:ba(n.onResume),onSwipeStart:rr(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:rr(n.onSwipeMove,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:rr(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:rr(n.onSwipeEnd,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),d(!1)})})})});m1.displayName=Ld;var[Q6,Y6]=c1(Ld,{onClose(){}}),X6=k.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:E,...b}=n,R=mm(Ld,t),[C,B]=k.useState(null),V=Aa(e,Y=>B(Y)),M=k.useRef(null),z=k.useRef(null),te=i||R.duration,Z=k.useRef(0),x=k.useRef(te),S=k.useRef(0),{onToastAdd:D,onToastRemove:F}=R,L=ba(()=>{C?.contains(document.activeElement)&&R.viewport?.focus(),a()}),U=k.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(S.current),Z.current=new Date().getTime(),S.current=window.setTimeout(L,Y))},[L]);k.useEffect(()=>{const Y=R.viewport;if(Y){const se=()=>{U(x.current),h?.()},re=()=>{const oe=new Date().getTime()-Z.current;x.current=x.current-oe,window.clearTimeout(S.current),d?.()};return Y.addEventListener(Av,re),Y.addEventListener(bv,se),()=>{Y.removeEventListener(Av,re),Y.removeEventListener(bv,se)}}},[R.viewport,te,d,h,U]),k.useEffect(()=>{s&&!R.isClosePausedRef.current&&U(te)},[s,te,R.isClosePausedRef,U]),k.useEffect(()=>(D(),()=>F()),[D,F]);const P=k.useMemo(()=>C?E1(C):null,[C]);return R.viewport?X.jsxs(X.Fragment,{children:[P&&X.jsx(J6,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:P}),X.jsx(Q6,{scope:t,onClose:L,children:Gv.createPortal(X.jsx(vw.ItemSlot,{scope:t,children:X.jsx(x6,{asChild:!0,onEscapeKeyDown:rr(u,()=>{R.isFocusedToastEscapeKeyDownRef.current||L(),R.isFocusedToastEscapeKeyDownRef.current=!1}),children:X.jsx(yi.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":R.swipeDirection,...b,ref:V,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:rr(n.onKeyDown,Y=>{Y.key==="Escape"&&(u?.(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(R.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:rr(n.onPointerDown,Y=>{Y.button===0&&(M.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:rr(n.onPointerMove,Y=>{if(!M.current)return;const se=Y.clientX-M.current.x,re=Y.clientY-M.current.y,oe=!!z.current,ee=["left","right"].includes(R.swipeDirection),de=["left","up"].includes(R.swipeDirection)?Math.min:Math.max,ne=ee?de(0,se):0,N=ee?0:de(0,re),K=Y.pointerType==="touch"?10:2,he={x:ne,y:N},pe={originalEvent:Y,delta:he};oe?(z.current=he,gf(q6,g,pe,{discrete:!1})):VP(he,R.swipeDirection,K)?(z.current=he,gf(H6,m,pe,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(se)>K||Math.abs(re)>K)&&(M.current=null)}),onPointerUp:rr(n.onPointerUp,Y=>{const se=z.current,re=Y.target;if(re.hasPointerCapture(Y.pointerId)&&re.releasePointerCapture(Y.pointerId),z.current=null,M.current=null,se){const oe=Y.currentTarget,ee={originalEvent:Y,delta:se};VP(se,R.swipeDirection,R.swipeThreshold)?gf(K6,E,ee,{discrete:!0}):gf(G6,v,ee,{discrete:!0}),oe.addEventListener("click",de=>de.preventDefault(),{once:!0})}})})})}),R.viewport)})]}):null}),J6=n=>{const{__scopeToast:e,children:t,...r}=n,i=mm(Ld,e),[s,a]=k.useState(!1),[u,d]=k.useState(!1);return t5(()=>a(!0)),k.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:X.jsx(l1,{asChild:!0,children:X.jsx(gw,{...r,children:s&&X.jsxs(X.Fragment,{children:[i.label," ",t]})})})},Z6="ToastTitle",g1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return X.jsx(yi.div,{...r,ref:e})});g1.displayName=Z6;var e5="ToastDescription",y1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return X.jsx(yi.div,{...r,ref:e})});y1.displayName=e5;var v1="ToastAction",_1=k.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?X.jsx(T1,{altText:t,asChild:!0,children:X.jsx(_w,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${v1}\`. Expected non-empty \`string\`.`),null)});_1.displayName=v1;var w1="ToastClose",_w=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Y6(w1,t);return X.jsx(T1,{asChild:!0,children:X.jsx(yi.button,{type:"button",...r,ref:e,onClick:rr(n.onClick,i.onClose)})})});_w.displayName=w1;var T1=k.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return X.jsx(yi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function E1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),n5(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...E1(r))}}),e}function gf(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?r1(i,s):i.dispatchEvent(s)}var VP=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function t5(n=()=>{}){const e=ba(n);wd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function n5(n){return n.nodeType===n.ELEMENT_NODE}function r5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ey(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var i5=d1,I1=f1,P1=m1,S1=g1,C1=y1,A1=_1,b1=_w;const OP=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,MP=Yx,x1=(n,e)=>t=>{var r;if(e?.variants==null)return MP(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const m=t?.[h],g=s?.[h];if(m===null)return null;const v=OP(m)||OP(g);return i[h][v]}),u=t&&Object.entries(t).reduce((h,m)=>{let[g,v]=m;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:g,className:v,...E}=m;return Object.entries(E).every(b=>{let[R,C]=b;return Array.isArray(C)?C.includes({...s,...u}[R]):{...s,...u}[R]===C})?[...h,g,v]:h},[]);return MP(n,a,d,t?.class,t?.className)},s5=i5,R1=en.forwardRef(({className:n,...e},t)=>X.jsx(I1,{ref:t,className:Da("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));R1.displayName=I1.displayName;const o5=x1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),k1=en.forwardRef(({className:n,variant:e,...t},r)=>X.jsx(P1,{ref:r,className:Da(o5({variant:e}),n),...t}));k1.displayName=P1.displayName;const a5=en.forwardRef(({className:n,...e},t)=>X.jsx(A1,{ref:t,className:Da("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));a5.displayName=A1.displayName;const D1=en.forwardRef(({className:n,...e},t)=>X.jsx(b1,{ref:t,className:Da("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:X.jsx(DB,{className:"h-4 w-4"})}));D1.displayName=b1.displayName;const N1=en.forwardRef(({className:n,...e},t)=>X.jsx(S1,{ref:t,className:Da("text-sm font-semibold",n),...e}));N1.displayName=S1.displayName;const V1=en.forwardRef(({className:n,...e},t)=>X.jsx(C1,{ref:t,className:Da("text-sm opacity-90",n),...e}));V1.displayName=C1.displayName;function l5(){const{toasts:n}=nw();return X.jsxs(s5,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>X.jsxs(k1,{...s,children:[X.jsxs("div",{className:"grid gap-1",children:[t&&X.jsx(N1,{children:t}),r&&X.jsx(V1,{children:r})]}),i,X.jsx(D1,{})]},e)),X.jsx(R1,{})]})}const O1=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),gm=k.createContext({}),ww=k.createContext(null),ym=typeof document<"u",u5=ym?k.useLayoutEffect:k.useEffect,M1=k.createContext({strict:!1}),Tw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c5="framerAppearId",L1="data-"+Tw(c5);function d5(n,e,t,r){const{visualElement:i}=k.useContext(gm),s=k.useContext(M1),a=k.useContext(ww),u=k.useContext(O1).reducedMotion,d=k.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=d.current;k.useInsertionEffect(()=>{h&&h.update(t,a)});const m=k.useRef(!!(t[L1]&&!window.HandoffComplete));return u5(()=>{h&&(h.render(),m.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(h.updateFeatures(),!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),h}function Fl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function h5(n,e,t){return k.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Fl(t)&&(t.current=r))},[e])}function Td(n){return typeof n=="string"||Array.isArray(n)}function vm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Ew=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iw=["initial",...Ew];function _m(n){return vm(n.animate)||Iw.some(e=>Td(n[e]))}function F1(n){return!!(_m(n)||n.variants)}function f5(n,e){if(_m(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Td(t)?t:void 0,animate:Td(r)?r:void 0}}return n.inherit!==!1?e:{}}function p5(n){const{initial:e,animate:t}=f5(n,k.useContext(gm));return k.useMemo(()=>({initial:e,animate:t}),[LP(e),LP(t)])}function LP(n){return Array.isArray(n)?n.join(" "):n}const FP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ed={};for(const n in FP)Ed[n]={isEnabled:e=>FP[n].some(t=>!!e[t])};function m5(n){for(const e in n)Ed[e]={...Ed[e],...n[e]}}const U1=k.createContext({}),j1=k.createContext({}),g5=Symbol.for("motionComponentSymbol");function y5({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&m5(n);function s(u,d){let h;const m={...k.useContext(O1),...u,layoutId:v5(u)},{isStatic:g}=m,v=p5(u),E=r(u,g);if(!g&&ym){v.visualElement=d5(i,E,m,e);const b=k.useContext(j1),R=k.useContext(M1).strict;v.visualElement&&(h=v.visualElement.loadFeatures(m,R,n,b))}return k.createElement(gm.Provider,{value:v},h&&v.visualElement?k.createElement(h,{visualElement:v.visualElement,...m}):null,t(i,u,h5(E,v.visualElement,d),E,g,v.visualElement))}const a=k.forwardRef(s);return a[g5]=i,a}function v5({layoutId:n}){const e=k.useContext(U1).id;return e&&n!==void 0?e+"-"+n:n}function _5(n){function e(r,i={}){return y5(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const w5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pw(n){return typeof n!="string"||n.includes("-")?!1:!!(w5.indexOf(n)>-1||/[A-Z]/.test(n))}const Pp={};function T5(n){Object.assign(Pp,n)}const Fd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Na=new Set(Fd);function B1(n,{layout:e,layoutId:t}){return Na.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Pp[n]||n==="opacity")}const Hn=n=>!!(n&&n.getVelocity),E5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},I5=Fd.length;function P5(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<I5;a++){const u=Fd[a];if(n[u]!==void 0){const d=E5[u]||u;s+=`${d}(${n[u]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const $1=n=>e=>typeof e=="string"&&e.startsWith(n),z1=$1("--"),Rv=$1("var(--"),S5=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,C5=(n,e)=>e&&typeof n=="number"?e.transform(n):n,uo=(n,e,t)=>Math.min(Math.max(t,n),e),Va={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Jc={...Va,transform:n=>uo(0,1,n)},yf={...Va,default:1},Zc=n=>Math.round(n*1e5)/1e5,wm=/(-)?([\d]*\.?[\d])+/g,W1=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,A5=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ud(n){return typeof n=="string"}const jd=n=>({test:e=>Ud(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Us=jd("deg"),pi=jd("%"),Ve=jd("px"),b5=jd("vh"),x5=jd("vw"),UP={...pi,parse:n=>pi.parse(n)/100,transform:n=>pi.transform(n*100)},jP={...Va,transform:Math.round},H1={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,size:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,rotate:Us,rotateX:Us,rotateY:Us,rotateZ:Us,scale:yf,scaleX:yf,scaleY:yf,scaleZ:yf,skew:Us,skewX:Us,skewY:Us,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Jc,originX:UP,originY:UP,originZ:Ve,zIndex:jP,fillOpacity:Jc,strokeOpacity:Jc,numOctaves:jP};function Sw(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:u}=n;let d=!1,h=!1,m=!0;for(const g in e){const v=e[g];if(z1(g)){s[g]=v;continue}const E=H1[g],b=C5(v,E);if(Na.has(g)){if(d=!0,a[g]=b,!m)continue;v!==(E.default||0)&&(m=!1)}else g.startsWith("origin")?(h=!0,u[g]=b):i[g]=b}if(e.transform||(d||r?i.transform=P5(n.transform,t,m,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:E=0}=u;i.transformOrigin=`${g} ${v} ${E}`}}const Cw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function q1(n,e,t){for(const r in e)!Hn(e[r])&&!B1(r,t)&&(n[r]=e[r])}function R5({transformTemplate:n},e,t){return k.useMemo(()=>{const r=Cw();return Sw(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function k5(n,e,t){const r=n.style||{},i={};return q1(i,r,n),Object.assign(i,R5(n,e,t)),n.transformValues?n.transformValues(i):i}function D5(n,e,t){const r={},i=k5(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const N5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||N5.has(n)}let G1=n=>!Sp(n);function V5(n){n&&(G1=e=>e.startsWith("on")?!Sp(e):n(e))}try{V5(require("@emotion/is-prop-valid").default)}catch{}function O5(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(G1(i)||t===!0&&Sp(i)||!e&&!Sp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function BP(n,e,t){return typeof n=="string"?n:Ve.transform(e+t*n)}function M5(n,e,t){const r=BP(e,n.x,n.width),i=BP(t,n.y,n.height);return`${r} ${i}`}const L5={offset:"stroke-dashoffset",array:"stroke-dasharray"},F5={offset:"strokeDashoffset",array:"strokeDasharray"};function U5(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?L5:F5;n[s.offset]=Ve.transform(-r);const a=Ve.transform(e),u=Ve.transform(t);n[s.array]=`${a} ${u}`}function Aw(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},m,g,v){if(Sw(n,h,m,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:b,dimensions:R}=n;E.transform&&(R&&(b.transform=E.transform),delete E.transform),R&&(i!==void 0||s!==void 0||b.transform)&&(b.transformOrigin=M5(R,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),a!==void 0&&U5(E,a,u,d,!1)}const K1=()=>({...Cw(),attrs:{}}),bw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function j5(n,e,t,r){const i=k.useMemo(()=>{const s=K1();return Aw(s,e,{enableHardwareAcceleration:!1},bw(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};q1(s,n.style,n),i.style={...s,...i.style}}return i}function B5(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=(Pw(t)?j5:D5)(r,s,a,t),m={...O5(r,typeof t=="string",n),...d,ref:i},{children:g}=r,v=k.useMemo(()=>Hn(g)?g.get():g,[g]);return k.createElement(t,{...m,children:v})}}function Q1(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const Y1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function X1(n,e,t,r){Q1(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(Y1.has(i)?i:Tw(i),e.attrs[i])}function xw(n,e){const{style:t}=n,r={};for(const i in t)(Hn(t[i])||e.style&&Hn(e.style[i])||B1(i,n))&&(r[i]=t[i]);return r}function J1(n,e){const t=xw(n,e);for(const r in n)if(Hn(n[r])||Hn(e[r])){const i=Fd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function Rw(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function $5(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const Cp=n=>Array.isArray(n),z5=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),W5=n=>Cp(n)?n[n.length-1]||0:n;function Ff(n){const e=Hn(n)?n.get():n;return z5(e)?e.toValue():e}function H5({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:q5(r,i,s,n),renderState:e()};return t&&(a.mount=u=>t(r,u,a)),a}const Z1=n=>(e,t)=>{const r=k.useContext(gm),i=k.useContext(ww),s=()=>H5(n,e,r,i);return t?s():$5(s)};function q5(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=Ff(s[v]);let{initial:a,animate:u}=n;const d=_m(n),h=F1(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!vm(g)&&(Array.isArray(g)?g:[g]).forEach(E=>{const b=Rw(n,E);if(!b)return;const{transitionEnd:R,transition:C,...B}=b;for(const V in B){let M=B[V];if(Array.isArray(M)){const z=m?M.length-1:0;M=M[z]}M!==null&&(i[V]=M)}for(const V in R)i[V]=R[V]}),i}const jt=n=>n;class $P{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function G5(n){let e=new $P,t=new $P,r=0,i=!1,s=!1;const a=new WeakSet,u={schedule:(d,h=!1,m=!1)=>{const g=m&&i,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const m=e.order[h];m(d),a.has(m)&&(u.schedule(m),n())}i=!1,s&&(s=!1,u.process(d))}};return u}const vf=["prepare","read","update","preRender","render","postRender"],K5=40;function Q5(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=vf.reduce((g,v)=>(g[v]=G5(()=>t=!0),g),{}),a=g=>s[g].process(i),u=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,K5),1),i.timestamp=g,i.isProcessing=!0,vf.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(u))},d=()=>{t=!0,r=!0,i.isProcessing||n(u)};return{schedule:vf.reduce((g,v)=>{const E=s[v];return g[v]=(b,R=!1,C=!1)=>(t||d(),E.schedule(b,R,C)),g},{}),cancel:g=>vf.forEach(v=>s[v].cancel(g)),state:i,steps:s}}const{schedule:Tt,cancel:Qi,state:In,steps:Iy}=Q5(typeof requestAnimationFrame<"u"?requestAnimationFrame:jt,!0),Y5={useVisualState:Z1({scrapeMotionValuesFromProps:J1,createRenderState:K1,onMount:(n,e,{renderState:t,latestValues:r})=>{Tt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Tt.render(()=>{Aw(t,r,{enableHardwareAcceleration:!1},bw(e.tagName),n.transformTemplate),X1(e,t)})}})},X5={useVisualState:Z1({scrapeMotionValuesFromProps:xw,createRenderState:Cw})};function J5(n,{forwardMotionProps:e=!1},t,r){return{...Pw(n)?Y5:X5,preloadedFeatures:t,useRender:B5(e),createVisualElement:r,Component:n}}function Bi(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const eR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Tm(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const Z5=n=>e=>eR(e)&&n(e,Tm(e));function $i(n,e,t,r){return Bi(n,e,Z5(t),r)}const e9=(n,e)=>t=>e(n(t)),eo=(...n)=>n.reduce(e9);function tR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const zP=tR("dragHorizontal"),WP=tR("dragVertical");function nR(n){let e=!1;if(n==="y")e=WP();else if(n==="x")e=zP();else{const t=zP(),r=WP();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function rR(){const n=nR(!0);return n?(n(),!1):!0}class _o{constructor(e){this.isMounted=!1,this.node=e}update(){}}function HP(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||rR())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&Tt.update(()=>u[r](s,a))};return $i(n.current,t,i,{passive:!n.getProps()[r]})}class t9 extends _o{mount(){this.unmount=eo(HP(this.node,!0),HP(this.node,!1))}unmount(){}}class n9 extends _o{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=eo(Bi(this.node.current,"focus",()=>this.onFocus()),Bi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const iR=(n,e)=>e?n===e?!0:iR(n,e.parentElement):!1;function Py(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Tm(t))}class r9 extends _o{constructor(){super(...arguments),this.removeStartListeners=jt,this.removeEndListeners=jt,this.removeAccessibleListeners=jt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=$i(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Tt.update(()=>{!g&&!iR(this.node.current,u.target)?m&&m(u,d):h&&h(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=$i(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=eo(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Py("up",(d,h)=>{const{onTap:m}=this.node.getProps();m&&Tt.update(()=>m(d,h))})};this.removeEndListeners(),this.removeEndListeners=Bi(this.node.current,"keyup",a),Py("down",(u,d)=>{this.startPress(u,d)})},t=Bi(this.node.current,"keydown",e),r=()=>{this.isPressing&&Py("cancel",(s,a)=>this.cancelPress(s,a))},i=Bi(this.node.current,"blur",r);this.removeAccessibleListeners=eo(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Tt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!rR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Tt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=$i(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Bi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=eo(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const kv=new WeakMap,Sy=new WeakMap,i9=n=>{const e=kv.get(n.target);e&&e(n)},s9=n=>{n.forEach(i9)};function o9({root:n,...e}){const t=n||document;Sy.has(t)||Sy.set(t,{});const r=Sy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(s9,{root:n,...e})),r[i]}function a9(n,e,t){const r=o9(e);return kv.set(n,t),r.observe(n),()=>{kv.delete(n),r.unobserve(n)}}const l9={some:0,all:1};class u9 extends _o{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:l9[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(d)};return a9(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(c9(e,t))&&this.startObserver()}unmount(){}}function c9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const d9={inView:{Feature:u9},tap:{Feature:r9},focus:{Feature:n9},hover:{Feature:t9}};function sR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function h9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function f9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Em(n,e,t){const r=n.getProps();return Rw(r,e,t!==void 0?t:r.custom,h9(n),f9(n))}let kw=jt;const fa=n=>n*1e3,zi=n=>n/1e3,p9={current:!1},oR=n=>Array.isArray(n)&&typeof n[0]=="number";function aR(n){return!!(!n||typeof n=="string"&&lR[n]||oR(n)||Array.isArray(n)&&n.every(aR))}const jc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,lR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jc([0,.65,.55,1]),circOut:jc([.55,0,1,.45]),backIn:jc([.31,.01,.66,-.59]),backOut:jc([.33,1.53,.69,.99])};function uR(n){if(n)return oR(n)?jc(n):Array.isArray(n)?n.map(uR):lR[n]}function m9(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:u,times:d}={}){const h={[e]:t};d&&(h.offset=d);const m=uR(u);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function g9(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const cR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,y9=1e-7,v9=12;function _9(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=cR(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>y9&&++u<v9);return a}function Bd(n,e,t,r){if(n===e&&t===r)return jt;const i=s=>_9(s,0,1,n,t);return s=>s===0||s===1?s:cR(i(s),e,r)}const w9=Bd(.42,0,1,1),T9=Bd(0,0,.58,1),dR=Bd(.42,0,.58,1),E9=n=>Array.isArray(n)&&typeof n[0]!="number",hR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,fR=n=>e=>1-n(1-e),Dw=n=>1-Math.sin(Math.acos(n)),pR=fR(Dw),I9=hR(Dw),mR=Bd(.33,1.53,.69,.99),Nw=fR(mR),P9=hR(Nw),S9=n=>(n*=2)<1?.5*Nw(n):.5*(2-Math.pow(2,-10*(n-1))),C9={linear:jt,easeIn:w9,easeInOut:dR,easeOut:T9,circIn:Dw,circInOut:I9,circOut:pR,backIn:Nw,backInOut:P9,backOut:mR,anticipate:S9},qP=n=>{if(Array.isArray(n)){kw(n.length===4);const[e,t,r,i]=n;return Bd(e,t,r,i)}else if(typeof n=="string")return C9[n];return n},Vw=(n,e)=>t=>!!(Ud(t)&&A5.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),gR=(n,e,t)=>r=>{if(!Ud(r))return r;const[i,s,a,u]=r.match(wm);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},A9=n=>uo(0,255,n),Cy={...Va,transform:n=>Math.round(A9(n))},la={test:Vw("rgb","red"),parse:gR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Cy.transform(n)+", "+Cy.transform(e)+", "+Cy.transform(t)+", "+Zc(Jc.transform(r))+")"};function b9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Dv={test:Vw("#"),parse:b9,transform:la.transform},Ul={test:Vw("hsl","hue"),parse:gR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+pi.transform(Zc(e))+", "+pi.transform(Zc(t))+", "+Zc(Jc.transform(r))+")"},Dn={test:n=>la.test(n)||Dv.test(n)||Ul.test(n),parse:n=>la.test(n)?la.parse(n):Ul.test(n)?Ul.parse(n):Dv.parse(n),transform:n=>Ud(n)?n:n.hasOwnProperty("red")?la.transform(n):Ul.transform(n)},Rt=(n,e,t)=>-t*n+t*e+n;function Ay(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function x9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;i=Ay(d,u,n+1/3),s=Ay(d,u,n),a=Ay(d,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const by=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},R9=[Dv,la,Ul],k9=n=>R9.find(e=>e.test(n));function GP(n){const e=k9(n);let t=e.parse(n);return e===Ul&&(t=x9(t)),t}const yR=(n,e)=>{const t=GP(n),r=GP(e),i={...t};return s=>(i.red=by(t.red,r.red,s),i.green=by(t.green,r.green,s),i.blue=by(t.blue,r.blue,s),i.alpha=Rt(t.alpha,r.alpha,s),la.transform(i))};function D9(n){var e,t;return isNaN(n)&&Ud(n)&&(((e=n.match(wm))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(W1))===null||t===void 0?void 0:t.length)||0)>0}const vR={regex:S5,countKey:"Vars",token:"${v}",parse:jt},_R={regex:W1,countKey:"Colors",token:"${c}",parse:Dn.parse},wR={regex:wm,countKey:"Numbers",token:"${n}",parse:Va.parse};function xy(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Ap(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&xy(t,vR),xy(t,_R),xy(t,wR),t}function TR(n){return Ap(n).values}function ER(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Ap(n),s=e.length;return a=>{let u=i;for(let d=0;d<s;d++)d<r?u=u.replace(vR.token,a[d]):d<r+t?u=u.replace(_R.token,Dn.transform(a[d])):u=u.replace(wR.token,Zc(a[d]));return u}}const N9=n=>typeof n=="number"?0:n;function V9(n){const e=TR(n);return ER(n)(e.map(N9))}const co={test:D9,parse:TR,createTransformer:ER,getAnimatableNone:V9},IR=(n,e)=>t=>`${t>0?e:n}`;function PR(n,e){return typeof n=="number"?t=>Rt(n,e,t):Dn.test(n)?yR(n,e):n.startsWith("var(")?IR(n,e):CR(n,e)}const SR=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>PR(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},O9=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=PR(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},CR=(n,e)=>{const t=co.createTransformer(e),r=Ap(n),i=Ap(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?eo(SR(r.values,i.values),t):IR(n,e)},Id=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},KP=(n,e)=>t=>Rt(n,e,t);function M9(n){return typeof n=="number"?KP:typeof n=="string"?Dn.test(n)?yR:CR:Array.isArray(n)?SR:typeof n=="object"?O9:KP}function L9(n,e,t){const r=[],i=t||M9(n[0]),s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||jt:e;u=eo(d,u)}r.push(u)}return r}function AR(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(kw(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=L9(e,r,i),u=a.length,d=h=>{let m=0;if(u>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const g=Id(n[m],n[m+1],h);return a[m](g)};return t?h=>d(uo(n[0],n[s-1],h)):d}function F9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Id(0,e,r);n.push(Rt(t,1,i))}}function U9(n){const e=[0];return F9(e,n.length-1),e}function j9(n,e){return n.map(t=>t*e)}function B9(n,e){return n.map(()=>e||dR).splice(0,n.length-1)}function bp({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=E9(r)?r.map(qP):qP(r),s={done:!1,value:e[0]},a=j9(t&&t.length===e.length?t:U9(e),n),u=AR(a,e,{ease:Array.isArray(i)?i:B9(e,i)});return{calculatedDuration:n,next:d=>(s.value=u(d),s.done=d>=n,s)}}function bR(n,e){return e?n*(1e3/e):0}const $9=5;function xR(n,e,t){const r=Math.max(e-$9,0);return bR(t-n(r),e-r)}const Ry=.001,z9=.01,W9=10,H9=.05,q9=1;function G9({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=uo(H9,q9,a),n=uo(z9,W9,zi(n)),a<1?(i=h=>{const m=h*a,g=m*n,v=m-t,E=Nv(h,a),b=Math.exp(-g);return Ry-v/E*b},s=h=>{const g=h*a*n,v=g*t+t,E=Math.pow(a,2)*Math.pow(h,2)*n,b=Math.exp(-g),R=Nv(Math.pow(h,2),a);return(-i(h)+Ry>0?-1:1)*((v-E)*b)/R}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-Ry+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,d=Q9(i,s,u);if(n=fa(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const K9=12;function Q9(n,e,t){let r=t;for(let i=1;i<K9;i++)r=r-n(r)/e(r);return r}function Nv(n,e){return n*Math.sqrt(1-e*e)}const Y9=["duration","bounce"],X9=["stiffness","damping","mass"];function QP(n,e){return e.some(t=>n[t]!==void 0)}function J9(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!QP(n,X9)&&QP(n,Y9)){const t=G9(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function RR({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:v}=J9({...r,velocity:-zi(r.velocity||0)}),E=g||0,b=d/(2*Math.sqrt(u*h)),R=s-i,C=zi(Math.sqrt(u/h)),B=Math.abs(R)<5;t||(t=B?.01:2),e||(e=B?.005:.5);let V;if(b<1){const M=Nv(C,b);V=z=>{const te=Math.exp(-b*C*z);return s-te*((E+b*C*R)/M*Math.sin(M*z)+R*Math.cos(M*z))}}else if(b===1)V=M=>s-Math.exp(-C*M)*(R+(E+C*R)*M);else{const M=C*Math.sqrt(b*b-1);V=z=>{const te=Math.exp(-b*C*z),Z=Math.min(M*z,300);return s-te*((E+b*C*R)*Math.sinh(Z)+M*R*Math.cosh(Z))/M}}return{calculatedDuration:v&&m||null,next:M=>{const z=V(M);if(v)a.done=M>=m;else{let te=E;M!==0&&(b<1?te=xR(V,M,z):te=0);const Z=Math.abs(te)<=t,x=Math.abs(s-z)<=e;a.done=Z&&x}return a.value=a.done?s:z,a}}}function YP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],v={done:!1,value:g},E=S=>u!==void 0&&S<u||d!==void 0&&S>d,b=S=>u===void 0?d:d===void 0||Math.abs(u-S)<Math.abs(d-S)?u:d;let R=t*e;const C=g+R,B=a===void 0?C:a(C);B!==C&&(R=B-g);const V=S=>-R*Math.exp(-S/r),M=S=>B+V(S),z=S=>{const D=V(S),F=M(S);v.done=Math.abs(D)<=h,v.value=v.done?B:F};let te,Z;const x=S=>{E(v.value)&&(te=S,Z=RR({keyframes:[v.value,b(v.value)],velocity:xR(M,S,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return x(0),{calculatedDuration:null,next:S=>{let D=!1;return!Z&&te===void 0&&(D=!0,z(S),x(S)),te!==void 0&&S>te?Z.next(S-te):(!D&&z(S),v)}}}const Z9=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Tt.update(e,!0),stop:()=>Qi(e),now:()=>In.isProcessing?In.timestamp:performance.now()}},XP=2e4;function JP(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<XP;)e+=t,r=n.next(e);return e>=XP?1/0:e}const e$={decay:YP,inertia:YP,tween:bp,keyframes:bp,spring:RR};function xp({autoplay:n=!0,delay:e=0,driver:t=Z9,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:m,onUpdate:g,...v}){let E=1,b=!1,R,C;const B=()=>{C=new Promise(N=>{R=N})};B();let V;const M=e$[i]||bp;let z;M!==bp&&typeof r[0]!="number"&&(z=AR([0,100],r,{clamp:!1}),r=[0,100]);const te=M({...v,keyframes:r});let Z;u==="mirror"&&(Z=M({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let x="idle",S=null,D=null,F=null;te.calculatedDuration===null&&s&&(te.calculatedDuration=JP(te));const{calculatedDuration:L}=te;let U=1/0,P=1/0;L!==null&&(U=L+a,P=U*(s+1)-a);let Y=0;const se=N=>{if(D===null)return;E>0&&(D=Math.min(D,N)),E<0&&(D=Math.min(N-P/E,D)),S!==null?Y=S:Y=Math.round(N-D)*E;const K=Y-e*(E>=0?1:-1),he=E>=0?K<0:K>P;Y=Math.max(K,0),x==="finished"&&S===null&&(Y=P);let pe=Y,me=te;if(s){const He=Math.min(Y,P)/U;let ct=Math.floor(He),Xt=He%1;!Xt&&He>=1&&(Xt=1),Xt===1&&ct--,ct=Math.min(ct,s+1),ct%2&&(u==="reverse"?(Xt=1-Xt,a&&(Xt-=a/U)):u==="mirror"&&(me=Z)),pe=uo(0,1,Xt)*U}const Se=he?{done:!1,value:r[0]}:me.next(pe);z&&(Se.value=z(Se.value));let{done:Me}=Se;!he&&L!==null&&(Me=E>=0?Y>=P:Y<=0);const Be=S===null&&(x==="finished"||x==="running"&&Me);return g&&g(Se.value),Be&&ee(),Se},re=()=>{V&&V.stop(),V=void 0},oe=()=>{x="idle",re(),R(),B(),D=F=null},ee=()=>{x="finished",m&&m(),re(),R()},de=()=>{if(b)return;V||(V=t(se));const N=V.now();d&&d(),S!==null?D=N-S:(!D||x==="finished")&&(D=N),x==="finished"&&B(),F=D,S=null,x="running",V.start()};n&&de();const ne={then(N,K){return C.then(N,K)},get time(){return zi(Y)},set time(N){N=fa(N),Y=N,S!==null||!V||E===0?S=N:D=V.now()-N/E},get duration(){const N=te.calculatedDuration===null?JP(te):te.calculatedDuration;return zi(N)},get speed(){return E},set speed(N){N===E||!V||(E=N,ne.time=zi(Y))},get state(){return x},play:de,pause:()=>{x="paused",S=Y},stop:()=>{b=!0,x!=="idle"&&(x="idle",h&&h(),oe())},cancel:()=>{F!==null&&se(F),oe()},complete:()=>{x="finished"},sample:N=>(D=0,se(N))};return ne}function t$(n){let e;return()=>(e===void 0&&(e=n()),e)}const n$=t$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),r$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),_f=10,i$=2e4,s$=(n,e)=>e.type==="spring"||n==="backgroundColor"||!aR(e.ease);function o$(n,e,{onUpdate:t,onComplete:r,...i}){if(!(n$()&&r$.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,d,h=!1;const m=()=>{d=new Promise(M=>{u=M})};m();let{keyframes:g,duration:v=300,ease:E,times:b}=i;if(s$(e,i)){const M=xp({...i,repeat:0,delay:0});let z={done:!1,value:g[0]};const te=[];let Z=0;for(;!z.done&&Z<i$;)z=M.sample(Z),te.push(z.value),Z+=_f;b=void 0,g=te,v=Z-_f,E="linear"}const R=m9(n.owner.current,e,g,{...i,duration:v,ease:E,times:b}),C=()=>{h=!1,R.cancel()},B=()=>{h=!0,Tt.update(C),u(),m()};return R.onfinish=()=>{h||(n.set(g9(g,i)),r&&r(),B())},{then(M,z){return d.then(M,z)},attachTimeline(M){return R.timeline=M,R.onfinish=null,jt},get time(){return zi(R.currentTime||0)},set time(M){R.currentTime=fa(M)},get speed(){return R.playbackRate},set speed(M){R.playbackRate=M},get duration(){return zi(v)},play:()=>{a||(R.play(),Qi(C))},pause:()=>R.pause(),stop:()=>{if(a=!0,R.playState==="idle")return;const{currentTime:M}=R;if(M){const z=xp({...i,autoplay:!1});n.setWithVelocity(z.sample(M-_f).value,z.sample(M).value,_f)}B()},complete:()=>{h||R.finish()},cancel:B}}function a$({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:jt,pause:jt,stop:jt,then:s=>(s(),Promise.resolve()),cancel:jt,complete:jt});return e?xp({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const l$={type:"spring",stiffness:500,damping:25,restSpeed:10},u$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),c$={type:"keyframes",duration:.8},d$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h$=(n,{keyframes:e})=>e.length>2?c$:Na.has(n)?n.startsWith("scale")?u$(e[1]):l$:d$,Vv=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(co.test(e)||e==="0")&&!e.startsWith("url(")),f$=new Set(["brightness","contrast","saturate","opacity"]);function p$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(wm)||[];if(!r)return n;const i=t.replace(r,"");let s=f$.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const m$=/([a-z-]*)\(.*?\)/g,Ov={...co,getAnimatableNone:n=>{const e=n.match(m$);return e?e.map(p$).join(" "):n}},g$={...H1,color:Dn,backgroundColor:Dn,outlineColor:Dn,fill:Dn,stroke:Dn,borderColor:Dn,borderTopColor:Dn,borderRightColor:Dn,borderBottomColor:Dn,borderLeftColor:Dn,filter:Ov,WebkitFilter:Ov},Ow=n=>g$[n];function kR(n,e){let t=Ow(n);return t!==Ov&&(t=co),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const DR=n=>/^0[^.\s]+$/.test(n);function y$(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||DR(n)}function v$(n,e,t,r){const i=Vv(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let u;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),y$(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(u=s[h]);if(i&&d.length&&u)for(let h=0;h<d.length;h++){const m=d[h];s[m]=kR(e,u)}return s}function _$({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:d,elapsed:h,...m}){return!!Object.keys(m).length}function Mw(n,e){return n[e]||n.default||n}const w$={skipAnimations:!1},Lw=(n,e,t,r={})=>i=>{const s=Mw(r,n)||{},a=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-fa(a);const d=v$(e,n,t,s),h=d[0],m=d[d.length-1],g=Vv(n,h),v=Vv(n,m);let E={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:b=>{e.set(b),s.onUpdate&&s.onUpdate(b)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(_$(s)||(E={...E,...h$(n,E)}),E.duration&&(E.duration=fa(E.duration)),E.repeatDelay&&(E.repeatDelay=fa(E.repeatDelay)),!g||!v||p9.current||s.type===!1||w$.skipAnimations)return a$(E);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=o$(e,n,E);if(b)return b}return xp(E)};function Rp(n){return!!(Hn(n)&&n.add)}const NR=n=>/^\-?\d*\.?\d+$/.test(n);function Fw(n,e){n.indexOf(e)===-1&&n.push(e)}function Uw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class jw{constructor(){this.subscriptions=[]}add(e){return Fw(this.subscriptions,e),()=>Uw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const T$=n=>!isNaN(parseFloat(n));class E${constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=In;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Tt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Tt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=T$(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jw);const r=this.events[e].add(t);return e==="change"?()=>{r(),Tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?bR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pu(n,e){return new E$(n,e)}const VR=n=>e=>e.test(n),I$={test:n=>n==="auto",parse:n=>n},OR=[Va,Ve,pi,Us,x5,b5,I$],kc=n=>OR.find(VR(n)),P$=[...OR,Dn,co],S$=n=>P$.find(VR(n));function C$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,pu(t))}function A$(n,e){const t=Em(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const u=W5(s[a]);C$(n,a,u)}}function b$(n,e,t){var r,i;const s=Object.keys(e).filter(u=>!n.hasValue(u)),a=s.length;if(a)for(let u=0;u<a;u++){const d=s[u],h=e[d];let m=null;Array.isArray(h)&&(m=h[0]),m===null&&(m=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),m!=null&&(typeof m=="string"&&(NR(m)||DR(m))?m=parseFloat(m):!S$(m)&&co.test(h)&&(m=kR(d,h)),n.addValue(d,pu(m,{owner:n})),t[d]===void 0&&(t[d]=m),m!==null&&n.setBaseTarget(d,m))}}function x$(n,e){return e?(e[n]||e.default||e).from:void 0}function R$(n,e,t){const r={};for(const i in n){const s=x$(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function k$({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function D$(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function MR(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in u){const v=n.getValue(g),E=u[g];if(!v||E===void 0||m&&k$(m,g))continue;const b={delay:t,elapsed:0,...Mw(s||{},g)};if(window.HandoffAppearAnimations){const B=n.getProps()[L1];if(B){const V=window.HandoffAppearAnimations(B,g,v,Tt);V!==null&&(b.elapsed=V,b.isHandoff=!0)}}let R=!b.isHandoff&&!D$(v,E);if(b.type==="spring"&&(v.getVelocity()||b.velocity)&&(R=!1),v.animation&&(R=!1),R)continue;v.start(Lw(g,v,E,n.shouldReduceMotion&&Na.has(g)?{type:!1}:b));const C=v.animation;Rp(d)&&(d.add(g),C.then(()=>d.remove(g))),h.push(C)}return a&&Promise.all(h).then(()=>{a&&A$(n,a)}),h}function Mv(n,e,t={}){const r=Em(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(MR(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return N$(n,e,h+d,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function N$(n,e,t=0,r=0,i=1,s){const a=[],u=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(V$).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(Mv(h,e,{...s,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function V$(n,e){return n.sortNodePosition(e)}function O$(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Mv(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=Mv(n,e,t);else{const i=typeof e=="function"?Em(n,e,t.custom):e;r=Promise.all(MR(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const M$=[...Ew].reverse(),L$=Ew.length;function F$(n){return e=>Promise.all(e.map(({animation:t,options:r})=>O$(n,t,r)))}function U$(n){let e=F$(n);const t=B$();let r=!0;const i=(d,h)=>{const m=Em(n,h);if(m){const{transition:g,transitionEnd:v,...E}=m;d={...d,...E,...v}}return d};function s(d){e=d(n)}function a(d,h){const m=n.getProps(),g=n.getVariantContext(!0)||{},v=[],E=new Set;let b={},R=1/0;for(let B=0;B<L$;B++){const V=M$[B],M=t[V],z=m[V]!==void 0?m[V]:g[V],te=Td(z),Z=V===h?M.isActive:null;Z===!1&&(R=B);let x=z===g[V]&&z!==m[V]&&te;if(x&&r&&n.manuallyAnimateOnMount&&(x=!1),M.protectedKeys={...b},!M.isActive&&Z===null||!z&&!M.prevProp||vm(z)||typeof z=="boolean")continue;let D=j$(M.prevProp,z)||V===h&&M.isActive&&!x&&te||B>R&&te,F=!1;const L=Array.isArray(z)?z:[z];let U=L.reduce(i,{});Z===!1&&(U={});const{prevResolvedValues:P={}}=M,Y={...P,...U},se=re=>{D=!0,E.has(re)&&(F=!0,E.delete(re)),M.needsAnimating[re]=!0};for(const re in Y){const oe=U[re],ee=P[re];if(b.hasOwnProperty(re))continue;let de=!1;Cp(oe)&&Cp(ee)?de=!sR(oe,ee):de=oe!==ee,de?oe!==void 0?se(re):E.add(re):oe!==void 0&&E.has(re)?se(re):M.protectedKeys[re]=!0}M.prevProp=z,M.prevResolvedValues=U,M.isActive&&(b={...b,...U}),r&&n.blockInitialAnimation&&(D=!1),D&&(!x||F)&&v.push(...L.map(re=>({animation:re,options:{type:V,...d}})))}if(E.size){const B={};E.forEach(V=>{const M=n.getBaseTarget(V);M!==void 0&&(B[V]=M)}),v.push({animation:B})}let C=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(v):Promise.resolve()}function u(d,h,m){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(E=>{var b;return(b=E.animationState)===null||b===void 0?void 0:b.setActive(d,h)}),t[d].isActive=h;const v=a(m,d);for(const E in t)t[E].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t}}function j$(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!sR(e,n):!1}function Qo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B$(){return{animate:Qo(!0),whileInView:Qo(),whileHover:Qo(),whileTap:Qo(),whileDrag:Qo(),whileFocus:Qo(),exit:Qo()}}class $$ extends _o{constructor(e){super(e),e.animationState||(e.animationState=U$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),vm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let z$=0;class W$ extends _o{constructor(){super(...arguments),this.id=z$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const H$={animation:{Feature:$$},exit:{Feature:W$}},ZP=(n,e)=>Math.abs(n-e);function q$(n,e){const t=ZP(n.x,e.x),r=ZP(n.y,e.y);return Math.sqrt(t**2+r**2)}class LR{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Dy(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,E=q$(g.offset,{x:0,y:0})>=3;if(!v&&!E)return;const{point:b}=g,{timestamp:R}=In;this.history.push({...b,timestamp:R});const{onStart:C,onMove:B}=this.handlers;v||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=ky(v,this.transformPagePoint),Tt.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:E,onSessionEnd:b,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Dy(g.type==="pointercancel"?this.lastMoveEventInfo:ky(v,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,C),b&&b(g,C)},!eR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=Tm(e),u=ky(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=In;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,Dy(u,this.history)),this.removeListeners=eo($i(this.contextWindow,"pointermove",this.handlePointerMove),$i(this.contextWindow,"pointerup",this.handlePointerUp),$i(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qi(this.updatePoint)}}function ky(n,e){return e?{point:e(n.point)}:n}function eS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Dy({point:n},e){return{point:n,delta:eS(n,FR(e)),offset:eS(n,G$(e)),velocity:K$(e,.1)}}function G$(n){return n[0]}function FR(n){return n[n.length-1]}function K$(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=FR(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>fa(e)));)t--;if(!r)return{x:0,y:0};const s=zi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ar(n){return n.max-n.min}function Lv(n,e=0,t=.01){return Math.abs(n-e)<=t}function tS(n,e,t,r=.5){n.origin=r,n.originPoint=Rt(e.min,e.max,n.origin),n.scale=ar(t)/ar(e),(Lv(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Rt(t.min,t.max,n.origin)-n.originPoint,(Lv(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ed(n,e,t,r){tS(n.x,e.x,t.x,r?r.originX:void 0),tS(n.y,e.y,t.y,r?r.originY:void 0)}function nS(n,e,t){n.min=t.min+e.min,n.max=n.min+ar(e)}function Q$(n,e,t){nS(n.x,e.x,t.x),nS(n.y,e.y,t.y)}function rS(n,e,t){n.min=e.min-t.min,n.max=n.min+ar(e)}function td(n,e,t){rS(n.x,e.x,t.x),rS(n.y,e.y,t.y)}function Y$(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Rt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Rt(t,n,r.max):Math.min(n,t)),n}function iS(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function X$(n,{top:e,left:t,bottom:r,right:i}){return{x:iS(n.x,t,i),y:iS(n.y,e,r)}}function sS(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function J$(n,e){return{x:sS(n.x,e.x),y:sS(n.y,e.y)}}function Z$(n,e){let t=.5;const r=ar(n),i=ar(e);return i>r?t=Id(e.min,e.max-r,n.min):r>i&&(t=Id(n.min,n.max-i,e.min)),uo(0,1,t)}function ez(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Fv=.35;function tz(n=Fv){return n===!1?n=0:n===!0&&(n=Fv),{x:oS(n,"left","right"),y:oS(n,"top","bottom")}}function oS(n,e,t){return{min:aS(n,e),max:aS(n,t)}}function aS(n,e){return typeof n=="number"?n:n[e]||0}const lS=()=>({translate:0,scale:1,origin:0,originPoint:0}),jl=()=>({x:lS(),y:lS()}),uS=()=>({min:0,max:0}),Gt=()=>({x:uS(),y:uS()});function yr(n){return[n("x"),n("y")]}function UR({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function nz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function rz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Ny(n){return n===void 0||n===1}function Uv({scale:n,scaleX:e,scaleY:t}){return!Ny(n)||!Ny(e)||!Ny(t)}function ea(n){return Uv(n)||jR(n)||n.z||n.rotate||n.rotateX||n.rotateY}function jR(n){return cS(n.x)||cS(n.y)}function cS(n){return n&&n!=="0%"}function kp(n,e,t){const r=n-t,i=e*r;return t+i}function dS(n,e,t,r,i){return i!==void 0&&(n=kp(n,i,r)),kp(n,t,r)+e}function jv(n,e=0,t=1,r,i){n.min=dS(n.min,e,t,r,i),n.max=dS(n.max,e,t,r,i)}function BR(n,{x:e,y:t}){jv(n.x,e.translate,e.scale,e.originPoint),jv(n.y,t.translate,t.scale,t.originPoint)}function iz(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bl(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,BR(n,a)),r&&ea(s.latestValues)&&Bl(n,s.latestValues))}e.x=hS(e.x),e.y=hS(e.y)}function hS(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function js(n,e){n.min=n.min+e,n.max=n.max+e}function fS(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=Rt(n.min,n.max,s);jv(n,e[t],e[r],a,e.scale)}const sz=["x","scaleX","originX"],oz=["y","scaleY","originY"];function Bl(n,e){fS(n.x,e,sz),fS(n.y,e,oz)}function $R(n,e){return UR(rz(n.getBoundingClientRect(),e))}function az(n,e,t){const r=$R(n,t),{scroll:i}=e;return i&&(js(r.x,i.offset.x),js(r.y,i.offset.y)),r}const zR=({current:n})=>n?n.ownerDocument.defaultView:null,lz=new WeakMap;class uz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Tm(m,"page").point)},s=(m,g)=>{const{drag:v,dragPropagation:E,onDragStart:b}=this.getProps();if(v&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=nR(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yr(C=>{let B=this.getAxisMotionValue(C).get()||0;if(pi.test(B)){const{projection:V}=this.visualElement;if(V&&V.layout){const M=V.layout.layoutBox[C];M&&(B=ar(M)*(parseFloat(B)/100))}}this.originPoint[C]=B}),b&&Tt.update(()=>b(m,g),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:E,onDirectionLock:b,onDrag:R}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:C}=g;if(E&&this.currentDirection===null){this.currentDirection=cz(C),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),R&&R(m,g)},u=(m,g)=>this.stop(m,g),d=()=>yr(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new LR(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:zR(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Tt.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!wf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Y$(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Fl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=X$(i.layoutBox,t):this.constraints=!1,this.elastic=tz(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=ez(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Fl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=az(r,i.root,this.visualElement.getTransformPagePoint());let a=J$(i.layout.layoutBox,s);if(t){const u=t(nz(a));this.hasMutatedConstraints=!!u,u&&(a=UR(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=yr(m=>{if(!wf(m,t,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const v=i?200:1e6,E=i?40:1e7,b={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,b)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Lw(e,r,0,t))}stopAnimation(){yr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){yr(t=>{const{drag:r}=this.getProps();if(!wf(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t];s.set(e[t]-Rt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Fl(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yr(a=>{const u=this.getAxisMotionValue(a);if(u){const d=u.get();i[a]=Z$({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),yr(a=>{if(!wf(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(Rt(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;lz.set(this.visualElement,this);const e=this.visualElement.current,t=$i(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Fl(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=Bi(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(yr(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Fv,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function wf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function cz(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class dz extends _o{constructor(e){super(e),this.removeGroupControls=jt,this.removeListeners=jt,this.controls=new uz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jt}unmount(){this.removeGroupControls(),this.removeListeners()}}const pS=n=>(e,t)=>{n&&Tt.update(()=>n(e,t))};class hz extends _o{constructor(){super(...arguments),this.removePointerDownListener=jt}onPointerDown(e){this.session=new LR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pS(e),onStart:pS(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Tt.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=$i(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function fz(){const n=k.useContext(ww);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=k.useId();return k.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Uf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mS(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Dc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ve.test(n))n=parseFloat(n);else return n;const t=mS(n,e.target.x),r=mS(n,e.target.y);return`${t}% ${r}%`}},pz={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=co.parse(n);if(i.length>5)return r;const s=co.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=d;const h=Rt(u,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class mz extends en.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;T5(gz),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Uf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Tt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WR(n){const[e,t]=fz(),r=k.useContext(U1);return en.createElement(mz,{...n,layoutGroup:r,switchLayoutGroup:k.useContext(j1),isPresent:e,safeToRemove:t})}const gz={borderRadius:{...Dc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dc,borderTopRightRadius:Dc,borderBottomLeftRadius:Dc,borderBottomRightRadius:Dc,boxShadow:pz},HR=["TopLeft","TopRight","BottomLeft","BottomRight"],yz=HR.length,gS=n=>typeof n=="string"?parseFloat(n):n,yS=n=>typeof n=="number"||Ve.test(n);function vz(n,e,t,r,i,s){i?(n.opacity=Rt(0,t.opacity!==void 0?t.opacity:1,_z(r)),n.opacityExit=Rt(e.opacity!==void 0?e.opacity:1,0,wz(r))):s&&(n.opacity=Rt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<yz;a++){const u=`border${HR[a]}Radius`;let d=vS(e,u),h=vS(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||yS(d)===yS(h)?(n[u]=Math.max(Rt(gS(d),gS(h),r),0),(pi.test(h)||pi.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=Rt(e.rotate||0,t.rotate||0,r))}function vS(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const _z=qR(0,.5,pR),wz=qR(.5,.95,jt);function qR(n,e,t){return r=>r<n?0:r>e?1:t(Id(n,e,r))}function _S(n,e){n.min=e.min,n.max=e.max}function gr(n,e){_S(n.x,e.x),_S(n.y,e.y)}function wS(n,e,t,r,i){return n-=e,n=kp(n,1/t,r),i!==void 0&&(n=kp(n,1/i,r)),n}function Tz(n,e=0,t=1,r=.5,i,s=n,a=n){if(pi.test(e)&&(e=parseFloat(e),e=Rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Rt(s.min,s.max,r);n===s&&(u-=e),n.min=wS(n.min,e,t,u,i),n.max=wS(n.max,e,t,u,i)}function TS(n,e,[t,r,i],s,a){Tz(n,e[t],e[r],e[i],e.scale,s,a)}const Ez=["x","scaleX","originX"],Iz=["y","scaleY","originY"];function ES(n,e,t,r){TS(n.x,e,Ez,t?t.x:void 0,r?r.x:void 0),TS(n.y,e,Iz,t?t.y:void 0,r?r.y:void 0)}function IS(n){return n.translate===0&&n.scale===1}function GR(n){return IS(n.x)&&IS(n.y)}function Pz(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function KR(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function PS(n){return ar(n.x)/ar(n.y)}class Sz{constructor(){this.members=[]}add(e){Fw(this.members,e),e.scheduleRender()}remove(e){if(Uw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SS(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:m}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const Cz=(n,e)=>n.depth-e.depth;class Az{constructor(){this.children=[],this.isDirty=!1}add(e){Fw(this.children,e),this.isDirty=!0}remove(e){Uw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Cz),this.isDirty=!1,this.children.forEach(e)}}function bz(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Qi(r),n(s-e))};return Tt.read(r,!0),()=>Qi(r)}function xz(n){window.MotionDebug&&window.MotionDebug.record(n)}function Rz(n){return n instanceof SVGElement&&n.tagName!=="svg"}function kz(n,e,t){const r=Hn(n)?n:pu(n);return r.start(Lw("",r,e,t)),r.animation}const CS=["","X","Y","Z"],Dz={visibility:"hidden"},AS=1e3;let Nz=0;const ta={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function QR({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=Nz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ta.totalNodes=ta.resolvedTargetDeltas=ta.recalculatedProjection=0,this.nodes.forEach(Mz),this.nodes.forEach(Bz),this.nodes.forEach($z),this.nodes.forEach(Lz),xz(ta)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Az)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new jw),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Rz(a),this.instance=a;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=bz(v,250),Uf.hasAnimatedSinceResize&&(Uf.hasAnimatedSinceResize=!1,this.nodes.forEach(xS))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:E,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||m.getDefaultTransition()||Gz,{onLayoutAnimationStart:C,onLayoutAnimationComplete:B}=m.getProps(),V=!this.targetLayout||!KR(this.targetLayout,b)||E,M=!v&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||v&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,M);const z={...Mw(R,"layout"),onPlay:C,onComplete:B};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else v||xS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zz),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bS);return}this.isUpdating||this.nodes.forEach(Uz),this.isUpdating=!1,this.nodes.forEach(jz),this.nodes.forEach(Vz),this.nodes.forEach(Oz),this.clearAllSnapshots();const u=performance.now();In.delta=uo(0,1e3/60,u-In.timestamp),In.timestamp=u,In.isProcessing=!0,Iy.update.process(In),Iy.preRender.process(In),Iy.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Fz),this.sharedNodes.forEach(Wz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!GR(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||ea(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),Kz(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Gt();const u=a.measureViewportBox(),{scroll:d}=this.root;return d&&(js(u.x,d.offset.x),js(u.y,d.offset.y)),u}removeElementScroll(a){const u=Gt();gr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:g}=h;if(h!==this.root&&m&&g.layoutScroll){if(m.isRoot){gr(u,a);const{scroll:v}=this.root;v&&(js(u.x,-v.offset.x),js(u.y,-v.offset.y))}js(u.x,m.offset.x),js(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const d=Gt();gr(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Bl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ea(m.latestValues)&&Bl(d,m.latestValues)}return ea(this.latestValues)&&Bl(d,this.latestValues),d}removeTransform(a){const u=Gt();gr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ea(h.latestValues))continue;Uv(h.latestValues)&&h.updateSnapshot();const m=Gt(),g=h.measurePageBox();gr(m,g),ES(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ea(this.latestValues)&&ES(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),td(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Gt(),this.targetWithTransforms=Gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Q$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gr(this.target,this.layout.layoutBox),BR(this.target,this.targetDelta)):gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),td(this.relativeTargetOrigin,this.target,E.target),gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ta.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Uv(this.parent.latestValues)||jR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===In.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;gr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,E=this.treeScale.y;iz(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:b}=u;if(!b){this.projectionTransform&&(this.projectionDelta=jl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=jl(),this.projectionDeltaWithTransform=jl());const R=this.projectionTransform;ed(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=SS(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==v||this.treeScale.y!==E)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),ta.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Gt(),E=d?d.source:void 0,b=this.layout?this.layout.source:void 0,R=E!==b,C=this.getStack(),B=!C||C.members.length<=1,V=!!(R&&!B&&this.options.crossfade===!0&&!this.path.some(qz));this.animationProgress=0;let M;this.mixTargetDelta=z=>{const te=z/1e3;RS(g.x,a.x,te),RS(g.y,a.y,te),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(td(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hz(this.relativeTarget,this.relativeTargetOrigin,v,te),M&&Pz(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Gt()),gr(M,this.relativeTarget)),R&&(this.animationValues=m,vz(m,h,this.latestValues,te,V,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tt.update(()=>{Uf.hasAnimatedSinceResize=!0,this.currentAnimation=kz(0,AS,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:m}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&YR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Gt();const g=ar(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=ar(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}gr(u,d),Bl(u,m),ed(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Sz),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const h={};for(let m=0;m<CS.length;m++){const g="rotate"+CS[m];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const m in h)a.setStaticValue(m,h[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dz;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Ff(a?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=Ff(a?.pointerEvents)||""),this.hasProjected&&!ea(this.latestValues)&&(R.transform=m?m({},""):"none",this.hasProjected=!1),R}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=SS(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:E,y:b}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${b.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const R in Pp){if(v[R]===void 0)continue;const{correct:C,applyTo:B}=Pp[R],V=h.transform==="none"?v[R]:C(v[R],g);if(B){const M=B.length;for(let z=0;z<M;z++)h[B[z]]=V}else h[R]=V}return this.options.layoutId&&(h.pointerEvents=g===this?Ff(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(bS),this.root.sharedNodes.clear()}}}function Vz(n){n.updateLayout()}function Oz(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?yr(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],E=ar(v);v.min=r[g].min,v.max=v.min+E}):YR(s,t.layoutBox,r)&&yr(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],E=ar(r[g]);v.max=v.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+E)});const u=jl();ed(u,r,t.layoutBox);const d=jl();a?ed(d,n.applyTransform(i,!0),t.measuredBox):ed(d,r,t.layoutBox);const h=!GR(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:E}=g;if(v&&E){const b=Gt();td(b,t.layoutBox,v.layoutBox);const R=Gt();td(R,r,E.layoutBox),KR(b,R)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=b,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Mz(n){ta.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Lz(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Fz(n){n.clearSnapshot()}function bS(n){n.clearMeasurements()}function Uz(n){n.isLayoutDirty=!1}function jz(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function xS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Bz(n){n.resolveTargetDelta()}function $z(n){n.calcProjection()}function zz(n){n.resetRotation()}function Wz(n){n.removeLeadSnapshot()}function RS(n,e,t){n.translate=Rt(e.translate,0,t),n.scale=Rt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function kS(n,e,t,r){n.min=Rt(e.min,t.min,r),n.max=Rt(e.max,t.max,r)}function Hz(n,e,t,r){kS(n.x,e.x,t.x,r),kS(n.y,e.y,t.y,r)}function qz(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Gz={duration:.45,ease:[.4,0,.1,1]},DS=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),NS=DS("applewebkit/")&&!DS("chrome/")?Math.round:jt;function VS(n){n.min=NS(n.min),n.max=NS(n.max)}function Kz(n){VS(n.x),VS(n.y)}function YR(n,e,t){return n==="position"||n==="preserve-aspect"&&!Lv(PS(e),PS(t),.2)}const Qz=QR({attachResizeListener:(n,e)=>Bi(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vy={current:void 0},XR=QR({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Vy.current){const n=new Qz({});n.mount(window),n.setOptions({layoutScroll:!0}),Vy.current=n}return Vy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Yz={pan:{Feature:hz},drag:{Feature:dz,ProjectionNode:XR,MeasureLayout:WR}},Xz=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Jz(n){const e=Xz.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Bv(n,e,t=1){const[r,i]=Jz(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return NR(a)?parseFloat(a):a}else return Rv(i)?Bv(i,e,t+1):i}function Zz(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!Rv(s))return;const a=Bv(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!Rv(s))continue;const a=Bv(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const eW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),JR=n=>eW.has(n),tW=n=>Object.keys(n).some(JR),OS=n=>n===Va||n===Ve,MS=(n,e)=>parseFloat(n.split(", ")[e]),LS=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return MS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?MS(s[1],n):0}},nW=new Set(["x","y","z"]),rW=Fd.filter(n=>!nW.has(n));function iW(n){const e=[];return rW.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const mu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:LS(4,13),y:LS(5,14)};mu.translateX=mu.x;mu.translateY=mu.y;const sW=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,u={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{u[h]=mu[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const m=e.getValue(h);m&&m.jump(u[h]),n[h]=mu[h](d,s)}),n},oW=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(JR);let s=[],a=!1;const u=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let m=t[d],g=kc(m);const v=e[d];let E;if(Cp(v)){const b=v.length,R=v[0]===null?1:0;m=v[R],g=kc(m);for(let C=R;C<b&&v[C]!==null;C++)E?kw(kc(v[C])===E):E=kc(v[C])}else E=kc(v);if(g!==E)if(OS(g)&&OS(E)){const b=h.get();typeof b=="string"&&h.set(parseFloat(b)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&E===Ve&&(e[d]=v.map(parseFloat))}else g?.transform&&E?.transform&&(m===0||v===0)?m===0?h.set(E.transform(m)):e[d]=g.transform(v):(a||(s=iW(n),a=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,h=sW(e,n,u);return s.length&&s.forEach(([m,g])=>{n.getValue(m).set(g)}),n.render(),ym&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function aW(n,e,t,r){return tW(e)?oW(n,e,t,r):{target:e,transitionEnd:r}}const lW=(n,e,t,r)=>{const i=Zz(n,e,r);return e=i.target,r=i.transitionEnd,aW(n,e,t,r)},$v={current:null},ZR={current:!1};function uW(){if(ZR.current=!0,!!ym)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>$v.current=n.matches;n.addListener(e),e()}else $v.current=!1}function cW(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(Hn(s))n.addValue(i,s),Rp(r)&&r.add(i);else if(Hn(a))n.addValue(i,pu(s,{owner:n})),Rp(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const u=n.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,pu(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const FS=new WeakMap,ek=Object.keys(Ed),dW=ek.length,US=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],hW=Iw.length;class fW{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Tt.render(this.render,!1,!0);const{latestValues:u,renderState:d}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=_m(t),this.isVariantNode=F1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{});for(const g in m){const v=m[g];u[g]!==void 0&&Hn(v)&&(v.set(u[g],!1),Rp(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,FS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),ZR.current||uW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$v.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FS.delete(this.current),this.projection&&this.projection.unmount(),Qi(this.notifyUpdate),Qi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=Na.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Tt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,u;for(let d=0;d<dW;d++){const h=ek[d],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:E}=Ed[h];v&&(a=v),m(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),E&&(u=E))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:E}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!m||g&&Fl(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:E})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<US.length;r++){const i=US[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=cW(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<hW;r++){const i=Iw[r],s=this.props[i];(Td(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=pu(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=Rw(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Hn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new jw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class tk extends fW{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=R$(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){b$(this,r,a);const u=lW(this,r,a,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function pW(n){return window.getComputedStyle(n)}class mW extends tk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Na.has(t)){const r=Ow(t);return r&&r.default||0}else{const r=pW(e),i=(z1(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return $R(e,t)}build(e,t,r,i){Sw(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return xw(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Hn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){Q1(e,t,r,i)}}class gW extends tk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Na.has(t)){const r=Ow(t);return r&&r.default||0}return t=Y1.has(t)?t:Tw(t),e.getAttribute(t)}measureInstanceViewportBox(){return Gt()}scrapeMotionValuesFromProps(e,t){return J1(e,t)}build(e,t,r,i){Aw(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){X1(e,t,r,i)}mount(e){this.isSVGTag=bw(e.tagName),super.mount(e)}}const yW=(n,e)=>Pw(n)?new gW(e,{enableHardwareAcceleration:!1}):new mW(e,{enableHardwareAcceleration:!0}),vW={layout:{ProjectionNode:XR,MeasureLayout:WR}},_W={...H$,...d9,...Yz,...vW},Tf=_5((n,e)=>J5(n,e,_W,yW));var wW=Symbol.for("react.lazy"),Dp=qv[" use ".trim().toString()];function TW(n){return typeof n=="object"&&n!==null&&"then"in n}function nk(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===wW&&"_payload"in n&&TW(n._payload)}function EW(n){const e=PW(n),t=k.forwardRef((r,i)=>{let{children:s,...a}=r;nk(s)&&typeof Dp=="function"&&(s=Dp(s._payload));const u=k.Children.toArray(s),d=u.find(CW);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return X.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return X.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var IW=EW("Slot");function PW(n){const e=k.forwardRef((t,r)=>{let{children:i,...s}=t;if(nk(i)&&typeof Dp=="function"&&(i=Dp(i._payload)),k.isValidElement(i)){const a=bW(i),u=AW(s,i.props);return i.type!==k.Fragment&&(u.ref=r?pm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var SW=Symbol("radix.slottable");function CW(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===SW}function AW(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function bW(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const xW=x1("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zv=en.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?IW:"button";return X.jsx(a,{className:Da(xW({variant:e,size:t,className:n})),ref:s,...i})});zv.displayName="Button";function RW(){const[n,e]=k.useState(!1),[t,r]=k.useState(null);k.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let a,u;const d=h=>{h&&h.addEventListener("statechange",()=>{h.state==="installed"&&navigator.serviceWorker.controller&&(r(h),e(!0))})};return navigator.serviceWorker.ready.then(h=>{a=h,h.waiting&&(r(h.waiting),e(!0)),u=()=>{d(h.installing)},h.addEventListener("updatefound",u)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),a&&u&&a.removeEventListener("updatefound",u)}},[]);const i=()=>{t&&t.postMessage({type:"SKIP_WAITING"}),e(!1)};return n?X.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:X.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[X.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),X.jsxs("div",{className:"flex items-center justify-end gap-2",children:[X.jsx(zv,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),X.jsx(zv,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}function kW(){return k.useEffect(()=>{const n=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${e}px`)};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),null}const DW=k.lazy(()=>Yi(()=>import("./AuthPage-CnkgwsHx.js"),__vite__mapDeps([0,1,2,3,4]))),NW=k.lazy(()=>Yi(()=>import("./DashboardPage-D-LgS0_q.js"),__vite__mapDeps([5,6,7,8,9,1,10,2,11,4,12]))),VW=k.lazy(()=>Yi(()=>import("./ArchivedCyclesPage-PUsHy3gC.js"),__vite__mapDeps([13,8,9,1,7,14]))),OW=k.lazy(()=>Yi(()=>import("./CycleDetailPage-BuElGJMp.js"),__vite__mapDeps([15,14,9,8,16,6,7,1,10,2,11,4,17]))),MW=k.lazy(()=>Yi(()=>import("./SettingsPage-tGr7aFBg.js"),__vite__mapDeps([18,1,2,8,11,3]))),LW=k.lazy(()=>Yi(()=>import("./ChartPage-hYbC8MgA.js"),__vite__mapDeps([19,10,1,2,8,11,9,4,12,17]))),FW=k.lazy(()=>Yi(()=>import("./RecordsPage-rKEZsGq4.js"),__vite__mapDeps([16,6,7,8,9,1,10,2,11,4,14])));function Rl({children:n}){const{user:e}=rw();return e?n:X.jsx(Ly,{to:"/auth",replace:!0})}function UW(){const{user:n,loadingAuth:e}=rw();if(e)return X.jsx(CP,{children:X.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[X.jsx(Tf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),X.jsx(Tf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const t=n?X.jsx(xl,{children:X.jsx("div",{className:"flex min-h-app items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):X.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[X.jsx(Tf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),X.jsx(Tf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return X.jsx(CP,{children:X.jsx(k.Suspense,{fallback:t,children:X.jsxs(dN,{children:[X.jsx(Li,{path:"/auth",element:n?X.jsx(Ly,{to:"/",replace:!0}):X.jsx(DW,{})}),X.jsx(Li,{path:"/",element:X.jsx(Rl,{children:X.jsx(xl,{children:X.jsx(NW,{})})})}),X.jsx(Li,{path:"/chart/:cycleId?",element:X.jsx(Rl,{children:X.jsx(LW,{})})}),X.jsx(Li,{path:"/records",element:X.jsx(Rl,{children:X.jsx(xl,{children:X.jsx(FW,{})})})}),X.jsx(Li,{path:"/archived-cycles",element:X.jsx(Rl,{children:X.jsx(xl,{children:X.jsx(VW,{})})})}),X.jsx(Li,{path:"/settings",element:X.jsx(Rl,{children:X.jsx(xl,{children:X.jsx(MW,{})})})}),X.jsx(Li,{path:"/cycle/:cycleId",element:X.jsx(Rl,{children:X.jsx(xl,{children:X.jsx(OW,{})})})}),X.jsx(Li,{path:"*",element:X.jsx(Ly,{to:n?"/":"/auth",replace:!0})})]})})})}function jW(){return X.jsxs(_N,{basename:"/",children:[X.jsx(kW,{}),X.jsx(RW,{}),X.jsxs(c4,{children:[X.jsx(PB,{children:X.jsx(AN,{children:X.jsx(UW,{})})}),X.jsx(l5,{})]})]})}vD.createRoot(document.getElementById("root")).render(X.jsx(en.StrictMode,{children:X.jsx(jW,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=new URL("sw.js","/");navigator.serviceWorker.register(n).catch(e=>{console.error("Service worker registration failed:",e)})});export{d4 as $,AB as A,zv as B,xB as C,u1 as D,rr as E,ba as F,wd as G,Da as H,_d as I,EB as J,Gv as K,EN as L,xa as M,xl as N,RB as O,yi as P,p4 as Q,en as R,v4 as S,a5 as T,kB as U,xW as V,gt as W,DB as X,Ot as Y,bn as Z,Yi as _,GS as a,Su as a0,gp as a1,u5 as a2,Tt as a3,$5 as a4,ww as a5,U1 as a6,Vx as a7,y4 as a8,pm as a9,M6 as aa,l1 as ab,s1 as ac,dj as ad,my as ae,Pc as af,Sc as ag,K4 as ah,x1 as ai,p6 as aj,U6 as ak,EW as al,qv as am,GW as an,qW as ao,Gx as ap,BW as aq,Wv as ar,_e as as,nw as b,Cu as c,gn as d,je as e,Ue as f,Kt as g,ZR as h,uW as i,X as j,_4 as k,Nn as l,Tf as m,iw as n,bB as o,$v as p,$W as q,k as r,yd as s,qx as t,rw as u,m3 as v,Ki as w,yy as x,Aa as y,n1 as z};
