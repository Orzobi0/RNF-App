const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-CoLaC_nd.js","assets/input-CElQ2eSE.js","assets/label-D3rGbgm4.js","assets/InstallPrompt-DrzxDA8L.js","assets/eye-C7LCdnit.js","assets/DashboardPage-CmSTV-Sb.js","assets/PostpartumExitDialog-DACb77H2.js","assets/DeletionDialog-CrQi-hGn.js","assets/useCycleData-CiVYlgIv.js","assets/useBackClose-C7RhtkvF.js","assets/DataEntryForm-DsrJTi3f.js","assets/peak-mode-button-BZ-YtFep.js","assets/computePeakStatuses-BuckH43K.js","assets/badge-CmDzsC2c.js","assets/useFertilityChart-8sBD0Slj.js","assets/ArchivedCyclesPage-CXYBT_xb.js","assets/HeaderIconButton-ChYWUtMK.js","assets/CycleDetailPage-C1ZdLQsQ.js","assets/RecordsPage-CRlaE7Id.js","assets/arrow-left-C9ySiarT.js","assets/SettingsPage-BFf8HC4Y.js","assets/ChartPage-IwYP2_Qt.js","assets/FertilityChart-DdB9dd-i.js"])))=>i.map(i=>d[i]);
function ND(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var CH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ey={exports:{}},Ic={},ty={exports:{}},We={};var uT;function VD(){if(uT)return We;uT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function P(N,z,se){this.props=N,this.context=z,this.refs=x,this.updater=se||T}P.prototype.isReactComponent={},P.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},P.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function j(){}j.prototype=P.prototype;function M(N,z,se){this.props=N,this.context=z,this.refs=x,this.updater=se||T}var D=M.prototype=new j;D.constructor=M,b(D,P.prototype),D.isPureReactComponent=!0;var B=Array.isArray,X=Object.prototype.hasOwnProperty,re={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function I(N,z,se){var ae,oe={},pe=null,De=null;if(z!=null)for(ae in z.ref!==void 0&&(De=z.ref),z.key!==void 0&&(pe=""+z.key),z)X.call(z,ae)&&!A.hasOwnProperty(ae)&&(oe[ae]=z[ae]);var Le=arguments.length-2;if(Le===1)oe.children=se;else if(1<Le){for(var $e=Array(Le),ut=0;ut<Le;ut++)$e[ut]=arguments[ut+2];oe.children=$e}if(N&&N.defaultProps)for(ae in Le=N.defaultProps,Le)oe[ae]===void 0&&(oe[ae]=Le[ae]);return{$$typeof:n,type:N,key:pe,ref:De,props:oe,_owner:re.current}}function C(N,z){return{$$typeof:n,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function O(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function L(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(se){return z[se]})}var U=/\/+/g;function V(N,z){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):z.toString(36)}function de(N,z,se,ae,oe){var pe=typeof N;(pe==="undefined"||pe==="boolean")&&(N=null);var De=!1;if(N===null)De=!0;else switch(pe){case"string":case"number":De=!0;break;case"object":switch(N.$$typeof){case n:case e:De=!0}}if(De)return De=N,oe=oe(De),N=ae===""?"."+V(De,0):ae,B(oe)?(se="",N!=null&&(se=N.replace(U,"$&/")+"/"),de(oe,z,se,"",function(ut){return ut})):oe!=null&&(O(oe)&&(oe=C(oe,se+(!oe.key||De&&De.key===oe.key?"":(""+oe.key).replace(U,"$&/")+"/")+N)),z.push(oe)),1;if(De=0,ae=ae===""?".":ae+":",B(N))for(var Le=0;Le<N.length;Le++){pe=N[Le];var $e=ae+V(pe,Le);De+=de(pe,z,se,$e,oe)}else if($e=v(N),typeof $e=="function")for(N=$e.call(N),Le=0;!(pe=N.next()).done;)pe=pe.value,$e=ae+V(pe,Le++),De+=de(pe,z,se,$e,oe);else if(pe==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return De}function xe(N,z,se){if(N==null)return N;var ae=[],oe=0;return de(N,ae,"","",function(pe){return z.call(se,pe,oe++)}),ae}function Se(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(se){(N._status===0||N._status===-1)&&(N._status=1,N._result=se)},function(se){(N._status===0||N._status===-1)&&(N._status=2,N._result=se)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var ee={current:null},H={transition:null},ne={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:H,ReactCurrentOwner:re};function J(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:xe,forEach:function(N,z,se){xe(N,function(){z.apply(this,arguments)},se)},count:function(N){var z=0;return xe(N,function(){z++}),z},toArray:function(N){return xe(N,function(z){return z})||[]},only:function(N){if(!O(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},We.Component=P,We.Fragment=t,We.Profiler=i,We.PureComponent=M,We.StrictMode=r,We.Suspense=d,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,We.act=J,We.cloneElement=function(N,z,se){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ae=b({},N.props),oe=N.key,pe=N.ref,De=N._owner;if(z!=null){if(z.ref!==void 0&&(pe=z.ref,De=re.current),z.key!==void 0&&(oe=""+z.key),N.type&&N.type.defaultProps)var Le=N.type.defaultProps;for($e in z)X.call(z,$e)&&!A.hasOwnProperty($e)&&(ae[$e]=z[$e]===void 0&&Le!==void 0?Le[$e]:z[$e])}var $e=arguments.length-2;if($e===1)ae.children=se;else if(1<$e){Le=Array($e);for(var ut=0;ut<$e;ut++)Le[ut]=arguments[ut+2];ae.children=Le}return{$$typeof:n,type:N.type,key:oe,ref:pe,props:ae,_owner:De}},We.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:s,_context:N},N.Consumer=N},We.createElement=I,We.createFactory=function(N){var z=I.bind(null,N);return z.type=N,z},We.createRef=function(){return{current:null}},We.forwardRef=function(N){return{$$typeof:u,render:N}},We.isValidElement=O,We.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:Se}},We.memo=function(N,z){return{$$typeof:h,type:N,compare:z===void 0?null:z}},We.startTransition=function(N){var z=H.transition;H.transition={};try{N()}finally{H.transition=z}},We.unstable_act=J,We.useCallback=function(N,z){return ee.current.useCallback(N,z)},We.useContext=function(N){return ee.current.useContext(N)},We.useDebugValue=function(){},We.useDeferredValue=function(N){return ee.current.useDeferredValue(N)},We.useEffect=function(N,z){return ee.current.useEffect(N,z)},We.useId=function(){return ee.current.useId()},We.useImperativeHandle=function(N,z,se){return ee.current.useImperativeHandle(N,z,se)},We.useInsertionEffect=function(N,z){return ee.current.useInsertionEffect(N,z)},We.useLayoutEffect=function(N,z){return ee.current.useLayoutEffect(N,z)},We.useMemo=function(N,z){return ee.current.useMemo(N,z)},We.useReducer=function(N,z,se){return ee.current.useReducer(N,z,se)},We.useRef=function(N){return ee.current.useRef(N)},We.useState=function(N){return ee.current.useState(N)},We.useSyncExternalStore=function(N,z,se){return ee.current.useSyncExternalStore(N,z,se)},We.useTransition=function(){return ee.current.useTransition()},We.version="18.3.1",We}var cT;function sw(){return cT||(cT=1,ty.exports=VD()),ty.exports}var dT;function MD(){if(dT)return Ic;dT=1;var n=sw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},v=null,T=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(T=d.ref);for(m in d)r.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:v,ref:T,props:g,_owner:i.current}}return Ic.Fragment=t,Ic.jsx=a,Ic.jsxs=a,Ic}var hT;function OD(){return hT||(hT=1,ey.exports=MD()),ey.exports}var K=OD(),k=sw();const tn=iw(k),ow=ND({__proto__:null,default:tn},[k]);var uf={},ny={exports:{}},zn={},ry={exports:{}},iy={};var fT;function LD(){return fT||(fT=1,(function(n){function e(H,ne){var J=H.length;H.push(ne);e:for(;0<J;){var N=J-1>>>1,z=H[N];if(0<i(z,ne))H[N]=ne,H[J]=z,J=N;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ne=H[0],J=H.pop();if(J!==ne){H[0]=J;e:for(var N=0,z=H.length,se=z>>>1;N<se;){var ae=2*(N+1)-1,oe=H[ae],pe=ae+1,De=H[pe];if(0>i(oe,J))pe<z&&0>i(De,oe)?(H[N]=De,H[pe]=J,N=pe):(H[N]=oe,H[ae]=J,N=ae);else if(pe<z&&0>i(De,J))H[N]=De,H[pe]=J,N=pe;else break e}}return ne}function i(H,ne){var J=H.sortIndex-ne.sortIndex;return J!==0?J:H.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,T=!1,b=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(H){for(var ne=t(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=H)r(h),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=t(h)}}function B(H){if(x=!1,D(H),!b)if(t(d)!==null)b=!0,Se(X);else{var ne=t(h);ne!==null&&ee(B,ne.startTime-H)}}function X(H,ne){b=!1,x&&(x=!1,j(I),I=-1),T=!0;var J=v;try{for(D(ne),g=t(d);g!==null&&(!(g.expirationTime>ne)||H&&!L());){var N=g.callback;if(typeof N=="function"){g.callback=null,v=g.priorityLevel;var z=N(g.expirationTime<=ne);ne=n.unstable_now(),typeof z=="function"?g.callback=z:g===t(d)&&r(d),D(ne)}else r(d);g=t(d)}if(g!==null)var se=!0;else{var ae=t(h);ae!==null&&ee(B,ae.startTime-ne),se=!1}return se}finally{g=null,v=J,T=!1}}var re=!1,A=null,I=-1,C=5,O=-1;function L(){return!(n.unstable_now()-O<C)}function U(){if(A!==null){var H=n.unstable_now();O=H;var ne=!0;try{ne=A(!0,H)}finally{ne?V():(re=!1,A=null)}}else re=!1}var V;if(typeof M=="function")V=function(){M(U)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,xe=de.port2;de.port1.onmessage=U,V=function(){xe.postMessage(null)}}else V=function(){P(U,0)};function Se(H){A=H,re||(re=!0,V())}function ee(H,ne){I=P(function(){H(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){b||T||(b=!0,Se(X))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var J=v;v=ne;try{return H()}finally{v=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=v;v=H;try{return ne()}finally{v=J}},n.unstable_scheduleCallback=function(H,ne,J){var N=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?N+J:N):J=N,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=J+z,H={id:m++,callback:ne,priorityLevel:H,startTime:J,expirationTime:z,sortIndex:-1},J>N?(H.sortIndex=J,e(h,H),t(d)===null&&H===t(h)&&(x?(j(I),I=-1):x=!0,ee(B,J-N))):(H.sortIndex=z,e(d,H),b||T||(b=!0,Se(X))),H},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(H){var ne=v;return function(){var J=v;v=ne;try{return H.apply(this,arguments)}finally{v=J}}}})(iy)),iy}var pT;function FD(){return pT||(pT=1,ry.exports=LD()),ry.exports}var mT;function UD(){if(mT)return zn;mT=1;var n=sw(),e=FD();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function T(o,l,c,p){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,l,c,p){if(l===null||typeof l>"u"||T(o,l,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function x(o,l,c,p,y,w,S){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=o,this.type=l,this.sanitizeURL=w,this.removeEmptyString=S}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){P[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];P[l]=new x(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){P[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){P[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){P[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){P[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){P[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){P[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){P[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){P[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),P.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){P[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function D(o,l,c,p){var y=P.hasOwnProperty(l)?P[l]:null;(y!==null?y.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,c,y,p)&&(c=null),p||y===null?v(l)&&(c===null?o.removeAttribute(l):o.setAttribute(l,""+c)):y.mustUseProperty?o[y.propertyName]=c===null?y.type===3?!1:"":c:(l=y.attributeName,p=y.attributeNamespace,c===null?o.removeAttribute(l):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?o.setAttributeNS(p,l,c):o.setAttribute(l,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),re=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),H=Symbol.iterator;function ne(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,N;function z(o){if(N===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);N=l&&l[1]||""}return`
`+N+o}var se=!1;function ae(o,l){if(!o||se)return"";se=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Z){var p=Z}Reflect.construct(o,[],l)}else{try{l.call()}catch(Z){p=Z}o.call(l.prototype)}else{try{throw Error()}catch(Z){p=Z}o()}}catch(Z){if(Z&&p&&typeof Z.stack=="string"){for(var y=Z.stack.split(`
`),w=p.stack.split(`
`),S=y.length-1,F=w.length-1;1<=S&&0<=F&&y[S]!==w[F];)F--;for(;1<=S&&0<=F;S--,F--)if(y[S]!==w[F]){if(S!==1||F!==1)do if(S--,F--,0>F||y[S]!==w[F]){var $=`
`+y[S].replace(" at new "," at ");return o.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",o.displayName)),$}while(1<=S&&0<=F);break}}}finally{se=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?z(o):""}function oe(o){switch(o.tag){case 5:return z(o.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return o=ae(o.type,!1),o;case 11:return o=ae(o.type.render,!1),o;case 1:return o=ae(o.type,!0),o;default:return""}}function pe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case A:return"Fragment";case re:return"Portal";case C:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case de:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case U:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case xe:return l=o.displayName||null,l!==null?l:pe(o.type)||"Memo";case Se:l=o._payload,o=o._init;try{return pe(o(l))}catch{}}return null}function De(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Le(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function $e(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ut(o){var l=$e(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,w.call(this,S)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function $t(o){o._valueTracker||(o._valueTracker=ut(o))}function Ci(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),p="";return o&&(p=$e(o)?o.checked?"true":"false":o.value),o=p,o!==c?(l.setValue(o),!0):!1}function Fr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ai(o,l){var c=l.checked;return J({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function za(o,l){var c=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;c=Le(l.value!=null?l.value:c),o._wrapperState={initialChecked:p,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ur(o,l){l=l.checked,l!=null&&D(o,"checked",l,!1)}function bi(o,l){Ur(o,l);var c=Le(l.value),p=l.type;if(c!=null)p==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ot(o,l.type,c):l.hasOwnProperty("defaultValue")&&Ot(o,l.type,Le(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Ao(o,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,c||l===o.value||(o.value=l),o.defaultValue=l}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function Ot(o,l,c){(l!=="number"||Fr(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var yt=Array.isArray;function Qn(o,l,c,p){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&p&&(o[c].defaultSelected=!0)}else{for(c=""+Le(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function ds(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hs(o,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if(yt(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}o._wrapperState={initialValue:Le(c)}}function bo(o,l){var c=Le(l.value),p=Le(l.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),l.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),p!=null&&(o.defaultValue=""+p)}function jr(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function xo(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fs(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?xo(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Br,$r=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,p,y){MSApp.execUnsafeLocalFunction(function(){return o(l,c,p,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Br.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Tr(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wa=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(o){Wa.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Je[l]=Je[o]})});function zr(o,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||Je.hasOwnProperty(o)&&Je[o]?(""+l).trim():l+"px"}function Ha(o,l){o=o.style;for(var c in l)if(l.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=zr(c,l[c],p);c==="float"&&(c="cssFloat"),p?o.setProperty(c,y):o[c]=y}}var Vu=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ir(o,l){if(l){if(Vu[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function qa(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function Ga(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var xi=null,Ri=null,Lt=null;function Mu(o){if(o=lc(o)){if(typeof xi!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Ih(l),xi(o.stateNode,o.type,l))}}function ms(o){Ri?Lt?Lt.push(o):Lt=[o]:Ri=o}function gs(){if(Ri){var o=Ri,l=Lt;if(Lt=Ri=null,Mu(o),l)for(o=0;o<l.length;o++)Mu(l[o])}}function Xd(o,l){return o(l)}function Jd(){}var Wr=!1;function Zd(o,l,c){if(Wr)return o(l,c);Wr=!0;try{return Xd(o,l,c)}finally{Wr=!1,(Ri!==null||Lt!==null)&&(Jd(),gs())}}function Ro(o,l){var c=o.stateNode;if(c===null)return null;var p=Ih(c);if(p===null)return null;c=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var ys=!1;if(u)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){ys=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{ys=!1}function eh(o,l,c,p,y,w,S,F,$){var Z=Array.prototype.slice.call(arguments,3);try{l.apply(c,Z)}catch(ce){this.onError(ce)}}var ki=!1,Hr=null,Ka=!1,dr=null,th={onError:function(o){ki=!0,Hr=o}};function nh(o,l,c,p,y,w,S,F,$){ki=!1,Hr=null,eh.apply(th,arguments)}function Ou(o,l,c,p,y,w,S,F,$){if(nh.apply(this,arguments),ki){if(ki){var Z=Hr;ki=!1,Hr=null}else throw Error(t(198));Ka||(Ka=!0,dr=Z)}}function Sr(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function Lu(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function rh(o){if(Sr(o)!==o)throw Error(t(188))}function ih(o){var l=o.alternate;if(!l){if(l=Sr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var c=o,p=l;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return rh(y),o;if(w===p)return rh(y),l;w=w.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=w;else{for(var S=!1,F=y.child;F;){if(F===c){S=!0,c=y,p=w;break}if(F===p){S=!0,p=y,c=w;break}F=F.sibling}if(!S){for(F=w.child;F;){if(F===c){S=!0,c=w,p=y;break}if(F===p){S=!0,p=w,c=y;break}F=F.sibling}if(!S)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:l}function sh(o){return o=ih(o),o!==null?ko(o):null}function ko(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=ko(o);if(l!==null)return l;o=o.sibling}return null}var Fu=e.unstable_scheduleCallback,Qa=e.unstable_cancelCallback,Do=e.unstable_shouldYield,Di=e.unstable_requestPaint,Tt=e.unstable_now,km=e.unstable_getCurrentPriorityLevel,Ya=e.unstable_ImmediatePriority,Uu=e.unstable_UserBlockingPriority,No=e.unstable_NormalPriority,ju=e.unstable_LowPriority,Xa=e.unstable_IdlePriority,Vo=null,Yn=null;function oh(o){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Vo,o,void 0,(o.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Mo,qr=Math.log,hr=Math.LN2;function Mo(o){return o>>>=0,o===0?32:31-(qr(o)/hr|0)|0}var Gr=64,ws=4194304;function st(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ni(o,l){var c=o.pendingLanes;if(c===0)return 0;var p=0,y=o.suspendedLanes,w=o.pingedLanes,S=c&268435455;if(S!==0){var F=S&~y;F!==0?p=st(F):(w&=S,w!==0&&(p=st(w)))}else S=c&~y,S!==0?p=st(S):w!==0&&(p=st(w));if(p===0)return 0;if(l!==0&&l!==p&&(l&y)===0&&(y=p&-p,w=l&-l,y>=w||y===16&&(w&4194240)!==0))return l;if((p&4)!==0&&(p|=c&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)c=31-Xn(l),y=1<<c,p|=o[c],l&=~y;return p}function Oo(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lo(o,l){for(var c=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,w=o.pendingLanes;0<w;){var S=31-Xn(w),F=1<<S,$=y[S];$===-1?((F&c)===0||(F&p)!==0)&&(y[S]=Oo(F,l)):$<=l&&(o.expiredLanes|=F),w&=~F}}function Bu(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function $u(){var o=Gr;return Gr<<=1,(Gr&4194240)===0&&(Gr=64),o}function zu(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Fo(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Xn(l),o[l]=c}function Dm(o,l){var c=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<c;){var y=31-Xn(c),w=1<<y;l[y]=0,p[y]=-1,o[y]=-1,c&=~w}}function Wu(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var p=31-Xn(c),y=1<<p;y&l|o[p]&l&&(o[p]|=l),c&=~y}}var Ge=0;function Kr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Hu,Ja,qu,Gu,Ku,Qr=!1,Za=[],Yr=null,Xr=null,mn=null,Uo=new Map,Vi=new Map,Jn=[],ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _s(o,l){switch(o){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Uo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(l.pointerId)}}function Pr(o,l,c,p,y,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:c,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},l!==null&&(l=lc(l),l!==null&&Ja(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function lh(o,l,c,p,y){switch(l){case"focusin":return Yr=Pr(Yr,o,l,c,p,y),!0;case"dragenter":return Xr=Pr(Xr,o,l,c,p,y),!0;case"mouseover":return mn=Pr(mn,o,l,c,p,y),!0;case"pointerover":var w=y.pointerId;return Uo.set(w,Pr(Uo.get(w)||null,o,l,c,p,y)),!0;case"gotpointercapture":return w=y.pointerId,Vi.set(w,Pr(Vi.get(w)||null,o,l,c,p,y)),!0}return!1}function el(o){var l=zo(o.target);if(l!==null){var c=Sr(l);if(c!==null){if(l=c.tag,l===13){if(l=Lu(c),l!==null){o.blockedOn=l,Ku(o.priority,function(){qu(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function gt(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=tl(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var p=new c.constructor(c.type,c);ps=p,c.target.dispatchEvent(p),ps=null}else return l=lc(c),l!==null&&Ja(l),o.blockedOn=c,!1;l.shift()}return!0}function uh(o,l,c){gt(o)&&c.delete(l)}function Nm(){Qr=!1,Yr!==null&&gt(Yr)&&(Yr=null),Xr!==null&&gt(Xr)&&(Xr=null),mn!==null&&gt(mn)&&(mn=null),Uo.forEach(uh),Vi.forEach(uh)}function Es(o,l){o.blockedOn===l&&(o.blockedOn=null,Qr||(Qr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nm)))}function Ts(o){function l(y){return Es(y,o)}if(0<Za.length){Es(Za[0],o);for(var c=1;c<Za.length;c++){var p=Za[c];p.blockedOn===o&&(p.blockedOn=null)}}for(Yr!==null&&Es(Yr,o),Xr!==null&&Es(Xr,o),mn!==null&&Es(mn,o),Uo.forEach(l),Vi.forEach(l),c=0;c<Jn.length;c++)p=Jn[c],p.blockedOn===o&&(p.blockedOn=null);for(;0<Jn.length&&(c=Jn[0],c.blockedOn===null);)el(c),c.blockedOn===null&&Jn.shift()}var Mi=B.ReactCurrentBatchConfig,Oi=!0;function Jr(o,l,c,p){var y=Ge,w=Mi.transition;Mi.transition=null;try{Ge=1,Qu(o,l,c,p)}finally{Ge=y,Mi.transition=w}}function ch(o,l,c,p){var y=Ge,w=Mi.transition;Mi.transition=null;try{Ge=4,Qu(o,l,c,p)}finally{Ge=y,Mi.transition=w}}function Qu(o,l,c,p){if(Oi){var y=tl(o,l,c,p);if(y===null)Wm(o,l,p,Zr,c),_s(o,p);else if(lh(y,o,l,c,p))p.stopPropagation();else if(_s(o,p),l&4&&-1<ah.indexOf(o)){for(;y!==null;){var w=lc(y);if(w!==null&&Hu(w),w=tl(o,l,c,p),w===null&&Wm(o,l,p,Zr,c),w===y)break;y=w}y!==null&&p.stopPropagation()}else Wm(o,l,p,null,c)}}var Zr=null;function tl(o,l,c,p){if(Zr=null,o=Ga(p),o=zo(o),o!==null)if(l=Sr(o),l===null)o=null;else if(c=l.tag,c===13){if(o=Lu(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Zr=o,null}function nl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(km()){case Ya:return 1;case Uu:return 4;case No:case ju:return 16;case Xa:return 536870912;default:return 16}default:return 16}}var Zn=null,rl=null,Li=null;function dh(){if(Li)return Li;var o,l=rl,c=l.length,p,y="value"in Zn?Zn.value:Zn.textContent,w=y.length;for(o=0;o<c&&l[o]===y[o];o++);var S=c-o;for(p=1;p<=S&&l[c-p]===y[w-p];p++);return Li=y.slice(o,1<p?1-p:void 0)}function jo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function ei(){return!0}function Yu(){return!1}function _n(o){function l(c,p,y,w,S){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=S,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(c=o[F],this[F]=c?c(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ei:Yu,this.isPropagationStopped=Yu,this}return J(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),l}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=_n(ti),Is=J({},ti,{view:0,detail:0}),il=_n(Is),sl,ol,er,$o=J({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Be,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==er&&(er&&o.type==="mousemove"?(sl=o.screenX-er.screenX,ol=o.screenY-er.screenY):ol=sl=0,er=o),sl)},movementY:function(o){return"movementY"in o?o.movementY:ol}}),Xu=_n($o),hh=J({},$o,{dataTransfer:0}),fh=_n(hh),al=J({},Is,{relatedTarget:0}),gn=_n(al),ph=J({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=_n(ph),Ss=J({},ti,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),f=_n(Ss),_=J({},ti,{data:0}),E=_n(_),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},te={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=te[o])?!!l[o]:!1}function Be(){return me}var zt=J({},Is,{key:function(o){if(o.key){var l=R[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=jo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Q[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Be,charCode:function(o){return o.type==="keypress"?jo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?jo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ct=_n(zt),Xt=J({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tr=_n(Xt),Fi=J({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Be}),ni=_n(Fi),ri=J({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),ll=_n(ri),Ju=J({},$o,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ak=_n(Ju),bk=[9,13,27,32],Vm=u&&"CompositionEvent"in window,Zu=null;u&&"documentMode"in document&&(Zu=document.documentMode);var xk=u&&"TextEvent"in window&&!Zu,tE=u&&(!Vm||Zu&&8<Zu&&11>=Zu),nE=" ",rE=!1;function iE(o,l){switch(o){case"keyup":return bk.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ul=!1;function Rk(o,l){switch(o){case"compositionend":return sE(l);case"keypress":return l.which!==32?null:(rE=!0,nE);case"textInput":return o=l.data,o===nE&&rE?null:o;default:return null}}function kk(o,l){if(ul)return o==="compositionend"||!Vm&&iE(o,l)?(o=dh(),Li=rl=Zn=null,ul=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tE&&l.locale!=="ko"?null:l.data;default:return null}}var Dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oE(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Dk[o.type]:l==="textarea"}function aE(o,l,c,p){ms(p),l=_h(l,"onChange"),0<l.length&&(c=new Bo("onChange","change",null,c,p),o.push({event:c,listeners:l}))}var ec=null,tc=null;function Nk(o){PE(o,0)}function gh(o){var l=pl(o);if(Ci(l))return o}function Vk(o,l){if(o==="change")return l}var lE=!1;if(u){var Mm;if(u){var Om="oninput"in document;if(!Om){var uE=document.createElement("div");uE.setAttribute("oninput","return;"),Om=typeof uE.oninput=="function"}Mm=Om}else Mm=!1;lE=Mm&&(!document.documentMode||9<document.documentMode)}function cE(){ec&&(ec.detachEvent("onpropertychange",dE),tc=ec=null)}function dE(o){if(o.propertyName==="value"&&gh(tc)){var l=[];aE(l,tc,o,Ga(o)),Zd(Nk,l)}}function Mk(o,l,c){o==="focusin"?(cE(),ec=l,tc=c,ec.attachEvent("onpropertychange",dE)):o==="focusout"&&cE()}function Ok(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return gh(tc)}function Lk(o,l){if(o==="click")return gh(l)}function Fk(o,l){if(o==="input"||o==="change")return gh(l)}function Uk(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Cr=typeof Object.is=="function"?Object.is:Uk;function nc(o,l){if(Cr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(l,y)||!Cr(o[y],l[y]))return!1}return!0}function hE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fE(o,l){var c=hE(o);o=0;for(var p;c;){if(c.nodeType===3){if(p=o+c.textContent.length,o<=l&&p>=l)return{node:c,offset:l-o};o=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hE(c)}}function pE(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?pE(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function mE(){for(var o=window,l=Fr();l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=Fr(o.document)}return l}function Lm(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function jk(o){var l=mE(),c=o.focusedElem,p=o.selectionRange;if(l!==c&&c&&c.ownerDocument&&pE(c.ownerDocument.documentElement,c)){if(p!==null&&Lm(c)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(o,c.value.length);else if(o=(l=c.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=c.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!o.extend&&w>p&&(y=p,p=w,w=y),y=fE(c,w);var S=fE(c,p);y&&S&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),w>p?(o.addRange(l),o.extend(S.node,S.offset)):(l.setEnd(S.node,S.offset),o.addRange(l)))}}for(l=[],o=c;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)o=l[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Bk=u&&"documentMode"in document&&11>=document.documentMode,cl=null,Fm=null,rc=null,Um=!1;function gE(o,l,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Um||cl==null||cl!==Fr(p)||(p=cl,"selectionStart"in p&&Lm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),rc&&nc(rc,p)||(rc=p,p=_h(Fm,"onSelect"),0<p.length&&(l=new Bo("onSelect","select",null,l,c),o.push({event:l,listeners:p}),l.target=cl)))}function yh(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var dl={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},jm={},yE={};u&&(yE=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function vh(o){if(jm[o])return jm[o];if(!dl[o])return o;var l=dl[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in yE)return jm[o]=l[c];return o}var vE=vh("animationend"),wE=vh("animationiteration"),_E=vh("animationstart"),EE=vh("transitionend"),TE=new Map,IE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(o,l){TE.set(o,l),s(l,[o])}for(var Bm=0;Bm<IE.length;Bm++){var $m=IE[Bm],$k=$m.toLowerCase(),zk=$m[0].toUpperCase()+$m.slice(1);Ps($k,"on"+zk)}Ps(vE,"onAnimationEnd"),Ps(wE,"onAnimationIteration"),Ps(_E,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(EE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ic));function SE(o,l,c){var p=o.type||"unknown-event";o.currentTarget=c,Ou(p,l,void 0,o),o.currentTarget=null}function PE(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var p=o[c],y=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var S=p.length-1;0<=S;S--){var F=p[S],$=F.instance,Z=F.currentTarget;if(F=F.listener,$!==w&&y.isPropagationStopped())break e;SE(y,F,Z),w=$}else for(S=0;S<p.length;S++){if(F=p[S],$=F.instance,Z=F.currentTarget,F=F.listener,$!==w&&y.isPropagationStopped())break e;SE(y,F,Z),w=$}}}if(Ka)throw o=dr,Ka=!1,dr=null,o}function It(o,l){var c=l[Ym];c===void 0&&(c=l[Ym]=new Set);var p=o+"__bubble";c.has(p)||(CE(l,o,2,!1),c.add(p))}function zm(o,l,c){var p=0;l&&(p|=4),CE(c,o,p,l)}var wh="_reactListening"+Math.random().toString(36).slice(2);function sc(o){if(!o[wh]){o[wh]=!0,r.forEach(function(c){c!=="selectionchange"&&(Wk.has(c)||zm(c,!1,o),zm(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[wh]||(l[wh]=!0,zm("selectionchange",!1,l))}}function CE(o,l,c,p){switch(nl(l)){case 1:var y=Jr;break;case 4:y=ch;break;default:y=Qu}c=y.bind(null,l,c,o),y=void 0,!ys||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function Wm(o,l,c,p,y){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var F=p.stateNode.containerInfo;if(F===y||F.nodeType===8&&F.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var $=S.tag;if(($===3||$===4)&&($=S.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;S=S.return}for(;F!==null;){if(S=zo(F),S===null)return;if($=S.tag,$===5||$===6){p=w=S;continue e}F=F.parentNode}}p=p.return}Zd(function(){var Z=w,ce=Ga(c),he=[];e:{var le=TE.get(o);if(le!==void 0){var we=Bo,Pe=o;switch(o){case"keypress":if(jo(c)===0)break e;case"keydown":case"keyup":we=ct;break;case"focusin":Pe="focus",we=gn;break;case"focusout":Pe="blur",we=gn;break;case"beforeblur":case"afterblur":we=gn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=ni;break;case vE:case wE:case _E:we=mh;break;case EE:we=ll;break;case"scroll":we=il;break;case"wheel":we=Ak;break;case"copy":case"cut":case"paste":we=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=tr}var be=(l&4)!==0,Wt=!be&&o==="scroll",G=be?le!==null?le+"Capture":null:le;be=[];for(var W=Z,Y;W!==null;){Y=W;var fe=Y.stateNode;if(Y.tag===5&&fe!==null&&(Y=fe,G!==null&&(fe=Ro(W,G),fe!=null&&be.push(oc(W,fe,Y)))),Wt)break;W=W.return}0<be.length&&(le=new we(le,Pe,null,c,ce),he.push({event:le,listeners:be}))}}if((l&7)===0){e:{if(le=o==="mouseover"||o==="pointerover",we=o==="mouseout"||o==="pointerout",le&&c!==ps&&(Pe=c.relatedTarget||c.fromElement)&&(zo(Pe)||Pe[Ui]))break e;if((we||le)&&(le=ce.window===ce?ce:(le=ce.ownerDocument)?le.defaultView||le.parentWindow:window,we?(Pe=c.relatedTarget||c.toElement,we=Z,Pe=Pe?zo(Pe):null,Pe!==null&&(Wt=Sr(Pe),Pe!==Wt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(we=null,Pe=Z),we!==Pe)){if(be=Xu,fe="onMouseLeave",G="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(be=tr,fe="onPointerLeave",G="onPointerEnter",W="pointer"),Wt=we==null?le:pl(we),Y=Pe==null?le:pl(Pe),le=new be(fe,W+"leave",we,c,ce),le.target=Wt,le.relatedTarget=Y,fe=null,zo(ce)===Z&&(be=new be(G,W+"enter",Pe,c,ce),be.target=Y,be.relatedTarget=Wt,fe=be),Wt=fe,we&&Pe)t:{for(be=we,G=Pe,W=0,Y=be;Y;Y=hl(Y))W++;for(Y=0,fe=G;fe;fe=hl(fe))Y++;for(;0<W-Y;)be=hl(be),W--;for(;0<Y-W;)G=hl(G),Y--;for(;W--;){if(be===G||G!==null&&be===G.alternate)break t;be=hl(be),G=hl(G)}be=null}else be=null;we!==null&&AE(he,le,we,be,!1),Pe!==null&&Wt!==null&&AE(he,Wt,Pe,be,!0)}}e:{if(le=Z?pl(Z):window,we=le.nodeName&&le.nodeName.toLowerCase(),we==="select"||we==="input"&&le.type==="file")var Re=Vk;else if(oE(le))if(lE)Re=Fk;else{Re=Ok;var Me=Mk}else(we=le.nodeName)&&we.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Re=Lk);if(Re&&(Re=Re(o,Z))){aE(he,Re,c,ce);break e}Me&&Me(o,le,Z),o==="focusout"&&(Me=le._wrapperState)&&Me.controlled&&le.type==="number"&&Ot(le,"number",le.value)}switch(Me=Z?pl(Z):window,o){case"focusin":(oE(Me)||Me.contentEditable==="true")&&(cl=Me,Fm=Z,rc=null);break;case"focusout":rc=Fm=cl=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,gE(he,c,ce);break;case"selectionchange":if(Bk)break;case"keydown":case"keyup":gE(he,c,ce)}var Oe;if(Vm)e:{switch(o){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ul?iE(o,c)&&(Ue="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Ue="onCompositionStart");Ue&&(tE&&c.locale!=="ko"&&(ul||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ul&&(Oe=dh()):(Zn=ce,rl="value"in Zn?Zn.value:Zn.textContent,ul=!0)),Me=_h(Z,Ue),0<Me.length&&(Ue=new E(Ue,o,null,c,ce),he.push({event:Ue,listeners:Me}),Oe?Ue.data=Oe:(Oe=sE(c),Oe!==null&&(Ue.data=Oe)))),(Oe=xk?Rk(o,c):kk(o,c))&&(Z=_h(Z,"onBeforeInput"),0<Z.length&&(ce=new E("onBeforeInput","beforeinput",null,c,ce),he.push({event:ce,listeners:Z}),ce.data=Oe))}PE(he,l)})}function oc(o,l,c){return{instance:o,listener:l,currentTarget:c}}function _h(o,l){for(var c=l+"Capture",p=[];o!==null;){var y=o,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=Ro(o,c),w!=null&&p.unshift(oc(o,w,y)),w=Ro(o,l),w!=null&&p.push(oc(o,w,y))),o=o.return}return p}function hl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function AE(o,l,c,p,y){for(var w=l._reactName,S=[];c!==null&&c!==p;){var F=c,$=F.alternate,Z=F.stateNode;if($!==null&&$===p)break;F.tag===5&&Z!==null&&(F=Z,y?($=Ro(c,w),$!=null&&S.unshift(oc(c,$,F))):y||($=Ro(c,w),$!=null&&S.push(oc(c,$,F)))),c=c.return}S.length!==0&&o.push({event:l,listeners:S})}var Hk=/\r\n?/g,qk=/\u0000|\uFFFD/g;function bE(o){return(typeof o=="string"?o:""+o).replace(Hk,`
`).replace(qk,"")}function Eh(o,l,c){if(l=bE(l),bE(o)!==l&&c)throw Error(t(425))}function Th(){}var Hm=null,qm=null;function Gm(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,Gk=typeof clearTimeout=="function"?clearTimeout:void 0,xE=typeof Promise=="function"?Promise:void 0,Kk=typeof queueMicrotask=="function"?queueMicrotask:typeof xE<"u"?function(o){return xE.resolve(null).then(o).catch(Qk)}:Km;function Qk(o){setTimeout(function(){throw o})}function Qm(o,l){var c=l,p=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){o.removeChild(y),Ts(l);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);Ts(l)}function Cs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function RE(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}var fl=Math.random().toString(36).slice(2),ii="__reactFiber$"+fl,ac="__reactProps$"+fl,Ui="__reactContainer$"+fl,Ym="__reactEvents$"+fl,Yk="__reactListeners$"+fl,Xk="__reactHandles$"+fl;function zo(o){var l=o[ii];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Ui]||c[ii]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=RE(o);o!==null;){if(c=o[ii])return c;o=RE(o)}return l}o=c,c=o.parentNode}return null}function lc(o){return o=o[ii]||o[Ui],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function pl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Ih(o){return o[ac]||null}var Xm=[],ml=-1;function As(o){return{current:o}}function St(o){0>ml||(o.current=Xm[ml],Xm[ml]=null,ml--)}function vt(o,l){ml++,Xm[ml]=o.current,o.current=l}var bs={},En=As(bs),Fn=As(!1),Wo=bs;function gl(o,l){var c=o.type.contextTypes;if(!c)return bs;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=l[w];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Un(o){return o=o.childContextTypes,o!=null}function Sh(){St(Fn),St(En)}function kE(o,l,c){if(En.current!==bs)throw Error(t(168));vt(En,l),vt(Fn,c)}function DE(o,l,c){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in l))throw Error(t(108,De(o)||"Unknown",y));return J({},c,p)}function Ph(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||bs,Wo=En.current,vt(En,o),vt(Fn,Fn.current),!0}function NE(o,l,c){var p=o.stateNode;if(!p)throw Error(t(169));c?(o=DE(o,l,Wo),p.__reactInternalMemoizedMergedChildContext=o,St(Fn),St(En),vt(En,o)):St(Fn),vt(Fn,c)}var ji=null,Ch=!1,Jm=!1;function VE(o){ji===null?ji=[o]:ji.push(o)}function Jk(o){Ch=!0,VE(o)}function xs(){if(!Jm&&ji!==null){Jm=!0;var o=0,l=Ge;try{var c=ji;for(Ge=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}ji=null,Ch=!1}catch(y){throw ji!==null&&(ji=ji.slice(o+1)),Fu(Ya,xs),y}finally{Ge=l,Jm=!1}}return null}var yl=[],vl=0,Ah=null,bh=0,fr=[],pr=0,Ho=null,Bi=1,$i="";function qo(o,l){yl[vl++]=bh,yl[vl++]=Ah,Ah=o,bh=l}function ME(o,l,c){fr[pr++]=Bi,fr[pr++]=$i,fr[pr++]=Ho,Ho=o;var p=Bi;o=$i;var y=32-Xn(p)-1;p&=~(1<<y),c+=1;var w=32-Xn(l)+y;if(30<w){var S=y-y%5;w=(p&(1<<S)-1).toString(32),p>>=S,y-=S,Bi=1<<32-Xn(l)+y|c<<y|p,$i=w+o}else Bi=1<<w|c<<y|p,$i=o}function Zm(o){o.return!==null&&(qo(o,1),ME(o,1,0))}function eg(o){for(;o===Ah;)Ah=yl[--vl],yl[vl]=null,bh=yl[--vl],yl[vl]=null;for(;o===Ho;)Ho=fr[--pr],fr[pr]=null,$i=fr[--pr],fr[pr]=null,Bi=fr[--pr],fr[pr]=null}var nr=null,rr=null,At=!1,Ar=null;function OE(o,l){var c=vr(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,l=o.deletions,l===null?(o.deletions=[c],o.flags|=16):l.push(c)}function LE(o,l){switch(o.tag){case 5:var c=o.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,nr=o,rr=Cs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,nr=o,rr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Ho!==null?{id:Bi,overflow:$i}:null,o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=vr(18,null,null,0),c.stateNode=l,c.return=o,o.child=c,nr=o,rr=null,!0):!1;default:return!1}}function tg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ng(o){if(At){var l=rr;if(l){var c=l;if(!LE(o,l)){if(tg(o))throw Error(t(418));l=Cs(c.nextSibling);var p=nr;l&&LE(o,l)?OE(p,c):(o.flags=o.flags&-4097|2,At=!1,nr=o)}}else{if(tg(o))throw Error(t(418));o.flags=o.flags&-4097|2,At=!1,nr=o}}}function FE(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;nr=o}function xh(o){if(o!==nr)return!1;if(!At)return FE(o),At=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Gm(o.type,o.memoizedProps)),l&&(l=rr)){if(tg(o))throw UE(),Error(t(418));for(;l;)OE(o,l),l=Cs(l.nextSibling)}if(FE(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(l===0){rr=Cs(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}o=o.nextSibling}rr=null}}else rr=nr?Cs(o.stateNode.nextSibling):null;return!0}function UE(){for(var o=rr;o;)o=Cs(o.nextSibling)}function wl(){rr=nr=null,At=!1}function rg(o){Ar===null?Ar=[o]:Ar.push(o)}var Zk=B.ReactCurrentBatchConfig;function uc(o,l,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,o));var y=p,w=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(S){var F=y.refs;S===null?delete F[w]:F[w]=S},l._stringRef=w,l)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function Rh(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function jE(o){var l=o._init;return l(o._payload)}function BE(o){function l(G,W){if(o){var Y=G.deletions;Y===null?(G.deletions=[W],G.flags|=16):Y.push(W)}}function c(G,W){if(!o)return null;for(;W!==null;)l(G,W),W=W.sibling;return null}function p(G,W){for(G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function y(G,W){return G=Ls(G,W),G.index=0,G.sibling=null,G}function w(G,W,Y){return G.index=Y,o?(Y=G.alternate,Y!==null?(Y=Y.index,Y<W?(G.flags|=2,W):Y):(G.flags|=2,W)):(G.flags|=1048576,W)}function S(G){return o&&G.alternate===null&&(G.flags|=2),G}function F(G,W,Y,fe){return W===null||W.tag!==6?(W=Kg(Y,G.mode,fe),W.return=G,W):(W=y(W,Y),W.return=G,W)}function $(G,W,Y,fe){var Re=Y.type;return Re===A?ce(G,W,Y.props.children,fe,Y.key):W!==null&&(W.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Se&&jE(Re)===W.type)?(fe=y(W,Y.props),fe.ref=uc(G,W,Y),fe.return=G,fe):(fe=ef(Y.type,Y.key,Y.props,null,G.mode,fe),fe.ref=uc(G,W,Y),fe.return=G,fe)}function Z(G,W,Y,fe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=Qg(Y,G.mode,fe),W.return=G,W):(W=y(W,Y.children||[]),W.return=G,W)}function ce(G,W,Y,fe,Re){return W===null||W.tag!==7?(W=ea(Y,G.mode,fe,Re),W.return=G,W):(W=y(W,Y),W.return=G,W)}function he(G,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Kg(""+W,G.mode,Y),W.return=G,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case X:return Y=ef(W.type,W.key,W.props,null,G.mode,Y),Y.ref=uc(G,null,W),Y.return=G,Y;case re:return W=Qg(W,G.mode,Y),W.return=G,W;case Se:var fe=W._init;return he(G,fe(W._payload),Y)}if(yt(W)||ne(W))return W=ea(W,G.mode,Y,null),W.return=G,W;Rh(G,W)}return null}function le(G,W,Y,fe){var Re=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Re!==null?null:F(G,W,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case X:return Y.key===Re?$(G,W,Y,fe):null;case re:return Y.key===Re?Z(G,W,Y,fe):null;case Se:return Re=Y._init,le(G,W,Re(Y._payload),fe)}if(yt(Y)||ne(Y))return Re!==null?null:ce(G,W,Y,fe,null);Rh(G,Y)}return null}function we(G,W,Y,fe,Re){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(Y)||null,F(W,G,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case X:return G=G.get(fe.key===null?Y:fe.key)||null,$(W,G,fe,Re);case re:return G=G.get(fe.key===null?Y:fe.key)||null,Z(W,G,fe,Re);case Se:var Me=fe._init;return we(G,W,Y,Me(fe._payload),Re)}if(yt(fe)||ne(fe))return G=G.get(Y)||null,ce(W,G,fe,Re,null);Rh(W,fe)}return null}function Pe(G,W,Y,fe){for(var Re=null,Me=null,Oe=W,Ue=W=0,dn=null;Oe!==null&&Ue<Y.length;Ue++){Oe.index>Ue?(dn=Oe,Oe=null):dn=Oe.sibling;var rt=le(G,Oe,Y[Ue],fe);if(rt===null){Oe===null&&(Oe=dn);break}o&&Oe&&rt.alternate===null&&l(G,Oe),W=w(rt,W,Ue),Me===null?Re=rt:Me.sibling=rt,Me=rt,Oe=dn}if(Ue===Y.length)return c(G,Oe),At&&qo(G,Ue),Re;if(Oe===null){for(;Ue<Y.length;Ue++)Oe=he(G,Y[Ue],fe),Oe!==null&&(W=w(Oe,W,Ue),Me===null?Re=Oe:Me.sibling=Oe,Me=Oe);return At&&qo(G,Ue),Re}for(Oe=p(G,Oe);Ue<Y.length;Ue++)dn=we(Oe,G,Ue,Y[Ue],fe),dn!==null&&(o&&dn.alternate!==null&&Oe.delete(dn.key===null?Ue:dn.key),W=w(dn,W,Ue),Me===null?Re=dn:Me.sibling=dn,Me=dn);return o&&Oe.forEach(function(Fs){return l(G,Fs)}),At&&qo(G,Ue),Re}function be(G,W,Y,fe){var Re=ne(Y);if(typeof Re!="function")throw Error(t(150));if(Y=Re.call(Y),Y==null)throw Error(t(151));for(var Me=Re=null,Oe=W,Ue=W=0,dn=null,rt=Y.next();Oe!==null&&!rt.done;Ue++,rt=Y.next()){Oe.index>Ue?(dn=Oe,Oe=null):dn=Oe.sibling;var Fs=le(G,Oe,rt.value,fe);if(Fs===null){Oe===null&&(Oe=dn);break}o&&Oe&&Fs.alternate===null&&l(G,Oe),W=w(Fs,W,Ue),Me===null?Re=Fs:Me.sibling=Fs,Me=Fs,Oe=dn}if(rt.done)return c(G,Oe),At&&qo(G,Ue),Re;if(Oe===null){for(;!rt.done;Ue++,rt=Y.next())rt=he(G,rt.value,fe),rt!==null&&(W=w(rt,W,Ue),Me===null?Re=rt:Me.sibling=rt,Me=rt);return At&&qo(G,Ue),Re}for(Oe=p(G,Oe);!rt.done;Ue++,rt=Y.next())rt=we(Oe,G,Ue,rt.value,fe),rt!==null&&(o&&rt.alternate!==null&&Oe.delete(rt.key===null?Ue:rt.key),W=w(rt,W,Ue),Me===null?Re=rt:Me.sibling=rt,Me=rt);return o&&Oe.forEach(function(DD){return l(G,DD)}),At&&qo(G,Ue),Re}function Wt(G,W,Y,fe){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case X:e:{for(var Re=Y.key,Me=W;Me!==null;){if(Me.key===Re){if(Re=Y.type,Re===A){if(Me.tag===7){c(G,Me.sibling),W=y(Me,Y.props.children),W.return=G,G=W;break e}}else if(Me.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Se&&jE(Re)===Me.type){c(G,Me.sibling),W=y(Me,Y.props),W.ref=uc(G,Me,Y),W.return=G,G=W;break e}c(G,Me);break}else l(G,Me);Me=Me.sibling}Y.type===A?(W=ea(Y.props.children,G.mode,fe,Y.key),W.return=G,G=W):(fe=ef(Y.type,Y.key,Y.props,null,G.mode,fe),fe.ref=uc(G,W,Y),fe.return=G,G=fe)}return S(G);case re:e:{for(Me=Y.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){c(G,W.sibling),W=y(W,Y.children||[]),W.return=G,G=W;break e}else{c(G,W);break}else l(G,W);W=W.sibling}W=Qg(Y,G.mode,fe),W.return=G,G=W}return S(G);case Se:return Me=Y._init,Wt(G,W,Me(Y._payload),fe)}if(yt(Y))return Pe(G,W,Y,fe);if(ne(Y))return be(G,W,Y,fe);Rh(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(c(G,W.sibling),W=y(W,Y),W.return=G,G=W):(c(G,W),W=Kg(Y,G.mode,fe),W.return=G,G=W),S(G)):c(G,W)}return Wt}var _l=BE(!0),$E=BE(!1),kh=As(null),Dh=null,El=null,ig=null;function sg(){ig=El=Dh=null}function og(o){var l=kh.current;St(kh),o._currentValue=l}function ag(o,l,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===c)break;o=o.return}}function Tl(o,l){Dh=o,ig=El=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(jn=!0),o.firstContext=null)}function mr(o){var l=o._currentValue;if(ig!==o)if(o={context:o,memoizedValue:l,next:null},El===null){if(Dh===null)throw Error(t(308));El=o,Dh.dependencies={lanes:0,firstContext:o}}else El=El.next=o;return l}var Go=null;function lg(o){Go===null?Go=[o]:Go.push(o)}function zE(o,l,c,p){var y=l.interleaved;return y===null?(c.next=c,lg(l)):(c.next=y.next,y.next=c),l.interleaved=c,zi(o,p)}function zi(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,c=o.alternate,c!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var Rs=!1;function ug(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WE(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Wi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function ks(o,l,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Ze&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,zi(o,c)}return y=p.interleaved,y===null?(l.next=l,lg(p)):(l.next=y.next,y.next=l),p.interleaved=l,zi(o,c)}function Nh(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Wu(o,c)}}function HE(o,l){var c=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=S:w=w.next=S,c=c.next}while(c!==null);w===null?y=w=l:w=w.next=l}else y=w=l;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function Vh(o,l,c,p){var y=o.updateQueue;Rs=!1;var w=y.firstBaseUpdate,S=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var $=F,Z=$.next;$.next=null,S===null?w=Z:S.next=Z,S=$;var ce=o.alternate;ce!==null&&(ce=ce.updateQueue,F=ce.lastBaseUpdate,F!==S&&(F===null?ce.firstBaseUpdate=Z:F.next=Z,ce.lastBaseUpdate=$))}if(w!==null){var he=y.baseState;S=0,ce=Z=$=null,F=w;do{var le=F.lane,we=F.eventTime;if((p&le)===le){ce!==null&&(ce=ce.next={eventTime:we,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Pe=o,be=F;switch(le=l,we=c,be.tag){case 1:if(Pe=be.payload,typeof Pe=="function"){he=Pe.call(we,he,le);break e}he=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=be.payload,le=typeof Pe=="function"?Pe.call(we,he,le):Pe,le==null)break e;he=J({},he,le);break e;case 2:Rs=!0}}F.callback!==null&&F.lane!==0&&(o.flags|=64,le=y.effects,le===null?y.effects=[F]:le.push(F))}else we={eventTime:we,lane:le,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ce===null?(Z=ce=we,$=he):ce=ce.next=we,S|=le;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;le=F,F=le.next,le.next=null,y.lastBaseUpdate=le,y.shared.pending=null}}while(!0);if(ce===null&&($=he),y.baseState=$,y.firstBaseUpdate=Z,y.lastBaseUpdate=ce,l=y.shared.interleaved,l!==null){y=l;do S|=y.lane,y=y.next;while(y!==l)}else w===null&&(y.shared.lanes=0);Yo|=S,o.lanes=S,o.memoizedState=he}}function qE(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var cc={},si=As(cc),dc=As(cc),hc=As(cc);function Ko(o){if(o===cc)throw Error(t(174));return o}function cg(o,l){switch(vt(hc,l),vt(dc,o),vt(si,cc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:fs(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=fs(l,o)}St(si),vt(si,l)}function Il(){St(si),St(dc),St(hc)}function GE(o){Ko(hc.current);var l=Ko(si.current),c=fs(l,o.type);l!==c&&(vt(dc,o),vt(si,c))}function dg(o){dc.current===o&&(St(si),St(dc))}var Rt=As(0);function Mh(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var hg=[];function fg(){for(var o=0;o<hg.length;o++)hg[o]._workInProgressVersionPrimary=null;hg.length=0}var Oh=B.ReactCurrentDispatcher,pg=B.ReactCurrentBatchConfig,Qo=0,kt=null,rn=null,un=null,Lh=!1,fc=!1,pc=0,eD=0;function Tn(){throw Error(t(321))}function mg(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!Cr(o[c],l[c]))return!1;return!0}function gg(o,l,c,p,y,w){if(Qo=w,kt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Oh.current=o===null||o.memoizedState===null?iD:sD,o=c(p,y),fc){w=0;do{if(fc=!1,pc=0,25<=w)throw Error(t(301));w+=1,un=rn=null,l.updateQueue=null,Oh.current=oD,o=c(p,y)}while(fc)}if(Oh.current=jh,l=rn!==null&&rn.next!==null,Qo=0,un=rn=kt=null,Lh=!1,l)throw Error(t(300));return o}function yg(){var o=pc!==0;return pc=0,o}function oi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?kt.memoizedState=un=o:un=un.next=o,un}function gr(){if(rn===null){var o=kt.alternate;o=o!==null?o.memoizedState:null}else o=rn.next;var l=un===null?kt.memoizedState:un.next;if(l!==null)un=l,rn=o;else{if(o===null)throw Error(t(310));rn=o,o={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},un===null?kt.memoizedState=un=o:un=un.next=o}return un}function mc(o,l){return typeof l=="function"?l(o):l}function vg(o){var l=gr(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=rn,y=p.baseQueue,w=c.pending;if(w!==null){if(y!==null){var S=y.next;y.next=w.next,w.next=S}p.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,p=p.baseState;var F=S=null,$=null,Z=w;do{var ce=Z.lane;if((Qo&ce)===ce)$!==null&&($=$.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),p=Z.hasEagerState?Z.eagerState:o(p,Z.action);else{var he={lane:ce,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};$===null?(F=$=he,S=p):$=$.next=he,kt.lanes|=ce,Yo|=ce}Z=Z.next}while(Z!==null&&Z!==w);$===null?S=p:$.next=F,Cr(p,l.memoizedState)||(jn=!0),l.memoizedState=p,l.baseState=S,l.baseQueue=$,c.lastRenderedState=p}if(o=c.interleaved,o!==null){y=o;do w=y.lane,kt.lanes|=w,Yo|=w,y=y.next;while(y!==o)}else y===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function wg(o){var l=gr(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=c.dispatch,y=c.pending,w=l.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do w=o(w,S.action),S=S.next;while(S!==y);Cr(w,l.memoizedState)||(jn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),c.lastRenderedState=w}return[w,p]}function KE(){}function QE(o,l){var c=kt,p=gr(),y=l(),w=!Cr(p.memoizedState,y);if(w&&(p.memoizedState=y,jn=!0),p=p.queue,_g(JE.bind(null,c,p,o),[o]),p.getSnapshot!==l||w||un!==null&&un.memoizedState.tag&1){if(c.flags|=2048,gc(9,XE.bind(null,c,p,y,l),void 0,null),cn===null)throw Error(t(349));(Qo&30)!==0||YE(c,l,y)}return y}function YE(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=kt.updateQueue,l===null?(l={lastEffect:null,stores:null},kt.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function XE(o,l,c,p){l.value=c,l.getSnapshot=p,ZE(l)&&e0(o)}function JE(o,l,c){return c(function(){ZE(l)&&e0(o)})}function ZE(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!Cr(o,c)}catch{return!0}}function e0(o){var l=zi(o,1);l!==null&&kr(l,o,1,-1)}function t0(o){var l=oi();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:o},l.queue=o,o=o.dispatch=rD.bind(null,kt,o),[l.memoizedState,o]}function gc(o,l,c,p){return o={tag:o,create:l,destroy:c,deps:p,next:null},l=kt.updateQueue,l===null?(l={lastEffect:null,stores:null},kt.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect,c===null?l.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,l.lastEffect=o)),o}function n0(){return gr().memoizedState}function Fh(o,l,c,p){var y=oi();kt.flags|=o,y.memoizedState=gc(1|l,c,void 0,p===void 0?null:p)}function Uh(o,l,c,p){var y=gr();p=p===void 0?null:p;var w=void 0;if(rn!==null){var S=rn.memoizedState;if(w=S.destroy,p!==null&&mg(p,S.deps)){y.memoizedState=gc(l,c,w,p);return}}kt.flags|=o,y.memoizedState=gc(1|l,c,w,p)}function r0(o,l){return Fh(8390656,8,o,l)}function _g(o,l){return Uh(2048,8,o,l)}function i0(o,l){return Uh(4,2,o,l)}function s0(o,l){return Uh(4,4,o,l)}function o0(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function a0(o,l,c){return c=c!=null?c.concat([o]):null,Uh(4,4,o0.bind(null,l,o),c)}function Eg(){}function l0(o,l){var c=gr();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&mg(l,p[1])?p[0]:(c.memoizedState=[o,l],o)}function u0(o,l){var c=gr();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&mg(l,p[1])?p[0]:(o=o(),c.memoizedState=[o,l],o)}function c0(o,l,c){return(Qo&21)===0?(o.baseState&&(o.baseState=!1,jn=!0),o.memoizedState=c):(Cr(c,l)||(c=$u(),kt.lanes|=c,Yo|=c,o.baseState=!0),l)}function tD(o,l){var c=Ge;Ge=c!==0&&4>c?c:4,o(!0);var p=pg.transition;pg.transition={};try{o(!1),l()}finally{Ge=c,pg.transition=p}}function d0(){return gr().memoizedState}function nD(o,l,c){var p=Ms(o);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},h0(o))f0(l,c);else if(c=zE(o,l,c,p),c!==null){var y=Dn();kr(c,o,p,y),p0(c,l,p)}}function rD(o,l,c){var p=Ms(o),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(h0(o))f0(l,y);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var S=l.lastRenderedState,F=w(S,c);if(y.hasEagerState=!0,y.eagerState=F,Cr(F,S)){var $=l.interleaved;$===null?(y.next=y,lg(l)):(y.next=$.next,$.next=y),l.interleaved=y;return}}catch{}c=zE(o,l,y,p),c!==null&&(y=Dn(),kr(c,o,p,y),p0(c,l,p))}}function h0(o){var l=o.alternate;return o===kt||l!==null&&l===kt}function f0(o,l){fc=Lh=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function p0(o,l,c){if((c&4194240)!==0){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Wu(o,c)}}var jh={readContext:mr,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},iD={readContext:mr,useCallback:function(o,l){return oi().memoizedState=[o,l===void 0?null:l],o},useContext:mr,useEffect:r0,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,Fh(4194308,4,o0.bind(null,l,o),c)},useLayoutEffect:function(o,l){return Fh(4194308,4,o,l)},useInsertionEffect:function(o,l){return Fh(4,2,o,l)},useMemo:function(o,l){var c=oi();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var p=oi();return l=c!==void 0?c(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=nD.bind(null,kt,o),[p.memoizedState,o]},useRef:function(o){var l=oi();return o={current:o},l.memoizedState=o},useState:t0,useDebugValue:Eg,useDeferredValue:function(o){return oi().memoizedState=o},useTransition:function(){var o=t0(!1),l=o[0];return o=tD.bind(null,o[1]),oi().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var p=kt,y=oi();if(At){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),cn===null)throw Error(t(349));(Qo&30)!==0||YE(p,l,c)}y.memoizedState=c;var w={value:c,getSnapshot:l};return y.queue=w,r0(JE.bind(null,p,w,o),[o]),p.flags|=2048,gc(9,XE.bind(null,p,w,c,l),void 0,null),c},useId:function(){var o=oi(),l=cn.identifierPrefix;if(At){var c=$i,p=Bi;c=(p&~(1<<32-Xn(p)-1)).toString(32)+c,l=":"+l+"R"+c,c=pc++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=eD++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},sD={readContext:mr,useCallback:l0,useContext:mr,useEffect:_g,useImperativeHandle:a0,useInsertionEffect:i0,useLayoutEffect:s0,useMemo:u0,useReducer:vg,useRef:n0,useState:function(){return vg(mc)},useDebugValue:Eg,useDeferredValue:function(o){var l=gr();return c0(l,rn.memoizedState,o)},useTransition:function(){var o=vg(mc)[0],l=gr().memoizedState;return[o,l]},useMutableSource:KE,useSyncExternalStore:QE,useId:d0,unstable_isNewReconciler:!1},oD={readContext:mr,useCallback:l0,useContext:mr,useEffect:_g,useImperativeHandle:a0,useInsertionEffect:i0,useLayoutEffect:s0,useMemo:u0,useReducer:wg,useRef:n0,useState:function(){return wg(mc)},useDebugValue:Eg,useDeferredValue:function(o){var l=gr();return rn===null?l.memoizedState=o:c0(l,rn.memoizedState,o)},useTransition:function(){var o=wg(mc)[0],l=gr().memoizedState;return[o,l]},useMutableSource:KE,useSyncExternalStore:QE,useId:d0,unstable_isNewReconciler:!1};function br(o,l){if(o&&o.defaultProps){l=J({},l),o=o.defaultProps;for(var c in o)l[c]===void 0&&(l[c]=o[c]);return l}return l}function Tg(o,l,c,p){l=o.memoizedState,c=c(p,l),c=c==null?l:J({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Bh={isMounted:function(o){return(o=o._reactInternals)?Sr(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var p=Dn(),y=Ms(o),w=Wi(p,y);w.payload=l,c!=null&&(w.callback=c),l=ks(o,w,y),l!==null&&(kr(l,o,y,p),Nh(l,o,y))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var p=Dn(),y=Ms(o),w=Wi(p,y);w.tag=1,w.payload=l,c!=null&&(w.callback=c),l=ks(o,w,y),l!==null&&(kr(l,o,y,p),Nh(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=Dn(),p=Ms(o),y=Wi(c,p);y.tag=2,l!=null&&(y.callback=l),l=ks(o,y,p),l!==null&&(kr(l,o,p,c),Nh(l,o,p))}};function m0(o,l,c,p,y,w,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,w,S):l.prototype&&l.prototype.isPureReactComponent?!nc(c,p)||!nc(y,w):!0}function g0(o,l,c){var p=!1,y=bs,w=l.contextType;return typeof w=="object"&&w!==null?w=mr(w):(y=Un(l)?Wo:En.current,p=l.contextTypes,w=(p=p!=null)?gl(o,y):bs),l=new l(c,w),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Bh,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=w),l}function y0(o,l,c,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==o&&Bh.enqueueReplaceState(l,l.state,null)}function Ig(o,l,c,p){var y=o.stateNode;y.props=c,y.state=o.memoizedState,y.refs={},ug(o);var w=l.contextType;typeof w=="object"&&w!==null?y.context=mr(w):(w=Un(l)?Wo:En.current,y.context=gl(o,w)),y.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Tg(o,l,w,c),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&Bh.enqueueReplaceState(y,y.state,null),Vh(o,c,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Sl(o,l){try{var c="",p=l;do c+=oe(p),p=p.return;while(p);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:o,source:l,stack:y,digest:null}}function Sg(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function Pg(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var aD=typeof WeakMap=="function"?WeakMap:Map;function v0(o,l,c){c=Wi(-1,c),c.tag=3,c.payload={element:null};var p=l.value;return c.callback=function(){Kh||(Kh=!0,jg=p),Pg(o,l)},c}function w0(o,l,c){c=Wi(-1,c),c.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;c.payload=function(){return p(y)},c.callback=function(){Pg(o,l)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Pg(o,l),typeof p!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})}),c}function _0(o,l,c){var p=o.pingCache;if(p===null){p=o.pingCache=new aD;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(c)||(y.add(c),o=ED.bind(null,o,l,c),l.then(o,o))}function E0(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function T0(o,l,c,p,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=Wi(-1,1),l.tag=2,ks(c,l,1))),c.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var lD=B.ReactCurrentOwner,jn=!1;function kn(o,l,c,p){l.child=o===null?$E(l,null,c,p):_l(l,o.child,c,p)}function I0(o,l,c,p,y){c=c.render;var w=l.ref;return Tl(l,y),p=gg(o,l,c,p,w,y),c=yg(),o!==null&&!jn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Hi(o,l,y)):(At&&c&&Zm(l),l.flags|=1,kn(o,l,p,y),l.child)}function S0(o,l,c,p,y){if(o===null){var w=c.type;return typeof w=="function"&&!Gg(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=w,P0(o,l,w,p,y)):(o=ef(c.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,(o.lanes&y)===0){var S=w.memoizedProps;if(c=c.compare,c=c!==null?c:nc,c(S,p)&&o.ref===l.ref)return Hi(o,l,y)}return l.flags|=1,o=Ls(w,p),o.ref=l.ref,o.return=l,l.child=o}function P0(o,l,c,p,y){if(o!==null){var w=o.memoizedProps;if(nc(w,p)&&o.ref===l.ref)if(jn=!1,l.pendingProps=p=w,(o.lanes&y)!==0)(o.flags&131072)!==0&&(jn=!0);else return l.lanes=o.lanes,Hi(o,l,y)}return Cg(o,l,c,p,y)}function C0(o,l,c){var p=l.pendingProps,y=p.children,w=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Cl,ir),ir|=c;else{if((c&1073741824)===0)return o=w!==null?w.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,vt(Cl,ir),ir|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:c,vt(Cl,ir),ir|=p}else w!==null?(p=w.baseLanes|c,l.memoizedState=null):p=c,vt(Cl,ir),ir|=p;return kn(o,l,y,c),l.child}function A0(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function Cg(o,l,c,p,y){var w=Un(c)?Wo:En.current;return w=gl(l,w),Tl(l,y),c=gg(o,l,c,p,w,y),p=yg(),o!==null&&!jn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Hi(o,l,y)):(At&&p&&Zm(l),l.flags|=1,kn(o,l,c,y),l.child)}function b0(o,l,c,p,y){if(Un(c)){var w=!0;Ph(l)}else w=!1;if(Tl(l,y),l.stateNode===null)zh(o,l),g0(l,c,p),Ig(l,c,p,y),p=!0;else if(o===null){var S=l.stateNode,F=l.memoizedProps;S.props=F;var $=S.context,Z=c.contextType;typeof Z=="object"&&Z!==null?Z=mr(Z):(Z=Un(c)?Wo:En.current,Z=gl(l,Z));var ce=c.getDerivedStateFromProps,he=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function";he||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==p||$!==Z)&&y0(l,S,p,Z),Rs=!1;var le=l.memoizedState;S.state=le,Vh(l,p,S,y),$=l.memoizedState,F!==p||le!==$||Fn.current||Rs?(typeof ce=="function"&&(Tg(l,c,ce,p),$=l.memoizedState),(F=Rs||m0(l,c,F,p,le,$,Z))?(he||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=$),S.props=p,S.state=$,S.context=Z,p=F):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{S=l.stateNode,WE(o,l),F=l.memoizedProps,Z=l.type===l.elementType?F:br(l.type,F),S.props=Z,he=l.pendingProps,le=S.context,$=c.contextType,typeof $=="object"&&$!==null?$=mr($):($=Un(c)?Wo:En.current,$=gl(l,$));var we=c.getDerivedStateFromProps;(ce=typeof we=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==he||le!==$)&&y0(l,S,p,$),Rs=!1,le=l.memoizedState,S.state=le,Vh(l,p,S,y);var Pe=l.memoizedState;F!==he||le!==Pe||Fn.current||Rs?(typeof we=="function"&&(Tg(l,c,we,p),Pe=l.memoizedState),(Z=Rs||m0(l,c,Z,p,le,Pe,$)||!1)?(ce||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Pe,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Pe,$)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&le===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&le===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Pe),S.props=p,S.state=Pe,S.context=$,p=Z):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&le===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&le===o.memoizedState||(l.flags|=1024),p=!1)}return Ag(o,l,c,p,w,y)}function Ag(o,l,c,p,y,w){A0(o,l);var S=(l.flags&128)!==0;if(!p&&!S)return y&&NE(l,c,!1),Hi(o,l,w);p=l.stateNode,lD.current=l;var F=S&&typeof c.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&S?(l.child=_l(l,o.child,null,w),l.child=_l(l,null,F,w)):kn(o,l,F,w),l.memoizedState=p.state,y&&NE(l,c,!0),l.child}function x0(o){var l=o.stateNode;l.pendingContext?kE(o,l.pendingContext,l.pendingContext!==l.context):l.context&&kE(o,l.context,!1),cg(o,l.containerInfo)}function R0(o,l,c,p,y){return wl(),rg(y),l.flags|=256,kn(o,l,c,p),l.child}var bg={dehydrated:null,treeContext:null,retryLane:0};function xg(o){return{baseLanes:o,cachePool:null,transitions:null}}function k0(o,l,c){var p=l.pendingProps,y=Rt.current,w=!1,S=(l.flags&128)!==0,F;if((F=S)||(F=o!==null&&o.memoizedState===null?!1:(y&2)!==0),F?(w=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),vt(Rt,y&1),o===null)return ng(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(S=p.children,o=p.fallback,w?(p=l.mode,w=l.child,S={mode:"hidden",children:S},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=S):w=tf(S,p,0,null),o=ea(o,p,c,null),w.return=l,o.return=l,w.sibling=o,l.child=w,l.child.memoizedState=xg(c),l.memoizedState=bg,o):Rg(l,S));if(y=o.memoizedState,y!==null&&(F=y.dehydrated,F!==null))return uD(o,l,S,p,F,y,c);if(w){w=p.fallback,S=l.mode,y=o.child,F=y.sibling;var $={mode:"hidden",children:p.children};return(S&1)===0&&l.child!==y?(p=l.child,p.childLanes=0,p.pendingProps=$,l.deletions=null):(p=Ls(y,$),p.subtreeFlags=y.subtreeFlags&14680064),F!==null?w=Ls(F,w):(w=ea(w,S,c,null),w.flags|=2),w.return=l,p.return=l,p.sibling=w,l.child=p,p=w,w=l.child,S=o.child.memoizedState,S=S===null?xg(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},w.memoizedState=S,w.childLanes=o.childLanes&~c,l.memoizedState=bg,p}return w=o.child,o=w.sibling,p=Ls(w,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=c),p.return=l,p.sibling=null,o!==null&&(c=l.deletions,c===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=p,l.memoizedState=null,p}function Rg(o,l){return l=tf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function $h(o,l,c,p){return p!==null&&rg(p),_l(l,o.child,null,c),o=Rg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function uD(o,l,c,p,y,w,S){if(c)return l.flags&256?(l.flags&=-257,p=Sg(Error(t(422))),$h(o,l,S,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(w=p.fallback,y=l.mode,p=tf({mode:"visible",children:p.children},y,0,null),w=ea(w,y,S,null),w.flags|=2,p.return=l,w.return=l,p.sibling=w,l.child=p,(l.mode&1)!==0&&_l(l,o.child,null,S),l.child.memoizedState=xg(S),l.memoizedState=bg,w);if((l.mode&1)===0)return $h(o,l,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var F=p.dgst;return p=F,w=Error(t(419)),p=Sg(w,p,void 0),$h(o,l,S,p)}if(F=(S&o.childLanes)!==0,jn||F){if(p=cn,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,zi(o,y),kr(p,o,y,-1))}return qg(),p=Sg(Error(t(421))),$h(o,l,S,p)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=TD.bind(null,o),y._reactRetry=l,null):(o=w.treeContext,rr=Cs(y.nextSibling),nr=l,At=!0,Ar=null,o!==null&&(fr[pr++]=Bi,fr[pr++]=$i,fr[pr++]=Ho,Bi=o.id,$i=o.overflow,Ho=l),l=Rg(l,p.children),l.flags|=4096,l)}function D0(o,l,c){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),ag(o.return,l,c)}function kg(o,l,c,p,y){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=c,w.tailMode=y)}function N0(o,l,c){var p=l.pendingProps,y=p.revealOrder,w=p.tail;if(kn(o,l,p.children,c),p=Rt.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&D0(o,c,l);else if(o.tag===19)D0(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(vt(Rt,p),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&Mh(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),kg(l,!1,y,c,w);break;case"backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&Mh(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}kg(l,!0,c,null,w);break;case"together":kg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function zh(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Hi(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),Yo|=l.lanes,(c&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,c=Ls(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=Ls(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function cD(o,l,c){switch(l.tag){case 3:x0(l),wl();break;case 5:GE(l);break;case 1:Un(l.type)&&Ph(l);break;case 4:cg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,y=l.memoizedProps.value;vt(kh,p._currentValue),p._currentValue=y;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(vt(Rt,Rt.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?k0(o,l,c):(vt(Rt,Rt.current&1),o=Hi(o,l,c),o!==null?o.sibling:null);vt(Rt,Rt.current&1);break;case 19:if(p=(c&l.childLanes)!==0,(o.flags&128)!==0){if(p)return N0(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),vt(Rt,Rt.current),p)break;return null;case 22:case 23:return l.lanes=0,C0(o,l,c)}return Hi(o,l,c)}var V0,Dg,M0,O0;V0=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Dg=function(){},M0=function(o,l,c,p){var y=o.memoizedProps;if(y!==p){o=l.stateNode,Ko(si.current);var w=null;switch(c){case"input":y=Ai(o,y),p=Ai(o,p),w=[];break;case"select":y=J({},y,{value:void 0}),p=J({},p,{value:void 0}),w=[];break;case"textarea":y=ds(o,y),p=ds(o,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=Th)}Ir(c,p);var S;c=null;for(Z in y)if(!p.hasOwnProperty(Z)&&y.hasOwnProperty(Z)&&y[Z]!=null)if(Z==="style"){var F=y[Z];for(S in F)F.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(i.hasOwnProperty(Z)?w||(w=[]):(w=w||[]).push(Z,null));for(Z in p){var $=p[Z];if(F=y?.[Z],p.hasOwnProperty(Z)&&$!==F&&($!=null||F!=null))if(Z==="style")if(F){for(S in F)!F.hasOwnProperty(S)||$&&$.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in $)$.hasOwnProperty(S)&&F[S]!==$[S]&&(c||(c={}),c[S]=$[S])}else c||(w||(w=[]),w.push(Z,c)),c=$;else Z==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(w=w||[]).push(Z,$)):Z==="children"?typeof $!="string"&&typeof $!="number"||(w=w||[]).push(Z,""+$):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(i.hasOwnProperty(Z)?($!=null&&Z==="onScroll"&&It("scroll",o),w||F===$||(w=[])):(w=w||[]).push(Z,$))}c&&(w=w||[]).push("style",c);var Z=w;(l.updateQueue=Z)&&(l.flags|=4)}},O0=function(o,l,c,p){c!==p&&(l.flags|=4)};function yc(o,l){if(!At)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function In(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=c,l}function dD(o,l,c){var p=l.pendingProps;switch(eg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(l),null;case 1:return Un(l.type)&&Sh(),In(l),null;case 3:return p=l.stateNode,Il(),St(Fn),St(En),fg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(xh(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ar!==null&&(zg(Ar),Ar=null))),Dg(o,l),In(l),null;case 5:dg(l);var y=Ko(hc.current);if(c=l.type,o!==null&&l.stateNode!=null)M0(o,l,c,p,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return In(l),null}if(o=Ko(si.current),xh(l)){p=l.stateNode,c=l.type;var w=l.memoizedProps;switch(p[ii]=l,p[ac]=w,o=(l.mode&1)!==0,c){case"dialog":It("cancel",p),It("close",p);break;case"iframe":case"object":case"embed":It("load",p);break;case"video":case"audio":for(y=0;y<ic.length;y++)It(ic[y],p);break;case"source":It("error",p);break;case"img":case"image":case"link":It("error",p),It("load",p);break;case"details":It("toggle",p);break;case"input":za(p,w),It("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},It("invalid",p);break;case"textarea":hs(p,w),It("invalid",p)}Ir(c,w),y=null;for(var S in w)if(w.hasOwnProperty(S)){var F=w[S];S==="children"?typeof F=="string"?p.textContent!==F&&(w.suppressHydrationWarning!==!0&&Eh(p.textContent,F,o),y=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(w.suppressHydrationWarning!==!0&&Eh(p.textContent,F,o),y=["children",""+F]):i.hasOwnProperty(S)&&F!=null&&S==="onScroll"&&It("scroll",p)}switch(c){case"input":$t(p),Ao(p,w,!0);break;case"textarea":$t(p),jr(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Th)}p=y,l.updateQueue=p,p!==null&&(l.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=xo(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=S.createElement(c,{is:p.is}):(o=S.createElement(c),c==="select"&&(S=o,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):o=S.createElementNS(o,c),o[ii]=l,o[ac]=p,V0(o,l,!1,!1),l.stateNode=o;e:{switch(S=qa(c,p),c){case"dialog":It("cancel",o),It("close",o),y=p;break;case"iframe":case"object":case"embed":It("load",o),y=p;break;case"video":case"audio":for(y=0;y<ic.length;y++)It(ic[y],o);y=p;break;case"source":It("error",o),y=p;break;case"img":case"image":case"link":It("error",o),It("load",o),y=p;break;case"details":It("toggle",o),y=p;break;case"input":za(o,p),y=Ai(o,p),It("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=J({},p,{value:void 0}),It("invalid",o);break;case"textarea":hs(o,p),y=ds(o,p),It("invalid",o);break;default:y=p}Ir(c,y),F=y;for(w in F)if(F.hasOwnProperty(w)){var $=F[w];w==="style"?Ha(o,$):w==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&$r(o,$)):w==="children"?typeof $=="string"?(c!=="textarea"||$!=="")&&Tr(o,$):typeof $=="number"&&Tr(o,""+$):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?$!=null&&w==="onScroll"&&It("scroll",o):$!=null&&D(o,w,$,S))}switch(c){case"input":$t(o),Ao(o,p,!1);break;case"textarea":$t(o),jr(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Le(p.value));break;case"select":o.multiple=!!p.multiple,w=p.value,w!=null?Qn(o,!!p.multiple,w,!1):p.defaultValue!=null&&Qn(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=Th)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return In(l),null;case 6:if(o&&l.stateNode!=null)O0(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(c=Ko(hc.current),Ko(si.current),xh(l)){if(p=l.stateNode,c=l.memoizedProps,p[ii]=l,(w=p.nodeValue!==c)&&(o=nr,o!==null))switch(o.tag){case 3:Eh(p.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Eh(p.nodeValue,c,(o.mode&1)!==0)}w&&(l.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[ii]=l,l.stateNode=p}return In(l),null;case 13:if(St(Rt),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(At&&rr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)UE(),wl(),l.flags|=98560,w=!1;else if(w=xh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(t(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[ii]=l}else wl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;In(l),w=!1}else Ar!==null&&(zg(Ar),Ar=null),w=!0;if(!w)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Rt.current&1)!==0?sn===0&&(sn=3):qg())),l.updateQueue!==null&&(l.flags|=4),In(l),null);case 4:return Il(),Dg(o,l),o===null&&sc(l.stateNode.containerInfo),In(l),null;case 10:return og(l.type._context),In(l),null;case 17:return Un(l.type)&&Sh(),In(l),null;case 19:if(St(Rt),w=l.memoizedState,w===null)return In(l),null;if(p=(l.flags&128)!==0,S=w.rendering,S===null)if(p)yc(w,!1);else{if(sn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(S=Mh(o),S!==null){for(l.flags|=128,yc(w,!1),p=S.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=c,c=l.child;c!==null;)w=c,o=p,w.flags&=14680066,S=w.alternate,S===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=S.childLanes,w.lanes=S.lanes,w.child=S.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=S.memoizedProps,w.memoizedState=S.memoizedState,w.updateQueue=S.updateQueue,w.type=S.type,o=S.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return vt(Rt,Rt.current&1|2),l.child}o=o.sibling}w.tail!==null&&Tt()>Al&&(l.flags|=128,p=!0,yc(w,!1),l.lanes=4194304)}else{if(!p)if(o=Mh(S),o!==null){if(l.flags|=128,p=!0,c=o.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),yc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!S.alternate&&!At)return In(l),null}else 2*Tt()-w.renderingStartTime>Al&&c!==1073741824&&(l.flags|=128,p=!0,yc(w,!1),l.lanes=4194304);w.isBackwards?(S.sibling=l.child,l.child=S):(c=w.last,c!==null?c.sibling=S:l.child=S,w.last=S)}return w.tail!==null?(l=w.tail,w.rendering=l,w.tail=l.sibling,w.renderingStartTime=Tt(),l.sibling=null,c=Rt.current,vt(Rt,p?c&1|2:c&1),l):(In(l),null);case 22:case 23:return Hg(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(ir&1073741824)!==0&&(In(l),l.subtreeFlags&6&&(l.flags|=8192)):In(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function hD(o,l){switch(eg(l),l.tag){case 1:return Un(l.type)&&Sh(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Il(),St(Fn),St(En),fg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return dg(l),null;case 13:if(St(Rt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));wl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return St(Rt),null;case 4:return Il(),null;case 10:return og(l.type._context),null;case 22:case 23:return Hg(),null;case 24:return null;default:return null}}var Wh=!1,Sn=!1,fD=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Pl(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Ft(o,l,p)}else c.current=null}function Ng(o,l,c){try{c()}catch(p){Ft(o,l,p)}}var L0=!1;function pD(o,l){if(Hm=Oi,o=mE(),Lm(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var S=0,F=-1,$=-1,Z=0,ce=0,he=o,le=null;t:for(;;){for(var we;he!==c||y!==0&&he.nodeType!==3||(F=S+y),he!==w||p!==0&&he.nodeType!==3||($=S+p),he.nodeType===3&&(S+=he.nodeValue.length),(we=he.firstChild)!==null;)le=he,he=we;for(;;){if(he===o)break t;if(le===c&&++Z===y&&(F=S),le===w&&++ce===p&&($=S),(we=he.nextSibling)!==null)break;he=le,le=he.parentNode}he=we}c=F===-1||$===-1?null:{start:F,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(qm={focusedElem:o,selectionRange:c},Oi=!1,Te=l;Te!==null;)if(l=Te,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Te=o;else for(;Te!==null;){l=Te;try{var Pe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var be=Pe.memoizedProps,Wt=Pe.memoizedState,G=l.stateNode,W=G.getSnapshotBeforeUpdate(l.elementType===l.type?be:br(l.type,be),Wt);G.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=l.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Ft(l,l.return,fe)}if(o=l.sibling,o!==null){o.return=l.return,Te=o;break}Te=l.return}return Pe=L0,L0=!1,Pe}function vc(o,l,c){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var w=y.destroy;y.destroy=void 0,w!==void 0&&Ng(l,c,w)}y=y.next}while(y!==p)}}function Hh(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==l)}}function Vg(o){var l=o.ref;if(l!==null){var c=o.stateNode;o.tag,o=c,typeof l=="function"?l(o):l.current=o}}function F0(o){var l=o.alternate;l!==null&&(o.alternate=null,F0(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ii],delete l[ac],delete l[Ym],delete l[Yk],delete l[Xk])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function U0(o){return o.tag===5||o.tag===3||o.tag===4}function j0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||U0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Mg(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Th));else if(p!==4&&(o=o.child,o!==null))for(Mg(o,l,c),o=o.sibling;o!==null;)Mg(o,l,c),o=o.sibling}function Og(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(Og(o,l,c),o=o.sibling;o!==null;)Og(o,l,c),o=o.sibling}var yn=null,xr=!1;function Ds(o,l,c){for(c=c.child;c!==null;)B0(o,l,c),c=c.sibling}function B0(o,l,c){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Vo,c)}catch{}switch(c.tag){case 5:Sn||Pl(c,l);case 6:var p=yn,y=xr;yn=null,Ds(o,l,c),yn=p,xr=y,yn!==null&&(xr?(o=yn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):yn.removeChild(c.stateNode));break;case 18:yn!==null&&(xr?(o=yn,c=c.stateNode,o.nodeType===8?Qm(o.parentNode,c):o.nodeType===1&&Qm(o,c),Ts(o)):Qm(yn,c.stateNode));break;case 4:p=yn,y=xr,yn=c.stateNode.containerInfo,xr=!0,Ds(o,l,c),yn=p,xr=y;break;case 0:case 11:case 14:case 15:if(!Sn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,S=w.destroy;w=w.tag,S!==void 0&&((w&2)!==0||(w&4)!==0)&&Ng(c,l,S),y=y.next}while(y!==p)}Ds(o,l,c);break;case 1:if(!Sn&&(Pl(c,l),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(F){Ft(c,l,F)}Ds(o,l,c);break;case 21:Ds(o,l,c);break;case 22:c.mode&1?(Sn=(p=Sn)||c.memoizedState!==null,Ds(o,l,c),Sn=p):Ds(o,l,c);break;default:Ds(o,l,c)}}function $0(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new fD),l.forEach(function(p){var y=ID.bind(null,o,p);c.has(p)||(c.add(p),p.then(y,y))})}}function Rr(o,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var w=o,S=l,F=S;e:for(;F!==null;){switch(F.tag){case 5:yn=F.stateNode,xr=!1;break e;case 3:yn=F.stateNode.containerInfo,xr=!0;break e;case 4:yn=F.stateNode.containerInfo,xr=!0;break e}F=F.return}if(yn===null)throw Error(t(160));B0(w,S,y),yn=null,xr=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(Z){Ft(y,l,Z)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)z0(l,o),l=l.sibling}function z0(o,l){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Rr(l,o),ai(o),p&4){try{vc(3,o,o.return),Hh(3,o)}catch(be){Ft(o,o.return,be)}try{vc(5,o,o.return)}catch(be){Ft(o,o.return,be)}}break;case 1:Rr(l,o),ai(o),p&512&&c!==null&&Pl(c,c.return);break;case 5:if(Rr(l,o),ai(o),p&512&&c!==null&&Pl(c,c.return),o.flags&32){var y=o.stateNode;try{Tr(y,"")}catch(be){Ft(o,o.return,be)}}if(p&4&&(y=o.stateNode,y!=null)){var w=o.memoizedProps,S=c!==null?c.memoizedProps:w,F=o.type,$=o.updateQueue;if(o.updateQueue=null,$!==null)try{F==="input"&&w.type==="radio"&&w.name!=null&&Ur(y,w),qa(F,S);var Z=qa(F,w);for(S=0;S<$.length;S+=2){var ce=$[S],he=$[S+1];ce==="style"?Ha(y,he):ce==="dangerouslySetInnerHTML"?$r(y,he):ce==="children"?Tr(y,he):D(y,ce,he,Z)}switch(F){case"input":bi(y,w);break;case"textarea":bo(y,w);break;case"select":var le=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var we=w.value;we!=null?Qn(y,!!w.multiple,we,!1):le!==!!w.multiple&&(w.defaultValue!=null?Qn(y,!!w.multiple,w.defaultValue,!0):Qn(y,!!w.multiple,w.multiple?[]:"",!1))}y[ac]=w}catch(be){Ft(o,o.return,be)}}break;case 6:if(Rr(l,o),ai(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,w=o.memoizedProps;try{y.nodeValue=w}catch(be){Ft(o,o.return,be)}}break;case 3:if(Rr(l,o),ai(o),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Ts(l.containerInfo)}catch(be){Ft(o,o.return,be)}break;case 4:Rr(l,o),ai(o);break;case 13:Rr(l,o),ai(o),y=o.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Ug=Tt())),p&4&&$0(o);break;case 22:if(ce=c!==null&&c.memoizedState!==null,o.mode&1?(Sn=(Z=Sn)||ce,Rr(l,o),Sn=Z):Rr(l,o),ai(o),p&8192){if(Z=o.memoizedState!==null,(o.stateNode.isHidden=Z)&&!ce&&(o.mode&1)!==0)for(Te=o,ce=o.child;ce!==null;){for(he=Te=ce;Te!==null;){switch(le=Te,we=le.child,le.tag){case 0:case 11:case 14:case 15:vc(4,le,le.return);break;case 1:Pl(le,le.return);var Pe=le.stateNode;if(typeof Pe.componentWillUnmount=="function"){p=le,c=le.return;try{l=p,Pe.props=l.memoizedProps,Pe.state=l.memoizedState,Pe.componentWillUnmount()}catch(be){Ft(p,c,be)}}break;case 5:Pl(le,le.return);break;case 22:if(le.memoizedState!==null){q0(he);continue}}we!==null?(we.return=le,Te=we):q0(he)}ce=ce.sibling}e:for(ce=null,he=o;;){if(he.tag===5){if(ce===null){ce=he;try{y=he.stateNode,Z?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(F=he.stateNode,$=he.memoizedProps.style,S=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=zr("display",S))}catch(be){Ft(o,o.return,be)}}}else if(he.tag===6){if(ce===null)try{he.stateNode.nodeValue=Z?"":he.memoizedProps}catch(be){Ft(o,o.return,be)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===o)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===o)break e;for(;he.sibling===null;){if(he.return===null||he.return===o)break e;ce===he&&(ce=null),he=he.return}ce===he&&(ce=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Rr(l,o),ai(o),p&4&&$0(o);break;case 21:break;default:Rr(l,o),ai(o)}}function ai(o){var l=o.flags;if(l&2){try{e:{for(var c=o.return;c!==null;){if(U0(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Tr(y,""),p.flags&=-33);var w=j0(o);Og(o,w,y);break;case 3:case 4:var S=p.stateNode.containerInfo,F=j0(o);Mg(o,F,S);break;default:throw Error(t(161))}}catch($){Ft(o,o.return,$)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function mD(o,l,c){Te=o,W0(o)}function W0(o,l,c){for(var p=(o.mode&1)!==0;Te!==null;){var y=Te,w=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||Wh;if(!S){var F=y.alternate,$=F!==null&&F.memoizedState!==null||Sn;F=Wh;var Z=Sn;if(Wh=S,(Sn=$)&&!Z)for(Te=y;Te!==null;)S=Te,$=S.child,S.tag===22&&S.memoizedState!==null?G0(y):$!==null?($.return=S,Te=$):G0(y);for(;w!==null;)Te=w,W0(w),w=w.sibling;Te=y,Wh=F,Sn=Z}H0(o)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,Te=w):H0(o)}}function H0(o){for(;Te!==null;){var l=Te;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Sn||Hh(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Sn)if(c===null)p.componentDidMount();else{var y=l.elementType===l.type?c.memoizedProps:br(l.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=l.updateQueue;w!==null&&qE(l,w,p);break;case 3:var S=l.updateQueue;if(S!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}qE(l,S,c)}break;case 5:var F=l.stateNode;if(c===null&&l.flags&4){c=F;var $=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&c.focus();break;case"img":$.src&&(c.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Z=l.alternate;if(Z!==null){var ce=Z.memoizedState;if(ce!==null){var he=ce.dehydrated;he!==null&&Ts(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Sn||l.flags&512&&Vg(l)}catch(le){Ft(l,l.return,le)}}if(l===o){Te=null;break}if(c=l.sibling,c!==null){c.return=l.return,Te=c;break}Te=l.return}}function q0(o){for(;Te!==null;){var l=Te;if(l===o){Te=null;break}var c=l.sibling;if(c!==null){c.return=l.return,Te=c;break}Te=l.return}}function G0(o){for(;Te!==null;){var l=Te;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{Hh(4,l)}catch($){Ft(l,c,$)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var y=l.return;try{p.componentDidMount()}catch($){Ft(l,y,$)}}var w=l.return;try{Vg(l)}catch($){Ft(l,w,$)}break;case 5:var S=l.return;try{Vg(l)}catch($){Ft(l,S,$)}}}catch($){Ft(l,l.return,$)}if(l===o){Te=null;break}var F=l.sibling;if(F!==null){F.return=l.return,Te=F;break}Te=l.return}}var gD=Math.ceil,qh=B.ReactCurrentDispatcher,Lg=B.ReactCurrentOwner,yr=B.ReactCurrentBatchConfig,Ze=0,cn=null,Jt=null,vn=0,ir=0,Cl=As(0),sn=0,wc=null,Yo=0,Gh=0,Fg=0,_c=null,Bn=null,Ug=0,Al=1/0,qi=null,Kh=!1,jg=null,Ns=null,Qh=!1,Vs=null,Yh=0,Ec=0,Bg=null,Xh=-1,Jh=0;function Dn(){return(Ze&6)!==0?Tt():Xh!==-1?Xh:Xh=Tt()}function Ms(o){return(o.mode&1)===0?1:(Ze&2)!==0&&vn!==0?vn&-vn:Zk.transition!==null?(Jh===0&&(Jh=$u()),Jh):(o=Ge,o!==0||(o=window.event,o=o===void 0?16:nl(o.type)),o)}function kr(o,l,c,p){if(50<Ec)throw Ec=0,Bg=null,Error(t(185));Fo(o,c,p),((Ze&2)===0||o!==cn)&&(o===cn&&((Ze&2)===0&&(Gh|=c),sn===4&&Os(o,vn)),$n(o,p),c===1&&Ze===0&&(l.mode&1)===0&&(Al=Tt()+500,Ch&&xs()))}function $n(o,l){var c=o.callbackNode;Lo(o,l);var p=Ni(o,o===cn?vn:0);if(p===0)c!==null&&Qa(c),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(c!=null&&Qa(c),l===1)o.tag===0?Jk(Q0.bind(null,o)):VE(Q0.bind(null,o)),Kk(function(){(Ze&6)===0&&xs()}),c=null;else{switch(Kr(p)){case 1:c=Ya;break;case 4:c=Uu;break;case 16:c=No;break;case 536870912:c=Xa;break;default:c=No}c=rT(c,K0.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function K0(o,l){if(Xh=-1,Jh=0,(Ze&6)!==0)throw Error(t(327));var c=o.callbackNode;if(bl()&&o.callbackNode!==c)return null;var p=Ni(o,o===cn?vn:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||l)l=Zh(o,p);else{l=p;var y=Ze;Ze|=2;var w=X0();(cn!==o||vn!==l)&&(qi=null,Al=Tt()+500,Jo(o,l));do try{wD();break}catch(F){Y0(o,F)}while(!0);sg(),qh.current=w,Ze=y,Jt!==null?l=0:(cn=null,vn=0,l=sn)}if(l!==0){if(l===2&&(y=Bu(o),y!==0&&(p=y,l=$g(o,y))),l===1)throw c=wc,Jo(o,0),Os(o,p),$n(o,Tt()),c;if(l===6)Os(o,p);else{if(y=o.current.alternate,(p&30)===0&&!yD(y)&&(l=Zh(o,p),l===2&&(w=Bu(o),w!==0&&(p=w,l=$g(o,w))),l===1))throw c=wc,Jo(o,0),Os(o,p),$n(o,Tt()),c;switch(o.finishedWork=y,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:Zo(o,Bn,qi);break;case 3:if(Os(o,p),(p&130023424)===p&&(l=Ug+500-Tt(),10<l)){if(Ni(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){Dn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=Km(Zo.bind(null,o,Bn,qi),l);break}Zo(o,Bn,qi);break;case 4:if(Os(o,p),(p&4194240)===p)break;for(l=o.eventTimes,y=-1;0<p;){var S=31-Xn(p);w=1<<S,S=l[S],S>y&&(y=S),p&=~w}if(p=y,p=Tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*gD(p/1960))-p,10<p){o.timeoutHandle=Km(Zo.bind(null,o,Bn,qi),p);break}Zo(o,Bn,qi);break;case 5:Zo(o,Bn,qi);break;default:throw Error(t(329))}}}return $n(o,Tt()),o.callbackNode===c?K0.bind(null,o):null}function $g(o,l){var c=_c;return o.current.memoizedState.isDehydrated&&(Jo(o,l).flags|=256),o=Zh(o,l),o!==2&&(l=Bn,Bn=c,l!==null&&zg(l)),o}function zg(o){Bn===null?Bn=o:Bn.push.apply(Bn,o)}function yD(o){for(var l=o;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],w=y.getSnapshot;y=y.value;try{if(!Cr(w(),y))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Os(o,l){for(l&=~Fg,l&=~Gh,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-Xn(l),p=1<<c;o[c]=-1,l&=~p}}function Q0(o){if((Ze&6)!==0)throw Error(t(327));bl();var l=Ni(o,0);if((l&1)===0)return $n(o,Tt()),null;var c=Zh(o,l);if(o.tag!==0&&c===2){var p=Bu(o);p!==0&&(l=p,c=$g(o,p))}if(c===1)throw c=wc,Jo(o,0),Os(o,l),$n(o,Tt()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Zo(o,Bn,qi),$n(o,Tt()),null}function Wg(o,l){var c=Ze;Ze|=1;try{return o(l)}finally{Ze=c,Ze===0&&(Al=Tt()+500,Ch&&xs())}}function Xo(o){Vs!==null&&Vs.tag===0&&(Ze&6)===0&&bl();var l=Ze;Ze|=1;var c=yr.transition,p=Ge;try{if(yr.transition=null,Ge=1,o)return o()}finally{Ge=p,yr.transition=c,Ze=l,(Ze&6)===0&&xs()}}function Hg(){ir=Cl.current,St(Cl)}function Jo(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,Gk(c)),Jt!==null)for(c=Jt.return;c!==null;){var p=c;switch(eg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Sh();break;case 3:Il(),St(Fn),St(En),fg();break;case 5:dg(p);break;case 4:Il();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:og(p.type._context);break;case 22:case 23:Hg()}c=c.return}if(cn=o,Jt=o=Ls(o.current,null),vn=ir=l,sn=0,wc=null,Fg=Gh=Yo=0,Bn=_c=null,Go!==null){for(l=0;l<Go.length;l++)if(c=Go[l],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,w=c.pending;if(w!==null){var S=w.next;w.next=y,p.next=S}c.pending=p}Go=null}return o}function Y0(o,l){do{var c=Jt;try{if(sg(),Oh.current=jh,Lh){for(var p=kt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Lh=!1}if(Qo=0,un=rn=kt=null,fc=!1,pc=0,Lg.current=null,c===null||c.return===null){sn=1,wc=l,Jt=null;break}e:{var w=o,S=c.return,F=c,$=l;if(l=vn,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var Z=$,ce=F,he=ce.tag;if((ce.mode&1)===0&&(he===0||he===11||he===15)){var le=ce.alternate;le?(ce.updateQueue=le.updateQueue,ce.memoizedState=le.memoizedState,ce.lanes=le.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var we=E0(S);if(we!==null){we.flags&=-257,T0(we,S,F,w,l),we.mode&1&&_0(w,Z,l),l=we,$=Z;var Pe=l.updateQueue;if(Pe===null){var be=new Set;be.add($),l.updateQueue=be}else Pe.add($);break e}else{if((l&1)===0){_0(w,Z,l),qg();break e}$=Error(t(426))}}else if(At&&F.mode&1){var Wt=E0(S);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),T0(Wt,S,F,w,l),rg(Sl($,F));break e}}w=$=Sl($,F),sn!==4&&(sn=2),_c===null?_c=[w]:_c.push(w),w=S;do{switch(w.tag){case 3:w.flags|=65536,l&=-l,w.lanes|=l;var G=v0(w,$,l);HE(w,G);break e;case 1:F=$;var W=w.type,Y=w.stateNode;if((w.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Ns===null||!Ns.has(Y)))){w.flags|=65536,l&=-l,w.lanes|=l;var fe=w0(w,F,l);HE(w,fe);break e}}w=w.return}while(w!==null)}Z0(c)}catch(Re){l=Re,Jt===c&&c!==null&&(Jt=c=c.return);continue}break}while(!0)}function X0(){var o=qh.current;return qh.current=jh,o===null?jh:o}function qg(){(sn===0||sn===3||sn===2)&&(sn=4),cn===null||(Yo&268435455)===0&&(Gh&268435455)===0||Os(cn,vn)}function Zh(o,l){var c=Ze;Ze|=2;var p=X0();(cn!==o||vn!==l)&&(qi=null,Jo(o,l));do try{vD();break}catch(y){Y0(o,y)}while(!0);if(sg(),Ze=c,qh.current=p,Jt!==null)throw Error(t(261));return cn=null,vn=0,sn}function vD(){for(;Jt!==null;)J0(Jt)}function wD(){for(;Jt!==null&&!Do();)J0(Jt)}function J0(o){var l=nT(o.alternate,o,ir);o.memoizedProps=o.pendingProps,l===null?Z0(o):Jt=l,Lg.current=null}function Z0(o){var l=o;do{var c=l.alternate;if(o=l.return,(l.flags&32768)===0){if(c=dD(c,l,ir),c!==null){Jt=c;return}}else{if(c=hD(c,l),c!==null){c.flags&=32767,Jt=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{sn=6,Jt=null;return}}if(l=l.sibling,l!==null){Jt=l;return}Jt=l=o}while(l!==null);sn===0&&(sn=5)}function Zo(o,l,c){var p=Ge,y=yr.transition;try{yr.transition=null,Ge=1,_D(o,l,c,p)}finally{yr.transition=y,Ge=p}return null}function _D(o,l,c,p){do bl();while(Vs!==null);if((Ze&6)!==0)throw Error(t(327));c=o.finishedWork;var y=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var w=c.lanes|c.childLanes;if(Dm(o,w),o===cn&&(Jt=cn=null,vn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Qh||(Qh=!0,rT(No,function(){return bl(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=yr.transition,yr.transition=null;var S=Ge;Ge=1;var F=Ze;Ze|=4,Lg.current=null,pD(o,c),z0(c,o),jk(qm),Oi=!!Hm,qm=Hm=null,o.current=c,mD(c),Di(),Ze=F,Ge=S,yr.transition=w}else o.current=c;if(Qh&&(Qh=!1,Vs=o,Yh=y),w=o.pendingLanes,w===0&&(Ns=null),oh(c.stateNode),$n(o,Tt()),l!==null)for(p=o.onRecoverableError,c=0;c<l.length;c++)y=l[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(Kh)throw Kh=!1,o=jg,jg=null,o;return(Yh&1)!==0&&o.tag!==0&&bl(),w=o.pendingLanes,(w&1)!==0?o===Bg?Ec++:(Ec=0,Bg=o):Ec=0,xs(),null}function bl(){if(Vs!==null){var o=Kr(Yh),l=yr.transition,c=Ge;try{if(yr.transition=null,Ge=16>o?16:o,Vs===null)var p=!1;else{if(o=Vs,Vs=null,Yh=0,(Ze&6)!==0)throw Error(t(331));var y=Ze;for(Ze|=4,Te=o.current;Te!==null;){var w=Te,S=w.child;if((Te.flags&16)!==0){var F=w.deletions;if(F!==null){for(var $=0;$<F.length;$++){var Z=F[$];for(Te=Z;Te!==null;){var ce=Te;switch(ce.tag){case 0:case 11:case 15:vc(8,ce,w)}var he=ce.child;if(he!==null)he.return=ce,Te=he;else for(;Te!==null;){ce=Te;var le=ce.sibling,we=ce.return;if(F0(ce),ce===Z){Te=null;break}if(le!==null){le.return=we,Te=le;break}Te=we}}}var Pe=w.alternate;if(Pe!==null){var be=Pe.child;if(be!==null){Pe.child=null;do{var Wt=be.sibling;be.sibling=null,be=Wt}while(be!==null)}}Te=w}}if((w.subtreeFlags&2064)!==0&&S!==null)S.return=w,Te=S;else e:for(;Te!==null;){if(w=Te,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:vc(9,w,w.return)}var G=w.sibling;if(G!==null){G.return=w.return,Te=G;break e}Te=w.return}}var W=o.current;for(Te=W;Te!==null;){S=Te;var Y=S.child;if((S.subtreeFlags&2064)!==0&&Y!==null)Y.return=S,Te=Y;else e:for(S=W;Te!==null;){if(F=Te,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Hh(9,F)}}catch(Re){Ft(F,F.return,Re)}if(F===S){Te=null;break e}var fe=F.sibling;if(fe!==null){fe.return=F.return,Te=fe;break e}Te=F.return}}if(Ze=y,xs(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Vo,o)}catch{}p=!0}return p}finally{Ge=c,yr.transition=l}}return!1}function eT(o,l,c){l=Sl(c,l),l=v0(o,l,1),o=ks(o,l,1),l=Dn(),o!==null&&(Fo(o,1,l),$n(o,l))}function Ft(o,l,c){if(o.tag===3)eT(o,o,c);else for(;l!==null;){if(l.tag===3){eT(l,o,c);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ns===null||!Ns.has(p))){o=Sl(c,o),o=w0(l,o,1),l=ks(l,o,1),o=Dn(),l!==null&&(Fo(l,1,o),$n(l,o));break}}l=l.return}}function ED(o,l,c){var p=o.pingCache;p!==null&&p.delete(l),l=Dn(),o.pingedLanes|=o.suspendedLanes&c,cn===o&&(vn&c)===c&&(sn===4||sn===3&&(vn&130023424)===vn&&500>Tt()-Ug?Jo(o,0):Fg|=c),$n(o,l)}function tT(o,l){l===0&&((o.mode&1)===0?l=1:(l=ws,ws<<=1,(ws&130023424)===0&&(ws=4194304)));var c=Dn();o=zi(o,l),o!==null&&(Fo(o,l,c),$n(o,c))}function TD(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),tT(o,c)}function ID(o,l){var c=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),tT(o,c)}var nT;nT=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||Fn.current)jn=!0;else{if((o.lanes&c)===0&&(l.flags&128)===0)return jn=!1,cD(o,l,c);jn=(o.flags&131072)!==0}else jn=!1,At&&(l.flags&1048576)!==0&&ME(l,bh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;zh(o,l),o=l.pendingProps;var y=gl(l,En.current);Tl(l,c),y=gg(null,l,p,o,y,c);var w=yg();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Un(p)?(w=!0,Ph(l)):w=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,ug(l),y.updater=Bh,l.stateNode=y,y._reactInternals=l,Ig(l,p,o,c),l=Ag(null,l,p,!0,w,c)):(l.tag=0,At&&w&&Zm(l),kn(null,l,y,c),l=l.child),l;case 16:p=l.elementType;e:{switch(zh(o,l),o=l.pendingProps,y=p._init,p=y(p._payload),l.type=p,y=l.tag=PD(p),o=br(p,o),y){case 0:l=Cg(null,l,p,o,c);break e;case 1:l=b0(null,l,p,o,c);break e;case 11:l=I0(null,l,p,o,c);break e;case 14:l=S0(null,l,p,br(p.type,o),c);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),Cg(o,l,p,y,c);case 1:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),b0(o,l,p,y,c);case 3:e:{if(x0(l),o===null)throw Error(t(387));p=l.pendingProps,w=l.memoizedState,y=w.element,WE(o,l),Vh(l,p,null,c);var S=l.memoizedState;if(p=S.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){y=Sl(Error(t(423)),l),l=R0(o,l,p,c,y);break e}else if(p!==y){y=Sl(Error(t(424)),l),l=R0(o,l,p,c,y);break e}else for(rr=Cs(l.stateNode.containerInfo.firstChild),nr=l,At=!0,Ar=null,c=$E(l,null,p,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(wl(),p===y){l=Hi(o,l,c);break e}kn(o,l,p,c)}l=l.child}return l;case 5:return GE(l),o===null&&ng(l),p=l.type,y=l.pendingProps,w=o!==null?o.memoizedProps:null,S=y.children,Gm(p,y)?S=null:w!==null&&Gm(p,w)&&(l.flags|=32),A0(o,l),kn(o,l,S,c),l.child;case 6:return o===null&&ng(l),null;case 13:return k0(o,l,c);case 4:return cg(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=_l(l,null,p,c):kn(o,l,p,c),l.child;case 11:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),I0(o,l,p,y,c);case 7:return kn(o,l,l.pendingProps,c),l.child;case 8:return kn(o,l,l.pendingProps.children,c),l.child;case 12:return kn(o,l,l.pendingProps.children,c),l.child;case 10:e:{if(p=l.type._context,y=l.pendingProps,w=l.memoizedProps,S=y.value,vt(kh,p._currentValue),p._currentValue=S,w!==null)if(Cr(w.value,S)){if(w.children===y.children&&!Fn.current){l=Hi(o,l,c);break e}}else for(w=l.child,w!==null&&(w.return=l);w!==null;){var F=w.dependencies;if(F!==null){S=w.child;for(var $=F.firstContext;$!==null;){if($.context===p){if(w.tag===1){$=Wi(-1,c&-c),$.tag=2;var Z=w.updateQueue;if(Z!==null){Z=Z.shared;var ce=Z.pending;ce===null?$.next=$:($.next=ce.next,ce.next=$),Z.pending=$}}w.lanes|=c,$=w.alternate,$!==null&&($.lanes|=c),ag(w.return,c,l),F.lanes|=c;break}$=$.next}}else if(w.tag===10)S=w.type===l.type?null:w.child;else if(w.tag===18){if(S=w.return,S===null)throw Error(t(341));S.lanes|=c,F=S.alternate,F!==null&&(F.lanes|=c),ag(S,c,l),S=w.sibling}else S=w.child;if(S!==null)S.return=w;else for(S=w;S!==null;){if(S===l){S=null;break}if(w=S.sibling,w!==null){w.return=S.return,S=w;break}S=S.return}w=S}kn(o,l,y.children,c),l=l.child}return l;case 9:return y=l.type,p=l.pendingProps.children,Tl(l,c),y=mr(y),p=p(y),l.flags|=1,kn(o,l,p,c),l.child;case 14:return p=l.type,y=br(p,l.pendingProps),y=br(p.type,y),S0(o,l,p,y,c);case 15:return P0(o,l,l.type,l.pendingProps,c);case 17:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),zh(o,l),l.tag=1,Un(p)?(o=!0,Ph(l)):o=!1,Tl(l,c),g0(l,p,y),Ig(l,p,y,c),Ag(null,l,p,!0,o,c);case 19:return N0(o,l,c);case 22:return C0(o,l,c)}throw Error(t(156,l.tag))};function rT(o,l){return Fu(o,l)}function SD(o,l,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(o,l,c,p){return new SD(o,l,c,p)}function Gg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function PD(o){if(typeof o=="function")return Gg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===xe)return 14}return 2}function Ls(o,l){var c=o.alternate;return c===null?(c=vr(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function ef(o,l,c,p,y,w){var S=2;if(p=o,typeof o=="function")Gg(o)&&(S=1);else if(typeof o=="string")S=5;else e:switch(o){case A:return ea(c.children,y,w,l);case I:S=8,y|=8;break;case C:return o=vr(12,c,l,y|2),o.elementType=C,o.lanes=w,o;case V:return o=vr(13,c,l,y),o.elementType=V,o.lanes=w,o;case de:return o=vr(19,c,l,y),o.elementType=de,o.lanes=w,o;case ee:return tf(c,y,w,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:S=10;break e;case L:S=9;break e;case U:S=11;break e;case xe:S=14;break e;case Se:S=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=vr(S,c,l,y),l.elementType=o,l.type=p,l.lanes=w,l}function ea(o,l,c,p){return o=vr(7,o,p,l),o.lanes=c,o}function tf(o,l,c,p){return o=vr(22,o,p,l),o.elementType=ee,o.lanes=c,o.stateNode={isHidden:!1},o}function Kg(o,l,c){return o=vr(6,o,null,l),o.lanes=c,o}function Qg(o,l,c){return l=vr(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function CD(o,l,c,p,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zu(0),this.expirationTimes=zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Yg(o,l,c,p,y,w,S,F,$){return o=new CD(o,l,c,F,$),l===1?(l=1,w===!0&&(l|=8)):l=0,w=vr(3,null,null,l),o.current=w,w.stateNode=o,w.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},ug(w),o}function AD(o,l,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:p==null?null:""+p,children:o,containerInfo:l,implementation:c}}function iT(o){if(!o)return bs;o=o._reactInternals;e:{if(Sr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Un(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Un(c))return DE(o,c,l)}return l}function sT(o,l,c,p,y,w,S,F,$){return o=Yg(c,p,!0,o,y,w,S,F,$),o.context=iT(null),c=o.current,p=Dn(),y=Ms(c),w=Wi(p,y),w.callback=l??null,ks(c,w,y),o.current.lanes=y,Fo(o,y,p),$n(o,p),o}function nf(o,l,c,p){var y=l.current,w=Dn(),S=Ms(y);return c=iT(c),l.context===null?l.context=c:l.pendingContext=c,l=Wi(w,S),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=ks(y,l,S),o!==null&&(kr(o,y,S,w),Nh(o,y,S)),S}function rf(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function oT(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function Xg(o,l){oT(o,l),(o=o.alternate)&&oT(o,l)}function bD(){return null}var aT=typeof reportError=="function"?reportError:function(o){console.error(o)};function Jg(o){this._internalRoot=o}sf.prototype.render=Jg.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));nf(o,l,null,null)},sf.prototype.unmount=Jg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Xo(function(){nf(null,o,null,null)}),l[Ui]=null}};function sf(o){this._internalRoot=o}sf.prototype.unstable_scheduleHydration=function(o){if(o){var l=Gu();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Jn.length&&l!==0&&l<Jn[c].priority;c++);Jn.splice(c,0,o),c===0&&el(o)}};function Zg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function of(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function lT(){}function xD(o,l,c,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var Z=rf(S);w.call(Z)}}var S=sT(l,p,o,0,null,!1,!1,"",lT);return o._reactRootContainer=S,o[Ui]=S.current,sc(o.nodeType===8?o.parentNode:o),Xo(),S}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var F=p;p=function(){var Z=rf($);F.call(Z)}}var $=Yg(o,0,!1,null,null,!1,!1,"",lT);return o._reactRootContainer=$,o[Ui]=$.current,sc(o.nodeType===8?o.parentNode:o),Xo(function(){nf(l,$,c,p)}),$}function af(o,l,c,p,y){var w=c._reactRootContainer;if(w){var S=w;if(typeof y=="function"){var F=y;y=function(){var $=rf(S);F.call($)}}nf(l,S,o,y)}else S=xD(c,l,o,y,p);return rf(S)}Hu=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=st(l.pendingLanes);c!==0&&(Wu(l,c|1),$n(l,Tt()),(Ze&6)===0&&(Al=Tt()+500,xs()))}break;case 13:Xo(function(){var p=zi(o,1);if(p!==null){var y=Dn();kr(p,o,1,y)}}),Xg(o,1)}},Ja=function(o){if(o.tag===13){var l=zi(o,134217728);if(l!==null){var c=Dn();kr(l,o,134217728,c)}Xg(o,134217728)}},qu=function(o){if(o.tag===13){var l=Ms(o),c=zi(o,l);if(c!==null){var p=Dn();kr(c,o,l,p)}Xg(o,l)}},Gu=function(){return Ge},Ku=function(o,l){var c=Ge;try{return Ge=o,l()}finally{Ge=c}},xi=function(o,l,c){switch(l){case"input":if(bi(o,c),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var p=c[l];if(p!==o&&p.form===o.form){var y=Ih(p);if(!y)throw Error(t(90));Ci(p),bi(p,y)}}}break;case"textarea":bo(o,c);break;case"select":l=c.value,l!=null&&Qn(o,!!c.multiple,l,!1)}},Xd=Wg,Jd=Xo;var RD={usingClientEntryPoint:!1,Events:[lc,pl,Ih,ms,gs,Wg]},Tc={findFiberByHostInstance:zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kD={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=sh(o),o===null?null:o.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||bD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{Vo=lf.inject(kD),Yn=lf}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RD,zn.createPortal=function(o,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(l))throw Error(t(200));return AD(o,l,null,c)},zn.createRoot=function(o,l){if(!Zg(o))throw Error(t(299));var c=!1,p="",y=aT;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=Yg(o,1,!1,null,null,c,!1,p,y),o[Ui]=l.current,sc(o.nodeType===8?o.parentNode:o),new Jg(l)},zn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=sh(l),o=o===null?null:o.stateNode,o},zn.flushSync=function(o){return Xo(o)},zn.hydrate=function(o,l,c){if(!of(l))throw Error(t(200));return af(null,o,l,!0,c)},zn.hydrateRoot=function(o,l,c){if(!Zg(o))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,w="",S=aT;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),l=sT(l,null,o,1,c??null,y,!1,w,S),o[Ui]=l.current,sc(o),p)for(o=0;o<p.length;o++)c=p[o],y=c._getVersion,y=y(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,y]:l.mutableSourceEagerHydrationData.push(c,y);return new sf(l)},zn.render=function(o,l,c){if(!of(l))throw Error(t(200));return af(null,o,l,!1,c)},zn.unmountComponentAtNode=function(o){if(!of(o))throw Error(t(40));return o._reactRootContainer?(Xo(function(){af(null,null,o,!1,function(){o._reactRootContainer=null,o[Ui]=null})}),!0):!1},zn.unstable_batchedUpdates=Wg,zn.unstable_renderSubtreeIntoContainer=function(o,l,c,p){if(!of(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return af(o,l,c,!1,p)},zn.version="18.3.1-next-f1338f8080-20240426",zn}var gT;function nC(){if(gT)return ny.exports;gT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ny.exports=UD(),ny.exports}var yT;function jD(){if(yT)return uf;yT=1;var n=nC();return uf.createRoot=n.createRoot,uf.hydrateRoot=n.hydrateRoot,uf}var BD=jD();const $D=iw(BD),zD="modulepreload",WD=function(n){return"/"+n},vT={},Ti=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=WD(h),h in vT)return;vT[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":zD,m||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((T,b)=>{v.addEventListener("load",T),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var aw=nC();const HD=iw(aw);function od(){return od=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},od.apply(this,arguments)}var Js;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Js||(Js={}));const wT="popstate";function qD(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return qy("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Kf(i)}return KD(e,t,null,n)}function Mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GD(){return Math.random().toString(36).substr(2,8)}function _T(n,e){return{usr:n.state,key:n.key,idx:e}}function qy(n,e,t,r){return t===void 0&&(t=null),od({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Iu(e):e,{state:t,key:e&&e.key||r||GD()})}function Kf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Iu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function KD(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=Js.Pop,d=null,h=m();h==null&&(h=0,a.replaceState(od({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Js.Pop;let P=m(),j=P==null?null:P-h;h=P,d&&d({action:u,location:x.location,delta:j})}function v(P,j){u=Js.Push;let M=qy(x.location,P,j);h=m()+1;let D=_T(M,h),B=x.createHref(M);try{a.pushState(D,"",B)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(B)}s&&d&&d({action:u,location:x.location,delta:1})}function T(P,j){u=Js.Replace;let M=qy(x.location,P,j);h=m();let D=_T(M,h),B=x.createHref(M);a.replaceState(D,"",B),s&&d&&d({action:u,location:x.location,delta:0})}function b(P){let j=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof P=="string"?P:Kf(P);return M=M.replace(/ $/,"%20"),Mt(j,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,j)}let x={get action(){return u},get location(){return n(i,a)},listen(P){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(wT,g),d=P,()=>{i.removeEventListener(wT,g),d=null}},createHref(P){return e(i,P)},createURL:b,encodeLocation(P){let j=b(P);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:T,go(P){return a.go(P)}};return x}var ET;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ET||(ET={}));function QD(n,e,t){return t===void 0&&(t="/"),YD(n,e,t)}function YD(n,e,t,r){let i=typeof e=="string"?Iu(e):e,s=eu(i.pathname||"/",t);if(s==null)return null;let a=rC(n);XD(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=lN(s);u=oN(a[d],h)}return u}function rC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(Mt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=eo([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(Mt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),rC(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:iN(h,s.index),routesMeta:m})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let d of iC(s.path))i(s,a,d)}),e}function iC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=iC(r.join("/")),u=[];return u.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...a),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function XD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const JD=/^:[\w-]+$/,ZD=3,eN=2,tN=1,nN=10,rN=-2,TT=n=>n==="*";function iN(n,e){let t=n.split("/"),r=t.length;return t.some(TT)&&(r+=rN),e&&(r+=eN),t.filter(i=>!TT(i)).reduce((i,s)=>i+(JD.test(s)?ZD:s===""?tN:nN),r)}function sN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function oN(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=Gy({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),v=d.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:eo([s,g.pathname]),pathnameBase:fN(eo([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=eo([s,g.pathnameBase]))}return a}function Gy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=aN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let x=u[g]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=u[g];return T&&!b?h[v]=void 0:h[v]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function aN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),lw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function eu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const uN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cN=n=>uN.test(n);function dN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Iu(n):n,s;if(t)if(cN(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),lw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=IT(t.substring(1),"/"):s=IT(t,e)}else s=e;return{pathname:s,search:pN(r),hash:mN(i)}}function IT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function sy(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uw(n,e){let t=hN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function cw(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Iu(n):(i=od({},n),Mt(!i.pathname||!i.pathname.includes("?"),sy("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),sy("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),sy("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let d=dN(i,u),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const eo=n=>n.join("/").replace(/\/\/+/g,"/"),fN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,mN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const sC=["post","put","patch","delete"];new Set(sC);const yN=["get",...sC];new Set(yN);function ad(){return ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ad.apply(this,arguments)}const Bp=k.createContext(null),oC=k.createContext(null),os=k.createContext(null),$p=k.createContext(null),as=k.createContext({outlet:null,matches:[],isDataRoute:!1}),aC=k.createContext(null);function vN(n,e){let{relative:t}=e===void 0?{}:e;Su()||Mt(!1);let{basename:r,navigator:i}=k.useContext(os),{hash:s,pathname:a,search:u}=zp(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:eo([r,a])),i.createHref({pathname:d,search:u,hash:s})}function Su(){return k.useContext($p)!=null}function wo(){return Su()||Mt(!1),k.useContext($p).location}function lC(n){k.useContext(os).static||k.useLayoutEffect(n)}function dw(){let{isDataRoute:n}=k.useContext(as);return n?kN():wN()}function wN(){Su()||Mt(!1);let n=k.useContext(Bp),{basename:e,future:t,navigator:r}=k.useContext(os),{matches:i}=k.useContext(as),{pathname:s}=wo(),a=JSON.stringify(uw(i,t.v7_relativeSplatPath)),u=k.useRef(!1);return lC(()=>{u.current=!0}),k.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=cw(h,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:eo([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,s,n])}function AH(){let{matches:n}=k.useContext(as),e=n[n.length-1];return e?e.params:{}}function zp(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(os),{matches:i}=k.useContext(as),{pathname:s}=wo(),a=JSON.stringify(uw(i,r.v7_relativeSplatPath));return k.useMemo(()=>cw(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function _N(n,e){return EN(n,e)}function EN(n,e,t,r){Su()||Mt(!1);let{navigator:i}=k.useContext(os),{matches:s}=k.useContext(as),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=wo(),m;if(e){var g;let P=typeof e=="string"?Iu(e):e;d==="/"||(g=P.pathname)!=null&&g.startsWith(d)||Mt(!1),m=P}else m=h;let v=m.pathname||"/",T=v;if(d!=="/"){let P=d.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(P.length).join("/")}let b=QD(n,{pathname:T}),x=CN(b&&b.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:eo([d,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?d:eo([d,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,t,r);return e&&x?k.createElement($p.Provider,{value:{location:ad({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Js.Pop}},x):x}function TN(){let n=RN(),e=gN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const IN=k.createElement(TN,null);class SN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(as.Provider,{value:this.props.routeContext},k.createElement(aC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PN(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(Bp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(as.Provider,{value:e},r)}function CN(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||Mt(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:v,errors:T}=t,b=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||b){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,b=!1,x=null,P=null;t&&(T=u&&g.route.id?u[g.route.id]:void 0,x=g.route.errorElement||IN,d&&(h<0&&v===0?(DN("route-fallback"),b=!0,P=null):h===v&&(b=!0,P=g.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,v+1)),M=()=>{let D;return T?D=x:b?D=P:g.route.Component?D=k.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=m,k.createElement(PN,{match:g,routeContext:{outlet:m,matches:j,isDataRoute:t!=null},children:D})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?k.createElement(SN,{location:t.location,revalidation:t.revalidation,component:x,error:T,children:M(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):M()},null)}var uC=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(uC||{}),cC=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(cC||{});function AN(n){let e=k.useContext(Bp);return e||Mt(!1),e}function bN(n){let e=k.useContext(oC);return e||Mt(!1),e}function xN(n){let e=k.useContext(as);return e||Mt(!1),e}function dC(n){let e=xN(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function RN(){var n;let e=k.useContext(aC),t=bN(),r=dC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function kN(){let{router:n}=AN(uC.UseNavigateStable),e=dC(cC.UseNavigateStable),t=k.useRef(!1);return lC(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ad({fromRouteId:e},s)))},[n,e])}const ST={};function DN(n,e,t){ST[n]||(ST[n]=!0)}function NN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Ky(n){let{to:e,replace:t,state:r,relative:i}=n;Su()||Mt(!1);let{future:s,static:a}=k.useContext(os),{matches:u}=k.useContext(as),{pathname:d}=wo(),h=dw(),m=cw(e,uw(u,s.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(m);return k.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function Gi(n){Mt(!1)}function VN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Js.Pop,navigator:s,static:a=!1,future:u}=n;Su()&&Mt(!1);let d=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:d,navigator:s,static:a,future:ad({v7_relativeSplatPath:!1},u)}),[d,u,s,a]);typeof r=="string"&&(r=Iu(r));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:b="default"}=r,x=k.useMemo(()=>{let P=eu(m,d);return P==null?null:{location:{pathname:P,search:g,hash:v,state:T,key:b},navigationType:i}},[d,m,g,v,T,b,i]);return x==null?null:k.createElement(os.Provider,{value:h},k.createElement($p.Provider,{children:t,value:x}))}function MN(n){let{children:e,location:t}=n;return _N(Qy(e),t)}new Promise(()=>{});function Qy(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,Qy(r.props.children,s));return}r.type!==Gi&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Qy(r.props.children,s)),t.push(a)}),t}function Qf(){return Qf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qf.apply(this,arguments)}function hC(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function ON(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function LN(n,e){return n.button===0&&(!e||e==="_self")&&!ON(n)}const FN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jN="6";try{window.__reactRouterVersion=jN}catch{}const BN=k.createContext({isTransitioning:!1}),$N="startTransition",PT=ow[$N];function zN(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=qD({window:i,v5Compat:!0}));let a=s.current,[u,d]=k.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},m=k.useCallback(g=>{h&&PT?PT(()=>d(g)):d(g)},[d,h]);return k.useLayoutEffect(()=>a.listen(m),[a,m]),k.useEffect(()=>NN(r),[r]),k.createElement(VN,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const WN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qN=k.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g}=e,v=hC(e,FN),{basename:T}=k.useContext(os),b,x=!1;if(typeof h=="string"&&HN.test(h)&&(b=h,WN))try{let D=new URL(window.location.href),B=h.startsWith("//")?new URL(D.protocol+h):new URL(h),X=eu(B.pathname,T);B.origin===D.origin&&X!=null?h=X+B.search+B.hash:x=!0}catch{}let P=vN(h,{relative:i}),j=QN(h,{replace:a,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function M(D){r&&r(D),D.defaultPrevented||j(D)}return k.createElement("a",Qf({},v,{href:b||P,onClick:x||s?r:M,ref:t,target:d}))}),GN=k.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:u,to:d,viewTransition:h,children:m}=e,g=hC(e,UN),v=zp(d,{relative:g.relative}),T=wo(),b=k.useContext(oC),{navigator:x,basename:P}=k.useContext(os),j=b!=null&&YN(v)&&h===!0,M=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,D=T.pathname,B=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(D=D.toLowerCase(),B=B?B.toLowerCase():null,M=M.toLowerCase()),B&&P&&(B=eu(B,P)||B);const X=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let re=D===M||!a&&D.startsWith(M)&&D.charAt(X)==="/",A=B!=null&&(B===M||!a&&B.startsWith(M)&&B.charAt(M.length)==="/"),I={isActive:re,isPending:A,isTransitioning:j},C=re?r:void 0,O;typeof s=="function"?O=s(I):O=[s,re?"active":null,A?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(I):u;return k.createElement(qN,Qf({},g,{"aria-current":C,className:O,ref:t,style:L,to:d,viewTransition:h}),typeof m=="function"?m(I):m)});var Yy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Yy||(Yy={}));var CT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(CT||(CT={}));function KN(n){let e=k.useContext(Bp);return e||Mt(!1),e}function QN(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,d=dw(),h=wo(),m=zp(n,{relative:a});return k.useCallback(g=>{if(LN(g,t)){g.preventDefault();let v=r!==void 0?r:Kf(h)===Kf(m);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[h,d,m,r,i,t,n,s,a,u])}function YN(n,e){e===void 0&&(e={});let t=k.useContext(BN);t==null&&Mt(!1);let{basename:r}=KN(Yy.useViewTransitionState),i=zp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=eu(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=eu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Gy(i.pathname,a)!=null||Gy(i.pathname,s)!=null}class XN extends tn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?K.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[K.jsx("h2",{children:"Se produjo un error"}),K.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(this.state.error?.stack||this.state.error)})]}):this.props.children}}const JN=()=>{};var AT={};const fC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ZN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},pC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let v=(u&15)<<2|h>>6,T=h&63;d||(T=64,a||(v=64)),r.push(t[m],t[g],t[v],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new eV;const v=s<<2|u>>4;if(r.push(v),h!==64){const T=u<<4&240|h>>2;if(r.push(T),g!==64){const b=h<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tV=function(n){const e=fC(n);return pC.encodeByteArray(e,!0)},Yf=function(n){return tV(n).replace(/\./g,"")},mC=function(n){try{return pC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nV=()=>gC().__FIREBASE_DEFAULTS__,rV=()=>{if(typeof process>"u"||typeof AT>"u")return;const n=AT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mC(n[1]);return e&&JSON.parse(e)},Wp=()=>{try{return JN()||nV()||rV()||iV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yC=n=>Wp()?.emulatorHosts?.[n],vC=n=>{const e=yC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wC=()=>Wp()?.config,_C=n=>Wp()?.[`_${n}`];class sV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function _o(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hw(n){return(await fetch(n,{credentials:"include"})).ok}function oV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Yf(JSON.stringify(t)),Yf(JSON.stringify(a)),""].join(".")}const Hc={};function aV(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hc))Hc[e]?n.emulator.push(e):n.prod.push(e);return n}function lV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let bT=!1;function fw(n,e){if(typeof window>"u"||typeof document>"u"||!_o(window.location.host)||Hc[n]===e||Hc[n]||bT)return;Hc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=aV().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{bT=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=lV(r),T=t("text"),b=document.getElementById(T)||document.createElement("span"),x=t("learnmore"),P=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),M=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const D=v.element;u(D),m(P,x);const B=h();d(M,j),D.append(M,b,P,B),document.body.appendChild(D)}s?(b.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function EC(){const n=Wp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dV(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fV(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function TC(){return!EC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IC(){return!EC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function SC(){try{return typeof indexedDB=="object"}catch{return!1}}function pV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const mV="FirebaseError";class Ii extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mV,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ad.prototype.create)}}class Ad{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?gV(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Ii(i,u,r)}}function gV(n,e){return n.replace(yV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yV=/\{\$([^}]+)}/g;function vV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ta(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(xT(s)&&xT(a)){if(!Ta(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function xT(n){return n!==null&&typeof n=="object"}function bd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wV(n,e){const t=new _V(n,e);return t.subscribe.bind(t)}class _V{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");EV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=oy),i.error===void 0&&(i.error=oy),i.complete===void 0&&(i.complete=oy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function oy(){}function mt(n){return n&&n._delegate?n._delegate:n}class lo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";let TV=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sV;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SV(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function IV(n){return n===ia?void 0:n}function SV(n){return n.instantiationMode==="EAGER"}class PV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const CV={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},AV=qe.INFO,bV={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},xV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=bV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pw{constructor(e){this.name=e,this._logLevel=AV,this._logHandler=xV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const RV=(n,e)=>e.some(t=>n instanceof t);let RT,kT;function kV(){return RT||(RT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DV(){return kT||(kT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PC=new WeakMap,Xy=new WeakMap,CC=new WeakMap,ay=new WeakMap,mw=new WeakMap;function NV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(to(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&PC.set(t,n)}).catch(()=>{}),mw.set(e,n),e}function VV(n){if(Xy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Xy.set(n,e)}let Jy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return to(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MV(n){Jy=n(Jy)}function OV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ly(this),e,...t);return CC.set(r,e.sort?e.sort():[e]),to(r)}:DV().includes(n)?function(...e){return n.apply(ly(this),e),to(PC.get(this))}:function(...e){return to(n.apply(ly(this),e))}}function LV(n){return typeof n=="function"?OV(n):(n instanceof IDBTransaction&&VV(n),RV(n,kV())?new Proxy(n,Jy):n)}function to(n){if(n instanceof IDBRequest)return NV(n);if(ay.has(n))return ay.get(n);const e=LV(n);return e!==n&&(ay.set(n,e),mw.set(e,n)),e}const ly=n=>mw.get(n);function FV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=to(a);return r&&a.addEventListener("upgradeneeded",d=>{r(to(a.result),d.oldVersion,d.newVersion,to(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const UV=["get","getKey","getAll","getAllKeys","count"],jV=["put","add","delete","clear"],uy=new Map;function DT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(uy.get(e))return uy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=jV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UV.includes(t)))return;const s=async function(a,...u){const d=this.transaction(a,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&d.done]))[0]};return uy.set(e,s),s}MV(n=>({...n,get:(e,t,r)=>DT(e,t)||n.get(e,t,r),has:(e,t)=>!!DT(e,t)||n.has(e,t)}));class BV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($V(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $V(n){return n.getComponent()?.type==="VERSION"}const Zy="@firebase/app",NT="0.14.6";const es=new pw("@firebase/app"),zV="@firebase/app-compat",WV="@firebase/analytics-compat",HV="@firebase/analytics",qV="@firebase/app-check-compat",GV="@firebase/app-check",KV="@firebase/auth",QV="@firebase/auth-compat",YV="@firebase/database",XV="@firebase/data-connect",JV="@firebase/database-compat",ZV="@firebase/functions",eM="@firebase/functions-compat",tM="@firebase/installations",nM="@firebase/installations-compat",rM="@firebase/messaging",iM="@firebase/messaging-compat",sM="@firebase/performance",oM="@firebase/performance-compat",aM="@firebase/remote-config",lM="@firebase/remote-config-compat",uM="@firebase/storage",cM="@firebase/storage-compat",dM="@firebase/firestore",hM="@firebase/ai",fM="@firebase/firestore-compat",pM="firebase",mM="12.6.0";const ev="[DEFAULT]",gM={[Zy]:"fire-core",[zV]:"fire-core-compat",[HV]:"fire-analytics",[WV]:"fire-analytics-compat",[GV]:"fire-app-check",[qV]:"fire-app-check-compat",[KV]:"fire-auth",[QV]:"fire-auth-compat",[YV]:"fire-rtdb",[XV]:"fire-data-connect",[JV]:"fire-rtdb-compat",[ZV]:"fire-fn",[eM]:"fire-fn-compat",[tM]:"fire-iid",[nM]:"fire-iid-compat",[rM]:"fire-fcm",[iM]:"fire-fcm-compat",[sM]:"fire-perf",[oM]:"fire-perf-compat",[aM]:"fire-rc",[lM]:"fire-rc-compat",[uM]:"fire-gcs",[cM]:"fire-gcs-compat",[dM]:"fire-fst",[fM]:"fire-fst-compat",[hM]:"fire-vertex","fire-js":"fire-js",[pM]:"fire-js-all"};const Xf=new Map,yM=new Map,tv=new Map;function VT(n,e){try{n.container.addComponent(e)}catch(t){es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ia(n){const e=n.name;if(tv.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;tv.set(e,n);for(const t of Xf.values())VT(t,n);for(const t of yM.values())VT(t,n);return!0}function Hp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}const vM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new Ad("app","Firebase",vM);class wM{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}const Pu=mM;function AC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ev,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw no.create("bad-app-name",{appName:String(i)});if(t||(t=wC()),!t)throw no.create("no-options");const s=Xf.get(i);if(s){if(Ta(t,s.options)&&Ta(r,s.config))return s;throw no.create("duplicate-app",{appName:i})}const a=new PV(i);for(const d of tv.values())a.addComponent(d);const u=new wM(t,r,a);return Xf.set(i,u),u}function gw(n=ev){const e=Xf.get(n);if(!e&&n===ev&&wC())return AC();if(!e)throw no.create("no-app",{appName:n});return e}function pi(n,e,t){let r=gM[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(a.join(" "));return}Ia(new lo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const _M="firebase-heartbeat-database",EM=1,ld="firebase-heartbeat-store";let cy=null;function bC(){return cy||(cy=FV(_M,EM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ld)}catch(t){console.warn(t)}}}}).catch(n=>{throw no.create("idb-open",{originalErrorMessage:n.message})})),cy}async function TM(n){try{const t=(await bC()).transaction(ld),r=await t.objectStore(ld).get(xC(n));return await t.done,r}catch(e){if(e instanceof Ii)es.warn(e.message);else{const t=no.create("idb-get",{originalErrorMessage:e?.message});es.warn(t.message)}}}async function MT(n,e){try{const r=(await bC()).transaction(ld,"readwrite");await r.objectStore(ld).put(e,xC(n)),await r.done}catch(t){if(t instanceof Ii)es.warn(t.message);else{const r=no.create("idb-set",{originalErrorMessage:t?.message});es.warn(r.message)}}}function xC(n){return`${n.name}!${n.options.appId}`}const IM=1024,SM=30;class PM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=OT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>SM){const i=bM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){es.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=OT(),{heartbeatsToSend:t,unsentEntries:r}=CM(this._heartbeatsCache.heartbeats),i=Yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return es.warn(e),""}}}function OT(){return new Date().toISOString().substring(0,10)}function CM(n,e=IM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),LT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),LT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SC()?pV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return MT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return MT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function LT(n){return Yf(JSON.stringify({version:2,heartbeats:n})).length}function bM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function xM(n){Ia(new lo("platform-logger",e=>new BV(e),"PRIVATE")),Ia(new lo("heartbeat",e=>new PM(e),"PRIVATE")),pi(Zy,NT,n),pi(Zy,NT,"esm2020"),pi("fire-js","")}xM("");var RM="firebase",kM="12.7.0";pi(RM,kM,"app");var FT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ro,RC;(function(){var n;function e(A,I){function C(){}C.prototype=I.prototype,A.F=I.prototype,A.prototype=new C,A.prototype.constructor=A,A.D=function(O,L,U){for(var V=Array(arguments.length-2),de=2;de<arguments.length;de++)V[de-2]=arguments[de];return I.prototype[L].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,I,C){C||(C=0);const O=Array(16);if(typeof I=="string")for(var L=0;L<16;++L)O[L]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(L=0;L<16;++L)O[L]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=A.g[0],C=A.g[1],L=A.g[2];let U=A.g[3],V;V=I+(U^C&(L^U))+O[0]+3614090360&4294967295,I=C+(V<<7&4294967295|V>>>25),V=U+(L^I&(C^L))+O[1]+3905402710&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(C^U&(I^C))+O[2]+606105819&4294967295,L=U+(V<<17&4294967295|V>>>15),V=C+(I^L&(U^I))+O[3]+3250441966&4294967295,C=L+(V<<22&4294967295|V>>>10),V=I+(U^C&(L^U))+O[4]+4118548399&4294967295,I=C+(V<<7&4294967295|V>>>25),V=U+(L^I&(C^L))+O[5]+1200080426&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(C^U&(I^C))+O[6]+2821735955&4294967295,L=U+(V<<17&4294967295|V>>>15),V=C+(I^L&(U^I))+O[7]+4249261313&4294967295,C=L+(V<<22&4294967295|V>>>10),V=I+(U^C&(L^U))+O[8]+1770035416&4294967295,I=C+(V<<7&4294967295|V>>>25),V=U+(L^I&(C^L))+O[9]+2336552879&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(C^U&(I^C))+O[10]+4294925233&4294967295,L=U+(V<<17&4294967295|V>>>15),V=C+(I^L&(U^I))+O[11]+2304563134&4294967295,C=L+(V<<22&4294967295|V>>>10),V=I+(U^C&(L^U))+O[12]+1804603682&4294967295,I=C+(V<<7&4294967295|V>>>25),V=U+(L^I&(C^L))+O[13]+4254626195&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(C^U&(I^C))+O[14]+2792965006&4294967295,L=U+(V<<17&4294967295|V>>>15),V=C+(I^L&(U^I))+O[15]+1236535329&4294967295,C=L+(V<<22&4294967295|V>>>10),V=I+(L^U&(C^L))+O[1]+4129170786&4294967295,I=C+(V<<5&4294967295|V>>>27),V=U+(C^L&(I^C))+O[6]+3225465664&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^C&(U^I))+O[11]+643717713&4294967295,L=U+(V<<14&4294967295|V>>>18),V=C+(U^I&(L^U))+O[0]+3921069994&4294967295,C=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(C^L))+O[5]+3593408605&4294967295,I=C+(V<<5&4294967295|V>>>27),V=U+(C^L&(I^C))+O[10]+38016083&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^C&(U^I))+O[15]+3634488961&4294967295,L=U+(V<<14&4294967295|V>>>18),V=C+(U^I&(L^U))+O[4]+3889429448&4294967295,C=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(C^L))+O[9]+568446438&4294967295,I=C+(V<<5&4294967295|V>>>27),V=U+(C^L&(I^C))+O[14]+3275163606&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^C&(U^I))+O[3]+4107603335&4294967295,L=U+(V<<14&4294967295|V>>>18),V=C+(U^I&(L^U))+O[8]+1163531501&4294967295,C=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(C^L))+O[13]+2850285829&4294967295,I=C+(V<<5&4294967295|V>>>27),V=U+(C^L&(I^C))+O[2]+4243563512&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^C&(U^I))+O[7]+1735328473&4294967295,L=U+(V<<14&4294967295|V>>>18),V=C+(U^I&(L^U))+O[12]+2368359562&4294967295,C=L+(V<<20&4294967295|V>>>12),V=I+(C^L^U)+O[5]+4294588738&4294967295,I=C+(V<<4&4294967295|V>>>28),V=U+(I^C^L)+O[8]+2272392833&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^C)+O[11]+1839030562&4294967295,L=U+(V<<16&4294967295|V>>>16),V=C+(L^U^I)+O[14]+4259657740&4294967295,C=L+(V<<23&4294967295|V>>>9),V=I+(C^L^U)+O[1]+2763975236&4294967295,I=C+(V<<4&4294967295|V>>>28),V=U+(I^C^L)+O[4]+1272893353&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^C)+O[7]+4139469664&4294967295,L=U+(V<<16&4294967295|V>>>16),V=C+(L^U^I)+O[10]+3200236656&4294967295,C=L+(V<<23&4294967295|V>>>9),V=I+(C^L^U)+O[13]+681279174&4294967295,I=C+(V<<4&4294967295|V>>>28),V=U+(I^C^L)+O[0]+3936430074&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^C)+O[3]+3572445317&4294967295,L=U+(V<<16&4294967295|V>>>16),V=C+(L^U^I)+O[6]+76029189&4294967295,C=L+(V<<23&4294967295|V>>>9),V=I+(C^L^U)+O[9]+3654602809&4294967295,I=C+(V<<4&4294967295|V>>>28),V=U+(I^C^L)+O[12]+3873151461&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^C)+O[15]+530742520&4294967295,L=U+(V<<16&4294967295|V>>>16),V=C+(L^U^I)+O[2]+3299628645&4294967295,C=L+(V<<23&4294967295|V>>>9),V=I+(L^(C|~U))+O[0]+4096336452&4294967295,I=C+(V<<6&4294967295|V>>>26),V=U+(C^(I|~L))+O[7]+1126891415&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~C))+O[14]+2878612391&4294967295,L=U+(V<<15&4294967295|V>>>17),V=C+(U^(L|~I))+O[5]+4237533241&4294967295,C=L+(V<<21&4294967295|V>>>11),V=I+(L^(C|~U))+O[12]+1700485571&4294967295,I=C+(V<<6&4294967295|V>>>26),V=U+(C^(I|~L))+O[3]+2399980690&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~C))+O[10]+4293915773&4294967295,L=U+(V<<15&4294967295|V>>>17),V=C+(U^(L|~I))+O[1]+2240044497&4294967295,C=L+(V<<21&4294967295|V>>>11),V=I+(L^(C|~U))+O[8]+1873313359&4294967295,I=C+(V<<6&4294967295|V>>>26),V=U+(C^(I|~L))+O[15]+4264355552&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~C))+O[6]+2734768916&4294967295,L=U+(V<<15&4294967295|V>>>17),V=C+(U^(L|~I))+O[13]+1309151649&4294967295,C=L+(V<<21&4294967295|V>>>11),V=I+(L^(C|~U))+O[4]+4149444226&4294967295,I=C+(V<<6&4294967295|V>>>26),V=U+(C^(I|~L))+O[11]+3174756917&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~C))+O[2]+718787259&4294967295,L=U+(V<<15&4294967295|V>>>17),V=C+(U^(L|~I))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+U&4294967295}r.prototype.v=function(A,I){I===void 0&&(I=A.length);const C=I-this.blockSize,O=this.C;let L=this.h,U=0;for(;U<I;){if(L==0)for(;U<=C;)i(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<I;)if(O[L++]=A.charCodeAt(U++),L==this.blockSize){i(this,O),L=0;break}}else for(;U<I;)if(O[L++]=A[U++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=I},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;I=this.o*8;for(var C=A.length-8;C<A.length;++C)A[C]=I&255,I/=256;for(this.v(A),A=Array(16),I=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)A[I++]=this.g[C]>>>O&255;return A};function s(A,I){var C=u;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=I(A)}function a(A,I){this.h=I;const C=[];let O=!0;for(let L=A.length-1;L>=0;L--){const U=A[L]|0;O&&U==I||(C[L]=U,O=!1)}this.g=C}var u={};function d(A){return-128<=A&&A<128?s(A,function(I){return new a([I|0],I<0?-1:0)}):new a([A|0],A<0?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return P(h(-A));const I=[];let C=1;for(let O=0;A>=C;O++)I[O]=A/C|0,C*=4294967296;return new a(I,0)}function m(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return P(m(A.substring(1),I));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=h(Math.pow(I,8));let O=g;for(let U=0;U<A.length;U+=8){var L=Math.min(8,A.length-U);const V=parseInt(A.substring(U,U+L),I);L<8?(L=h(Math.pow(I,L)),O=O.j(L).add(h(V))):(O=O.j(C),O=O.add(h(V)))}return O}var g=d(0),v=d(1),T=d(16777216);n=a.prototype,n.m=function(){if(x(this))return-P(this).m();let A=0,I=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);A+=(O>=0?O:4294967296+O)*I,I*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(x(this))return"-"+P(this).toString(A);const I=h(Math.pow(A,6));var C=this;let O="";for(;;){const L=B(C,I).g;C=j(C,L.j(I));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(A);if(C=L,b(C))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(let I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function x(A){return A.h==-1}n.l=function(A){return A=j(this,A),x(A)?-1:b(A)?0:1};function P(A){const I=A.g.length,C=[];for(let O=0;O<I;O++)C[O]=~A.g[O];return new a(C,~A.h).add(v)}n.abs=function(){return x(this)?P(this):this},n.add=function(A){const I=Math.max(this.g.length,A.g.length),C=[];let O=0;for(let L=0;L<=I;L++){let U=O+(this.i(L)&65535)+(A.i(L)&65535),V=(U>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);O=V>>>16,U&=65535,V&=65535,C[L]=V<<16|U}return new a(C,C[C.length-1]&-2147483648?-1:0)};function j(A,I){return A.add(P(I))}n.j=function(A){if(b(this)||b(A))return g;if(x(this))return x(A)?P(this).j(P(A)):P(P(this).j(A));if(x(A))return P(this.j(P(A)));if(this.l(T)<0&&A.l(T)<0)return h(this.m()*A.m());const I=this.g.length+A.g.length,C=[];for(var O=0;O<2*I;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<A.g.length;L++){const U=this.i(O)>>>16,V=this.i(O)&65535,de=A.i(L)>>>16,xe=A.i(L)&65535;C[2*O+2*L]+=V*xe,M(C,2*O+2*L),C[2*O+2*L+1]+=U*xe,M(C,2*O+2*L+1),C[2*O+2*L+1]+=V*de,M(C,2*O+2*L+1),C[2*O+2*L+2]+=U*de,M(C,2*O+2*L+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new a(C,0)};function M(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function D(A,I){this.g=A,this.h=I}function B(A,I){if(b(I))throw Error("division by zero");if(b(A))return new D(g,g);if(x(A))return I=B(P(A),I),new D(P(I.g),P(I.h));if(x(I))return I=B(A,P(I)),new D(P(I.g),I.h);if(A.g.length>30){if(x(A)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var C=v,O=I;O.l(A)<=0;)C=X(C),O=X(O);var L=re(C,1),U=re(O,1);for(O=re(O,2),C=re(C,2);!b(O);){var V=U.add(O);V.l(A)<=0&&(L=L.add(C),U=V),O=re(O,1),C=re(C,1)}return I=j(A,L.j(I)),new D(L,I)}for(L=g;A.l(I)>=0;){for(C=Math.max(1,Math.floor(A.m()/I.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=h(C),V=U.j(I);x(V)||V.l(A)>0;)C-=O,U=h(C),V=U.j(I);b(U)&&(U=v),L=L.add(U),A=j(A,V)}return new D(L,A)}n.B=function(A){return B(this,A).h},n.and=function(A){const I=Math.max(this.g.length,A.g.length),C=[];for(let O=0;O<I;O++)C[O]=this.i(O)&A.i(O);return new a(C,this.h&A.h)},n.or=function(A){const I=Math.max(this.g.length,A.g.length),C=[];for(let O=0;O<I;O++)C[O]=this.i(O)|A.i(O);return new a(C,this.h|A.h)},n.xor=function(A){const I=Math.max(this.g.length,A.g.length),C=[];for(let O=0;O<I;O++)C[O]=this.i(O)^A.i(O);return new a(C,this.h^A.h)};function X(A){const I=A.g.length+1,C=[];for(let O=0;O<I;O++)C[O]=A.i(O)<<1|A.i(O-1)>>>31;return new a(C,A.h)}function re(A,I){const C=I>>5;I%=32;const O=A.g.length-C,L=[];for(let U=0;U<O;U++)L[U]=I>0?A.i(U+C)>>>I|A.i(U+C+1)<<32-I:A.i(U+C);return new a(L,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,ro=a}).apply(typeof FT<"u"?FT:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kC,Uc,DC,bf,nv,NC,VC,MC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var E=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var Q=f[R];if(!(Q in E))break e;E=E[Q]}f=f[f.length-1],R=E[f],_=_(R),_!=R&&_!=null&&e(E,f,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(_){var E=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&E.push([R,_[R]]);return E}});var s=s||{},a=this||self;function u(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function d(f,_,E){return f.call.apply(f.bind,arguments)}function h(f,_,E){return h=d,h.apply(null,arguments)}function m(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function g(f,_){function E(){}E.prototype=_.prototype,f.Z=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Ob=function(R,Q,te){for(var me=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)me[Be-2]=arguments[Be];return _.prototype[Q].apply(R,me)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function T(f){const _=f.length;if(_>0){const E=Array(_);for(let R=0;R<_;R++)E[R]=f[R];return E}return[]}function b(f,_){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=f.length||0;const te=Q.length||0;f.length=E+te;for(let me=0;me<te;me++)f[E+me]=Q[me]}else f.push(Q)}}class x{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function P(f){a.setTimeout(()=>{throw f},0)}function j(){var f=A;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class M{constructor(){this.h=this.g=null}add(_,E){const R=D.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var D=new x(()=>new B,f=>f.reset());class B{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let X,re=!1,A=new M,I=()=>{const f=Promise.resolve(void 0);X=()=>{f.then(C)}};function C(){for(var f;f=j();){try{f.h.call(f.g)}catch(E){P(E)}var _=D;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}re=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function de(f,_){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}g(de,L),de.prototype.init=function(f,_){const E=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),Se=0;function ee(f,_,E,R,Q){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=Q,this.key=++Se,this.da=this.fa=!1}function H(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ne(f,_,E){for(const R in f)_.call(E,f[R],R,f)}function J(f,_){for(const E in f)_.call(void 0,f[E],E,f)}function N(f){const _={};for(const E in f)_[E]=f[E];return _}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(f,_){let E,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(E in R)f[E]=R[E];for(let te=0;te<z.length;te++)E=z[te],Object.prototype.hasOwnProperty.call(R,E)&&(f[E]=R[E])}}function ae(f){this.src=f,this.g={},this.h=0}ae.prototype.add=function(f,_,E,R,Q){const te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);const me=pe(f,_,R,Q);return me>-1?(_=f[me],E||(_.fa=!1)):(_=new ee(_,this.src,te,!!R,Q),_.fa=E,f.push(_)),_};function oe(f,_){const E=_.type;if(E in f.g){var R=f.g[E],Q=Array.prototype.indexOf.call(R,_,void 0),te;(te=Q>=0)&&Array.prototype.splice.call(R,Q,1),te&&(H(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function pe(f,_,E,R){for(let Q=0;Q<f.length;++Q){const te=f[Q];if(!te.da&&te.listener==_&&te.capture==!!E&&te.ha==R)return Q}return-1}var De="closure_lm_"+(Math.random()*1e6|0),Le={};function $e(f,_,E,R,Q){if(Array.isArray(_)){for(let te=0;te<_.length;te++)$e(f,_[te],E,R,Q);return null}return E=Ao(E),f&&f[xe]?f.J(_,E,u(R)?!!R.capture:!1,Q):ut(f,_,E,!1,R,Q)}function ut(f,_,E,R,Q,te){if(!_)throw Error("Invalid event type");const me=u(Q)?!!Q.capture:!!Q;let Be=Ur(f);if(Be||(f[De]=Be=new ae(f)),E=Be.add(_,E,R,me,te),E.proxy)return E;if(R=$t(),E.proxy=R,R.src=f,R.listener=E,f.addEventListener)U||(Q=me),Q===void 0&&(Q=!1),f.addEventListener(_.toString(),R,Q);else if(f.attachEvent)f.attachEvent(Ai(_.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function $t(){function f(E){return _.call(f.src,f.listener,E)}const _=za;return f}function Ci(f,_,E,R,Q){if(Array.isArray(_))for(var te=0;te<_.length;te++)Ci(f,_[te],E,R,Q);else R=u(R)?!!R.capture:!!R,E=Ao(E),f&&f[xe]?(f=f.i,te=String(_).toString(),te in f.g&&(_=f.g[te],E=pe(_,E,R,Q),E>-1&&(H(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete f.g[te],f.h--)))):f&&(f=Ur(f))&&(_=f.g[_.toString()],f=-1,_&&(f=pe(_,E,R,Q)),(E=f>-1?_[f]:null)&&Fr(E))}function Fr(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[xe])oe(_.i,f);else{var E=f.type,R=f.proxy;_.removeEventListener?_.removeEventListener(E,R,f.capture):_.detachEvent?_.detachEvent(Ai(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=Ur(_))?(oe(E,f),E.h==0&&(E.src=null,_[De]=null)):H(f)}}}function Ai(f){return f in Le?Le[f]:Le[f]="on"+f}function za(f,_){if(f.da)f=!0;else{_=new de(_,this);const E=f.listener,R=f.ha||f.src;f.fa&&Fr(f),f=E.call(R,_)}return f}function Ur(f){return f=f[De],f instanceof ae?f:null}var bi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ao(f){return typeof f=="function"?f:(f[bi]||(f[bi]=function(_){return f.handleEvent(_)}),f[bi])}function Ot(){O.call(this),this.i=new ae(this),this.M=this,this.G=null}g(Ot,O),Ot.prototype[xe]=!0,Ot.prototype.removeEventListener=function(f,_,E,R){Ci(this,f,_,E,R)};function yt(f,_){var E,R=f.G;if(R)for(E=[];R;R=R.G)E.push(R);if(f=f.M,R=_.type||_,typeof _=="string")_=new L(_,f);else if(_ instanceof L)_.target=_.target||f;else{var Q=_;_=new L(R,f),se(_,Q)}Q=!0;let te,me;if(E)for(me=E.length-1;me>=0;me--)te=_.g=E[me],Q=Qn(te,R,!0,_)&&Q;if(te=_.g=f,Q=Qn(te,R,!0,_)&&Q,Q=Qn(te,R,!1,_)&&Q,E)for(me=0;me<E.length;me++)te=_.g=E[me],Q=Qn(te,R,!1,_)&&Q}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const E=f.g[_];for(let R=0;R<E.length;R++)H(E[R]);delete f.g[_],f.h--}}this.G=null},Ot.prototype.J=function(f,_,E,R){return this.i.add(String(f),_,!1,E,R)},Ot.prototype.K=function(f,_,E,R){return this.i.add(String(f),_,!0,E,R)};function Qn(f,_,E,R){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let Q=!0;for(let te=0;te<_.length;++te){const me=_[te];if(me&&!me.da&&me.capture==E){const Be=me.listener,zt=me.ha||me.src;me.fa&&oe(f.i,me),Q=Be.call(zt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function ds(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:a.setTimeout(f,_||0)}function hs(f){f.g=ds(()=>{f.g=null,f.i&&(f.i=!1,hs(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class bo extends O{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:hs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(f){O.call(this),this.h=f,this.g={}}g(jr,O);var xo=[];function fs(f){ne(f.g,function(_,E){this.g.hasOwnProperty(E)&&Fr(_)},f),f.g={}}jr.prototype.N=function(){jr.Z.N.call(this),fs(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Br=a.JSON.stringify,$r=a.JSON.parse,Tr=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Je(){}function Wa(){}var zr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ha(){L.call(this,"d")}g(Ha,L);function Vu(){L.call(this,"c")}g(Vu,L);var Ir={},qa=null;function ps(){return qa=qa||new Ot}Ir.Ia="serverreachability";function Ga(f){L.call(this,Ir.Ia,f)}g(Ga,L);function xi(f){const _=ps();yt(_,new Ga(_))}Ir.STAT_EVENT="statevent";function Ri(f,_){L.call(this,Ir.STAT_EVENT,f),this.stat=_}g(Ri,L);function Lt(f){const _=ps();yt(_,new Ri(_,f))}Ir.Ja="timingevent";function Mu(f,_){L.call(this,Ir.Ja,f),this.size=_}g(Mu,L);function ms(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function gs(){this.g=!0}gs.prototype.ua=function(){this.g=!1};function Xd(f,_,E,R,Q,te){f.info(function(){if(f.g)if(te){var me="",Be=te.split("&");for(let ct=0;ct<Be.length;ct++){var zt=Be[ct].split("=");if(zt.length>1){const Xt=zt[0];zt=zt[1];const tr=Xt.split("_");me=tr.length>=2&&tr[1]=="type"?me+(Xt+"="+zt+"&"):me+(Xt+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+_+`
`+E+`
`+me})}function Jd(f,_,E,R,Q,te,me){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+_+`
`+E+`
`+te+" "+me})}function Wr(f,_,E,R){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ro(f,E)+(R?" "+R:"")})}function Zd(f,_){f.info(function(){return"TIMEOUT: "+_})}gs.prototype.info=function(){};function Ro(f,_){if(!f.g)return _;if(!_)return null;try{const te=JSON.parse(_);if(te){for(f=0;f<te.length;f++)if(Array.isArray(te[f])){var E=te[f];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let me=1;me<R.length;me++)R[me]=""}}}}return Br(te)}catch{return _}}var ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},eh;function ki(){}g(ki,Je),ki.prototype.g=function(){return new XMLHttpRequest},eh=new ki;function Hr(f){return encodeURIComponent(String(f))}function Ka(f){var _=1;f=f.split(":");const E=[];for(;_>0&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function dr(f,_,E,R){this.j=f,this.i=_,this.l=E,this.S=R||1,this.V=new jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new th}function th(){this.i=null,this.g="",this.h=!1}var nh={},Ou={};function Sr(f,_,E){f.M=1,f.A=Ni(hr(_)),f.u=E,f.R=!0,Lu(f,null)}function Lu(f,_){f.F=Date.now(),ko(f),f.B=hr(f.A);var E=f.B,R=f.S;Array.isArray(R)||(R=[String(R)]),Gu(E.i,"t",R),f.C=0,E=f.j.L,f.h=new th,f.g=hh(f.j,E?_:null,!f.u),f.P>0&&(f.O=new bo(h(f.Y,f,f.g),f.P)),_=f.V,E=f.g,R=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(xo[0]=Q.toString()),Q=xo);for(let te=0;te<Q.length;te++){const me=$e(E,Q[te],R||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=f.J?N(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),xi(),Xd(f.i,f.v,f.B,f.l,f.S,f.u)}dr.prototype.ba=function(f){f=f.target;const _=this.O;_&&Jr(f)==3?_.j():this.Y(f)},dr.prototype.Y=function(f){try{if(f==this.g)e:{const Be=Jr(this.g),zt=this.g.ya(),ct=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||ch(this.g)))){this.K||Be!=4||zt==7||(zt==8||ct<=0?xi(3):xi(2)),Qa(this);var _=this.g.ca();this.X=_;var E=rh(this);if(this.o=_==200,Jd(this.i,this.v,this.B,this.l,this.S,Be,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var te=R;break t}}te=null}if(f=te)Wr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tt(this,f);else{this.o=!1,this.m=3,Lt(12),Di(this),Do(this);break e}}if(this.R){f=!0;let Xt;for(;!this.K&&this.C<E.length;)if(Xt=sh(this,E),Xt==Ou){Be==4&&(this.m=4,Lt(14),f=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==nh){this.m=4,Lt(15),Wr(this.i,this.l,E,"[Invalid Chunk]"),f=!1;break}else Wr(this.i,this.l,Xt,null),Tt(this,Xt);if(ih(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||E.length!=0||this.h.h||(this.m=1,Lt(16),f=!1),this.o=this.o&&f,!f)Wr(this.i,this.l,E,"[Invalid Chunked Response]"),Di(this),Do(this);else if(E.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Bo(me),me.P=!0,Lt(11))}}else Wr(this.i,this.l,E,null),Tt(this,E);Be==4&&Di(this),this.o&&!this.K&&(Be==4?sl(this.j,this):(this.o=!1,ko(this)))}else Qu(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Di(this),Do(this)}}}catch{}};function rh(f){if(!ih(f))return f.g.la();const _=ch(f.g);if(_==="")return"";let E="";const R=_.length,Q=Jr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Di(f),Do(f),"";f.h.i=new a.TextDecoder}for(let te=0;te<R;te++)f.h.h=!0,E+=f.h.i.decode(_[te],{stream:!(Q&&te==R-1)});return _.length=0,f.h.g+=E,f.C=0,f.h.g}function ih(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function sh(f,_){var E=f.C,R=_.indexOf(`
`,E);return R==-1?Ou:(E=Number(_.substring(E,R)),isNaN(E)?nh:(R+=1,R+E>_.length?Ou:(_=_.slice(R,R+E),f.C=R+E,_)))}dr.prototype.cancel=function(){this.K=!0,Di(this)};function ko(f){f.T=Date.now()+f.H,Fu(f,f.H)}function Fu(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ms(h(f.aa,f),_)}function Qa(f){f.D&&(a.clearTimeout(f.D),f.D=null)}dr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Zd(this.i,this.B),this.M!=2&&(xi(),Lt(17)),Di(this),this.m=2,Do(this)):Fu(this,this.T-f)};function Do(f){f.j.I==0||f.K||sl(f.j,f)}function Di(f){Qa(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,fs(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function Tt(f,_){try{var E=f.j;if(E.I!=0&&(E.g==f||ju(E.h,f))){if(!f.L&&ju(E.h,f)&&E.I==3){try{var R=E.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<f.F)il(E),Zn(E);else break e;ti(E),Lt(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=ms(h(E.Va,E),6e3));No(E.h)<=1&&E.ta&&(E.ta=void 0)}else er(E,11)}else if((f.L||E.g==f)&&il(E),!V(_))for(Q=E.Ba.g.parse(_),_=0;_<Q.length;_++){let ct=Q[_];const Xt=ct[0];if(!(Xt<=E.K))if(E.K=Xt,ct=ct[1],E.I==2)if(ct[0]=="c"){E.M=ct[1],E.ba=ct[2];const tr=ct[3];tr!=null&&(E.ka=tr,E.j.info("VER="+E.ka));const Fi=ct[4];Fi!=null&&(E.za=Fi,E.j.info("SVER="+E.za));const ni=ct[5];ni!=null&&typeof ni=="number"&&ni>0&&(R=1.5*ni,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const ri=f.g;if(ri){const ll=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var te=R.h;te.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Xa(te,te.h),te.h=null))}if(R.G){const Ju=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Ju&&(R.wa=Ju,st(R.J,R.G,Ju))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-f.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var me=f;if(R.na=Xu(R,R.L?R.ba:null,R.W),me.L){Vo(R.h,me);var Be=me,zt=R.O;zt&&(Be.H=zt),Be.D&&(Qa(Be),ko(Be)),R.g=me}else _n(R);E.i.length>0&&Li(E)}else ct[0]!="stop"&&ct[0]!="close"||er(E,7);else E.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?er(E,7):nl(E):ct[0]!="noop"&&E.l&&E.l.qa(ct),E.A=0)}}xi(4)}catch{}}var km=class{constructor(f,_){this.g=f,this.map=_}};function Ya(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uu(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function No(f){return f.h?1:f.g?f.g.size:0}function ju(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Xa(f,_){f.g?f.g.add(_):f.h=_}function Vo(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Ya.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Yn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const E of f.g.values())_=_.concat(E.G);return _}return T(f.i)}var oh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xn(f,_){if(f){f=f.split("&");for(let E=0;E<f.length;E++){const R=f[E].indexOf("=");let Q,te=null;R>=0?(Q=f[E].substring(0,R),te=f[E].substring(R+1)):Q=f[E],_(Q,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function qr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof qr?(this.l=f.l,Mo(this,f.j),this.o=f.o,this.g=f.g,Gr(this,f.u),this.h=f.h,ws(this,Ku(f.i)),this.m=f.m):f&&(_=String(f).match(oh))?(this.l=!1,Mo(this,_[1]||"",!0),this.o=Oo(_[2]||""),this.g=Oo(_[3]||"",!0),Gr(this,_[4]),this.h=Oo(_[5]||"",!0),ws(this,_[6]||"",!0),this.m=Oo(_[7]||"")):(this.l=!1,this.i=new Ge(null,this.l))}qr.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(Lo(_,$u,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Lo(_,$u,!0),"@"),f.push(Hr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&f.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Lo(E,E.charAt(0)=="/"?Fo:zu,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Lo(E,Wu)),f.join("")},qr.prototype.resolve=function(f){const _=hr(this);let E=!!f.j;E?Mo(_,f.j):E=!!f.o,E?_.o=f.o:E=!!f.g,E?_.g=f.g:E=f.u!=null;var R=f.h;if(E)Gr(_,f.u);else if(E=!!f.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=_.h.lastIndexOf("/");Q!=-1&&(R=_.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const te=[];for(let me=0;me<Q.length;){const Be=Q[me++];Be=="."?R&&me==Q.length&&te.push(""):Be==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),R&&me==Q.length&&te.push("")):(te.push(Be),R=!0)}R=te.join("/")}else R=Q}return E?_.h=R:E=f.i.toString()!=="",E?ws(_,Ku(f.i)):E=!!f.m,E&&(_.m=f.m),_};function hr(f){return new qr(f)}function Mo(f,_,E){f.j=E?Oo(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Gr(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function ws(f,_,E){_ instanceof Ge?(f.i=_,Za(f.i,f.l)):(E||(_=Lo(_,Dm)),f.i=new Ge(_,f.l))}function st(f,_,E){f.i.set(_,E)}function Ni(f){return st(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Oo(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Lo(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,Bu),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Bu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var $u=/[#\/\?@]/g,zu=/[#\?:]/g,Fo=/[#\?]/g,Dm=/[#\?@]/g,Wu=/#/g;function Ge(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Kr(f){f.g||(f.g=new Map,f.h=0,f.i&&Xn(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Ge.prototype,n.add=function(f,_){Kr(this),this.i=null,f=Qr(this,f);let E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function Hu(f,_){Kr(f),_=Qr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Ja(f,_){return Kr(f),_=Qr(f,_),f.g.has(_)}n.forEach=function(f,_){Kr(this),this.g.forEach(function(E,R){E.forEach(function(Q){f.call(_,Q,R,this)},this)},this)};function qu(f,_){Kr(f);let E=[];if(typeof _=="string")Ja(f,_)&&(E=E.concat(f.g.get(Qr(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)E=E.concat(f[_]);return E}n.set=function(f,_){return Kr(this),this.i=null,f=Qr(this,f),Ja(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=qu(this,f),f.length>0?String(f[0]):_):_};function Gu(f,_,E){Hu(f,_),E.length>0&&(f.i=null,f.g.set(Qr(f,_),T(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var E=_[R];const Q=Hr(E);E=qu(this,E);for(let te=0;te<E.length;te++){let me=Q;E[te]!==""&&(me+="="+Hr(E[te])),f.push(me)}}return this.i=f.join("&")};function Ku(f){const _=new Ge;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Qr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Za(f,_){_&&!f.j&&(Kr(f),f.i=null,f.g.forEach(function(E,R){const Q=R.toLowerCase();R!=Q&&(Hu(this,R),Gu(this,Q,E))},f)),f.j=_}function Yr(f,_){const E=new gs;if(a.Image){const R=new Image;R.onload=m(mn,E,"TestLoadImage: loaded",!0,_,R),R.onerror=m(mn,E,"TestLoadImage: error",!1,_,R),R.onabort=m(mn,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=m(mn,E,"TestLoadImage: timeout",!1,_,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else _(!1)}function Xr(f,_){const E=new gs,R=new AbortController,Q=setTimeout(()=>{R.abort(),mn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:R.signal}).then(te=>{clearTimeout(Q),te.ok?mn(E,"TestPingServer: ok",!0,_):mn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),mn(E,"TestPingServer: error",!1,_)})}function mn(f,_,E,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(E)}catch{}}function Uo(){this.g=new Tr}function Vi(f){this.i=f.Sb||null,this.h=f.ab||!1}g(Vi,Je),Vi.prototype.g=function(){return new Jn(this.i,this.h)};function Jn(f,_){Ot.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Jn,Ot),n=Jn.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,Pr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||a).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ah(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function ah(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?_s(this):Pr(this),this.readyState==3&&ah(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,_s(this))},n.Na=function(f){this.g&&(this.response=f,_s(this))},n.ga=function(){this.g&&_s(this)};function _s(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Pr(f)}n.setRequestHeader=function(f,_){this.A.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function Pr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function lh(f){let _="";return ne(f,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function el(f,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=lh(E),typeof f=="string"?E!=null&&Hr(E):st(f,_,E))}function gt(f){Ot.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(gt,Ot);var uh=/^https?$/i,Nm=["POST","PUT"];n=gt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():eh.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(te){Es(this,te);return}if(f=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)E.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const te of R.keys())E.set(te,R.get(te));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(te=>te.toLowerCase()=="content-type"),Q=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Nm,_,void 0)>=0)||R||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of E)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(te){Es(this,te)}};function Es(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,Ts(f),Oi(f)}function Ts(f){f.A||(f.A=!0,yt(f,"complete"),yt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,yt(this,"complete"),yt(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),gt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mi(this):this.Xa())},n.Xa=function(){Mi(this)};function Mi(f){if(f.h&&typeof s<"u"){if(f.v&&Jr(f)==4)setTimeout(f.Ca.bind(f),0);else if(yt(f,"readystatechange"),Jr(f)==4){f.h=!1;try{const te=f.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=te===0){let me=String(f.D).match(oh)[1]||null;!me&&a.self&&a.self.location&&(me=a.self.location.protocol.slice(0,-1)),R=!uh.test(me?me.toLowerCase():"")}E=R}if(E)yt(f,"complete"),yt(f,"success");else{f.o=6;try{var Q=Jr(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",Ts(f)}}finally{Oi(f)}}}}function Oi(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const E=f.g;f.g=null,_||yt(f,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),$r(_)}};function ch(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Qu(f){const _={};f=(f.g&&Jr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(V(f[R]))continue;var E=Ka(f[R]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const te=_[Q]||[];_[Q]=te,te.push(E)}J(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zr(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function tl(f){this.za=0,this.i=[],this.j=new gs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zr("baseRetryDelayMs",5e3,f),this.Za=Zr("retryDelaySeedMs",1e4,f),this.Ta=Zr("forwardChannelMaxRetries",2,f),this.va=Zr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Ya(f&&f.concurrentRequestLimit),this.Ba=new Uo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=tl.prototype,n.ka=8,n.I=1,n.connect=function(f,_,E,R){Lt(0),this.W=f,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Xu(this,null,this.W),Li(this)};function nl(f){if(rl(f),f.I==3){var _=f.V++,E=hr(f.J);if(st(E,"SID",f.M),st(E,"RID",_),st(E,"TYPE","terminate"),ei(f,E),_=new dr(f,f.j,_),_.M=2,_.A=Ni(hr(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=_.A,E=!0),E||(_.g=hh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),ko(_)}$o(f)}function Zn(f){f.g&&(Bo(f),f.g.cancel(),f.g=null)}function rl(f){Zn(f),f.v&&(a.clearTimeout(f.v),f.v=null),il(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Li(f){if(!Uu(f.h)&&!f.m){f.m=!0;var _=f.Ea;X||I(),re||(X(),re=!0),A.add(_,f),f.D=0}}function dh(f,_){return No(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ms(h(f.Ea,f,_),ol(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new dr(this,this.j,f);let te=this.o;if(this.U&&(te?(te=N(te),se(te,this.U)):te=this.U),this.u!==null||this.R||(Q.J=te,te=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Yu(this,Q,_),E=hr(this.J),st(E,"RID",f),st(E,"CVER",22),this.G&&st(E,"X-HTTP-Session-Id",this.G),ei(this,E),te&&(this.R?_="headers="+Hr(lh(te))+"&"+_:this.u&&el(E,this.u,te)),Xa(this.h,Q),this.Ra&&st(E,"TYPE","init"),this.S?(st(E,"$req",_),st(E,"SID","null"),Q.U=!0,Sr(Q,E,null)):Sr(Q,E,_),this.I=2}}else this.I==3&&(f?jo(this,f):this.i.length==0||Uu(this.h)||jo(this))};function jo(f,_){var E;_?E=_.l:E=f.V++;const R=hr(f.J);st(R,"SID",f.M),st(R,"RID",E),st(R,"AID",f.K),ei(f,R),f.u&&f.o&&el(R,f.u,f.o),E=new dr(f,f.j,E,f.D+1),f.u===null&&(E.J=f.o),_&&(f.i=_.G.concat(f.i)),_=Yu(f,E,1e3),E.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Xa(f.h,E),Sr(E,R,_)}function ei(f,_){f.H&&ne(f.H,function(E,R){st(_,R,E)}),f.l&&ne({},function(E,R){st(_,R,E)})}function Yu(f,_,E){E=Math.min(f.i.length,E);const R=f.l?h(f.l.Ka,f.l,f):null;e:{var Q=f.i;let Be=-1;for(;;){const zt=["count="+E];Be==-1?E>0?(Be=Q[0].g,zt.push("ofs="+Be)):Be=0:zt.push("ofs="+Be);let ct=!0;for(let Xt=0;Xt<E;Xt++){var te=Q[Xt].g;const tr=Q[Xt].map;if(te-=Be,te<0)Be=Math.max(0,Q[Xt].g-100),ct=!1;else try{te="req"+te+"_"||"";try{var me=tr instanceof Map?tr:Object.entries(tr);for(const[Fi,ni]of me){let ri=ni;u(ni)&&(ri=Br(ni)),zt.push(te+Fi+"="+encodeURIComponent(ri))}}catch(Fi){throw zt.push(te+"type="+encodeURIComponent("_badmap")),Fi}}catch{R&&R(tr)}}if(ct){me=zt.join("&");break e}}me=void 0}return f=f.i.splice(0,E),_.G=f,me}function _n(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;X||I(),re||(X(),re=!0),A.add(_,f),f.A=0}}function ti(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ms(h(f.Da,f),ol(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Is(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ms(h(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Zn(this),Is(this))};function Bo(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function Is(f){f.g=new dr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=hr(f.na);st(_,"RID","rpc"),st(_,"SID",f.M),st(_,"AID",f.K),st(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&st(_,"TO",f.ia),st(_,"TYPE","xmlhttp"),ei(f,_),f.u&&f.o&&el(_,f.u,f.o),f.O&&(f.g.H=f.O);var E=f.g;f=f.ba,E.M=1,E.A=Ni(hr(_)),E.u=null,E.R=!0,Lu(E,f)}n.Va=function(){this.C!=null&&(this.C=null,Zn(this),ti(this),Lt(19))};function il(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function sl(f,_){var E=null;if(f.g==_){il(f),Bo(f),f.g=null;var R=2}else if(ju(f.h,_))E=_.G,Vo(f.h,_),R=1;else return;if(f.I!=0){if(_.o)if(R==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var Q=f.D;R=ps(),yt(R,new Mu(R,E)),Li(f)}else _n(f);else if(Q=_.m,Q==3||Q==0&&_.X>0||!(R==1&&dh(f,_)||R==2&&ti(f)))switch(E&&E.length>0&&(_=f.h,_.i=_.i.concat(E)),Q){case 1:er(f,5);break;case 4:er(f,10);break;case 3:er(f,6);break;default:er(f,2)}}}function ol(f,_){let E=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(E*=2),E*_}function er(f,_){if(f.j.info("Error code "+_),_==2){var E=h(f.bb,f),R=f.Ua;const Q=!R;R=new qr(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mo(R,"https"),Ni(R),Q?Yr(R.toString(),E):Xr(R.toString(),E)}else Lt(2);f.I=0,f.l&&f.l.pa(_),$o(f),rl(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function $o(f){if(f.I=0,f.ja=[],f.l){const _=Yn(f.h);(_.length!=0||f.i.length!=0)&&(b(f.ja,_),b(f.ja,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.oa()}}function Xu(f,_,E){var R=E instanceof qr?hr(E):new qr(E);if(R.g!="")_&&(R.g=_+"."+R.g),Gr(R,R.u);else{var Q=a.location;R=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;const te=new qr(null);R&&Mo(te,R),_&&(te.g=_),Q&&Gr(te,Q),E&&(te.h=E),R=te}return E=f.G,_=f.wa,E&&_&&st(R,E,_),st(R,"VER",f.ka),ei(f,R),R}function hh(f,_,E){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new gt(new Vi({ab:E})):new gt(f.ma),_.Fa(f.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fh(){}n=fh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function al(){}al.prototype.g=function(f,_){return new gn(f,_)};function gn(f,_){Ot.call(this),this.g=new tl(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!V(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ss(this)}g(gn,Ot),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){nl(this.g)},gn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.v&&(E={},E.__data__=Br(f),f=E);_.i.push(new km(_.Ya++,f)),_.I==3&&Li(_)},gn.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,gn.Z.N.call(this)};function ph(f){Ha.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const E in _){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}g(ph,Ha);function mh(){Vu.call(this),this.status=1}g(mh,Vu);function Ss(f){this.g=f}g(Ss,fh),Ss.prototype.ra=function(){yt(this.g,"a")},Ss.prototype.qa=function(f){yt(this.g,new ph(f))},Ss.prototype.pa=function(f){yt(this.g,new mh)},Ss.prototype.oa=function(){yt(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,MC=function(){return new al},VC=function(){return ps()},NC=Ir,nv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,bf=ys,vs.COMPLETE="complete",DC=vs,Wa.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,Uc=Wa,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,kC=gt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const UT="@firebase/firestore",jT="4.9.3";let pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");let Cu="12.7.0";const Sa=new pw("@firebase/firestore");function Ll(){return Sa.logLevel}function ue(n,...e){if(Sa.logLevel<=qe.DEBUG){const t=e.map(yw);Sa.debug(`Firestore (${Cu}): ${n}`,...t)}}function Ht(n,...e){if(Sa.logLevel<=qe.ERROR){const t=e.map(yw);Sa.error(`Firestore (${Cu}): ${n}`,...t)}}function uo(n,...e){if(Sa.logLevel<=qe.WARN){const t=e.map(yw);Sa.warn(`Firestore (${Cu}): ${n}`,...t)}}function yw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,OC(n,r,t)}function OC(n,e,t){let r=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ht(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||OC(e,i,r)}function Ae(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class LC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pn.UNAUTHENTICATED)))}shutdown(){}}class NM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VM{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},u=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new LC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class MM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new MM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class BT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new BT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new BT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function FM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=FM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function je(n,e){return n<e?-1:n>e?1:0}function rv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return dy(i)===dy(s)?je(i,s):dy(i)?1:-1}return je(n.length,e.length)}const UM=55296,jM=57343;function dy(n){const e=n.charCodeAt(0);return e>=UM&&e<=jM}function tu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function FC(n){return n+"\0"}const $T="__name__";class li{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=li.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return je(e.length,t.length)}static compareSegments(e,t){const r=li.isNumericId(e),i=li.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?li.extractNumericId(e).compare(li.extractNumericId(t)):rv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class lt extends li{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const BM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends li{construct(e,t,r){return new Dt(e,t,r)}static isValidIdentifier(e){return BM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$T}static keyField(){return new Dt([$T])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(lt.fromString(e))}static fromName(e){return new ye(lt.fromString(e).popFirst(5))}static empty(){return new ye(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new lt(e.slice()))}}function UC(n,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $M(n,e,t,r){if(e===!0&&r===!0)throw new ge(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zT(n){if(!ye.isDocumentKey(n))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WT(n){if(ye.isDocumentKey(n))throw new ge(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ww(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ww(n);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function xd(n,e){if(!jC(n))throw new ge(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ge(ie.INVALID_ARGUMENT,t);return!0}const HT=-62135596800,qT=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*qT);return new ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HT)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qT}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xd(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:nn("string",ht._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nu=-1;class Jf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function iv(n){return n.fields.find((e=>e.kind===2))}function sa(n){return n.fields.filter((e=>e.kind!==2))}Jf.UNKNOWN_ID=-1;class xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ud{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ud(0,ur.min())}}function BC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new ur(i,ye.empty(),e)}function $C(n){return new ur(n.readTime,n.key,nu)}class ur{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ur(Ne.min(),ye.empty(),nu)}static max(){return new ur(Ne.max(),ye.empty(),nu)}}function _w(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}const zC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Eo(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==zC)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,r)=>{t(e)}))}static reject(e){return new q(((t,r)=>{r(e)}))}static waitFor(e){return new q(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(d=>r(d)))})),a=!0,s===i&&t()}))}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next((i=>i?q.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new q(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next((m=>{a[h]=m,++u,u===s&&r(a)}),(m=>i(m)))}}))}static doWhile(e,t){return new q(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const sr="SimpleDb";class qp{static open(e,t,r,i){try{return new qp(t,e.transaction(i,r))}catch(s){throw new qc(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Mr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new qc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Ew(r.target.error);this.S.reject(new qc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(sr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WM(t)}}class io{static delete(e){return ue(sr,"Removing database:",e),da(gC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!SC())return!1;if(io.F())return!0;const e=an(),t=io.M(e),r=0<t&&t<10,i=HC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,io.M(an())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(sr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ge(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ge(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new qc(e,a))},i.onupgradeneeded=s=>{ue(sr,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{ue(sr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const u=qp.open(this.db,e,s?"readonly":"readwrite",r),d=i(u).next((h=>(u.C(),h))).catch((h=>(u.abort(h),q.reject(h)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,h=d.name!=="FirebaseError"&&a<3;if(ue(sr,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function HC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class zM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return da(this.U.delete())}}class qc extends ge{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function To(n){return n.name==="IndexedDbTransactionError"}class WM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ue(sr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue(sr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),da(r)}add(e){return ue(sr,"ADD",this.store.name,e,e),da(this.store.add(e))}get(e){return da(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(sr,"GET",this.store.name,e,t),t)))}delete(e){return ue(sr,"DELETE",this.store.name,e),da(this.store.delete(e))}count(){return ue(sr,"COUNT",this.store.name),da(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new q(((a,u)=>{s.onerror=d=>{u(d.target.error)},s.onsuccess=d=>{a(d.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((u,d)=>{a.push(d)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){ue(sr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new q(((r,i)=>{t.onerror=s=>{const a=Ew(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((u=>{u?a.continue():r()})):r()}}))}H(e,t){const r=[];return new q(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const d=new zM(u),h=t(u.primaryKey,u.value,d);if(h instanceof q){const m=h.catch((g=>(d.done(),q.reject(g))));r.push(m)}d.isDone?i():d.G===null?u.continue():u.continue(d.G)}})).next((()=>q.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function da(n){return new q(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Ew(r.target.error);t(i)}}))}let GT=!1;function Ew(n){const e=io.M(an());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GT||(GT=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Gc="IndexBackfiller";class HM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(Gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(Gc,`Documents written: ${t}`)}catch(t){To(t)?ue(Gc,"Ignoring IndexedDB error during index backfill: ",t):await Eo(t)}await this.re(6e4)}))}}class qM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return q.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return ue(Gc,`Processing collection: ${a}`),this.oe(e,a,i).next((u=>{i-=u,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((u=>(ue(Gc,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=$C(s);_w(a,r)>0&&(r=a)})),new ur(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hn.ce=-1;const va=-1;function Gp(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function qC(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Zf="";function xn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KT(e)),e=GM(n.get(t),e);return KT(e)}function GM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Zf:t+="";break;default:t+=s}}return t}function KT(n){return n+Zf+""}function hi(n){const e=n.length;if(ke(e>=2,64408,{path:n}),e===2)return ke(n.charAt(0)===Zf&&n.charAt(1)==="",56145,{path:n}),lt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Zf,s);switch((a<0||a>t)&&Ie(50515,{path:n}),n.charAt(a+1)){case"":const u=n.substring(s,a);let d;i.length===0?d=u:(i+=u,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Ie(61167,{path:n})}s=a+2}return new lt(r)}const oa="remoteDocuments",Rd="owner",xl="owner",dd="mutationQueues",KM="userId",Nr="mutations",QT="batchId",ma="userMutationsIndex",YT=["userId","batchId"];function Rf(n,e){return[n,xn(e)]}function GC(n,e,t){return[n,xn(e),t]}const QM={},ru="documentMutations",ep="remoteDocumentsV14",YM=["prefixPath","collectionGroup","readTime","documentId"],kf="documentKeyIndex",XM=["prefixPath","collectionGroup","documentId"],KC="collectionGroupIndex",JM=["collectionGroup","readTime","prefixPath","documentId"],hd="remoteDocumentGlobal",sv="remoteDocumentGlobalKey",iu="targets",QC="queryTargetsIndex",ZM=["canonicalId","targetId"],su="targetDocuments",eO=["targetId","path"],Tw="documentTargetsIndex",tO=["path","targetId"],tp="targetGlobalKey",wa="targetGlobal",fd="collectionParents",nO=["collectionId","parent"],ou="clientMetadata",rO="clientId",Kp="bundles",iO="bundleId",Qp="namedQueries",sO="name",Iw="indexConfiguration",oO="indexId",ov="collectionGroupIndex",aO="collectionGroup",Kc="indexState",lO=["indexId","uid"],YC="sequenceNumberIndex",uO=["uid","sequenceNumber"],Qc="indexEntries",cO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XC="documentKeyIndex",dO=["indexId","uid","orderedDocumentKey"],Yp="documentOverlays",hO=["userId","collectionPath","documentId"],av="collectionPathOverlayIndex",fO=["userId","collectionPath","largestBatchId"],JC="collectionGroupOverlayIndex",pO=["userId","collectionGroup","largestBatchId"],Sw="globals",mO="name",ZC=[dd,Nr,ru,oa,iu,Rd,wa,su,ou,hd,fd,Kp,Qp],gO=[...ZC,Yp],eA=[dd,Nr,ru,ep,iu,Rd,wa,su,ou,hd,fd,Kp,Qp,Yp],tA=eA,Pw=[...tA,Iw,Kc,Qc],yO=Pw,nA=[...Pw,Sw],vO=nA;class lv extends WC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function ln(n,e){const t=Ae(n);return io.O(t.le,e)}function XT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Io(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _t{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??wn.RED,this.left=i??wn.EMPTY,this.right=s??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new wn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(e){return new JT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class JT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rl(n){return n.hasNext()?n.getNext():void 0}class qn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new qn([])}unionWith(e){let t=new ft(Dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iA("Invalid base64 string: "+s):s}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const wO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(n){if(ke(!!n,39018),typeof n=="string"){let e=0;const t=wO.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ns(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}const sA="server_timestamp",oA="__type__",aA="__previous_value__",lA="__local_write_time__";function Cw(n){return(n?.mapValue?.fields||{})[oA]?.stringValue===sA}function Xp(n){const e=n.mapValue.fields[aA];return Cw(e)?Xp(e):e}function pd(n){const e=ts(n.mapValue.fields[lA].timestampValue);return new ht(e.seconds,e.nanos)}class _O{constructor(e,t,r,i,s,a,u,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=m}}const np="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||np}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===np}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}const Aw="__type__",uA="__max__",Zs={mapValue:{fields:{__type__:{stringValue:uA}}}},bw="__vector__",au="value",Df={nullValue:"NULL_VALUE"};function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cw(n)?4:cA(n)?9007199254740991:Jp(n)?10:11:Ie(28295,{value:n})}function Ei(n,e){if(n===e)return!0;const t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pd(n).isEqual(pd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ts(i.timestampValue),u=ts(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ns(i.bytesValue).isEqual(ns(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=bt(i.doubleValue),u=bt(s.doubleValue);return a===u?cd(a)===cd(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return tu(n.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(XT(a)!==XT(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Ei(a[d],u[d])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function md(n,e){return(n.values||[]).find((t=>Ei(t,e)))!==void 0}function ho(n,e){if(n===e)return 0;const t=co(n),r=co(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=bt(s.integerValue||s.doubleValue),d=bt(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return ZT(n.timestampValue,e.timestampValue);case 4:return ZT(pd(n),pd(e));case 5:return rv(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=ns(s),d=ns(a);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=je(u[h],d[h]);if(m!==0)return m}return je(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=je(bt(s.latitude),bt(a.latitude));return u!==0?u:je(bt(s.longitude),bt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return eI(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},d=a.fields||{},h=u[au]?.arrayValue,m=d[au]?.arrayValue,g=je(h?.values?.length||0,m?.values?.length||0);return g!==0?g:eI(h,m)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Zs.mapValue&&a===Zs.mapValue)return 0;if(s===Zs.mapValue)return 1;if(a===Zs.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),h=a.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const v=rv(d[g],m[g]);if(v!==0)return v;const T=ho(u[d[g]],h[m[g]]);if(T!==0)return T}return je(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function ZT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=ts(n),r=ts(e),i=je(t.seconds,r.seconds);return i!==0?i:je(t.nanos,r.nanos)}function eI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ho(t[i],r[i]);if(s)return s}return je(t.length,r.length)}function lu(n){return uv(n)}function uv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ts(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ns(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=uv(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${uv(t.fields[a])}`;return i+"}"})(n.mapValue):Ie(61005,{value:n})}function Nf(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xp(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Nf(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Io(r.fields,((s,a)=>{i+=s.length+Nf(a)})),i})(n.mapValue);default:throw Ie(13486,{value:n})}}function xw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cv(n){return!!n&&"integerValue"in n}function gd(n){return!!n&&"arrayValue"in n}function tI(n){return!!n&&"nullValue"in n}function nI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vf(n){return!!n&&"mapValue"in n}function Jp(n){return(n?.mapValue?.fields||{})[Aw]?.stringValue===bw}function Yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Io(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Yc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return{...n}}function cA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uA}const dA={mapValue:{fields:{[Aw]:{stringValue:bw},[au]:{arrayValue:{}}}}};function EO(n){return"nullValue"in n?Df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xw(Pa.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Jp(n)?dA:{mapValue:{}}:Ie(35942,{value:n})}function TO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xw(Pa.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?dA:"mapValue"in n?Jp(n)?{mapValue:{}}:Zs:Ie(61959,{value:n})}function rI(n,e){const t=ho(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iI(n,e){const t=ho(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Dt.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Yc(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Io(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new bn(Yc(this.value))}}function hA(n){const e=[];return Io(n.fields,((t,r)=>{const i=new Dt([t]);if(Vf(r)){const s=hA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new qn(e)}class Ut{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Ut(e,0,Ne.min(),Ne.min(),Ne.min(),bn.empty(),0)}static newFoundDocument(e,t,r,i){return new Ut(e,1,t,Ne.min(),r,i,0)}static newNoDocument(e,t){return new Ut(e,2,t,Ne.min(),Ne.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Ne.min(),Ne.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}function sI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=ho(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function oI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ei(n.position[t],e.position[t]))return!1;return!0}class rp{constructor(e,t="asc"){this.field=e,this.dir=t}}function IO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fA{}class Ke extends fA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SO(e,t,r):t==="array-contains"?new AO(e,r):t==="in"?new wA(e,r):t==="not-in"?new bO(e,r):t==="array-contains-any"?new xO(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PO(e,r):new CO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ho(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(ho(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends fA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pt(e,t)}matches(e){return cu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cu(n){return n.op==="and"}function dv(n){return n.op==="or"}function Rw(n){return pA(n)&&cu(n)}function pA(n){for(const e of n.filters)if(e instanceof pt)return!1;return!0}function hv(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+lu(n.value);if(Rw(n))return n.filters.map((e=>hv(e))).join(",");{const e=n.filters.map((t=>hv(t))).join(",");return`${n.op}(${e})`}}function mA(n,e){return n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Ei(r.value,i.value)})(n,e):n instanceof pt?(function(r,i){return i instanceof pt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&mA(a,i.filters[u])),!0):!1})(n,e):void Ie(19439)}function gA(n,e){const t=n.filters.concat(e);return pt.create(t,n.op)}function yA(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${lu(t.value)}`})(n):n instanceof pt?(function(t){return t.op.toString()+" {"+t.getFilters().map(yA).join(" ,")+"}"})(n):"Filter"}class SO extends Ke{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class PO extends Ke{constructor(e,t){super(e,"in",t),this.keys=vA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class CO extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=vA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vA(n,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class AO extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gd(t)&&md(t.arrayValue,this.value)}}class wA extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&md(this.value.arrayValue,t)}}class bO extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!md(this.value.arrayValue,t)}}class xO extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>md(this.value.arrayValue,r)))}}class RO{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function fv(n,e=null,t=[],r=[],i=null,s=null,a=null){return new RO(n,e,t,r,i,s,a)}function Ca(n){const e=Ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>hv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Gp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>lu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>lu(r))).join(",")),e.Te=t}return e.Te}function kd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!IO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oI(n.startAt,e.startAt)&&oI(n.endAt,e.endAt)}function ip(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function sp(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function aI(n,e,t){let r=Df,i=!0;for(const s of sp(n,e)){let a=Df,u=!0;switch(s.op){case"<":case"<=":a=EO(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=Df}rI({value:r,inclusive:i},{value:a,inclusive:u})<0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];rI({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function lI(n,e,t){let r=Zs,i=!0;for(const s of sp(n,e)){let a=Zs,u=!0;switch(s.op){case">=":case">":a=TO(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=Zs}iI({value:r,inclusive:i},{value:a,inclusive:u})>0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];iI({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class Zp{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _A(n,e,t,r,i,s,a,u){return new Zp(n,e,t,r,i,s,a,u)}function em(n){return new Zp(n)}function uI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kO(n){return n.collectionGroup!==null}function Xc(n){const e=Ae(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ft(Dt.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new rp(s,r))})),t.has(Dt.keyField().canonicalString())||e.Ie.push(new rp(Dt.keyField(),r))}return e.Ie}function lr(n){const e=Ae(n);return e.Ee||(e.Ee=DO(e,Xc(n))),e.Ee}function DO(n,e){if(n.limitType==="F")return fv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new rp(i.field,s)}));const t=n.endAt?new uu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new uu(n.startAt.position,n.startAt.inclusive):null;return fv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pv(n,e,t){return new Zp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tm(n,e){return kd(lr(n),lr(e))&&n.limitType===e.limitType}function EA(n){return`${Ca(lr(n))}|lt:${n.limitType}`}function Fl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>yA(i))).join(", ")}]`),Gp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>lu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>lu(i))).join(",")),`Target(${r})`})(lr(n))}; limitType=${n.limitType})`}function Dd(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Xc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){const h=sI(a,u,d);return a.inclusive?h<=0:h<0})(r.startAt,Xc(r),i)||r.endAt&&!(function(a,u,d){const h=sI(a,u,d);return a.inclusive?h>=0:h>0})(r.endAt,Xc(r),i))})(n,e)}function TA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IA(n){return(e,t)=>{let r=!1;for(const i of Xc(n)){const s=NO(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NO(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(s,a,u){const d=a.data.field(s),h=u.data.field(s);return d!==null&&h!==null?ho(d,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}class ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return rA(this.inner)}size(){return this.innerSize}}const VO=new _t(ye.comparator);function ar(){return VO}const SA=new _t(ye.comparator);function jc(...n){let e=SA;for(const t of n)e=e.insert(t.key,t);return e}function PA(n){let e=SA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function fi(){return Jc()}function CA(){return Jc()}function Jc(){return new ls((n=>n.toString()),((n,e)=>n.isEqual(e)))}const MO=new _t(ye.comparator),OO=new ft(ye.comparator);function ze(...n){let e=OO;for(const t of n)e=e.add(t);return e}const LO=new ft(je);function kw(){return LO}function Dw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function AA(n){return{integerValue:""+n}}function FO(n,e){return qC(e)?AA(e):Dw(n,e)}class nm{constructor(){this._=void 0}}function UO(n,e,t){return n instanceof yd?(function(i,s){const a={fields:{[oA]:{stringValue:sA},[lA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cw(s)&&(s=Xp(s)),s&&(a.fields[aA]=s),{mapValue:a}})(t,e):n instanceof du?xA(n,e):n instanceof hu?RA(n,e):(function(i,s){const a=bA(i,s),u=cI(a)+cI(i.Ae);return cv(a)&&cv(i.Ae)?AA(u):Dw(i.serializer,u)})(n,e)}function jO(n,e,t){return n instanceof du?xA(n,e):n instanceof hu?RA(n,e):t}function bA(n,e){return n instanceof vd?(function(r){return cv(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class yd extends nm{}class du extends nm{constructor(e){super(),this.elements=e}}function xA(n,e){const t=kA(e);for(const r of n.elements)t.some((i=>Ei(i,r)))||t.push(r);return{arrayValue:{values:t}}}class hu extends nm{constructor(e){super(),this.elements=e}}function RA(n,e){let t=kA(e);for(const r of n.elements)t=t.filter((i=>!Ei(i,r)));return{arrayValue:{values:t}}}class vd extends nm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cI(n){return bt(n.integerValue||n.doubleValue)}function kA(n){return gd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class BO{constructor(e,t){this.field=e,this.transform=t}}function $O(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof du&&i instanceof du||r instanceof hu&&i instanceof hu?tu(r.elements,i.elements,Ei):r instanceof vd&&i instanceof vd?Ei(r.Ae,i.Ae):r instanceof yd&&i instanceof yd})(n.transform,e.transform)}class zO{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rm{}function DA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nd(n.key,on.none()):new Au(n.key,n.data,on.none());{const t=n.data,r=bn.empty();let i=new ft(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new us(n.key,r,new qn(i.toArray()),on.none())}}function WO(n,e,t){n instanceof Au?(function(i,s,a){const u=i.value.clone(),d=hI(i.fieldTransforms,s,a.transformResults);u.setAll(d),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof us?(function(i,s,a){if(!Mf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=hI(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(NA(i)),d.setAll(u),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Zc(n,e,t,r){return n instanceof Au?(function(s,a,u,d){if(!Mf(s.precondition,a))return u;const h=s.value.clone(),m=fI(s.fieldTransforms,d,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof us?(function(s,a,u,d){if(!Mf(s.precondition,a))return u;const h=fI(s.fieldTransforms,d,a),m=a.data;return m.setAll(NA(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,u){return Mf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function HO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=bA(r.transform,i||null);s!=null&&(t===null&&(t=bn.empty()),t.set(r.field,s))}return t||null}function dI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tu(r,i,((s,a)=>$O(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Au extends rm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class us extends rm{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function hI(n,e,t){const r=new Map;ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,jO(a,u,t[i]))}return r}function fI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,UO(s,a,e))}return r}class Nd extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VA extends rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WO(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=CA();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const d=DA(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,((t,r)=>dI(t,r)))&&tu(this.baseMutations,e.baseMutations,((t,r)=>dI(t,r)))}}class Vw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return MO})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Vw(e,t,r,i)}}class Mw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zt,Xe;function GO(n){switch(n){case ie.OK:return Ie(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function MA(n){if(n===void 0)return Ht("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Zt.OK:return ie.OK;case Zt.CANCELLED:return ie.CANCELLED;case Zt.UNKNOWN:return ie.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ie.INTERNAL;case Zt.UNAVAILABLE:return ie.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ie.NOT_FOUND;case Zt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Zt.ABORTED:return ie.ABORTED;case Zt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Zt.DATA_LOSS:return ie.DATA_LOSS;default:return Ie(39323,{code:n})}}(Xe=Zt||(Zt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function KO(){return new TextEncoder}const QO=new ro([4294967295,4294967295],0);function pI(n){const e=KO().encode(n),t=new RC;return t.update(e),new Uint8Array(t.digest())}function mI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ro([t,r],0),new ro([i,s],0)]}class Ow{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bc(`Invalid padding: ${t}`);if(r<0)throw new Bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ro.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ro.fromNumber(r)));return i.compare(QO)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pI(e),[r,i]=mI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Ow(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=pI(e),[r,i]=mI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Md.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vd(Ne.min(),i,new _t(je),ar(),ze())}}class Md{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Md(r,t,ze(),ze(),ze())}}class Of{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class OA{constructor(e,t){this.targetId=e,this.Ce=t}}class LA{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class gI{constructor(){this.ve=0,this.Fe=yI(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:s})}})),new Md(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=yI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YO{constructor(e){this.Ge=e,this.ze=new Map,this.je=ar(),this.Je=hf(),this.He=hf(),this.Ye=new _t(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(ip(s))if(r===0){const a=new ye(s.path);this.et(t,a,Ut.newNoDocument(a,Ne.min()))}else ke(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=ns(r).toUint8Array()}catch(d){if(d instanceof iA)return uo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Ow(a,i,s)}catch(d){return uo(d instanceof Bc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&ip(u.target)){const d=new ye(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Ut.newNoDocument(d,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=ze();this.He.forEach(((s,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Vd(e,t,this.Ye,this.je,r);return this.je=ar(),this.Je=hf(),this.He=hf(),this.Ye=new _t(je),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ft(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ft(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new _t(ye.comparator)}function yI(){return new _t(ye.comparator)}const XO={asc:"ASCENDING",desc:"DESCENDING"},JO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZO={and:"AND",or:"OR"};class eL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mv(n,e){return n.useProto3Json||Gp(e)?e:{value:e}}function fu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tL(n,e){return fu(n,e.toTimestamp())}function On(n){return ke(!!n,49232),Ne.fromTimestamp((function(t){const r=ts(t);return new ht(r.seconds,r.nanos)})(n))}function Lw(n,e){return gv(n,e).canonicalString()}function gv(n,e){const t=(function(i){return new lt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function UA(n){const e=lt.fromString(n);return ke(KA(e),10190,{key:e.toString()}),e}function op(n,e){return Lw(n.databaseId,e.path)}function _a(n,e){const t=UA(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye($A(t))}function jA(n,e){return Lw(n.databaseId,e)}function BA(n){const e=UA(n);return e.length===4?lt.emptyPath():$A(e)}function yv(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $A(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function vI(n,e,t){return{name:op(n,e),fields:t.value.mapValue.fields}}function nL(n,e,t){const r=_a(n,e.name),i=On(e.updateTime),s=e.createTime?On(e.createTime):Ne.min(),a=new bn({mapValue:{fields:e.fields}}),u=Ut.newFoundDocument(r,i,s,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function rL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(ke(m===void 0||typeof m=="string",58123),Yt.fromBase64String(m||"")):(ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Yt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const m=h.code===void 0?ie.UNKNOWN:MA(h.code);return new ge(m,h.message||"")})(a);t=new LA(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_a(n,r.document.name),s=On(r.document.updateTime),a=r.document.createTime?On(r.document.createTime):Ne.min(),u=new bn({mapValue:{fields:r.document.fields}}),d=Ut.newFoundDocument(i,s,a,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Of(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_a(n,r.document),s=r.readTime?On(r.readTime):Ne.min(),a=Ut.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Of([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_a(n,r.document),s=r.removedTargetIds||[];t=new Of([],s,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new qO(i,s),u=r.targetId;t=new OA(u,a)}}return t}function ap(n,e){let t;if(e instanceof Au)t={update:vI(n,e.key,e.value)};else if(e instanceof Nd)t={delete:op(n,e.key)};else if(e instanceof us)t={update:vI(n,e.key,e.data),updateMask:uL(e.fieldMask)};else{if(!(e instanceof VA))return Ie(16599,{Vt:e.type});t={verify:op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof yd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof du)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof hu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:tL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie(27497)})(n,e.precondition)),t}function vv(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?on.updateTime(On(s.updateTime)):s.exists!==void 0?on.exists(s.exists):on.none()})(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,u){let d=null;if("setToServerValue"in u)ke(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new yd;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];d=new du(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];d=new hu(m)}else"increment"in u?d=new vd(a,u.increment):Ie(16584,{proto:u});const h=Dt.fromServerFormat(u.fieldPath);return new BO(h,d)})(n,i))):[];if(e.update){e.update.name;const i=_a(n,e.update.name),s=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new qn(h.map((m=>Dt.fromServerFormat(m))))})(e.updateMask);return new us(i,s,a,t,r)}return new Au(i,s,t,r)}if(e.delete){const i=_a(n,e.delete);return new Nd(i,t)}if(e.verify){const i=_a(n,e.verify);return new VA(i,t)}return Ie(1463,{proto:e})}function iL(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?On(i.updateTime):On(s);return a.isEqual(Ne.min())&&(a=On(s)),new zO(a,i.transformResults||[])})(t,e)))):[]}function zA(n,e){return{documents:[jA(n,e.path)]}}function WA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jA(n,i);const s=(function(h){if(h.length!==0)return GA(pt.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:Ul(v.field),direction:oL(v.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=mv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function HA(n){let e=BA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ke(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const v=qA(g);return v instanceof pt&&Rw(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((v=>(function(b){return new rp(jl(b.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,Gp(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(g){const v=!!g.before,T=g.values||[];return new uu(T,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const v=!g.before,T=g.values||[];return new uu(T,v)})(t.endAt)),_A(e,i,a,s,u,"F",d,h)}function sL(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jl(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jl(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jl(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=jl(t.unaryFilter.field);return Ke.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(jl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pt.create(t.compositeFilter.filters.map((r=>qA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function oL(n){return XO[n]}function aL(n){return JO[n]}function lL(n){return ZO[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function jl(n){return Dt.fromServerFormat(n.fieldPath)}function GA(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(nI(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NAN"}};if(tI(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nI(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NAN"}};if(tI(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(t.field),op:aL(t.op),value:t.value}}})(n):n instanceof pt?(function(t){const r=t.getFilters().map((i=>GA(i)));return r.length===1?r[0]:{compositeFilter:{op:lL(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function uL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ki{constructor(e,t,r,i,s=Ne.min(),a=Ne.min(),u=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class QA{constructor(e){this.yt=e}}function cL(n,e){let t;if(e.document)t=nL(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=ba(e.noDocument.readTime);t=Ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=ye.fromSegments(e.unknownDocument.path),i=ba(e.unknownDocument.version);t=Ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new ht(i[0],i[1]);return Ne.fromTimestamp(s)})(e.readTime)),t}function wI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:lp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:op(s,a.key),fields:a.data.value.mapValue.fields,updateTime:fu(s,a.version.toTimestamp()),createTime:fu(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Aa(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Aa(e.version)}}return r}function lp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Aa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ba(n){const e=new ht(n.seconds,n.nanoseconds);return Ne.fromTimestamp(e)}function ha(n,e){const t=(e.baseMutations||[]).map((s=>vv(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>vv(n.yt,s))),i=ht.fromMillis(e.localWriteTimeMs);return new Nw(e.batchId,i,t,r)}function $c(n){const e=ba(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ba(n.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return ke(a===1,1966,{count:a}),lr(em(BA(s.documents[0])))})(n.query):(function(s){return lr(HA(s))})(n.query),new Ki(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Yt.fromBase64String(n.resumeToken))}function YA(n,e){const t=Aa(e.snapshotVersion),r=Aa(e.lastLimboFreeSnapshotVersion);let i;i=ip(e.target)?zA(n.yt,e.target):WA(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ca(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XA(n){const e=HA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pv(e,e.limit,"L"):e}function hy(n,e){return new Mw(e.largestBatchId,vv(n.yt,e.overlayMutation))}function _I(n,e){const t=e.path.lastSegment();return[n,xn(e.path.popLast()),t]}function EI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Aa(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}class dL{getBundleMetadata(e,t){return TI(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:ba(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return TI(e).put((function(i){return{bundleId:i.id,createTime:Aa(On(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return II(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:XA(s.bundledQuery),readTime:ba(s.readTime)}})(r)}))}saveNamedQuery(e,t){return II(e).put((function(i){return{name:i.name,readTime:Aa(On(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function TI(n){return ln(n,Kp)}function II(n){return ln(n,Qp)}class im{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new im(e,r)}getOverlay(e,t){return Sc(e).get(_I(this.userId,t)).next((r=>r?hy(this.serializer,r):null))}getOverlays(e,t){const r=fi();return q.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const u=new Mw(t,a);i.push(this.St(e,u))})),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(xn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Sc(e).Z(av,u))})),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=fi(),s=xn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Sc(e).J(av,a).next((u=>{for(const d of u){const h=hy(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=fi();let a;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sc(e).ee({index:JC,range:u},((d,h,m)=>{const g=hy(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):m.done()})).next((()=>s))}St(e,t){return Sc(e).put((function(i,s,a){const[u,d,h]=_I(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ap(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Sc(n){return ln(n,Yp)}class hL{bt(e){return ln(e,Sw)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Yt.fromUint8Array(r):Yt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bt(e.integerValue));else if("doubleValue"in e){const r=bt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),cd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ts(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ns(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?cA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Jp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=au,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(bt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fa.Kt=new fa;const kl=255;function fL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function SI(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=fL(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class pL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=SI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=SI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(kl),this.sn(255)}_n(){this.an(kl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===kl?(this.sn(kl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===kl?(this.an(kl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class mL{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class gL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Pc{constructor(){this.cn=new pL,this.ln=new mL(this.cn),this.hn=new gL(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class pa{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new pa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Lf(this.En),directionalValue:Lf(this.dn),orderedDocumentKey:Lf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Us(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=PI(n.En,e.En),t!==0?t:(t=PI(n.dn,e.dn),t!==0?t:ye.comparator(n.In,e.In)))}function PI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Lf(n){return IC()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function CI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class AI{constructor(e){this.mn=new ft(((t,r)=>Dt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=iv(e);if(t!==void 0&&!this.wn(t))return!1;const r=sa(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const d=r[s];if(!this.Sn(u,d)||!this.bn(this.fn[a++],d))return!1}++s}for(;s<r.length;++s){const u=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new ft(Dt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new xf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new xf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new xf(r.field,r.dir==="asc"?0:1)));return new Jf(Jf.UNKNOWN_ID,this.collectionId,t,ud.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function JA(n){if(ke(n instanceof Ke||n instanceof pt,20012),n instanceof Ke){if(n instanceof wA){const t=n.value.arrayValue?.values?.map((r=>Ke.create(n.field,"==",r)))||[];return pt.create(t,"or")}return n}const e=n.filters.map((t=>JA(t)));return pt.create(e,n.op)}function yL(n){if(n.getFilters().length===0)return[];const e=Ev(JA(n));return ke(ZA(e),7391),wv(e)||_v(e)?[e]:e.getFilters()}function wv(n){return n instanceof Ke}function _v(n){return n instanceof pt&&Rw(n)}function ZA(n){return wv(n)||_v(n)||(function(t){if(t instanceof pt&&dv(t)){for(const r of t.getFilters())if(!wv(r)&&!_v(r))return!1;return!0}return!1})(n)}function Ev(n){if(ke(n instanceof Ke||n instanceof pt,34018),n instanceof Ke)return n;if(n.filters.length===1)return Ev(n.filters[0]);const e=n.filters.map((r=>Ev(r)));let t=pt.create(e,n.op);return t=up(t),ZA(t)?t:(ke(t instanceof pt,64498),ke(cu(t),40251),ke(t.filters.length>1,57927),t.filters.reduce(((r,i)=>Fw(r,i))))}function Fw(n,e){let t;return ke(n instanceof Ke||n instanceof pt,38388),ke(e instanceof Ke||e instanceof pt,25473),t=n instanceof Ke?e instanceof Ke?(function(i,s){return pt.create([i,s],"and")})(n,e):bI(n,e):e instanceof Ke?bI(e,n):(function(i,s){if(ke(i.filters.length>0&&s.filters.length>0,48005),cu(i)&&cu(s))return gA(i,s.getFilters());const a=dv(i)?i:s,u=dv(i)?s:i,d=a.filters.map((h=>Fw(h,u)));return pt.create(d,"or")})(n,e),up(t)}function bI(n,e){if(cu(e))return gA(e,n.getFilters());{const t=e.filters.map((r=>Fw(n,r)));return pt.create(t,"or")}}function up(n){if(ke(n instanceof Ke||n instanceof pt,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return up(e[0]);if(pA(n))return n;const t=e.map((i=>up(i))),r=[];return t.forEach((i=>{i instanceof Ke?r.push(i):i instanceof pt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:pt.create(r,n.op)}class vL{constructor(){this.Cn=new Uw}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ur.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class Uw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ft(lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(lt.comparator)).toArray()}}const xI="IndexedDbIndexManager",ff=new Uint8Array(0);class wL{constructor(e,t){this.databaseId=t,this.vn=new Uw,this.Fn=new ls((r=>Ca(r)),((r,i)=>kd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:xn(i)};return RI(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[FC(t),""],!1,!0);return RI(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(hi(a.parent))}return r}))}addFieldIndex(e,t){const r=Cc(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Nl(e);return s.next((u=>{a.put(EI(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Cc(e),i=Nl(e),s=Dl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Cc(e),r=Dl(e),i=Nl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return q.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new AI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Dl(e);let i=!0;const s=new Map;return q.forEach(this.Mn(t),(a=>this.xn(e,a).next((u=>{i&&(i=!!u),s.set(a,u)})))).next((()=>{if(i){let a=ze();const u=[];return q.forEach(s,((d,h)=>{ue(xI,`Using index ${(function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(d)} to execute ${Ca(t)}`);const m=(function(D,B){const X=iv(B);if(X===void 0)return null;for(const re of sp(D,X.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null})(h,d),g=(function(D,B){const X=new Map;for(const re of sa(B))for(const A of sp(D,re.fieldPath))switch(A.op){case"==":case"in":X.set(re.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return X.set(re.fieldPath.canonicalString(),A.value),Array.from(X.values())}return null})(h,d),v=(function(D,B){const X=[];let re=!0;for(const A of sa(B)){const I=A.kind===0?aI(D,A.fieldPath,D.startAt):lI(D,A.fieldPath,D.startAt);X.push(I.value),re&&(re=I.inclusive)}return new uu(X,re)})(h,d),T=(function(D,B){const X=[];let re=!0;for(const A of sa(B)){const I=A.kind===0?lI(D,A.fieldPath,D.endAt):aI(D,A.fieldPath,D.endAt);X.push(I.value),re&&(re=I.inclusive)}return new uu(X,re)})(h,d),b=this.On(d,h,v),x=this.On(d,h,T),P=this.Nn(d,h,g),j=this.Bn(d.indexId,m,b,v.inclusive,x,T.inclusive,P);return q.forEach(j,(M=>r.Y(M,t.limit).next((D=>{D.forEach((B=>{const X=ye.fromSegments(B.documentKey);a.has(X)||(a=a.add(X),u.push(X))}))}))))})).next((()=>u))}return q.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=yL(pt.create(e.filters,"and")).map((r=>fv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,u){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),h=d/(t!=null?t.length:1),m=[];for(let g=0;g<d;++g){const v=t?this.Ln(t[g/h]):ff,T=this.kn(e,v,r[g%h],i),b=this.qn(e,v,s[g%h],a),x=u.map((P=>this.kn(e,v,P,!0)));m.push(...this.createRange(T,b,x))}return m}kn(e,t,r,i){const s=new pa(e,ye.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new pa(e,ye.empty(),t,r);return i?s.An():s}xn(e,t){const r=new AI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const u of s)r.yn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return q.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(d){let h=new ft(Dt.comparator),m=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:h=h.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Pc;for(const i of sa(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);fa.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Pc;return fa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Pc;return fa.Kt.Dt(xw(this.databaseId,t),r.Pn((function(s){const a=sa(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Pc);let s=0;for(const a of sa(e)){const u=r[s++];for(const d of i)if(this.Un(t,a.fieldPath)&&gd(u))i=this.Kn(i,a,u);else{const h=d.Pn(a.kind);fa.Kt.Dt(u,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const u of i){const d=new Pc;d.seed(u.un()),fa.Kt.Dt(a,d.Pn(t.kind)),s.push(d)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Cc(e),i=Nl(e);return(t?r.J(ov,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return q.forEach(s,(u=>i.get([u.indexId,this.uid]).next((d=>{a.push((function(m,g){const v=g?new ud(g.sequenceNumber,new ur(ba(g.readTime),new ye(hi(g.documentKey)),g.largestBatchId)):ud.empty(),T=m.fields.map((([b,x])=>new xf(Dt.fromServerFormat(b),x)));return new Jf(m.indexId,m.collectionGroup,T,v)})(u,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:je(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Cc(e),s=Nl(e);return this.Gn(e).next((a=>i.J(ov,IDBKeyRange.bound(t,t)).next((u=>q.forEach(u,(d=>s.put(EI(d.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?q.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),q.forEach(u,(d=>this.zn(e,i,d).next((h=>{const m=this.jn(s,d);return h.isEqual(m)?q.resolve():this.Jn(e,s,d,h,m)})))))))}))}Hn(e,t,r,i){return Dl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Dl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Dl(e);let s=new ft(Us);return i.ee({index:XC,range:IDBKeyRange.only([r.indexId,this.uid,Lf(this.$n(r,t))])},((a,u)=>{s=s.add(new pa(r.indexId,t,CI(u.arrayValue),CI(u.directionalValue)))})).next((()=>s))}jn(e,t){let r=new ft(Us);const i=this.Qn(t,e);if(i==null)return r;const s=iv(t);if(s!=null){const a=e.data.field(s.fieldPath);if(gd(a))for(const u of a.arrayValue.values||[])r=r.add(new pa(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new pa(t.indexId,e.key,ff,i));return r}Jn(e,t,r,i,s){ue(xI,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,m,g,v){const T=d.getIterator(),b=h.getIterator();let x=Rl(T),P=Rl(b);for(;x||P;){let j=!1,M=!1;if(x&&P){const D=m(x,P);D<0?M=!0:D>0&&(j=!0)}else x!=null?M=!0:j=!0;j?(g(P),P=Rl(b)):M?(v(x),x=Rl(T)):(x=Rl(T),P=Rl(b))}})(i,s,Us,(u=>{a.push(this.Hn(e,t,r,u))}),(u=>{a.push(this.Yn(e,t,r,u))})),q.waitFor(a)}Gn(e){let t=1;return Nl(e).ee({index:YC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,u)=>Us(a,u))).filter(((a,u,d)=>!u||Us(a,d[u-1])!==0));const i=[];i.push(e);for(const a of r){const u=Us(a,e),d=Us(a,t);if(u===0)i[0]=e.An();else if(u>0&&d<0)i.push(a),i.push(a.An());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const u=i[a].Vn(this.uid,ff,ye.empty()),d=i[a+1].Vn(this.uid,ff,ye.empty());s.push(IDBKeyRange.bound(u,d))}return s}Zn(e,t){return Us(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kI)}getMinOffset(e,t){return q.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(kI)}}function RI(n){return ln(n,fd)}function Dl(n){return ln(n,Qc)}function Cc(n){return ln(n,Iw)}function Nl(n){return ln(n,Kc)}function kI(n){ke(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_w(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ur(e.readTime,e.documentKey,t)}const DI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eb=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function tb(n,e,t){const r=n.store(Nr),i=n.store(ru),s=[],a=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:a},((m,g,v)=>(u++,v.delete())));s.push(d.next((()=>{ke(u===1,47070,{batchId:t.batchId})})));const h=[];for(const m of t.mutations){const g=GC(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return q.waitFor(s).next((()=>h))}function cp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie(14731);e=n.noDocument}return JSON.stringify(e).length}An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(eb,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);class sm{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){ke(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new sm(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return js(e).ee({index:ma,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=Bl(e),a=js(e);return a.add({}).next((u=>{ke(typeof u=="number",49019);const d=new Nw(u,t,r,i),h=(function(T,b,x){const P=x.baseMutations.map((M=>ap(T.yt,M))),j=x.mutations.map((M=>ap(T.yt,M)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:P,mutations:j}})(this.serializer,this.userId,d),m=[];let g=new ft(((v,T)=>je(v.canonicalString(),T.canonicalString())));for(const v of i){const T=GC(this.userId,v.key.path,u);g=g.add(v.key.path.popLast()),m.push(a.put(h)),m.push(s.put(T,QM))}return g.forEach((v=>{m.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),q.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,t){return js(e).get(t).next((r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ha(this.serializer,r)):null))}er(e,t){return this.Xn[t]?q.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return js(e).ee({index:ma,range:i},((a,u,d)=>{u.userId===this.userId&&(ke(u.batchId>=r,47524,{tr:r}),s=ha(this.serializer,u)),d.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=va;return js(e).ee({index:ma,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,va],[this.userId,Number.POSITIVE_INFINITY]);return js(e).J(ma,t).next((r=>r.map((i=>ha(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Rf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bl(e).ee({range:i},((a,u,d)=>{const[h,m,g]=a,v=hi(m);if(h===this.userId&&t.path.isEqual(v))return js(e).get(g).next((T=>{if(!T)throw Ie(61480,{nr:a,batchId:g});ke(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:g}),s.push(ha(this.serializer,T))}));d.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(je);const i=[];return t.forEach((s=>{const a=Rf(this.userId,s.path),u=IDBKeyRange.lowerBound(a),d=Bl(e).ee({range:u},((h,m,g)=>{const[v,T,b]=h,x=hi(T);v===this.userId&&s.path.isEqual(x)?r=r.add(b):g.done()}));i.push(d)})),q.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Rf(this.userId,r),a=IDBKeyRange.lowerBound(s);let u=new ft(je);return Bl(e).ee({range:a},((d,h,m)=>{const[g,v,T]=d,b=hi(v);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(u=u.add(T)):m.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(js(e).get(s).next((a=>{if(a===null)throw Ie(35274,{batchId:s});ke(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ha(this.serializer,a))})))})),q.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return tb(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),q.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Bl(e).ee({range:r},((s,a,u)=>{if(s[0]===this.userId){const d=hi(s[1]);i.push(d)}else u.done()})).next((()=>{ke(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return nb(e,this.userId,t)}_r(e){return rb(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:va,lastStreamToken:""}))}}function nb(n,e,t){const r=Rf(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Bl(n).ee({range:s,X:!0},((u,d,h)=>{const[m,g,v]=u;m===e&&g===i&&(a=!0),h.done()})).next((()=>a))}function js(n){return ln(n,Nr)}function Bl(n){return ln(n,ru)}function rb(n){return ln(n,dd)}class xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xa(0)}static cr(){return new xa(-1)}}class _L{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new xa(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ne.fromTimestamp(new ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Vl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Vl(e).ee(((a,u)=>{const d=$c(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))})).next((()=>q.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Vl(e).ee(((r,i)=>{const s=$c(i);t(s)}))}lr(e){return NI(e).get(tp).next((t=>(ke(t!==null,2888),t)))}hr(e,t){return NI(e).put(tp,t)}Pr(e,t){return Vl(e).put(YA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ca(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Vl(e).ee({range:i,index:QC},((a,u,d)=>{const h=$c(u);kd(t,h.target)&&(s=h,d.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Gs(e);return t.forEach((a=>{const u=xn(a.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,a))})),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gs(e);return q.forEach(t,(s=>{const a=xn(s.path);return q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Gs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gs(e);let s=ze();return i.ee({range:r,X:!0},((a,u,d)=>{const h=hi(a[1]),m=new ye(h);s=s.add(m)})).next((()=>s))}containsKey(e,t){const r=xn(t.path),i=IDBKeyRange.bound([r],[FC(r)],!1,!0);let s=0;return Gs(e).ee({index:Tw,X:!0,range:i},(([a,u],d,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}At(e,t){return Vl(e).get(t).next((r=>r?$c(r):null))}}function Vl(n){return ln(n,iu)}function NI(n){return ln(n,wa)}function Gs(n){return ln(n,su)}const VI="LruGarbageCollector",EL=1048576;function MI([n,e],[t,r]){const i=je(n,t);return i===0?je(e,r):i}class TL{constructor(e){this.Ir=e,this.buffer=new ft(MI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();MI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ib{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(VI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){To(t)?ue(VI,"Ignoring IndexedDB error during garbage collection: ",t):await Eo(t)}await this.Vr(3e5)}))}}class IL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Hn.ce);const r=new TL(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(DI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,u,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),Ll()<=qe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function sb(n,e){return new IL(n,e)}class SL{constructor(e,t){this.db=e,this.garbageCollector=sb(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return pf(e,r)}removeReference(e,t,r){return pf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pf(e,t)}br(e,t){return(function(i,s){let a=!1;return rb(i).te((u=>nb(i,u,s).next((d=>(d&&(a=!0),q.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,u)=>{if(u<=t){const d=this.br(e,a).next((h=>{if(!h)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Ne.min()),Gs(e).delete((function(g){return[0,xn(g.path)]})(a)))))}));i.push(d)}})).next((()=>q.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pf(e,t)}Sr(e,t){const r=Gs(e);let i,s=Hn.ce;return r.ee({index:Tw},(([a,u],{path:d,sequenceNumber:h})=>{a===0?(s!==Hn.ce&&t(new ye(hi(i)),s),s=h,i=d):s=Hn.ce})).next((()=>{s!==Hn.ce&&t(new ye(hi(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pf(n,e){return Gs(n).put((function(r,i){return{targetId:0,path:xn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class ob{constructor(){this.changes=new ls((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ta(e).put(r)}removeEntry(e,t,r){return ta(e).delete((function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],lp(a),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ut.newInvalidDocument(t);return ta(e).ee({index:kf,range:IDBKeyRange.only(Ac(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Ut.newInvalidDocument(t)};return ta(e).ee({index:kf,range:IDBKeyRange.only(Ac(t))},((i,s)=>{r={document:this.Cr(t,s),size:cp(s)}})).next((()=>r))}getEntries(e,t){let r=ar();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=ar(),i=new _t(ye.comparator);return this.Fr(e,t,((s,a)=>{const u=this.Cr(s,a);r=r.insert(s,u),i=i.insert(s,cp(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return q.resolve();let i=new ft(FI);t.forEach((d=>i=i.add(d)));const s=IDBKeyRange.bound(Ac(i.first()),Ac(i.last())),a=i.getIterator();let u=a.getNext();return ta(e).ee({index:kf,range:s},((d,h,m)=>{const g=ye.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&FI(u,g)<0;)r(u,null),u=a.getNext();u&&u.isEqual(g)&&(r(u,h),u=a.hasNext()?a.getNext():null),u?m.j(Ac(u)):m.done()})).next((()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),lp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(e).J(IDBKeyRange.bound(u,d,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let m=ar();for(const g of h){const v=this.Cr(ye.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Dd(t,v)||i.has(v.key))&&(m=m.insert(v.key,v))}return m}))}getAllFromCollectionGroup(e,t,r,i){let s=ar();const a=LI(t,r),u=LI(t,ur.max());return ta(e).ee({index:KC,range:IDBKeyRange.bound(a,u,!0)},((d,h,m)=>{const g=this.Cr(ye.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()})).next((()=>s))}newChangeBuffer(e){return new CL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return OI(e).get(sv).next((t=>(ke(!!t,20021),t)))}Dr(e,t){return OI(e).put(sv,t)}Cr(e,t){if(t){const r=cL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return Ut.newInvalidDocument(e)}}function ab(n){return new PL(n)}class CL extends ob{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ls((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new ft(((s,a)=>je(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),a.isValidDocument()){const d=wI(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=cp(d);r+=h-u.size,t.push(this.Nr.addEntry(e,s,d))}else if(r-=u.size,this.trackRemovals){const d=wI(this.Nr.serializer,a.convertToNoDocument(Ne.min()));t.push(this.Nr.addEntry(e,s,d))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function OI(n){return ln(n,hd)}function ta(n){return ln(n,ep)}function Ac(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LI(n,e){const t=e.documentKey.path.toArray();return[n,lp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=je(t[s],r[s]),i)return i;return i=je(t.length,r.length),i||(i=je(t[t.length-2],r[r.length-2]),i||je(t[t.length-1],r[r.length-1]))}class AL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lb{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Zc(r.mutation,i,qn.empty(),ht.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const i=fi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=jc();return s.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=fi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=ar();const a=Jc(),u=(function(){return Jc()})();return t.forEach(((d,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof us)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),Zc(m.mutation,h,m.mutation.getFieldMask(),ht.now())):a.set(h.key,qn.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>u.set(h,new AL(m,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Jc();let i=new _t(((a,u)=>a-u)),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||qn.empty();m=u.applyToLocalView(h,m),r.set(d,m);const g=(i.get(u.batchId)||ze()).add(d);i=i.insert(u.batchId,g)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,g=CA();m.forEach((v=>{if(!s.has(v)){const T=DA(t.get(v),r.get(v));T!==null&&g.set(v,T),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return q.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(fi());let u=nu,d=s;return a.next((h=>q.forEach(h,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?q.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,ze()))).next((m=>({batchId:u,changes:PA(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let i=jc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=jc();return this.indexManager.getCollectionParents(e,s).next((u=>q.forEach(u,(d=>{const h=(function(g,v){return new Zp(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{a=a.insert(g,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((d,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Ut.newInvalidDocument(m)))}));let u=jc();return a.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&Zc(m.mutation,h,qn.empty(),ht.now()),Dd(t,h)&&(u=u.insert(d,h))})),u}))}}class bL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:XA(i.bundledQuery),readTime:On(i.readTime)}})(t)),q.resolve()}}class xL{constructor(){this.overlays=new _t(ye.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fi();return q.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=fi(),s=t.length+1,a=new ye(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new _t(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=fi(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=fi(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return q.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Mw(t,r));let s=this.qr.get(t);s===void 0&&(s=ze(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class RL{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class jw{constructor(){this.Qr=new ft(fn.$r),this.Ur=new ft(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new fn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new fn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ye(new lt([])),r=new fn(t,e),i=new fn(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new lt([])),r=new fn(t,e),i=new fn(t,e+1);let s=ze();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new fn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class kL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ft(fn.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Nw(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Zr=this.Zr.add(new fn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?va:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fn(t,0),i=new fn(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const u=this.Xr(a.Yr);s.push(u)})),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(je);return t.forEach((i=>{const s=new fn(i,0),a=new fn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(u=>{r=r.add(u.Yr)}))})),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new fn(new ye(s),0);let u=new ft(je);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Yr)),!0)}),a),q.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(t.mutations,(i=>{const s=new fn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new fn(t,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class DL{constructor(e){this.ri=e,this.docs=(function(){return new _t(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=ar();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))})),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ar();const a=t.path,u=new ye(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||_w($C(m),r)<=0||(i.has(m.key)||Dd(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return q.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new NL(this)}getSize(e){return q.resolve(this.size)}}class NL extends ob{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class VL{constructor(e){this.persistence=e,this.si=new ls((t=>Ca(t)),kd),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new jw,this.targetCount=0,this.ai=xa.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),q.waitFor(s).next((()=>i))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}class Bw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hn(0),this.li=!1,this.li=!0,this.hi=new RL,this.referenceDelegate=e(this),this.Pi=new VL(this),this.indexManager=new vL,this.remoteDocumentCache=(function(i){return new DL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new QA(t),this.Ii=new bL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new kL(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const i=new ML(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class ML extends WC{constructor(e){super(),this.currentSequenceNumber=e}}class om{constructor(e){this.persistence=e,this.Ri=new jw,this.Vi=null}static mi(e){return new om(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(r=>{const i=ye.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class dp{constructor(e,t){this.persistence=e,this.pi=new ls((r=>xn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=sb(this,t)}static mi(e,t){return new dp(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?q.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((u=>{u||(r++,s.removeEntry(a,Ne.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,r){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class OL{constructor(e){this.serializer=e}k(e,t,r,i){const s=new qp("createOrUpgrade",t);r<1&&i>=1&&((function(d){d.createObjectStore(Rd)})(e),(function(d){d.createObjectStore(dd,{keyPath:KM}),d.createObjectStore(Nr,{keyPath:QT,autoIncrement:!0}).createIndex(ma,YT,{unique:!0}),d.createObjectStore(ru)})(e),UI(e),(function(d){d.createObjectStore(oa)})(e));let a=q.resolve();return r<3&&i>=3&&(r!==0&&((function(d){d.deleteObjectStore(su),d.deleteObjectStore(iu),d.deleteObjectStore(wa)})(e),UI(e)),a=a.next((()=>(function(d){const h=d.store(wa),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return h.put(tp,m)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(d,h){return h.store(Nr).J().next((g=>{d.deleteObjectStore(Nr),d.createObjectStore(Nr,{keyPath:QT,autoIncrement:!0}).createIndex(ma,YT,{unique:!0});const v=h.store(Nr),T=g.map((b=>v.put(b)));return q.waitFor(T)}))})(e,s)))),a=a.next((()=>{(function(d){d.createObjectStore(ou,{keyPath:rO})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(d){d.createObjectStore(hd)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(Kp,{keyPath:iO})})(e),(function(d){d.createObjectStore(Qp,{keyPath:sO})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore(Yp,{keyPath:hO});h.createIndex(av,fO,{unique:!1}),h.createIndex(JC,pO,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(ep,{keyPath:YM});h.createIndex(kf,XM),h.createIndex(KC,JM)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(oa)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(d){d.createObjectStore(Iw,{keyPath:oO,autoIncrement:!0}).createIndex(ov,aO,{unique:!1}),d.createObjectStore(Kc,{keyPath:lO}).createIndex(YC,uO,{unique:!1}),d.createObjectStore(Qc,{keyPath:cO}).createIndex(XC,dO,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(Kc).clear()})).next((()=>{t.objectStore(Qc).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(Sw,{keyPath:mO})})(e)}))),r<18&&i>=18&&IC()&&(a=a.next((()=>{t.objectStore(Kc).clear()})).next((()=>{t.objectStore(Qc).clear()}))),a}wi(e){let t=0;return e.store(oa).ee(((r,i)=>{t+=cp(i)})).next((()=>{const r={byteSize:t};return e.store(hd).put(sv,r)}))}yi(e){const t=e.store(dd),r=e.store(Nr);return t.J().next((i=>q.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,va],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ma,a).next((u=>q.forEach(u,(d=>{ke(d.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const h=ha(this.serializer,d);return tb(e,s.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(su),r=e.store(oa);return e.store(wa).get(tp).next((i=>{const s=[];return r.ee(((a,u)=>{const d=new lt(a),h=(function(g){return[0,xn(g)]})(d);s.push(t.get(h).next((m=>m?q.resolve():(g=>t.put({targetId:0,path:xn(g),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>q.waitFor(s)))}))}bi(e,t){e.createObjectStore(fd,{keyPath:nO});const r=t.store(fd),i=new Uw,s=a=>{if(i.add(a)){const u=a.lastSegment(),d=a.popLast();return r.put({collectionId:u,parent:xn(d)})}};return t.store(oa).ee({X:!0},((a,u)=>{const d=new lt(a);return s(d.popLast())})).next((()=>t.store(ru).ee({X:!0},(([a,u,d],h)=>{const m=hi(u);return s(m.popLast())}))))}Di(e){const t=e.store(iu);return t.ee(((r,i)=>{const s=$c(i),a=YA(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(oa),i=[];return r.ee(((s,a)=>{const u=t.store(ep),d=(function(g){return g.document?new ye(lt.fromString(g.document.name).popFirst(5)):g.noDocument?ye.fromSegments(g.noDocument.path):g.unknownDocument?ye.fromSegments(g.unknownDocument.path):Ie(36783)})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(h))})).next((()=>q.waitFor(i)))}Fi(e,t){const r=t.store(Nr),i=ab(this.serializer),s=new Bw(om.mi,this.serializer.yt);return r.J().next((a=>{const u=new Map;return a.forEach((d=>{let h=u.get(d.userId)??ze();ha(this.serializer,d).keys().forEach((m=>h=h.add(m))),u.set(d.userId,h)})),q.forEach(u,((d,h)=>{const m=new pn(h),g=im.wt(this.serializer,m),v=s.getIndexManager(m),T=sm.wt(m,this.serializer,v,s.referenceDelegate);return new lb(i,T,g,v).recalculateAndSaveOverlaysForDocumentKeys(new lv(t,Hn.ce),d).next()}))}))}}function UI(n){n.createObjectStore(su,{keyPath:eO}).createIndex(Tw,tO,{unique:!0}),n.createObjectStore(iu,{keyPath:"targetId"}).createIndex(QC,ZM,{unique:!0}),n.createObjectStore(wa)}const Bs="IndexedDbPersistence",fy=18e5,py=5e3,my="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",LL="main";class $w{constructor(e,t,r,i,s,a,u,d,h,m,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=u,this.xi=h,this.Oi=m,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!$w.v())throw new ge(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SL(this,i),this.$i=t+LL,this.serializer=new QA(d),this.Ui=new io(this.$i,this.Ni,new OL(this.serializer)),this.hi=new hL,this.Pi=new _L(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ab(this.serializer),this.Ii=new dL,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&Ht(Bs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,my);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Hn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(To(e))return ue(Bs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(Bs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return bc(e).get(xl).next((t=>q.resolve(this.es(t))))}ts(e){return mf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=ln(t,ou);return r.J().next((i=>{const s=this.ss(i,fy),a=i.filter((u=>s.indexOf(u)===-1));return q.forEach(a,(u=>r.delete(u.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?q.resolve(!0):bc(e).get(xl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,py)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,my);return!1}}return!(!this.networkEnabled||!this.inForeground)||mf(e).J().next((r=>this.ss(r,py).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||a&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue(Bs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Rd,ou],(e=>{const t=new lv(e,Hn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>mf(e).J().next((t=>this.ss(t,fy).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return sm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wL(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return im.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ue(Bs,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(d){return d===18?vO:d===17?nA:d===16?yO:d===15?Pw:d===14?tA:d===13?eA:d===12?gO:d===11?ZC:void Ie(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(u=>(a=new lv(u,this.ci?this.ci.next():Hn.ce),t==="readwrite-primary"?this.Hi(a).next((d=>!!d||this.Yi(a))).next((d=>{if(!d)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ge(ie.FAILED_PRECONDITION,zC);return r(a)})).next((d=>this.Xi(a).next((()=>d)))):this.Is(a).next((()=>r(a)))))).then((u=>(a.raiseOnCommittedEvent(),u)))}Is(e){return bc(e).get(xl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,py)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(ie.FAILED_PRECONDITION,my)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bc(e).put(xl,t)}static v(){return io.v()}Zi(e){const t=bc(e);return t.get(xl).next((r=>this.es(r)?(ue(Bs,"Releasing primary lease."),t.delete(xl)):q.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;TC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ue(Bs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ht(Bs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bc(n){return ln(n,Rd)}function mf(n){return ln(n,ou)}function ub(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zw(e,t.fromCache,r,i)}}class FL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return TC()?8:HC(an())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new FL;return this.Ss(e,t,a).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ll()<=qe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Ll()<=qe.DEBUG&&ue("QueryEngine","Query:",Fl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ll()<=qe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):q.resolve())}ys(e,t){if(uI(t))return q.resolve(null);let r=lr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=pv(t,null,"F"),r=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=ze(...s);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const h=this.Ds(t,u);return this.Cs(t,h,a,d.readTime)?this.ys(e,pv(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,r,i){return uI(t)||i.isEqual(Ne.min())?q.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?q.resolve(null):(Ll()<=qe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fl(t)),this.vs(e,a,t,BC(i,nu)).next((u=>u)))}))}Ds(e,t){let r=new ft(IA(e));return t.forEach(((i,s)=>{Dd(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ll()<=qe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.ps.getDocumentsMatchingQuery(e,t,ur.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const Ww="LocalStore",UL=3e8;class jL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new _t(je),this.xs=new ls((s=>Ca(s)),kd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function db(n,e,t,r){return new jL(n,e,t,r)}async function hb(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let d=ze();for(const h of i){a.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function BL(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,m){const g=h.batch,v=g.keys();let T=q.resolve();return v.forEach((b=>{T=T.next((()=>m.getEntry(d,b))).next((x=>{const P=h.docVersions.get(b);ke(P!==null,48541),x.version.compareTo(P)<0&&(g.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),m.addEntry(x)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function fb(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $L(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;u.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let T=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Yt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(g,T),(function(x,P,j){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=UL?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(v,T,m)&&u.push(t.Pi.updateTargetData(s,T))}));let d=ar(),h=ze();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(zL(s,a,e.documentUpdates).next((m=>{d=m.ks,h=m.qs}))),!r.isEqual(Ne.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return q.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(t.Ms=i,s)))}function zL(n,e,t){let r=ze(),i=ze();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=ar();return t.forEach(((u,d)=>{const h=s.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):ue(Ww,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{ks:a,qs:i}}))}function WL(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=va),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hp(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,q.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Ki(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function pu(n,e,t){const r=Ae(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!To(a))throw a;ue(Ww,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Tv(n,e,t){const r=Ae(n);let i=Ne.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,m){const g=Ae(d),v=g.xs.get(m);return v!==void 0?q.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,m)})(r,a,lr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,u.targetId).next((d=>{s=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Ne.min(),t?s:ze()))).next((u=>(gb(r,TA(e),u),{documents:u,Qs:s})))))}function pb(n,e){const t=Ae(n),r=Ae(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function mb(n,e){const t=Ae(n),r=t.Os.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,BC(r,nu),Number.MAX_SAFE_INTEGER))).then((i=>(gb(t,e,i),i)))}function gb(n,e,t){let r=n.Os.get(e)||Ne.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}const yb="firestore_clients";function jI(n,e){return`${yb}_${n}_${e}`}const vb="firestore_mutations";function BI(n,e,t){let r=`${vb}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const wb="firestore_targets";function gy(n,e){return`${wb}_${n}_${e}`}const ui="SharedClientState";class fp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ge(i.error.code,i.error.message))),a?new fp(e,t,i.state,s):(Ht(ui,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ed{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ge(r.error.code,r.error.message))),s?new ed(e,r.state,i):(Ht(ui,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=kw();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=qC(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new pp(e,s):(Ht(ui,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Hw(t.clientId,t.onlineState):(Ht(ui,`Failed to parse online state: ${e}`),null)}}class Iv{constructor(){this.activeTargetIds=kw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yy{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new _t(je),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=jI(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Iv),this.ro=new RegExp(`^${yb}_${a}_([^_]*)$`),this.io=new RegExp(`^${vb}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${wb}_${a}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(jI(this.persistenceKey,r));if(i){const s=pp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gy(this.persistenceKey,e));if(i){const s=ed.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(ui,"READ",e,t),t}setItem(e,t){ue(ui,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(ui,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(ui,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=Hn.ce;if(s!=null)try{const u=JSON.parse(s);ke(typeof u=="number",30636,{So:s}),a=u}catch(u){Ht(ui,"Failed to read sequence number from WebStorage",u)}return a})(t.newValue);r!==Hn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new fp(this.currentUser,e,t,r),s=BI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=BI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=gy(this.persistenceKey,e),s=new ed(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return pp.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return fp.Ws(new pn(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return ed.Ws(i,t)}uo(e){return Hw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(ui,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],u=[];return s.forEach((d=>{i.has(d)||a.push(d)})),i.forEach((d=>{s.has(d)||u.push(d)})),this.syncEngine.Fo(a,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=kw();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class _b{constructor(){this.Mo=new Iv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Iv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HL{Oo(e){}shutdown(){}}const $I="ConnectivityMonitor";class zI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue($I,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue($I,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function Sv(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const vy="RestConnection",qL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===np?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=Sv(),u=this.zo(e,t.toUriEncodedString());ue(vy,`Sending RPC '${e}' ${a}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,s);const{host:h}=new URL(u),m=_o(h);return this.Jo(e,u,d,r,m).then((g=>(ue(vy,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw uo(vy,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=qL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class KL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pn="WebChannelConnection";class QL extends GL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=Sv();return new Promise(((u,d)=>{const h=new kC;h.setWithCredentials(!0),h.listenOnce(DC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case bf.NO_ERROR:const g=h.getResponseJson();ue(Pn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case bf.TIMEOUT:ue(Pn,`RPC '${e}' ${a} timed out`),d(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const v=h.getStatus();if(ue(Pn,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const b=T?.error;if(b&&b.status&&b.message){const x=(function(j){const M=j.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(M)>=0?M:ie.UNKNOWN})(b.status);d(new ge(x,b.message))}else d(new ge(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ue(Pn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);ue(Pn,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=Sv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=MC(),u=VC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=s.join("");ue(Pn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=a.createWebChannel(m,d);this.I_(g);let v=!1,T=!1;const b=new KL({Yo:P=>{T?ue(Pn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(ue(Pn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),ue(Pn,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},Zo:()=>g.close()}),x=(P,j,M)=>{P.listen(j,(D=>{try{M(D)}catch(B){setTimeout((()=>{throw B}),0)}}))};return x(g,Uc.EventType.OPEN,(()=>{T||(ue(Pn,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(g,Uc.EventType.CLOSE,(()=>{T||(T=!0,ue(Pn,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(g))})),x(g,Uc.EventType.ERROR,(P=>{T||(T=!0,uo(Pn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),b.a_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))})),x(g,Uc.EventType.MESSAGE,(P=>{if(!T){const j=P.data[0];ke(!!j,16349);const M=j,D=M?.error||M[0]?.error;if(D){ue(Pn,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let X=(function(I){const C=Zt[I];if(C!==void 0)return MA(C)})(B),re=D.message;X===void 0&&(X=ie.INTERNAL,re="Unknown error status: "+B+" with message "+D.message),T=!0,b.a_(new ge(X,re)),g.close()}else ue(Pn,`RPC '${e}' stream ${i} received:`,j),b.u_(j)}})),x(u,NC.STAT_EVENT,(P=>{P.stat===nv.PROXY?ue(Pn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===nv.NOPROXY&&ue(Pn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Eb(){return typeof window<"u"?window:null}function Ff(){return typeof document<"u"?document:null}function am(n){return new eL(n,!0)}class Tb{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const WI="PersistentStream";class Ib{constructor(e,t,r,i,s,a,u,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(WI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(WI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YL extends Ib{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rL(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ne.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ne.min():a.readTime?On(a.readTime):Ne.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=yv(this.serializer),t.addTarget=(function(s,a){let u;const d=a.target;if(u=ip(d)?{documents:zA(s,d)}:{query:WA(s,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=FA(s,a.resumeToken);const h=mv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ne.min())>0){u.readTime=fu(s,a.snapshotVersion.toTimestamp());const h=mv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=sL(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=yv(this.serializer),t.removeTarget=e,this.q_(t)}}class XL extends Ib{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iL(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=yv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ap(this.serializer,r)))};this.q_(t)}}class JL{}class ZL extends JL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,gv(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(ie.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,gv(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ie.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class e2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ht(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ra="RemoteStore";class t2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Fa(this)&&(ue(Ra,"Restarting streams for network reachability change."),await(async function(d){const h=Ae(d);h.Ea.add(4),await Od(h),h.Ra.set("Unknown"),h.Ea.delete(4),await lm(h)})(this))}))})),this.Ra=new e2(r,i)}}async function lm(n){if(Fa(n))for(const e of n.da)await e(!0)}async function Od(n){for(const e of n.da)await e(!1)}function um(n,e){const t=Ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kw(t)?Gw(t):xu(t).O_()&&qw(t,e))}function mu(n,e){const t=Ae(n),r=xu(t);t.Ia.delete(e),r.O_()&&Sb(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fa(t)&&t.Ra.set("Unknown"))}function qw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xu(n).Y_(e)}function Sb(n,e){n.Va.Ue(e),xu(n).Z_(e)}function Gw(n){n.Va=new YO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xu(n).start(),n.Ra.ua()}function Kw(n){return Fa(n)&&!xu(n).x_()&&n.Ia.size>0}function Fa(n){return Ae(n).Ea.size===0}function Pb(n){n.Va=void 0}async function n2(n){n.Ra.set("Online")}async function r2(n){n.Ia.forEach(((e,t)=>{qw(n,e)}))}async function i2(n,e){Pb(n),Kw(n)?(n.Ra.ha(e),Gw(n)):n.Ra.set("Unknown")}async function s2(n,e,t){if(n.Ra.set("Online"),e instanceof LA&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){ue(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mp(n,r)}else if(e instanceof Of?n.Va.Ze(e):e instanceof OA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const r=await fb(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.Va.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const m=s.Ia.get(d);if(!m)return;s.Ia.set(d,m.withResumeToken(Yt.EMPTY_BYTE_STRING,m.snapshotVersion)),Sb(s,d);const g=new Ki(m.target,d,h,m.sequenceNumber);qw(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ue(Ra,"Failed to raise snapshot:",r),await mp(n,r)}}async function mp(n,e,t){if(!To(e))throw e;n.Ea.add(1),await Od(n),n.Ra.set("Offline"),t||(t=()=>fb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Ra,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await lm(n)}))}function Cb(n,e){return e().catch((t=>mp(n,t,e)))}async function bu(n){const e=Ae(n),t=fo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:va;for(;o2(e);)try{const i=await WL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,a2(e,i)}catch(i){await mp(e,i)}Ab(e)&&bb(e)}function o2(n){return Fa(n)&&n.Ta.length<10}function a2(n,e){n.Ta.push(e);const t=fo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ab(n){return Fa(n)&&!fo(n).x_()&&n.Ta.length>0}function bb(n){fo(n).start()}async function l2(n){fo(n).ra()}async function u2(n){const e=fo(n);for(const t of n.Ta)e.ea(t.mutations)}async function c2(n,e,t){const r=n.Ta.shift(),i=Vw.from(r,e,t);await Cb(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await bu(n)}async function d2(n,e){e&&fo(n).X_&&await(async function(r,i){if((function(a){return GO(a)&&a!==ie.ABORTED})(i.code)){const s=r.Ta.shift();fo(r).B_(),await Cb(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await bu(r)}})(n,e),Ab(n)&&bb(n)}async function HI(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ue(Ra,"RemoteStore received new credentials");const r=Fa(t);t.Ea.add(3),await Od(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lm(t)}async function Pv(n,e){const t=Ae(n);e?(t.Ea.delete(2),await lm(t)):e||(t.Ea.add(2),await Od(t),t.Ra.set("Unknown"))}function xu(n){return n.ma||(n.ma=(function(t,r,i){const s=Ae(t);return s.sa(),new YL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:n2.bind(null,n),t_:r2.bind(null,n),r_:i2.bind(null,n),H_:s2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Kw(n)?Gw(n):n.Ra.set("Unknown")):(await n.ma.stop(),Pb(n))}))),n.ma}function fo(n){return n.fa||(n.fa=(function(t,r,i){const s=Ae(t);return s.sa(),new XL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:l2.bind(null,n),r_:d2.bind(null,n),ta:u2.bind(null,n),na:c2.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await bu(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(Ra,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Qw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new Qw(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cm(n,e){if(Ht("AsyncQueue",`${e}: ${n}`),To(n))return new ge(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Kl{static emptySet(e){return new Kl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=jc(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Kl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class qI{constructor(){this.ga=new _t(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class gu{constructor(e,t,r,i,s,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new gu(e,t,Kl.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class h2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f2{constructor(){this.queries=GI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ae(t),s=i.queries;i.queries=GI(),s.forEach(((a,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function GI(){return new ls((n=>EA(n)),tm)}async function xb(n,e){const t=Ae(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new h2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=cm(a,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Yw(t)}async function Rb(n,e){const t=Ae(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function p2(n,e){const t=Ae(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Sa)u.Fa(i)&&(r=!0);a.wa=i}}r&&Yw(t)}function m2(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Yw(n){n.Ca.forEach((e=>{e.next()}))}var Cv,KI;(KI=Cv||(Cv={})).Ma="default",KI.Cache="cache";class kb{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cv.Cache}}class Db{constructor(e){this.key=e}}class Nb{constructor(e){this.key=e}}class g2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=IA(e),this.tu=new Kl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new qI,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),T=Dd(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),x=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;v&&T?v.data.isEqual(T.data)?b!==x&&(r.track({type:3,doc:T}),P=!0):this.su(v,T)||(r.track({type:2,doc:T}),P=!0,(d&&this.eu(T,d)>0||h&&this.eu(T,h)<0)&&(u=!0)):!v&&T?(r.track({type:0,doc:T}),P=!0):v&&!T&&(r.track({type:1,doc:v}),P=!0,(d||h)&&(u=!0)),P&&(T?(a=a.add(T),s=x?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,g)=>(function(T,b){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:P})}};return x(T)-x(b)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,h=d!==this.Za;return this.Za=d,a.length!==0||h?{snapshot:new gu(this.query,e.tu,s,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Nb(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Db(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ru="SyncEngine";class y2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class v2{constructor(e){this.key=e,this.hu=!1}}class w2{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ls((u=>EA(u)),tm),this.Iu=new Map,this.Eu=new Set,this.du=new _t(ye.comparator),this.Au=new Map,this.Ru=new jw,this.Vu={},this.mu=new Map,this.fu=xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _2(n,e,t=!0){const r=dm(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Vb(r,e,t,!0),i}async function E2(n,e){const t=dm(n);await Vb(t,e,!0,!1)}async function Vb(n,e,t,r){const i=await hp(n.localStore,lr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await Xw(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&um(n.remoteStore,i),u}async function Xw(n,e,t,r,i){n.pu=(g,v,T)=>(async function(x,P,j,M){let D=P.view.ru(j);D.Cs&&(D=await Tv(x.localStore,P.query,!1).then((({documents:A})=>P.view.ru(A,D))));const B=M&&M.targetChanges.get(P.targetId),X=M&&M.targetMismatches.get(P.targetId)!=null,re=P.view.applyChanges(D,x.isPrimaryClient,B,X);return Av(x,P.targetId,re.au),re.snapshot})(n,g,v,T);const s=await Tv(n.localStore,e,!0),a=new g2(e,s.Qs),u=a.ru(s.documents),d=Md.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,d);Av(n,t,h.au);const m=new y2(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function T2(n,e,t){const r=Ae(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!tm(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&mu(r.remoteStore,i.targetId),yu(r,i.targetId)})).catch(Eo)):(yu(r,i.targetId),await pu(r.localStore,i.targetId,!0))}async function I2(n,e){const t=Ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mu(t.remoteStore,r.targetId))}async function S2(n,e,t){const r=t_(n);try{const i=await(function(a,u){const d=Ae(a),h=ht.now(),m=u.reduce(((T,b)=>T.add(b.key)),ze());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let b=ar(),x=ze();return d.Ns.getEntries(T,m).next((P=>{b=P,b.forEach(((j,M)=>{M.isValidDocument()||(x=x.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,b))).next((P=>{g=P;const j=[];for(const M of u){const D=HO(M,g.get(M.key).overlayedDocument);D!=null&&j.push(new us(M.key,D,hA(D.value.mapValue),on.exists(!0)))}return d.mutationQueue.addMutationBatch(T,h,j,u)})).next((P=>{v=P;const j=P.applyToLocalDocumentSet(g,x);return d.documentOverlayCache.saveOverlays(T,P.batchId,j)}))})).then((()=>({batchId:v.batchId,changes:PA(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let h=a.Vu[a.currentUser.toKey()];h||(h=new _t(je)),h=h.insert(u,d),a.Vu[a.currentUser.toKey()]=h})(r,i.batchId,t),await So(r,i.changes),await bu(r.remoteStore)}catch(i){const s=cm(i,"Failed to persist write");t.reject(s)}}async function Mb(n,e){const t=Ae(n);try{const r=await $L(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ke(a.hu,14607):i.removedDocuments.size>0&&(ke(a.hu,42227),a.hu=!1))})),await So(t,r,e)}catch(r){await Eo(r)}}function QI(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const d=Ae(a);d.onlineState=u;let h=!1;d.queries.forEach(((m,g)=>{for(const v of g.Sa)v.va(u)&&(h=!0)})),h&&Yw(d)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P2(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new _t(ye.comparator);a=a.insert(s,Ut.newNoDocument(s,Ne.min()));const u=ze().add(s),d=new Vd(Ne.min(),new Map,new _t(je),a,u);await Mb(r,d),r.du=r.du.remove(s),r.Au.delete(e),e_(r)}else await pu(r.localStore,e,!1).then((()=>yu(r,e,t))).catch(Eo)}async function C2(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=await BL(t.localStore,e);Zw(t,r,null),Jw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await So(t,i)}catch(i){await Eo(i)}}async function A2(n,e,t){const r=Ae(n);try{const i=await(function(a,u){const d=Ae(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(ke(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);Zw(r,e,t),Jw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await So(r,i)}catch(i){await Eo(i)}}function Jw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Zw(n,e,t){const r=Ae(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function yu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Ob(n,r)}))}function Ob(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(mu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),e_(n))}function Av(n,e,t){for(const r of t)r instanceof Db?(n.Ru.addReference(r.key,e),b2(n,r)):r instanceof Nb?(ue(Ru,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Ob(n,r.key)):Ie(19791,{wu:r})}function b2(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ue(Ru,"New document in limbo: "+t),n.Eu.add(r),e_(n))}function e_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(lt.fromString(e)),r=n.fu.next();n.Au.set(r,new v2(t)),n.du=n.du.insert(t,r),um(n.remoteStore,new Ki(lr(em(t.path)),r,"TargetPurposeLimboResolution",Hn.ce))}}async function So(n,e,t){const r=Ae(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{a.push(r.pu(d,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=zw.As(d.targetId,h);s.push(m)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(d,h){const m=Ae(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>q.forEach(h,(v=>q.forEach(v.Es,(T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T))).next((()=>q.forEach(v.ds,(T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))))))}catch(g){if(!To(g))throw g;ue(Ww,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),b=T.snapshotVersion,x=T.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(v,x)}}})(r.localStore,s))}async function x2(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ue(Ru,"User change. New user:",e.toKey());const r=await hb(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((d=>{d.reject(new ge(ie.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await So(t,r.Ls)}}function R2(n,e){const t=Ae(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}async function k2(n,e){const t=Ae(n),r=await Tv(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Av(t,e.targetId,i.au),i}async function D2(n,e){const t=Ae(n);return mb(t.localStore,e).then((r=>So(t,r)))}async function N2(n,e,t,r){const i=Ae(n),s=await(function(u,d){const h=Ae(u),m=Ae(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>m.er(g,d).next((v=>v?h.localDocuments.getDocuments(g,v):q.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await bu(i.remoteStore):t==="acknowledged"||t==="rejected"?(Zw(i,e,r||null),Jw(i,e),(function(u,d){Ae(Ae(u).mutationQueue).ir(d)})(i.localStore,e)):Ie(6720,"Unknown batchState",{Su:t}),await So(i,s)):ue(Ru,"Cannot apply mutation batch with id: "+e)}async function V2(n,e){const t=Ae(n);if(dm(t),t_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await YI(t,r.toArray());t.gu=!0,await Pv(t.remoteStore,!0);for(const s of i)um(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(yu(t,a),pu(t.localStore,a,!0)))),mu(t.remoteStore,a)})),await i,await YI(t,r),(function(a){const u=Ae(a);u.Au.forEach(((d,h)=>{mu(u.remoteStore,h)})),u.Ru.Jr(),u.Au=new Map,u.du=new _t(ye.comparator)})(t),t.gu=!1,await Pv(t.remoteStore,!1)}}async function YI(n,e,t){const r=Ae(n),i=[],s=[];for(const a of e){let u;const d=r.Iu.get(a);if(d&&d.length!==0){u=await hp(r.localStore,lr(d[0]));for(const h of d){const m=r.Tu.get(h),g=await k2(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await pb(r.localStore,a);u=await hp(r.localStore,h),await Xw(r,Lb(h),a,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(s),i}function Lb(n){return _A(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function M2(n){return(function(t){return Ae(Ae(t).persistence).Ts()})(Ae(n).localStore)}async function O2(n,e,t,r){const i=Ae(n);if(i.gu)return void ue(Ru,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await mb(i.localStore,TA(s[0])),u=Vd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Yt.EMPTY_BYTE_STRING);await So(i,a,u);break}case"rejected":await pu(i.localStore,e,!0),yu(i,e,r);break;default:Ie(64155,t)}}async function L2(n,e,t){const r=dm(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ue(Ru,"Adding an already active target "+i);continue}const s=await pb(r.localStore,i),a=await hp(r.localStore,s);await Xw(r,Lb(s),a.targetId,!1,a.resumeToken),um(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await pu(r.localStore,i,!1).then((()=>{mu(r.remoteStore,i),yu(r,i)})).catch(Eo)}}function dm(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P2.bind(null,e),e.Pu.H_=p2.bind(null,e.eventManager),e.Pu.yu=m2.bind(null,e.eventManager),e}function t_(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A2.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=am(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return db(this.persistence,new cb,e.initialUser,this.serializer)}Cu(e){return new Bw(om.mi,this.serializer)}Du(e){return new _b}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class F2 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof dp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ib(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new Bw((r=>dp.mi(r,t)),this.serializer)}}class Fb extends wd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await t_(this.xu.syncEngine),await bu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return db(this.persistence,new cb,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new ib(r,e.asyncQueue,t)}Mu(e,t){const r=new qM(t,this.persistence);return new HM(e.asyncQueue,r)}Cu(e){const t=ub(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new $w(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Eb(),Ff(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new _b}}class U2 extends Fb{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof yy&&(this.sharedClientState.syncEngine={Co:N2.bind(null,t),vo:O2.bind(null,t),Fo:L2.bind(null,t),Ts:M2.bind(null,t),Do:D2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await V2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=Eb();if(!yy.v(t))throw new ge(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ub(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _d{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x2.bind(null,this.syncEngine),await Pv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f2})()}createDatastore(e){const t=am(e.databaseInfo.databaseId),r=(function(s){return new QL(s)})(e.databaseInfo);return(function(s,a,u,d){return new ZL(s,a,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new t2(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>QI(this.syncEngine,t,0)),(function(){return zI.v()?new zI:new HL})())}createSyncEngine(e,t){return(function(i,s,a,u,d,h,m){const g=new w2(i,s,a,u,d,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ae(t);ue(Ra,"RemoteStore shutting down."),r.Ea.add(5),await Od(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_d.provider={build:()=>new _d};class Ub{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const po="FirestoreClient";class j2{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=vw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ue(po,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ue(po,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=cm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function wy(n,e){n.asyncQueue.verifyOperationInProgress(),ue(po,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await hb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function XI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await jb(n);ue(po,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>HI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>HI(e.remoteStore,i))),n._onlineComponents=e}async function jb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(po,"Using user provided OfflineComponentProvider");try{await wy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;uo("Error using user provided cache. Falling back to memory cache: "+t),await wy(n,new wd)}}else ue(po,"Using default OfflineComponentProvider"),await wy(n,new F2(void 0));return n._offlineComponents}async function Bb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(po,"Using user provided OnlineComponentProvider"),await XI(n,n._uninitializedComponentsProvider._online)):(ue(po,"Using default OnlineComponentProvider"),await XI(n,new _d))),n._onlineComponents}function B2(n){return jb(n).then((e=>e.localStore))}function $2(n){return Bb(n).then((e=>e.syncEngine))}async function $b(n){const e=await Bb(n),t=e.eventManager;return t.onListen=_2.bind(null,e.syncEngine),t.onUnlisten=T2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=I2.bind(null,e.syncEngine),t}function z2(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const u=await(function(h,m){const g=Ae(h);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,m)))})(i,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ge(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=cm(u,`Failed to get document '${s} from cache`);a.reject(d)}})(await B2(n),e,t))),t.promise}function W2(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new Ub({next:v=>{m.Nu(),a.enqueueAndForget((()=>Rb(s,g)));const T=v.docs.has(u);!T&&v.fromCache?h.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&d&&d.source==="server"?h.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new kb(em(u.path),m,{includeMetadataChanges:!0,qa:!0});return xb(s,g)})(await $b(n),n.asyncQueue,e,t,r))),r.promise}function H2(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new Ub({next:v=>{m.Nu(),a.enqueueAndForget((()=>Rb(s,g))),v.fromCache&&d.source==="server"?h.reject(new ge(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new kb(u,m,{includeMetadataChanges:!0,qa:!0});return xb(s,g)})(await $b(n),n.asyncQueue,e,t,r))),r.promise}function zb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const JI=new Map;const Wb="firestore.googleapis.com",ZI=!0;class eS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wb,this.ssl=ZI}else this.host=e.host,this.ssl=e.ssl??ZI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EL)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new DM;switch(r.type){case"firstParty":return new OM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=JI.get(t);r&&(ue("ComponentProvider","Removing Datastore"),JI.delete(t),r.terminate())})(this),Promise.resolve()}}function q2(n,e,t,r={}){n=Ln(n,hm);const i=_o(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(hw(`https://${u}`),fw("Firestore",!0)),s.host!==Wb&&s.host!==u&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...s,host:u,ssl:i,emulatorOptions:r};if(!Ta(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=pn.MOCK_USER;else{h=oV(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pn(g)}n._authCredentials=new NM(new LC(h,m))}}class fm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fm(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xd(t,Gt._jsonSchema))return new Gt(e,r||null,new ye(lt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:nn("string",Gt._jsonSchemaVersion),referencePath:nn("string")};class so extends fm{constructor(e,t,r){super(e,t,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ye(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function et(n,e,...t){if(n=mt(n),UC("collection","path",e),n instanceof hm){const r=lt.fromString(e,...t);return WT(r),new so(n,null,r)}{if(!(n instanceof Gt||n instanceof so))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return WT(r),new so(n.firestore,null,r)}}function xt(n,e,...t){if(n=mt(n),arguments.length===1&&(e=vw.newId()),UC("doc","path",e),n instanceof hm){const r=lt.fromString(e,...t);return zT(r),new Gt(n,null,new ye(r))}{if(!(n instanceof Gt||n instanceof so))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return zT(r),new Gt(n.firestore,n instanceof so?n.converter:null,new ye(r))}}const tS="AsyncQueue";class nS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tb(this,"async_queue_retry"),this._c=()=>{const r=Ff();r&&ue(tS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!To(e))throw e;ue(tS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ht("INTERNAL UNHANDLED ERROR: ",rS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Qw.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:rS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Si extends hm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nS,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nS(e),this._firestoreClient=void 0,await e}}}function G2(n,e){const t=typeof n=="object"?n:gw(),r=typeof n=="string"?n:np,i=Hp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=vC("firestore");s&&q2(i,...s)}return i}function Ld(n){if(n._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Hb(n),n._firestoreClient}function Hb(n){const e=n._freezeSettings(),t=(function(i,s,a,u){return new _O(i,s,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,zb(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new j2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function K2(n,e){uo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return qb(n,_d.provider,{build:r=>new Fb(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function Q2(n){uo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();qb(n,_d.provider,{build:t=>new U2(t,e.cacheSizeBytes)})}function qb(n,e,t){if((n=Ln(n,Si))._firestoreClient||n._terminated)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ge(ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Hb(n)}class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(Yt.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Er(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xd(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:nn("string",Er._jsonSchemaVersion),bytes:nn("string")};class Fd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class n_{constructor(e){this._methodName=e}}class mi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(e){if(xd(e,mi._jsonSchema))return new mi(e.latitude,e.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:nn("string",mi._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};class gi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xd(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gi(e.vectorValues);throw new ge(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:nn("string",gi._jsonSchemaVersion),vectorValues:nn("object")};const Y2=/^__.*__$/;class X2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}class Gb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class r_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new r_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kb(this.Ac)&&Y2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||am(e)}Cc(e,t,r,i=!1){return new r_({Ac:e,methodName:t,Dc:r,path:Dt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pm(n){const e=n._freezeSettings(),t=am(n._databaseId);return new J2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function i_(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);s_("Data must be an object, but it was:",a,r);const u=Xb(r,a);let d,h;if(s.merge)d=new qn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const v=bv(e,g,t);if(!a.contains(v))throw new ge(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Zb(m,v)||m.push(v)}d=new qn(m),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new X2(new bn(u),d,h)}class Ud extends n_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ud}}function Qb(n,e,t,r){const i=n.Cc(1,e,t);s_("Data must be an object, but it was:",i,r);const s=[],a=bn.empty();Io(r,((d,h)=>{const m=o_(e,d,t);h=mt(h);const g=i.yc(m);if(h instanceof Ud)s.push(m);else{const v=mm(h,g);v!=null&&(s.push(m),a.set(m,v))}}));const u=new qn(s);return new Gb(a,u,i.fieldTransforms)}function Yb(n,e,t,r,i,s){const a=n.Cc(1,e,t),u=[bv(e,r,t)],d=[i];if(s.length%2!=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(bv(e,s[v])),d.push(s[v+1]);const h=[],m=bn.empty();for(let v=u.length-1;v>=0;--v)if(!Zb(h,u[v])){const T=u[v];let b=d[v];b=mt(b);const x=a.yc(T);if(b instanceof Ud)h.push(T);else{const P=mm(b,x);P!=null&&(h.push(T),m.set(T,P))}}const g=new qn(h);return new Gb(m,g,a.fieldTransforms)}function mm(n,e){if(Jb(n=mt(n)))return s_("Unsupported field value:",e,n),Xb(n,e);if(n instanceof n_)return(function(r,i){if(!Kb(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let d=mm(u,i.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ht.fromDate(r);return{timestampValue:fu(i.serializer,s)}}if(r instanceof ht){const s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fu(i.serializer,s)}}if(r instanceof mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Er)return{bytesValue:FA(i.serializer,r._byteString)};if(r instanceof Gt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return(function(a,u){return{mapValue:{fields:{[Aw]:{stringValue:bw},[au]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Dw(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${ww(r)}`)})(n,e)}function Xb(n,e){const t={};return rA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(n,((r,i)=>{const s=mm(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Jb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof mi||n instanceof Er||n instanceof Gt||n instanceof n_||n instanceof gi)}function s_(n,e,t){if(!Jb(t)||!jC(t)){const r=ww(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function bv(n,e,t){if((e=mt(e))instanceof Fd)return e._internalPath;if(typeof e=="string")return o_(n,e);throw gp("Field path arguments must be of type string or ",n,!1,void 0,t)}const Z2=new RegExp("[~\\*/\\[\\]]");function o_(n,e,t){if(e.search(Z2)>=0)throw gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fd(...e.split("."))._internalPath}catch{throw gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ge(ie.INVALID_ARGUMENT,u+n+d)}function Zb(n,e){return n.some((t=>t.isEqual(e)))}class ex{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eF extends ex{data(){return super.data()}}function tx(n,e){return typeof e=="string"?o_(n,e):e instanceof Fd?e._internalPath:e._delegate._internalPath}function tF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nF{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Io(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[au].arrayValue?.values?.map((r=>bt(r.doubleValue)));return new gi(t)}convertGeoPoint(e){return new mi(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){const t=ts(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);ke(KA(r),9688,{name:e});const i=new Pa(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||Ht(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function a_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oo extends ex{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",oo._jsonSchema={type:nn("string",oo._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class Uf extends oo{data(e={}){return super.data(e)}}class Ql{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $l(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Uf(this._firestore,this._userDataWriter,r.key,r,new $l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const d=new Uf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new $l(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const d=new Uf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new $l(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:rF(u.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ql._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function gm(n){n=Ln(n,Gt);const e=Ln(n.firestore,Si);return W2(Ld(e),n._key).then((t=>sF(e,n,t)))}Ql._jsonSchemaVersion="firestore/querySnapshot/1.0",Ql._jsonSchema={type:nn("string",Ql._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};class l_ extends nF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function iF(n){n=Ln(n,Gt);const e=Ln(n.firestore,Si),t=Ld(e),r=new l_(e);return z2(t,n._key).then((i=>new oo(e,r,n._key,i,new $l(i!==null&&i.hasLocalMutations,!0),n.converter)))}function wt(n){n=Ln(n,fm);const e=Ln(n.firestore,Si),t=Ld(e),r=new l_(e);return tF(n._query),H2(t,n._query).then((i=>new Ql(e,r,n,i)))}function nx(n,e,t){n=Ln(n,Gt);const r=Ln(n.firestore,Si),i=a_(n.converter,e,t);return jd(r,[i_(pm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,on.none())])}function ka(n,e,t,...r){n=Ln(n,Gt);const i=Ln(n.firestore,Si),s=pm(i);let a;return a=typeof(e=mt(e))=="string"||e instanceof Fd?Yb(s,"updateDoc",n._key,e,t,r):Qb(s,"updateDoc",n._key,e),jd(i,[a.toMutation(n._key,on.exists(!0))])}function yp(n){return jd(Ln(n.firestore,Si),[new Nd(n._key,on.none())])}function zc(n,e){const t=Ln(n.firestore,Si),r=xt(n),i=a_(n.converter,e);return jd(t,[i_(pm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function jd(n,e){return(function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget((async()=>S2(await $2(r),i,s))),s.promise})(Ld(n),e)}function sF(n,e,t){const r=t.docs.get(e._key),i=new l_(n);return new oo(n,i,e._key,r,new $l(t.hasPendingWrites,t.fromCache),e.converter)}class oF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pm(e)}set(e,t,r){this._verifyNotCommitted();const i=_y(e,this._firestore),s=a_(i.converter,t,r),a=i_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,on.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=_y(e,this._firestore);let a;return a=typeof(t=mt(t))=="string"||t instanceof Fd?Yb(this._dataReader,"WriteBatch.update",s._key,t,r,i):Qb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_y(e,this._firestore);return this._mutations=this._mutations.concat(new Nd(t._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _y(n,e){if((n=mt(n)).firestore!==e)throw new ge(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function aF(){return new Ud("deleteField")}function mo(n){return Ld(n=Ln(n,Si)),new oF(n,(e=>jd(n,e)))}(function(e,t=!0){(function(i){Cu=i})(Pu),Ia(new lo("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new Si(new VM(r.getProvider("auth-internal")),new LM(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(h.options.projectId,m)})(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),pi(UT,jT,e),pi(UT,jT,"esm2020")})();function rx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lF=rx,ix=new Ad("auth","Firebase",rx());const vp=new pw("@firebase/auth");function uF(n,...e){vp.logLevel<=qe.WARN&&vp.warn(`Auth (${Pu}): ${n}`,...e)}function jf(n,...e){vp.logLevel<=qe.ERROR&&vp.error(`Auth (${Pu}): ${n}`,...e)}function Or(n,...e){throw u_(n,...e)}function yi(n,...e){return u_(n,...e)}function sx(n,e,t){const r={...lF(),[e]:t};return new Ad("auth","Firebase",r).create(e,{appName:n.name})}function vi(n){return sx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ix.create(n,...e)}function Ve(n,e,...t){if(!n)throw u_(e,...t)}function Qi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jf(e),new Error(e)}function rs(n,e){n||Qi(e)}function xv(){return typeof self<"u"&&self.location?.href||""}function cF(){return iS()==="http:"||iS()==="https:"}function iS(){return typeof self<"u"&&self.location?.protocol||null}function dF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cF()||dV()||"connection"in navigator)?navigator.onLine:!0}function hF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Bd{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=uV()||hV()}get(){return dF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function c_(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ox{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const pF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mF=new Bd(3e4,6e4);function cs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Lr(n,e,t,r,i={}){return ax(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=bd({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...s};return cV()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&_o(n.emulatorConfig.host)&&(h.credentials="include"),ox.fetch()(await lx(n,n.config.apiHost,t,u),h)})}async function ax(n,e,t){n._canInitEmulator=!1;const r={...fF,...e};try{const i=new yF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw yf(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw yf(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw yf(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw yf(n,"user-disabled",a);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw sx(n,m,h);Or(n,m)}}catch(i){if(i instanceof Ii)throw i;Or(n,"network-request-failed",{message:String(i)})}}async function $d(n,e,t,r,i={}){const s=await Lr(n,e,t,r,i);return"mfaPendingCredential"in s&&Or(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function lx(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?c_(n.config,i):`${n.config.apiScheme}://${i}`;return pF.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function gF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),mF.get())})}}function yf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=yi(n,e,r);return i.customData._tokenResponse=t,i}function sS(n){return n!==void 0&&n.enterprise!==void 0}class vF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wF(n,e){return Lr(n,"GET","/v2/recaptchaConfig",cs(n,e))}async function _F(n,e){return Lr(n,"POST","/v1/accounts:delete",e)}async function wp(n,e){return Lr(n,"POST","/v1/accounts:lookup",e)}function td(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EF(n,e=!1){const t=mt(n),r=await t.getIdToken(e),i=d_(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:td(Ey(i.auth_time)),issuedAtTime:td(Ey(i.iat)),expirationTime:td(Ey(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Ey(n){return Number(n)*1e3}function d_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const i=mC(t);return i?JSON.parse(i):(jf("Failed to decode base64 JWT payload"),null)}catch(i){return jf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function oS(n){const e=d_(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Da(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ii&&TF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function TF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class IF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Rv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _p(n){const e=n.auth,t=await n.getIdToken(),r=await Da(n,wp(e,{idToken:t}));Ve(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?ux(i.providerUserInfo):[],a=PF(n.providerData,s),u=n.isAnonymous,d=!(n.email&&i.passwordHash)&&!a?.length,h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Rv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function SF(n){const e=mt(n);await _p(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ux(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function CF(n,e){const t=await ax(n,{},async()=>{const r=bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await lx(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&_o(n.emulatorConfig.host)&&(d.credentials="include"),ox.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AF(n,e){return Lr(n,"POST","/v2/accounts:revokeToken",cs(n,e))}class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=oS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await CF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Yl;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return Qi("not implemented")}}function $s(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new IF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Rv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Da(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EF(this,e)}reload(){return SF(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _p(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Da(this,_F(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:b,stsTokenManager:x}=t;Ve(g&&x,e,"internal-error");const P=Yl.fromJSON(this.name,x);Ve(typeof g=="string",e,"internal-error"),$s(r,e.name),$s(i,e.name),Ve(typeof v=="boolean",e,"internal-error"),Ve(typeof T=="boolean",e,"internal-error"),$s(s,e.name),$s(a,e.name),$s(u,e.name),$s(d,e.name),$s(h,e.name),$s(m,e.name);const j=new Vr({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:T,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:P,createdAt:h,lastLoginAt:m});return b&&Array.isArray(b)&&(j.providerData=b.map(M=>({...M}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Yl;i.updateFromServerResponse(t);const s=new Vr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _p(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ux(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Yl;u.updateFromIdToken(r);const d=new Vr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Rv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,h),d}}const aS=new Map;function Yi(n){rs(n instanceof Function,"Expected a class definition");let e=aS.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aS.set(n,e),e)}class cx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cx.type="NONE";const lS=cx;function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class Xl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Bf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wp(this.auth,{idToken:e}).catch(()=>{});return t?Vr._fromGetAccountInfoResponse(this.auth,t,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xl(Yi(lS),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Yi(lS);const a=Bf(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const v=await wp(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Vr._fromGetAccountInfoResponse(e,v,m)}else g=Vr._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Xl(s,e,r):(s=d[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Xl(s,e,r))}}function uS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(px(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gx(e))return"Blackberry";if(yx(e))return"Webos";if(hx(e))return"Safari";if((e.includes("chrome/")||fx(e))&&!e.includes("edge/"))return"Chrome";if(mx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function dx(n=an()){return/firefox\//i.test(n)}function hx(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fx(n=an()){return/crios\//i.test(n)}function px(n=an()){return/iemobile/i.test(n)}function mx(n=an()){return/android/i.test(n)}function gx(n=an()){return/blackberry/i.test(n)}function yx(n=an()){return/webos/i.test(n)}function h_(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bF(n=an()){return h_(n)&&!!window.navigator?.standalone}function xF(){return fV()&&document.documentMode===10}function vx(n=an()){return h_(n)||mx(n)||yx(n)||gx(n)||/windows phone/i.test(n)||px(n)}function wx(n,e=[]){let t;switch(n){case"Browser":t=uS(an());break;case"Worker":t=`${uS(an())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pu}/${r}`}class RF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const d=e(s);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function kF(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",cs(n,e))}const DF=6;class NF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class VF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cS(this),this.idTokenSubscription=new cS(this),this.beforeStateQueue=new RF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ix,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wp(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _p(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(vi(this));const t=e?mt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kF(this),t=new NF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ad("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await AF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yi(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[Yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uF(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Po(n){return mt(n)}class cS{constructor(e){this.auth=e,this.observer=null,this.addObserver=wV(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MF(n){ym=n}function _x(n){return ym.loadJS(n)}function OF(){return ym.recaptchaEnterpriseScript}function LF(){return ym.gapiScript}function FF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class UF{constructor(){this.enterprise=new jF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BF="recaptcha-enterprise",Ex="NO_RECAPTCHA";class $F{constructor(e){this.type=BF,this.auth=Po(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{wF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new vF(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,a,u){const d=window.grecaptcha;sS(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(Ex)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&sS(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=OF();d.length!==0&&(d+=u),_x(d).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function dS(n,e,t,r=!1,i=!1){const s=new $F(n);let a;if(i)a=Ex;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ep(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await dS(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await dS(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function zF(n,e){const t=Hp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ta(s,e??{}))return i;Or(i,"already-initialized")}return t.initialize({options:e})}function WF(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function HF(n,e,t){const r=Po(n);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Tx(e),{host:a,port:u}=qF(e),d=u===null?"":`:${u}`,h={url:`${s}//${a}${d}/`},m=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Ta(h,r.config.emulator)&&Ta(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,_o(a)?(hw(`${s}//${a}${d}`),fw("Auth",!0)):GF()}function Tx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qF(n){const e=Tx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hS(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:hS(a)}}}function hS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function GF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class f_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,t){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function KF(n,e){return Lr(n,"POST","/v1/accounts:update",e)}async function QF(n,e){return Lr(n,"POST","/v1/accounts:signUp",e)}async function YF(n,e){return $d(n,"POST","/v1/accounts:signInWithPassword",cs(n,e))}async function Ix(n,e){return Lr(n,"POST","/v1/accounts:sendOobCode",cs(n,e))}async function XF(n,e){return Ix(n,e)}async function JF(n,e){return Ix(n,e)}async function ZF(n,e){return $d(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}async function eU(n,e){return $d(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}class Ed extends f_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ed(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ed(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(e,t,"signInWithPassword",YF);case"emailLink":return ZF(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(e,r,"signUpPassword",QF);case"emailLink":return eU(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jl(n,e){return $d(n,"POST","/v1/accounts:signInWithIdp",cs(n,e))}const tU="http://localhost";class Na extends f_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Na(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Jl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jl(e,t)}buildRequest(){const e={requestUri:tU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bd(t)}return e}}function nU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rU(n){const e=Lc(Fc(n)).link,t=e?Lc(Fc(e)).deep_link_id:null,r=Lc(Fc(n)).deep_link_id;return(r?Lc(Fc(r)).link:null)||r||t||e||n}class p_{constructor(e){const t=Lc(Fc(e)),r=t.apiKey??null,i=t.oobCode??null,s=nU(t.mode??null);Ve(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=rU(e);try{return new p_(t)}catch{return null}}}class ku{constructor(){this.providerId=ku.PROVIDER_ID}static credential(e,t){return Ed._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=p_.parseLink(t);return Ve(r,"argument-error"),Ed._fromEmailAndCode(e,r.code,r.tenantId)}}ku.PROVIDER_ID="password";ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zd extends Sx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ks extends zd{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";class Qs extends zd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Na._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qs.credential(t,r)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";class Ys extends zd{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";class Xs extends zd{constructor(){super("twitter.com")}static credential(e,t){return Na._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";async function iU(n,e){return $d(n,"POST","/v1/accounts:signUp",cs(n,e))}class Va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Vr._fromIdTokenResponse(e,r,i),a=fS(r);return new Va({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=fS(r);return new Va({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function fS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Tp extends Ii{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Tp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Tp(e,t,r,i)}}function Px(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Tp._fromErrorAndOperation(n,s,e,r):s})}async function sU(n,e,t=!1){const r=await Da(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Va._forOperation(n,"link",r)}async function oU(n,e,t=!1){const{auth:r}=n;if(Wn(r.app))return Promise.reject(vi(r));const i="reauthenticate";try{const s=await Da(n,Px(r,i,e,n),t);Ve(s.idToken,r,"internal-error");const a=d_(s.idToken);Ve(a,r,"internal-error");const{sub:u}=a;return Ve(n.uid===u,r,"user-mismatch"),Va._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Or(r,"user-mismatch"),s}}async function Cx(n,e,t=!1){if(Wn(n.app))return Promise.reject(vi(n));const r="signIn",i=await Px(n,r,e),s=await Va._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function aU(n,e){return Cx(Po(n),e)}function lU(n,e,t){Ve(t.url?.length>0,n,"invalid-continue-uri"),Ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Ve(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ve(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ve(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Ax(n){const e=Po(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uU(n,e,t){const r=Po(n);await Ep(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",JF)}async function cU(n,e,t){if(Wn(n.app))return Promise.reject(vi(n));const r=Po(n),a=await Ep(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Ax(n),d}),u=await Va._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function dU(n,e,t){return Wn(n.app)?Promise.reject(vi(n)):aU(mt(n),ku.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ax(n),r})}async function hU(n,e){const t=mt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&lU(t.auth,i,e);const{email:s}=await XF(t.auth,i);s!==n.email&&await n.reload()}async function fU(n,e){return Lr(n,"POST","/v1/accounts:update",e)}async function pU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=mt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Da(r,fU(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function mU(n,e){const t=mt(n);return Wn(t.auth.app)?Promise.reject(vi(t.auth)):bx(t,e,null)}function gU(n,e){return bx(mt(n),null,e)}async function bx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await Da(n,KF(r,s));await n._updateTokensIfNecessary(a,!0)}function pS(n,e){return mt(n).setPersistence(e)}function yU(n,e,t,r){return mt(n).onIdTokenChanged(e,t,r)}function vU(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function wU(n,e,t,r){return mt(n).onAuthStateChanged(e,t,r)}function mS(n){return mt(n).signOut()}async function _U(n){return mt(n).delete()}const Ip="__sak";class xx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const EU=1e3,TU=10;class Rx extends xx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);xF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,TU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},EU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rx.type="LOCAL";const kx=Rx;class Dx extends xx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dx.type="SESSION";const Nx=Dx;function IU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new vm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),d=await IU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vm.receivers=[];function m_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class SU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,d)=>{const h=m_("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function wi(){return window}function PU(n){wi().location.href=n}function Vx(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function CU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AU(){return navigator?.serviceWorker?.controller||null}function bU(){return Vx()?self:null}const Mx="firebaseLocalStorageDb",xU=1,Sp="firebaseLocalStorage",Ox="fbase_key";class Wd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wm(n,e){return n.transaction([Sp],e?"readwrite":"readonly").objectStore(Sp)}function RU(){const n=indexedDB.deleteDatabase(Mx);return new Wd(n).toPromise()}function kv(){const n=indexedDB.open(Mx,xU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sp,{keyPath:Ox})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Sp)?e(r):(r.close(),await RU(),e(await kv()))})})}async function gS(n,e,t){const r=wm(n,!0).put({[Ox]:e,value:t});return new Wd(r).toPromise()}async function kU(n,e){const t=wm(n,!1).get(e),r=await new Wd(t).toPromise();return r===void 0?null:r.value}function yS(n,e){const t=wm(n,!0).delete(e);return new Wd(t).toPromise()}const DU=800,NU=3;class Lx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>NU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vm._getInstance(bU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CU(),!this.activeServiceWorker)return;this.sender=new SU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kv();return await gS(e,Ip,"1"),await yS(e,Ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>kU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=wm(i,!1).getAll();return new Wd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lx.type="LOCAL";const Fx=Lx;new Bd(3e4,6e4);function VU(n,e){return e?Yi(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class g_ extends f_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MU(n){return Cx(n.auth,new g_(n),n.bypassAuthState)}function OU(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),oU(t,new g_(n),n.bypassAuthState)}async function LU(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),sU(t,new g_(n),n.bypassAuthState)}class Ux{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MU;case"linkViaPopup":case"linkViaRedirect":return LU;case"reauthViaPopup":case"reauthViaRedirect":return OU;default:Or(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const FU=new Bd(2e3,1e4);class zl extends Ux{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,zl.currentPopupAction&&zl.currentPopupAction.cancel(),zl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=m_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FU.get())};e()}}zl.currentPopupAction=null;const UU="pendingRedirect",$f=new Map;class jU extends Ux{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const r=await BU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BU(n,e){const t=WU(e),r=zU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $U(n,e){$f.set(n._key(),e)}function zU(n){return Yi(n._redirectPersistence)}function WU(n){return Bf(UU,n.config.apiKey,n.name)}async function HU(n,e,t=!1){if(Wn(n.app))return Promise.reject(vi(n));const r=Po(n),i=VU(r,e),a=await new jU(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const qU=600*1e3;class GU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!jx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qU&&this.cachedEventUids.clear(),this.cachedEventUids.has(vS(e))}saveEventToCache(e){this.cachedEventUids.add(vS(e)),this.lastProcessedEventTime=Date.now()}}function vS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function KU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jx(n);default:return!1}}async function QU(n,e={}){return Lr(n,"GET","/v1/projects",e)}const YU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XU=/^https?/;async function JU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await QU(n);for(const t of e)try{if(ZU(t))return}catch{}Or(n,"unauthorized-domain")}function ZU(n){const e=xv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!XU.test(t))return!1;if(YU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const e4=new Bd(3e4,6e4);function wS(){const n=wi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function t4(n){return new Promise((e,t)=>{function r(){wS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wS(),t(yi(n,"network-request-failed"))},timeout:e4.get()})}if(wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wi().gapi?.load)r();else{const i=FF("iframefcb");return wi()[i]=()=>{gapi.load?r():t(yi(n,"network-request-failed"))},_x(`${LF()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw zf=null,e})}let zf=null;function n4(n){return zf=zf||t4(n),zf}const r4=new Bd(5e3,15e3),i4="__/auth/iframe",s4="emulator/auth/iframe",o4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l4(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?c_(e,s4):`https://${n.config.authDomain}/${i4}`,r={apiKey:e.apiKey,appName:n.name,v:Pu},i=a4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${bd(r).slice(1)}`}async function u4(n){const e=await n4(n),t=wi().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:l4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=yi(n,"network-request-failed"),u=wi().setTimeout(()=>{s(a)},r4.get());function d(){wi().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(a)})}))}const c4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d4=500,h4=600,f4="_blank",p4="http://localhost";class _S{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m4(n,e,t,r=d4,i=h4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...c4,width:r.toString(),height:i.toString(),top:s,left:a},h=an().toLowerCase();t&&(u=fx(h)?f4:t),dx(h)&&(e=e||p4,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[T,b])=>`${v}${T}=${b},`,"");if(bF(h)&&u!=="_self")return g4(e||"",u),new _S(null);const g=window.open(e||"",u,m);Ve(g,n,"popup-blocked");try{g.focus()}catch{}return new _S(g)}function g4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const y4="__/auth/handler",v4="emulator/auth/handler",w4=encodeURIComponent("fac");async function ES(n,e,t,r,i,s){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pu,eventId:i};if(e instanceof Sx){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",vV(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof zd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${w4}=${encodeURIComponent(d)}`:"";return`${_4(n)}?${bd(u).slice(1)}${h}`}function _4({config:n}){return n.emulator?c_(n,v4):`https://${n.authDomain}/${y4}`}const Ty="webStorageSupport";class E4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nx,this._completeRedirectFn=HU,this._overrideRedirectResult=$U}async _openPopup(e,t,r,i){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await ES(e,t,r,xv(),i);return m4(e,s,m_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await ES(e,t,r,xv(),i);return PU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(rs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await u4(e),r=new GU(e);return t.register("authEvent",i=>(Ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ty,{type:Ty},i=>{const s=i?.[0]?.[Ty];s!==void 0&&t(!!s),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vx()||hx()||h_()}}const T4=E4;var TS="@firebase/auth",IS="1.12.0";class I4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function S4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P4(n){Ia(new lo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Ve(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wx(n)},h=new VF(r,i,s,d);return WF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ia(new lo("auth-internal",e=>{const t=Po(e.getProvider("auth").getImmediate());return(r=>new I4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(TS,IS,S4(n)),pi(TS,IS,"esm2020")}const C4=300,A4=_C("authIdTokenMaxAge")||C4;let SS=null;const b4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>A4)return;const i=t?.token;SS!==i&&(SS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function x4(n=gw()){const e=Hp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zF(n,{popupRedirectResolver:T4,persistence:[Fx,kx,Nx]}),r=_C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=b4(s.toString());vU(t,a,()=>a(t.currentUser)),yU(t,u=>a(u))}}const i=yC("auth");return i&&HF(t,`http://${i}`),t}function R4(){return document.getElementsByTagName("head")?.[0]??document}MF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=yi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",R4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P4("Browser");const k4={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},Bx=AC(k4),Ce=G2(Bx),hn=x4(Bx),D4=async()=>{try{await pS(hn,Fx)}catch(n){console.warn("IndexedDB persistence unavailable, falling back to local storage.",n);try{await pS(hn,kx)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}},$x=typeof window<"u"?D4():Promise.resolve();typeof window<"u"&&(Q2(Ce).catch(n=>{n.code==="failed-precondition"?K2(Ce).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):n.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",n):console.error("Unexpected error enabling multi-tab persistence for Firestore.",n)}),$x.catch(n=>{console.error("Unexpected error configuring Firebase Auth persistence.",n)}));const N4=1;let Iy=0;function V4(){return Iy=(Iy+1)%Number.MAX_VALUE,Iy.toString()}const Nn={state:{toasts:[]},listeners:[],getState:()=>Nn.state,setState:n=>{typeof n=="function"?Nn.state=n(Nn.state):Nn.state={...Nn.state,...n},Nn.listeners.forEach(e=>e(Nn.state))},subscribe:n=>(Nn.listeners.push(n),()=>{Nn.listeners=Nn.listeners.filter(e=>e!==n)})},M4=({...n})=>{const e=V4(),t=i=>Nn.setState(s=>({...s,toasts:s.toasts.map(a=>a.id===e?{...a,...i}:a)})),r=()=>Nn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return Nn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:r},...i.toasts].slice(0,N4)})),{id:e,dismiss:r,update:t}};function y_(){const[n,e]=k.useState(Nn.getState());return k.useEffect(()=>Nn.subscribe(r=>{e(r)}),[]),k.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:M4,toasts:n.toasts}}const O4=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"){if(n===1)return!0;if(n===0)return!1}if(typeof n=="string"){const e=n.trim().toLowerCase();if(e==="true")return!0;if(e==="false")return!1}return null},zx=k.createContext(null),L4=new Set(["estandar"]),PS=n=>n==="conservador"?"estandar":L4.has(n)?n:null,Dv=()=>({calculators:{cpm:!0,t8:!0},postpartum:!1,combineMode:"estandar"}),Sy=({current:n,incoming:e,legacyCombineMode:t})=>{const r=Dv(),i={calculators:{...r.calculators},postpartum:r.postpartum,combineMode:r.combineMode};let s=!1;const a=u=>{if(!u||typeof u!="object")return;Object.keys(i.calculators).forEach(m=>{typeof u?.calculators?.[m]=="boolean"&&(i.calculators[m]=u.calculators[m])});const d=O4(u.postpartum);d!==null&&(i.postpartum=d);const h=PS(u.combineMode);h&&(i.combineMode=h,s=!0)};if(a(n),a(e),!s){const u=PS(t);u&&(i.combineMode=u)}return i},F4=({children:n})=>{const[e,t]=k.useState(null),[r,i]=k.useState(!0),[s,a]=k.useState(null),{toast:u}=y_();k.useEffect(()=>{let j=null,M=!1;return(async()=>{try{await $x}catch{}M||(j=wU(hn,async B=>{if(B){t({id:B.uid,uid:B.uid,email:B.email,displayName:B.displayName,photoURL:B.photoURL});try{if(navigator?.storage?.persist){const A="rnf_storage_persist_requested_v1";let I=!1;try{I=localStorage.getItem(A)==="1"}catch{}if(!I){try{localStorage.setItem(A,"1")}catch{}await navigator.storage.persist()}}}catch{}const X=xt(Ce,`users/${B.uid}/preferences`,"display"),re={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Dv()};try{try{const I=await iF(X);if(I.exists()){const{combineMode:C,fertilityStartConfig:O,...L}=I.data(),U=Sy({current:re.fertilityStartConfig,incoming:O,legacyCombineMode:C});a({...re,...L,fertilityStartConfig:U})}}catch{}const A=await gm(X);if(A.exists()){const{combineMode:I,fertilityStartConfig:C,...O}=A.data(),L=Sy({current:re.fertilityStartConfig,incoming:C,legacyCombineMode:I});a({...re,...O,fertilityStartConfig:L})}else a(re)}catch(A){console.error("Failed to load preferences",A),a(re)}}else t(null),a(null);i(!1)}))})(),()=>{M=!0,j&&j()}},[]);const d=async(j,M)=>{try{await dU(hn,j,M)}catch(D){throw u({title:"Error al iniciar sesin",description:D.message,variant:"destructive"}),D}},h=async(j,M)=>{try{const{user:D}=await cU(hn,j,M),B={url:`${window.location.origin}/auth`};await hU(D,B),await mS(hn)}catch(D){throw u({title:"Error al registrarse",description:D.message,variant:"destructive"}),D}},m=async j=>{try{await uU(hn,j)}catch(M){throw u({title:"Error al restablecer contrasea",description:M.message,variant:"destructive"}),M}},g=async()=>{try{await mS(hn),t(null),a(null)}catch(j){throw u({title:"Error al cerrar sesin",description:j.message,variant:"destructive"}),j}},v=async j=>{if(hn.currentUser)try{await mU(hn.currentUser,j),t(M=>M&&{...M,email:j})}catch(M){throw u({title:"Error al actualizar correo",description:M.message,variant:"destructive"}),M}},T=async j=>{if(hn.currentUser)try{await gU(hn.currentUser,j)}catch(M){throw u({title:"Error al actualizar contrasea",description:M.message,variant:"destructive"}),M}},b=async(j={})=>{if(!hn.currentUser)return;const M=xt(Ce,`users/${hn.currentUser.uid}/preferences`,"display"),{combineMode:D,fertilityStartConfig:B,...X}=j??{},re=B&&typeof B=="object"||D!==void 0,A=re?Sy({current:s?.fertilityStartConfig,incoming:B,legacyCombineMode:D}):s?.fertilityStartConfig,I={...X};re&&A&&(I.fertilityStartConfig=A,I.combineMode=aF());try{await nx(M,I,{merge:!0}),a(C=>{const L={...C??{theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Dv()},...X};return re&&A&&(L.fertilityStartConfig=A),L})}catch(C){throw console.error("Failed to save preferences",C),u({title:"Error al guardar preferencias",description:C.message,variant:"destructive"}),C}},x=async j=>{if(hn.currentUser)try{await pU(hn.currentUser,j),t(M=>M&&{...M,...j})}catch(M){throw u({title:"Error al actualizar perfil",description:M.message,variant:"destructive"}),M}},P=async()=>{if(hn.currentUser)try{await _U(hn.currentUser),t(null),a(null)}catch(j){throw u({title:"Error al eliminar cuenta",description:j.message,variant:"destructive"}),j}};return K.jsx(zx.Provider,{value:{user:e,login:d,register:h,logout:g,resetPassword:m,updateEmail:v,updatePassword:T,preferences:s,savePreferences:b,updateProfile:x,deleteAccount:P,loadingAuth:r},children:n})},_m=()=>k.useContext(zx);function is(n){"@babel/helpers - typeof";return is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(n)}function Rn(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Et(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function jt(n){Et(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||is(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Em(n,e){Et(2,arguments);var t=jt(n),r=Rn(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function U4(n,e){Et(2,arguments);var t=jt(n).getTime(),r=Rn(e);return new Date(t+r)}var j4={};function Du(){return j4}function Pp(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function ot(n){Et(1,arguments);var e=jt(n);return e.setHours(0,0,0,0),e}var B4=864e5;function $4(n,e){Et(2,arguments);var t=ot(n),r=ot(e),i=t.getTime()-Pp(t),s=r.getTime()-Pp(r);return Math.round((i-s)/B4)}function Wx(n,e){Et(2,arguments);var t=jt(n),r=jt(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var v_=6e4,w_=36e5,z4=1e3;function W4(n){return Et(1,arguments),n instanceof Date||is(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Mn(n){if(Et(1,arguments),!W4(n)&&typeof n!="number")return!1;var e=jt(n);return!isNaN(Number(e))}function CS(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function H4(n,e){Et(2,arguments);var t=jt(n),r=jt(e),i=CS(t,r),s=Math.abs($4(t,r));t.setDate(t.getDate()-i*s);var a=+(CS(t,r)===-i),u=i*(s-a);return u===0?0:u}function Hx(n,e){Et(2,arguments);var t=Rn(e);return U4(n,-t)}var q4=864e5;function G4(n){Et(1,arguments);var e=jt(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/q4)+1}function vu(n){Et(1,arguments);var e=1,t=jt(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function qx(n){Et(1,arguments);var e=jt(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=vu(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=vu(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function K4(n){Et(1,arguments);var e=qx(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=vu(t);return r}var Q4=6048e5;function Gx(n){Et(1,arguments);var e=jt(n),t=vu(e).getTime()-K4(e).getTime();return Math.round(t/Q4)+1}function Ma(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=Du(),g=Rn((t=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=jt(n),T=v.getUTCDay(),b=(T<g?7:0)+T-g;return v.setUTCDate(v.getUTCDate()-b),v.setUTCHours(0,0,0,0),v}function __(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=jt(n),g=m.getUTCFullYear(),v=Du(),T=Rn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:v.firstWeekContainsDate)!==null&&r!==void 0?r:(d=v.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(g+1,0,T),b.setUTCHours(0,0,0,0);var x=Ma(b,e),P=new Date(0);P.setUTCFullYear(g,0,T),P.setUTCHours(0,0,0,0);var j=Ma(P,e);return m.getTime()>=x.getTime()?g+1:m.getTime()>=j.getTime()?g:g-1}function Y4(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=Du(),g=Rn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),v=__(n,e),T=new Date(0);T.setUTCFullYear(v,0,g),T.setUTCHours(0,0,0,0);var b=Ma(T,e);return b}var X4=6048e5;function Kx(n,e){Et(1,arguments);var t=jt(n),r=Ma(t,e).getTime()-Y4(t,e).getTime();return Math.round(r/X4)+1}function dt(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var zs={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return dt(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):dt(r+1,2)},d:function(e,t){return dt(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return dt(e.getUTCHours()%12||12,t.length)},H:function(e,t){return dt(e.getUTCHours(),t.length)},m:function(e,t){return dt(e.getUTCMinutes(),t.length)},s:function(e,t){return dt(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return dt(s,t.length)}},Ml={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},J4={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return zs.y(e,t)},Y:function(e,t,r,i){var s=__(e,i),a=s>0?s:1-s;if(t==="YY"){var u=a%100;return dt(u,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):dt(a,t.length)},R:function(e,t){var r=qx(e);return dt(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return dt(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return dt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return dt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return zs.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return dt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=Kx(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):dt(s,t.length)},I:function(e,t,r){var i=Gx(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):dt(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):zs.d(e,t)},D:function(e,t,r){var i=G4(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):dt(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return dt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return dt(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return dt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=Ml.noon:i===0?s=Ml.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=Ml.evening:i>=12?s=Ml.afternoon:i>=4?s=Ml.morning:s=Ml.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return zs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):zs.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):dt(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):dt(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):zs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):zs.s(e,t)},S:function(e,t){return zs.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return bS(a);case"XXXX":case"XX":return aa(a);default:return aa(a,":")}},x:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return bS(a);case"xxxx":case"xx":return aa(a);default:return aa(a,":")}},O:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+AS(a,":");default:return"GMT"+aa(a,":")}},z:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+AS(a,":");default:return"GMT"+aa(a,":")}},t:function(e,t,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return dt(a,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,a=s.getTime();return dt(a,t.length)}};function AS(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+dt(s,2)}function bS(n,e){if(n%60===0){var t=n>0?"-":"+";return t+dt(Math.abs(n)/60,2)}return aa(n,e)}function aa(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=dt(Math.floor(i/60),2),a=dt(i%60,2);return r+s+t+a}var xS=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Qx=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Z4=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return xS(e,t);var a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",xS(i,t)).replace("{{time}}",Qx(s,t))},Nv={p:Qx,P:Z4},ej=["D","DD"],tj=["YY","YYYY"];function Yx(n){return ej.indexOf(n)!==-1}function Xx(n){return tj.indexOf(n)!==-1}function Cp(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var nj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rj=function(e,t,r){var i,s=nj[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Py(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var ij={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aj={date:Py({formats:ij,defaultWidth:"full"}),time:Py({formats:sj,defaultWidth:"full"}),dateTime:Py({formats:oj,defaultWidth:"full"})},lj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uj=function(e,t,r,i){return lj[e]};function xc(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var u=n.defaultWidth,d=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[d]||n.values[u]}var h=n.argumentCallback?n.argumentCallback(e):e;return i[h]}}var cj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gj=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},yj={ordinalNumber:gj,era:xc({values:cj,defaultWidth:"wide"}),quarter:xc({values:dj,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:xc({values:hj,defaultWidth:"wide"}),day:xc({values:fj,defaultWidth:"wide"}),dayPeriod:xc({values:pj,defaultWidth:"wide",formattingValues:mj,defaultFormattingWidth:"wide"})};function Rc(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?wj(u,function(g){return g.test(a)}):vj(u,function(g){return g.test(a)}),h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;var m=e.slice(a.length);return{value:h,rest:m}}}function vj(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function wj(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function _j(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var u=e.slice(i.length);return{value:a,rest:u}}}var Ej=/^(\d+)(th|st|nd|rd)?/i,Tj=/\d+/i,Ij={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sj={any:[/^b/i,/^(a|c)/i]},Pj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cj={any:[/1/i,/2/i,/3/i,/4/i]},Aj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Rj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nj={ordinalNumber:_j({matchPattern:Ej,parsePattern:Tj,valueCallback:function(e){return parseInt(e,10)}}),era:Rc({matchPatterns:Ij,defaultMatchWidth:"wide",parsePatterns:Sj,defaultParseWidth:"any"}),quarter:Rc({matchPatterns:Pj,defaultMatchWidth:"wide",parsePatterns:Cj,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Rc({matchPatterns:Aj,defaultMatchWidth:"wide",parsePatterns:bj,defaultParseWidth:"any"}),day:Rc({matchPatterns:xj,defaultMatchWidth:"wide",parsePatterns:Rj,defaultParseWidth:"any"}),dayPeriod:Rc({matchPatterns:kj,defaultMatchWidth:"any",parsePatterns:Dj,defaultParseWidth:"any"})},Jx={code:"en-US",formatDistance:rj,formatLong:aj,formatRelative:uj,localize:yj,match:Nj,options:{weekStartsOn:0,firstWeekContainsDate:1}},Vj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oj=/^'([^]*?)'?$/,Lj=/''/g,Fj=/[a-zA-Z]/;function it(n,e,t){var r,i,s,a,u,d,h,m,g,v,T,b,x,P,j,M,D,B;Et(2,arguments);var X=String(e),re=Du(),A=(r=(i=t?.locale)!==null&&i!==void 0?i:re.locale)!==null&&r!==void 0?r:Jx,I=Rn((s=(a=(u=(d=t?.firstWeekContainsDate)!==null&&d!==void 0?d:t==null||(h=t.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:re.firstWeekContainsDate)!==null&&a!==void 0?a:(g=re.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Rn((T=(b=(x=(P=t?.weekStartsOn)!==null&&P!==void 0?P:t==null||(j=t.locale)===null||j===void 0||(M=j.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&x!==void 0?x:re.weekStartsOn)!==null&&b!==void 0?b:(D=re.locale)===null||D===void 0||(B=D.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&T!==void 0?T:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!A.localize)throw new RangeError("locale must contain localize property");if(!A.formatLong)throw new RangeError("locale must contain formatLong property");var O=jt(n);if(!Mn(O))throw new RangeError("Invalid time value");var L=Pp(O),U=Hx(O,L),V={firstWeekContainsDate:I,weekStartsOn:C,locale:A,_originalDate:O},de=X.match(Mj).map(function(xe){var Se=xe[0];if(Se==="p"||Se==="P"){var ee=Nv[Se];return ee(xe,A.formatLong)}return xe}).join("").match(Vj).map(function(xe){if(xe==="''")return"'";var Se=xe[0];if(Se==="'")return Uj(xe);var ee=J4[Se];if(ee)return!(t!=null&&t.useAdditionalWeekYearTokens)&&Xx(xe)&&Cp(xe,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&Yx(xe)&&Cp(xe,e,String(n)),ee(U,xe,A.localize,V);if(Se.match(Fj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Se+"`");return xe}).join("");return de}function Uj(n){var e=n.match(Oj);return e?e[1].replace(Lj,"'"):n}function jj(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function RS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Bj(n,e){if(n){if(typeof n=="string")return RS(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?RS(n,e):void 0}}function kS(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Bj(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}function Ee(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Vv(n,e){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Vv(n,e)}function tt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Vv(n,e)}function Ap(n){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ap(n)}function Zx(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zx=function(){return!!n})()}function $j(n,e){if(e&&(is(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(n)}function nt(n){var e=Zx();return function(){var t,r=Ap(n);if(e){var i=Ap(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return $j(this,t)}}function Qe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zj(n,e){if(is(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function e1(n){var e=zj(n,"string");return is(e)=="symbol"?e:e+""}function Wj(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,e1(r.key),r)}}function Ye(n,e,t){return e&&Wj(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ve(n,e,t){return(e=e1(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Hj=10,t1=(function(){function n(){Qe(this,n),ve(this,"priority",void 0),ve(this,"subPriority",0)}return Ye(n,[{key:"validate",value:function(t,r){return!0}}]),n})(),qj=(function(n){tt(t,n);var e=nt(t);function t(r,i,s,a,u){var d;return Qe(this,t),d=e.call(this),d.value=r,d.validateValue=i,d.setValue=s,d.priority=a,u&&(d.subPriority=u),d}return Ye(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,a){return this.setValue(i,s,this.value,a)}}]),t})(t1),Gj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",Hj),ve(Ee(r),"subPriority",-1),r}return Ye(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}}]),t})(t1),at=(function(){function n(){Qe(this,n),ve(this,"incompatibleTokens",void 0),ve(this,"priority",void 0),ve(this,"subPriority",void 0)}return Ye(n,[{key:"run",value:function(t,r,i,s){var a=this.parse(t,r,i,s);return a?{setter:new qj(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n})(),Kj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",140),ve(Ee(r),"incompatibleTokens",["R","u","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"});case"GGGGG":return a.era(i,{width:"narrow"});default:return a.era(i,{width:"wide"})||a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,a){return s.era=a,i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(at),Kt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ci={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Qt(n,e){return n&&{value:e(n.value),rest:n.rest}}function Nt(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function di(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*w_+s*v_+a*z4),rest:e.slice(t[0].length)}}function n1(n){return Nt(Kt.anyDigitsSigned,n)}function Bt(n,e){switch(n){case 1:return Nt(Kt.singleDigit,e);case 2:return Nt(Kt.twoDigits,e);case 3:return Nt(Kt.threeDigits,e);case 4:return Nt(Kt.fourDigits,e);default:return Nt(new RegExp("^\\d{1,"+n+"}"),e)}}function bp(n,e){switch(n){case 1:return Nt(Kt.singleDigitSigned,e);case 2:return Nt(Kt.twoDigitsSigned,e);case 3:return Nt(Kt.threeDigitsSigned,e);case 4:return Nt(Kt.fourDigitsSigned,e);default:return Nt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function E_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function r1(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,a=Math.floor(s/100)*100,u=n>=s%100;i=n+a-(u?100:0)}return t?i:1-i}function i1(n){return n%400===0||n%4===0&&n%100!==0}var Qj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",130),ve(Ee(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="yy"}};switch(s){case"y":return Qt(Bt(4,i),u);case"yo":return Qt(a.ordinalNumber(i,{unit:"year"}),u);default:return Qt(Bt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a){var u=i.getUTCFullYear();if(a.isTwoDigitYear){var d=r1(a.year,u);return i.setUTCFullYear(d,0,1),i.setUTCHours(0,0,0,0),i}var h=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(h,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(at),Yj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",130),ve(Ee(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return Qt(Bt(4,i),u);case"Yo":return Qt(a.ordinalNumber(i,{unit:"year"}),u);default:return Qt(Bt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a,u){var d=__(i,u);if(a.isTwoDigitYear){var h=r1(a.year,d);return i.setUTCFullYear(h,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Ma(i,u)}var m=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(m,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Ma(i,u)}}]),t})(at),Xj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",130),ve(Ee(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s){return bp(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,a){var u=new Date(0);return u.setUTCFullYear(a,0,4),u.setUTCHours(0,0,0,0),vu(u)}}]),t})(at),Jj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",130),ve(Ee(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s){return bp(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,a){return i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(at),Zj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",120),ve(Ee(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"Q":case"QQ":return Bt(s.length,i);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});default:return a.quarter(i,{width:"wide",context:"formatting"})||a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(at),eB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",120),ve(Ee(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"q":case"qq":return Bt(s.length,i);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});default:return a.quarter(i,{width:"wide",context:"standalone"})||a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(at),tB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ve(Ee(r),"priority",110),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"M":return Qt(Nt(Kt.month,i),u);case"MM":return Qt(Bt(2,i),u);case"Mo":return Qt(a.ordinalNumber(i,{unit:"month"}),u);case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});default:return a.month(i,{width:"wide",context:"formatting"})||a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(at),nB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",110),ve(Ee(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"L":return Qt(Nt(Kt.month,i),u);case"LL":return Qt(Bt(2,i),u);case"Lo":return Qt(a.ordinalNumber(i,{unit:"month"}),u);case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});default:return a.month(i,{width:"wide",context:"standalone"})||a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(at);function rB(n,e,t){Et(2,arguments);var r=jt(n),i=Rn(e),s=Kx(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var iB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",100),ve(Ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"w":return Nt(Kt.week,i);case"wo":return a.ordinalNumber(i,{unit:"week"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a,u){return Ma(rB(i,a,u),u)}}]),t})(at);function sB(n,e){Et(2,arguments);var t=jt(n),r=Rn(e),i=Gx(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var oB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",100),ve(Ee(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"I":return Nt(Kt.week,i);case"Io":return a.ordinalNumber(i,{unit:"week"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a){return vu(sB(i,a))}}]),t})(at),aB=[31,28,31,30,31,30,31,31,30,31,30,31],lB=[31,29,31,30,31,30,31,31,30,31,30,31],uB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",90),ve(Ee(r),"subPriority",1),ve(Ee(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"d":return Nt(Kt.date,i);case"do":return a.ordinalNumber(i,{unit:"date"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=i1(a),d=i.getUTCMonth();return u?s>=1&&s<=lB[d]:s>=1&&s<=aB[d]}},{key:"set",value:function(i,s,a){return i.setUTCDate(a),i.setUTCHours(0,0,0,0),i}}]),t})(at),cB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",90),ve(Ee(r),"subpriority",1),ve(Ee(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"D":case"DD":return Nt(Kt.dayOfYear,i);case"Do":return a.ordinalNumber(i,{unit:"date"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=i1(a);return u?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,a){return i.setUTCMonth(0,a),i.setUTCHours(0,0,0,0),i}}]),t})(at);function T_(n,e,t){var r,i,s,a,u,d,h,m;Et(2,arguments);var g=Du(),v=Rn((r=(i=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:g.weekStartsOn)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&r!==void 0?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=jt(n),b=Rn(e),x=T.getUTCDay(),P=b%7,j=(P+7)%7,M=(j<v?7:0)+b-x;return T.setUTCDate(T.getUTCDate()+M),T}var dB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",90),ve(Ee(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=T_(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(at),hB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",90),ve(Ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"e":case"ee":return Qt(Bt(s.length,i),d);case"eo":return Qt(a.ordinalNumber(i,{unit:"day"}),d);case"eee":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=T_(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(at),fB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",90),ve(Ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"c":case"cc":return Qt(Bt(s.length,i),d);case"co":return Qt(a.ordinalNumber(i,{unit:"day"}),d);case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});default:return a.day(i,{width:"wide",context:"standalone"})||a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=T_(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(at);function pB(n,e){Et(2,arguments);var t=Rn(e);t%7===0&&(t=t-7);var r=1,i=jt(n),s=i.getUTCDay(),a=t%7,u=(a+7)%7,d=(u<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+d),i}var mB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",90),ve(Ee(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h===0?7:h};switch(s){case"i":case"ii":return Bt(s.length,i);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return Qt(a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiii":return Qt(a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Qt(a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);default:return Qt(a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,a){return i=pB(i,a),i.setUTCHours(0,0,0,0),i}}]),t})(at),gB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",80),ve(Ee(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(E_(a),0,0,0),i}}]),t})(at),yB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",80),ve(Ee(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(E_(a),0,0,0),i}}]),t})(at),vB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",80),ve(Ee(r),"incompatibleTokens",["a","b","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(E_(a),0,0,0),i}}]),t})(at),wB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",70),ve(Ee(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"h":return Nt(Kt.hour12h,i);case"ho":return a.ordinalNumber(i,{unit:"hour"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):!u&&a===12?i.setUTCHours(0,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(at),_B=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",70),ve(Ee(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"H":return Nt(Kt.hour23h,i);case"Ho":return a.ordinalNumber(i,{unit:"hour"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,a){return i.setUTCHours(a,0,0,0),i}}]),t})(at),EB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",70),ve(Ee(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"K":return Nt(Kt.hour11h,i);case"Ko":return a.ordinalNumber(i,{unit:"hour"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(at),TB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",70),ve(Ee(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"k":return Nt(Kt.hour24h,i);case"ko":return a.ordinalNumber(i,{unit:"hour"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,a){var u=a<=24?a%24:a;return i.setUTCHours(u,0,0,0),i}}]),t})(at),IB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",60),ve(Ee(r),"incompatibleTokens",["t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"m":return Nt(Kt.minute,i);case"mo":return a.ordinalNumber(i,{unit:"minute"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCMinutes(a,0,0),i}}]),t})(at),SB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",50),ve(Ee(r),"incompatibleTokens",["t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"s":return Nt(Kt.second,i);case"so":return a.ordinalNumber(i,{unit:"second"});default:return Bt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCSeconds(a,0),i}}]),t})(at),PB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",30),ve(Ee(r),"incompatibleTokens",["t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s){var a=function(d){return Math.floor(d*Math.pow(10,-s.length+3))};return Qt(Bt(s.length,i),a)}},{key:"set",value:function(i,s,a){return i.setUTCMilliseconds(a),i}}]),t})(at),CB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",10),ve(Ee(r),"incompatibleTokens",["t","T","x"]),r}return Ye(t,[{key:"parse",value:function(i,s){switch(s){case"X":return di(ci.basicOptionalMinutes,i);case"XX":return di(ci.basic,i);case"XXXX":return di(ci.basicOptionalSeconds,i);case"XXXXX":return di(ci.extendedOptionalSeconds,i);default:return di(ci.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(at),AB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",10),ve(Ee(r),"incompatibleTokens",["t","T","X"]),r}return Ye(t,[{key:"parse",value:function(i,s){switch(s){case"x":return di(ci.basicOptionalMinutes,i);case"xx":return di(ci.basic,i);case"xxxx":return di(ci.basicOptionalSeconds,i);case"xxxxx":return di(ci.extendedOptionalSeconds,i);default:return di(ci.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(at),bB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",40),ve(Ee(r),"incompatibleTokens","*"),r}return Ye(t,[{key:"parse",value:function(i){return n1(i)}},{key:"set",value:function(i,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t})(at),xB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Ee(r),"priority",20),ve(Ee(r),"incompatibleTokens","*"),r}return Ye(t,[{key:"parse",value:function(i){return n1(i)}},{key:"set",value:function(i,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t})(at),RB={G:new Kj,y:new Qj,Y:new Yj,R:new Xj,u:new Jj,Q:new Zj,q:new eB,M:new tB,L:new nB,w:new iB,I:new oB,d:new uB,D:new cB,E:new dB,e:new hB,c:new fB,i:new mB,a:new gB,b:new yB,B:new vB,h:new wB,H:new _B,K:new EB,k:new TB,m:new IB,s:new SB,S:new PB,X:new CB,x:new AB,t:new bB,T:new xB},kB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NB=/^'([^]*?)'?$/,VB=/''/g,MB=/\S/,OB=/[a-zA-Z]/;function LB(n,e,t,r){var i,s,a,u,d,h,m,g,v,T,b,x,P,j;Et(3,arguments);var M=String(n),D=String(e),B=Du(),X=(i=(s=void 0)!==null&&s!==void 0?s:B.locale)!==null&&i!==void 0?i:Jx;if(!X.match)throw new RangeError("locale must contain match property");var re=Rn((a=(u=(d=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&d!==void 0?d:B.firstWeekContainsDate)!==null&&u!==void 0?u:(m=B.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(re>=1&&re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=Rn((v=(T=(b=(x=void 0)!==null&&x!==void 0?x:void 0)!==null&&b!==void 0?b:B.weekStartsOn)!==null&&T!==void 0?T:(P=B.locale)===null||P===void 0||(j=P.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&v!==void 0?v:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(D==="")return M===""?jt(t):new Date(NaN);var I={firstWeekContainsDate:re,weekStartsOn:A,locale:X},C=[new Gj],O=D.match(DB).map(function(ae){var oe=ae[0];if(oe in Nv){var pe=Nv[oe];return pe(ae,X.formatLong)}return ae}).join("").match(kB),L=[],U=kS(O),V;try{var de=function(){var oe=V.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&Xx(oe)&&Cp(oe,D,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Yx(oe)&&Cp(oe,D,n);var pe=oe[0],De=RB[pe];if(De){var Le=De.incompatibleTokens;if(Array.isArray(Le)){var $e=L.find(function($t){return Le.includes($t.token)||$t.token===pe});if($e)throw new RangeError("The format string mustn't contain `".concat($e.fullToken,"` and `").concat(oe,"` at the same time"))}else if(De.incompatibleTokens==="*"&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(oe,"` and any other token at the same time"));L.push({token:pe,fullToken:oe});var ut=De.run(M,oe,X.match,I);if(!ut)return{v:new Date(NaN)};C.push(ut.setter),M=ut.rest}else{if(pe.match(OB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+pe+"`");if(oe==="''"?oe="'":pe==="'"&&(oe=FB(oe)),M.indexOf(oe)===0)M=M.slice(oe.length);else return{v:new Date(NaN)}}};for(U.s();!(V=U.n()).done;){var xe=de();if(is(xe)==="object")return xe.v}}catch(ae){U.e(ae)}finally{U.f()}if(M.length>0&&MB.test(M))return new Date(NaN);var Se=C.map(function(ae){return ae.priority}).sort(function(ae,oe){return oe-ae}).filter(function(ae,oe,pe){return pe.indexOf(ae)===oe}).map(function(ae){return C.filter(function(oe){return oe.priority===ae}).sort(function(oe,pe){return pe.subPriority-oe.subPriority})}).map(function(ae){return ae[0]}),ee=jt(t);if(isNaN(ee.getTime()))return new Date(NaN);var H=Hx(ee,Pp(ee)),ne={},J=kS(Se),N;try{for(J.s();!(N=J.n()).done;){var z=N.value;if(!z.validate(H,I))return new Date(NaN);var se=z.set(H,ne,I);Array.isArray(se)?(H=se[0],jj(ne,se[1])):H=se}}catch(ae){J.e(ae)}finally{J.f()}return H}function FB(n){return n.match(NB)[1].replace(VB,"'")}function _e(n,e){var t;Et(1,arguments);var r=Rn((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=$B(n),s;if(i.date){var a=zB(i.date,r);s=WB(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var u=s.getTime(),d=0,h;if(i.time&&(d=HB(i.time),isNaN(d)))return new Date(NaN);if(i.timezone){if(h=qB(i.timezone),isNaN(h))return new Date(NaN)}else{var m=new Date(u+d),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(u+d+h)}var vf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},UB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,BB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $B(n){var e={},t=n.split(vf.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],vf.timeZoneDelimiter.test(e.date)&&(e.date=n.split(vf.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=vf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function zB(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function WB(n,e){if(e===null)return new Date(NaN);var t=n.match(UB);if(!t)return new Date(NaN);var r=!!t[4],i=kc(t[1]),s=kc(t[2])-1,a=kc(t[3]),u=kc(t[4]),d=kc(t[5])-1;if(r)return XB(e,u,d)?GB(e,u,d):new Date(NaN);var h=new Date(0);return!QB(e,s,a)||!YB(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}function kc(n){return n?parseInt(n):1}function HB(n){var e=n.match(jB);if(!e)return NaN;var t=Cy(e[1]),r=Cy(e[2]),i=Cy(e[3]);return JB(t,r,i)?t*w_+r*v_+i*1e3:NaN}function Cy(n){return n&&parseFloat(n.replace(",","."))||0}function qB(n){if(n==="Z")return 0;var e=n.match(BB);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return ZB(r,i)?t*(r*w_+i*v_):NaN}function GB(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var KB=[31,null,31,30,31,30,31,31,30,31,30,31];function s1(n){return n%400===0||n%4===0&&n%100!==0}function QB(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(KB[e]||(s1(n)?29:28))}function YB(n,e){return e>=1&&e<=(s1(n)?366:365)}function XB(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function JB(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function ZB(n,e){return e>=0&&e<=59}const Hd=(n,e)=>{if(!n||!e)return 0;const t=ot(_e(n)),r=ot(_e(e));return H4(t,r)+1},Dc=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},Wf=(n,e)=>!n||!Array.isArray(n)||!e?[]:[...n].sort((r,i)=>{const s=r.timestamp?_e(r.timestamp):r.iso_date?_e(r.iso_date):0,a=i.timestamp?_e(i.timestamp):i.iso_date?_e(i.iso_date):0;return Wx(s,a)}).map(r=>{const i=Dc(r.temperature_raw),s=Dc(r.temperature_corrected),a=Array.isArray(r.measurements)?r.measurements:[],u=h=>{if(!h)return null;const m=Dc(h.temperature),g=Dc(h.temperature_corrected);return h.use_corrected&&g!==null?g:m!==null?m:g!==null?g:null};let d=Dc(r.temperature_chart);if(d==null&&a.length){const m=a.find(g=>g&&g.selected&&u(g)!==null)||a.find(g=>u(g)!==null);m&&(d=u(m))}return d==null&&(r.use_corrected&&s!==null?d=s:i!==null?d=i:s!==null&&(d=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?it(_e(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?it(_e(r.timestamp),"dd/MM"):r.iso_date?it(_e(r.iso_date),"dd/MM"):"N/A",cycleDay:Hd(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:a,temperature_chart:d,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),e3=async n=>{const e=et(Ce,`users/${n}/cycles`),t=await wt(e);if(t.empty)return null;const r=t.docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.end_date===null||d.end_date===void 0).sort((d,h)=>(h.start_date||"").localeCompare(d.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=et(Ce,`users/${n}/cycles/${i.id}/entries`),u=(await wt(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},t3=async(n,e)=>{const t=et(Ce,`users/${n}/cycles`),i=(await wt(t)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.end_date!==null&&a.end_date!==void 0||e&&a.start_date&&a.start_date<e).sort((a,u)=>(u.start_date||"").localeCompare(a.start_date||""));return await Promise.all(i.map(async a=>{const u=et(Ce,`users/${n}/cycles/${a.id}/entries`),h=(await wt(u)).docs.map(m=>({id:m.id,...m.data()}));return{id:a.id,startDate:a.start_date,endDate:a.end_date,needsCompletion:!a.end_date,ignoredForAutoCalculations:!!a.ignored_auto_calculations,data:h}}))},n3=async(n,e)=>{const t=xt(Ce,`users/${n}/cycles/${e}`),r=await gm(t);if(!r.exists())return null;const i=r.data(),s=et(Ce,`users/${n}/cycles/${e}/entries`),u=(await wt(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},Td=n=>{if(n.iso_date&&Mn(_e(n.iso_date)))return it(_e(n.iso_date),"yyyy-MM-dd");if(typeof n.timestamp=="string"&&Mn(_e(n.timestamp)))return it(_e(n.timestamp),"yyyy-MM-dd");const e=new Error("Entry has invalid date");throw e.code="split-invalid-entry",e},o1=n=>n.map(e=>{const t=e.data(),r=t?.start_date,i=typeof r=="string"?ot(_e(r)):null;return{id:e.id,data:t,start:i}}).filter(({start:e})=>e&&Mn(e)).sort((e,t)=>Wx(e.start,t.start)).map(({id:e,data:t})=>({id:e,data:t})),a1=(n,e)=>{const t=n.findIndex(r=>r.id===e);return t===-1?{previous:null,current:null,next:null,nextNext:null}:{previous:t>0?n[t-1]:null,current:n[t],next:t<n.length-1?n[t+1]:null,nextNext:t<n.length-2?n[t+2]:null}},Mv=async({userId:n,fromCycleId:e,toCycleId:t,shouldMoveIsoDate:r,toCycleStartIso:i})=>{if(!n||!e||!t||!i)throw new Error("Missing data for moving entries");const s=et(Ce,`users/${n}/cycles/${e}/entries`),u=(await wt(s)).docs.map(D=>{const B=D.data(),X=Td(B);return{id:D.id,ref:D.ref,data:B,isoDate:X}}).filter(D=>r(D.isoDate));if(!u.length)return{movedEntries:0};const d=et(Ce,`users/${n}/cycles/${t}/entries`),h=await wt(d),m=new Map;for(const D of h.docs){let B=null;try{B=Td(D.data())}catch{continue}if(m.has(B)){const X=new Error("New cycle already has multiple entries for the same date");throw X.code="split-date-conflict",X.conflictDate=B,X}m.set(B,{id:D.id,ref:D.ref,data:D.data()})}let g=mo(Ce),v=0;const T=async()=>{v>=400&&(await g.commit(),g=mo(Ce),v=0)},b=async(D,B)=>{await T(),g.set(D,B),v+=1},x=async(D,B)=>{await T(),g.update(D,B),v+=1},P=async D=>{await T(),g.delete(D),v+=1},j=D=>D==null||typeof D=="string"&&D.trim()==="",M=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const D of u){const B=m.get(D.isoDate),X=Hd(D.isoDate,i);if(B){const C={cycle_day:X};for(const U of M){const V=B.data?.[U],de=D.data?.[U];j(V)&&!j(de)&&(C[U]=de)}await x(B.ref,C);const O=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),L=await wt(O);for(const U of L.docs){const V=xt(et(Ce,`users/${n}/cycles/${t}/entries/${B.id}/measurements`));await b(V,U.data()),await P(U.ref)}await P(D.ref);continue}const re=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}`);await b(re,{...D.data,cycle_day:X});const A=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),I=await wt(A);for(const C of I.docs){const O=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}/measurements/${C.id}`);await b(O,C.data()),await P(C.ref)}await P(D.ref)}return v>0&&await g.commit(),{movedEntries:u.length}},l1=async(n,e,t)=>{if(!n||!e||!t)return;const r=et(Ce,`users/${n}/cycles/${e}/entries`),i=await wt(r);let s=mo(Ce),a=0;const u=async()=>{a>=400&&(await s.commit(),s=mo(Ce),a=0)},d=async(h,m)=>{await u(),s.update(h,m),a+=1};for(const h of i.docs){const m=h.data();let g=null;try{g=Td(m)}catch{continue}const v=Hd(g,t);await d(h.ref,{cycle_day:v})}a>0&&await s.commit()},u1=async(n,e,t,r)=>{if(!n||!e||!t||!r)throw new Error("Missing data for cycle split");const i=_e(r);if(!Mn(i)){const D=new Error("Invalid split start date");throw D.code="split-invalid-date",D}const s=et(Ce,`users/${n}/cycles/${e}/entries`),u=(await wt(s)).docs.map(D=>{const B=D.data(),X=Td(B);return{id:D.id,ref:D.ref,data:B,isoDate:X}}).filter(D=>_e(D.isoDate)>=i);if(!u.length)return{movedEntries:0};const d=et(Ce,`users/${n}/cycles/${t}/entries`),h=await wt(d),m=new Map;for(const D of h.docs){const B=D.data();let X=null;try{X=Td(B)}catch{continue}if(m.has(X)){const re=new Error("New cycle already has multiple entries for the same date");throw re.code="split-date-conflict",re.conflictDate=X,re}m.set(X,{id:D.id,ref:D.ref,data:B})}let g=mo(Ce),v=0;const T=async()=>{v>=400&&(await g.commit(),g=mo(Ce),v=0)},b=async(D,B)=>{await T(),g.set(D,B),v+=1},x=async(D,B)=>{await T(),g.update(D,B),v+=1},P=async D=>{await T(),g.delete(D),v+=1},j=D=>D==null||typeof D=="string"&&D.trim()==="",M=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const D of u){const B=m.get(D.isoDate),X=Hd(D.isoDate,r);if(B){const C={cycle_day:X};for(const U of M){const V=B.data?.[U],de=D.data?.[U];j(V)&&!j(de)&&(C[U]=de)}await x(B.ref,C);const O=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),L=await wt(O);for(const U of L.docs){const V=xt(et(Ce,`users/${n}/cycles/${t}/entries/${B.id}/measurements`));await b(V,U.data()),await P(U.ref)}await P(D.ref);continue}const re=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}`);await b(re,{...D.data,cycle_day:X});const A=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),I=await wt(A);for(const C of I.docs){const O=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}/measurements/${C.id}`);await b(O,C.data()),await P(C.ref)}await P(D.ref)}return v>0&&await g.commit(),{movedEntries:u.length}},r3=async(n,e,t)=>{if(!n||!t)throw new Error("Missing user or start date");const r=_e(t);if(!Mn(r))throw new Error("Invalid start date");const i=et(Ce,`users/${n}/cycles`),a=(await wt(i)).docs.find(d=>{if(d.id===e)return!1;const h=d.data(),m=h.start_date?_e(h.start_date):null,g=h.end_date?_e(h.end_date):null;if(!m)return!1;const v=g??new Date("9999-12-31");return r>=m&&r<=v});if(a){const d={id:a.id,startDate:a.data().start_date,endDate:a.data().end_date},h=new Error("Cycle dates overlap with an existing cycle");throw h.code="cycle-overlap",h.conflictCycle=d,h}const u=xt(et(Ce,`users/${n}/cycles`));if(await nx(u,{user_id:n,start_date:t,ignored_auto_calculations:!1,end_date:null}),e){await u1(n,e,u.id,t);const d=xt(Ce,`users/${n}/cycles/${e}`),h=it(Em(ot(r),-1),"yyyy-MM-dd");await ka(d,{end_date:h})}return{id:u.id,start_date:t}},i3=async n=>{const e=n.user_id,t=n.timestamp??new Date().toISOString(),r={timestamp:t,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation,mucus_appearance:n.mucus_appearance,fertility_symbol:n.fertility_symbol,observations:n.observations,had_relations:!!(n.had_relations??n.hadRelations??!1),ignored:n.ignored,peak_marker:n.peak_marker??null},i=et(Ce,`users/${e}/cycles`),s=await wt(i),a=_e(t),u=s.docs.filter(h=>{const m=h.data(),g=m.start_date?_e(m.start_date):null,v=m.end_date?_e(m.end_date):null;return g&&a>=g&&(!v||a<=v)});let d=null;if(u.length>1?d=u.sort((h,m)=>{const g=_e(h.data().start_date);return _e(m.data().start_date)-g})[0]:u.length===1&&(d=u[0]),d){const h=await zc(et(Ce,`users/${e}/cycles/${d.id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=et(Ce,`users/${e}/cycles/${d.id}/entries/${h.id}/measurements`);for(const g of n.measurements)await zc(m,g)}return{id:h.id}}if(n.cycle_id){const h=await zc(et(Ce,`users/${e}/cycles/${n.cycle_id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=et(Ce,`users/${e}/cycles/${n.cycle_id}/entries/${h.id}/measurements`);for(const g of n.measurements)await zc(m,g)}return{id:h.id}}return{id:null}},Ay=async(n,e,t,r)=>{const i=xt(Ce,`users/${n}/cycles/${e}/entries/${t}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],a={};for(const u of s)Object.prototype.hasOwnProperty.call(r,u)&&(a[u]=r[u]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(a.timestamp=r.timestamp),Object.keys(a).length===0)return{id:t};if(await ka(i,a),Array.isArray(r.measurements)&&(r.measurements.length>=2||r.measurements.length===0)){const u=et(Ce,`users/${n}/cycles/${e}/entries/${t}/measurements`),d=await wt(u);if(await Promise.all(d.docs.map(h=>yp(h.ref))),r.measurements.length>=2)for(const h of r.measurements)await zc(u,h)}return{id:t}},s3=async(n,e,t)=>{try{const r=et(Ce,`users/${n}/cycles/${e}/entries/${t}/measurements`);return(await wt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error fetching measurements for entry",t,r),[]}},DS=async(n,e,t)=>{await yp(xt(Ce,`users/${n}/cycles/${e}/entries/${t}`))},by=async(n,e,t,r,i=!1)=>{const s=xt(Ce,`users/${e}/cycles/${n}`),a=await gm(s);if(!a.exists())throw new Error("Cycle not found");const u=a.data(),d=t??u.start_date,h=r!==void 0?r:u.end_date,m=d?_e(d):null,g=h?_e(h):null;if(m&&g&&g<m)throw new Error("End date cannot be earlier than start date");const v=et(Ce,`users/${e}/cycles`),b=(await wt(v)).docs.find(j=>{if(j.id===n)return!1;const M=j.data(),D=M.start_date?_e(M.start_date):null,B=M.end_date?_e(M.end_date):null;if(!D)return!1;const X=B??new Date("9999-12-31"),re=g??new Date("9999-12-31");return m<=X&&D<=re}),x=b?{id:b.id,startDate:b.data().start_date,endDate:b.data().end_date}:null;if(i)return{overlap:x};if(b){const j=new Error("Cycle dates overlap with an existing cycle");throw j.code="cycle-overlap",j.conflictCycle=x,j}const P={};t!==void 0&&(P.start_date=t),r!==void 0&&(P.end_date=r),await ka(s,P)},o3=async(n,e,t)=>{const r=xt(Ce,`users/${n}/cycles/${e}`);await ka(r,{ignored_auto_calculations:t})},a3=async(n,e,t,r)=>{if(!t)return;const i=ot(_e(t));if(!Mn(i))throw new Error("Invalid end date");const s=et(Ce,`users/${n}/cycles`),a=await wt(s),u=o1(a.docs),{current:d,next:h,nextNext:m}=a1(u,e);if(!d||!h)return;const g=r||d.data.start_date||null,v=g?ot(_e(g)):null;if(v&&i<v){const j=new Error("End date cannot be earlier than start date");throw j.code="cycle-range-invalid",j}const T=ot(Em(i,1)),b=it(T,"yyyy-MM-dd");if(m?.data?.start_date){const j=ot(_e(m.data.start_date));if(T>=j){const M=new Error("Cycle dates overlap with an existing cycle");throw M.code="cycle-overlap",M.conflictCycle={id:m.id,startDate:m.data.start_date,endDate:m.data.end_date},M}}if(h.data.end_date){const j=ot(_e(h.data.end_date));if(T>j){const M=new Error("Cycle end is earlier than start");throw M.code="cycle-range-invalid",M}}const x=ot(_e(h.data.start_date));T>x?await Mv({userId:n,fromCycleId:h.id,toCycleId:e,shouldMoveIsoDate:j=>ot(_e(j))<T,toCycleStartIso:g||d.data.start_date}):T<x&&await u1(n,e,h.id,b);const P=xt(Ce,`users/${n}/cycles/${h.id}`);await ka(P,{start_date:b}),await l1(n,h.id,b)},l3=async(n,e,t)=>{if(!t)return;const r=ot(_e(t));if(!Mn(r))throw new Error("Invalid start date");const i=et(Ce,`users/${n}/cycles`),s=await wt(i),a=o1(s.docs),{previous:u,current:d,next:h}=a1(a,e);if(!d)return;const m=d.data.start_date,g=m?ot(_e(m)):null,v=d.data.end_date?ot(_e(d.data.end_date)):null;if(u?.data?.start_date){const b=ot(_e(u.data.start_date));if(r<=b){const x=new Error("Cycle dates overlap with an existing cycle");throw x.code="cycle-overlap",x.conflictCycle={id:u.id,startDate:u.data.start_date,endDate:u.data.end_date},x}}if(h?.data?.start_date){const b=ot(_e(h.data.start_date));if(r>=b){const x=new Error("Cycle dates overlap with an existing cycle");throw x.code="cycle-overlap",x.conflictCycle={id:h.id,startDate:h.data.start_date,endDate:h.data.end_date},x}}if(v&&r>v){const b=new Error("Cycle start is later than cycle end");throw b.code="cycle-range-invalid",b}if(u){const b=xt(Ce,`users/${n}/cycles/${u.id}`),x=it(Em(r,-1),"yyyy-MM-dd");await ka(b,{end_date:x}),g&&r<g?await Mv({userId:n,fromCycleId:u.id,toCycleId:e,shouldMoveIsoDate:P=>ot(_e(P))>=r,toCycleStartIso:it(r,"yyyy-MM-dd")}):g&&r>g&&await Mv({userId:n,fromCycleId:e,toCycleId:u.id,shouldMoveIsoDate:P=>ot(_e(P))<r,toCycleStartIso:u.data.start_date})}const T=xt(Ce,`users/${n}/cycles/${e}`);await ka(T,{start_date:it(r,"yyyy-MM-dd")}),await l1(n,e,it(r,"yyyy-MM-dd"))},NS=async(n,e)=>{const t=et(Ce,`users/${n}/cycles/${e}/entries`),r=await wt(t);await Promise.all(r.docs.map(i=>yp(i.ref))),await yp(xt(Ce,`users/${n}/cycles/${e}`))},u3=async(n,e)=>{if(!n||!e)throw new Error("Missing user or cycle ID");const t=xt(Ce,`users/${n}/cycles/${e}`),r=await gm(t);if(!r.exists())throw new Error("Cycle not found");const i=r.data();if(i.end_date!==null&&i.end_date!==void 0){const I=new Error("Cannot undo a non-current cycle");throw I.code="undo-not-current",I}if(!i.start_date||!Mn(_e(i.start_date))){const I=new Error("Current cycle has invalid start date");throw I.code="undo-not-current",I}const s=await wt(et(Ce,`users/${n}/cycles`)),a=it(Em(_e(i.start_date),-1),"yyyy-MM-dd"),u=s.docs.filter(I=>I.id!==e).map(I=>({id:I.id,...I.data()})).filter(I=>I.end_date===a).sort((I,C)=>(C.start_date||"").localeCompare(I.start_date||""));if(!u.length){const I=new Error("No previous cycle available");throw I.code="no-previous-cycle",I}const d=u[0];if(!d.start_date||!Mn(_e(d.start_date)))throw new Error("Previous cycle has invalid start date");const h=I=>{if(I.iso_date&&Mn(_e(I.iso_date)))return it(_e(I.iso_date),"yyyy-MM-dd");if(typeof I.timestamp=="string"&&Mn(_e(I.timestamp)))return it(_e(I.timestamp),"yyyy-MM-dd");const C=new Error("Entry has invalid date");throw C.code="undo-invalid-entry",C},m=I=>{try{return I.iso_date&&Mn(_e(I.iso_date))?it(_e(I.iso_date),"yyyy-MM-dd"):typeof I.timestamp=="string"&&Mn(_e(I.timestamp))?it(_e(I.timestamp),"yyyy-MM-dd"):null}catch{return null}},g=et(Ce,`users/${n}/cycles/${d.id}/entries`),v=await wt(g),T=new Set;v.docs.forEach(I=>{const C=m(I.data());C&&T.add(C)});const b=et(Ce,`users/${n}/cycles/${e}/entries`),P=(await wt(b)).docs.map(I=>{const C=I.data(),O=h(C);if(T.has(O)){const L=new Error("Entry date conflicts with previous cycle");throw L.code="undo-date-conflict",L.conflictDate=O,L}return T.add(O),{ref:I.ref,id:I.id,data:C,isoDate:O}});let j=mo(Ce),M=0;const D=async()=>{M>=400&&(await j.commit(),j=mo(Ce),M=0)},B=async(I,C)=>{await D(),j.set(I,C),M+=1},X=async I=>{await D(),j.delete(I),M+=1},re=async(I,C)=>{await D(),j.update(I,C),M+=1};for(const I of P){const C=xt(Ce,`users/${n}/cycles/${d.id}/entries/${I.id}`),O=Hd(I.isoDate,d.start_date);await B(C,{...I.data,cycle_day:O});const L=et(Ce,`users/${n}/cycles/${e}/entries/${I.id}/measurements`),U=await wt(L);for(const V of U.docs){const de=xt(Ce,`users/${n}/cycles/${d.id}/entries/${I.id}/measurements/${V.id}`);await B(de,V.data()),await X(V.ref)}await X(I.ref)}const A=xt(Ce,`users/${n}/cycles/${d.id}`);await re(A,{end_date:null}),await X(t),M>0&&await j.commit()},c3="RNFApp",d3=1,xp="cycleData",I_="cycle-data:",S_=()=>typeof indexedDB<"u",P_=()=>typeof localStorage<"u",h3=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),f3=()=>new Promise((n,e)=>{const t=indexedDB.open(c3,d3);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(xp)||r.createObjectStore(xp)},t.onsuccess=()=>{n(t.result)},t.onerror=()=>{e(t.error)}}),C_=async(n,e)=>{const t=await f3();return new Promise((r,i)=>{const s=t.transaction(xp,n),a=s.objectStore(xp),u=e(a);s.oncomplete=()=>{t.close(),r(u?.result)},s.onerror=()=>{t.close(),i(s.error??u?.error)}})},VS=async n=>{if(!n)return null;if(S_())try{return await C_("readonly",t=>t.get(n))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(P_())try{const e=localStorage.getItem(`${I_}${n}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},p3=async(n,e)=>{if(!n)return;const t=h3(e);if(S_())try{await C_("readwrite",r=>r.put(t,n));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(P_())try{localStorage.setItem(`${I_}${n}`,JSON.stringify(t))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},m3=async n=>{if(n){if(S_())try{await C_("readwrite",e=>e.delete(n))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(P_())try{localStorage.removeItem(`${I_}${n}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}};const g3="type.googleapis.com/google.protobuf.Int64Value",y3="type.googleapis.com/google.protobuf.UInt64Value";function c1(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Rp(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Rp(e));if(typeof n=="function"||typeof n=="object")return c1(n,e=>Rp(e));throw new Error("Data cannot be encoded in JSON: "+n)}function wu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case g3:case y3:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>wu(e)):typeof n=="function"||typeof n=="object"?c1(n,e=>wu(e)):n}const A_="functions";const MS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gn extends Ii{constructor(e,t,r){super(`${A_}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Gn.prototype)}}function v3(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function kp(n,e){let t=v3(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!MS[a])return new Gn("internal","internal");t=MS[a],r=a}const u=s.message;typeof u=="string"&&(r=u),i=s.details,i!==void 0&&(i=wu(i))}}catch{}return t==="ok"?null:new Gn(t,r,i)}class w3{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const Ov="us-central1",_3=/^data: (.*?)(?:\n|$)/;function E3(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Gn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class T3{constructor(e,t,r,i,s=Ov,a=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new w3(e,t,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Ov}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function I3(n,e,t){const r=_o(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(hw(n.emulatorOrigin+"/backends"),fw("Functions",!0))}function S3(n,e,t){const r=i=>C3(n,e,i,{});return r.stream=(i,s)=>b3(n,e,i,s),r}function d1(n){return n.emulatorOrigin&&_o(n.emulatorOrigin)?"include":void 0}async function P3(n,e,t,r,i){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:d1(i)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function h1(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function C3(n,e,t,r){const i=n._url(e);return A3(n,i,t,r)}async function A3(n,e,t,r){t=Rp(t);const i={data:t},s=await h1(n,r),a=r.timeout||7e4,u=E3(a),d=await Promise.race([P3(e,i,s,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!d)throw new Gn("cancelled","Firebase Functions instance was deleted.");const h=kp(d.status,d.json);if(h)throw h;if(!d.json)throw new Gn("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Gn("internal","Response is missing data field.");return{data:wu(m)}}function b3(n,e,t,r){const i=n._url(e);return x3(n,i,t,r||{})}async function x3(n,e,t,r){t=Rp(t);const i={data:t},s=await h1(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r?.signal,credentials:d1(n)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const b=new Gn("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const T=kp(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let u,d;const h=new Promise((v,T)=>{u=v,d=T});r?.signal?.addEventListener("abort",()=>{const v=new Gn("cancelled","Request was cancelled.");d(v)});const m=a.body.getReader(),g=R3(m,u,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:T,done:b}=await v.read();return{value:T,done:b}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:h}}function R3(n,e,t,r){const i=(a,u)=>{const d=a.match(_3);if(!d)return;const h=d[1];try{const m=JSON.parse(h);if("result"in m){e(wu(m.result));return}if("message"in m){u.enqueue(wu(m.message));return}if("error"in m){const g=kp(0,m);u.error(g),t(g);return}}catch(m){if(m instanceof Gn){u.error(m),t(m);return}}},s=new TextDecoder;return new ReadableStream({start(a){let u="";return d();async function d(){if(r?.aborted){const h=new Gn("cancelled","Request was cancelled");return a.error(h),t(h),Promise.resolve()}try{const{value:h,done:m}=await n.read();if(m){u.trim()&&i(u.trim(),a),a.close();return}if(r?.aborted){const v=new Gn("cancelled","Request was cancelled");a.error(v),t(v),await n.cancel();return}u+=s.decode(h,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&i(v.trim(),a);return d()}catch(h){const m=h instanceof Gn?h:kp(0,null);a.error(m),t(m)}}},cancel(){return n.cancel()}})}const OS="@firebase/functions",LS="0.13.1";const k3="auth-internal",D3="app-check-internal",N3="messaging-internal";function V3(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider(k3),a=t.getProvider(N3),u=t.getProvider(D3);return new T3(i,s,a,u,r)};Ia(new lo(A_,e,"PUBLIC").setMultipleInstances(!0)),pi(OS,LS,n),pi(OS,LS,"esm2020")}function M3(n=gw(),e=Ov){const r=Hp(mt(n),A_).getImmediate({identifier:e}),i=vC("functions");return i&&O3(r,...i),r}function O3(n,e,t){I3(mt(n),e,t)}function L3(n,e,t){return S3(mt(n),e)}V3();const F3=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=r,t.setPlatform=i,t},U3=n=>n.CapacitorPlatforms=F3(n),f1=U3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});f1.addPlatform;f1.setPlatform;var _u;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(_u||(_u={}));class xy extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const j3=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},B3=n=>{var e,t,r,i,s;const a=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},d=u.Plugins=u.Plugins||{},h=n.CapacitorPlatforms,m=()=>a!==null?a.name:j3(n),g=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||m,v=()=>g()!=="web",T=((t=h?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||v,b=A=>{const I=B.get(A);return!!(I?.platforms.has(g())||j(A))},x=((r=h?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||b,P=A=>{var I;return(I=u.PluginHeaders)===null||I===void 0?void 0:I.find(C=>C.name===A)},j=((i=h?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||P,M=A=>n.console.error(A),D=(A,I,C)=>Promise.reject(`${C} does not have an implementation of "${I}".`),B=new Map,X=(A,I={})=>{const C=B.get(A);if(C)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),C.proxy;const O=g(),L=j(A);let U;const V=async()=>(!U&&O in I?U=typeof I[O]=="function"?U=await I[O]():U=I[O]:a!==null&&!U&&"web"in I&&(U=typeof I.web=="function"?U=await I.web():U=I.web),U),de=(J,N)=>{var z,se;if(L){const ae=L?.methods.find(oe=>N===oe.name);if(ae)return ae.rtype==="promise"?oe=>u.nativePromise(A,N.toString(),oe):(oe,pe)=>u.nativeCallback(A,N.toString(),oe,pe);if(J)return(z=J[N])===null||z===void 0?void 0:z.bind(J)}else{if(J)return(se=J[N])===null||se===void 0?void 0:se.bind(J);throw new xy(`"${A}" plugin is not implemented on ${O}`,_u.Unimplemented)}},xe=J=>{let N;const z=(...se)=>{const ae=V().then(oe=>{const pe=de(oe,J);if(pe){const De=pe(...se);return N=De?.remove,De}else throw new xy(`"${A}.${J}()" is not implemented on ${O}`,_u.Unimplemented)});return J==="addListener"&&(ae.remove=async()=>N()),ae};return z.toString=()=>`${J.toString()}() { [capacitor code] }`,Object.defineProperty(z,"name",{value:J,writable:!1,configurable:!1}),z},Se=xe("addListener"),ee=xe("removeListener"),H=(J,N)=>{const z=Se({eventName:J},N),se=async()=>{const oe=await z;ee({eventName:J,callbackId:oe},N)},ae=new Promise(oe=>z.then(()=>oe({remove:se})));return ae.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await se()},ae},ne=new Proxy({},{get(J,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?H:Se;case"removeListener":return ee;default:return xe(N)}}});return d[A]=ne,B.set(A,{name:A,proxy:ne,platforms:new Set([...Object.keys(I),...L?[O]:[]])}),ne},re=((s=h?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||X;return u.convertFileSrc||(u.convertFileSrc=A=>A),u.getPlatform=g,u.handleError=M,u.isNativePlatform=T,u.isPluginAvailable=x,u.pluginMethodNoop=D,u.registerPlugin=re,u.Exception=xy,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},$3=n=>n.Capacitor=B3(n),go=$3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),p1=go.registerPlugin;go.Plugins;class m1{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new go.Exception(e,_u.Unimplemented)}unavailable(e="not available"){return new go.Exception(e,_u.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const FS=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),US=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class z3 extends m1{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=US(i).trim(),s=US(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=FS(e.key),r=FS(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}p1("CapacitorCookies",{web:()=>new z3});const W3=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),H3=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=n[e[a]],i),{})},q3=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[s,a]=i;let u,d;return Array.isArray(a)?(d="",a.forEach(h=>{u=e?encodeURIComponent(h):h,d+=`${s}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(a):a,d=`${s}=${u}`),`${r}&${d}`},"").substr(1):null,G3=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=H3(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.data||{}))s.set(a,u);t.body=s.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{s.append(d,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class K3 extends m1{async request(e){const t=G3(e,e.webFetchExtra),r=q3(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let d,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),d=await W3(h);break;case"json":d=await s.json();break;default:d=await s.text()}const m={};return s.headers.forEach((g,v)=>{m[v]=g}),{data:d,headers:m,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}p1("CapacitorHttp",{web:()=>new K3});const Q3=n=>{if(!n)return null;const e=n.unit,t=Number(n.value);return Number.isFinite(t)?e==="fahrenheit"?(t-32)/1.8:t:null},Hf=["BasalBodyTemperature"],Y3=["BasalBodyTemperature","READ_BASAL_BODY_TEMPERATURE","android.permission.health.READ_BASAL_BODY_TEMPERATURE"],jS=n=>String(n||"").toLowerCase().replace(/^android\.permission\.health\./,"").replace(/^read_/,"").replace(/[^a-z0-9]/g,""),X3=n=>{try{const e=new WeakSet;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r},2)}catch{try{return String(n)}catch{return"[Unstringifiable]"}}},J3=(n,e)=>{const t=e&&typeof e=="object"?Object.keys(e):[];console.warn(`${n} keys=${t.join(",")}
${X3(e)}`)},b_=n=>typeof n=="string"?n:n?.availability??n?.value??n?.status,Lv=n=>{if(n?.allPermissionsGranted===!0)return!0;const e=n?.permissionResults,t=n?.permissions?.read??n?.readPermissions??e?.read??(Array.isArray(e)?e:null)??n?.read,r=Y3.map(jS),i=a=>r.includes(jS(a));if(n===!0||n?.hasAllPermissions===!0)return!0;const s=n?.grantedPermissions??n?.permissionsGranted;return Array.isArray(s)&&s.every(a=>typeof a=="string")?s.some(i):Array.isArray(t)&&t.every(a=>typeof a=="string")?t.some(i):Array.isArray(t)&&t.every(a=>typeof a=="boolean")?t.every(Boolean):Array.isArray(t)&&t.every(a=>a&&typeof a=="object")?t.some(a=>{const u=a.permission??a.name??a.type??a.recordType??a.value,d=a.granted??a.allowed??a.isGranted??a.status;return i(u)&&!!d}):t&&typeof t=="object"?Object.entries(t).some(([a,u])=>{const d=typeof u=="boolean"?u:!!(u?.granted??u?.allowed??u?.value??u?.status);return i(a)&&d}):(J3("[HealthConnect] Unexpected permission response shape",n),!1)};async function Z3(){if(!go.isNativePlatform())return{isAvailable:!1,hasPermissions:!1,availability:"NotNative"};const{HealthConnect:n}=await Ti(async()=>{const{HealthConnect:i}=await import("./index-B2Cyl9Oo.js");return{HealthConnect:i}},[]),e=await n.checkAvailability(),t=b_(e);if(t!=="Available")return{isAvailable:!1,hasPermissions:!1,availability:t};const r=await n.checkHealthPermissions({read:Hf,write:[]});return{isAvailable:!0,hasPermissions:Lv(r),availability:t}}async function e6(){const{HealthConnect:n}=await Ti(async()=>{const{HealthConnect:s}=await import("./index-B2Cyl9Oo.js");return{HealthConnect:s}},[]),e=await n.checkAvailability(),t=b_(e);if(t!=="Available")throw new Error(`HEALTH_CONNECT_${t||"Unknown"}`);const r=await n.checkHealthPermissions({read:Hf,write:[]});if(Lv(r))return!0;await n.requestHealthPermissions({read:Hf,write:[]});const i=await n.checkHealthPermissions({read:Hf,write:[]});return Lv(i)}async function t6({startDate:n}){if(!go.isNativePlatform())throw new Error("HEALTH_CONNECT_ONLY_IN_APP");const{HealthConnect:e}=await Ti(async()=>{const{HealthConnect:m}=await import("./index-B2Cyl9Oo.js");return{HealthConnect:m}},[]),t=await e.checkAvailability(),r=b_(t);if(r!=="Available")throw new Error(`HEALTH_CONNECT_${r||"Unknown"}`);if(!await e6())throw new Error("HEALTH_CONNECT_PERMISSION_DENIED");const s=_e(n);if(!n||Number.isNaN(s?.getTime?.()))throw new Error("HEALTH_CONNECT_INVALID_START_DATE");const a=ot(s),u=new Date;return((await e.readRecords({type:"BasalBodyTemperature",timeRangeFilter:{type:"between",startTime:a,endTime:u},ascendingOrder:!0,pageSize:500}))?.records||[]).map(m=>{const g=Q3(m.temperature);if(g==null)return null;const v=new Date(m.time);return{externalId:m?.metadata?.id||null,dataOrigin:m?.metadata?.dataOrigin||null,timestampMs:v.getTime(),timestamp:it(v,"yyyy-MM-dd'T'HH:mm:ssXXX"),localDate:it(v,"yyyy-MM-dd"),time:it(v,"HH:mm"),temperatureC:Number(g.toFixed(2))}}).filter(Boolean)}const g1=k.createContext(null),na={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1},Ry=(n,e)=>{if(!e)return n;const t=ot(_e(e));return n.filter(r=>_e(r.isoDate)<=t)},ky=(n,e)=>{if(!e)return n;const t=ot(_e(e));return n.filter(r=>_e(r.isoDate)>=t)},wf=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},n6=n=>{if(!n)return!1;const e=n.temperature,t=n.temperature_corrected,r=e==null?"":String(e).trim(),i=t==null?"":String(t).trim();return r!==""||i!==""},BS=n=>n?typeof n=="string"?it(ot(_e(n)),"yyyy-MM-dd"):typeof n.toDate=="function"?it(ot(n.toDate()),"yyyy-MM-dd"):it(ot(new Date(n)),"yyyy-MM-dd"):null,Dy=(n,e)=>{const t=BS(n),r=BS(e);return t&&r&&_e(r)<_e(t)?{startDate:r,endDate:t}:{startDate:t,endDate:r}},r6=({payload:n,entryId:e,isoDate:t,cycleStartDate:r,existingEntry:i})=>{const s={id:e,iso_date:t,timestamp:n.timestamp,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation??null,mucus_appearance:n.mucus_appearance??null,fertility_symbol:n.fertility_symbol??null,observations:n.observations??null,had_relations:n.had_relations??!1,ignored:n.ignored??!1,peak_marker:n.peak_marker??null,measurements:n.measurements??(Array.isArray(i?.measurements)?i.measurements:[])},a=r?Wf([s],r):[];return a.length?{...i,...a[0],measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}:{...i,...s,isoDate:t,measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}},i6=n=>[...n].sort((e,t)=>{const r=e.timestamp?_e(e.timestamp):e.isoDate?_e(e.isoDate):0,i=t.timestamp?_e(t.timestamp):t.isoDate?_e(t.isoDate):0;return r>i?1:r<i?-1:0}),s6=({children:n})=>{const{user:e}=_m(),{toast:t}=y_(),[r,i]=k.useState(na),[s,a]=k.useState([]),[u,d]=k.useState(!0),h=k.useRef(!1),m=k.useRef(null),g=k.useCallback(()=>{i(na),a([]),d(!1),h.current=!1},[]),v=k.useCallback(async({silent:ee=!1}={})=>{if(!e?.uid){const N=m.current;m.current=null,N&&m3(N).catch(z=>console.error("Failed to clear cached cycle data on sign-out.",z)),g();return}m.current=e.uid;let H=!1;if(!h.current)try{const N=await VS(e.uid);N&&(i(N.currentCycle??na),a(N.archivedCycles??[]),h.current=!0,H=!0,ee||d(!1))}catch(N){console.error("Failed to hydrate cycle data from cache.",N)}const ne=!ee&&!H&&!h.current;if(ne&&d(!0),typeof navigator<"u"&&navigator.onLine===!1&&(H||h.current)){ee||d(!1);return}try{const N=await e3(e.uid);let z=na;if(N){const{startDate:oe,endDate:pe}=Dy(N.startDate,N.endDate),De=Wf(N.data,oe),Le=ky(De,oe),$e=Ry(Le,pe);z={...N,startDate:oe,endDate:pe,data:$e}}const ae=(await t3(e.uid,N?N.startDate:null)).map(oe=>{const{startDate:pe,endDate:De}=Dy(oe.startDate,oe.endDate),Le=Wf(oe.data||[],pe),$e=ky(Le,pe),ut=Ry($e,De);return{...oe,startDate:pe??it(ot(new Date),"yyyy-MM-dd"),endDate:De,needsCompletion:oe.needsCompletion,data:ut}});i(z),a(ae),await p3(e.uid,{currentCycle:z,archivedCycles:ae}),h.current=!0}catch(N){if(console.error("Error in loadCycleData:",N),N.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!H)try{const z=await VS(e.uid);z?(i(z.currentCycle??na),a(z.archivedCycles??[]),h.current=!0):(i(na),a([]),h.current=!1)}catch(z){console.error("Failed to recover cycle data from cache after error.",z),i(na),a([]),h.current=!1}}finally{ne&&d(!1)}},[e,g]);k.useEffect(()=>{if(!e?.uid){g();return}v().catch(ee=>console.error("Initial cycle data load failed:",ee))},[e?.uid,v,g]);const T=k.useCallback((ee,H,ne,J,{remove:N=!1}={})=>{const z=se=>{if(!se||se.id!==ee)return se;const ae=Array.isArray(se.data)?se.data:[];if(N)return{...se,data:ae.filter(Le=>Le.id!==H)};const oe=ae.find(Le=>Le.id===H)||null,pe=r6({payload:ne,entryId:H,isoDate:J,cycleStartDate:se.startDate,existingEntry:oe}),De=oe?ae.map(Le=>Le.id===H?pe:Le):i6([...ae,pe]);return{...se,data:De}};i(se=>z(se)),a(se=>se.map(ae=>z(ae)))},[]),b=k.useCallback((ee,H,ne)=>{const J=N=>{if(!N||N.id!==ee)return N;const se=(Array.isArray(N.data)?N.data:[]).map(ae=>ae.id===H?{...ae,measurements:ne,measurementsLoaded:!0}:ae);return{...N,data:se}};i(N=>J(N)),a(N=>N.map(z=>J(z)))},[]),x=k.useCallback(async(ee,H,ne=null)=>{const J=ne??r.id;if(!e?.uid||!J)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");d(!0);try{const N=J===r.id?r:s.find(Je=>Je.id===J);let z=H;!z&&N&&(z=N.data.find(Je=>Je.isoDate===ee.isoDate)),z&&String(z.id).startsWith("placeholder-")&&(z=null);const se=N?.data?.find(Je=>Je?.peak_marker==="peak")||null;ee.peak_marker==="peak"&&se&&se.id!==z?.id&&await Ay(e.uid,J,se.id,{peak_marker:null});const ae=Array.isArray(ee.measurements)?ee.measurements:[],oe=ae.filter(n6),pe=oe.find(Je=>Je?.selected)||oe[0]||null,De=ae.find(Je=>Je?.time&&String(Je.time).trim()!=="")||pe,Le=(()=>{if(De?.time&&String(De.time).trim()!=="")return De.time;if(z?.timestamp)try{return it(_e(z.timestamp),"HH:mm")}catch{return it(new Date,"HH:mm")}return it(new Date,"HH:mm")})(),$e=LB(`${ee.isoDate} ${Le}`,"yyyy-MM-dd HH:mm",new Date),ut=wf(pe?.temperature),$t=wf(pe?.temperature_corrected),Ci=!!pe?.use_corrected&&$t!==null,Fr=Ci?$t:ut,Ai=Object.prototype.hasOwnProperty.call(ee,"peak_marker"),za=oe.some(Je=>{if(!Je)return!1;const Wa=wf(Je.temperature),zr=wf(Je.temperature_corrected);return Wa!==null||zr!==null}),Ur=Je=>Je==null?"":String(Je).trim(),bi=Ur(ee.mucusSensation??ee.mucus_sensation??""),Ao=Ur(ee.mucusAppearance??ee.mucus_appearance??""),Ot=Ur(ee.observations??""),yt=ee.fertility_symbol??ee.fertilitySymbol??null,Qn=yt!=null&&yt!==""&&yt!=="none",ds=!!(ee.had_relations??ee.hadRelations??!1),hs=ee.peak_marker==="peak",bo=!za&&bi===""&&Ao===""&&!Qn&&Ot===""&&!ds&&!hs,jr=!!z?.measurementsLoaded&&Array.isArray(z?.measurements)&&z.measurements.length>=2,xo=oe.length>=2,fs=jr&&oe.length<2,Br=Array.isArray(ee.measurements)?xo?oe:fs?[]:void 0:void 0,$r={cycle_id:J,user_id:e.uid,timestamp:it($e,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:Br,mucus_sensation:ee.mucusSensation||null,mucus_appearance:ee.mucusAppearance||null,fertility_symbol:ee.fertility_symbol==="none"?null:ee.fertility_symbol,observations:ee.observations||null,had_relations:ds,ignored:z?ee.ignored??z.ignored:ee.ignored||!1,peak_marker:Ai?ee.peak_marker??null:z?.peak_marker??null,temperature_raw:ut,temperature_corrected:$t,use_corrected:Ci,temperature_chart:Fr};let Tr=z?.id??null;if(z){const Je=Ai&&z?.peak_marker==="peak"&&!hs;bo&&Je?(await DS(e.uid,J,z.id),T(J,z.id,$r,ee.isoDate,{remove:!0})):(await Ay(e.uid,J,z.id,$r),T(J,z.id,$r,ee.isoDate))}else{if(bo)return;Tr=(await i3($r))?.id??null,Tr&&T(J,Tr,$r,ee.isoDate)}v({silent:!0}).catch(Je=>console.error("Background cycle data refresh failed after save:",Je))}catch(N){throw console.error("Error adding/updating data point:",N),N}finally{d(!1)}},[e,r,s,v,T]),P=k.useCallback(async(ee,H)=>{if(!e?.uid||!ee||!H)return[];const ne=await s3(e.uid,ee,H);return b(ee,H,ne),ne},[e,b]),j=k.useCallback(async(ee,H=null)=>{const ne=H??r.id;if(!(!e?.uid||!ne)){d(!0);try{await DS(e.uid,ne,ee),await v({silent:!0})}catch(J){throw console.error("Error deleting record:",J),J}finally{d(!1)}}},[e,r.id,v]),M=k.useCallback(async(ee,H)=>{if(!e?.uid)return;const ne=ee===r.id,J=ne?r:s.find(ae=>ae.id===ee);if(!J)throw new Error("Cycle not found for toggling ignore state.");const N=J.data?.find(ae=>ae.id===H);if(!N)throw new Error("Record not found for toggling ignore state.");const z=!N.ignored,se=ae=>{ne?i(oe=>oe.id!==ee?oe:{...oe,data:oe.data.map(pe=>pe.id===H?{...pe,ignored:ae}:pe)}):a(oe=>oe.map(pe=>pe.id!==ee?pe:{...pe,data:(pe.data||[]).map(De=>De.id===H?{...De,ignored:ae}:De)}))};try{se(z),await Ay(e.uid,ee,H,{ignored:z}),v({silent:!0}).catch(ae=>console.error("Background cycle data refresh failed after toggling ignore state:",ae))}catch(ae){throw console.error("Error toggling ignore state:",ae),se(!z),ae}},[e,r,s,v]),D=k.useCallback(async(ee,H)=>{if(!e?.uid||!ee)return;const ne=r,J=s,N=z=>!z||z.id!==ee||z.ignoredForAutoCalculations===H?z:{...z,ignoredForAutoCalculations:H};i(z=>N(z)),a(z=>z.map(se=>N(se)));try{await o3(e.uid,ee,H),v({silent:!0}).catch(z=>console.error("Background cycle data refresh failed after updating ignore configuration:",z))}catch(z){throw console.error("Error updating cycle ignore configuration:",z),i(ne),a(J),t({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),z}},[e,r,s,v,t]),B=k.useCallback(async ee=>{if(e?.uid){d(!0);try{const H=ot(ee?_e(ee):new Date);if(r.id&&ee){const N=ot(_e(r.startDate));if(H<=N){t({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),d(!1);return}}const ne=it(H,"yyyy-MM-dd"),J=await r3(e.uid,r.id,ne);i({id:J.id,startDate:J.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await v({silent:!0})}catch(H){console.error("Error starting new cycle:",H);const ne=N=>{try{return it(_e(N),"dd/MM/yyyy")}catch{return N}},J=(()=>{if(H?.code==="cycle-overlap"){const N=H?.conflictCycle;if(!N)return"Las fechas coinciden con otro ciclo.";const z=N.startDate?ne(N.startDate):"sin fecha de inicio",se=N.endDate?ne(N.endDate):"en curso";return`Las fechas coinciden con el ciclo del ${z} al ${se}.`}return H?.code==="split-date-conflict"?`No se pudo dividir el ciclo porque el ciclo nuevo ya tiene ms de un registro en ${H?.conflictDate?ne(H.conflictDate):"esa fecha"}. Esto suele venir de datos duplicados (por ejemplo, creados desde otra sesin o por un estado inconsistente).`:H?.code==="split-invalid-entry"?"No se pudo dividir el ciclo porque hay registros con fecha invlida en el ciclo anterior.":H?.code==="split-invalid-date"?"La fecha elegida para iniciar el ciclo no es vlida.":"No se pudo iniciar el nuevo ciclo."})();throw t({title:"Error",description:J,variant:"destructive"}),H}finally{d(!1)}}},[e,r,v,t]),X=k.useCallback(ee=>{if(!ee)return"Las fechas coinciden con otro ciclo.";const{startDate:H,endDate:ne}=ee,J=se=>{if(!se)return null;try{return it(_e(se),"dd/MM/yyyy")}catch(ae){return console.error("Failed to format overlap date",ae),se}},N=J(H)??"sin fecha de inicio",z=ne?J(ne):"en curso";return`Las fechas coinciden con el ciclo del ${N} al ${z}.`},[]),re=k.useCallback(async(ee,H)=>{if(e?.uid){if(!H){t({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}d(!0);try{const ne=await createNewCycleDB(e.uid,ee);try{await by(ne.id,e.uid,void 0,H)}catch(J){try{await NS(e.uid,ne.id)}catch(N){console.error("Failed to clean up cycle after overlap error:",N)}throw J}await v({silent:!0})}catch(ne){console.error("Error adding archived cycle:",ne);const J=ne.code==="cycle-overlap"?X(ne.conflictCycle):"No se pudo crear el ciclo.";throw t({title:"Error",description:J,variant:"destructive"}),ne}finally{d(!1)}}},[e,v,t,X]),A=k.useCallback(async ee=>{if(e?.uid){d(!0);try{await NS(e.uid,ee),await v({silent:!0})}catch(H){throw console.error("Error deleting cycle:",H),t({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),H}finally{d(!1)}}},[e,v,t]),I=k.useCallback(async ee=>{if(!(!e?.uid||!ee)){d(!0);try{await u3(e.uid,ee),await v({silent:!0})}catch(H){console.error("Error undoing current cycle:",H);const ne=(()=>{switch(H.code){case"no-previous-cycle":return"No hay un ciclo previo compatible para deshacer.";case"undo-not-current":return"Solo se puede deshacer el ciclo actual.";case"undo-invalid-entry":return"Hay registros con fecha invlida en el ciclo actual.";case"undo-date-conflict":if(typeof H?.conflictDate=="string")try{const J=_e(H.conflictDate);if(Mn(J))return`El da ${it(J,"dd/MM")} tiene un registro en el ciclo anterior.`}catch{}return"El ciclo anterior ya tiene registros en una de las fechas.";default:return"No se pudo deshacer el ciclo."}})();throw t({title:"Error",description:ne,variant:"destructive"}),H}finally{d(!1)}}},[e,v,t]),C=k.useCallback(async(ee,H,ne)=>{if(!e?.uid)return null;try{return(await by(ee,e.uid,H,ne,!0)).overlap}catch(J){return console.error("Error checking cycle overlap:",J),null}},[e]),O=k.useCallback(async(ee,H,ne)=>{if(!e?.uid)return;const J=r?.id===ee?r:s.find(oe=>oe.id===ee),N=J?.startDate??null,z=J?.endDate??null,se=H!==void 0&&H!==N,ae=ne!==void 0&&ne!==z;d(!0);try{if(se&&H&&await l3(e.uid,ee,H),ae&&ne){const oe=se?H:N;await a3(e.uid,ee,ne,oe)}(se||ae)&&await by(ee,e.uid,se?H:void 0,ae?ne:void 0),await v({silent:!0})}catch(oe){console.error("Error updating cycle dates:",oe);const pe=oe.code==="cycle-overlap"?X(oe.conflictCycle):"No se pudieron actualizar las fechas.";throw t({title:"Error",description:pe,variant:"destructive"}),oe}finally{d(!1)}},[e,r,s,v,t,X]),L=k.useCallback((ee,H)=>O(ee,H,void 0),[O]),U=k.useCallback((ee,H,ne)=>O(ee,ne,H),[O]),V=k.useCallback(async ee=>{if(!e?.uid)return null;d(!0);try{const H=await n3(e.uid,ee);if(!H)return null;const{startDate:ne,endDate:J}=Dy(H.startDate,H.endDate),N=Wf(H.data||[],ne),z=ky(N,ne),se=Ry(z,J);return{...H,startDate:ne??it(ot(new Date),"yyyy-MM-dd"),endDate:J,data:se}}catch(H){return console.error("Error fetching cycle by ID:",H),null}finally{d(!1)}},[e]),de=k.useCallback(({silent:ee=!0}={})=>v({silent:ee}),[v]),xe=k.useCallback(async()=>{if(!e?.uid)throw new Error("NO_USER");if(!r?.id||!r?.startDate)throw new Error("NO_CURRENT_CYCLE");d(!0);try{const ee=await t6({startDate:r.startDate});if(!ee.length){t({title:"Sin registros",description:"No se encontraron temperaturas en Health Connect."});return}const H=M3(),N=(await L3(H,"syncBasalBodyTemperature")({cycleId:r.id,items:ee}))?.data;return t({title:"Sincronizacin hecha",description:`Nuevos: ${N?.createdMeasurements??0}  Ya estaban: ${N?.skippedMeasurements??0}  Rechazados: ${N?.rejected??0}`}),await v({silent:!0}),N}catch(ee){console.error(ee);const ne=(J=>typeof J=="string"?J:J?.message??JSON.stringify(J))(ee);return ne.includes("HEALTH_CONNECT_NotInstalled")||ne.includes("HEALTH_CONNECT_NotSupported")?(t({title:"Health Connect no disponible",description:"Instala Health Connect para poder sincronizar tus registros.",variant:"destructive"}),null):ne.includes("HEALTH_CONNECT_ONLY_IN_APP")?(t({title:"Solo en la app Android",description:"La sincronizacin est disponible nicamente en la app Android.",variant:"destructive"}),null):ne.includes("HEALTH_CONNECT_PERMISSION_DENIED")?(t({title:"Permisos requeridos",description:"Debes conceder permisos de Health Connect para sincronizar.",variant:"destructive"}),null):ne.includes("HEALTH_CONNECT_INVALID_START_DATE")?(t({title:"Fecha de inicio invlida",description:"No se pudo leer la fecha de inicio del ciclo actual.",variant:"destructive"}),null):(t({title:"Error al sincronizar",description:ne,variant:"destructive"}),null)}finally{d(!1)}},[e,r,v,t]),Se={currentCycle:r,archivedCycles:s,syncHealthConnectTemperatures:xe,addOrUpdateDataPoint:x,deleteRecord:j,startNewCycle:B,updateCycleDates:O,forceUpdateCycleStart:L,forceShiftNextCycleStart:U,checkCycleOverlap:C,isLoading:u,getCycleById:V,refreshData:de,toggleIgnoreRecord:M,setCycleIgnoreForAutoCalculations:D,addArchivedCycle:re,deleteCycle:A,getMeasurementsForEntry:P,undoCurrentCycle:I};return K.jsx(g1.Provider,{value:Se,children:n})},kH=()=>{const n=k.useContext(g1);if(!n)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return n},y1=k.createContext(null),o6=({children:n})=>{const[e,t]=k.useState(!1),[r,i]=k.useState(!1),[s,a]=k.useState(!1),u=go.isNativePlatform()&&go.getPlatform()==="android",d=k.useCallback(async()=>{if(!u)return t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"NotAndroid"};a(!0);try{const h=await Z3();return t(!!h.isAvailable),i(!!h.hasPermissions),h}catch(h){return console.error("Error al comprobar Health Connect",h),t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"Error"}}finally{a(!1)}},[u]);return k.useEffect(()=>{d()},[d]),K.jsx(y1.Provider,{value:{isAvailable:e,hasPermissions:r,refreshPermissions:d,isChecking:s,isAndroidApp:u},children:n})},DH=()=>{const n=k.useContext(y1);if(!n)throw new Error("useHealthConnect must be used within a HealthConnectProvider");return n},Fv=({children:n})=>K.jsxs("div",{className:"relative h-app overflow-hidden app-background",children:[K.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[K.jsx("div",{className:"wave wave--left-1"}),K.jsx("div",{className:"wave wave--left-2"}),K.jsx("div",{className:"wave wave--left-3"}),K.jsx("div",{className:"wave wave--right-1"}),K.jsx("div",{className:"wave wave--right-2"}),K.jsx("div",{className:"wave wave--right-3"})]}),K.jsx("div",{className:"pointer-events-none absolute inset-0",children:K.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),K.jsx("div",{className:"relative z-10 flex h-app flex-col",children:n})]});class a6 extends tn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}reset=()=>{this.setState({error:null})};componentDidCatch(e,t){console.error("RouteErrorBoundary caught an error",e,t)}render(){const{error:e}=this.state,{FallbackComponent:t,children:r}=this.props;return e?K.jsx(t,{error:e,resetErrorBoundary:this.reset}):r}}var l6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nu=(n,e)=>{const t=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...d},h)=>k.createElement("svg",{ref:h,...l6,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${u6(n)}`,...d},[...e.map(([m,g])=>k.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},c6=Nu("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),d6=Nu("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),h6=Nu("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),f6=Nu("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),p6=Nu("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),m6=Nu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),g6=()=>{const n=wo(),e=[{to:"/records",label:"Mis registros",icon:h6},{to:"/chart",label:"Grfica",icon:d6},{to:"/",label:"Ciclo actual",icon:f6},{to:"/archived-cycles",label:"Mis ciclos",icon:c6,isActive:t=>t.startsWith("/archived-cycles")||t.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:p6}];return K.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:K.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:t,label:r,icon:i,isActive:s})=>K.jsx("li",{className:"flex",children:K.jsx(GN,{to:t,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:a})=>{const d=(s?s(n.pathname):!1)||a;return K.jsxs(K.Fragment,{children:[K.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${d?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),K.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:K.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${d?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),K.jsx("span",{className:"sr-only",children:r})]})}})},t))})})},la=({children:n,hideBottomNav:e=!1})=>{const t=e?"relative z-10 flex-1 w-full overflow-y-auto":"relative z-10 flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return K.jsxs("div",{className:"relative flex min-h-app flex-col overflow-hidden",children:[K.jsx("main",{className:t,children:n}),!e&&K.jsx(g6,{})]})};function v1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=v1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function w1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=v1(n))&&(r&&(r+=" "),r+=e);return r}function y6(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=_1(e))&&(r&&(r+=" "),r+=t);return r}function _1(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=_1(n[r]))&&(t&&(t+=" "),t+=e);return t}var x_="-";function v6(n){var e=_6(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(u){var d=u.split(x_);return d[0]===""&&d.length!==1&&d.shift(),E1(d,e)||w6(u)}function a(u,d){var h=t[u]||[];return d&&i[u]?[].concat(h,i[u]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function E1(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?E1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(x_);return e.validators.find(function(a){var u=a.validator;return u(s)})?.classGroupId}}var $S=/^\[(.+)\]$/;function w6(n){if($S.test(n)){var e=$S.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function _6(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=T6(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],u=s[1];Uv(u,r,a,e)}),r}function Uv(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:zS(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(E6(i)){Uv(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var u=a[0],d=a[1];Uv(d,zS(e,u),t,r)})})}function zS(n,e){var t=n;return e.split(x_).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function E6(n){return n.isThemeGetter}function T6(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var d=u[0],h=u[1];return[e+d,h]})):a});return[r,s]}):n}function I6(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return i(a,u),u},set:function(a,u){t.has(a)?t.set(a,u):i(a,u)}}}var T1="!";function S6(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var u=[],d=0,h=0,m,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+i)===e)){u.push(a.slice(h,g)),h=g+i;continue}if(v==="/"){m=g;continue}}v==="["?d++:v==="]"&&d--}var T=u.length===0?a:a.substring(h),b=T.startsWith(T1),x=b?T.substring(1):T,P=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:P}}}function P6(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function C6(n){return{cache:I6(n.cacheSize),splitModifiers:S6(n),...v6(n)}}var A6=/\s+/;function b6(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(A6).map(function(a){var u=t(a),d=u.modifiers,h=u.hasImportantModifier,m=u.baseClassName,g=u.maybePostfixModifierPosition,v=r(g?m.substring(0,g):m),T=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(m),!v)return{isTailwindClass:!1,originalClassName:a};T=!1}var b=P6(d).join(":"),x=h?b+T1:b;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:a,hasPostfixModifier:T}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,m=u+d;return s.has(m)?!1:(s.add(m),i(d,h).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function x6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=u;function u(h){var m=e[0],g=e.slice(1),v=g.reduce(function(T,b){return b(T)},m());return r=C6(v),i=r.cache.get,s=r.cache.set,a=d,d(h)}function d(h){var m=i(h);if(m)return m;var g=b6(h,r);return s(h,g),g}return function(){return a(y6.apply(null,arguments))}}function Pt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var I1=/^\[(?:([a-z-]+):)?(.+)\]$/i,R6=/^\d+\/\d+$/,k6=new Set(["px","full","screen"]),D6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Dr(n){return ga(n)||k6.has(n)||R6.test(n)||jv(n)}function jv(n){return Ua(n,"length",j6)}function M6(n){return Ua(n,"size",S1)}function O6(n){return Ua(n,"position",S1)}function L6(n){return Ua(n,"url",B6)}function _f(n){return Ua(n,"number",ga)}function ga(n){return!Number.isNaN(Number(n))}function F6(n){return n.endsWith("%")&&ga(n.slice(0,-1))}function Nc(n){return WS(n)||Ua(n,"number",WS)}function He(n){return I1.test(n)}function Vc(){return!0}function Ws(n){return D6.test(n)}function U6(n){return Ua(n,"",$6)}function Ua(n,e,t){var r=I1.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function j6(n){return N6.test(n)}function S1(){return!1}function B6(n){return n.startsWith("url(")}function WS(n){return Number.isInteger(Number(n))}function $6(n){return V6.test(n)}function z6(){var n=Pt("colors"),e=Pt("spacing"),t=Pt("blur"),r=Pt("brightness"),i=Pt("borderColor"),s=Pt("borderRadius"),a=Pt("borderSpacing"),u=Pt("borderWidth"),d=Pt("contrast"),h=Pt("grayscale"),m=Pt("hueRotate"),g=Pt("invert"),v=Pt("gap"),T=Pt("gradientColorStops"),b=Pt("gradientColorStopPositions"),x=Pt("inset"),P=Pt("margin"),j=Pt("opacity"),M=Pt("padding"),D=Pt("saturate"),B=Pt("scale"),X=Pt("sepia"),re=Pt("skew"),A=Pt("space"),I=Pt("translate"),C=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},L=function(){return["auto",He,e]},U=function(){return[He,e]},V=function(){return["",Dr]},de=function(){return["auto",ga,He]},xe=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Se=function(){return["solid","dashed","dotted","double","none"]},ee=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},H=function(){return["start","end","center","between","around","evenly","stretch"]},ne=function(){return["","0",He]},J=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},N=function(){return[ga,_f]},z=function(){return[ga,He]};return{cacheSize:500,theme:{colors:[Vc],spacing:[Dr],blur:["none","",Ws,He],brightness:N(),borderColor:[n],borderRadius:["none","","full",Ws,He],borderSpacing:U(),borderWidth:V(),contrast:N(),grayscale:ne(),hueRotate:z(),invert:ne(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[F6,jv],inset:L(),margin:L(),opacity:N(),padding:U(),saturate:N(),scale:N(),sepia:ne(),skew:z(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[Ws]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(xe(),[He])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nc]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",Nc]}],"grid-cols":[{"grid-cols":[Vc]}],"col-start-end":[{col:["auto",{span:["full",Nc]},He]}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":[Vc]}],"row-start-end":[{row:["auto",{span:[Nc]},He]}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(H())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(H(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(H(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",He,e]}],"min-w":[{"min-w":["min","max","fit",He,Dr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ws]},Ws,He]}],h:[{h:[He,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",He,Dr]}],"max-h":[{"max-h":[He,e,"min","max","fit"]}],"font-size":[{text:["base",Ws,jv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_f]}],"font-family":[{font:[Vc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",ga,_f]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",He,Dr]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Se(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Dr]}],"underline-offset":[{"underline-offset":["auto",He,Dr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(xe(),[O6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",M6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[].concat(Se(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:Se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Se())}],"outline-offset":[{"outline-offset":[He,Dr]}],"outline-w":[{outline:[Dr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Dr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ws,U6]}],"shadow-color":[{shadow:[Vc]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":ee()}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Ws,He]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[D]}],sepia:[{sepia:[X]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[D]}],"backdrop-sepia":[{"backdrop-sepia":[X]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[B]}],"scale-x":[{"scale-x":[B]}],"scale-y":[{"scale-y":[B]}],rotate:[{rotate:[Nc,He]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[re]}],"skew-y":[{"skew-y":[re]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Dr,_f]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var W6=x6(z6);function ja(...n){return W6(w1(n))}function HS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Tm(...n){return e=>{let t=!1;const r=n.map(i=>{const s=HS(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():HS(n[i],null)}}}}function Oa(...n){return k.useCallback(Tm(...n),n)}var H6=Symbol.for("react.lazy"),Dp=ow[" use ".trim().toString()];function q6(n){return typeof n=="object"&&n!==null&&"then"in n}function P1(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===H6&&"_payload"in n&&q6(n._payload)}function G6(n){const e=Q6(n),t=k.forwardRef((r,i)=>{let{children:s,...a}=r;P1(s)&&typeof Dp=="function"&&(s=Dp(s._payload));const u=k.Children.toArray(s),d=u.find(X6);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var K6=G6("Slot");function Q6(n){const e=k.forwardRef((t,r)=>{let{children:i,...s}=t;if(P1(i)&&typeof Dp=="function"&&(i=Dp(i._payload)),k.isValidElement(i)){const a=Z6(i),u=J6(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Tm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Y6=Symbol("radix.slottable");function X6(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Y6}function J6(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function Z6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const qS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,GS=w1,C1=(n,e)=>t=>{var r;if(e?.variants==null)return GS(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const m=t?.[h],g=s?.[h];if(m===null)return null;const v=qS(m)||qS(g);return i[h][v]}),u=t&&Object.entries(t).reduce((h,m)=>{let[g,v]=m;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:g,className:v,...T}=m;return Object.entries(T).every(b=>{let[x,P]=b;return Array.isArray(P)?P.includes({...s,...u}[x]):{...s,...u}[x]===P})?[...h,g,v]:h},[]);return GS(n,a,d,t?.class,t?.className)},e5=C1("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Zl=tn.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?K6:"button";return K.jsx(a,{className:ja(e5({variant:e,size:t,className:n})),ref:s,...i})});Zl.displayName="Button";const t5=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i,A1=({error:n,resetErrorBoundary:e})=>{const t=dw(),{user:r}=_m(),i=typeof navigator<"u"&&navigator.onLine===!1,s=n?.message?n.message:String(n),a=t5.test(s),u=i&&a?"Pantalla no disponible sin conexin":"No se pudo cargar la pantalla",d=i&&a?"Esta pantalla no est disponible sin conexin porque no se haba cargado antes.":"Ocurri un error al cargar esta pantalla. Puedes volver atrs, ir al inicio o reintentar.",h=()=>{e(),t(-1)},m=()=>{e(),t("/")},g=K.jsx("div",{className:"flex min-h-app flex-col items-center justify-center px-6 py-10 text-center",children:K.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white/85 p-6 shadow-lg backdrop-blur-md",children:[K.jsx("h1",{className:"text-2xl font-semibold text-fertiliapp-fuerte",children:u}),K.jsx("p",{className:"text-sm text-gray-600",children:d}),K.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[K.jsx(Zl,{type:"button",onClick:h,children:"Volver"}),K.jsx(Zl,{type:"button",variant:"secondary",onClick:m,children:"Ir a inicio"}),K.jsx(Zl,{type:"button",variant:"outline",onClick:()=>window.location.reload(),children:"Reintentar"})]}),!i&&K.jsxs("details",{className:"text-left text-xs text-gray-500",children:[K.jsx("summary",{className:"cursor-pointer font-medium text-gray-600",children:"Detalles tcnicos"}),K.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words rounded-2xl bg-gray-100 p-3 text-[0.7rem] text-gray-600",children:s})]})]})});return r?K.jsx(la,{children:g}):K.jsx(Fv,{children:g})},KS=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i;function n5({children:n}){const[e,t]=k.useState(null);return k.useEffect(()=>{const r=s=>{const a=s?.reason?.message??String(s?.reason);KS.test(a)&&(s?.preventDefault?.(),t(s?.reason instanceof Error?s.reason:new Error(a)))},i=s=>{const a=s?.message??String(s?.error?.message??s?.error??"");KS.test(a)&&(s?.preventDefault?.(),t(s?.error instanceof Error?s.error:new Error(a)))};return window.addEventListener("unhandledrejection",r),window.addEventListener("error",i),()=>{window.removeEventListener("unhandledrejection",r),window.removeEventListener("error",i)}},[]),e?K.jsx(A1,{error:e,resetErrorBoundary:()=>t(null)}):n}function or(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function NH(n,e){const t=k.createContext(e),r=s=>{const{children:a,...u}=s,d=k.useMemo(()=>u,Object.values(u));return K.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function i(s){const a=k.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function b1(n,e=[]){let t=[];function r(s,a){const u=k.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:T,...b}=g,x=v?.[n]?.[d]||u,P=k.useMemo(()=>b,Object.values(b));return K.jsx(x.Provider,{value:P,children:T})};h.displayName=s+"Provider";function m(g,v){const T=v?.[n]?.[d]||u,b=k.useContext(T);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const i=()=>{const s=t.map(a=>k.createContext(a));return function(u){const d=u?.[n]||s;return k.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[r,r5(i,...e)]}function r5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((u,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...u,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function QS(n){const e=i5(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(o5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function i5(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=l5(i),u=a5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Tm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var s5=Symbol("radix.slottable");function o5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===s5}function a5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function l5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function u5(n){const e=n+"CollectionProvider",[t,r]=b1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:P,children:j}=x,M=tn.useRef(null),D=tn.useRef(new Map).current;return K.jsx(i,{scope:P,itemMap:D,collectionRef:M,children:j})};a.displayName=e;const u=n+"CollectionSlot",d=QS(u),h=tn.forwardRef((x,P)=>{const{scope:j,children:M}=x,D=s(u,j),B=Oa(P,D.collectionRef);return K.jsx(d,{ref:B,children:M})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=QS(m),T=tn.forwardRef((x,P)=>{const{scope:j,children:M,...D}=x,B=tn.useRef(null),X=Oa(P,B),re=s(m,j);return tn.useEffect(()=>(re.itemMap.set(B,{ref:B,...D}),()=>{re.itemMap.delete(B)})),K.jsx(v,{[g]:"",ref:X,children:M})});T.displayName=m;function b(x){const P=s(n+"CollectionConsumer",x);return tn.useCallback(()=>{const M=P.collectionRef.current;if(!M)return[];const D=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(P.itemMap.values()).sort((re,A)=>D.indexOf(re.ref.current)-D.indexOf(A.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:a,Slot:h,ItemSlot:T},b,r]}function c5(n){const e=d5(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(f5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function d5(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=m5(i),u=p5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Tm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var h5=Symbol("radix.slottable");function f5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===h5}function p5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function m5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var g5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pi=g5.reduce((n,e)=>{const t=c5(`Primitive.${e}`),r=k.forwardRef((i,s)=>{const{asChild:a,...u}=i,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),K.jsx(d,{...u,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function x1(n,e){n&&aw.flushSync(()=>n.dispatchEvent(e))}function La(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>e.current?.(...t),[])}function y5(n,e=globalThis?.document){const t=La(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var v5="DismissableLayer",Bv="dismissableLayer.update",w5="dismissableLayer.pointerDownOutside",_5="dismissableLayer.focusOutside",YS,R1=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),k1=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:u,...d}=n,h=k.useContext(R1),[m,g]=k.useState(null),v=m?.ownerDocument??globalThis?.document,[,T]=k.useState({}),b=Oa(e,A=>g(A)),x=Array.from(h.layers),[P]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(P),M=m?x.indexOf(m):-1,D=h.layersWithOutsidePointerEventsDisabled.size>0,B=M>=j,X=T5(A=>{const I=A.target,C=[...h.branches].some(O=>O.contains(I));!B||C||(i?.(A),a?.(A),A.defaultPrevented||u?.())},v),re=I5(A=>{const I=A.target;[...h.branches].some(O=>O.contains(I))||(s?.(A),a?.(A),A.defaultPrevented||u?.())},v);return y5(A=>{M===h.layers.size-1&&(r?.(A),!A.defaultPrevented&&u&&(A.preventDefault(),u()))},v),k.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(YS=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),XS(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=YS)}},[m,v,t,h]),k.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),XS())},[m,h]),k.useEffect(()=>{const A=()=>T({});return document.addEventListener(Bv,A),()=>document.removeEventListener(Bv,A)},[]),K.jsx(Pi.div,{...d,ref:b,style:{pointerEvents:D?B?"auto":"none":void 0,...n.style},onFocusCapture:or(n.onFocusCapture,re.onFocusCapture),onBlurCapture:or(n.onBlurCapture,re.onBlurCapture),onPointerDownCapture:or(n.onPointerDownCapture,X.onPointerDownCapture)})});k1.displayName=v5;var E5="DismissableLayerBranch",D1=k.forwardRef((n,e)=>{const t=k.useContext(R1),r=k.useRef(null),i=Oa(e,r);return k.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),K.jsx(Pi.div,{...n,ref:i})});D1.displayName=E5;function T5(n,e=globalThis?.document){const t=La(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=u=>{if(u.target&&!r.current){let d=function(){N1(w5,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function I5(n,e=globalThis?.document){const t=La(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&N1(_5,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function XS(){const n=new CustomEvent(Bv);document.dispatchEvent(n)}function N1(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?x1(i,s):i.dispatchEvent(s)}var S5=k1,P5=D1,Id=globalThis?.document?k.useLayoutEffect:()=>{},C5="Portal",V1=k.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=k.useState(!1);Id(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?HD.createPortal(K.jsx(Pi.div,{...r,ref:e}),a):null});V1.displayName=C5;function A5(n,e){return k.useReducer((t,r)=>e[t][r]??t,n)}var M1=n=>{const{present:e,children:t}=n,r=b5(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=Oa(r.ref,x5(i));return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};M1.displayName="Presence";function b5(n){const[e,t]=k.useState(),r=k.useRef(null),i=k.useRef(n),s=k.useRef("none"),a=n?"mounted":"unmounted",[u,d]=A5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const h=Ef(r.current);s.current=u==="mounted"?h:"none"},[u]),Id(()=>{const h=r.current,m=i.current;if(m!==n){const v=s.current,T=Ef(h);n?d("MOUNT"):T==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&v!==T?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Id(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=T=>{const x=Ef(r.current).includes(CSS.escape(T.animationName));if(T.target===e&&x&&(d("ANIMATION_END"),!i.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},v=T=>{T.target===e&&(s.current=Ef(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:k.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function Ef(n){return n?.animationName||"none"}function x5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var R5=ow[" useInsertionEffect ".trim().toString()]||Id;function k5({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=D5({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const m=k.useRef(n!==void 0);k.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=k.useCallback(m=>{if(u){const g=N5(m)?m(n):m;g!==n&&a.current?.(g)}else s(m)},[u,n,s,a]);return[d,h]}function D5({defaultProp:n,onChange:e}){const[t,r]=k.useState(n),i=k.useRef(t),s=k.useRef(e);return R5(()=>{s.current=e},[e]),k.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function N5(n){return typeof n=="function"}var V5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),M5="VisuallyHidden",R_=k.forwardRef((n,e)=>K.jsx(Pi.span,{...n,ref:e,style:{...V5,...n.style}}));R_.displayName=M5;var k_="ToastProvider",[D_,O5,L5]=u5("Toast"),[O1]=b1("Toast",[L5]),[F5,Im]=O1(k_),L1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=n,[u,d]=k.useState(null),[h,m]=k.useState(0),g=k.useRef(!1),v=k.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${k_}\`. Expected non-empty \`string\`.`),K.jsx(D_.Provider,{scope:e,children:K.jsx(F5,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:k.useCallback(()=>m(T=>T+1),[]),onToastRemove:k.useCallback(()=>m(T=>T-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:a})})};L1.displayName=k_;var F1="ToastViewport",U5=["F8"],$v="toast.viewportPause",zv="toast.viewportResume",U1=k.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=U5,label:i="Notifications ({hotkey})",...s}=n,a=Im(F1,t),u=O5(t),d=k.useRef(null),h=k.useRef(null),m=k.useRef(null),g=k.useRef(null),v=Oa(e,g,a.onViewportChange),T=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=a.toastCount>0;k.useEffect(()=>{const P=j=>{r.length!==0&&r.every(D=>j[D]||j.code===D)&&g.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),k.useEffect(()=>{const P=d.current,j=g.current;if(b&&P&&j){const M=()=>{if(!a.isClosePausedRef.current){const re=new CustomEvent($v);j.dispatchEvent(re),a.isClosePausedRef.current=!0}},D=()=>{if(a.isClosePausedRef.current){const re=new CustomEvent(zv);j.dispatchEvent(re),a.isClosePausedRef.current=!1}},B=re=>{!P.contains(re.relatedTarget)&&D()},X=()=>{P.contains(document.activeElement)||D()};return P.addEventListener("focusin",M),P.addEventListener("focusout",B),P.addEventListener("pointermove",M),P.addEventListener("pointerleave",X),window.addEventListener("blur",M),window.addEventListener("focus",D),()=>{P.removeEventListener("focusin",M),P.removeEventListener("focusout",B),P.removeEventListener("pointermove",M),P.removeEventListener("pointerleave",X),window.removeEventListener("blur",M),window.removeEventListener("focus",D)}}},[b,a.isClosePausedRef]);const x=k.useCallback(({tabbingDirection:P})=>{const M=u().map(D=>{const B=D.ref.current,X=[B,...J5(B)];return P==="forwards"?X:X.reverse()});return(P==="forwards"?M.reverse():M).flat()},[u]);return k.useEffect(()=>{const P=g.current;if(P){const j=M=>{const D=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!D){const X=document.activeElement,re=M.shiftKey;if(M.target===P&&re){h.current?.focus();return}const C=x({tabbingDirection:re?"backwards":"forwards"}),O=C.findIndex(L=>L===X);Ny(C.slice(O+1))?M.preventDefault():re?h.current?.focus():m.current?.focus()}};return P.addEventListener("keydown",j),()=>P.removeEventListener("keydown",j)}},[u,x]),K.jsxs(P5,{ref:d,role:"region","aria-label":i.replace("{hotkey}",T),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&K.jsx(Wv,{ref:h,onFocusFromOutsideViewport:()=>{const P=x({tabbingDirection:"forwards"});Ny(P)}}),K.jsx(D_.Slot,{scope:t,children:K.jsx(Pi.ol,{tabIndex:-1,...s,ref:v})}),b&&K.jsx(Wv,{ref:m,onFocusFromOutsideViewport:()=>{const P=x({tabbingDirection:"backwards"});Ny(P)}})]})});U1.displayName=F1;var j1="ToastFocusProxy",Wv=k.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Im(j1,t);return K.jsx(R_,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const u=a.relatedTarget;!s.viewport?.contains(u)&&r()}})});Wv.displayName=j1;var qd="Toast",j5="toast.swipeStart",B5="toast.swipeMove",$5="toast.swipeCancel",z5="toast.swipeEnd",B1=k.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...a}=n,[u,d]=k5({prop:r,defaultProp:i??!0,onChange:s,caller:qd});return K.jsx(M1,{present:t||u,children:K.jsx(q5,{open:u,...a,ref:e,onClose:()=>d(!1),onPause:La(n.onPause),onResume:La(n.onResume),onSwipeStart:or(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:or(n.onSwipeMove,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:or(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:or(n.onSwipeEnd,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),d(!1)})})})});B1.displayName=qd;var[W5,H5]=O1(qd,{onClose(){}}),q5=k.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:T,...b}=n,x=Im(qd,t),[P,j]=k.useState(null),M=Oa(e,de=>j(de)),D=k.useRef(null),B=k.useRef(null),X=i||x.duration,re=k.useRef(0),A=k.useRef(X),I=k.useRef(0),{onToastAdd:C,onToastRemove:O}=x,L=La(()=>{P?.contains(document.activeElement)&&x.viewport?.focus(),a()}),U=k.useCallback(de=>{!de||de===1/0||(window.clearTimeout(I.current),re.current=new Date().getTime(),I.current=window.setTimeout(L,de))},[L]);k.useEffect(()=>{const de=x.viewport;if(de){const xe=()=>{U(A.current),h?.()},Se=()=>{const ee=new Date().getTime()-re.current;A.current=A.current-ee,window.clearTimeout(I.current),d?.()};return de.addEventListener($v,Se),de.addEventListener(zv,xe),()=>{de.removeEventListener($v,Se),de.removeEventListener(zv,xe)}}},[x.viewport,X,d,h,U]),k.useEffect(()=>{s&&!x.isClosePausedRef.current&&U(X)},[s,X,x.isClosePausedRef,U]),k.useEffect(()=>(C(),()=>O()),[C,O]);const V=k.useMemo(()=>P?K1(P):null,[P]);return x.viewport?K.jsxs(K.Fragment,{children:[V&&K.jsx(G5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:V}),K.jsx(W5,{scope:t,onClose:L,children:aw.createPortal(K.jsx(D_.ItemSlot,{scope:t,children:K.jsx(S5,{asChild:!0,onEscapeKeyDown:or(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||L(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:K.jsx(Pi.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:M,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:or(n.onKeyDown,de=>{de.key==="Escape"&&(u?.(de.nativeEvent),de.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:or(n.onPointerDown,de=>{de.button===0&&(D.current={x:de.clientX,y:de.clientY})}),onPointerMove:or(n.onPointerMove,de=>{if(!D.current)return;const xe=de.clientX-D.current.x,Se=de.clientY-D.current.y,ee=!!B.current,H=["left","right"].includes(x.swipeDirection),ne=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,J=H?ne(0,xe):0,N=H?0:ne(0,Se),z=de.pointerType==="touch"?10:2,se={x:J,y:N},ae={originalEvent:de,delta:se};ee?(B.current=se,Tf(B5,g,ae,{discrete:!1})):JS(se,x.swipeDirection,z)?(B.current=se,Tf(j5,m,ae,{discrete:!1}),de.target.setPointerCapture(de.pointerId)):(Math.abs(xe)>z||Math.abs(Se)>z)&&(D.current=null)}),onPointerUp:or(n.onPointerUp,de=>{const xe=B.current,Se=de.target;if(Se.hasPointerCapture(de.pointerId)&&Se.releasePointerCapture(de.pointerId),B.current=null,D.current=null,xe){const ee=de.currentTarget,H={originalEvent:de,delta:xe};JS(xe,x.swipeDirection,x.swipeThreshold)?Tf(z5,T,H,{discrete:!0}):Tf($5,v,H,{discrete:!0}),ee.addEventListener("click",ne=>ne.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),G5=n=>{const{__scopeToast:e,children:t,...r}=n,i=Im(qd,e),[s,a]=k.useState(!1),[u,d]=k.useState(!1);return Y5(()=>a(!0)),k.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:K.jsx(V1,{asChild:!0,children:K.jsx(R_,{...r,children:s&&K.jsxs(K.Fragment,{children:[i.label," ",t]})})})},K5="ToastTitle",$1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return K.jsx(Pi.div,{...r,ref:e})});$1.displayName=K5;var Q5="ToastDescription",z1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return K.jsx(Pi.div,{...r,ref:e})});z1.displayName=Q5;var W1="ToastAction",H1=k.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?K.jsx(G1,{altText:t,asChild:!0,children:K.jsx(N_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${W1}\`. Expected non-empty \`string\`.`),null)});H1.displayName=W1;var q1="ToastClose",N_=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=H5(q1,t);return K.jsx(G1,{asChild:!0,children:K.jsx(Pi.button,{type:"button",...r,ref:e,onClick:or(n.onClick,i.onClose)})})});N_.displayName=q1;var G1=k.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return K.jsx(Pi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function K1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),X5(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...K1(r))}}),e}function Tf(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?x1(i,s):i.dispatchEvent(s)}var JS=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function Y5(n=()=>{}){const e=La(n);Id(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function X5(n){return n.nodeType===n.ELEMENT_NODE}function J5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ny(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Z5=L1,Q1=U1,Y1=B1,X1=$1,J1=z1,Z1=H1,eR=N_;const e$=Z5,tR=tn.forwardRef(({className:n,...e},t)=>K.jsx(Q1,{ref:t,className:ja("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));tR.displayName=Q1.displayName;const t$=C1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),nR=tn.forwardRef(({className:n,variant:e,...t},r)=>K.jsx(Y1,{ref:r,className:ja(t$({variant:e}),n),...t}));nR.displayName=Y1.displayName;const n$=tn.forwardRef(({className:n,...e},t)=>K.jsx(Z1,{ref:t,className:ja("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));n$.displayName=Z1.displayName;const rR=tn.forwardRef(({className:n,...e},t)=>K.jsx(eR,{ref:t,className:ja("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:K.jsx(m6,{className:"h-4 w-4"})}));rR.displayName=eR.displayName;const iR=tn.forwardRef(({className:n,...e},t)=>K.jsx(X1,{ref:t,className:ja("text-sm font-semibold",n),...e}));iR.displayName=X1.displayName;const sR=tn.forwardRef(({className:n,...e},t)=>K.jsx(J1,{ref:t,className:ja("text-sm opacity-90",n),...e}));sR.displayName=J1.displayName;function r$(){const{toasts:n}=y_();return K.jsxs(e$,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>K.jsxs(nR,{...s,children:[K.jsxs("div",{className:"grid gap-1",children:[t&&K.jsx(iR,{children:t}),r&&K.jsx(sR,{children:r})]}),i,K.jsx(rR,{})]},e)),K.jsx(tR,{})]})}const oR=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Sm=k.createContext({}),V_=k.createContext(null),Pm=typeof document<"u",i$=Pm?k.useLayoutEffect:k.useEffect,aR=k.createContext({strict:!1}),M_=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s$="framerAppearId",lR="data-"+M_(s$);function o$(n,e,t,r){const{visualElement:i}=k.useContext(Sm),s=k.useContext(aR),a=k.useContext(V_),u=k.useContext(oR).reducedMotion,d=k.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=d.current;k.useInsertionEffect(()=>{h&&h.update(t,a)});const m=k.useRef(!!(t[lR]&&!window.HandoffComplete));return i$(()=>{h&&(h.render(),m.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(h.updateFeatures(),!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),h}function Wl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function a$(n,e,t){return k.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Wl(t)&&(t.current=r))},[e])}function Sd(n){return typeof n=="string"||Array.isArray(n)}function Cm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const O_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],L_=["initial",...O_];function Am(n){return Cm(n.animate)||L_.some(e=>Sd(n[e]))}function uR(n){return!!(Am(n)||n.variants)}function l$(n,e){if(Am(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Sd(t)?t:void 0,animate:Sd(r)?r:void 0}}return n.inherit!==!1?e:{}}function u$(n){const{initial:e,animate:t}=l$(n,k.useContext(Sm));return k.useMemo(()=>({initial:e,animate:t}),[ZS(e),ZS(t)])}function ZS(n){return Array.isArray(n)?n.join(" "):n}const eP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pd={};for(const n in eP)Pd[n]={isEnabled:e=>eP[n].some(t=>!!e[t])};function c$(n){for(const e in n)Pd[e]={...Pd[e],...n[e]}}const cR=k.createContext({}),dR=k.createContext({}),d$=Symbol.for("motionComponentSymbol");function h$({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&c$(n);function s(u,d){let h;const m={...k.useContext(oR),...u,layoutId:f$(u)},{isStatic:g}=m,v=u$(u),T=r(u,g);if(!g&&Pm){v.visualElement=o$(i,T,m,e);const b=k.useContext(dR),x=k.useContext(aR).strict;v.visualElement&&(h=v.visualElement.loadFeatures(m,x,n,b))}return k.createElement(Sm.Provider,{value:v},h&&v.visualElement?k.createElement(h,{visualElement:v.visualElement,...m}):null,t(i,u,a$(T,v.visualElement,d),T,g,v.visualElement))}const a=k.forwardRef(s);return a[d$]=i,a}function f$({layoutId:n}){const e=k.useContext(cR).id;return e&&n!==void 0?e+"-"+n:n}function p$(n){function e(r,i={}){return h$(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const m$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function F_(n){return typeof n!="string"||n.includes("-")?!1:!!(m$.indexOf(n)>-1||/[A-Z]/.test(n))}const Np={};function g$(n){Object.assign(Np,n)}const Gd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ba=new Set(Gd);function hR(n,{layout:e,layoutId:t}){return Ba.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Np[n]||n==="opacity")}const Kn=n=>!!(n&&n.getVelocity),y$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},v$=Gd.length;function w$(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<v$;a++){const u=Gd[a];if(n[u]!==void 0){const d=y$[u]||u;s+=`${d}(${n[u]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const fR=n=>e=>typeof e=="string"&&e.startsWith(n),pR=fR("--"),Hv=fR("var(--"),_$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,E$=(n,e)=>e&&typeof n=="number"?e.transform(n):n,yo=(n,e,t)=>Math.min(Math.max(t,n),e),$a={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},nd={...$a,transform:n=>yo(0,1,n)},If={...$a,default:1},rd=n=>Math.round(n*1e5)/1e5,bm=/(-)?([\d]*\.?[\d])+/g,mR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,T$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Kd(n){return typeof n=="string"}const Qd=n=>({test:e=>Kd(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Hs=Qd("deg"),_i=Qd("%"),Fe=Qd("px"),I$=Qd("vh"),S$=Qd("vw"),tP={..._i,parse:n=>_i.parse(n)/100,transform:n=>_i.transform(n*100)},nP={...$a,transform:Math.round},gR={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,size:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,rotate:Hs,rotateX:Hs,rotateY:Hs,rotateZ:Hs,scale:If,scaleX:If,scaleY:If,scaleZ:If,skew:Hs,skewX:Hs,skewY:Hs,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:nd,originX:tP,originY:tP,originZ:Fe,zIndex:nP,fillOpacity:nd,strokeOpacity:nd,numOctaves:nP};function U_(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:u}=n;let d=!1,h=!1,m=!0;for(const g in e){const v=e[g];if(pR(g)){s[g]=v;continue}const T=gR[g],b=E$(v,T);if(Ba.has(g)){if(d=!0,a[g]=b,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(h=!0,u[g]=b):i[g]=b}if(e.transform||(d||r?i.transform=w$(n.transform,t,m,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;i.transformOrigin=`${g} ${v} ${T}`}}const j_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yR(n,e,t){for(const r in e)!Kn(e[r])&&!hR(r,t)&&(n[r]=e[r])}function P$({transformTemplate:n},e,t){return k.useMemo(()=>{const r=j_();return U_(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function C$(n,e,t){const r=n.style||{},i={};return yR(i,r,n),Object.assign(i,P$(n,e,t)),n.transformValues?n.transformValues(i):i}function A$(n,e,t){const r={},i=C$(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const b$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||b$.has(n)}let vR=n=>!Vp(n);function x$(n){n&&(vR=e=>e.startsWith("on")?!Vp(e):n(e))}try{x$(require("@emotion/is-prop-valid").default)}catch{}function R$(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(vR(i)||t===!0&&Vp(i)||!e&&!Vp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function rP(n,e,t){return typeof n=="string"?n:Fe.transform(e+t*n)}function k$(n,e,t){const r=rP(e,n.x,n.width),i=rP(t,n.y,n.height);return`${r} ${i}`}const D$={offset:"stroke-dashoffset",array:"stroke-dasharray"},N$={offset:"strokeDashoffset",array:"strokeDasharray"};function V$(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?D$:N$;n[s.offset]=Fe.transform(-r);const a=Fe.transform(e),u=Fe.transform(t);n[s.array]=`${a} ${u}`}function B_(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},m,g,v){if(U_(n,h,m,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:T,style:b,dimensions:x}=n;T.transform&&(x&&(b.transform=T.transform),delete T.transform),x&&(i!==void 0||s!==void 0||b.transform)&&(b.transformOrigin=k$(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(T.x=e),t!==void 0&&(T.y=t),r!==void 0&&(T.scale=r),a!==void 0&&V$(T,a,u,d,!1)}const wR=()=>({...j_(),attrs:{}}),$_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function M$(n,e,t,r){const i=k.useMemo(()=>{const s=wR();return B_(s,e,{enableHardwareAcceleration:!1},$_(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};yR(s,n.style,n),i.style={...s,...i.style}}return i}function O$(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=(F_(t)?M$:A$)(r,s,a,t),m={...R$(r,typeof t=="string",n),...d,ref:i},{children:g}=r,v=k.useMemo(()=>Kn(g)?g.get():g,[g]);return k.createElement(t,{...m,children:v})}}function _R(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const ER=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TR(n,e,t,r){_R(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(ER.has(i)?i:M_(i),e.attrs[i])}function z_(n,e){const{style:t}=n,r={};for(const i in t)(Kn(t[i])||e.style&&Kn(e.style[i])||hR(i,n))&&(r[i]=t[i]);return r}function IR(n,e){const t=z_(n,e);for(const r in n)if(Kn(n[r])||Kn(e[r])){const i=Gd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function W_(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function L$(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const Mp=n=>Array.isArray(n),F$=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),U$=n=>Mp(n)?n[n.length-1]||0:n;function qf(n){const e=Kn(n)?n.get():n;return F$(e)?e.toValue():e}function j$({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:B$(r,i,s,n),renderState:e()};return t&&(a.mount=u=>t(r,u,a)),a}const SR=n=>(e,t)=>{const r=k.useContext(Sm),i=k.useContext(V_),s=()=>j$(n,e,r,i);return t?s():L$(s)};function B$(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=qf(s[v]);let{initial:a,animate:u}=n;const d=Am(n),h=uR(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Cm(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const b=W_(n,T);if(!b)return;const{transitionEnd:x,transition:P,...j}=b;for(const M in j){let D=j[M];if(Array.isArray(D)){const B=m?D.length-1:0;D=D[B]}D!==null&&(i[M]=D)}for(const M in x)i[M]=x[M]}),i}const qt=n=>n;class iP{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function $$(n){let e=new iP,t=new iP,r=0,i=!1,s=!1;const a=new WeakSet,u={schedule:(d,h=!1,m=!1)=>{const g=m&&i,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const m=e.order[h];m(d),a.has(m)&&(u.schedule(m),n())}i=!1,s&&(s=!1,u.process(d))}};return u}const Sf=["prepare","read","update","preRender","render","postRender"],z$=40;function W$(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Sf.reduce((g,v)=>(g[v]=$$(()=>t=!0),g),{}),a=g=>s[g].process(i),u=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,z$),1),i.timestamp=g,i.isProcessing=!0,Sf.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(u))},d=()=>{t=!0,r=!0,i.isProcessing||n(u)};return{schedule:Sf.reduce((g,v)=>{const T=s[v];return g[v]=(b,x=!1,P=!1)=>(t||d(),T.schedule(b,x,P)),g},{}),cancel:g=>Sf.forEach(v=>s[v].cancel(g)),state:i,steps:s}}const{schedule:Ct,cancel:ss,state:Cn,steps:Vy}=W$(typeof requestAnimationFrame<"u"?requestAnimationFrame:qt,!0),H$={useVisualState:SR({scrapeMotionValuesFromProps:IR,createRenderState:wR,onMount:(n,e,{renderState:t,latestValues:r})=>{Ct.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Ct.render(()=>{B_(t,r,{enableHardwareAcceleration:!1},$_(e.tagName),n.transformTemplate),TR(e,t)})}})},q$={useVisualState:SR({scrapeMotionValuesFromProps:z_,createRenderState:j_})};function G$(n,{forwardMotionProps:e=!1},t,r){return{...F_(n)?H$:q$,preloadedFeatures:t,useRender:O$(e),createVisualElement:r,Component:n}}function Xi(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const PR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function xm(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const K$=n=>e=>PR(e)&&n(e,xm(e));function Ji(n,e,t,r){return Xi(n,e,K$(t),r)}const Q$=(n,e)=>t=>e(n(t)),ao=(...n)=>n.reduce(Q$);function CR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const sP=CR("dragHorizontal"),oP=CR("dragVertical");function AR(n){let e=!1;if(n==="y")e=oP();else if(n==="x")e=sP();else{const t=sP(),r=oP();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function bR(){const n=AR(!0);return n?(n(),!1):!0}class Co{constructor(e){this.isMounted=!1,this.node=e}update(){}}function aP(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||bR())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&Ct.update(()=>u[r](s,a))};return Ji(n.current,t,i,{passive:!n.getProps()[r]})}class Y$ extends Co{mount(){this.unmount=ao(aP(this.node,!0),aP(this.node,!1))}unmount(){}}class X$ extends Co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ao(Xi(this.node.current,"focus",()=>this.onFocus()),Xi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const xR=(n,e)=>e?n===e?!0:xR(n,e.parentElement):!1;function My(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,xm(t))}class J$ extends Co{constructor(){super(...arguments),this.removeStartListeners=qt,this.removeEndListeners=qt,this.removeAccessibleListeners=qt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Ji(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ct.update(()=>{!g&&!xR(this.node.current,u.target)?m&&m(u,d):h&&h(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=Ji(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ao(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||My("up",(d,h)=>{const{onTap:m}=this.node.getProps();m&&Ct.update(()=>m(d,h))})};this.removeEndListeners(),this.removeEndListeners=Xi(this.node.current,"keyup",a),My("down",(u,d)=>{this.startPress(u,d)})},t=Xi(this.node.current,"keydown",e),r=()=>{this.isPressing&&My("cancel",(s,a)=>this.cancelPress(s,a))},i=Xi(this.node.current,"blur",r);this.removeAccessibleListeners=ao(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ct.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!bR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ct.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Ji(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Xi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ao(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const qv=new WeakMap,Oy=new WeakMap,Z$=n=>{const e=qv.get(n.target);e&&e(n)},e9=n=>{n.forEach(Z$)};function t9({root:n,...e}){const t=n||document;Oy.has(t)||Oy.set(t,{});const r=Oy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(e9,{root:n,...e})),r[i]}function n9(n,e,t){const r=t9(e);return qv.set(n,t),r.observe(n),()=>{qv.delete(n),r.unobserve(n)}}const r9={some:0,all:1};class i9 extends Co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:r9[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(d)};return n9(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(s9(e,t))&&this.startObserver()}unmount(){}}function s9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const o9={inView:{Feature:i9},tap:{Feature:J$},focus:{Feature:X$},hover:{Feature:Y$}};function RR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function a9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function l9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Rm(n,e,t){const r=n.getProps();return W_(r,e,t!==void 0?t:r.custom,a9(n),l9(n))}let H_=qt;const Ea=n=>n*1e3,Zi=n=>n/1e3,u9={current:!1},kR=n=>Array.isArray(n)&&typeof n[0]=="number";function DR(n){return!!(!n||typeof n=="string"&&NR[n]||kR(n)||Array.isArray(n)&&n.every(DR))}const Wc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,NR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wc([0,.65,.55,1]),circOut:Wc([.55,0,1,.45]),backIn:Wc([.31,.01,.66,-.59]),backOut:Wc([.33,1.53,.69,.99])};function VR(n){if(n)return kR(n)?Wc(n):Array.isArray(n)?n.map(VR):NR[n]}function c9(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:u,times:d}={}){const h={[e]:t};d&&(h.offset=d);const m=VR(u);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function d9(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const MR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,h9=1e-7,f9=12;function p9(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=MR(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>h9&&++u<f9);return a}function Yd(n,e,t,r){if(n===e&&t===r)return qt;const i=s=>p9(s,0,1,n,t);return s=>s===0||s===1?s:MR(i(s),e,r)}const m9=Yd(.42,0,1,1),g9=Yd(0,0,.58,1),OR=Yd(.42,0,.58,1),y9=n=>Array.isArray(n)&&typeof n[0]!="number",LR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,FR=n=>e=>1-n(1-e),q_=n=>1-Math.sin(Math.acos(n)),UR=FR(q_),v9=LR(q_),jR=Yd(.33,1.53,.69,.99),G_=FR(jR),w9=LR(G_),_9=n=>(n*=2)<1?.5*G_(n):.5*(2-Math.pow(2,-10*(n-1))),E9={linear:qt,easeIn:m9,easeInOut:OR,easeOut:g9,circIn:q_,circInOut:v9,circOut:UR,backIn:G_,backInOut:w9,backOut:jR,anticipate:_9},lP=n=>{if(Array.isArray(n)){H_(n.length===4);const[e,t,r,i]=n;return Yd(e,t,r,i)}else if(typeof n=="string")return E9[n];return n},K_=(n,e)=>t=>!!(Kd(t)&&T$.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),BR=(n,e,t)=>r=>{if(!Kd(r))return r;const[i,s,a,u]=r.match(bm);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},T9=n=>yo(0,255,n),Ly={...$a,transform:n=>Math.round(T9(n))},ya={test:K_("rgb","red"),parse:BR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Ly.transform(n)+", "+Ly.transform(e)+", "+Ly.transform(t)+", "+rd(nd.transform(r))+")"};function I9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Gv={test:K_("#"),parse:I9,transform:ya.transform},Hl={test:K_("hsl","hue"),parse:BR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+_i.transform(rd(e))+", "+_i.transform(rd(t))+", "+rd(nd.transform(r))+")"},Vn={test:n=>ya.test(n)||Gv.test(n)||Hl.test(n),parse:n=>ya.test(n)?ya.parse(n):Hl.test(n)?Hl.parse(n):Gv.parse(n),transform:n=>Kd(n)?n:n.hasOwnProperty("red")?ya.transform(n):Hl.transform(n)},Vt=(n,e,t)=>-t*n+t*e+n;function Fy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function S9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;i=Fy(d,u,n+1/3),s=Fy(d,u,n),a=Fy(d,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const Uy=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},P9=[Gv,ya,Hl],C9=n=>P9.find(e=>e.test(n));function uP(n){const e=C9(n);let t=e.parse(n);return e===Hl&&(t=S9(t)),t}const $R=(n,e)=>{const t=uP(n),r=uP(e),i={...t};return s=>(i.red=Uy(t.red,r.red,s),i.green=Uy(t.green,r.green,s),i.blue=Uy(t.blue,r.blue,s),i.alpha=Vt(t.alpha,r.alpha,s),ya.transform(i))};function A9(n){var e,t;return isNaN(n)&&Kd(n)&&(((e=n.match(bm))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(mR))===null||t===void 0?void 0:t.length)||0)>0}const zR={regex:_$,countKey:"Vars",token:"${v}",parse:qt},WR={regex:mR,countKey:"Colors",token:"${c}",parse:Vn.parse},HR={regex:bm,countKey:"Numbers",token:"${n}",parse:$a.parse};function jy(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Op(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&jy(t,zR),jy(t,WR),jy(t,HR),t}function qR(n){return Op(n).values}function GR(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Op(n),s=e.length;return a=>{let u=i;for(let d=0;d<s;d++)d<r?u=u.replace(zR.token,a[d]):d<r+t?u=u.replace(WR.token,Vn.transform(a[d])):u=u.replace(HR.token,rd(a[d]));return u}}const b9=n=>typeof n=="number"?0:n;function x9(n){const e=qR(n);return GR(n)(e.map(b9))}const vo={test:A9,parse:qR,createTransformer:GR,getAnimatableNone:x9},KR=(n,e)=>t=>`${t>0?e:n}`;function QR(n,e){return typeof n=="number"?t=>Vt(n,e,t):Vn.test(n)?$R(n,e):n.startsWith("var(")?KR(n,e):XR(n,e)}const YR=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>QR(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},R9=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=QR(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},XR=(n,e)=>{const t=vo.createTransformer(e),r=Op(n),i=Op(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ao(YR(r.values,i.values),t):KR(n,e)},Cd=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},cP=(n,e)=>t=>Vt(n,e,t);function k9(n){return typeof n=="number"?cP:typeof n=="string"?Vn.test(n)?$R:XR:Array.isArray(n)?YR:typeof n=="object"?R9:cP}function D9(n,e,t){const r=[],i=t||k9(n[0]),s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||qt:e;u=ao(d,u)}r.push(u)}return r}function JR(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(H_(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=D9(e,r,i),u=a.length,d=h=>{let m=0;if(u>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const g=Cd(n[m],n[m+1],h);return a[m](g)};return t?h=>d(yo(n[0],n[s-1],h)):d}function N9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Cd(0,e,r);n.push(Vt(t,1,i))}}function V9(n){const e=[0];return N9(e,n.length-1),e}function M9(n,e){return n.map(t=>t*e)}function O9(n,e){return n.map(()=>e||OR).splice(0,n.length-1)}function Lp({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=y9(r)?r.map(lP):lP(r),s={done:!1,value:e[0]},a=M9(t&&t.length===e.length?t:V9(e),n),u=JR(a,e,{ease:Array.isArray(i)?i:O9(e,i)});return{calculatedDuration:n,next:d=>(s.value=u(d),s.done=d>=n,s)}}function ZR(n,e){return e?n*(1e3/e):0}const L9=5;function ek(n,e,t){const r=Math.max(e-L9,0);return ZR(t-n(r),e-r)}const By=.001,F9=.01,U9=10,j9=.05,B9=1;function $9({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=yo(j9,B9,a),n=yo(F9,U9,Zi(n)),a<1?(i=h=>{const m=h*a,g=m*n,v=m-t,T=Kv(h,a),b=Math.exp(-g);return By-v/T*b},s=h=>{const g=h*a*n,v=g*t+t,T=Math.pow(a,2)*Math.pow(h,2)*n,b=Math.exp(-g),x=Kv(Math.pow(h,2),a);return(-i(h)+By>0?-1:1)*((v-T)*b)/x}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-By+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,d=W9(i,s,u);if(n=Ea(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const z9=12;function W9(n,e,t){let r=t;for(let i=1;i<z9;i++)r=r-n(r)/e(r);return r}function Kv(n,e){return n*Math.sqrt(1-e*e)}const H9=["duration","bounce"],q9=["stiffness","damping","mass"];function dP(n,e){return e.some(t=>n[t]!==void 0)}function G9(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!dP(n,q9)&&dP(n,H9)){const t=$9(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function tk({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:v}=G9({...r,velocity:-Zi(r.velocity||0)}),T=g||0,b=d/(2*Math.sqrt(u*h)),x=s-i,P=Zi(Math.sqrt(u/h)),j=Math.abs(x)<5;t||(t=j?.01:2),e||(e=j?.005:.5);let M;if(b<1){const D=Kv(P,b);M=B=>{const X=Math.exp(-b*P*B);return s-X*((T+b*P*x)/D*Math.sin(D*B)+x*Math.cos(D*B))}}else if(b===1)M=D=>s-Math.exp(-P*D)*(x+(T+P*x)*D);else{const D=P*Math.sqrt(b*b-1);M=B=>{const X=Math.exp(-b*P*B),re=Math.min(D*B,300);return s-X*((T+b*P*x)*Math.sinh(re)+D*x*Math.cosh(re))/D}}return{calculatedDuration:v&&m||null,next:D=>{const B=M(D);if(v)a.done=D>=m;else{let X=T;D!==0&&(b<1?X=ek(M,D,B):X=0);const re=Math.abs(X)<=t,A=Math.abs(s-B)<=e;a.done=re&&A}return a.value=a.done?s:B,a}}}function hP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],v={done:!1,value:g},T=I=>u!==void 0&&I<u||d!==void 0&&I>d,b=I=>u===void 0?d:d===void 0||Math.abs(u-I)<Math.abs(d-I)?u:d;let x=t*e;const P=g+x,j=a===void 0?P:a(P);j!==P&&(x=j-g);const M=I=>-x*Math.exp(-I/r),D=I=>j+M(I),B=I=>{const C=M(I),O=D(I);v.done=Math.abs(C)<=h,v.value=v.done?j:O};let X,re;const A=I=>{T(v.value)&&(X=I,re=tk({keyframes:[v.value,b(v.value)],velocity:ek(D,I,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return A(0),{calculatedDuration:null,next:I=>{let C=!1;return!re&&X===void 0&&(C=!0,B(I),A(I)),X!==void 0&&I>X?re.next(I-X):(!C&&B(I),v)}}}const K9=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ct.update(e,!0),stop:()=>ss(e),now:()=>Cn.isProcessing?Cn.timestamp:performance.now()}},fP=2e4;function pP(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<fP;)e+=t,r=n.next(e);return e>=fP?1/0:e}const Q9={decay:hP,inertia:hP,tween:Lp,keyframes:Lp,spring:tk};function Fp({autoplay:n=!0,delay:e=0,driver:t=K9,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:m,onUpdate:g,...v}){let T=1,b=!1,x,P;const j=()=>{P=new Promise(N=>{x=N})};j();let M;const D=Q9[i]||Lp;let B;D!==Lp&&typeof r[0]!="number"&&(B=JR([0,100],r,{clamp:!1}),r=[0,100]);const X=D({...v,keyframes:r});let re;u==="mirror"&&(re=D({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let A="idle",I=null,C=null,O=null;X.calculatedDuration===null&&s&&(X.calculatedDuration=pP(X));const{calculatedDuration:L}=X;let U=1/0,V=1/0;L!==null&&(U=L+a,V=U*(s+1)-a);let de=0;const xe=N=>{if(C===null)return;T>0&&(C=Math.min(C,N)),T<0&&(C=Math.min(N-V/T,C)),I!==null?de=I:de=Math.round(N-C)*T;const z=de-e*(T>=0?1:-1),se=T>=0?z<0:z>V;de=Math.max(z,0),A==="finished"&&I===null&&(de=V);let ae=de,oe=X;if(s){const $e=Math.min(de,V)/U;let ut=Math.floor($e),$t=$e%1;!$t&&$e>=1&&($t=1),$t===1&&ut--,ut=Math.min(ut,s+1),ut%2&&(u==="reverse"?($t=1-$t,a&&($t-=a/U)):u==="mirror"&&(oe=re)),ae=yo(0,1,$t)*U}const pe=se?{done:!1,value:r[0]}:oe.next(ae);B&&(pe.value=B(pe.value));let{done:De}=pe;!se&&L!==null&&(De=T>=0?de>=V:de<=0);const Le=I===null&&(A==="finished"||A==="running"&&De);return g&&g(pe.value),Le&&H(),pe},Se=()=>{M&&M.stop(),M=void 0},ee=()=>{A="idle",Se(),x(),j(),C=O=null},H=()=>{A="finished",m&&m(),Se(),x()},ne=()=>{if(b)return;M||(M=t(xe));const N=M.now();d&&d(),I!==null?C=N-I:(!C||A==="finished")&&(C=N),A==="finished"&&j(),O=C,I=null,A="running",M.start()};n&&ne();const J={then(N,z){return P.then(N,z)},get time(){return Zi(de)},set time(N){N=Ea(N),de=N,I!==null||!M||T===0?I=N:C=M.now()-N/T},get duration(){const N=X.calculatedDuration===null?pP(X):X.calculatedDuration;return Zi(N)},get speed(){return T},set speed(N){N===T||!M||(T=N,J.time=Zi(de))},get state(){return A},play:ne,pause:()=>{A="paused",I=de},stop:()=>{b=!0,A!=="idle"&&(A="idle",h&&h(),ee())},cancel:()=>{O!==null&&xe(O),ee()},complete:()=>{A="finished"},sample:N=>(C=0,xe(N))};return J}function Y9(n){let e;return()=>(e===void 0&&(e=n()),e)}const X9=Y9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),J9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Pf=10,Z9=2e4,ez=(n,e)=>e.type==="spring"||n==="backgroundColor"||!DR(e.ease);function tz(n,e,{onUpdate:t,onComplete:r,...i}){if(!(X9()&&J9.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,d,h=!1;const m=()=>{d=new Promise(D=>{u=D})};m();let{keyframes:g,duration:v=300,ease:T,times:b}=i;if(ez(e,i)){const D=Fp({...i,repeat:0,delay:0});let B={done:!1,value:g[0]};const X=[];let re=0;for(;!B.done&&re<Z9;)B=D.sample(re),X.push(B.value),re+=Pf;b=void 0,g=X,v=re-Pf,T="linear"}const x=c9(n.owner.current,e,g,{...i,duration:v,ease:T,times:b}),P=()=>{h=!1,x.cancel()},j=()=>{h=!0,Ct.update(P),u(),m()};return x.onfinish=()=>{h||(n.set(d9(g,i)),r&&r(),j())},{then(D,B){return d.then(D,B)},attachTimeline(D){return x.timeline=D,x.onfinish=null,qt},get time(){return Zi(x.currentTime||0)},set time(D){x.currentTime=Ea(D)},get speed(){return x.playbackRate},set speed(D){x.playbackRate=D},get duration(){return Zi(v)},play:()=>{a||(x.play(),ss(P))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:D}=x;if(D){const B=Fp({...i,autoplay:!1});n.setWithVelocity(B.sample(D-Pf).value,B.sample(D).value,Pf)}j()},complete:()=>{h||x.finish()},cancel:j}}function nz({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:qt,pause:qt,stop:qt,then:s=>(s(),Promise.resolve()),cancel:qt,complete:qt});return e?Fp({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const rz={type:"spring",stiffness:500,damping:25,restSpeed:10},iz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),sz={type:"keyframes",duration:.8},oz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},az=(n,{keyframes:e})=>e.length>2?sz:Ba.has(n)?n.startsWith("scale")?iz(e[1]):rz:oz,Qv=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vo.test(e)||e==="0")&&!e.startsWith("url(")),lz=new Set(["brightness","contrast","saturate","opacity"]);function uz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(bm)||[];if(!r)return n;const i=t.replace(r,"");let s=lz.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const cz=/([a-z-]*)\(.*?\)/g,Yv={...vo,getAnimatableNone:n=>{const e=n.match(cz);return e?e.map(uz).join(" "):n}},dz={...gR,color:Vn,backgroundColor:Vn,outlineColor:Vn,fill:Vn,stroke:Vn,borderColor:Vn,borderTopColor:Vn,borderRightColor:Vn,borderBottomColor:Vn,borderLeftColor:Vn,filter:Yv,WebkitFilter:Yv},Q_=n=>dz[n];function nk(n,e){let t=Q_(n);return t!==Yv&&(t=vo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rk=n=>/^0[^.\s]+$/.test(n);function hz(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||rk(n)}function fz(n,e,t,r){const i=Qv(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let u;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),hz(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(u=s[h]);if(i&&d.length&&u)for(let h=0;h<d.length;h++){const m=d[h];s[m]=nk(e,u)}return s}function pz({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:d,elapsed:h,...m}){return!!Object.keys(m).length}function Y_(n,e){return n[e]||n.default||n}const mz={skipAnimations:!1},X_=(n,e,t,r={})=>i=>{const s=Y_(r,n)||{},a=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ea(a);const d=fz(e,n,t,s),h=d[0],m=d[d.length-1],g=Qv(n,h),v=Qv(n,m);let T={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:b=>{e.set(b),s.onUpdate&&s.onUpdate(b)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(pz(s)||(T={...T,...az(n,T)}),T.duration&&(T.duration=Ea(T.duration)),T.repeatDelay&&(T.repeatDelay=Ea(T.repeatDelay)),!g||!v||u9.current||s.type===!1||mz.skipAnimations)return nz(T);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=tz(e,n,T);if(b)return b}return Fp(T)};function Up(n){return!!(Kn(n)&&n.add)}const ik=n=>/^\-?\d*\.?\d+$/.test(n);function J_(n,e){n.indexOf(e)===-1&&n.push(e)}function Z_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class eE{constructor(){this.subscriptions=[]}add(e){return J_(this.subscriptions,e),()=>Z_(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gz=n=>!isNaN(parseFloat(n));class yz{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=Cn;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Ct.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ct.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=gz(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new eE);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ZR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eu(n,e){return new yz(n,e)}const sk=n=>e=>e.test(n),vz={test:n=>n==="auto",parse:n=>n},ok=[$a,Fe,_i,Hs,S$,I$,vz],Mc=n=>ok.find(sk(n)),wz=[...ok,Vn,vo],_z=n=>wz.find(sk(n));function Ez(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Eu(t))}function Tz(n,e){const t=Rm(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const u=U$(s[a]);Ez(n,a,u)}}function Iz(n,e,t){var r,i;const s=Object.keys(e).filter(u=>!n.hasValue(u)),a=s.length;if(a)for(let u=0;u<a;u++){const d=s[u],h=e[d];let m=null;Array.isArray(h)&&(m=h[0]),m===null&&(m=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),m!=null&&(typeof m=="string"&&(ik(m)||rk(m))?m=parseFloat(m):!_z(m)&&vo.test(h)&&(m=nk(d,h)),n.addValue(d,Eu(m,{owner:n})),t[d]===void 0&&(t[d]=m),m!==null&&n.setBaseTarget(d,m))}}function Sz(n,e){return e?(e[n]||e.default||e).from:void 0}function Pz(n,e,t){const r={};for(const i in n){const s=Sz(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function Cz({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Az(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function ak(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in u){const v=n.getValue(g),T=u[g];if(!v||T===void 0||m&&Cz(m,g))continue;const b={delay:t,elapsed:0,...Y_(s||{},g)};if(window.HandoffAppearAnimations){const j=n.getProps()[lR];if(j){const M=window.HandoffAppearAnimations(j,g,v,Ct);M!==null&&(b.elapsed=M,b.isHandoff=!0)}}let x=!b.isHandoff&&!Az(v,T);if(b.type==="spring"&&(v.getVelocity()||b.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(X_(g,v,T,n.shouldReduceMotion&&Ba.has(g)?{type:!1}:b));const P=v.animation;Up(d)&&(d.add(g),P.then(()=>d.remove(g))),h.push(P)}return a&&Promise.all(h).then(()=>{a&&Tz(n,a)}),h}function Xv(n,e,t={}){const r=Rm(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(ak(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return bz(n,e,h+d,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function bz(n,e,t=0,r=0,i=1,s){const a=[],u=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(xz).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(Xv(h,e,{...s,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function xz(n,e){return n.sortNodePosition(e)}function Rz(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Xv(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=Xv(n,e,t);else{const i=typeof e=="function"?Rm(n,e,t.custom):e;r=Promise.all(ak(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const kz=[...O_].reverse(),Dz=O_.length;function Nz(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Rz(n,t,r)))}function Vz(n){let e=Nz(n);const t=Oz();let r=!0;const i=(d,h)=>{const m=Rm(n,h);if(m){const{transition:g,transitionEnd:v,...T}=m;d={...d,...T,...v}}return d};function s(d){e=d(n)}function a(d,h){const m=n.getProps(),g=n.getVariantContext(!0)||{},v=[],T=new Set;let b={},x=1/0;for(let j=0;j<Dz;j++){const M=kz[j],D=t[M],B=m[M]!==void 0?m[M]:g[M],X=Sd(B),re=M===h?D.isActive:null;re===!1&&(x=j);let A=B===g[M]&&B!==m[M]&&X;if(A&&r&&n.manuallyAnimateOnMount&&(A=!1),D.protectedKeys={...b},!D.isActive&&re===null||!B&&!D.prevProp||Cm(B)||typeof B=="boolean")continue;let C=Mz(D.prevProp,B)||M===h&&D.isActive&&!A&&X||j>x&&X,O=!1;const L=Array.isArray(B)?B:[B];let U=L.reduce(i,{});re===!1&&(U={});const{prevResolvedValues:V={}}=D,de={...V,...U},xe=Se=>{C=!0,T.has(Se)&&(O=!0,T.delete(Se)),D.needsAnimating[Se]=!0};for(const Se in de){const ee=U[Se],H=V[Se];if(b.hasOwnProperty(Se))continue;let ne=!1;Mp(ee)&&Mp(H)?ne=!RR(ee,H):ne=ee!==H,ne?ee!==void 0?xe(Se):T.add(Se):ee!==void 0&&T.has(Se)?xe(Se):D.protectedKeys[Se]=!0}D.prevProp=B,D.prevResolvedValues=U,D.isActive&&(b={...b,...U}),r&&n.blockInitialAnimation&&(C=!1),C&&(!A||O)&&v.push(...L.map(Se=>({animation:Se,options:{type:M,...d}})))}if(T.size){const j={};T.forEach(M=>{const D=n.getBaseTarget(M);D!==void 0&&(j[M]=D)}),v.push({animation:j})}let P=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(v):Promise.resolve()}function u(d,h,m){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(d,h)}),t[d].isActive=h;const v=a(m,d);for(const T in t)t[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t}}function Mz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!RR(e,n):!1}function ra(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Oz(){return{animate:ra(!0),whileInView:ra(),whileHover:ra(),whileTap:ra(),whileDrag:ra(),whileFocus:ra(),exit:ra()}}class Lz extends Co{constructor(e){super(e),e.animationState||(e.animationState=Vz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Cm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Fz=0;class Uz extends Co{constructor(){super(...arguments),this.id=Fz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jz={animation:{Feature:Lz},exit:{Feature:Uz}},mP=(n,e)=>Math.abs(n-e);function Bz(n,e){const t=mP(n.x,e.x),r=mP(n.y,e.y);return Math.sqrt(t**2+r**2)}class lk{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=zy(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=Bz(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:b}=g,{timestamp:x}=Cn;this.history.push({...b,timestamp:x});const{onStart:P,onMove:j}=this.handlers;v||(P&&P(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$y(v,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:b,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=zy(g.type==="pointercancel"?this.lastMoveEventInfo:$y(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,P),b&&b(g,P)},!PR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=xm(e),u=$y(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=Cn;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,zy(u,this.history)),this.removeListeners=ao(Ji(this.contextWindow,"pointermove",this.handlePointerMove),Ji(this.contextWindow,"pointerup",this.handlePointerUp),Ji(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ss(this.updatePoint)}}function $y(n,e){return e?{point:e(n.point)}:n}function gP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function zy({point:n},e){return{point:n,delta:gP(n,uk(e)),offset:gP(n,$z(e)),velocity:zz(e,.1)}}function $z(n){return n[0]}function uk(n){return n[n.length-1]}function zz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=uk(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ea(e)));)t--;if(!r)return{x:0,y:0};const s=Zi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function cr(n){return n.max-n.min}function Jv(n,e=0,t=.01){return Math.abs(n-e)<=t}function yP(n,e,t,r=.5){n.origin=r,n.originPoint=Vt(e.min,e.max,n.origin),n.scale=cr(t)/cr(e),(Jv(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Vt(t.min,t.max,n.origin)-n.originPoint,(Jv(n.translate)||isNaN(n.translate))&&(n.translate=0)}function id(n,e,t,r){yP(n.x,e.x,t.x,r?r.originX:void 0),yP(n.y,e.y,t.y,r?r.originY:void 0)}function vP(n,e,t){n.min=t.min+e.min,n.max=n.min+cr(e)}function Wz(n,e,t){vP(n.x,e.x,t.x),vP(n.y,e.y,t.y)}function wP(n,e,t){n.min=e.min-t.min,n.max=n.min+cr(e)}function sd(n,e,t){wP(n.x,e.x,t.x),wP(n.y,e.y,t.y)}function Hz(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Vt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Vt(t,n,r.max):Math.min(n,t)),n}function _P(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function qz(n,{top:e,left:t,bottom:r,right:i}){return{x:_P(n.x,t,i),y:_P(n.y,e,r)}}function EP(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Gz(n,e){return{x:EP(n.x,e.x),y:EP(n.y,e.y)}}function Kz(n,e){let t=.5;const r=cr(n),i=cr(e);return i>r?t=Cd(e.min,e.max-r,n.min):r>i&&(t=Cd(n.min,n.max-i,e.min)),yo(0,1,t)}function Qz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Zv=.35;function Yz(n=Zv){return n===!1?n=0:n===!0&&(n=Zv),{x:TP(n,"left","right"),y:TP(n,"top","bottom")}}function TP(n,e,t){return{min:IP(n,e),max:IP(n,t)}}function IP(n,e){return typeof n=="number"?n:n[e]||0}const SP=()=>({translate:0,scale:1,origin:0,originPoint:0}),ql=()=>({x:SP(),y:SP()}),PP=()=>({min:0,max:0}),en=()=>({x:PP(),y:PP()});function _r(n){return[n("x"),n("y")]}function ck({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Xz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Jz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Wy(n){return n===void 0||n===1}function ew({scale:n,scaleX:e,scaleY:t}){return!Wy(n)||!Wy(e)||!Wy(t)}function ua(n){return ew(n)||dk(n)||n.z||n.rotate||n.rotateX||n.rotateY}function dk(n){return CP(n.x)||CP(n.y)}function CP(n){return n&&n!=="0%"}function jp(n,e,t){const r=n-t,i=e*r;return t+i}function AP(n,e,t,r,i){return i!==void 0&&(n=jp(n,i,r)),jp(n,t,r)+e}function tw(n,e=0,t=1,r,i){n.min=AP(n.min,e,t,r,i),n.max=AP(n.max,e,t,r,i)}function hk(n,{x:e,y:t}){tw(n.x,e.translate,e.scale,e.originPoint),tw(n.y,t.translate,t.scale,t.originPoint)}function Zz(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Gl(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,hk(n,a)),r&&ua(s.latestValues)&&Gl(n,s.latestValues))}e.x=bP(e.x),e.y=bP(e.y)}function bP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function qs(n,e){n.min=n.min+e,n.max=n.max+e}function xP(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=Vt(n.min,n.max,s);tw(n,e[t],e[r],a,e.scale)}const eW=["x","scaleX","originX"],tW=["y","scaleY","originY"];function Gl(n,e){xP(n.x,e,eW),xP(n.y,e,tW)}function fk(n,e){return ck(Jz(n.getBoundingClientRect(),e))}function nW(n,e,t){const r=fk(n,t),{scroll:i}=e;return i&&(qs(r.x,i.offset.x),qs(r.y,i.offset.y)),r}const pk=({current:n})=>n?n.ownerDocument.defaultView:null,rW=new WeakMap;class iW{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=en(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(xm(m,"page").point)},s=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:b}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=AR(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_r(P=>{let j=this.getAxisMotionValue(P).get()||0;if(_i.test(j)){const{projection:M}=this.visualElement;if(M&&M.layout){const D=M.layout.layoutBox[P];D&&(j=cr(D)*(parseFloat(j)/100))}}this.originPoint[P]=j}),b&&Ct.update(()=>b(m,g),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:b,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:P}=g;if(T&&this.currentDirection===null){this.currentDirection=sW(P),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,P),this.updateAxis("y",g.point,P),this.visualElement.render(),x&&x(m,g)},u=(m,g)=>this.stop(m,g),d=()=>_r(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new lk(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:pk(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ct.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Cf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Hz(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Wl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=qz(i.layoutBox,t):this.constraints=!1,this.elastic=Yz(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&_r(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Qz(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=nW(r,i.root,this.visualElement.getTransformPagePoint());let a=Gz(i.layout.layoutBox,s);if(t){const u=t(Xz(a));this.hasMutatedConstraints=!!u,u&&(a=ck(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=_r(m=>{if(!Cf(m,t,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const v=i?200:1e6,T=i?40:1e7,b={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,b)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(X_(e,r,0,t))}stopAnimation(){_r(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_r(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_r(t=>{const{drag:r}=this.getProps();if(!Cf(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t];s.set(e[t]-Vt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Wl(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};_r(a=>{const u=this.getAxisMotionValue(a);if(u){const d=u.get();i[a]=Kz({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_r(a=>{if(!Cf(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(Vt(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;rW.set(this.visualElement,this);const e=this.visualElement.current,t=Ji(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Wl(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=Xi(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(_r(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Zv,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function Cf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function sW(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class oW extends Co{constructor(e){super(e),this.removeGroupControls=qt,this.removeListeners=qt,this.controls=new iW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const RP=n=>(e,t)=>{n&&Ct.update(()=>n(e,t))};class aW extends Co{constructor(){super(...arguments),this.removePointerDownListener=qt}onPointerDown(e){this.session=new lk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:RP(e),onStart:RP(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Ct.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=Ji(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function lW(){const n=k.useContext(V_);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=k.useId();return k.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Gf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Oc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Fe.test(n))n=parseFloat(n);else return n;const t=kP(n,e.target.x),r=kP(n,e.target.y);return`${t}% ${r}%`}},uW={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=vo.parse(n);if(i.length>5)return r;const s=vo.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=d;const h=Vt(u,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class cW extends tn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;g$(dW),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ct.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mk(n){const[e,t]=lW(),r=k.useContext(cR);return tn.createElement(cW,{...n,layoutGroup:r,switchLayoutGroup:k.useContext(dR),isPresent:e,safeToRemove:t})}const dW={borderRadius:{...Oc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oc,borderTopRightRadius:Oc,borderBottomLeftRadius:Oc,borderBottomRightRadius:Oc,boxShadow:uW},gk=["TopLeft","TopRight","BottomLeft","BottomRight"],hW=gk.length,DP=n=>typeof n=="string"?parseFloat(n):n,NP=n=>typeof n=="number"||Fe.test(n);function fW(n,e,t,r,i,s){i?(n.opacity=Vt(0,t.opacity!==void 0?t.opacity:1,pW(r)),n.opacityExit=Vt(e.opacity!==void 0?e.opacity:1,0,mW(r))):s&&(n.opacity=Vt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<hW;a++){const u=`border${gk[a]}Radius`;let d=VP(e,u),h=VP(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||NP(d)===NP(h)?(n[u]=Math.max(Vt(DP(d),DP(h),r),0),(_i.test(h)||_i.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=Vt(e.rotate||0,t.rotate||0,r))}function VP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const pW=yk(0,.5,UR),mW=yk(.5,.95,qt);function yk(n,e,t){return r=>r<n?0:r>e?1:t(Cd(n,e,r))}function MP(n,e){n.min=e.min,n.max=e.max}function wr(n,e){MP(n.x,e.x),MP(n.y,e.y)}function OP(n,e,t,r,i){return n-=e,n=jp(n,1/t,r),i!==void 0&&(n=jp(n,1/i,r)),n}function gW(n,e=0,t=1,r=.5,i,s=n,a=n){if(_i.test(e)&&(e=parseFloat(e),e=Vt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Vt(s.min,s.max,r);n===s&&(u-=e),n.min=OP(n.min,e,t,u,i),n.max=OP(n.max,e,t,u,i)}function LP(n,e,[t,r,i],s,a){gW(n,e[t],e[r],e[i],e.scale,s,a)}const yW=["x","scaleX","originX"],vW=["y","scaleY","originY"];function FP(n,e,t,r){LP(n.x,e,yW,t?t.x:void 0,r?r.x:void 0),LP(n.y,e,vW,t?t.y:void 0,r?r.y:void 0)}function UP(n){return n.translate===0&&n.scale===1}function vk(n){return UP(n.x)&&UP(n.y)}function wW(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function wk(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function jP(n){return cr(n.x)/cr(n.y)}class _W{constructor(){this.members=[]}add(e){J_(this.members,e),e.scheduleRender()}remove(e){if(Z_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function BP(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:m}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const EW=(n,e)=>n.depth-e.depth;class TW{constructor(){this.children=[],this.isDirty=!1}add(e){J_(this.children,e),this.isDirty=!0}remove(e){Z_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EW),this.isDirty=!1,this.children.forEach(e)}}function IW(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ss(r),n(s-e))};return Ct.read(r,!0),()=>ss(r)}function SW(n){window.MotionDebug&&window.MotionDebug.record(n)}function PW(n){return n instanceof SVGElement&&n.tagName!=="svg"}function CW(n,e,t){const r=Kn(n)?n:Eu(n);return r.start(X_("",r,e,t)),r.animation}const $P=["","X","Y","Z"],AW={visibility:"hidden"},zP=1e3;let bW=0;const ca={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _k({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=bW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ca.totalNodes=ca.resolvedTargetDeltas=ca.recalculatedProjection=0,this.nodes.forEach(kW),this.nodes.forEach(OW),this.nodes.forEach(LW),this.nodes.forEach(DW),SW(ca)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new TW)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new eE),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=PW(a),this.instance=a;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=IW(v,250),Gf.hasAnimatedSinceResize&&(Gf.hasAnimatedSinceResize=!1,this.nodes.forEach(HP))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||m.getDefaultTransition()||$W,{onLayoutAnimationStart:P,onLayoutAnimationComplete:j}=m.getProps(),M=!this.targetLayout||!wk(this.targetLayout,b)||T,D=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||D||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,D);const B={...Y_(x,"layout"),onPlay:P,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||HP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FW),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WP);return}this.isUpdating||this.nodes.forEach(VW),this.isUpdating=!1,this.nodes.forEach(MW),this.nodes.forEach(xW),this.nodes.forEach(RW),this.clearAllSnapshots();const u=performance.now();Cn.delta=yo(0,1e3/60,u-Cn.timestamp),Cn.timestamp=u,Cn.isProcessing=!0,Vy.update.process(Cn),Vy.preRender.process(Cn),Vy.render.process(Cn),Cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(NW),this.sharedNodes.forEach(UW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=en(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!vk(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||ua(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),zW(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return en();const u=a.measureViewportBox(),{scroll:d}=this.root;return d&&(qs(u.x,d.offset.x),qs(u.y,d.offset.y)),u}removeElementScroll(a){const u=en();wr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:g}=h;if(h!==this.root&&m&&g.layoutScroll){if(m.isRoot){wr(u,a);const{scroll:v}=this.root;v&&(qs(u.x,-v.offset.x),qs(u.y,-v.offset.y))}qs(u.x,m.offset.x),qs(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const d=en();wr(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Gl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ua(m.latestValues)&&Gl(d,m.latestValues)}return ua(this.latestValues)&&Gl(d,this.latestValues),d}removeTransform(a){const u=en();wr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ua(h.latestValues))continue;ew(h.latestValues)&&h.updateSnapshot();const m=en(),g=h.measurePageBox();wr(m,g),FP(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ua(this.latestValues)&&FP(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Cn.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),sd(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),wr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=en(),this.targetWithTransforms=en()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Wz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wr(this.target,this.layout.layoutBox),hk(this.target,this.targetDelta)):wr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),sd(this.relativeTargetOrigin,this.target,T.target),wr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ca.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ew(this.parent.latestValues)||dk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Cn.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;wr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;Zz(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:b}=u;if(!b){this.projectionTransform&&(this.projectionDelta=ql(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ql(),this.projectionDeltaWithTransform=ql());const x=this.projectionTransform;id(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=BP(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),ca.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=en(),T=d?d.source:void 0,b=this.layout?this.layout.source:void 0,x=T!==b,P=this.getStack(),j=!P||P.members.length<=1,M=!!(x&&!j&&this.options.crossfade===!0&&!this.path.some(BW));this.animationProgress=0;let D;this.mixTargetDelta=B=>{const X=B/1e3;qP(g.x,a.x,X),qP(g.y,a.y,X),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sd(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jW(this.relativeTarget,this.relativeTargetOrigin,v,X),D&&wW(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=en()),wr(D,this.relativeTarget)),x&&(this.animationValues=m,fW(m,h,this.latestValues,X,M,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{Gf.hasAnimatedSinceResize=!0,this.currentAnimation=CW(0,zP,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:m}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&Ek(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||en();const g=cr(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=cr(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}wr(u,d),Gl(u,m),id(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new _W),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const h={};for(let m=0;m<$P.length;m++){const g="rotate"+$P[m];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const m in h)a.setStaticValue(m,h[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AW;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=qf(a?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=qf(a?.pointerEvents)||""),this.hasProjected&&!ua(this.latestValues)&&(x.transform=m?m({},""):"none",this.hasProjected=!1),x}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=BP(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:T,y:b}=this.projectionDelta;h.transformOrigin=`${T.origin*100}% ${b.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Np){if(v[x]===void 0)continue;const{correct:P,applyTo:j}=Np[x],M=h.transform==="none"?v[x]:P(v[x],g);if(j){const D=j.length;for(let B=0;B<D;B++)h[j[B]]=M}else h[x]=M}return this.options.layoutId&&(h.pointerEvents=g===this?qf(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(WP),this.root.sharedNodes.clear()}}}function xW(n){n.updateLayout()}function RW(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?_r(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],T=cr(v);v.min=r[g].min,v.max=v.min+T}):Ek(s,t.layoutBox,r)&&_r(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],T=cr(r[g]);v.max=v.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+T)});const u=ql();id(u,r,t.layoutBox);const d=ql();a?id(d,n.applyTransform(i,!0),t.measuredBox):id(d,r,t.layoutBox);const h=!vk(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const b=en();sd(b,t.layoutBox,v.layoutBox);const x=en();sd(x,r,T.layoutBox),wk(b,x)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=b,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function kW(n){ca.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function DW(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function NW(n){n.clearSnapshot()}function WP(n){n.clearMeasurements()}function VW(n){n.isLayoutDirty=!1}function MW(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function HP(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function OW(n){n.resolveTargetDelta()}function LW(n){n.calcProjection()}function FW(n){n.resetRotation()}function UW(n){n.removeLeadSnapshot()}function qP(n,e,t){n.translate=Vt(e.translate,0,t),n.scale=Vt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function GP(n,e,t,r){n.min=Vt(e.min,t.min,r),n.max=Vt(e.max,t.max,r)}function jW(n,e,t,r){GP(n.x,e.x,t.x,r),GP(n.y,e.y,t.y,r)}function BW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const $W={duration:.45,ease:[.4,0,.1,1]},KP=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),QP=KP("applewebkit/")&&!KP("chrome/")?Math.round:qt;function YP(n){n.min=QP(n.min),n.max=QP(n.max)}function zW(n){YP(n.x),YP(n.y)}function Ek(n,e,t){return n==="position"||n==="preserve-aspect"&&!Jv(jP(e),jP(t),.2)}const WW=_k({attachResizeListener:(n,e)=>Xi(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hy={current:void 0},Tk=_k({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Hy.current){const n=new WW({});n.mount(window),n.setOptions({layoutScroll:!0}),Hy.current=n}return Hy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),HW={pan:{Feature:aW},drag:{Feature:oW,ProjectionNode:Tk,MeasureLayout:mk}},qW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function GW(n){const e=qW.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function nw(n,e,t=1){const[r,i]=GW(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return ik(a)?parseFloat(a):a}else return Hv(i)?nw(i,e,t+1):i}function KW(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!Hv(s))return;const a=nw(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!Hv(s))continue;const a=nw(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const QW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ik=n=>QW.has(n),YW=n=>Object.keys(n).some(Ik),XP=n=>n===$a||n===Fe,JP=(n,e)=>parseFloat(n.split(", ")[e]),ZP=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return JP(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?JP(s[1],n):0}},XW=new Set(["x","y","z"]),JW=Gd.filter(n=>!XW.has(n));function ZW(n){const e=[];return JW.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Tu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:ZP(4,13),y:ZP(5,14)};Tu.translateX=Tu.x;Tu.translateY=Tu.y;const eH=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,u={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{u[h]=Tu[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const m=e.getValue(h);m&&m.jump(u[h]),n[h]=Tu[h](d,s)}),n},tH=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Ik);let s=[],a=!1;const u=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let m=t[d],g=Mc(m);const v=e[d];let T;if(Mp(v)){const b=v.length,x=v[0]===null?1:0;m=v[x],g=Mc(m);for(let P=x;P<b&&v[P]!==null;P++)T?H_(Mc(v[P])===T):T=Mc(v[P])}else T=Mc(v);if(g!==T)if(XP(g)&&XP(T)){const b=h.get();typeof b=="string"&&h.set(parseFloat(b)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&T===Fe&&(e[d]=v.map(parseFloat))}else g?.transform&&T?.transform&&(m===0||v===0)?m===0?h.set(T.transform(m)):e[d]=g.transform(v):(a||(s=ZW(n),a=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,h=eH(e,n,u);return s.length&&s.forEach(([m,g])=>{n.getValue(m).set(g)}),n.render(),Pm&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function nH(n,e,t,r){return YW(e)?tH(n,e,t,r):{target:e,transitionEnd:r}}const rH=(n,e,t,r)=>{const i=KW(n,e,r);return e=i.target,r=i.transitionEnd,nH(n,e,t,r)},rw={current:null},Sk={current:!1};function iH(){if(Sk.current=!0,!!Pm)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>rw.current=n.matches;n.addListener(e),e()}else rw.current=!1}function sH(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(Kn(s))n.addValue(i,s),Up(r)&&r.add(i);else if(Kn(a))n.addValue(i,Eu(s,{owner:n})),Up(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const u=n.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,Eu(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const eC=new WeakMap,Pk=Object.keys(Pd),oH=Pk.length,tC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],aH=L_.length;class lH{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ct.render(this.render,!1,!0);const{latestValues:u,renderState:d}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=Am(t),this.isVariantNode=uR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{});for(const g in m){const v=m[g];u[g]!==void 0&&Kn(v)&&(v.set(u[g],!1),Up(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,eC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Sk.current||iH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){eC.delete(this.current),this.projection&&this.projection.unmount(),ss(this.notifyUpdate),ss(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=Ba.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ct.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,u;for(let d=0;d<oH;d++){const h=Pk[d],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=Pd[h];v&&(a=v),m(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!m||g&&Wl(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<tC.length;r++){const i=tC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=sH(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<aH;r++){const i=L_[r],s=this.props[i];(Sd(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Eu(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=W_(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Kn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new eE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Ck extends lH{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=Pz(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){Iz(this,r,a);const u=rH(this,r,a,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function uH(n){return window.getComputedStyle(n)}class cH extends Ck{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Ba.has(t)){const r=Q_(t);return r&&r.default||0}else{const r=uH(e),i=(pR(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fk(e,t)}build(e,t,r,i){U_(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return z_(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){_R(e,t,r,i)}}class dH extends Ck{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ba.has(t)){const r=Q_(t);return r&&r.default||0}return t=ER.has(t)?t:M_(t),e.getAttribute(t)}measureInstanceViewportBox(){return en()}scrapeMotionValuesFromProps(e,t){return IR(e,t)}build(e,t,r,i){B_(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){TR(e,t,r,i)}mount(e){this.isSVGTag=$_(e.tagName),super.mount(e)}}const hH=(n,e)=>F_(n)?new dH(e,{enableHardwareAcceleration:!1}):new cH(e,{enableHardwareAcceleration:!0}),fH={layout:{ProjectionNode:Tk,MeasureLayout:mk}},pH={...jz,...o9,...HW,...fH},Af=p$((n,e)=>G$(n,e,pH,hH));function mH(){const[n,e]=k.useState(!1),[t,r]=k.useState(null);k.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let a,u;const d=h=>{h&&h.addEventListener("statechange",()=>{h.state==="installed"&&navigator.serviceWorker.controller&&(r(h),e(!0))})};return navigator.serviceWorker.ready.then(h=>{a=h,h.waiting&&(r(h.waiting),e(!0)),u=()=>{d(h.installing)},h.addEventListener("updatefound",u)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),a&&u&&a.removeEventListener("updatefound",u)}},[]);const i=()=>{t&&t.postMessage({type:"SKIP_WAITING"}),e(!1)};return n?K.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:K.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[K.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),K.jsxs("div",{className:"flex items-center justify-end gap-2",children:[K.jsx(Zl,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),K.jsx(Zl,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}function gH(){return k.useEffect(()=>{const n=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${e}px`)};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),null}const yH=k.lazy(()=>Ti(()=>import("./AuthPage-CoLaC_nd.js"),__vite__mapDeps([0,1,2,3,4]))),vH=k.lazy(()=>Ti(()=>import("./DashboardPage-CmSTV-Sb.js"),__vite__mapDeps([5,6,7,8,9,1,10,2,11,12,13,4,14]))),wH=k.lazy(()=>Ti(()=>import("./ArchivedCyclesPage-CXYBT_xb.js"),__vite__mapDeps([15,8,16,13,9,1,7]))),_H=k.lazy(()=>Ti(()=>import("./CycleDetailPage-C1ZdLQsQ.js"),__vite__mapDeps([17,7,8,9,16,18,6,1,10,2,11,12,13,4,19]))),EH=k.lazy(()=>Ti(()=>import("./SettingsPage-BFf8HC4Y.js"),__vite__mapDeps([20,1,2,12,8,3]))),TH=k.lazy(()=>Ti(()=>import("./ChartPage-IwYP2_Qt.js"),__vite__mapDeps([21,22,12,8,11,14,13,10,1,2,4,9,19]))),IH=k.lazy(()=>Ti(()=>import("./RecordsPage-CRlaE7Id.js"),__vite__mapDeps([18,6,7,8,9,1,10,2,11,12,13,4,16])));function Ol({children:n}){const{user:e}=_m();return e?n:K.jsx(Ky,{to:"/auth",replace:!0})}function SH(){const{user:n,loadingAuth:e}=_m(),t=wo();if(e)return K.jsx(Fv,{children:K.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[K.jsx(Af.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),K.jsx(Af.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const r=n?K.jsx(la,{children:K.jsx("div",{className:"flex min-h-app items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):K.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[K.jsx(Af.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),K.jsx(Af.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return K.jsx(Fv,{children:K.jsx(k.Suspense,{fallback:r,children:K.jsx(n5,{children:K.jsx(a6,{FallbackComponent:A1,children:K.jsxs(MN,{children:[K.jsx(Gi,{path:"/auth",element:n?K.jsx(Ky,{to:"/",replace:!0}):K.jsx(yH,{})}),K.jsx(Gi,{path:"/",element:K.jsx(Ol,{children:K.jsx(la,{children:K.jsx(vH,{})})})}),K.jsx(Gi,{path:"/chart/:cycleId?",element:K.jsx(Ol,{children:K.jsx(TH,{})})}),K.jsx(Gi,{path:"/records",element:K.jsx(Ol,{children:K.jsx(la,{children:K.jsx(IH,{})})})}),K.jsx(Gi,{path:"/archived-cycles",element:K.jsx(Ol,{children:K.jsx(la,{children:K.jsx(wH,{})})})}),K.jsx(Gi,{path:"/settings",element:K.jsx(Ol,{children:K.jsx(la,{children:K.jsx(EH,{})})})}),K.jsx(Gi,{path:"/cycle/:cycleId",element:K.jsx(Ol,{children:K.jsx(la,{children:K.jsx(_H,{})})})}),K.jsx(Gi,{path:"*",element:K.jsx(Ky,{to:n?"/":"/auth",replace:!0})})]})},t.pathname)})})})}function PH(){return K.jsxs(zN,{basename:"/",children:[K.jsx(gH,{}),K.jsx(mH,{}),K.jsxs(F4,{children:[K.jsx(s6,{children:K.jsx(o6,{children:K.jsx(XN,{children:K.jsx(SH,{})})})}),K.jsx(r$,{})]})]})}if(typeof window<"u"){const{hostname:n}=window.location;if(n.endsWith(".firebaseapp.com")){const e=new URL(window.location.href);e.hostname=n.replace(".firebaseapp.com",".web.app"),window.location.replace(e.toString())}}$D.createRoot(document.getElementById("root")).render(K.jsx(tn.StrictMode,{children:K.jsx(PH,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=new URL("sw.js","/");navigator.serviceWorker.register(n).catch(e=>{console.error("Service worker registration failed:",e)})});export{Rn as $,c6 as A,Zl as B,h6 as C,Oa as D,b1 as E,M1 as F,or as G,La as H,Id as I,ja as J,DH as K,qN as L,e6 as M,aw as N,wo as O,Pi as P,O4 as Q,tn as R,la as S,n$ as T,p6 as U,f6 as V,e5 as W,m6 as X,Et as Y,jt as Z,Ti as _,dw as a,U4 as a0,Du as a1,Pp as a2,i$ as a3,Ct as a4,L$ as a5,V_ as a6,cR as a7,Jx as a8,W4 as a9,Tm as aa,k5 as ab,V1 as ac,k1 as ad,LB as ae,u5 as af,V5 as ag,G6 as ah,C1 as ai,ow as aj,NH as ak,kH as al,m1 as am,BD as an,Py as ao,xc as ap,Rc as aq,_j as ar,CH as as,iw as at,ve as au,y_ as b,Nu as c,xt as d,Ce as e,_e as f,Mn as g,Sk as h,iH as i,K as j,it as k,Em as l,Af as m,H4 as n,ot as o,rw as p,$4 as q,k as r,nx as s,d6 as t,_m as u,AH as v,p1 as w,Bj as x,is as y,Wf as z};
