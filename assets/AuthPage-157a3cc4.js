import{c as l,r,u as M,a as q,b as O,j as e,m as g,B as x}from"./index-b896ef43.js";import{I as m}from"./input-2b285a94.js";import{L as u}from"./label-3b80786f.js";import{E as f}from"./eye-off-b1122abf.js";import{E as v}from"./eye-153cd699.js";const b=l("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),A=l("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),B=l("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),T=l("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Z=()=>{const[s,w]=r.useState(!0),[i,j]=r.useState(""),[o,N]=r.useState(""),[h,k]=r.useState(""),[n,C]=r.useState(!1),[c,P]=r.useState(!1),{login:E,register:S,resetPassword:I}=M(),p=q(),{toast:a}=O(),[y,d]=r.useState(!1),L=async t=>{t.preventDefault(),d(!0);try{if(s)await E(i,o),a({title:"Inicio de sesión exitoso",description:"Bienvenida de nuevo."}),p("/");else{if(o!==h){a({title:"Error de registro",description:"Las contraseñas no coinciden.",variant:"destructive"}),d(!1);return}await S(i,o),a({title:"Registro exitoso",description:"Tu cuenta ha sido creada."}),p("/")}}catch(R){a({title:s?"Error al iniciar sesión":"Error al registrarse",description:R.message,variant:"destructive"}),d(!1)}},F=async()=>{if(!i){a({title:"Correo requerido",description:"Introduce tu correo para restablecer la contraseña.",variant:"destructive"});return}try{await I(i),a({title:"Correo enviado",description:"Revisa tu bandeja para restablecer la contraseña."})}catch(t){a({title:"Error",description:t.message,variant:"destructive"})}};return e.jsxs("div",{className:"min-h-[calc(100dvh-var(--bottom-nav-safe))] bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50 flex flex-col justify-center items-center p-4",children:[e.jsxs(g.div,{className:"w-full max-w-md bg-white/80 backdrop-blur-md shadow-xl rounded-xl p-8 sm:p-10",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(g.h1,{className:"text-3xl sm:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-rose-400 via-pink-400 to-fuchsia-500 py-2 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},children:"FertiliApp"}),e.jsx("p",{className:"text-gray-600 text-lg",children:s?"Inicia sesión para continuar":"Crea tu cuenta"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"email",className:"flex items-center text-gray-700 text-lg",children:[e.jsx(B,{className:"mr-2 h-5 w-5 text-pink-400"})," Correo Electrónico"]}),e.jsx(m,{id:"email",type:"email",value:i,onChange:t=>j(t.target.value),placeholder:"tu@email.com",required:!0,className:"bg-gray-50 border-gray-200 text-gray-800 placeholder-gray-400 focus:ring-pink-500 focus:border-pink-500 text-base py-3 px-4"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"password",className:"flex items-center text-gray-700 text-lg",children:[e.jsx(b,{className:"mr-2 h-5 w-5 text-rose-400"})," Contraseña"]}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"password",type:n?"text":"password",value:o,onChange:t=>N(t.target.value),placeholder:"••••••••",required:!0,className:"bg-gray-50 border-gray-200 text-gray-800 placeholder-gray-400 focus:ring-pink-500 focus:border-pink-500 text-base py-3 px-4 pr-10"}),e.jsx("button",{type:"button",onClick:()=>C(!n),className:"absolute inset-y-0 right-3 flex items-center text-gray-500","aria-label":n?"Ocultar contraseña":"Mostrar contraseña",children:n?e.jsx(f,{className:"h-5 w-5"}):e.jsx(v,{className:"h-5 w-5"})})]})]}),s&&e.jsx("div",{className:"text-right",children:e.jsx(x,{variant:"link",type:"button",onClick:F,className:"text-pink-600 hover:text-pink-500 text-sm",children:"¿Olvidaste tu contraseña?"})}),!s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"confirmPassword",className:"flex items-center text-gray-700 text-lg",children:[e.jsx(b,{className:"mr-2 h-5 w-5 text-rose-400"})," Confirmar Contraseña"]}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"confirmPassword",type:c?"text":"password",value:h,onChange:t=>k(t.target.value),placeholder:"••••••••",required:!0,className:"bg-gray-50 border-gray-200 text-gray-800 placeholder-gray-400 focus:ring-pink-500 focus:border-pink-500 text-base py-3 px-4 pr-10"}),e.jsx("button",{type:"button",onClick:()=>P(!c),className:"absolute inset-y-0 right-3 flex items-center text-gray-500","aria-label":c?"Ocultar contraseña":"Mostrar contraseña",children:c?e.jsx(f,{className:"h-5 w-5"}):e.jsx(v,{className:"h-5 w-5"})})]})]}),e.jsx(x,{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-pink-500 to-fuchsia-600 hover:from-pink-600 hover:to-fuchsia-700 text-white font-semibold py-3 text-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center",children:y?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-5 w-5"})," Iniciar Sesión"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"mr-2 h-5 w-5"})," Registrarse"]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(x,{variant:"link",onClick:()=>w(!s),className:"text-pink-600 hover:text-pink-500 text-base",children:s?"¿No tienes cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"})})]}),e.jsx("footer",{className:"w-full max-w-md mt-12 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," FertiliApp. Todos los derechos reservados."]})})]})};export{Z as default};
