const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-BcuPcsIo.js","assets/label-BrdHOCTF.js","assets/InstallPrompt-BWkzRJq-.js","assets/eye-COo0Vokr.js","assets/DashboardPage-DzG9MXDx.js","assets/PostpartumExitDialog-D68MswuQ.js","assets/useBackClose-CETyKRQ2.js","assets/badge-DykpjFnT.js","assets/useCycleData-Dq0sFEDe.js","assets/DeletionDialog-eRV-pJhK.js","assets/DataEntryForm-BoWzh_6Y.js","assets/computePeakStatuses-DaIqHORZ.js","assets/peak-mode-button-Dr3pvIZC.js","assets/useFertilityChart-D3HVJDKg.js","assets/ArchivedCyclesPage-uCOwMjRh.js","assets/HeaderIconButton-B7WKOykb.js","assets/CycleDetailPage-BxKgAdQS.js","assets/RecordsPage-DlKFVGTf.js","assets/arrow-left-BKoATTuF.js","assets/SettingsPage-BrwviuS0.js","assets/ChartPage-HeJkwvpP.js","assets/FertilityChart-DPQbct4w.js"])))=>i.map(i=>d[i]);
function LD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var kH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ry={exports:{}},Sc={},iy={exports:{}},We={};var hT;function FD(){if(hT)return We;hT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function P(N,z,ee){this.props=N,this.context=z,this.refs=x,this.updater=ee||T}P.prototype.isReactComponent={},P.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},P.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function j(){}j.prototype=P.prototype;function M(N,z,ee){this.props=N,this.context=z,this.refs=x,this.updater=ee||T}var D=M.prototype=new j;D.constructor=M,A(D,P.prototype),D.isPureReactComponent=!0;var B=Array.isArray,Z=Object.prototype.hasOwnProperty,re={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(N,z,ee){var se,oe={},he=null,we=null;if(z!=null)for(se in z.ref!==void 0&&(we=z.ref),z.key!==void 0&&(he=""+z.key),z)Z.call(z,se)&&!C.hasOwnProperty(se)&&(oe[se]=z[se]);var Me=arguments.length-2;if(Me===1)oe.children=ee;else if(1<Me){for(var Ue=Array(Me),at=0;at<Me;at++)Ue[at]=arguments[at+2];oe.children=Ue}if(N&&N.defaultProps)for(se in Me=N.defaultProps,Me)oe[se]===void 0&&(oe[se]=Me[se]);return{$$typeof:n,type:N,key:he,ref:we,props:oe,_owner:re.current}}function b(N,z){return{$$typeof:n,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function O(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function L(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ee){return z[ee]})}var U=/\/+/g;function V(N,z){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):z.toString(36)}function ce(N,z,ee,se,oe){var he=typeof N;(he==="undefined"||he==="boolean")&&(N=null);var we=!1;if(N===null)we=!0;else switch(he){case"string":case"number":we=!0;break;case"object":switch(N.$$typeof){case n:case e:we=!0}}if(we)return we=N,oe=oe(we),N=se===""?"."+V(we,0):se,B(oe)?(ee="",N!=null&&(ee=N.replace(U,"$&/")+"/"),ce(oe,z,ee,"",function(at){return at})):oe!=null&&(O(oe)&&(oe=b(oe,ee+(!oe.key||we&&we.key===oe.key?"":(""+oe.key).replace(U,"$&/")+"/")+N)),z.push(oe)),1;if(we=0,se=se===""?".":se+":",B(N))for(var Me=0;Me<N.length;Me++){he=N[Me];var Ue=se+V(he,Me);we+=ce(he,z,ee,Ue,oe)}else if(Ue=v(N),typeof Ue=="function")for(N=Ue.call(N),Me=0;!(he=N.next()).done;)he=he.value,Ue=se+V(he,Me++),we+=ce(he,z,ee,Ue,oe);else if(he==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return we}function xe(N,z,ee){if(N==null)return N;var se=[],oe=0;return ce(N,se,"","",function(he){return z.call(ee,he,oe++)}),se}function Se(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(ee){(N._status===0||N._status===-1)&&(N._status=1,N._result=ee)},function(ee){(N._status===0||N._status===-1)&&(N._status=2,N._result=ee)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var De={current:null},W={transition:null},Y={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:W,ReactCurrentOwner:re};function X(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:xe,forEach:function(N,z,ee){xe(N,function(){z.apply(this,arguments)},ee)},count:function(N){var z=0;return xe(N,function(){z++}),z},toArray:function(N){return xe(N,function(z){return z})||[]},only:function(N){if(!O(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},We.Component=P,We.Fragment=t,We.Profiler=i,We.PureComponent=M,We.StrictMode=r,We.Suspense=d,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,We.act=X,We.cloneElement=function(N,z,ee){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var se=A({},N.props),oe=N.key,he=N.ref,we=N._owner;if(z!=null){if(z.ref!==void 0&&(he=z.ref,we=re.current),z.key!==void 0&&(oe=""+z.key),N.type&&N.type.defaultProps)var Me=N.type.defaultProps;for(Ue in z)Z.call(z,Ue)&&!C.hasOwnProperty(Ue)&&(se[Ue]=z[Ue]===void 0&&Me!==void 0?Me[Ue]:z[Ue])}var Ue=arguments.length-2;if(Ue===1)se.children=ee;else if(1<Ue){Me=Array(Ue);for(var at=0;at<Ue;at++)Me[at]=arguments[at+2];se.children=Me}return{$$typeof:n,type:N.type,key:oe,ref:he,props:se,_owner:we}},We.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:s,_context:N},N.Consumer=N},We.createElement=I,We.createFactory=function(N){var z=I.bind(null,N);return z.type=N,z},We.createRef=function(){return{current:null}},We.forwardRef=function(N){return{$$typeof:u,render:N}},We.isValidElement=O,We.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:Se}},We.memo=function(N,z){return{$$typeof:h,type:N,compare:z===void 0?null:z}},We.startTransition=function(N){var z=W.transition;W.transition={};try{N()}finally{W.transition=z}},We.unstable_act=X,We.useCallback=function(N,z){return De.current.useCallback(N,z)},We.useContext=function(N){return De.current.useContext(N)},We.useDebugValue=function(){},We.useDeferredValue=function(N){return De.current.useDeferredValue(N)},We.useEffect=function(N,z){return De.current.useEffect(N,z)},We.useId=function(){return De.current.useId()},We.useImperativeHandle=function(N,z,ee){return De.current.useImperativeHandle(N,z,ee)},We.useInsertionEffect=function(N,z){return De.current.useInsertionEffect(N,z)},We.useLayoutEffect=function(N,z){return De.current.useLayoutEffect(N,z)},We.useMemo=function(N,z){return De.current.useMemo(N,z)},We.useReducer=function(N,z,ee){return De.current.useReducer(N,z,ee)},We.useRef=function(N){return De.current.useRef(N)},We.useState=function(N){return De.current.useState(N)},We.useSyncExternalStore=function(N,z,ee){return De.current.useSyncExternalStore(N,z,ee)},We.useTransition=function(){return De.current.useTransition()},We.version="18.3.1",We}var fT;function l_(){return fT||(fT=1,iy.exports=FD()),iy.exports}var pT;function UD(){if(pT)return Sc;pT=1;var n=l_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},v=null,T=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(T=d.ref);for(m in d)r.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:v,ref:T,props:g,_owner:i.current}}return Sc.Fragment=t,Sc.jsx=a,Sc.jsxs=a,Sc}var mT;function jD(){return mT||(mT=1,ry.exports=UD()),ry.exports}var K=jD(),k=l_();const nn=a_(k),u_=LD({__proto__:null,default:nn},[k]);var df={},sy={exports:{}},Hn={},oy={exports:{}},ay={};var gT;function BD(){return gT||(gT=1,(function(n){function e(W,Y){var X=W.length;W.push(Y);e:for(;0<X;){var N=X-1>>>1,z=W[N];if(0<i(z,Y))W[N]=Y,W[X]=z,X=N;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],X=W.pop();if(X!==Y){W[0]=X;e:for(var N=0,z=W.length,ee=z>>>1;N<ee;){var se=2*(N+1)-1,oe=W[se],he=se+1,we=W[he];if(0>i(oe,X))he<z&&0>i(we,oe)?(W[N]=we,W[he]=X,N=he):(W[N]=oe,W[se]=X,N=se);else if(he<z&&0>i(we,X))W[N]=we,W[he]=X,N=he;else break e}}return Y}function i(W,Y){var X=W.sortIndex-Y.sortIndex;return X!==0?X:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,T=!1,A=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(W){for(var Y=t(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=W)r(h),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=t(h)}}function B(W){if(x=!1,D(W),!A)if(t(d)!==null)A=!0,Se(Z);else{var Y=t(h);Y!==null&&De(B,Y.startTime-W)}}function Z(W,Y){A=!1,x&&(x=!1,j(I),I=-1),T=!0;var X=v;try{for(D(Y),g=t(d);g!==null&&(!(g.expirationTime>Y)||W&&!L());){var N=g.callback;if(typeof N=="function"){g.callback=null,v=g.priorityLevel;var z=N(g.expirationTime<=Y);Y=n.unstable_now(),typeof z=="function"?g.callback=z:g===t(d)&&r(d),D(Y)}else r(d);g=t(d)}if(g!==null)var ee=!0;else{var se=t(h);se!==null&&De(B,se.startTime-Y),ee=!1}return ee}finally{g=null,v=X,T=!1}}var re=!1,C=null,I=-1,b=5,O=-1;function L(){return!(n.unstable_now()-O<b)}function U(){if(C!==null){var W=n.unstable_now();O=W;var Y=!0;try{Y=C(!0,W)}finally{Y?V():(re=!1,C=null)}}else re=!1}var V;if(typeof M=="function")V=function(){M(U)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,xe=ce.port2;ce.port1.onmessage=U,V=function(){xe.postMessage(null)}}else V=function(){P(U,0)};function Se(W){C=W,re||(re=!0,V())}function De(W,Y){I=P(function(){W(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){A||T||(A=!0,Se(Z))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var X=v;v=Y;try{return W()}finally{v=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=v;v=W;try{return Y()}finally{v=X}},n.unstable_scheduleCallback=function(W,Y,X){var N=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?N+X:N):X=N,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,W={id:m++,callback:Y,priorityLevel:W,startTime:X,expirationTime:z,sortIndex:-1},X>N?(W.sortIndex=X,e(h,W),t(d)===null&&W===t(h)&&(x?(j(I),I=-1):x=!0,De(B,X-N))):(W.sortIndex=z,e(d,W),A||T||(A=!0,Se(Z))),W},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(W){var Y=v;return function(){var X=v;v=Y;try{return W.apply(this,arguments)}finally{v=X}}}})(ay)),ay}var yT;function $D(){return yT||(yT=1,oy.exports=BD()),oy.exports}var vT;function zD(){if(vT)return Hn;vT=1;var n=l_(),e=$D();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function T(o,l,c,p){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function A(o,l,c,p){if(l===null||typeof l>"u"||T(o,l,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function x(o,l,c,p,y,_,S){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=o,this.type=l,this.sanitizeURL=_,this.removeEmptyString=S}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){P[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];P[l]=new x(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){P[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){P[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){P[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){P[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){P[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){P[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){P[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){P[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),P.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){P[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function D(o,l,c,p){var y=P.hasOwnProperty(l)?P[l]:null;(y!==null?y.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(A(l,c,y,p)&&(c=null),p||y===null?v(l)&&(c===null?o.removeAttribute(l):o.setAttribute(l,""+c)):y.mustUseProperty?o[y.propertyName]=c===null?y.type===3?!1:"":c:(l=y.attributeName,p=y.attributeNamespace,c===null?o.removeAttribute(l):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?o.setAttributeNS(p,l,c):o.setAttribute(l,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),re=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),W=Symbol.iterator;function Y(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var X=Object.assign,N;function z(o){if(N===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);N=l&&l[1]||""}return`
`+N+o}var ee=!1;function se(o,l){if(!o||ee)return"";ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(te){var p=te}Reflect.construct(o,[],l)}else{try{l.call()}catch(te){p=te}o.call(l.prototype)}else{try{throw Error()}catch(te){p=te}o()}}catch(te){if(te&&p&&typeof te.stack=="string"){for(var y=te.stack.split(`
`),_=p.stack.split(`
`),S=y.length-1,F=_.length-1;1<=S&&0<=F&&y[S]!==_[F];)F--;for(;1<=S&&0<=F;S--,F--)if(y[S]!==_[F]){if(S!==1||F!==1)do if(S--,F--,0>F||y[S]!==_[F]){var $=`
`+y[S].replace(" at new "," at ");return o.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",o.displayName)),$}while(1<=S&&0<=F);break}}}finally{ee=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?z(o):""}function oe(o){switch(o.tag){case 5:return z(o.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return o=se(o.type,!1),o;case 11:return o=se(o.type.render,!1),o;case 1:return o=se(o.type,!0),o;default:return""}}function he(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case re:return"Portal";case b:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case ce:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case U:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case xe:return l=o.displayName||null,l!==null?l:he(o.type)||"Memo";case Se:l=o._payload,o=o._init;try{return he(o(l))}catch{}}return null}function we(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Me(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ue(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function at(o){var l=Ue(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,_.call(this,S)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Lt(o){o._valueTracker||(o._valueTracker=at(o))}function zr(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),p="";return o&&(p=Ue(o)?o.checked?"true":"false":o.value),o=p,o!==c?(l.setValue(o),!0):!1}function Pr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function cs(o,l){var c=l.checked;return X({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function Ao(o,l){var c=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;c=Me(l.value!=null?l.value:c),o._wrapperState={initialChecked:p,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ds(o,l){l=l.checked,l!=null&&D(o,"checked",l,!1)}function Cr(o,l){ds(o,l);var c=Me(l.value),p=l.type;if(c!=null)p==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ft(o,l.type,c):l.hasOwnProperty("defaultValue")&&Ft(o,l.type,Me(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function xo(o,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,c||l===o.value||(o.value=l),o.defaultValue=l}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function Ft(o,l,c){(l!=="number"||Pr(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var Rt=Array.isArray;function En(o,l,c,p){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&p&&(o[c].defaultSelected=!0)}else{for(c=""+Me(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Ro(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hs(o,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if(Rt(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}o._wrapperState={initialValue:Me(c)}}function ko(o,l){var c=Me(l.value),p=Me(l.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),l.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),p!=null&&(o.defaultValue=""+p)}function br(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Do(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fs(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Do(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Wr,qa=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,p,y){MSApp.execUnsafeLocalFunction(function(){return o(l,c,p,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Wr=Wr||document.createElement("div"),Wr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Wr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Xn(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(fr).forEach(function(o){ut.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),fr[l]=fr[o]})});function Hr(o,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||fr.hasOwnProperty(o)&&fr[o]?(""+l).trim():l+"px"}function ps(o,l){o=o.style;for(var c in l)if(l.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=Hr(c,l[c],p);c==="float"&&(c="cssFloat"),p?o.setProperty(c,y):o[c]=y}}var Mu=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ar(o,l){if(l){if(Mu[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ga(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ms=null;function Ka(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ai=null,xi=null,Ut=null;function Ou(o){if(o=uc(o)){if(typeof Ai!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Ph(l),Ai(o.stateNode,o.type,l))}}function gs(o){xi?Ut?Ut.push(o):Ut=[o]:xi=o}function ys(){if(xi){var o=xi,l=Ut;if(Ut=xi=null,Ou(o),l)for(o=0;o<l.length;o++)Ou(l[o])}}function Zd(o,l){return o(l)}function eh(){}var qr=!1;function th(o,l,c){if(qr)return o(l,c);qr=!0;try{return Zd(o,l,c)}finally{qr=!1,(xi!==null||Ut!==null)&&(eh(),ys())}}function No(o,l){var c=o.stateNode;if(c===null)return null;var p=Ph(c);if(p===null)return null;c=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var vs=!1;if(u)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){vs=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{vs=!1}function nh(o,l,c,p,y,_,S,F,$){var te=Array.prototype.slice.call(arguments,3);try{l.apply(c,te)}catch(ue){this.onError(ue)}}var Ri=!1,Gr=null,Qa=!1,pr=null,rh={onError:function(o){Ri=!0,Gr=o}};function ih(o,l,c,p,y,_,S,F,$){Ri=!1,Gr=null,nh.apply(rh,arguments)}function Lu(o,l,c,p,y,_,S,F,$){if(ih.apply(this,arguments),Ri){if(Ri){var te=Gr;Ri=!1,Gr=null}else throw Error(t(198));Qa||(Qa=!0,pr=te)}}function xr(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function Fu(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function sh(o){if(xr(o)!==o)throw Error(t(188))}function oh(o){var l=o.alternate;if(!l){if(l=xr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var c=o,p=l;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return sh(y),o;if(_===p)return sh(y),l;_=_.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=_;else{for(var S=!1,F=y.child;F;){if(F===c){S=!0,c=y,p=_;break}if(F===p){S=!0,p=y,c=_;break}F=F.sibling}if(!S){for(F=_.child;F;){if(F===c){S=!0,c=_,p=y;break}if(F===p){S=!0,p=_,c=y;break}F=F.sibling}if(!S)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:l}function ah(o){return o=oh(o),o!==null?Vo(o):null}function Vo(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Vo(o);if(l!==null)return l;o=o.sibling}return null}var Uu=e.unstable_scheduleCallback,Ya=e.unstable_cancelCallback,Mo=e.unstable_shouldYield,ki=e.unstable_requestPaint,Tt=e.unstable_now,Vm=e.unstable_getCurrentPriorityLevel,Xa=e.unstable_ImmediatePriority,ju=e.unstable_UserBlockingPriority,Oo=e.unstable_NormalPriority,Bu=e.unstable_LowPriority,Ja=e.unstable_IdlePriority,Lo=null,Jn=null;function lh(o){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Lo,o,void 0,(o.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:Fo,Kr=Math.log,mr=Math.LN2;function Fo(o){return o>>>=0,o===0?32:31-(Kr(o)/mr|0)|0}var Qr=64,ws=4194304;function it(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Di(o,l){var c=o.pendingLanes;if(c===0)return 0;var p=0,y=o.suspendedLanes,_=o.pingedLanes,S=c&268435455;if(S!==0){var F=S&~y;F!==0?p=it(F):(_&=S,_!==0&&(p=it(_)))}else S=c&~y,S!==0?p=it(S):_!==0&&(p=it(_));if(p===0)return 0;if(l!==0&&l!==p&&(l&y)===0&&(y=p&-p,_=l&-l,y>=_||y===16&&(_&4194240)!==0))return l;if((p&4)!==0&&(p|=c&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)c=31-Zn(l),y=1<<c,p|=o[c],l&=~y;return p}function Uo(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jo(o,l){for(var c=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes;0<_;){var S=31-Zn(_),F=1<<S,$=y[S];$===-1?((F&c)===0||(F&p)!==0)&&(y[S]=Uo(F,l)):$<=l&&(o.expiredLanes|=F),_&=~F}}function $u(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function zu(){var o=Qr;return Qr<<=1,(Qr&4194240)===0&&(Qr=64),o}function Wu(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Bo(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Zn(l),o[l]=c}function Mm(o,l){var c=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<c;){var y=31-Zn(c),_=1<<y;l[y]=0,p[y]=-1,o[y]=-1,c&=~_}}function Hu(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var p=31-Zn(c),y=1<<p;y&l|o[p]&l&&(o[p]|=l),c&=~y}}var Ke=0;function Yr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var qu,Za,Gu,Ku,Qu,Xr=!1,el=[],Jr=null,Zr=null,gn=null,$o=new Map,Ni=new Map,er=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Es(o,l){switch(o){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":$o.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ni.delete(l.pointerId)}}function Rr(o,l,c,p,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:c,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},l!==null&&(l=uc(l),l!==null&&Za(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function ch(o,l,c,p,y){switch(l){case"focusin":return Jr=Rr(Jr,o,l,c,p,y),!0;case"dragenter":return Zr=Rr(Zr,o,l,c,p,y),!0;case"mouseover":return gn=Rr(gn,o,l,c,p,y),!0;case"pointerover":var _=y.pointerId;return $o.set(_,Rr($o.get(_)||null,o,l,c,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Ni.set(_,Rr(Ni.get(_)||null,o,l,c,p,y)),!0}return!1}function tl(o){var l=qo(o.target);if(l!==null){var c=xr(l);if(c!==null){if(l=c.tag,l===13){if(l=Fu(c),l!==null){o.blockedOn=l,Qu(o.priority,function(){Gu(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function yt(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=nl(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var p=new c.constructor(c.type,c);ms=p,c.target.dispatchEvent(p),ms=null}else return l=uc(c),l!==null&&Za(l),o.blockedOn=c,!1;l.shift()}return!0}function dh(o,l,c){yt(o)&&c.delete(l)}function Om(){Xr=!1,Jr!==null&&yt(Jr)&&(Jr=null),Zr!==null&&yt(Zr)&&(Zr=null),gn!==null&&yt(gn)&&(gn=null),$o.forEach(dh),Ni.forEach(dh)}function Ts(o,l){o.blockedOn===l&&(o.blockedOn=null,Xr||(Xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Om)))}function Is(o){function l(y){return Ts(y,o)}if(0<el.length){Ts(el[0],o);for(var c=1;c<el.length;c++){var p=el[c];p.blockedOn===o&&(p.blockedOn=null)}}for(Jr!==null&&Ts(Jr,o),Zr!==null&&Ts(Zr,o),gn!==null&&Ts(gn,o),$o.forEach(l),Ni.forEach(l),c=0;c<er.length;c++)p=er[c],p.blockedOn===o&&(p.blockedOn=null);for(;0<er.length&&(c=er[0],c.blockedOn===null);)tl(c),c.blockedOn===null&&er.shift()}var Vi=B.ReactCurrentBatchConfig,Mi=!0;function ei(o,l,c,p){var y=Ke,_=Vi.transition;Vi.transition=null;try{Ke=1,Yu(o,l,c,p)}finally{Ke=y,Vi.transition=_}}function hh(o,l,c,p){var y=Ke,_=Vi.transition;Vi.transition=null;try{Ke=4,Yu(o,l,c,p)}finally{Ke=y,Vi.transition=_}}function Yu(o,l,c,p){if(Mi){var y=nl(o,l,c,p);if(y===null)Gm(o,l,p,ti,c),Es(o,p);else if(ch(y,o,l,c,p))p.stopPropagation();else if(Es(o,p),l&4&&-1<uh.indexOf(o)){for(;y!==null;){var _=uc(y);if(_!==null&&qu(_),_=nl(o,l,c,p),_===null&&Gm(o,l,p,ti,c),_===y)break;y=_}y!==null&&p.stopPropagation()}else Gm(o,l,p,null,c)}}var ti=null;function nl(o,l,c,p){if(ti=null,o=Ka(p),o=qo(o),o!==null)if(l=xr(o),l===null)o=null;else if(c=l.tag,c===13){if(o=Fu(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return ti=o,null}function rl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vm()){case Xa:return 1;case ju:return 4;case Oo:case Bu:return 16;case Ja:return 536870912;default:return 16}default:return 16}}var tr=null,il=null,Oi=null;function fh(){if(Oi)return Oi;var o,l=il,c=l.length,p,y="value"in tr?tr.value:tr.textContent,_=y.length;for(o=0;o<c&&l[o]===y[o];o++);var S=c-o;for(p=1;p<=S&&l[c-p]===y[_-p];p++);return Oi=y.slice(o,1<p?1-p:void 0)}function zo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function ni(){return!0}function Xu(){return!1}function Tn(o){function l(c,p,y,_,S){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(c=o[F],this[F]=c?c(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ni:Xu,this.isPropagationStopped=Xu,this}return X(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),l}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Tn(ri),Ss=X({},ri,{view:0,detail:0}),sl=Tn(Ss),ol,al,nr,Ho=X({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==nr&&(nr&&o.type==="mousemove"?(ol=o.screenX-nr.screenX,al=o.screenY-nr.screenY):al=ol=0,nr=o),ol)},movementY:function(o){return"movementY"in o?o.movementY:al}}),Ju=Tn(Ho),ph=X({},Ho,{dataTransfer:0}),mh=Tn(ph),ll=X({},Ss,{relatedTarget:0}),yn=Tn(ll),gh=X({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=Tn(gh),Ps=X({},ri,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),f=Tn(Ps),w=X({},ri,{data:0}),E=Tn(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=ne[o])?!!l[o]:!1}function $e(){return pe}var Wt=X({},Ss,{key:function(o){if(o.key){var l=R[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=zo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Q[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(o){return o.type==="keypress"?zo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ct=Tn(Wt),Jt=X({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=Tn(Jt),Li=X({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),ii=Tn(Li),si=X({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),ul=Tn(si),Zu=X({},Ho,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),kk=Tn(Zu),Dk=[9,13,27,32],Lm=u&&"CompositionEvent"in window,ec=null;u&&"documentMode"in document&&(ec=document.documentMode);var Nk=u&&"TextEvent"in window&&!ec,i0=u&&(!Lm||ec&&8<ec&&11>=ec),s0=" ",o0=!1;function a0(o,l){switch(o){case"keyup":return Dk.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var cl=!1;function Vk(o,l){switch(o){case"compositionend":return l0(l);case"keypress":return l.which!==32?null:(o0=!0,s0);case"textInput":return o=l.data,o===s0&&o0?null:o;default:return null}}function Mk(o,l){if(cl)return o==="compositionend"||!Lm&&a0(o,l)?(o=fh(),Oi=il=tr=null,cl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return i0&&l.locale!=="ko"?null:l.data;default:return null}}var Ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Ok[o.type]:l==="textarea"}function c0(o,l,c,p){gs(p),l=Th(l,"onChange"),0<l.length&&(c=new Wo("onChange","change",null,c,p),o.push({event:c,listeners:l}))}var tc=null,nc=null;function Lk(o){A0(o,0)}function vh(o){var l=ml(o);if(zr(l))return o}function Fk(o,l){if(o==="change")return l}var d0=!1;if(u){var Fm;if(u){var Um="oninput"in document;if(!Um){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Um=typeof h0.oninput=="function"}Fm=Um}else Fm=!1;d0=Fm&&(!document.documentMode||9<document.documentMode)}function f0(){tc&&(tc.detachEvent("onpropertychange",p0),nc=tc=null)}function p0(o){if(o.propertyName==="value"&&vh(nc)){var l=[];c0(l,nc,o,Ka(o)),th(Lk,l)}}function Uk(o,l,c){o==="focusin"?(f0(),tc=l,nc=c,tc.attachEvent("onpropertychange",p0)):o==="focusout"&&f0()}function jk(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return vh(nc)}function Bk(o,l){if(o==="click")return vh(l)}function $k(o,l){if(o==="input"||o==="change")return vh(l)}function zk(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var kr=typeof Object.is=="function"?Object.is:zk;function rc(o,l){if(kr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(l,y)||!kr(o[y],l[y]))return!1}return!0}function m0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function g0(o,l){var c=m0(o);o=0;for(var p;c;){if(c.nodeType===3){if(p=o+c.textContent.length,o<=l&&p>=l)return{node:c,offset:l-o};o=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=m0(c)}}function y0(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?y0(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function v0(){for(var o=window,l=Pr();l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=Pr(o.document)}return l}function jm(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Wk(o){var l=v0(),c=o.focusedElem,p=o.selectionRange;if(l!==c&&c&&c.ownerDocument&&y0(c.ownerDocument.documentElement,c)){if(p!==null&&jm(c)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(o,c.value.length);else if(o=(l=c.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=c.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!o.extend&&_>p&&(y=p,p=_,_=y),y=g0(c,_);var S=g0(c,p);y&&S&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),_>p?(o.addRange(l),o.extend(S.node,S.offset)):(l.setEnd(S.node,S.offset),o.addRange(l)))}}for(l=[],o=c;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)o=l[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Hk=u&&"documentMode"in document&&11>=document.documentMode,dl=null,Bm=null,ic=null,$m=!1;function _0(o,l,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$m||dl==null||dl!==Pr(p)||(p=dl,"selectionStart"in p&&jm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ic&&rc(ic,p)||(ic=p,p=Th(Bm,"onSelect"),0<p.length&&(l=new Wo("onSelect","select",null,l,c),o.push({event:l,listeners:p}),l.target=dl)))}function _h(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var hl={animationend:_h("Animation","AnimationEnd"),animationiteration:_h("Animation","AnimationIteration"),animationstart:_h("Animation","AnimationStart"),transitionend:_h("Transition","TransitionEnd")},zm={},w0={};u&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function wh(o){if(zm[o])return zm[o];if(!hl[o])return o;var l=hl[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in w0)return zm[o]=l[c];return o}var E0=wh("animationend"),T0=wh("animationiteration"),I0=wh("animationstart"),S0=wh("transitionend"),P0=new Map,C0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(o,l){P0.set(o,l),s(l,[o])}for(var Wm=0;Wm<C0.length;Wm++){var Hm=C0[Wm],qk=Hm.toLowerCase(),Gk=Hm[0].toUpperCase()+Hm.slice(1);Cs(qk,"on"+Gk)}Cs(E0,"onAnimationEnd"),Cs(T0,"onAnimationIteration"),Cs(I0,"onAnimationStart"),Cs("dblclick","onDoubleClick"),Cs("focusin","onFocus"),Cs("focusout","onBlur"),Cs(S0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kk=new Set("cancel close invalid load scroll toggle".split(" ").concat(sc));function b0(o,l,c){var p=o.type||"unknown-event";o.currentTarget=c,Lu(p,l,void 0,o),o.currentTarget=null}function A0(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var p=o[c],y=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var S=p.length-1;0<=S;S--){var F=p[S],$=F.instance,te=F.currentTarget;if(F=F.listener,$!==_&&y.isPropagationStopped())break e;b0(y,F,te),_=$}else for(S=0;S<p.length;S++){if(F=p[S],$=F.instance,te=F.currentTarget,F=F.listener,$!==_&&y.isPropagationStopped())break e;b0(y,F,te),_=$}}}if(Qa)throw o=pr,Qa=!1,pr=null,o}function It(o,l){var c=l[Zm];c===void 0&&(c=l[Zm]=new Set);var p=o+"__bubble";c.has(p)||(x0(l,o,2,!1),c.add(p))}function qm(o,l,c){var p=0;l&&(p|=4),x0(c,o,p,l)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function oc(o){if(!o[Eh]){o[Eh]=!0,r.forEach(function(c){c!=="selectionchange"&&(Kk.has(c)||qm(c,!1,o),qm(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Eh]||(l[Eh]=!0,qm("selectionchange",!1,l))}}function x0(o,l,c,p){switch(rl(l)){case 1:var y=ei;break;case 4:y=hh;break;default:y=Yu}c=y.bind(null,l,c,o),y=void 0,!vs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function Gm(o,l,c,p,y){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var F=p.stateNode.containerInfo;if(F===y||F.nodeType===8&&F.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var $=S.tag;if(($===3||$===4)&&($=S.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;S=S.return}for(;F!==null;){if(S=qo(F),S===null)return;if($=S.tag,$===5||$===6){p=_=S;continue e}F=F.parentNode}}p=p.return}th(function(){var te=_,ue=Ka(c),de=[];e:{var ae=P0.get(o);if(ae!==void 0){var ve=Wo,Pe=o;switch(o){case"keypress":if(zo(c)===0)break e;case"keydown":case"keyup":ve=ct;break;case"focusin":Pe="focus",ve=yn;break;case"focusout":Pe="blur",ve=yn;break;case"beforeblur":case"afterblur":ve=yn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ii;break;case E0:case T0:case I0:ve=yh;break;case S0:ve=ul;break;case"scroll":ve=sl;break;case"wheel":ve=kk;break;case"copy":case"cut":case"paste":ve=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=rr}var Ae=(l&4)!==0,Ht=!Ae&&o==="scroll",G=Ae?ae!==null?ae+"Capture":null:ae;Ae=[];for(var H=te,J;H!==null;){J=H;var fe=J.stateNode;if(J.tag===5&&fe!==null&&(J=fe,G!==null&&(fe=No(H,G),fe!=null&&Ae.push(ac(H,fe,J)))),Ht)break;H=H.return}0<Ae.length&&(ae=new ve(ae,Pe,null,c,ue),de.push({event:ae,listeners:Ae}))}}if((l&7)===0){e:{if(ae=o==="mouseover"||o==="pointerover",ve=o==="mouseout"||o==="pointerout",ae&&c!==ms&&(Pe=c.relatedTarget||c.fromElement)&&(qo(Pe)||Pe[Fi]))break e;if((ve||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,ve?(Pe=c.relatedTarget||c.toElement,ve=te,Pe=Pe?qo(Pe):null,Pe!==null&&(Ht=xr(Pe),Pe!==Ht||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(ve=null,Pe=te),ve!==Pe)){if(Ae=Ju,fe="onMouseLeave",G="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=rr,fe="onPointerLeave",G="onPointerEnter",H="pointer"),Ht=ve==null?ae:ml(ve),J=Pe==null?ae:ml(Pe),ae=new Ae(fe,H+"leave",ve,c,ue),ae.target=Ht,ae.relatedTarget=J,fe=null,qo(ue)===te&&(Ae=new Ae(G,H+"enter",Pe,c,ue),Ae.target=J,Ae.relatedTarget=Ht,fe=Ae),Ht=fe,ve&&Pe)t:{for(Ae=ve,G=Pe,H=0,J=Ae;J;J=fl(J))H++;for(J=0,fe=G;fe;fe=fl(fe))J++;for(;0<H-J;)Ae=fl(Ae),H--;for(;0<J-H;)G=fl(G),J--;for(;H--;){if(Ae===G||G!==null&&Ae===G.alternate)break t;Ae=fl(Ae),G=fl(G)}Ae=null}else Ae=null;ve!==null&&R0(de,ae,ve,Ae,!1),Pe!==null&&Ht!==null&&R0(de,Ht,Pe,Ae,!0)}}e:{if(ae=te?ml(te):window,ve=ae.nodeName&&ae.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ae.type==="file")var Re=Fk;else if(u0(ae))if(d0)Re=$k;else{Re=jk;var Oe=Uk}else(ve=ae.nodeName)&&ve.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Re=Bk);if(Re&&(Re=Re(o,te))){c0(de,Re,c,ue);break e}Oe&&Oe(o,ae,te),o==="focusout"&&(Oe=ae._wrapperState)&&Oe.controlled&&ae.type==="number"&&Ft(ae,"number",ae.value)}switch(Oe=te?ml(te):window,o){case"focusin":(u0(Oe)||Oe.contentEditable==="true")&&(dl=Oe,Bm=te,ic=null);break;case"focusout":ic=Bm=dl=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,_0(de,c,ue);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":_0(de,c,ue)}var Le;if(Lm)e:{switch(o){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else cl?a0(o,c)&&(je="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(je="onCompositionStart");je&&(i0&&c.locale!=="ko"&&(cl||je!=="onCompositionStart"?je==="onCompositionEnd"&&cl&&(Le=fh()):(tr=ue,il="value"in tr?tr.value:tr.textContent,cl=!0)),Oe=Th(te,je),0<Oe.length&&(je=new E(je,o,null,c,ue),de.push({event:je,listeners:Oe}),Le?je.data=Le:(Le=l0(c),Le!==null&&(je.data=Le)))),(Le=Nk?Vk(o,c):Mk(o,c))&&(te=Th(te,"onBeforeInput"),0<te.length&&(ue=new E("onBeforeInput","beforeinput",null,c,ue),de.push({event:ue,listeners:te}),ue.data=Le))}A0(de,l)})}function ac(o,l,c){return{instance:o,listener:l,currentTarget:c}}function Th(o,l){for(var c=l+"Capture",p=[];o!==null;){var y=o,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=No(o,c),_!=null&&p.unshift(ac(o,_,y)),_=No(o,l),_!=null&&p.push(ac(o,_,y))),o=o.return}return p}function fl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function R0(o,l,c,p,y){for(var _=l._reactName,S=[];c!==null&&c!==p;){var F=c,$=F.alternate,te=F.stateNode;if($!==null&&$===p)break;F.tag===5&&te!==null&&(F=te,y?($=No(c,_),$!=null&&S.unshift(ac(c,$,F))):y||($=No(c,_),$!=null&&S.push(ac(c,$,F)))),c=c.return}S.length!==0&&o.push({event:l,listeners:S})}var Qk=/\r\n?/g,Yk=/\u0000|\uFFFD/g;function k0(o){return(typeof o=="string"?o:""+o).replace(Qk,`
`).replace(Yk,"")}function Ih(o,l,c){if(l=k0(l),k0(o)!==l&&c)throw Error(t(425))}function Sh(){}var Km=null,Qm=null;function Ym(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Xm=typeof setTimeout=="function"?setTimeout:void 0,Xk=typeof clearTimeout=="function"?clearTimeout:void 0,D0=typeof Promise=="function"?Promise:void 0,Jk=typeof queueMicrotask=="function"?queueMicrotask:typeof D0<"u"?function(o){return D0.resolve(null).then(o).catch(Zk)}:Xm;function Zk(o){setTimeout(function(){throw o})}function Jm(o,l){var c=l,p=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){o.removeChild(y),Is(l);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);Is(l)}function bs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function N0(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}var pl=Math.random().toString(36).slice(2),oi="__reactFiber$"+pl,lc="__reactProps$"+pl,Fi="__reactContainer$"+pl,Zm="__reactEvents$"+pl,eD="__reactListeners$"+pl,tD="__reactHandles$"+pl;function qo(o){var l=o[oi];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Fi]||c[oi]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=N0(o);o!==null;){if(c=o[oi])return c;o=N0(o)}return l}o=c,c=o.parentNode}return null}function uc(o){return o=o[oi]||o[Fi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ml(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Ph(o){return o[lc]||null}var eg=[],gl=-1;function As(o){return{current:o}}function St(o){0>gl||(o.current=eg[gl],eg[gl]=null,gl--)}function vt(o,l){gl++,eg[gl]=o.current,o.current=l}var xs={},In=As(xs),jn=As(!1),Go=xs;function yl(o,l){var c=o.type.contextTypes;if(!c)return xs;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in c)y[_]=l[_];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Bn(o){return o=o.childContextTypes,o!=null}function Ch(){St(jn),St(In)}function V0(o,l,c){if(In.current!==xs)throw Error(t(168));vt(In,l),vt(jn,c)}function M0(o,l,c){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in l))throw Error(t(108,we(o)||"Unknown",y));return X({},c,p)}function bh(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||xs,Go=In.current,vt(In,o),vt(jn,jn.current),!0}function O0(o,l,c){var p=o.stateNode;if(!p)throw Error(t(169));c?(o=M0(o,l,Go),p.__reactInternalMemoizedMergedChildContext=o,St(jn),St(In),vt(In,o)):St(jn),vt(jn,c)}var Ui=null,Ah=!1,tg=!1;function L0(o){Ui===null?Ui=[o]:Ui.push(o)}function nD(o){Ah=!0,L0(o)}function Rs(){if(!tg&&Ui!==null){tg=!0;var o=0,l=Ke;try{var c=Ui;for(Ke=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}Ui=null,Ah=!1}catch(y){throw Ui!==null&&(Ui=Ui.slice(o+1)),Uu(Xa,Rs),y}finally{Ke=l,tg=!1}}return null}var vl=[],_l=0,xh=null,Rh=0,gr=[],yr=0,Ko=null,ji=1,Bi="";function Qo(o,l){vl[_l++]=Rh,vl[_l++]=xh,xh=o,Rh=l}function F0(o,l,c){gr[yr++]=ji,gr[yr++]=Bi,gr[yr++]=Ko,Ko=o;var p=ji;o=Bi;var y=32-Zn(p)-1;p&=~(1<<y),c+=1;var _=32-Zn(l)+y;if(30<_){var S=y-y%5;_=(p&(1<<S)-1).toString(32),p>>=S,y-=S,ji=1<<32-Zn(l)+y|c<<y|p,Bi=_+o}else ji=1<<_|c<<y|p,Bi=o}function ng(o){o.return!==null&&(Qo(o,1),F0(o,1,0))}function rg(o){for(;o===xh;)xh=vl[--_l],vl[_l]=null,Rh=vl[--_l],vl[_l]=null;for(;o===Ko;)Ko=gr[--yr],gr[yr]=null,Bi=gr[--yr],gr[yr]=null,ji=gr[--yr],gr[yr]=null}var ir=null,sr=null,bt=!1,Dr=null;function U0(o,l){var c=Er(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,l=o.deletions,l===null?(o.deletions=[c],o.flags|=16):l.push(c)}function j0(o,l){switch(o.tag){case 5:var c=o.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,ir=o,sr=bs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,ir=o,sr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Ko!==null?{id:ji,overflow:Bi}:null,o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=Er(18,null,null,0),c.stateNode=l,c.return=o,o.child=c,ir=o,sr=null,!0):!1;default:return!1}}function ig(o){return(o.mode&1)!==0&&(o.flags&128)===0}function sg(o){if(bt){var l=sr;if(l){var c=l;if(!j0(o,l)){if(ig(o))throw Error(t(418));l=bs(c.nextSibling);var p=ir;l&&j0(o,l)?U0(p,c):(o.flags=o.flags&-4097|2,bt=!1,ir=o)}}else{if(ig(o))throw Error(t(418));o.flags=o.flags&-4097|2,bt=!1,ir=o}}}function B0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ir=o}function kh(o){if(o!==ir)return!1;if(!bt)return B0(o),bt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Ym(o.type,o.memoizedProps)),l&&(l=sr)){if(ig(o))throw $0(),Error(t(418));for(;l;)U0(o,l),l=bs(l.nextSibling)}if(B0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(l===0){sr=bs(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}o=o.nextSibling}sr=null}}else sr=ir?bs(o.stateNode.nextSibling):null;return!0}function $0(){for(var o=sr;o;)o=bs(o.nextSibling)}function wl(){sr=ir=null,bt=!1}function og(o){Dr===null?Dr=[o]:Dr.push(o)}var rD=B.ReactCurrentBatchConfig;function cc(o,l,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,o));var y=p,_=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(S){var F=y.refs;S===null?delete F[_]:F[_]=S},l._stringRef=_,l)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function Dh(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function z0(o){var l=o._init;return l(o._payload)}function W0(o){function l(G,H){if(o){var J=G.deletions;J===null?(G.deletions=[H],G.flags|=16):J.push(H)}}function c(G,H){if(!o)return null;for(;H!==null;)l(G,H),H=H.sibling;return null}function p(G,H){for(G=new Map;H!==null;)H.key!==null?G.set(H.key,H):G.set(H.index,H),H=H.sibling;return G}function y(G,H){return G=Fs(G,H),G.index=0,G.sibling=null,G}function _(G,H,J){return G.index=J,o?(J=G.alternate,J!==null?(J=J.index,J<H?(G.flags|=2,H):J):(G.flags|=2,H)):(G.flags|=1048576,H)}function S(G){return o&&G.alternate===null&&(G.flags|=2),G}function F(G,H,J,fe){return H===null||H.tag!==6?(H=Xg(J,G.mode,fe),H.return=G,H):(H=y(H,J),H.return=G,H)}function $(G,H,J,fe){var Re=J.type;return Re===C?ue(G,H,J.props.children,fe,J.key):H!==null&&(H.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Se&&z0(Re)===H.type)?(fe=y(H,J.props),fe.ref=cc(G,H,J),fe.return=G,fe):(fe=nf(J.type,J.key,J.props,null,G.mode,fe),fe.ref=cc(G,H,J),fe.return=G,fe)}function te(G,H,J,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=Jg(J,G.mode,fe),H.return=G,H):(H=y(H,J.children||[]),H.return=G,H)}function ue(G,H,J,fe,Re){return H===null||H.tag!==7?(H=ra(J,G.mode,fe,Re),H.return=G,H):(H=y(H,J),H.return=G,H)}function de(G,H,J){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Xg(""+H,G.mode,J),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Z:return J=nf(H.type,H.key,H.props,null,G.mode,J),J.ref=cc(G,null,H),J.return=G,J;case re:return H=Jg(H,G.mode,J),H.return=G,H;case Se:var fe=H._init;return de(G,fe(H._payload),J)}if(Rt(H)||Y(H))return H=ra(H,G.mode,J,null),H.return=G,H;Dh(G,H)}return null}function ae(G,H,J,fe){var Re=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Re!==null?null:F(G,H,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Z:return J.key===Re?$(G,H,J,fe):null;case re:return J.key===Re?te(G,H,J,fe):null;case Se:return Re=J._init,ae(G,H,Re(J._payload),fe)}if(Rt(J)||Y(J))return Re!==null?null:ue(G,H,J,fe,null);Dh(G,J)}return null}function ve(G,H,J,fe,Re){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(J)||null,F(H,G,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Z:return G=G.get(fe.key===null?J:fe.key)||null,$(H,G,fe,Re);case re:return G=G.get(fe.key===null?J:fe.key)||null,te(H,G,fe,Re);case Se:var Oe=fe._init;return ve(G,H,J,Oe(fe._payload),Re)}if(Rt(fe)||Y(fe))return G=G.get(J)||null,ue(H,G,fe,Re,null);Dh(H,fe)}return null}function Pe(G,H,J,fe){for(var Re=null,Oe=null,Le=H,je=H=0,hn=null;Le!==null&&je<J.length;je++){Le.index>je?(hn=Le,Le=null):hn=Le.sibling;var rt=ae(G,Le,J[je],fe);if(rt===null){Le===null&&(Le=hn);break}o&&Le&&rt.alternate===null&&l(G,Le),H=_(rt,H,je),Oe===null?Re=rt:Oe.sibling=rt,Oe=rt,Le=hn}if(je===J.length)return c(G,Le),bt&&Qo(G,je),Re;if(Le===null){for(;je<J.length;je++)Le=de(G,J[je],fe),Le!==null&&(H=_(Le,H,je),Oe===null?Re=Le:Oe.sibling=Le,Oe=Le);return bt&&Qo(G,je),Re}for(Le=p(G,Le);je<J.length;je++)hn=ve(Le,G,je,J[je],fe),hn!==null&&(o&&hn.alternate!==null&&Le.delete(hn.key===null?je:hn.key),H=_(hn,H,je),Oe===null?Re=hn:Oe.sibling=hn,Oe=hn);return o&&Le.forEach(function(Us){return l(G,Us)}),bt&&Qo(G,je),Re}function Ae(G,H,J,fe){var Re=Y(J);if(typeof Re!="function")throw Error(t(150));if(J=Re.call(J),J==null)throw Error(t(151));for(var Oe=Re=null,Le=H,je=H=0,hn=null,rt=J.next();Le!==null&&!rt.done;je++,rt=J.next()){Le.index>je?(hn=Le,Le=null):hn=Le.sibling;var Us=ae(G,Le,rt.value,fe);if(Us===null){Le===null&&(Le=hn);break}o&&Le&&Us.alternate===null&&l(G,Le),H=_(Us,H,je),Oe===null?Re=Us:Oe.sibling=Us,Oe=Us,Le=hn}if(rt.done)return c(G,Le),bt&&Qo(G,je),Re;if(Le===null){for(;!rt.done;je++,rt=J.next())rt=de(G,rt.value,fe),rt!==null&&(H=_(rt,H,je),Oe===null?Re=rt:Oe.sibling=rt,Oe=rt);return bt&&Qo(G,je),Re}for(Le=p(G,Le);!rt.done;je++,rt=J.next())rt=ve(Le,G,je,rt.value,fe),rt!==null&&(o&&rt.alternate!==null&&Le.delete(rt.key===null?je:rt.key),H=_(rt,H,je),Oe===null?Re=rt:Oe.sibling=rt,Oe=rt);return o&&Le.forEach(function(OD){return l(G,OD)}),bt&&Qo(G,je),Re}function Ht(G,H,J,fe){if(typeof J=="object"&&J!==null&&J.type===C&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case Z:e:{for(var Re=J.key,Oe=H;Oe!==null;){if(Oe.key===Re){if(Re=J.type,Re===C){if(Oe.tag===7){c(G,Oe.sibling),H=y(Oe,J.props.children),H.return=G,G=H;break e}}else if(Oe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Se&&z0(Re)===Oe.type){c(G,Oe.sibling),H=y(Oe,J.props),H.ref=cc(G,Oe,J),H.return=G,G=H;break e}c(G,Oe);break}else l(G,Oe);Oe=Oe.sibling}J.type===C?(H=ra(J.props.children,G.mode,fe,J.key),H.return=G,G=H):(fe=nf(J.type,J.key,J.props,null,G.mode,fe),fe.ref=cc(G,H,J),fe.return=G,G=fe)}return S(G);case re:e:{for(Oe=J.key;H!==null;){if(H.key===Oe)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){c(G,H.sibling),H=y(H,J.children||[]),H.return=G,G=H;break e}else{c(G,H);break}else l(G,H);H=H.sibling}H=Jg(J,G.mode,fe),H.return=G,G=H}return S(G);case Se:return Oe=J._init,Ht(G,H,Oe(J._payload),fe)}if(Rt(J))return Pe(G,H,J,fe);if(Y(J))return Ae(G,H,J,fe);Dh(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,H!==null&&H.tag===6?(c(G,H.sibling),H=y(H,J),H.return=G,G=H):(c(G,H),H=Xg(J,G.mode,fe),H.return=G,G=H),S(G)):c(G,H)}return Ht}var El=W0(!0),H0=W0(!1),Nh=As(null),Vh=null,Tl=null,ag=null;function lg(){ag=Tl=Vh=null}function ug(o){var l=Nh.current;St(Nh),o._currentValue=l}function cg(o,l,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===c)break;o=o.return}}function Il(o,l){Vh=o,ag=Tl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&($n=!0),o.firstContext=null)}function vr(o){var l=o._currentValue;if(ag!==o)if(o={context:o,memoizedValue:l,next:null},Tl===null){if(Vh===null)throw Error(t(308));Tl=o,Vh.dependencies={lanes:0,firstContext:o}}else Tl=Tl.next=o;return l}var Yo=null;function dg(o){Yo===null?Yo=[o]:Yo.push(o)}function q0(o,l,c,p){var y=l.interleaved;return y===null?(c.next=c,dg(l)):(c.next=y.next,y.next=c),l.interleaved=c,$i(o,p)}function $i(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,c=o.alternate,c!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var ks=!1;function hg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function zi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Ds(o,l,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Ze&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,$i(o,c)}return y=p.interleaved,y===null?(l.next=l,dg(p)):(l.next=y.next,y.next=l),p.interleaved=l,$i(o,c)}function Mh(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Hu(o,c)}}function K0(o,l){var c=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?y=_=S:_=_.next=S,c=c.next}while(c!==null);_===null?y=_=l:_=_.next=l}else y=_=l;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function Oh(o,l,c,p){var y=o.updateQueue;ks=!1;var _=y.firstBaseUpdate,S=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var $=F,te=$.next;$.next=null,S===null?_=te:S.next=te,S=$;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,F=ue.lastBaseUpdate,F!==S&&(F===null?ue.firstBaseUpdate=te:F.next=te,ue.lastBaseUpdate=$))}if(_!==null){var de=y.baseState;S=0,ue=te=$=null,F=_;do{var ae=F.lane,ve=F.eventTime;if((p&ae)===ae){ue!==null&&(ue=ue.next={eventTime:ve,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Pe=o,Ae=F;switch(ae=l,ve=c,Ae.tag){case 1:if(Pe=Ae.payload,typeof Pe=="function"){de=Pe.call(ve,de,ae);break e}de=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ae.payload,ae=typeof Pe=="function"?Pe.call(ve,de,ae):Pe,ae==null)break e;de=X({},de,ae);break e;case 2:ks=!0}}F.callback!==null&&F.lane!==0&&(o.flags|=64,ae=y.effects,ae===null?y.effects=[F]:ae.push(F))}else ve={eventTime:ve,lane:ae,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ue===null?(te=ue=ve,$=de):ue=ue.next=ve,S|=ae;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;ae=F,F=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(ue===null&&($=de),y.baseState=$,y.firstBaseUpdate=te,y.lastBaseUpdate=ue,l=y.shared.interleaved,l!==null){y=l;do S|=y.lane,y=y.next;while(y!==l)}else _===null&&(y.shared.lanes=0);Zo|=S,o.lanes=S,o.memoizedState=de}}function Q0(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var dc={},ai=As(dc),hc=As(dc),fc=As(dc);function Xo(o){if(o===dc)throw Error(t(174));return o}function fg(o,l){switch(vt(fc,l),vt(hc,o),vt(ai,dc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:fs(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=fs(l,o)}St(ai),vt(ai,l)}function Sl(){St(ai),St(hc),St(fc)}function Y0(o){Xo(fc.current);var l=Xo(ai.current),c=fs(l,o.type);l!==c&&(vt(hc,o),vt(ai,c))}function pg(o){hc.current===o&&(St(ai),St(hc))}var kt=As(0);function Lh(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var mg=[];function gg(){for(var o=0;o<mg.length;o++)mg[o]._workInProgressVersionPrimary=null;mg.length=0}var Fh=B.ReactCurrentDispatcher,yg=B.ReactCurrentBatchConfig,Jo=0,Dt=null,sn=null,cn=null,Uh=!1,pc=!1,mc=0,iD=0;function Sn(){throw Error(t(321))}function vg(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!kr(o[c],l[c]))return!1;return!0}function _g(o,l,c,p,y,_){if(Jo=_,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Fh.current=o===null||o.memoizedState===null?lD:uD,o=c(p,y),pc){_=0;do{if(pc=!1,mc=0,25<=_)throw Error(t(301));_+=1,cn=sn=null,l.updateQueue=null,Fh.current=cD,o=c(p,y)}while(pc)}if(Fh.current=$h,l=sn!==null&&sn.next!==null,Jo=0,cn=sn=Dt=null,Uh=!1,l)throw Error(t(300));return o}function wg(){var o=mc!==0;return mc=0,o}function li(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Dt.memoizedState=cn=o:cn=cn.next=o,cn}function _r(){if(sn===null){var o=Dt.alternate;o=o!==null?o.memoizedState:null}else o=sn.next;var l=cn===null?Dt.memoizedState:cn.next;if(l!==null)cn=l,sn=o;else{if(o===null)throw Error(t(310));sn=o,o={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},cn===null?Dt.memoizedState=cn=o:cn=cn.next=o}return cn}function gc(o,l){return typeof l=="function"?l(o):l}function Eg(o){var l=_r(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=sn,y=p.baseQueue,_=c.pending;if(_!==null){if(y!==null){var S=y.next;y.next=_.next,_.next=S}p.baseQueue=y=_,c.pending=null}if(y!==null){_=y.next,p=p.baseState;var F=S=null,$=null,te=_;do{var ue=te.lane;if((Jo&ue)===ue)$!==null&&($=$.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),p=te.hasEagerState?te.eagerState:o(p,te.action);else{var de={lane:ue,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};$===null?(F=$=de,S=p):$=$.next=de,Dt.lanes|=ue,Zo|=ue}te=te.next}while(te!==null&&te!==_);$===null?S=p:$.next=F,kr(p,l.memoizedState)||($n=!0),l.memoizedState=p,l.baseState=S,l.baseQueue=$,c.lastRenderedState=p}if(o=c.interleaved,o!==null){y=o;do _=y.lane,Dt.lanes|=_,Zo|=_,y=y.next;while(y!==o)}else y===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function Tg(o){var l=_r(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=c.dispatch,y=c.pending,_=l.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do _=o(_,S.action),S=S.next;while(S!==y);kr(_,l.memoizedState)||($n=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),c.lastRenderedState=_}return[_,p]}function X0(){}function J0(o,l){var c=Dt,p=_r(),y=l(),_=!kr(p.memoizedState,y);if(_&&(p.memoizedState=y,$n=!0),p=p.queue,Ig(tE.bind(null,c,p,o),[o]),p.getSnapshot!==l||_||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,yc(9,eE.bind(null,c,p,y,l),void 0,null),dn===null)throw Error(t(349));(Jo&30)!==0||Z0(c,l,y)}return y}function Z0(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function eE(o,l,c,p){l.value=c,l.getSnapshot=p,nE(l)&&rE(o)}function tE(o,l,c){return c(function(){nE(l)&&rE(o)})}function nE(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!kr(o,c)}catch{return!0}}function rE(o){var l=$i(o,1);l!==null&&Or(l,o,1,-1)}function iE(o){var l=li();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gc,lastRenderedState:o},l.queue=o,o=o.dispatch=aD.bind(null,Dt,o),[l.memoizedState,o]}function yc(o,l,c,p){return o={tag:o,create:l,destroy:c,deps:p,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect,c===null?l.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,l.lastEffect=o)),o}function sE(){return _r().memoizedState}function jh(o,l,c,p){var y=li();Dt.flags|=o,y.memoizedState=yc(1|l,c,void 0,p===void 0?null:p)}function Bh(o,l,c,p){var y=_r();p=p===void 0?null:p;var _=void 0;if(sn!==null){var S=sn.memoizedState;if(_=S.destroy,p!==null&&vg(p,S.deps)){y.memoizedState=yc(l,c,_,p);return}}Dt.flags|=o,y.memoizedState=yc(1|l,c,_,p)}function oE(o,l){return jh(8390656,8,o,l)}function Ig(o,l){return Bh(2048,8,o,l)}function aE(o,l){return Bh(4,2,o,l)}function lE(o,l){return Bh(4,4,o,l)}function uE(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function cE(o,l,c){return c=c!=null?c.concat([o]):null,Bh(4,4,uE.bind(null,l,o),c)}function Sg(){}function dE(o,l){var c=_r();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&vg(l,p[1])?p[0]:(c.memoizedState=[o,l],o)}function hE(o,l){var c=_r();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&vg(l,p[1])?p[0]:(o=o(),c.memoizedState=[o,l],o)}function fE(o,l,c){return(Jo&21)===0?(o.baseState&&(o.baseState=!1,$n=!0),o.memoizedState=c):(kr(c,l)||(c=zu(),Dt.lanes|=c,Zo|=c,o.baseState=!0),l)}function sD(o,l){var c=Ke;Ke=c!==0&&4>c?c:4,o(!0);var p=yg.transition;yg.transition={};try{o(!1),l()}finally{Ke=c,yg.transition=p}}function pE(){return _r().memoizedState}function oD(o,l,c){var p=Os(o);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},mE(o))gE(l,c);else if(c=q0(o,l,c,p),c!==null){var y=Vn();Or(c,o,p,y),yE(c,l,p)}}function aD(o,l,c){var p=Os(o),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(mE(o))gE(l,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var S=l.lastRenderedState,F=_(S,c);if(y.hasEagerState=!0,y.eagerState=F,kr(F,S)){var $=l.interleaved;$===null?(y.next=y,dg(l)):(y.next=$.next,$.next=y),l.interleaved=y;return}}catch{}c=q0(o,l,y,p),c!==null&&(y=Vn(),Or(c,o,p,y),yE(c,l,p))}}function mE(o){var l=o.alternate;return o===Dt||l!==null&&l===Dt}function gE(o,l){pc=Uh=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function yE(o,l,c){if((c&4194240)!==0){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Hu(o,c)}}var $h={readContext:vr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},lD={readContext:vr,useCallback:function(o,l){return li().memoizedState=[o,l===void 0?null:l],o},useContext:vr,useEffect:oE,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,jh(4194308,4,uE.bind(null,l,o),c)},useLayoutEffect:function(o,l){return jh(4194308,4,o,l)},useInsertionEffect:function(o,l){return jh(4,2,o,l)},useMemo:function(o,l){var c=li();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var p=li();return l=c!==void 0?c(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=oD.bind(null,Dt,o),[p.memoizedState,o]},useRef:function(o){var l=li();return o={current:o},l.memoizedState=o},useState:iE,useDebugValue:Sg,useDeferredValue:function(o){return li().memoizedState=o},useTransition:function(){var o=iE(!1),l=o[0];return o=sD.bind(null,o[1]),li().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var p=Dt,y=li();if(bt){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),dn===null)throw Error(t(349));(Jo&30)!==0||Z0(p,l,c)}y.memoizedState=c;var _={value:c,getSnapshot:l};return y.queue=_,oE(tE.bind(null,p,_,o),[o]),p.flags|=2048,yc(9,eE.bind(null,p,_,c,l),void 0,null),c},useId:function(){var o=li(),l=dn.identifierPrefix;if(bt){var c=Bi,p=ji;c=(p&~(1<<32-Zn(p)-1)).toString(32)+c,l=":"+l+"R"+c,c=mc++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=iD++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},uD={readContext:vr,useCallback:dE,useContext:vr,useEffect:Ig,useImperativeHandle:cE,useInsertionEffect:aE,useLayoutEffect:lE,useMemo:hE,useReducer:Eg,useRef:sE,useState:function(){return Eg(gc)},useDebugValue:Sg,useDeferredValue:function(o){var l=_r();return fE(l,sn.memoizedState,o)},useTransition:function(){var o=Eg(gc)[0],l=_r().memoizedState;return[o,l]},useMutableSource:X0,useSyncExternalStore:J0,useId:pE,unstable_isNewReconciler:!1},cD={readContext:vr,useCallback:dE,useContext:vr,useEffect:Ig,useImperativeHandle:cE,useInsertionEffect:aE,useLayoutEffect:lE,useMemo:hE,useReducer:Tg,useRef:sE,useState:function(){return Tg(gc)},useDebugValue:Sg,useDeferredValue:function(o){var l=_r();return sn===null?l.memoizedState=o:fE(l,sn.memoizedState,o)},useTransition:function(){var o=Tg(gc)[0],l=_r().memoizedState;return[o,l]},useMutableSource:X0,useSyncExternalStore:J0,useId:pE,unstable_isNewReconciler:!1};function Nr(o,l){if(o&&o.defaultProps){l=X({},l),o=o.defaultProps;for(var c in o)l[c]===void 0&&(l[c]=o[c]);return l}return l}function Pg(o,l,c,p){l=o.memoizedState,c=c(p,l),c=c==null?l:X({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var zh={isMounted:function(o){return(o=o._reactInternals)?xr(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var p=Vn(),y=Os(o),_=zi(p,y);_.payload=l,c!=null&&(_.callback=c),l=Ds(o,_,y),l!==null&&(Or(l,o,y,p),Mh(l,o,y))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var p=Vn(),y=Os(o),_=zi(p,y);_.tag=1,_.payload=l,c!=null&&(_.callback=c),l=Ds(o,_,y),l!==null&&(Or(l,o,y,p),Mh(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=Vn(),p=Os(o),y=zi(c,p);y.tag=2,l!=null&&(y.callback=l),l=Ds(o,y,p),l!==null&&(Or(l,o,p,c),Mh(l,o,p))}};function vE(o,l,c,p,y,_,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,_,S):l.prototype&&l.prototype.isPureReactComponent?!rc(c,p)||!rc(y,_):!0}function _E(o,l,c){var p=!1,y=xs,_=l.contextType;return typeof _=="object"&&_!==null?_=vr(_):(y=Bn(l)?Go:In.current,p=l.contextTypes,_=(p=p!=null)?yl(o,y):xs),l=new l(c,_),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=zh,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=_),l}function wE(o,l,c,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==o&&zh.enqueueReplaceState(l,l.state,null)}function Cg(o,l,c,p){var y=o.stateNode;y.props=c,y.state=o.memoizedState,y.refs={},hg(o);var _=l.contextType;typeof _=="object"&&_!==null?y.context=vr(_):(_=Bn(l)?Go:In.current,y.context=yl(o,_)),y.state=o.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Pg(o,l,_,c),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&zh.enqueueReplaceState(y,y.state,null),Oh(o,c,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Pl(o,l){try{var c="",p=l;do c+=oe(p),p=p.return;while(p);var y=c}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:l,stack:y,digest:null}}function bg(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function Ag(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var dD=typeof WeakMap=="function"?WeakMap:Map;function EE(o,l,c){c=zi(-1,c),c.tag=3,c.payload={element:null};var p=l.value;return c.callback=function(){Yh||(Yh=!0,zg=p),Ag(o,l)},c}function TE(o,l,c){c=zi(-1,c),c.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;c.payload=function(){return p(y)},c.callback=function(){Ag(o,l)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Ag(o,l),typeof p!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})}),c}function IE(o,l,c){var p=o.pingCache;if(p===null){p=o.pingCache=new dD;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(c)||(y.add(c),o=PD.bind(null,o,l,c),l.then(o,o))}function SE(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function PE(o,l,c,p,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=zi(-1,1),l.tag=2,Ds(c,l,1))),c.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var hD=B.ReactCurrentOwner,$n=!1;function Nn(o,l,c,p){l.child=o===null?H0(l,null,c,p):El(l,o.child,c,p)}function CE(o,l,c,p,y){c=c.render;var _=l.ref;return Il(l,y),p=_g(o,l,c,p,_,y),c=wg(),o!==null&&!$n?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Wi(o,l,y)):(bt&&c&&ng(l),l.flags|=1,Nn(o,l,p,y),l.child)}function bE(o,l,c,p,y){if(o===null){var _=c.type;return typeof _=="function"&&!Yg(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=_,AE(o,l,_,p,y)):(o=nf(c.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,(o.lanes&y)===0){var S=_.memoizedProps;if(c=c.compare,c=c!==null?c:rc,c(S,p)&&o.ref===l.ref)return Wi(o,l,y)}return l.flags|=1,o=Fs(_,p),o.ref=l.ref,o.return=l,l.child=o}function AE(o,l,c,p,y){if(o!==null){var _=o.memoizedProps;if(rc(_,p)&&o.ref===l.ref)if($n=!1,l.pendingProps=p=_,(o.lanes&y)!==0)(o.flags&131072)!==0&&($n=!0);else return l.lanes=o.lanes,Wi(o,l,y)}return xg(o,l,c,p,y)}function xE(o,l,c){var p=l.pendingProps,y=p.children,_=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(bl,or),or|=c;else{if((c&1073741824)===0)return o=_!==null?_.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,vt(bl,or),or|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:c,vt(bl,or),or|=p}else _!==null?(p=_.baseLanes|c,l.memoizedState=null):p=c,vt(bl,or),or|=p;return Nn(o,l,y,c),l.child}function RE(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function xg(o,l,c,p,y){var _=Bn(c)?Go:In.current;return _=yl(l,_),Il(l,y),c=_g(o,l,c,p,_,y),p=wg(),o!==null&&!$n?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Wi(o,l,y)):(bt&&p&&ng(l),l.flags|=1,Nn(o,l,c,y),l.child)}function kE(o,l,c,p,y){if(Bn(c)){var _=!0;bh(l)}else _=!1;if(Il(l,y),l.stateNode===null)Hh(o,l),_E(l,c,p),Cg(l,c,p,y),p=!0;else if(o===null){var S=l.stateNode,F=l.memoizedProps;S.props=F;var $=S.context,te=c.contextType;typeof te=="object"&&te!==null?te=vr(te):(te=Bn(c)?Go:In.current,te=yl(l,te));var ue=c.getDerivedStateFromProps,de=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==p||$!==te)&&wE(l,S,p,te),ks=!1;var ae=l.memoizedState;S.state=ae,Oh(l,p,S,y),$=l.memoizedState,F!==p||ae!==$||jn.current||ks?(typeof ue=="function"&&(Pg(l,c,ue,p),$=l.memoizedState),(F=ks||vE(l,c,F,p,ae,$,te))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=$),S.props=p,S.state=$,S.context=te,p=F):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{S=l.stateNode,G0(o,l),F=l.memoizedProps,te=l.type===l.elementType?F:Nr(l.type,F),S.props=te,de=l.pendingProps,ae=S.context,$=c.contextType,typeof $=="object"&&$!==null?$=vr($):($=Bn(c)?Go:In.current,$=yl(l,$));var ve=c.getDerivedStateFromProps;(ue=typeof ve=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==de||ae!==$)&&wE(l,S,p,$),ks=!1,ae=l.memoizedState,S.state=ae,Oh(l,p,S,y);var Pe=l.memoizedState;F!==de||ae!==Pe||jn.current||ks?(typeof ve=="function"&&(Pg(l,c,ve,p),Pe=l.memoizedState),(te=ks||vE(l,c,te,p,ae,Pe,$)||!1)?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Pe,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Pe,$)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Pe),S.props=p,S.state=Pe,S.context=$,p=te):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=1024),p=!1)}return Rg(o,l,c,p,_,y)}function Rg(o,l,c,p,y,_){RE(o,l);var S=(l.flags&128)!==0;if(!p&&!S)return y&&O0(l,c,!1),Wi(o,l,_);p=l.stateNode,hD.current=l;var F=S&&typeof c.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&S?(l.child=El(l,o.child,null,_),l.child=El(l,null,F,_)):Nn(o,l,F,_),l.memoizedState=p.state,y&&O0(l,c,!0),l.child}function DE(o){var l=o.stateNode;l.pendingContext?V0(o,l.pendingContext,l.pendingContext!==l.context):l.context&&V0(o,l.context,!1),fg(o,l.containerInfo)}function NE(o,l,c,p,y){return wl(),og(y),l.flags|=256,Nn(o,l,c,p),l.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function Dg(o){return{baseLanes:o,cachePool:null,transitions:null}}function VE(o,l,c){var p=l.pendingProps,y=kt.current,_=!1,S=(l.flags&128)!==0,F;if((F=S)||(F=o!==null&&o.memoizedState===null?!1:(y&2)!==0),F?(_=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),vt(kt,y&1),o===null)return sg(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(S=p.children,o=p.fallback,_?(p=l.mode,_=l.child,S={mode:"hidden",children:S},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=rf(S,p,0,null),o=ra(o,p,c,null),_.return=l,o.return=l,_.sibling=o,l.child=_,l.child.memoizedState=Dg(c),l.memoizedState=kg,o):Ng(l,S));if(y=o.memoizedState,y!==null&&(F=y.dehydrated,F!==null))return fD(o,l,S,p,F,y,c);if(_){_=p.fallback,S=l.mode,y=o.child,F=y.sibling;var $={mode:"hidden",children:p.children};return(S&1)===0&&l.child!==y?(p=l.child,p.childLanes=0,p.pendingProps=$,l.deletions=null):(p=Fs(y,$),p.subtreeFlags=y.subtreeFlags&14680064),F!==null?_=Fs(F,_):(_=ra(_,S,c,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,S=o.child.memoizedState,S=S===null?Dg(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=o.childLanes&~c,l.memoizedState=kg,p}return _=o.child,o=_.sibling,p=Fs(_,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=c),p.return=l,p.sibling=null,o!==null&&(c=l.deletions,c===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=p,l.memoizedState=null,p}function Ng(o,l){return l=rf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Wh(o,l,c,p){return p!==null&&og(p),El(l,o.child,null,c),o=Ng(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function fD(o,l,c,p,y,_,S){if(c)return l.flags&256?(l.flags&=-257,p=bg(Error(t(422))),Wh(o,l,S,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(_=p.fallback,y=l.mode,p=rf({mode:"visible",children:p.children},y,0,null),_=ra(_,y,S,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,(l.mode&1)!==0&&El(l,o.child,null,S),l.child.memoizedState=Dg(S),l.memoizedState=kg,_);if((l.mode&1)===0)return Wh(o,l,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var F=p.dgst;return p=F,_=Error(t(419)),p=bg(_,p,void 0),Wh(o,l,S,p)}if(F=(S&o.childLanes)!==0,$n||F){if(p=dn,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,$i(o,y),Or(p,o,y,-1))}return Qg(),p=bg(Error(t(421))),Wh(o,l,S,p)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=CD.bind(null,o),y._reactRetry=l,null):(o=_.treeContext,sr=bs(y.nextSibling),ir=l,bt=!0,Dr=null,o!==null&&(gr[yr++]=ji,gr[yr++]=Bi,gr[yr++]=Ko,ji=o.id,Bi=o.overflow,Ko=l),l=Ng(l,p.children),l.flags|=4096,l)}function ME(o,l,c){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),cg(o.return,l,c)}function Vg(o,l,c,p,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=c,_.tailMode=y)}function OE(o,l,c){var p=l.pendingProps,y=p.revealOrder,_=p.tail;if(Nn(o,l,p.children,c),p=kt.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ME(o,c,l);else if(o.tag===19)ME(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(vt(kt,p),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&Lh(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),Vg(l,!1,y,c,_);break;case"backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&Lh(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}Vg(l,!0,c,null,_);break;case"together":Vg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Hh(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Wi(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),Zo|=l.lanes,(c&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,c=Fs(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=Fs(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function pD(o,l,c){switch(l.tag){case 3:DE(l),wl();break;case 5:Y0(l);break;case 1:Bn(l.type)&&bh(l);break;case 4:fg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,y=l.memoizedProps.value;vt(Nh,p._currentValue),p._currentValue=y;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(vt(kt,kt.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?VE(o,l,c):(vt(kt,kt.current&1),o=Wi(o,l,c),o!==null?o.sibling:null);vt(kt,kt.current&1);break;case 19:if(p=(c&l.childLanes)!==0,(o.flags&128)!==0){if(p)return OE(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),vt(kt,kt.current),p)break;return null;case 22:case 23:return l.lanes=0,xE(o,l,c)}return Wi(o,l,c)}var LE,Mg,FE,UE;LE=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Mg=function(){},FE=function(o,l,c,p){var y=o.memoizedProps;if(y!==p){o=l.stateNode,Xo(ai.current);var _=null;switch(c){case"input":y=cs(o,y),p=cs(o,p),_=[];break;case"select":y=X({},y,{value:void 0}),p=X({},p,{value:void 0}),_=[];break;case"textarea":y=Ro(o,y),p=Ro(o,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=Sh)}Ar(c,p);var S;c=null;for(te in y)if(!p.hasOwnProperty(te)&&y.hasOwnProperty(te)&&y[te]!=null)if(te==="style"){var F=y[te];for(S in F)F.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(i.hasOwnProperty(te)?_||(_=[]):(_=_||[]).push(te,null));for(te in p){var $=p[te];if(F=y?.[te],p.hasOwnProperty(te)&&$!==F&&($!=null||F!=null))if(te==="style")if(F){for(S in F)!F.hasOwnProperty(S)||$&&$.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in $)$.hasOwnProperty(S)&&F[S]!==$[S]&&(c||(c={}),c[S]=$[S])}else c||(_||(_=[]),_.push(te,c)),c=$;else te==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(_=_||[]).push(te,$)):te==="children"?typeof $!="string"&&typeof $!="number"||(_=_||[]).push(te,""+$):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(i.hasOwnProperty(te)?($!=null&&te==="onScroll"&&It("scroll",o),_||F===$||(_=[])):(_=_||[]).push(te,$))}c&&(_=_||[]).push("style",c);var te=_;(l.updateQueue=te)&&(l.flags|=4)}},UE=function(o,l,c,p){c!==p&&(l.flags|=4)};function vc(o,l){if(!bt)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Pn(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=c,l}function mD(o,l,c){var p=l.pendingProps;switch(rg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(l),null;case 1:return Bn(l.type)&&Ch(),Pn(l),null;case 3:return p=l.stateNode,Sl(),St(jn),St(In),gg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(kh(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Dr!==null&&(qg(Dr),Dr=null))),Mg(o,l),Pn(l),null;case 5:pg(l);var y=Xo(fc.current);if(c=l.type,o!==null&&l.stateNode!=null)FE(o,l,c,p,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return Pn(l),null}if(o=Xo(ai.current),kh(l)){p=l.stateNode,c=l.type;var _=l.memoizedProps;switch(p[oi]=l,p[lc]=_,o=(l.mode&1)!==0,c){case"dialog":It("cancel",p),It("close",p);break;case"iframe":case"object":case"embed":It("load",p);break;case"video":case"audio":for(y=0;y<sc.length;y++)It(sc[y],p);break;case"source":It("error",p);break;case"img":case"image":case"link":It("error",p),It("load",p);break;case"details":It("toggle",p);break;case"input":Ao(p,_),It("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},It("invalid",p);break;case"textarea":hs(p,_),It("invalid",p)}Ar(c,_),y=null;for(var S in _)if(_.hasOwnProperty(S)){var F=_[S];S==="children"?typeof F=="string"?p.textContent!==F&&(_.suppressHydrationWarning!==!0&&Ih(p.textContent,F,o),y=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(_.suppressHydrationWarning!==!0&&Ih(p.textContent,F,o),y=["children",""+F]):i.hasOwnProperty(S)&&F!=null&&S==="onScroll"&&It("scroll",p)}switch(c){case"input":Lt(p),xo(p,_,!0);break;case"textarea":Lt(p),br(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=Sh)}p=y,l.updateQueue=p,p!==null&&(l.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Do(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=S.createElement(c,{is:p.is}):(o=S.createElement(c),c==="select"&&(S=o,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):o=S.createElementNS(o,c),o[oi]=l,o[lc]=p,LE(o,l,!1,!1),l.stateNode=o;e:{switch(S=Ga(c,p),c){case"dialog":It("cancel",o),It("close",o),y=p;break;case"iframe":case"object":case"embed":It("load",o),y=p;break;case"video":case"audio":for(y=0;y<sc.length;y++)It(sc[y],o);y=p;break;case"source":It("error",o),y=p;break;case"img":case"image":case"link":It("error",o),It("load",o),y=p;break;case"details":It("toggle",o),y=p;break;case"input":Ao(o,p),y=cs(o,p),It("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=X({},p,{value:void 0}),It("invalid",o);break;case"textarea":hs(o,p),y=Ro(o,p),It("invalid",o);break;default:y=p}Ar(c,y),F=y;for(_ in F)if(F.hasOwnProperty(_)){var $=F[_];_==="style"?ps(o,$):_==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&qa(o,$)):_==="children"?typeof $=="string"?(c!=="textarea"||$!=="")&&Xn(o,$):typeof $=="number"&&Xn(o,""+$):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?$!=null&&_==="onScroll"&&It("scroll",o):$!=null&&D(o,_,$,S))}switch(c){case"input":Lt(o),xo(o,p,!1);break;case"textarea":Lt(o),br(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Me(p.value));break;case"select":o.multiple=!!p.multiple,_=p.value,_!=null?En(o,!!p.multiple,_,!1):p.defaultValue!=null&&En(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=Sh)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Pn(l),null;case 6:if(o&&l.stateNode!=null)UE(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(c=Xo(fc.current),Xo(ai.current),kh(l)){if(p=l.stateNode,c=l.memoizedProps,p[oi]=l,(_=p.nodeValue!==c)&&(o=ir,o!==null))switch(o.tag){case 3:Ih(p.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ih(p.nodeValue,c,(o.mode&1)!==0)}_&&(l.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[oi]=l,l.stateNode=p}return Pn(l),null;case 13:if(St(kt),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(bt&&sr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)$0(),wl(),l.flags|=98560,_=!1;else if(_=kh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[oi]=l}else wl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Pn(l),_=!1}else Dr!==null&&(qg(Dr),Dr=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(kt.current&1)!==0?on===0&&(on=3):Qg())),l.updateQueue!==null&&(l.flags|=4),Pn(l),null);case 4:return Sl(),Mg(o,l),o===null&&oc(l.stateNode.containerInfo),Pn(l),null;case 10:return ug(l.type._context),Pn(l),null;case 17:return Bn(l.type)&&Ch(),Pn(l),null;case 19:if(St(kt),_=l.memoizedState,_===null)return Pn(l),null;if(p=(l.flags&128)!==0,S=_.rendering,S===null)if(p)vc(_,!1);else{if(on!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(S=Lh(o),S!==null){for(l.flags|=128,vc(_,!1),p=S.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=c,c=l.child;c!==null;)_=c,o=p,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,o=S.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return vt(kt,kt.current&1|2),l.child}o=o.sibling}_.tail!==null&&Tt()>Al&&(l.flags|=128,p=!0,vc(_,!1),l.lanes=4194304)}else{if(!p)if(o=Lh(S),o!==null){if(l.flags|=128,p=!0,c=o.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),vc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!bt)return Pn(l),null}else 2*Tt()-_.renderingStartTime>Al&&c!==1073741824&&(l.flags|=128,p=!0,vc(_,!1),l.lanes=4194304);_.isBackwards?(S.sibling=l.child,l.child=S):(c=_.last,c!==null?c.sibling=S:l.child=S,_.last=S)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Tt(),l.sibling=null,c=kt.current,vt(kt,p?c&1|2:c&1),l):(Pn(l),null);case 22:case 23:return Kg(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(or&1073741824)!==0&&(Pn(l),l.subtreeFlags&6&&(l.flags|=8192)):Pn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function gD(o,l){switch(rg(l),l.tag){case 1:return Bn(l.type)&&Ch(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Sl(),St(jn),St(In),gg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return pg(l),null;case 13:if(St(kt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));wl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return St(kt),null;case 4:return Sl(),null;case 10:return ug(l.type._context),null;case 22:case 23:return Kg(),null;case 24:return null;default:return null}}var qh=!1,Cn=!1,yD=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Cl(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){jt(o,l,p)}else c.current=null}function Og(o,l,c){try{c()}catch(p){jt(o,l,p)}}var jE=!1;function vD(o,l){if(Km=Mi,o=v0(),jm(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var S=0,F=-1,$=-1,te=0,ue=0,de=o,ae=null;t:for(;;){for(var ve;de!==c||y!==0&&de.nodeType!==3||(F=S+y),de!==_||p!==0&&de.nodeType!==3||($=S+p),de.nodeType===3&&(S+=de.nodeValue.length),(ve=de.firstChild)!==null;)ae=de,de=ve;for(;;){if(de===o)break t;if(ae===c&&++te===y&&(F=S),ae===_&&++ue===p&&($=S),(ve=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=ve}c=F===-1||$===-1?null:{start:F,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(Qm={focusedElem:o,selectionRange:c},Mi=!1,Te=l;Te!==null;)if(l=Te,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Te=o;else for(;Te!==null;){l=Te;try{var Pe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ae=Pe.memoizedProps,Ht=Pe.memoizedState,G=l.stateNode,H=G.getSnapshotBeforeUpdate(l.elementType===l.type?Ae:Nr(l.type,Ae),Ht);G.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var J=l.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){jt(l,l.return,fe)}if(o=l.sibling,o!==null){o.return=l.return,Te=o;break}Te=l.return}return Pe=jE,jE=!1,Pe}function _c(o,l,c){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var _=y.destroy;y.destroy=void 0,_!==void 0&&Og(l,c,_)}y=y.next}while(y!==p)}}function Gh(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==l)}}function Lg(o){var l=o.ref;if(l!==null){var c=o.stateNode;o.tag,o=c,typeof l=="function"?l(o):l.current=o}}function BE(o){var l=o.alternate;l!==null&&(o.alternate=null,BE(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[oi],delete l[lc],delete l[Zm],delete l[eD],delete l[tD])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function $E(o){return o.tag===5||o.tag===3||o.tag===4}function zE(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||$E(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Fg(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Sh));else if(p!==4&&(o=o.child,o!==null))for(Fg(o,l,c),o=o.sibling;o!==null;)Fg(o,l,c),o=o.sibling}function Ug(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(Ug(o,l,c),o=o.sibling;o!==null;)Ug(o,l,c),o=o.sibling}var vn=null,Vr=!1;function Ns(o,l,c){for(c=c.child;c!==null;)WE(o,l,c),c=c.sibling}function WE(o,l,c){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Lo,c)}catch{}switch(c.tag){case 5:Cn||Cl(c,l);case 6:var p=vn,y=Vr;vn=null,Ns(o,l,c),vn=p,Vr=y,vn!==null&&(Vr?(o=vn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):vn.removeChild(c.stateNode));break;case 18:vn!==null&&(Vr?(o=vn,c=c.stateNode,o.nodeType===8?Jm(o.parentNode,c):o.nodeType===1&&Jm(o,c),Is(o)):Jm(vn,c.stateNode));break;case 4:p=vn,y=Vr,vn=c.stateNode.containerInfo,Vr=!0,Ns(o,l,c),vn=p,Vr=y;break;case 0:case 11:case 14:case 15:if(!Cn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&Og(c,l,S),y=y.next}while(y!==p)}Ns(o,l,c);break;case 1:if(!Cn&&(Cl(c,l),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(F){jt(c,l,F)}Ns(o,l,c);break;case 21:Ns(o,l,c);break;case 22:c.mode&1?(Cn=(p=Cn)||c.memoizedState!==null,Ns(o,l,c),Cn=p):Ns(o,l,c);break;default:Ns(o,l,c)}}function HE(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new yD),l.forEach(function(p){var y=bD.bind(null,o,p);c.has(p)||(c.add(p),p.then(y,y))})}}function Mr(o,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var _=o,S=l,F=S;e:for(;F!==null;){switch(F.tag){case 5:vn=F.stateNode,Vr=!1;break e;case 3:vn=F.stateNode.containerInfo,Vr=!0;break e;case 4:vn=F.stateNode.containerInfo,Vr=!0;break e}F=F.return}if(vn===null)throw Error(t(160));WE(_,S,y),vn=null,Vr=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(te){jt(y,l,te)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)qE(l,o),l=l.sibling}function qE(o,l){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Mr(l,o),ui(o),p&4){try{_c(3,o,o.return),Gh(3,o)}catch(Ae){jt(o,o.return,Ae)}try{_c(5,o,o.return)}catch(Ae){jt(o,o.return,Ae)}}break;case 1:Mr(l,o),ui(o),p&512&&c!==null&&Cl(c,c.return);break;case 5:if(Mr(l,o),ui(o),p&512&&c!==null&&Cl(c,c.return),o.flags&32){var y=o.stateNode;try{Xn(y,"")}catch(Ae){jt(o,o.return,Ae)}}if(p&4&&(y=o.stateNode,y!=null)){var _=o.memoizedProps,S=c!==null?c.memoizedProps:_,F=o.type,$=o.updateQueue;if(o.updateQueue=null,$!==null)try{F==="input"&&_.type==="radio"&&_.name!=null&&ds(y,_),Ga(F,S);var te=Ga(F,_);for(S=0;S<$.length;S+=2){var ue=$[S],de=$[S+1];ue==="style"?ps(y,de):ue==="dangerouslySetInnerHTML"?qa(y,de):ue==="children"?Xn(y,de):D(y,ue,de,te)}switch(F){case"input":Cr(y,_);break;case"textarea":ko(y,_);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var ve=_.value;ve!=null?En(y,!!_.multiple,ve,!1):ae!==!!_.multiple&&(_.defaultValue!=null?En(y,!!_.multiple,_.defaultValue,!0):En(y,!!_.multiple,_.multiple?[]:"",!1))}y[lc]=_}catch(Ae){jt(o,o.return,Ae)}}break;case 6:if(Mr(l,o),ui(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,_=o.memoizedProps;try{y.nodeValue=_}catch(Ae){jt(o,o.return,Ae)}}break;case 3:if(Mr(l,o),ui(o),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Is(l.containerInfo)}catch(Ae){jt(o,o.return,Ae)}break;case 4:Mr(l,o),ui(o);break;case 13:Mr(l,o),ui(o),y=o.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||($g=Tt())),p&4&&HE(o);break;case 22:if(ue=c!==null&&c.memoizedState!==null,o.mode&1?(Cn=(te=Cn)||ue,Mr(l,o),Cn=te):Mr(l,o),ui(o),p&8192){if(te=o.memoizedState!==null,(o.stateNode.isHidden=te)&&!ue&&(o.mode&1)!==0)for(Te=o,ue=o.child;ue!==null;){for(de=Te=ue;Te!==null;){switch(ae=Te,ve=ae.child,ae.tag){case 0:case 11:case 14:case 15:_c(4,ae,ae.return);break;case 1:Cl(ae,ae.return);var Pe=ae.stateNode;if(typeof Pe.componentWillUnmount=="function"){p=ae,c=ae.return;try{l=p,Pe.props=l.memoizedProps,Pe.state=l.memoizedState,Pe.componentWillUnmount()}catch(Ae){jt(p,c,Ae)}}break;case 5:Cl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){QE(de);continue}}ve!==null?(ve.return=ae,Te=ve):QE(de)}ue=ue.sibling}e:for(ue=null,de=o;;){if(de.tag===5){if(ue===null){ue=de;try{y=de.stateNode,te?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(F=de.stateNode,$=de.memoizedProps.style,S=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=Hr("display",S))}catch(Ae){jt(o,o.return,Ae)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=te?"":de.memoizedProps}catch(Ae){jt(o,o.return,Ae)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===o)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===o)break e;for(;de.sibling===null;){if(de.return===null||de.return===o)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Mr(l,o),ui(o),p&4&&HE(o);break;case 21:break;default:Mr(l,o),ui(o)}}function ui(o){var l=o.flags;if(l&2){try{e:{for(var c=o.return;c!==null;){if($E(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Xn(y,""),p.flags&=-33);var _=zE(o);Ug(o,_,y);break;case 3:case 4:var S=p.stateNode.containerInfo,F=zE(o);Fg(o,F,S);break;default:throw Error(t(161))}}catch($){jt(o,o.return,$)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function _D(o,l,c){Te=o,GE(o)}function GE(o,l,c){for(var p=(o.mode&1)!==0;Te!==null;){var y=Te,_=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||qh;if(!S){var F=y.alternate,$=F!==null&&F.memoizedState!==null||Cn;F=qh;var te=Cn;if(qh=S,(Cn=$)&&!te)for(Te=y;Te!==null;)S=Te,$=S.child,S.tag===22&&S.memoizedState!==null?YE(y):$!==null?($.return=S,Te=$):YE(y);for(;_!==null;)Te=_,GE(_),_=_.sibling;Te=y,qh=F,Cn=te}KE(o)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Te=_):KE(o)}}function KE(o){for(;Te!==null;){var l=Te;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Cn||Gh(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Cn)if(c===null)p.componentDidMount();else{var y=l.elementType===l.type?c.memoizedProps:Nr(l.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&Q0(l,_,p);break;case 3:var S=l.updateQueue;if(S!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}Q0(l,S,c)}break;case 5:var F=l.stateNode;if(c===null&&l.flags&4){c=F;var $=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&c.focus();break;case"img":$.src&&(c.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var te=l.alternate;if(te!==null){var ue=te.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&Is(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Cn||l.flags&512&&Lg(l)}catch(ae){jt(l,l.return,ae)}}if(l===o){Te=null;break}if(c=l.sibling,c!==null){c.return=l.return,Te=c;break}Te=l.return}}function QE(o){for(;Te!==null;){var l=Te;if(l===o){Te=null;break}var c=l.sibling;if(c!==null){c.return=l.return,Te=c;break}Te=l.return}}function YE(o){for(;Te!==null;){var l=Te;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{Gh(4,l)}catch($){jt(l,c,$)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var y=l.return;try{p.componentDidMount()}catch($){jt(l,y,$)}}var _=l.return;try{Lg(l)}catch($){jt(l,_,$)}break;case 5:var S=l.return;try{Lg(l)}catch($){jt(l,S,$)}}}catch($){jt(l,l.return,$)}if(l===o){Te=null;break}var F=l.sibling;if(F!==null){F.return=l.return,Te=F;break}Te=l.return}}var wD=Math.ceil,Kh=B.ReactCurrentDispatcher,jg=B.ReactCurrentOwner,wr=B.ReactCurrentBatchConfig,Ze=0,dn=null,Zt=null,_n=0,or=0,bl=As(0),on=0,wc=null,Zo=0,Qh=0,Bg=0,Ec=null,zn=null,$g=0,Al=1/0,Hi=null,Yh=!1,zg=null,Vs=null,Xh=!1,Ms=null,Jh=0,Tc=0,Wg=null,Zh=-1,ef=0;function Vn(){return(Ze&6)!==0?Tt():Zh!==-1?Zh:Zh=Tt()}function Os(o){return(o.mode&1)===0?1:(Ze&2)!==0&&_n!==0?_n&-_n:rD.transition!==null?(ef===0&&(ef=zu()),ef):(o=Ke,o!==0||(o=window.event,o=o===void 0?16:rl(o.type)),o)}function Or(o,l,c,p){if(50<Tc)throw Tc=0,Wg=null,Error(t(185));Bo(o,c,p),((Ze&2)===0||o!==dn)&&(o===dn&&((Ze&2)===0&&(Qh|=c),on===4&&Ls(o,_n)),Wn(o,p),c===1&&Ze===0&&(l.mode&1)===0&&(Al=Tt()+500,Ah&&Rs()))}function Wn(o,l){var c=o.callbackNode;jo(o,l);var p=Di(o,o===dn?_n:0);if(p===0)c!==null&&Ya(c),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(c!=null&&Ya(c),l===1)o.tag===0?nD(JE.bind(null,o)):L0(JE.bind(null,o)),Jk(function(){(Ze&6)===0&&Rs()}),c=null;else{switch(Yr(p)){case 1:c=Xa;break;case 4:c=ju;break;case 16:c=Oo;break;case 536870912:c=Ja;break;default:c=Oo}c=oT(c,XE.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function XE(o,l){if(Zh=-1,ef=0,(Ze&6)!==0)throw Error(t(327));var c=o.callbackNode;if(xl()&&o.callbackNode!==c)return null;var p=Di(o,o===dn?_n:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||l)l=tf(o,p);else{l=p;var y=Ze;Ze|=2;var _=eT();(dn!==o||_n!==l)&&(Hi=null,Al=Tt()+500,ta(o,l));do try{ID();break}catch(F){ZE(o,F)}while(!0);lg(),Kh.current=_,Ze=y,Zt!==null?l=0:(dn=null,_n=0,l=on)}if(l!==0){if(l===2&&(y=$u(o),y!==0&&(p=y,l=Hg(o,y))),l===1)throw c=wc,ta(o,0),Ls(o,p),Wn(o,Tt()),c;if(l===6)Ls(o,p);else{if(y=o.current.alternate,(p&30)===0&&!ED(y)&&(l=tf(o,p),l===2&&(_=$u(o),_!==0&&(p=_,l=Hg(o,_))),l===1))throw c=wc,ta(o,0),Ls(o,p),Wn(o,Tt()),c;switch(o.finishedWork=y,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:na(o,zn,Hi);break;case 3:if(Ls(o,p),(p&130023424)===p&&(l=$g+500-Tt(),10<l)){if(Di(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){Vn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=Xm(na.bind(null,o,zn,Hi),l);break}na(o,zn,Hi);break;case 4:if(Ls(o,p),(p&4194240)===p)break;for(l=o.eventTimes,y=-1;0<p;){var S=31-Zn(p);_=1<<S,S=l[S],S>y&&(y=S),p&=~_}if(p=y,p=Tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*wD(p/1960))-p,10<p){o.timeoutHandle=Xm(na.bind(null,o,zn,Hi),p);break}na(o,zn,Hi);break;case 5:na(o,zn,Hi);break;default:throw Error(t(329))}}}return Wn(o,Tt()),o.callbackNode===c?XE.bind(null,o):null}function Hg(o,l){var c=Ec;return o.current.memoizedState.isDehydrated&&(ta(o,l).flags|=256),o=tf(o,l),o!==2&&(l=zn,zn=c,l!==null&&qg(l)),o}function qg(o){zn===null?zn=o:zn.push.apply(zn,o)}function ED(o){for(var l=o;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],_=y.getSnapshot;y=y.value;try{if(!kr(_(),y))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ls(o,l){for(l&=~Bg,l&=~Qh,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-Zn(l),p=1<<c;o[c]=-1,l&=~p}}function JE(o){if((Ze&6)!==0)throw Error(t(327));xl();var l=Di(o,0);if((l&1)===0)return Wn(o,Tt()),null;var c=tf(o,l);if(o.tag!==0&&c===2){var p=$u(o);p!==0&&(l=p,c=Hg(o,p))}if(c===1)throw c=wc,ta(o,0),Ls(o,l),Wn(o,Tt()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,na(o,zn,Hi),Wn(o,Tt()),null}function Gg(o,l){var c=Ze;Ze|=1;try{return o(l)}finally{Ze=c,Ze===0&&(Al=Tt()+500,Ah&&Rs())}}function ea(o){Ms!==null&&Ms.tag===0&&(Ze&6)===0&&xl();var l=Ze;Ze|=1;var c=wr.transition,p=Ke;try{if(wr.transition=null,Ke=1,o)return o()}finally{Ke=p,wr.transition=c,Ze=l,(Ze&6)===0&&Rs()}}function Kg(){or=bl.current,St(bl)}function ta(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,Xk(c)),Zt!==null)for(c=Zt.return;c!==null;){var p=c;switch(rg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ch();break;case 3:Sl(),St(jn),St(In),gg();break;case 5:pg(p);break;case 4:Sl();break;case 13:St(kt);break;case 19:St(kt);break;case 10:ug(p.type._context);break;case 22:case 23:Kg()}c=c.return}if(dn=o,Zt=o=Fs(o.current,null),_n=or=l,on=0,wc=null,Bg=Qh=Zo=0,zn=Ec=null,Yo!==null){for(l=0;l<Yo.length;l++)if(c=Yo[l],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,_=c.pending;if(_!==null){var S=_.next;_.next=y,p.next=S}c.pending=p}Yo=null}return o}function ZE(o,l){do{var c=Zt;try{if(lg(),Fh.current=$h,Uh){for(var p=Dt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Uh=!1}if(Jo=0,cn=sn=Dt=null,pc=!1,mc=0,jg.current=null,c===null||c.return===null){on=1,wc=l,Zt=null;break}e:{var _=o,S=c.return,F=c,$=l;if(l=_n,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var te=$,ue=F,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ve=SE(S);if(ve!==null){ve.flags&=-257,PE(ve,S,F,_,l),ve.mode&1&&IE(_,te,l),l=ve,$=te;var Pe=l.updateQueue;if(Pe===null){var Ae=new Set;Ae.add($),l.updateQueue=Ae}else Pe.add($);break e}else{if((l&1)===0){IE(_,te,l),Qg();break e}$=Error(t(426))}}else if(bt&&F.mode&1){var Ht=SE(S);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),PE(Ht,S,F,_,l),og(Pl($,F));break e}}_=$=Pl($,F),on!==4&&(on=2),Ec===null?Ec=[_]:Ec.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var G=EE(_,$,l);K0(_,G);break e;case 1:F=$;var H=_.type,J=_.stateNode;if((_.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Vs===null||!Vs.has(J)))){_.flags|=65536,l&=-l,_.lanes|=l;var fe=TE(_,F,l);K0(_,fe);break e}}_=_.return}while(_!==null)}nT(c)}catch(Re){l=Re,Zt===c&&c!==null&&(Zt=c=c.return);continue}break}while(!0)}function eT(){var o=Kh.current;return Kh.current=$h,o===null?$h:o}function Qg(){(on===0||on===3||on===2)&&(on=4),dn===null||(Zo&268435455)===0&&(Qh&268435455)===0||Ls(dn,_n)}function tf(o,l){var c=Ze;Ze|=2;var p=eT();(dn!==o||_n!==l)&&(Hi=null,ta(o,l));do try{TD();break}catch(y){ZE(o,y)}while(!0);if(lg(),Ze=c,Kh.current=p,Zt!==null)throw Error(t(261));return dn=null,_n=0,on}function TD(){for(;Zt!==null;)tT(Zt)}function ID(){for(;Zt!==null&&!Mo();)tT(Zt)}function tT(o){var l=sT(o.alternate,o,or);o.memoizedProps=o.pendingProps,l===null?nT(o):Zt=l,jg.current=null}function nT(o){var l=o;do{var c=l.alternate;if(o=l.return,(l.flags&32768)===0){if(c=mD(c,l,or),c!==null){Zt=c;return}}else{if(c=gD(c,l),c!==null){c.flags&=32767,Zt=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{on=6,Zt=null;return}}if(l=l.sibling,l!==null){Zt=l;return}Zt=l=o}while(l!==null);on===0&&(on=5)}function na(o,l,c){var p=Ke,y=wr.transition;try{wr.transition=null,Ke=1,SD(o,l,c,p)}finally{wr.transition=y,Ke=p}return null}function SD(o,l,c,p){do xl();while(Ms!==null);if((Ze&6)!==0)throw Error(t(327));c=o.finishedWork;var y=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=c.lanes|c.childLanes;if(Mm(o,_),o===dn&&(Zt=dn=null,_n=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Xh||(Xh=!0,oT(Oo,function(){return xl(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=wr.transition,wr.transition=null;var S=Ke;Ke=1;var F=Ze;Ze|=4,jg.current=null,vD(o,c),qE(c,o),Wk(Qm),Mi=!!Km,Qm=Km=null,o.current=c,_D(c),ki(),Ze=F,Ke=S,wr.transition=_}else o.current=c;if(Xh&&(Xh=!1,Ms=o,Jh=y),_=o.pendingLanes,_===0&&(Vs=null),lh(c.stateNode),Wn(o,Tt()),l!==null)for(p=o.onRecoverableError,c=0;c<l.length;c++)y=l[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(Yh)throw Yh=!1,o=zg,zg=null,o;return(Jh&1)!==0&&o.tag!==0&&xl(),_=o.pendingLanes,(_&1)!==0?o===Wg?Tc++:(Tc=0,Wg=o):Tc=0,Rs(),null}function xl(){if(Ms!==null){var o=Yr(Jh),l=wr.transition,c=Ke;try{if(wr.transition=null,Ke=16>o?16:o,Ms===null)var p=!1;else{if(o=Ms,Ms=null,Jh=0,(Ze&6)!==0)throw Error(t(331));var y=Ze;for(Ze|=4,Te=o.current;Te!==null;){var _=Te,S=_.child;if((Te.flags&16)!==0){var F=_.deletions;if(F!==null){for(var $=0;$<F.length;$++){var te=F[$];for(Te=te;Te!==null;){var ue=Te;switch(ue.tag){case 0:case 11:case 15:_c(8,ue,_)}var de=ue.child;if(de!==null)de.return=ue,Te=de;else for(;Te!==null;){ue=Te;var ae=ue.sibling,ve=ue.return;if(BE(ue),ue===te){Te=null;break}if(ae!==null){ae.return=ve,Te=ae;break}Te=ve}}}var Pe=_.alternate;if(Pe!==null){var Ae=Pe.child;if(Ae!==null){Pe.child=null;do{var Ht=Ae.sibling;Ae.sibling=null,Ae=Ht}while(Ae!==null)}}Te=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,Te=S;else e:for(;Te!==null;){if(_=Te,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:_c(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,Te=G;break e}Te=_.return}}var H=o.current;for(Te=H;Te!==null;){S=Te;var J=S.child;if((S.subtreeFlags&2064)!==0&&J!==null)J.return=S,Te=J;else e:for(S=H;Te!==null;){if(F=Te,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Gh(9,F)}}catch(Re){jt(F,F.return,Re)}if(F===S){Te=null;break e}var fe=F.sibling;if(fe!==null){fe.return=F.return,Te=fe;break e}Te=F.return}}if(Ze=y,Rs(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Lo,o)}catch{}p=!0}return p}finally{Ke=c,wr.transition=l}}return!1}function rT(o,l,c){l=Pl(c,l),l=EE(o,l,1),o=Ds(o,l,1),l=Vn(),o!==null&&(Bo(o,1,l),Wn(o,l))}function jt(o,l,c){if(o.tag===3)rT(o,o,c);else for(;l!==null;){if(l.tag===3){rT(l,o,c);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vs===null||!Vs.has(p))){o=Pl(c,o),o=TE(l,o,1),l=Ds(l,o,1),o=Vn(),l!==null&&(Bo(l,1,o),Wn(l,o));break}}l=l.return}}function PD(o,l,c){var p=o.pingCache;p!==null&&p.delete(l),l=Vn(),o.pingedLanes|=o.suspendedLanes&c,dn===o&&(_n&c)===c&&(on===4||on===3&&(_n&130023424)===_n&&500>Tt()-$g?ta(o,0):Bg|=c),Wn(o,l)}function iT(o,l){l===0&&((o.mode&1)===0?l=1:(l=ws,ws<<=1,(ws&130023424)===0&&(ws=4194304)));var c=Vn();o=$i(o,l),o!==null&&(Bo(o,l,c),Wn(o,c))}function CD(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),iT(o,c)}function bD(o,l){var c=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),iT(o,c)}var sT;sT=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||jn.current)$n=!0;else{if((o.lanes&c)===0&&(l.flags&128)===0)return $n=!1,pD(o,l,c);$n=(o.flags&131072)!==0}else $n=!1,bt&&(l.flags&1048576)!==0&&F0(l,Rh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Hh(o,l),o=l.pendingProps;var y=yl(l,In.current);Il(l,c),y=_g(null,l,p,o,y,c);var _=wg();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Bn(p)?(_=!0,bh(l)):_=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,hg(l),y.updater=zh,l.stateNode=y,y._reactInternals=l,Cg(l,p,o,c),l=Rg(null,l,p,!0,_,c)):(l.tag=0,bt&&_&&ng(l),Nn(null,l,y,c),l=l.child),l;case 16:p=l.elementType;e:{switch(Hh(o,l),o=l.pendingProps,y=p._init,p=y(p._payload),l.type=p,y=l.tag=xD(p),o=Nr(p,o),y){case 0:l=xg(null,l,p,o,c);break e;case 1:l=kE(null,l,p,o,c);break e;case 11:l=CE(null,l,p,o,c);break e;case 14:l=bE(null,l,p,Nr(p.type,o),c);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),xg(o,l,p,y,c);case 1:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),kE(o,l,p,y,c);case 3:e:{if(DE(l),o===null)throw Error(t(387));p=l.pendingProps,_=l.memoizedState,y=_.element,G0(o,l),Oh(l,p,null,c);var S=l.memoizedState;if(p=S.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){y=Pl(Error(t(423)),l),l=NE(o,l,p,c,y);break e}else if(p!==y){y=Pl(Error(t(424)),l),l=NE(o,l,p,c,y);break e}else for(sr=bs(l.stateNode.containerInfo.firstChild),ir=l,bt=!0,Dr=null,c=H0(l,null,p,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(wl(),p===y){l=Wi(o,l,c);break e}Nn(o,l,p,c)}l=l.child}return l;case 5:return Y0(l),o===null&&sg(l),p=l.type,y=l.pendingProps,_=o!==null?o.memoizedProps:null,S=y.children,Ym(p,y)?S=null:_!==null&&Ym(p,_)&&(l.flags|=32),RE(o,l),Nn(o,l,S,c),l.child;case 6:return o===null&&sg(l),null;case 13:return VE(o,l,c);case 4:return fg(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=El(l,null,p,c):Nn(o,l,p,c),l.child;case 11:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),CE(o,l,p,y,c);case 7:return Nn(o,l,l.pendingProps,c),l.child;case 8:return Nn(o,l,l.pendingProps.children,c),l.child;case 12:return Nn(o,l,l.pendingProps.children,c),l.child;case 10:e:{if(p=l.type._context,y=l.pendingProps,_=l.memoizedProps,S=y.value,vt(Nh,p._currentValue),p._currentValue=S,_!==null)if(kr(_.value,S)){if(_.children===y.children&&!jn.current){l=Wi(o,l,c);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var F=_.dependencies;if(F!==null){S=_.child;for(var $=F.firstContext;$!==null;){if($.context===p){if(_.tag===1){$=zi(-1,c&-c),$.tag=2;var te=_.updateQueue;if(te!==null){te=te.shared;var ue=te.pending;ue===null?$.next=$:($.next=ue.next,ue.next=$),te.pending=$}}_.lanes|=c,$=_.alternate,$!==null&&($.lanes|=c),cg(_.return,c,l),F.lanes|=c;break}$=$.next}}else if(_.tag===10)S=_.type===l.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=c,F=S.alternate,F!==null&&(F.lanes|=c),cg(S,c,l),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===l){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}Nn(o,l,y.children,c),l=l.child}return l;case 9:return y=l.type,p=l.pendingProps.children,Il(l,c),y=vr(y),p=p(y),l.flags|=1,Nn(o,l,p,c),l.child;case 14:return p=l.type,y=Nr(p,l.pendingProps),y=Nr(p.type,y),bE(o,l,p,y,c);case 15:return AE(o,l,l.type,l.pendingProps,c);case 17:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),Hh(o,l),l.tag=1,Bn(p)?(o=!0,bh(l)):o=!1,Il(l,c),_E(l,p,y),Cg(l,p,y,c),Rg(null,l,p,!0,o,c);case 19:return OE(o,l,c);case 22:return xE(o,l,c)}throw Error(t(156,l.tag))};function oT(o,l){return Uu(o,l)}function AD(o,l,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(o,l,c,p){return new AD(o,l,c,p)}function Yg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function xD(o){if(typeof o=="function")return Yg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===xe)return 14}return 2}function Fs(o,l){var c=o.alternate;return c===null?(c=Er(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function nf(o,l,c,p,y,_){var S=2;if(p=o,typeof o=="function")Yg(o)&&(S=1);else if(typeof o=="string")S=5;else e:switch(o){case C:return ra(c.children,y,_,l);case I:S=8,y|=8;break;case b:return o=Er(12,c,l,y|2),o.elementType=b,o.lanes=_,o;case V:return o=Er(13,c,l,y),o.elementType=V,o.lanes=_,o;case ce:return o=Er(19,c,l,y),o.elementType=ce,o.lanes=_,o;case De:return rf(c,y,_,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:S=10;break e;case L:S=9;break e;case U:S=11;break e;case xe:S=14;break e;case Se:S=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Er(S,c,l,y),l.elementType=o,l.type=p,l.lanes=_,l}function ra(o,l,c,p){return o=Er(7,o,p,l),o.lanes=c,o}function rf(o,l,c,p){return o=Er(22,o,p,l),o.elementType=De,o.lanes=c,o.stateNode={isHidden:!1},o}function Xg(o,l,c){return o=Er(6,o,null,l),o.lanes=c,o}function Jg(o,l,c){return l=Er(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function RD(o,l,c,p,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Zg(o,l,c,p,y,_,S,F,$){return o=new RD(o,l,c,F,$),l===1?(l=1,_===!0&&(l|=8)):l=0,_=Er(3,null,null,l),o.current=_,_.stateNode=o,_.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},hg(_),o}function kD(o,l,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:p==null?null:""+p,children:o,containerInfo:l,implementation:c}}function aT(o){if(!o)return xs;o=o._reactInternals;e:{if(xr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Bn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Bn(c))return M0(o,c,l)}return l}function lT(o,l,c,p,y,_,S,F,$){return o=Zg(c,p,!0,o,y,_,S,F,$),o.context=aT(null),c=o.current,p=Vn(),y=Os(c),_=zi(p,y),_.callback=l??null,Ds(c,_,y),o.current.lanes=y,Bo(o,y,p),Wn(o,p),o}function sf(o,l,c,p){var y=l.current,_=Vn(),S=Os(y);return c=aT(c),l.context===null?l.context=c:l.pendingContext=c,l=zi(_,S),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=Ds(y,l,S),o!==null&&(Or(o,y,S,_),Mh(o,y,S)),S}function of(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function uT(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function ey(o,l){uT(o,l),(o=o.alternate)&&uT(o,l)}function DD(){return null}var cT=typeof reportError=="function"?reportError:function(o){console.error(o)};function ty(o){this._internalRoot=o}af.prototype.render=ty.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));sf(o,l,null,null)},af.prototype.unmount=ty.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;ea(function(){sf(null,o,null,null)}),l[Fi]=null}};function af(o){this._internalRoot=o}af.prototype.unstable_scheduleHydration=function(o){if(o){var l=Ku();o={blockedOn:null,target:o,priority:l};for(var c=0;c<er.length&&l!==0&&l<er[c].priority;c++);er.splice(c,0,o),c===0&&tl(o)}};function ny(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function lf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function dT(){}function ND(o,l,c,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var te=of(S);_.call(te)}}var S=lT(l,p,o,0,null,!1,!1,"",dT);return o._reactRootContainer=S,o[Fi]=S.current,oc(o.nodeType===8?o.parentNode:o),ea(),S}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var F=p;p=function(){var te=of($);F.call(te)}}var $=Zg(o,0,!1,null,null,!1,!1,"",dT);return o._reactRootContainer=$,o[Fi]=$.current,oc(o.nodeType===8?o.parentNode:o),ea(function(){sf(l,$,c,p)}),$}function uf(o,l,c,p,y){var _=c._reactRootContainer;if(_){var S=_;if(typeof y=="function"){var F=y;y=function(){var $=of(S);F.call($)}}sf(l,S,o,y)}else S=ND(c,l,o,y,p);return of(S)}qu=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=it(l.pendingLanes);c!==0&&(Hu(l,c|1),Wn(l,Tt()),(Ze&6)===0&&(Al=Tt()+500,Rs()))}break;case 13:ea(function(){var p=$i(o,1);if(p!==null){var y=Vn();Or(p,o,1,y)}}),ey(o,1)}},Za=function(o){if(o.tag===13){var l=$i(o,134217728);if(l!==null){var c=Vn();Or(l,o,134217728,c)}ey(o,134217728)}},Gu=function(o){if(o.tag===13){var l=Os(o),c=$i(o,l);if(c!==null){var p=Vn();Or(c,o,l,p)}ey(o,l)}},Ku=function(){return Ke},Qu=function(o,l){var c=Ke;try{return Ke=o,l()}finally{Ke=c}},Ai=function(o,l,c){switch(l){case"input":if(Cr(o,c),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var p=c[l];if(p!==o&&p.form===o.form){var y=Ph(p);if(!y)throw Error(t(90));zr(p),Cr(p,y)}}}break;case"textarea":ko(o,c);break;case"select":l=c.value,l!=null&&En(o,!!c.multiple,l,!1)}},Zd=Gg,eh=ea;var VD={usingClientEntryPoint:!1,Events:[uc,ml,Ph,gs,ys,Gg]},Ic={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MD={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ah(o),o===null?null:o.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||DD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Lo=cf.inject(MD),Jn=cf}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VD,Hn.createPortal=function(o,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ny(l))throw Error(t(200));return kD(o,l,null,c)},Hn.createRoot=function(o,l){if(!ny(o))throw Error(t(299));var c=!1,p="",y=cT;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=Zg(o,1,!1,null,null,c,!1,p,y),o[Fi]=l.current,oc(o.nodeType===8?o.parentNode:o),new ty(l)},Hn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ah(l),o=o===null?null:o.stateNode,o},Hn.flushSync=function(o){return ea(o)},Hn.hydrate=function(o,l,c){if(!lf(l))throw Error(t(200));return uf(null,o,l,!0,c)},Hn.hydrateRoot=function(o,l,c){if(!ny(o))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,_="",S=cT;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),l=lT(l,null,o,1,c??null,y,!1,_,S),o[Fi]=l.current,oc(o),p)for(o=0;o<p.length;o++)c=p[o],y=c._getVersion,y=y(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,y]:l.mutableSourceEagerHydrationData.push(c,y);return new af(l)},Hn.render=function(o,l,c){if(!lf(l))throw Error(t(200));return uf(null,o,l,!1,c)},Hn.unmountComponentAtNode=function(o){if(!lf(o))throw Error(t(40));return o._reactRootContainer?(ea(function(){uf(null,null,o,!1,function(){o._reactRootContainer=null,o[Fi]=null})}),!0):!1},Hn.unstable_batchedUpdates=Gg,Hn.unstable_renderSubtreeIntoContainer=function(o,l,c,p){if(!lf(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return uf(o,l,c,!1,p)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var _T;function oC(){if(_T)return sy.exports;_T=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sy.exports=zD(),sy.exports}var wT;function WD(){if(wT)return df;wT=1;var n=oC();return df.createRoot=n.createRoot,df.hydrateRoot=n.hydrateRoot,df}var HD=WD();const qD=a_(HD),GD="modulepreload",KD=function(n){return"/"+n},ET={},Si=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=KD(h),h in ET)return;ET[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":GD,m||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((T,A)=>{v.addEventListener("load",T),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var c_=oC();const QD=a_(c_);function ad(){return ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ad.apply(this,arguments)}var Zs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Zs||(Zs={}));const TT="popstate";function YD(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Qy("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Yf(i)}return JD(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function d_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XD(){return Math.random().toString(36).substr(2,8)}function IT(n,e){return{usr:n.state,key:n.key,idx:e}}function Qy(n,e,t,r){return t===void 0&&(t=null),ad({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Su(e):e,{state:t,key:e&&e.key||r||XD()})}function Yf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Su(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function JD(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=Zs.Pop,d=null,h=m();h==null&&(h=0,a.replaceState(ad({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Zs.Pop;let P=m(),j=P==null?null:P-h;h=P,d&&d({action:u,location:x.location,delta:j})}function v(P,j){u=Zs.Push;let M=Qy(x.location,P,j);h=m()+1;let D=IT(M,h),B=x.createHref(M);try{a.pushState(D,"",B)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;i.location.assign(B)}s&&d&&d({action:u,location:x.location,delta:1})}function T(P,j){u=Zs.Replace;let M=Qy(x.location,P,j);h=m();let D=IT(M,h),B=x.createHref(M);a.replaceState(D,"",B),s&&d&&d({action:u,location:x.location,delta:0})}function A(P){let j=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof P=="string"?P:Yf(P);return M=M.replace(/ $/,"%20"),Ot(j,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,j)}let x={get action(){return u},get location(){return n(i,a)},listen(P){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(TT,g),d=P,()=>{i.removeEventListener(TT,g),d=null}},createHref(P){return e(i,P)},createURL:A,encodeLocation(P){let j=A(P);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:T,go(P){return a.go(P)}};return x}var ST;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ST||(ST={}));function ZD(n,e,t){return t===void 0&&(t="/"),eN(n,e,t)}function eN(n,e,t,r){let i=typeof e=="string"?Su(e):e,s=tu(i.pathname||"/",t);if(s==null)return null;let a=aC(n);tN(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=hN(s);u=cN(a[d],h)}return u}function aC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(Ot(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=to([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(Ot(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),aC(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:lN(h,s.index),routesMeta:m})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let d of lC(s.path))i(s,a,d)}),e}function lC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=lC(r.join("/")),u=[];return u.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...a),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function tN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:uN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const nN=/^:[\w-]+$/,rN=3,iN=2,sN=1,oN=10,aN=-2,PT=n=>n==="*";function lN(n,e){let t=n.split("/"),r=t.length;return t.some(PT)&&(r+=aN),e&&(r+=iN),t.filter(i=>!PT(i)).reduce((i,s)=>i+(nN.test(s)?rN:s===""?sN:oN),r)}function uN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function cN(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=Yy({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),v=d.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:to([s,g.pathname]),pathnameBase:yN(to([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=to([s,g.pathnameBase]))}return a}function Yy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=dN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let x=u[g]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const A=u[g];return T&&!A?h[v]=void 0:h[v]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function dN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),d_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function hN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return d_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const fN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pN=n=>fN.test(n);function mN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Su(n):n,s;if(t)if(pN(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),d_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=CT(t.substring(1),"/"):s=CT(t,e)}else s=e;return{pathname:s,search:vN(r),hash:_N(i)}}function CT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ly(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function h_(n,e){let t=gN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function f_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Su(n):(i=ad({},n),Ot(!i.pathname||!i.pathname.includes("?"),ly("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),ly("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),ly("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let d=mN(i,u),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const to=n=>n.join("/").replace(/\/\/+/g,"/"),yN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_N=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const uC=["post","put","patch","delete"];new Set(uC);const EN=["get",...uC];new Set(EN);function ld(){return ld=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ld.apply(this,arguments)}const Wp=k.createContext(null),cC=k.createContext(null),ss=k.createContext(null),Hp=k.createContext(null),os=k.createContext({outlet:null,matches:[],isDataRoute:!1}),dC=k.createContext(null);function TN(n,e){let{relative:t}=e===void 0?{}:e;Pu()||Ot(!1);let{basename:r,navigator:i}=k.useContext(ss),{hash:s,pathname:a,search:u}=qp(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:to([r,a])),i.createHref({pathname:d,search:u,hash:s})}function Pu(){return k.useContext(Hp)!=null}function wo(){return Pu()||Ot(!1),k.useContext(Hp).location}function hC(n){k.useContext(ss).static||k.useLayoutEffect(n)}function p_(){let{isDataRoute:n}=k.useContext(os);return n?MN():IN()}function IN(){Pu()||Ot(!1);let n=k.useContext(Wp),{basename:e,future:t,navigator:r}=k.useContext(ss),{matches:i}=k.useContext(os),{pathname:s}=wo(),a=JSON.stringify(h_(i,t.v7_relativeSplatPath)),u=k.useRef(!1);return hC(()=>{u.current=!0}),k.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=f_(h,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:to([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,s,n])}function DH(){let{matches:n}=k.useContext(os),e=n[n.length-1];return e?e.params:{}}function qp(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(ss),{matches:i}=k.useContext(os),{pathname:s}=wo(),a=JSON.stringify(h_(i,r.v7_relativeSplatPath));return k.useMemo(()=>f_(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function SN(n,e){return PN(n,e)}function PN(n,e,t,r){Pu()||Ot(!1);let{navigator:i}=k.useContext(ss),{matches:s}=k.useContext(os),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=wo(),m;if(e){var g;let P=typeof e=="string"?Su(e):e;d==="/"||(g=P.pathname)!=null&&g.startsWith(d)||Ot(!1),m=P}else m=h;let v=m.pathname||"/",T=v;if(d!=="/"){let P=d.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(P.length).join("/")}let A=ZD(n,{pathname:T}),x=RN(A&&A.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:to([d,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?d:to([d,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,t,r);return e&&x?k.createElement(Hp.Provider,{value:{location:ld({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Zs.Pop}},x):x}function CN(){let n=VN(),e=wN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const bN=k.createElement(CN,null);class AN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(os.Provider,{value:this.props.routeContext},k.createElement(dC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xN(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(Wp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(os.Provider,{value:e},r)}function RN(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||Ot(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:v,errors:T}=t,A=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||A){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,A=!1,x=null,P=null;t&&(T=u&&g.route.id?u[g.route.id]:void 0,x=g.route.errorElement||bN,d&&(h<0&&v===0?(ON("route-fallback"),A=!0,P=null):h===v&&(A=!0,P=g.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,v+1)),M=()=>{let D;return T?D=x:A?D=P:g.route.Component?D=k.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=m,k.createElement(xN,{match:g,routeContext:{outlet:m,matches:j,isDataRoute:t!=null},children:D})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?k.createElement(AN,{location:t.location,revalidation:t.revalidation,component:x,error:T,children:M(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):M()},null)}var fC=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(fC||{}),pC=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(pC||{});function kN(n){let e=k.useContext(Wp);return e||Ot(!1),e}function DN(n){let e=k.useContext(cC);return e||Ot(!1),e}function NN(n){let e=k.useContext(os);return e||Ot(!1),e}function mC(n){let e=NN(),t=e.matches[e.matches.length-1];return t.route.id||Ot(!1),t.route.id}function VN(){var n;let e=k.useContext(dC),t=DN(),r=mC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function MN(){let{router:n}=kN(fC.UseNavigateStable),e=mC(pC.UseNavigateStable),t=k.useRef(!1);return hC(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ld({fromRouteId:e},s)))},[n,e])}const bT={};function ON(n,e,t){bT[n]||(bT[n]=!0)}function LN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Xy(n){let{to:e,replace:t,state:r,relative:i}=n;Pu()||Ot(!1);let{future:s,static:a}=k.useContext(ss),{matches:u}=k.useContext(os),{pathname:d}=wo(),h=p_(),m=f_(e,h_(u,s.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(m);return k.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function qi(n){Ot(!1)}function FN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Zs.Pop,navigator:s,static:a=!1,future:u}=n;Pu()&&Ot(!1);let d=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:d,navigator:s,static:a,future:ld({v7_relativeSplatPath:!1},u)}),[d,u,s,a]);typeof r=="string"&&(r=Su(r));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:A="default"}=r,x=k.useMemo(()=>{let P=tu(m,d);return P==null?null:{location:{pathname:P,search:g,hash:v,state:T,key:A},navigationType:i}},[d,m,g,v,T,A,i]);return x==null?null:k.createElement(ss.Provider,{value:h},k.createElement(Hp.Provider,{children:t,value:x}))}function UN(n){let{children:e,location:t}=n;return SN(Jy(e),t)}new Promise(()=>{});function Jy(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,Jy(r.props.children,s));return}r.type!==qi&&Ot(!1),!r.props.index||!r.props.children||Ot(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Jy(r.props.children,s)),t.push(a)}),t}function Xf(){return Xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xf.apply(this,arguments)}function gC(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function jN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BN(n,e){return n.button===0&&(!e||e==="_self")&&!jN(n)}const $N=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],WN="6";try{window.__reactRouterVersion=WN}catch{}const HN=k.createContext({isTransitioning:!1}),qN="startTransition",AT=u_[qN];function GN(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=YD({window:i,v5Compat:!0}));let a=s.current,[u,d]=k.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},m=k.useCallback(g=>{h&&AT?AT(()=>d(g)):d(g)},[d,h]);return k.useLayoutEffect(()=>a.listen(m),[a,m]),k.useEffect(()=>LN(r),[r]),k.createElement(FN,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const KN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YN=k.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g}=e,v=gC(e,$N),{basename:T}=k.useContext(ss),A,x=!1;if(typeof h=="string"&&QN.test(h)&&(A=h,KN))try{let D=new URL(window.location.href),B=h.startsWith("//")?new URL(D.protocol+h):new URL(h),Z=tu(B.pathname,T);B.origin===D.origin&&Z!=null?h=Z+B.search+B.hash:x=!0}catch{}let P=TN(h,{relative:i}),j=ZN(h,{replace:a,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function M(D){r&&r(D),D.defaultPrevented||j(D)}return k.createElement("a",Xf({},v,{href:A||P,onClick:x||s?r:M,ref:t,target:d}))}),XN=k.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:u,to:d,viewTransition:h,children:m}=e,g=gC(e,zN),v=qp(d,{relative:g.relative}),T=wo(),A=k.useContext(cC),{navigator:x,basename:P}=k.useContext(ss),j=A!=null&&eV(v)&&h===!0,M=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,D=T.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(D=D.toLowerCase(),B=B?B.toLowerCase():null,M=M.toLowerCase()),B&&P&&(B=tu(B,P)||B);const Z=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let re=D===M||!a&&D.startsWith(M)&&D.charAt(Z)==="/",C=B!=null&&(B===M||!a&&B.startsWith(M)&&B.charAt(M.length)==="/"),I={isActive:re,isPending:C,isTransitioning:j},b=re?r:void 0,O;typeof s=="function"?O=s(I):O=[s,re?"active":null,C?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(I):u;return k.createElement(YN,Xf({},g,{"aria-current":b,className:O,ref:t,style:L,to:d,viewTransition:h}),typeof m=="function"?m(I):m)});var Zy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var xT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(xT||(xT={}));function JN(n){let e=k.useContext(Wp);return e||Ot(!1),e}function ZN(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,d=p_(),h=wo(),m=qp(n,{relative:a});return k.useCallback(g=>{if(BN(g,t)){g.preventDefault();let v=r!==void 0?r:Yf(h)===Yf(m);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[h,d,m,r,i,t,n,s,a,u])}function eV(n,e){e===void 0&&(e={});let t=k.useContext(HN);t==null&&Ot(!1);let{basename:r}=JN(Zy.useViewTransitionState),i=qp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=tu(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=tu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Yy(i.pathname,a)!=null||Yy(i.pathname,s)!=null}class tV extends nn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?K.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[K.jsx("h2",{children:"Se produjo un error"}),K.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(this.state.error?.stack||this.state.error)})]}):this.props.children}}const nV=()=>{};var RT={};const yC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rV=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},vC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let v=(u&15)<<2|h>>6,T=h&63;d||(T=64,a||(v=64)),r.push(t[m],t[g],t[v],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new iV;const v=s<<2|u>>4;if(r.push(v),h!==64){const T=u<<4&240|h>>2;if(r.push(T),g!==64){const A=h<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sV=function(n){const e=yC(n);return vC.encodeByteArray(e,!0)},Jf=function(n){return sV(n).replace(/\./g,"")},_C=function(n){try{return vC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const oV=()=>wC().__FIREBASE_DEFAULTS__,aV=()=>{if(typeof process>"u"||typeof RT>"u")return;const n=RT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_C(n[1]);return e&&JSON.parse(e)},Gp=()=>{try{return nV()||oV()||aV()||lV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},EC=n=>Gp()?.emulatorHosts?.[n],TC=n=>{const e=EC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},IC=()=>Gp()?.config,SC=n=>Gp()?.[`_${n}`];class uV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Eo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m_(n){return(await fetch(n,{credentials:"include"})).ok}function cV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Jf(JSON.stringify(t)),Jf(JSON.stringify(a)),""].join(".")}const qc={};function dV(){const n={prod:[],emulator:[]};for(const e of Object.keys(qc))qc[e]?n.emulator.push(e):n.prod.push(e);return n}function hV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let kT=!1;function g_(n,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||qc[n]===e||qc[n]||kT)return;qc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=dV().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{kT=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=hV(r),T=t("text"),A=document.getElementById(T)||document.createElement("span"),x=t("learnmore"),P=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),M=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const D=v.element;u(D),m(P,x);const B=h();d(M,j),D.append(M,A,P,B),document.body.appendChild(D)}s?(A.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function PC(){const n=Gp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mV(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yV(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CC(){return!PC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bC(){return!PC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function AC(){try{return typeof indexedDB=="object"}catch{return!1}}function vV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const _V="FirebaseError";class Pi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_V,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?wV(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Pi(i,u,r)}}function wV(n,e){return n.replace(EV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EV=/\{\$([^}]+)}/g;function TV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(DT(s)&&DT(a)){if(!Pa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function DT(n){return n!==null&&typeof n=="object"}function Rd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Uc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function IV(n,e){const t=new SV(n,e);return t.subscribe.bind(t)}class SV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");PV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=uy),i.error===void 0&&(i.error=uy),i.complete===void 0&&(i.complete=uy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function uy(){}function gt(n){return n&&n._delegate?n._delegate:n}class uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const aa="[DEFAULT]";let CV=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uV;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AV(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bV(n){return n===aa?void 0:n}function AV(n){return n.instantiationMode==="EAGER"}class xV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const RV={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},kV=Ge.INFO,DV={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},NV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=DV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=kV,this._logHandler=NV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const VV=(n,e)=>e.some(t=>n instanceof t);let NT,VT;function MV(){return NT||(NT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OV(){return VT||(VT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xC=new WeakMap,ev=new WeakMap,RC=new WeakMap,cy=new WeakMap,v_=new WeakMap;function LV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(no(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&xC.set(t,n)}).catch(()=>{}),v_.set(e,n),e}function FV(n){if(ev.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});ev.set(n,e)}let tv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ev.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return no(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UV(n){tv=n(tv)}function jV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(dy(this),e,...t);return RC.set(r,e.sort?e.sort():[e]),no(r)}:OV().includes(n)?function(...e){return n.apply(dy(this),e),no(xC.get(this))}:function(...e){return no(n.apply(dy(this),e))}}function BV(n){return typeof n=="function"?jV(n):(n instanceof IDBTransaction&&FV(n),VV(n,MV())?new Proxy(n,tv):n)}function no(n){if(n instanceof IDBRequest)return LV(n);if(cy.has(n))return cy.get(n);const e=BV(n);return e!==n&&(cy.set(n,e),v_.set(e,n)),e}const dy=n=>v_.get(n);function $V(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=no(a);return r&&a.addEventListener("upgradeneeded",d=>{r(no(a.result),d.oldVersion,d.newVersion,no(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const zV=["get","getKey","getAll","getAllKeys","count"],WV=["put","add","delete","clear"],hy=new Map;function MT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hy.get(e))return hy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=WV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zV.includes(t)))return;const s=async function(a,...u){const d=this.transaction(a,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&d.done]))[0]};return hy.set(e,s),s}UV(n=>({...n,get:(e,t,r)=>MT(e,t)||n.get(e,t,r),has:(e,t)=>!!MT(e,t)||n.has(e,t)}));class HV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qV(n){return n.getComponent()?.type==="VERSION"}const nv="@firebase/app",OT="0.14.6";const Zi=new y_("@firebase/app"),GV="@firebase/app-compat",KV="@firebase/analytics-compat",QV="@firebase/analytics",YV="@firebase/app-check-compat",XV="@firebase/app-check",JV="@firebase/auth",ZV="@firebase/auth-compat",eM="@firebase/database",tM="@firebase/data-connect",nM="@firebase/database-compat",rM="@firebase/functions",iM="@firebase/functions-compat",sM="@firebase/installations",oM="@firebase/installations-compat",aM="@firebase/messaging",lM="@firebase/messaging-compat",uM="@firebase/performance",cM="@firebase/performance-compat",dM="@firebase/remote-config",hM="@firebase/remote-config-compat",fM="@firebase/storage",pM="@firebase/storage-compat",mM="@firebase/firestore",gM="@firebase/ai",yM="@firebase/firestore-compat",vM="firebase",_M="12.6.0";const rv="[DEFAULT]",wM={[nv]:"fire-core",[GV]:"fire-core-compat",[QV]:"fire-analytics",[KV]:"fire-analytics-compat",[XV]:"fire-app-check",[YV]:"fire-app-check-compat",[JV]:"fire-auth",[ZV]:"fire-auth-compat",[eM]:"fire-rtdb",[tM]:"fire-data-connect",[nM]:"fire-rtdb-compat",[rM]:"fire-fn",[iM]:"fire-fn-compat",[sM]:"fire-iid",[oM]:"fire-iid-compat",[aM]:"fire-fcm",[lM]:"fire-fcm-compat",[uM]:"fire-perf",[cM]:"fire-perf-compat",[dM]:"fire-rc",[hM]:"fire-rc-compat",[fM]:"fire-gcs",[pM]:"fire-gcs-compat",[mM]:"fire-fst",[yM]:"fire-fst-compat",[gM]:"fire-vertex","fire-js":"fire-js",[vM]:"fire-js-all"};const Zf=new Map,EM=new Map,iv=new Map;function LT(n,e){try{n.container.addComponent(e)}catch(t){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ca(n){const e=n.name;if(iv.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;iv.set(e,n);for(const t of Zf.values())LT(t,n);for(const t of EM.values())LT(t,n);return!0}function Kp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qn(n){return n==null?!1:n.settings!==void 0}const TM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ro=new xd("app","Firebase",TM);class IM{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}const Cu=_M;function kC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:rv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ro.create("bad-app-name",{appName:String(i)});if(t||(t=IC()),!t)throw ro.create("no-options");const s=Zf.get(i);if(s){if(Pa(t,s.options)&&Pa(r,s.config))return s;throw ro.create("duplicate-app",{appName:i})}const a=new xV(i);for(const d of iv.values())a.addComponent(d);const u=new IM(t,r,a);return Zf.set(i,u),u}function __(n=rv){const e=Zf.get(n);if(!e&&n===rv&&IC())return kC();if(!e)throw ro.create("no-app",{appName:n});return e}function gi(n,e,t){let r=wM[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(a.join(" "));return}Ca(new uo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const SM="firebase-heartbeat-database",PM=1,ud="firebase-heartbeat-store";let fy=null;function DC(){return fy||(fy=$V(SM,PM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ud)}catch(t){console.warn(t)}}}}).catch(n=>{throw ro.create("idb-open",{originalErrorMessage:n.message})})),fy}async function CM(n){try{const t=(await DC()).transaction(ud),r=await t.objectStore(ud).get(NC(n));return await t.done,r}catch(e){if(e instanceof Pi)Zi.warn(e.message);else{const t=ro.create("idb-get",{originalErrorMessage:e?.message});Zi.warn(t.message)}}}async function FT(n,e){try{const r=(await DC()).transaction(ud,"readwrite");await r.objectStore(ud).put(e,NC(n)),await r.done}catch(t){if(t instanceof Pi)Zi.warn(t.message);else{const r=ro.create("idb-set",{originalErrorMessage:t?.message});Zi.warn(r.message)}}}function NC(n){return`${n.name}!${n.options.appId}`}const bM=1024,AM=30;class xM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=UT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>AM){const i=DM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=UT(),{heartbeatsToSend:t,unsentEntries:r}=RM(this._heartbeatsCache.heartbeats),i=Jf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Zi.warn(e),""}}}function UT(){return new Date().toISOString().substring(0,10)}function RM(n,e=bM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),jT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),jT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class kM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AC()?vV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await CM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jT(n){return Jf(JSON.stringify({version:2,heartbeats:n})).length}function DM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function NM(n){Ca(new uo("platform-logger",e=>new HV(e),"PRIVATE")),Ca(new uo("heartbeat",e=>new xM(e),"PRIVATE")),gi(nv,OT,n),gi(nv,OT,"esm2020"),gi("fire-js","")}NM("");var VM="firebase",MM="12.7.0";gi(VM,MM,"app");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var io,VC;(function(){var n;function e(C,I){function b(){}b.prototype=I.prototype,C.F=I.prototype,C.prototype=new b,C.prototype.constructor=C,C.D=function(O,L,U){for(var V=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)V[ce-2]=arguments[ce];return I.prototype[L].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,b){b||(b=0);const O=Array(16);if(typeof I=="string")for(var L=0;L<16;++L)O[L]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(L=0;L<16;++L)O[L]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=C.g[0],b=C.g[1],L=C.g[2];let U=C.g[3],V;V=I+(U^b&(L^U))+O[0]+3614090360&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[1]+3905402710&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[2]+606105819&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[3]+3250441966&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(U^b&(L^U))+O[4]+4118548399&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[5]+1200080426&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[6]+2821735955&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[7]+4249261313&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(U^b&(L^U))+O[8]+1770035416&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[9]+2336552879&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[10]+4294925233&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[11]+2304563134&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(U^b&(L^U))+O[12]+1804603682&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[13]+4254626195&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[14]+2792965006&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[15]+1236535329&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(L^U&(b^L))+O[1]+4129170786&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[6]+3225465664&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[11]+643717713&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[0]+3921069994&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(b^L))+O[5]+3593408605&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[10]+38016083&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[15]+3634488961&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[4]+3889429448&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(b^L))+O[9]+568446438&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[14]+3275163606&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[3]+4107603335&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[8]+1163531501&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(b^L))+O[13]+2850285829&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[2]+4243563512&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[7]+1735328473&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[12]+2368359562&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(b^L^U)+O[5]+4294588738&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[8]+2272392833&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[11]+1839030562&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[14]+4259657740&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(b^L^U)+O[1]+2763975236&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[4]+1272893353&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[7]+4139469664&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[10]+3200236656&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(b^L^U)+O[13]+681279174&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[0]+3936430074&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[3]+3572445317&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[6]+76029189&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(b^L^U)+O[9]+3654602809&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[12]+3873151461&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[15]+530742520&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[2]+3299628645&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(L^(b|~U))+O[0]+4096336452&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[7]+1126891415&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[14]+2878612391&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[5]+4237533241&4294967295,b=L+(V<<21&4294967295|V>>>11),V=I+(L^(b|~U))+O[12]+1700485571&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[3]+2399980690&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[10]+4293915773&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[1]+2240044497&4294967295,b=L+(V<<21&4294967295|V>>>11),V=I+(L^(b|~U))+O[8]+1873313359&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[15]+4264355552&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[6]+2734768916&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[13]+1309151649&4294967295,b=L+(V<<21&4294967295|V>>>11),V=I+(L^(b|~U))+O[4]+4149444226&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[11]+3174756917&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[2]+718787259&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+U&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const b=I-this.blockSize,O=this.C;let L=this.h,U=0;for(;U<I;){if(L==0)for(;U<=b;)i(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<I;)if(O[L++]=C.charCodeAt(U++),L==this.blockSize){i(this,O),L=0;break}}else for(;U<I;)if(O[L++]=C[U++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var b=C.length-8;b<C.length;++b)C[b]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,b=0;b<4;++b)for(let O=0;O<32;O+=8)C[I++]=this.g[b]>>>O&255;return C};function s(C,I){var b=u;return Object.prototype.hasOwnProperty.call(b,C)?b[C]:b[C]=I(C)}function a(C,I){this.h=I;const b=[];let O=!0;for(let L=C.length-1;L>=0;L--){const U=C[L]|0;O&&U==I||(b[L]=U,O=!1)}this.g=b}var u={};function d(C){return-128<=C&&C<128?s(C,function(I){return new a([I|0],I<0?-1:0)}):new a([C|0],C<0?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return g;if(C<0)return P(h(-C));const I=[];let b=1;for(let O=0;C>=b;O++)I[O]=C/b|0,b*=4294967296;return new a(I,0)}function m(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return P(m(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=h(Math.pow(I,8));let O=g;for(let U=0;U<C.length;U+=8){var L=Math.min(8,C.length-U);const V=parseInt(C.substring(U,U+L),I);L<8?(L=h(Math.pow(I,L)),O=O.j(L).add(h(V))):(O=O.j(b),O=O.add(h(V)))}return O}var g=d(0),v=d(1),T=d(16777216);n=a.prototype,n.m=function(){if(x(this))return-P(this).m();let C=0,I=1;for(let b=0;b<this.g.length;b++){const O=this.i(b);C+=(O>=0?O:4294967296+O)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(x(this))return"-"+P(this).toString(C);const I=h(Math.pow(C,6));var b=this;let O="";for(;;){const L=B(b,I).g;b=j(b,L.j(I));let U=((b.g.length>0?b.g[0]:b.h)>>>0).toString(C);if(b=L,A(b))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function x(C){return C.h==-1}n.l=function(C){return C=j(this,C),x(C)?-1:A(C)?0:1};function P(C){const I=C.g.length,b=[];for(let O=0;O<I;O++)b[O]=~C.g[O];return new a(b,~C.h).add(v)}n.abs=function(){return x(this)?P(this):this},n.add=function(C){const I=Math.max(this.g.length,C.g.length),b=[];let O=0;for(let L=0;L<=I;L++){let U=O+(this.i(L)&65535)+(C.i(L)&65535),V=(U>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);O=V>>>16,U&=65535,V&=65535,b[L]=V<<16|U}return new a(b,b[b.length-1]&-2147483648?-1:0)};function j(C,I){return C.add(P(I))}n.j=function(C){if(A(this)||A(C))return g;if(x(this))return x(C)?P(this).j(P(C)):P(P(this).j(C));if(x(C))return P(this.j(P(C)));if(this.l(T)<0&&C.l(T)<0)return h(this.m()*C.m());const I=this.g.length+C.g.length,b=[];for(var O=0;O<2*I;O++)b[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<C.g.length;L++){const U=this.i(O)>>>16,V=this.i(O)&65535,ce=C.i(L)>>>16,xe=C.i(L)&65535;b[2*O+2*L]+=V*xe,M(b,2*O+2*L),b[2*O+2*L+1]+=U*xe,M(b,2*O+2*L+1),b[2*O+2*L+1]+=V*ce,M(b,2*O+2*L+1),b[2*O+2*L+2]+=U*ce,M(b,2*O+2*L+2)}for(C=0;C<I;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=I;C<2*I;C++)b[C]=0;return new a(b,0)};function M(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function D(C,I){this.g=C,this.h=I}function B(C,I){if(A(I))throw Error("division by zero");if(A(C))return new D(g,g);if(x(C))return I=B(P(C),I),new D(P(I.g),P(I.h));if(x(I))return I=B(C,P(I)),new D(P(I.g),I.h);if(C.g.length>30){if(x(C)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var b=v,O=I;O.l(C)<=0;)b=Z(b),O=Z(O);var L=re(b,1),U=re(O,1);for(O=re(O,2),b=re(b,2);!A(O);){var V=U.add(O);V.l(C)<=0&&(L=L.add(b),U=V),O=re(O,1),b=re(b,1)}return I=j(C,L.j(I)),new D(L,I)}for(L=g;C.l(I)>=0;){for(b=Math.max(1,Math.floor(C.m()/I.m())),O=Math.ceil(Math.log(b)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=h(b),V=U.j(I);x(V)||V.l(C)>0;)b-=O,U=h(b),V=U.j(I);A(U)&&(U=v),L=L.add(U),C=j(C,V)}return new D(L,C)}n.B=function(C){return B(this,C).h},n.and=function(C){const I=Math.max(this.g.length,C.g.length),b=[];for(let O=0;O<I;O++)b[O]=this.i(O)&C.i(O);return new a(b,this.h&C.h)},n.or=function(C){const I=Math.max(this.g.length,C.g.length),b=[];for(let O=0;O<I;O++)b[O]=this.i(O)|C.i(O);return new a(b,this.h|C.h)},n.xor=function(C){const I=Math.max(this.g.length,C.g.length),b=[];for(let O=0;O<I;O++)b[O]=this.i(O)^C.i(O);return new a(b,this.h^C.h)};function Z(C){const I=C.g.length+1,b=[];for(let O=0;O<I;O++)b[O]=C.i(O)<<1|C.i(O-1)>>>31;return new a(b,C.h)}function re(C,I){const b=I>>5;I%=32;const O=C.g.length-b,L=[];for(let U=0;U<O;U++)L[U]=I>0?C.i(U+b)>>>I|C.i(U+b+1)<<32-I:C.i(U+b);return new a(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,VC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,io=a}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var MC,jc,OC,Rf,sv,LC,FC,UC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var w=0;w<f.length;++w){var E=f[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,w){if(w)e:{var E=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var Q=f[R];if(!(Q in E))break e;E=E[Q]}f=f[f.length-1],R=E[f],w=w(R),w!=R&&w!=null&&e(E,f,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(w){var E=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&E.push([R,w[R]]);return E}});var s=s||{},a=this||self;function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function d(f,w,E){return f.call.apply(f.bind,arguments)}function h(f,w,E){return h=d,h.apply(null,arguments)}function m(f,w){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function g(f,w){function E(){}E.prototype=w.prototype,f.Z=w.prototype,f.prototype=new E,f.prototype.constructor=f,f.Ob=function(R,Q,ne){for(var pe=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)pe[$e-2]=arguments[$e];return w.prototype[Q].apply(R,pe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function T(f){const w=f.length;if(w>0){const E=Array(w);for(let R=0;R<w;R++)E[R]=f[R];return E}return[]}function A(f,w){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=f.length||0;const ne=Q.length||0;f.length=E+ne;for(let pe=0;pe<ne;pe++)f[E+pe]=Q[pe]}else f.push(Q)}}class x{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function P(f){a.setTimeout(()=>{throw f},0)}function j(){var f=C;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class M{constructor(){this.h=this.g=null}add(w,E){const R=D.get();R.set(w,E),this.h?this.h.next=R:this.g=R,this.h=R}}var D=new x(()=>new B,f=>f.reset());class B{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,re=!1,C=new M,I=()=>{const f=Promise.resolve(void 0);Z=()=>{f.then(b)}};function b(){for(var f;f=j();){try{f.h.call(f.g)}catch(E){P(E)}var w=D;w.j(f),w.h<100&&(w.h++,f.next=w.g,w.g=f)}re=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,w),a.removeEventListener("test",E,w)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function ce(f,w){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,w)}g(ce,L),ce.prototype.init=function(f,w){const E=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget,w||(E=="mouseover"?w=f.fromElement:E=="mouseout"&&(w=f.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),Se=0;function De(f,w,E,R,Q){this.listener=f,this.proxy=null,this.src=w,this.type=E,this.capture=!!R,this.ha=Q,this.key=++Se,this.da=this.fa=!1}function W(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Y(f,w,E){for(const R in f)w.call(E,f[R],R,f)}function X(f,w){for(const E in f)w.call(void 0,f[E],E,f)}function N(f){const w={};for(const E in f)w[E]=f[E];return w}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(f,w){let E,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(E in R)f[E]=R[E];for(let ne=0;ne<z.length;ne++)E=z[ne],Object.prototype.hasOwnProperty.call(R,E)&&(f[E]=R[E])}}function se(f){this.src=f,this.g={},this.h=0}se.prototype.add=function(f,w,E,R,Q){const ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);const pe=he(f,w,R,Q);return pe>-1?(w=f[pe],E||(w.fa=!1)):(w=new De(w,this.src,ne,!!R,Q),w.fa=E,f.push(w)),w};function oe(f,w){const E=w.type;if(E in f.g){var R=f.g[E],Q=Array.prototype.indexOf.call(R,w,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(R,Q,1),ne&&(W(w),f.g[E].length==0&&(delete f.g[E],f.h--))}}function he(f,w,E,R){for(let Q=0;Q<f.length;++Q){const ne=f[Q];if(!ne.da&&ne.listener==w&&ne.capture==!!E&&ne.ha==R)return Q}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Me={};function Ue(f,w,E,R,Q){if(Array.isArray(w)){for(let ne=0;ne<w.length;ne++)Ue(f,w[ne],E,R,Q);return null}return E=xo(E),f&&f[xe]?f.J(w,E,u(R)?!!R.capture:!1,Q):at(f,w,E,!1,R,Q)}function at(f,w,E,R,Q,ne){if(!w)throw Error("Invalid event type");const pe=u(Q)?!!Q.capture:!!Q;let $e=ds(f);if($e||(f[we]=$e=new se(f)),E=$e.add(w,E,R,pe,ne),E.proxy)return E;if(R=Lt(),E.proxy=R,R.src=f,R.listener=E,f.addEventListener)U||(Q=pe),Q===void 0&&(Q=!1),f.addEventListener(w.toString(),R,Q);else if(f.attachEvent)f.attachEvent(cs(w.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lt(){function f(E){return w.call(f.src,f.listener,E)}const w=Ao;return f}function zr(f,w,E,R,Q){if(Array.isArray(w))for(var ne=0;ne<w.length;ne++)zr(f,w[ne],E,R,Q);else R=u(R)?!!R.capture:!!R,E=xo(E),f&&f[xe]?(f=f.i,ne=String(w).toString(),ne in f.g&&(w=f.g[ne],E=he(w,E,R,Q),E>-1&&(W(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete f.g[ne],f.h--)))):f&&(f=ds(f))&&(w=f.g[w.toString()],f=-1,w&&(f=he(w,E,R,Q)),(E=f>-1?w[f]:null)&&Pr(E))}function Pr(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[xe])oe(w.i,f);else{var E=f.type,R=f.proxy;w.removeEventListener?w.removeEventListener(E,R,f.capture):w.detachEvent?w.detachEvent(cs(E),R):w.addListener&&w.removeListener&&w.removeListener(R),(E=ds(w))?(oe(E,f),E.h==0&&(E.src=null,w[we]=null)):W(f)}}}function cs(f){return f in Me?Me[f]:Me[f]="on"+f}function Ao(f,w){if(f.da)f=!0;else{w=new ce(w,this);const E=f.listener,R=f.ha||f.src;f.fa&&Pr(f),f=E.call(R,w)}return f}function ds(f){return f=f[we],f instanceof se?f:null}var Cr="__closure_events_fn_"+(Math.random()*1e9>>>0);function xo(f){return typeof f=="function"?f:(f[Cr]||(f[Cr]=function(w){return f.handleEvent(w)}),f[Cr])}function Ft(){O.call(this),this.i=new se(this),this.M=this,this.G=null}g(Ft,O),Ft.prototype[xe]=!0,Ft.prototype.removeEventListener=function(f,w,E,R){zr(this,f,w,E,R)};function Rt(f,w){var E,R=f.G;if(R)for(E=[];R;R=R.G)E.push(R);if(f=f.M,R=w.type||w,typeof w=="string")w=new L(w,f);else if(w instanceof L)w.target=w.target||f;else{var Q=w;w=new L(R,f),ee(w,Q)}Q=!0;let ne,pe;if(E)for(pe=E.length-1;pe>=0;pe--)ne=w.g=E[pe],Q=En(ne,R,!0,w)&&Q;if(ne=w.g=f,Q=En(ne,R,!0,w)&&Q,Q=En(ne,R,!1,w)&&Q,E)for(pe=0;pe<E.length;pe++)ne=w.g=E[pe],Q=En(ne,R,!1,w)&&Q}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var f=this.i;for(const w in f.g){const E=f.g[w];for(let R=0;R<E.length;R++)W(E[R]);delete f.g[w],f.h--}}this.G=null},Ft.prototype.J=function(f,w,E,R){return this.i.add(String(f),w,!1,E,R)},Ft.prototype.K=function(f,w,E,R){return this.i.add(String(f),w,!0,E,R)};function En(f,w,E,R){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();let Q=!0;for(let ne=0;ne<w.length;++ne){const pe=w[ne];if(pe&&!pe.da&&pe.capture==E){const $e=pe.listener,Wt=pe.ha||pe.src;pe.fa&&oe(f.i,pe),Q=$e.call(Wt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function Ro(f,w){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(f,w||0)}function hs(f){f.g=Ro(()=>{f.g=null,f.i&&(f.i=!1,hs(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class ko extends O{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:hs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(f){O.call(this),this.h=f,this.g={}}g(br,O);var Do=[];function fs(f){Y(f.g,function(w,E){this.g.hasOwnProperty(E)&&Pr(w)},f),f.g={}}br.prototype.N=function(){br.Z.N.call(this),fs(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=a.JSON.stringify,qa=a.JSON.parse,Xn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function fr(){}function ut(){}var Hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ps(){L.call(this,"d")}g(ps,L);function Mu(){L.call(this,"c")}g(Mu,L);var Ar={},Ga=null;function ms(){return Ga=Ga||new Ft}Ar.Ia="serverreachability";function Ka(f){L.call(this,Ar.Ia,f)}g(Ka,L);function Ai(f){const w=ms();Rt(w,new Ka(w))}Ar.STAT_EVENT="statevent";function xi(f,w){L.call(this,Ar.STAT_EVENT,f),this.stat=w}g(xi,L);function Ut(f){const w=ms();Rt(w,new xi(w,f))}Ar.Ja="timingevent";function Ou(f,w){L.call(this,Ar.Ja,f),this.size=w}g(Ou,L);function gs(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},w)}function ys(){this.g=!0}ys.prototype.ua=function(){this.g=!1};function Zd(f,w,E,R,Q,ne){f.info(function(){if(f.g)if(ne){var pe="",$e=ne.split("&");for(let ct=0;ct<$e.length;ct++){var Wt=$e[ct].split("=");if(Wt.length>1){const Jt=Wt[0];Wt=Wt[1];const rr=Jt.split("_");pe=rr.length>=2&&rr[1]=="type"?pe+(Jt+"="+Wt+"&"):pe+(Jt+"=redacted&")}}}else pe=null;else pe=ne;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+w+`
`+E+`
`+pe})}function eh(f,w,E,R,Q,ne,pe){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+w+`
`+E+`
`+ne+" "+pe})}function qr(f,w,E,R){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+No(f,E)+(R?" "+R:"")})}function th(f,w){f.info(function(){return"TIMEOUT: "+w})}ys.prototype.info=function(){};function No(f,w){if(!f.g)return w;if(!w)return null;try{const ne=JSON.parse(w);if(ne){for(f=0;f<ne.length;f++)if(Array.isArray(ne[f])){var E=ne[f];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let pe=1;pe<R.length;pe++)R[pe]=""}}}}return Wr(ne)}catch{return w}}var vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_s={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nh;function Ri(){}g(Ri,fr),Ri.prototype.g=function(){return new XMLHttpRequest},nh=new Ri;function Gr(f){return encodeURIComponent(String(f))}function Qa(f){var w=1;f=f.split(":");const E=[];for(;w>0&&f.length;)E.push(f.shift()),w--;return f.length&&E.push(f.join(":")),E}function pr(f,w,E,R){this.j=f,this.i=w,this.l=E,this.S=R||1,this.V=new br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rh}function rh(){this.i=null,this.g="",this.h=!1}var ih={},Lu={};function xr(f,w,E){f.M=1,f.A=Di(mr(w)),f.u=E,f.R=!0,Fu(f,null)}function Fu(f,w){f.F=Date.now(),Vo(f),f.B=mr(f.A);var E=f.B,R=f.S;Array.isArray(R)||(R=[String(R)]),Ku(E.i,"t",R),f.C=0,E=f.j.L,f.h=new rh,f.g=ph(f.j,E?w:null,!f.u),f.P>0&&(f.O=new ko(h(f.Y,f,f.g),f.P)),w=f.V,E=f.g,R=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Do[0]=Q.toString()),Q=Do);for(let ne=0;ne<Q.length;ne++){const pe=Ue(E,Q[ne],R||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=f.J?N(f.J):{},f.u?(f.v||(f.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,w)):(f.v="GET",f.g.ea(f.B,f.v,null,w)),Ai(),Zd(f.i,f.v,f.B,f.l,f.S,f.u)}pr.prototype.ba=function(f){f=f.target;const w=this.O;w&&ei(f)==3?w.j():this.Y(f)},pr.prototype.Y=function(f){try{if(f==this.g)e:{const $e=ei(this.g),Wt=this.g.ya(),ct=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||hh(this.g)))){this.K||$e!=4||Wt==7||(Wt==8||ct<=0?Ai(3):Ai(2)),Ya(this);var w=this.g.ca();this.X=w;var E=sh(this);if(this.o=w==200,eh(this.i,this.v,this.B,this.l,this.S,$e,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var ne=R;break t}}ne=null}if(f=ne)qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tt(this,f);else{this.o=!1,this.m=3,Ut(12),ki(this),Mo(this);break e}}if(this.R){f=!0;let Jt;for(;!this.K&&this.C<E.length;)if(Jt=ah(this,E),Jt==Lu){$e==4&&(this.m=4,Ut(14),f=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==ih){this.m=4,Ut(15),qr(this.i,this.l,E,"[Invalid Chunk]"),f=!1;break}else qr(this.i,this.l,Jt,null),Tt(this,Jt);if(oh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||E.length!=0||this.h.h||(this.m=1,Ut(16),f=!1),this.o=this.o&&f,!f)qr(this.i,this.l,E,"[Invalid Chunked Response]"),ki(this),Mo(this);else if(E.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Wo(pe),pe.P=!0,Ut(11))}}else qr(this.i,this.l,E,null),Tt(this,E);$e==4&&ki(this),this.o&&!this.K&&($e==4?ol(this.j,this):(this.o=!1,Vo(this)))}else Yu(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),ki(this),Mo(this)}}}catch{}};function sh(f){if(!oh(f))return f.g.la();const w=hh(f.g);if(w==="")return"";let E="";const R=w.length,Q=ei(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return ki(f),Mo(f),"";f.h.i=new a.TextDecoder}for(let ne=0;ne<R;ne++)f.h.h=!0,E+=f.h.i.decode(w[ne],{stream:!(Q&&ne==R-1)});return w.length=0,f.h.g+=E,f.C=0,f.h.g}function oh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function ah(f,w){var E=f.C,R=w.indexOf(`
`,E);return R==-1?Lu:(E=Number(w.substring(E,R)),isNaN(E)?ih:(R+=1,R+E>w.length?Lu:(w=w.slice(R,R+E),f.C=R+E,w)))}pr.prototype.cancel=function(){this.K=!0,ki(this)};function Vo(f){f.T=Date.now()+f.H,Uu(f,f.H)}function Uu(f,w){if(f.D!=null)throw Error("WatchDog timer not null");f.D=gs(h(f.aa,f),w)}function Ya(f){f.D&&(a.clearTimeout(f.D),f.D=null)}pr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(th(this.i,this.B),this.M!=2&&(Ai(),Ut(17)),ki(this),this.m=2,Mo(this)):Uu(this,this.T-f)};function Mo(f){f.j.I==0||f.K||ol(f.j,f)}function ki(f){Ya(f);var w=f.O;w&&typeof w.dispose=="function"&&w.dispose(),f.O=null,fs(f.V),f.g&&(w=f.g,f.g=null,w.abort(),w.dispose())}function Tt(f,w){try{var E=f.j;if(E.I!=0&&(E.g==f||Bu(E.h,f))){if(!f.L&&Bu(E.h,f)&&E.I==3){try{var R=E.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<f.F)sl(E),tr(E);else break e;ri(E),Ut(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=gs(h(E.Va,E),6e3));Oo(E.h)<=1&&E.ta&&(E.ta=void 0)}else nr(E,11)}else if((f.L||E.g==f)&&sl(E),!V(w))for(Q=E.Ba.g.parse(w),w=0;w<Q.length;w++){let ct=Q[w];const Jt=ct[0];if(!(Jt<=E.K))if(E.K=Jt,ct=ct[1],E.I==2)if(ct[0]=="c"){E.M=ct[1],E.ba=ct[2];const rr=ct[3];rr!=null&&(E.ka=rr,E.j.info("VER="+E.ka));const Li=ct[4];Li!=null&&(E.za=Li,E.j.info("SVER="+E.za));const ii=ct[5];ii!=null&&typeof ii=="number"&&ii>0&&(R=1.5*ii,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const si=f.g;if(si){const ul=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var ne=R.h;ne.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Ja(ne,ne.h),ne.h=null))}if(R.G){const Zu=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Zu&&(R.wa=Zu,it(R.J,R.G,Zu))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-f.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var pe=f;if(R.na=Ju(R,R.L?R.ba:null,R.W),pe.L){Lo(R.h,pe);var $e=pe,Wt=R.O;Wt&&($e.H=Wt),$e.D&&(Ya($e),Vo($e)),R.g=pe}else Tn(R);E.i.length>0&&Oi(E)}else ct[0]!="stop"&&ct[0]!="close"||nr(E,7);else E.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?nr(E,7):rl(E):ct[0]!="noop"&&E.l&&E.l.qa(ct),E.A=0)}}Ai(4)}catch{}}var Vm=class{constructor(f,w){this.g=f,this.map=w}};function Xa(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ju(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Oo(f){return f.h?1:f.g?f.g.size:0}function Bu(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function Ja(f,w){f.g?f.g.add(w):f.h=w}function Lo(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}Xa.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Jn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const E of f.g.values())w=w.concat(E.G);return w}return T(f.i)}var lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zn(f,w){if(f){f=f.split("&");for(let E=0;E<f.length;E++){const R=f[E].indexOf("=");let Q,ne=null;R>=0?(Q=f[E].substring(0,R),ne=f[E].substring(R+1)):Q=f[E],w(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Kr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;f instanceof Kr?(this.l=f.l,Fo(this,f.j),this.o=f.o,this.g=f.g,Qr(this,f.u),this.h=f.h,ws(this,Qu(f.i)),this.m=f.m):f&&(w=String(f).match(lh))?(this.l=!1,Fo(this,w[1]||"",!0),this.o=Uo(w[2]||""),this.g=Uo(w[3]||"",!0),Qr(this,w[4]),this.h=Uo(w[5]||"",!0),ws(this,w[6]||"",!0),this.m=Uo(w[7]||"")):(this.l=!1,this.i=new Ke(null,this.l))}Kr.prototype.toString=function(){const f=[];var w=this.j;w&&f.push(jo(w,zu,!0),":");var E=this.g;return(E||w=="file")&&(f.push("//"),(w=this.o)&&f.push(jo(w,zu,!0),"@"),f.push(Gr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&f.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(jo(E,E.charAt(0)=="/"?Bo:Wu,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",jo(E,Hu)),f.join("")},Kr.prototype.resolve=function(f){const w=mr(this);let E=!!f.j;E?Fo(w,f.j):E=!!f.o,E?w.o=f.o:E=!!f.g,E?w.g=f.g:E=f.u!=null;var R=f.h;if(E)Qr(w,f.u);else if(E=!!f.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=w.h.lastIndexOf("/");Q!=-1&&(R=w.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let pe=0;pe<Q.length;){const $e=Q[pe++];$e=="."?R&&pe==Q.length&&ne.push(""):$e==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),R&&pe==Q.length&&ne.push("")):(ne.push($e),R=!0)}R=ne.join("/")}else R=Q}return E?w.h=R:E=f.i.toString()!=="",E?ws(w,Qu(f.i)):E=!!f.m,E&&(w.m=f.m),w};function mr(f){return new Kr(f)}function Fo(f,w,E){f.j=E?Uo(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function Qr(f,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);f.u=w}else f.u=null}function ws(f,w,E){w instanceof Ke?(f.i=w,el(f.i,f.l)):(E||(w=jo(w,Mm)),f.i=new Ke(w,f.l))}function it(f,w,E){f.i.set(w,E)}function Di(f){return it(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Uo(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function jo(f,w,E){return typeof f=="string"?(f=encodeURI(f).replace(w,$u),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function $u(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zu=/[#\/\?@]/g,Wu=/[#\?:]/g,Bo=/[#\?]/g,Mm=/[#\?@]/g,Hu=/#/g;function Ke(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Yr(f){f.g||(f.g=new Map,f.h=0,f.i&&Zn(f.i,function(w,E){f.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}n=Ke.prototype,n.add=function(f,w){Yr(this),this.i=null,f=Xr(this,f);let E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(w),this.h+=1,this};function qu(f,w){Yr(f),w=Xr(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Za(f,w){return Yr(f),w=Xr(f,w),f.g.has(w)}n.forEach=function(f,w){Yr(this),this.g.forEach(function(E,R){E.forEach(function(Q){f.call(w,Q,R,this)},this)},this)};function Gu(f,w){Yr(f);let E=[];if(typeof w=="string")Za(f,w)&&(E=E.concat(f.g.get(Xr(f,w))));else for(f=Array.from(f.g.values()),w=0;w<f.length;w++)E=E.concat(f[w]);return E}n.set=function(f,w){return Yr(this),this.i=null,f=Xr(this,f),Za(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=Gu(this,f),f.length>0?String(f[0]):w):w};function Ku(f,w,E){qu(f,w),E.length>0&&(f.i=null,f.g.set(Xr(f,w),T(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var E=w[R];const Q=Gr(E);E=Gu(this,E);for(let ne=0;ne<E.length;ne++){let pe=Q;E[ne]!==""&&(pe+="="+Gr(E[ne])),f.push(pe)}}return this.i=f.join("&")};function Qu(f){const w=new Ke;return w.i=f.i,f.g&&(w.g=new Map(f.g),w.h=f.h),w}function Xr(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function el(f,w){w&&!f.j&&(Yr(f),f.i=null,f.g.forEach(function(E,R){const Q=R.toLowerCase();R!=Q&&(qu(this,R),Ku(this,Q,E))},f)),f.j=w}function Jr(f,w){const E=new ys;if(a.Image){const R=new Image;R.onload=m(gn,E,"TestLoadImage: loaded",!0,w,R),R.onerror=m(gn,E,"TestLoadImage: error",!1,w,R),R.onabort=m(gn,E,"TestLoadImage: abort",!1,w,R),R.ontimeout=m(gn,E,"TestLoadImage: timeout",!1,w,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else w(!1)}function Zr(f,w){const E=new ys,R=new AbortController,Q=setTimeout(()=>{R.abort(),gn(E,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:R.signal}).then(ne=>{clearTimeout(Q),ne.ok?gn(E,"TestPingServer: ok",!0,w):gn(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),gn(E,"TestPingServer: error",!1,w)})}function gn(f,w,E,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(E)}catch{}}function $o(){this.g=new Xn}function Ni(f){this.i=f.Sb||null,this.h=f.ab||!1}g(Ni,fr),Ni.prototype.g=function(){return new er(this.i,this.h)};function er(f,w){Ft.call(this),this.H=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(er,Ft),n=er.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=w,this.readyState=1,Rr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(w.body=f),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Es(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uh(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function uh(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Es(this):Rr(this),this.readyState==3&&uh(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Es(this))},n.Na=function(f){this.g&&(this.response=f,Es(this))},n.ga=function(){this.g&&Es(this)};function Es(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Rr(f)}n.setRequestHeader=function(f,w){this.A.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=w.next();return f.join(`\r
`)};function Rr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ch(f){let w="";return Y(f,function(E,R){w+=R,w+=":",w+=E,w+=`\r
`}),w}function tl(f,w,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=ch(E),typeof f=="string"?E!=null&&Gr(E):it(f,w,E))}function yt(f){Ft.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(yt,Ft);var dh=/^https?$/i,Om=["POST","PUT"];n=yt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,w,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nh.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(ne){Ts(this,ne);return}if(f=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)E.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ne of R.keys())E.set(ne,R.get(ne));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Om,w,void 0)>=0)||R||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,pe]of E)this.g.setRequestHeader(ne,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ne){Ts(this,ne)}};function Ts(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.o=5,Is(f),Mi(f)}function Is(f){f.A||(f.A=!0,Rt(f,"complete"),Rt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Rt(this,"complete"),Rt(this,"abort"),Mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mi(this,!0)),yt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vi(this):this.Xa())},n.Xa=function(){Vi(this)};function Vi(f){if(f.h&&typeof s<"u"){if(f.v&&ei(f)==4)setTimeout(f.Ca.bind(f),0);else if(Rt(f,"readystatechange"),ei(f)==4){f.h=!1;try{const ne=f.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var R;if(R=ne===0){let pe=String(f.D).match(lh)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),R=!dh.test(pe?pe.toLowerCase():"")}E=R}if(E)Rt(f,"complete"),Rt(f,"success");else{f.o=6;try{var Q=ei(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",Is(f)}}finally{Mi(f)}}}}function Mi(f,w){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const E=f.g;f.g=null,w||Rt(f,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(f){return f.g?f.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),qa(w)}};function hh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Yu(f){const w={};f=(f.g&&ei(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(V(f[R]))continue;var E=Qa(f[R]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=w[Q]||[];w[Q]=ne,ne.push(E)}X(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(f,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||w}function nl(f){this.za=0,this.i=[],this.j=new ys,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ti("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ti("baseRetryDelayMs",5e3,f),this.Za=ti("retryDelaySeedMs",1e4,f),this.Ta=ti("forwardChannelMaxRetries",2,f),this.va=ti("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Xa(f&&f.concurrentRequestLimit),this.Ba=new $o,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=nl.prototype,n.ka=8,n.I=1,n.connect=function(f,w,E,R){Ut(0),this.W=f,this.H=w||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Ju(this,null,this.W),Oi(this)};function rl(f){if(il(f),f.I==3){var w=f.V++,E=mr(f.J);if(it(E,"SID",f.M),it(E,"RID",w),it(E,"TYPE","terminate"),ni(f,E),w=new pr(f,f.j,w),w.M=2,w.A=Di(mr(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=w.A,E=!0),E||(w.g=ph(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Vo(w)}Ho(f)}function tr(f){f.g&&(Wo(f),f.g.cancel(),f.g=null)}function il(f){tr(f),f.v&&(a.clearTimeout(f.v),f.v=null),sl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Oi(f){if(!ju(f.h)&&!f.m){f.m=!0;var w=f.Ea;Z||I(),re||(Z(),re=!0),C.add(w,f),f.D=0}}function fh(f,w){return Oo(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=w.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=gs(h(f.Ea,f,w),al(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new pr(this,this.j,f);let ne=this.o;if(this.U&&(ne?(ne=N(ne),ee(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Xu(this,Q,w),E=mr(this.J),it(E,"RID",f),it(E,"CVER",22),this.G&&it(E,"X-HTTP-Session-Id",this.G),ni(this,E),ne&&(this.R?w="headers="+Gr(ch(ne))+"&"+w:this.u&&tl(E,this.u,ne)),Ja(this.h,Q),this.Ra&&it(E,"TYPE","init"),this.S?(it(E,"$req",w),it(E,"SID","null"),Q.U=!0,xr(Q,E,null)):xr(Q,E,w),this.I=2}}else this.I==3&&(f?zo(this,f):this.i.length==0||ju(this.h)||zo(this))};function zo(f,w){var E;w?E=w.l:E=f.V++;const R=mr(f.J);it(R,"SID",f.M),it(R,"RID",E),it(R,"AID",f.K),ni(f,R),f.u&&f.o&&tl(R,f.u,f.o),E=new pr(f,f.j,E,f.D+1),f.u===null&&(E.J=f.o),w&&(f.i=w.G.concat(f.i)),w=Xu(f,E,1e3),E.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ja(f.h,E),xr(E,R,w)}function ni(f,w){f.H&&Y(f.H,function(E,R){it(w,R,E)}),f.l&&Y({},function(E,R){it(w,R,E)})}function Xu(f,w,E){E=Math.min(f.i.length,E);const R=f.l?h(f.l.Ka,f.l,f):null;e:{var Q=f.i;let $e=-1;for(;;){const Wt=["count="+E];$e==-1?E>0?($e=Q[0].g,Wt.push("ofs="+$e)):$e=0:Wt.push("ofs="+$e);let ct=!0;for(let Jt=0;Jt<E;Jt++){var ne=Q[Jt].g;const rr=Q[Jt].map;if(ne-=$e,ne<0)$e=Math.max(0,Q[Jt].g-100),ct=!1;else try{ne="req"+ne+"_"||"";try{var pe=rr instanceof Map?rr:Object.entries(rr);for(const[Li,ii]of pe){let si=ii;u(ii)&&(si=Wr(ii)),Wt.push(ne+Li+"="+encodeURIComponent(si))}}catch(Li){throw Wt.push(ne+"type="+encodeURIComponent("_badmap")),Li}}catch{R&&R(rr)}}if(ct){pe=Wt.join("&");break e}}pe=void 0}return f=f.i.splice(0,E),w.G=f,pe}function Tn(f){if(!f.g&&!f.v){f.Y=1;var w=f.Da;Z||I(),re||(Z(),re=!0),C.add(w,f),f.A=0}}function ri(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=gs(h(f.Da,f),al(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Ss(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=gs(h(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),tr(this),Ss(this))};function Wo(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function Ss(f){f.g=new pr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var w=mr(f.na);it(w,"RID","rpc"),it(w,"SID",f.M),it(w,"AID",f.K),it(w,"CI",f.F?"0":"1"),!f.F&&f.ia&&it(w,"TO",f.ia),it(w,"TYPE","xmlhttp"),ni(f,w),f.u&&f.o&&tl(w,f.u,f.o),f.O&&(f.g.H=f.O);var E=f.g;f=f.ba,E.M=1,E.A=Di(mr(w)),E.u=null,E.R=!0,Fu(E,f)}n.Va=function(){this.C!=null&&(this.C=null,tr(this),ri(this),Ut(19))};function sl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function ol(f,w){var E=null;if(f.g==w){sl(f),Wo(f),f.g=null;var R=2}else if(Bu(f.h,w))E=w.G,Lo(f.h,w),R=1;else return;if(f.I!=0){if(w.o)if(R==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var Q=f.D;R=ms(),Rt(R,new Ou(R,E)),Oi(f)}else Tn(f);else if(Q=w.m,Q==3||Q==0&&w.X>0||!(R==1&&fh(f,w)||R==2&&ri(f)))switch(E&&E.length>0&&(w=f.h,w.i=w.i.concat(E)),Q){case 1:nr(f,5);break;case 4:nr(f,10);break;case 3:nr(f,6);break;default:nr(f,2)}}}function al(f,w){let E=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(E*=2),E*w}function nr(f,w){if(f.j.info("Error code "+w),w==2){var E=h(f.bb,f),R=f.Ua;const Q=!R;R=new Kr(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fo(R,"https"),Di(R),Q?Jr(R.toString(),E):Zr(R.toString(),E)}else Ut(2);f.I=0,f.l&&f.l.pa(w),Ho(f),il(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Ho(f){if(f.I=0,f.ja=[],f.l){const w=Jn(f.h);(w.length!=0||f.i.length!=0)&&(A(f.ja,w),A(f.ja,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.oa()}}function Ju(f,w,E){var R=E instanceof Kr?mr(E):new Kr(E);if(R.g!="")w&&(R.g=w+"."+R.g),Qr(R,R.u);else{var Q=a.location;R=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new Kr(null);R&&Fo(ne,R),w&&(ne.g=w),Q&&Qr(ne,Q),E&&(ne.h=E),R=ne}return E=f.G,w=f.wa,E&&w&&it(R,E,w),it(R,"VER",f.ka),ni(f,R),R}function ph(f,w,E){if(w&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Aa&&!f.ma?new yt(new Ni({ab:E})):new yt(f.ma),w.Fa(f.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}n=mh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ll(){}ll.prototype.g=function(f,w){return new yn(f,w)};function yn(f,w){Ft.call(this),this.g=new nl(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(f?f["X-WebChannel-Client-Profile"]=w.sa:f={"X-WebChannel-Client-Profile":w.sa}),this.g.U=f,(f=w&&w.Qb)&&!V(f)&&(this.g.u=f),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.G=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Ps(this)}g(yn,Ft),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){rl(this.g)},yn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.v&&(E={},E.__data__=Wr(f),f=E);w.i.push(new Vm(w.Ya++,f)),w.I==3&&Oi(w)},yn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,yn.Z.N.call(this)};function gh(f){ps.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const E in w){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}g(gh,ps);function yh(){Mu.call(this),this.status=1}g(yh,Mu);function Ps(f){this.g=f}g(Ps,mh),Ps.prototype.ra=function(){Rt(this.g,"a")},Ps.prototype.qa=function(f){Rt(this.g,new gh(f))},Ps.prototype.pa=function(f){Rt(this.g,new yh)},Ps.prototype.oa=function(){Rt(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,UC=function(){return new ll},FC=function(){return ms()},LC=Ar,sv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Rf=vs,_s.COMPLETE="complete",OC=_s,ut.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,jc=ut,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,MC=yt}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const $T="@firebase/firestore",zT="4.9.3";let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let bu="12.7.0";const ba=new y_("@firebase/firestore");function Fl(){return ba.logLevel}function le(n,...e){if(ba.logLevel<=Ge.DEBUG){const t=e.map(w_);ba.debug(`Firestore (${bu}): ${n}`,...t)}}function qt(n,...e){if(ba.logLevel<=Ge.ERROR){const t=e.map(w_);ba.error(`Firestore (${bu}): ${n}`,...t)}}function co(n,...e){if(ba.logLevel<=Ge.WARN){const t=e.map(w_);ba.warn(`Firestore (${bu}): ${n}`,...t)}}function w_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jC(n,r,t)}function jC(n,e,t){let r=`FIRESTORE (${bu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qt(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||jC(e,i,r)}function be(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class BC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(mn.UNAUTHENTICATED)))}shutdown(){}}class LM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class FM{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jr,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},u=d=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jr)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new BC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class UM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new UM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class WT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new WT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new WT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $M(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class E_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=$M(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function ov(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return py(i)===py(s)?Be(i,s):py(i)?1:-1}return Be(n.length,e.length)}const zM=55296,WM=57343;function py(n){const e=n.charCodeAt(0);return e>=zM&&e<=WM}function nu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function $C(n){return n+"\0"}const HT="__name__";class ci{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ci.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Be(e.length,t.length)}static compareSegments(e,t){const r=ci.isNumericId(e),i=ci.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ci.extractNumericId(e).compare(ci.extractNumericId(t)):ov(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class lt extends ci{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const HM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ci{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return HM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HT}static keyField(){return new Nt([HT])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(lt.fromString(e))}static fromName(e){return new ge(lt.fromString(e).popFirst(5))}static empty(){return new ge(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new lt(e.slice()))}}function zC(n,e,t){if(!t)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qM(n,e,t,r){if(e===!0&&r===!0)throw new me(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qT(n){if(!ge.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GT(n){if(ge.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function T_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=T_(n);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rn(n,e){const t={typeString:n};return e&&(t.value=e),t}function kd(n,e){if(!WC(n))throw new me(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new me(ie.INVALID_ARGUMENT,t);return!0}const KT=-62135596800,QT=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QT);return new ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KT)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QT}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kd(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:rn("string",ht._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;class ep{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function av(n){return n.fields.find((e=>e.kind===2))}function la(n){return n.fields.filter((e=>e.kind!==2))}ep.UNKNOWN_ID=-1;class kf{constructor(e,t){this.fieldPath=e,this.kind=t}}class cd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cd(0,dr.min())}}function HC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new dr(i,ge.empty(),e)}function qC(n){return new dr(n.readTime,n.key,ru)}class dr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dr(Ne.min(),ge.empty(),ru)}static max(){return new dr(Ne.max(),ge.empty(),ru)}}function I_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}const GC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function To(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==GC)throw n;le("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,r)=>{t(e)}))}static reject(e){return new q(((t,r)=>{r(e)}))}static waitFor(e){return new q(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(d=>r(d)))})),a=!0,s===i&&t()}))}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next((i=>i?q.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new q(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next((m=>{a[h]=m,++u,u===s&&r(a)}),(m=>i(m)))}}))}static doWhile(e,t){return new q(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const ar="SimpleDb";class Qp{static open(e,t,r,i){try{return new Qp(t,e.transaction(i,r))}catch(s){throw new Gc(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new jr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=S_(r.target.error);this.S.reject(new Gc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(ar,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KM(t)}}class so{static delete(e){return le(ar,"Removing database:",e),pa(wC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!AC())return!1;if(so.F())return!0;const e=ln(),t=so.M(e),r=0<t&&t<10,i=QC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,so.M(ln())===12.2&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(ar,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new me(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new me(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Gc(e,a))},i.onupgradeneeded=s=>{le(ar,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{le(ar,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const u=Qp.open(this.db,e,s?"readonly":"readwrite",r),d=i(u).next((h=>(u.C(),h))).catch((h=>(u.abort(h),q.reject(h)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,h=d.name!=="FirebaseError"&&a<3;if(le(ar,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function QC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class GM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return pa(this.U.delete())}}class Gc extends me{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Io(n){return n.name==="IndexedDbTransactionError"}class KM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(ar,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(ar,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pa(r)}add(e){return le(ar,"ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(ar,"GET",this.store.name,e,t),t)))}delete(e){return le(ar,"DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return le(ar,"COUNT",this.store.name),pa(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new q(((a,u)=>{s.onerror=d=>{u(d.target.error)},s.onsuccess=d=>{a(d.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((u,d)=>{a.push(d)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){le(ar,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new q(((r,i)=>{t.onerror=s=>{const a=S_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((u=>{u?a.continue():r()})):r()}}))}H(e,t){const r=[];return new q(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const d=new GM(u),h=t(u.primaryKey,u.value,d);if(h instanceof q){const m=h.catch((g=>(d.done(),q.reject(g))));r.push(m)}d.isDone?i():d.G===null?u.continue():u.continue(d.G)}})).next((()=>q.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pa(n){return new q(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=S_(r.target.error);t(i)}}))}let YT=!1;function S_(n){const e=so.M(ln());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YT||(YT=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Kc="IndexBackfiller";class QM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(Kc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(Kc,`Documents written: ${t}`)}catch(t){Io(t)?le(Kc,"Ignoring IndexedDB error during index backfill: ",t):await To(t)}await this.re(6e4)}))}}class YM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return q.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return le(Kc,`Processing collection: ${a}`),this.oe(e,a,i).next((u=>{i-=u,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((u=>(le(Kc,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=qC(s);I_(a,r)>0&&(r=a)})),new dr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Gn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gn.ce=-1;const Ea=-1;function Yp(n){return n==null}function dd(n){return n===0&&1/n==-1/0}function YC(n){return typeof n=="number"&&Number.isInteger(n)&&!dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const tp="";function kn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XT(e)),e=XM(n.get(t),e);return XT(e)}function XM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case tp:t+="";break;default:t+=s}}return t}function XT(n){return n+tp+""}function pi(n){const e=n.length;if(ke(e>=2,64408,{path:n}),e===2)return ke(n.charAt(0)===tp&&n.charAt(1)==="",56145,{path:n}),lt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(tp,s);switch((a<0||a>t)&&Ie(50515,{path:n}),n.charAt(a+1)){case"":const u=n.substring(s,a);let d;i.length===0?d=u:(i+=u,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Ie(61167,{path:n})}s=a+2}return new lt(r)}const ua="remoteDocuments",Dd="owner",Rl="owner",hd="mutationQueues",JM="userId",Fr="mutations",JT="batchId",va="userMutationsIndex",ZT=["userId","batchId"];function Df(n,e){return[n,kn(e)]}function XC(n,e,t){return[n,kn(e),t]}const ZM={},iu="documentMutations",np="remoteDocumentsV14",eO=["prefixPath","collectionGroup","readTime","documentId"],Nf="documentKeyIndex",tO=["prefixPath","collectionGroup","documentId"],JC="collectionGroupIndex",nO=["collectionGroup","readTime","prefixPath","documentId"],fd="remoteDocumentGlobal",lv="remoteDocumentGlobalKey",su="targets",ZC="queryTargetsIndex",rO=["canonicalId","targetId"],ou="targetDocuments",iO=["targetId","path"],P_="documentTargetsIndex",sO=["path","targetId"],rp="targetGlobalKey",Ta="targetGlobal",pd="collectionParents",oO=["collectionId","parent"],au="clientMetadata",aO="clientId",Xp="bundles",lO="bundleId",Jp="namedQueries",uO="name",C_="indexConfiguration",cO="indexId",uv="collectionGroupIndex",dO="collectionGroup",Qc="indexState",hO=["indexId","uid"],eb="sequenceNumberIndex",fO=["uid","sequenceNumber"],Yc="indexEntries",pO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tb="documentKeyIndex",mO=["indexId","uid","orderedDocumentKey"],Zp="documentOverlays",gO=["userId","collectionPath","documentId"],cv="collectionPathOverlayIndex",yO=["userId","collectionPath","largestBatchId"],nb="collectionGroupOverlayIndex",vO=["userId","collectionGroup","largestBatchId"],b_="globals",_O="name",rb=[hd,Fr,iu,ua,su,Dd,Ta,ou,au,fd,pd,Xp,Jp],wO=[...rb,Zp],ib=[hd,Fr,iu,np,su,Dd,Ta,ou,au,fd,pd,Xp,Jp,Zp],sb=ib,A_=[...sb,C_,Qc,Yc],EO=A_,ob=[...A_,b_],TO=ob;class dv extends KC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function un(n,e){const t=be(n);return so.O(t.le,e)}function eI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ab(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wt{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??wn.RED,this.left=i??wn.EMPTY,this.right=s??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new wn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tI(this.data.getIterator())}getIteratorFrom(e){return new tI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class tI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kl(n){return n.hasNext()?n.getNext():void 0}class Kn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new ft(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class lb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lb("Invalid base64 string: "+s):s}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const IO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(n){if(ke(!!n,39018),typeof n=="string"){let e=0;const t=IO.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ts(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}const ub="server_timestamp",cb="__type__",db="__previous_value__",hb="__local_write_time__";function x_(n){return(n?.mapValue?.fields||{})[cb]?.stringValue===ub}function em(n){const e=n.mapValue.fields[db];return x_(e)?em(e):e}function md(n){const e=es(n.mapValue.fields[hb].timestampValue);return new ht(e.seconds,e.nanos)}class SO{constructor(e,t,r,i,s,a,u,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=m}}const ip="(default)";class Aa{constructor(e,t){this.projectId=e,this.database=t||ip}static empty(){return new Aa("","")}get isDefaultDatabase(){return this.database===ip}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const R_="__type__",fb="__max__",eo={mapValue:{fields:{__type__:{stringValue:fb}}}},k_="__vector__",lu="value",Vf={nullValue:"NULL_VALUE"};function ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?x_(n)?4:pb(n)?9007199254740991:tm(n)?10:11:Ie(28295,{value:n})}function Ii(n,e){if(n===e)return!0;const t=ho(n);if(t!==ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return md(n).isEqual(md(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=es(i.timestampValue),u=es(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=At(i.doubleValue),u=At(s.doubleValue);return a===u?dd(a)===dd(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return nu(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(eI(a)!==eI(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Ii(a[d],u[d])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function gd(n,e){return(n.values||[]).find((t=>Ii(t,e)))!==void 0}function fo(n,e){if(n===e)return 0;const t=ho(n),r=ho(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=At(s.integerValue||s.doubleValue),d=At(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return nI(n.timestampValue,e.timestampValue);case 4:return nI(md(n),md(e));case 5:return ov(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=ts(s),d=ts(a);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=Be(u[h],d[h]);if(m!==0)return m}return Be(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Be(At(s.latitude),At(a.latitude));return u!==0?u:Be(At(s.longitude),At(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rI(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},d=a.fields||{},h=u[lu]?.arrayValue,m=d[lu]?.arrayValue,g=Be(h?.values?.length||0,m?.values?.length||0);return g!==0?g:rI(h,m)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===eo.mapValue&&a===eo.mapValue)return 0;if(s===eo.mapValue)return 1;if(a===eo.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),h=a.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const v=ov(d[g],m[g]);if(v!==0)return v;const T=fo(u[d[g]],h[m[g]]);if(T!==0)return T}return Be(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function nI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=es(n),r=es(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function rI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=fo(t[i],r[i]);if(s)return s}return Be(t.length,r.length)}function uu(n){return hv(n)}function hv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=es(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ts(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=hv(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${hv(t.fields[a])}`;return i+"}"})(n.mapValue):Ie(61005,{value:n})}function Mf(n){switch(ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=em(n);return e?16+Mf(e):16;case 5:return 2*n.stringValue.length;case 6:return ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Mf(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return So(r.fields,((s,a)=>{i+=s.length+Mf(a)})),i})(n.mapValue);default:throw Ie(13486,{value:n})}}function D_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fv(n){return!!n&&"integerValue"in n}function yd(n){return!!n&&"arrayValue"in n}function iI(n){return!!n&&"nullValue"in n}function sI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function tm(n){return(n?.mapValue?.fields||{})[R_]?.stringValue===k_}function Xc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Xc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xc(n.arrayValue.values[t]);return e}return{...n}}function pb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fb}const mb={mapValue:{fields:{[R_]:{stringValue:k_},[lu]:{arrayValue:{}}}}};function PO(n){return"nullValue"in n?Vf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?D_(Aa.empty(),ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?tm(n)?mb:{mapValue:{}}:Ie(35942,{value:n})}function CO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?D_(Aa.empty(),ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?mb:"mapValue"in n?tm(n)?{mapValue:{}}:eo:Ie(61959,{value:n})}function oI(n,e){const t=fo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function aI(n,e){const t=fo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xc(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Xc(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Rn(Xc(this.value))}}function gb(n){const e=[];return So(n.fields,((t,r)=>{const i=new Nt([t]);if(Of(r)){const s=gb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Kn(e)}class Bt{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Bt(e,0,Ne.min(),Ne.min(),Ne.min(),Rn.empty(),0)}static newFoundDocument(e,t,r,i){return new Bt(e,1,t,Ne.min(),r,i,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ne.min(),Ne.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ne.min(),Ne.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cu{constructor(e,t){this.position=e,this.inclusive=t}}function lI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ge.comparator(ge.fromName(a.referenceValue),t.key):r=fo(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}class sp{constructor(e,t="asc"){this.field=e,this.dir=t}}function bO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yb{}class Qe extends yb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AO(e,t,r):t==="array-contains"?new kO(e,r):t==="in"?new Ib(e,r):t==="not-in"?new DO(e,r):t==="array-contains-any"?new NO(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xO(e,r):new RO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fo(t,this.value)):t!==null&&ho(this.value)===ho(t)&&this.matchesComparison(fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends yb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mt(e,t)}matches(e){return du(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function du(n){return n.op==="and"}function pv(n){return n.op==="or"}function N_(n){return vb(n)&&du(n)}function vb(n){for(const e of n.filters)if(e instanceof mt)return!1;return!0}function mv(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+uu(n.value);if(N_(n))return n.filters.map((e=>mv(e))).join(",");{const e=n.filters.map((t=>mv(t))).join(",");return`${n.op}(${e})`}}function _b(n,e){return n instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)})(n,e):n instanceof mt?(function(r,i){return i instanceof mt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&_b(a,i.filters[u])),!0):!1})(n,e):void Ie(19439)}function wb(n,e){const t=n.filters.concat(e);return mt.create(t,n.op)}function Eb(n){return n instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${uu(t.value)}`})(n):n instanceof mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Eb).join(" ,")+"}"})(n):"Filter"}class AO extends Qe{constructor(e,t,r){super(e,t,r),this.key=ge.fromName(r.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class xO extends Qe{constructor(e,t){super(e,"in",t),this.keys=Tb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class RO extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=Tb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Tb(n,e){return(e.arrayValue?.values||[]).map((t=>ge.fromName(t.referenceValue)))}class kO extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yd(t)&&gd(t.arrayValue,this.value)}}class Ib extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gd(this.value.arrayValue,t)}}class DO extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gd(this.value.arrayValue,t)}}class NO extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>gd(this.value.arrayValue,r)))}}class VO{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function gv(n,e=null,t=[],r=[],i=null,s=null,a=null){return new VO(n,e,t,r,i,s,a)}function xa(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>mv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Yp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>uu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>uu(r))).join(",")),e.Te=t}return e.Te}function Nd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_b(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uI(n.startAt,e.startAt)&&uI(n.endAt,e.endAt)}function op(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ap(n,e){return n.filters.filter((t=>t instanceof Qe&&t.field.isEqual(e)))}function cI(n,e,t){let r=Vf,i=!0;for(const s of ap(n,e)){let a=Vf,u=!0;switch(s.op){case"<":case"<=":a=PO(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=Vf}oI({value:r,inclusive:i},{value:a,inclusive:u})<0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];oI({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function dI(n,e,t){let r=eo,i=!0;for(const s of ap(n,e)){let a=eo,u=!0;switch(s.op){case">=":case">":a=CO(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=eo}aI({value:r,inclusive:i},{value:a,inclusive:u})>0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];aI({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class nm{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sb(n,e,t,r,i,s,a,u){return new nm(n,e,t,r,i,s,a,u)}function rm(n){return new nm(n)}function hI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MO(n){return n.collectionGroup!==null}function Jc(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ft(Nt.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new sp(s,r))})),t.has(Nt.keyField().canonicalString())||e.Ie.push(new sp(Nt.keyField(),r))}return e.Ie}function cr(n){const e=be(n);return e.Ee||(e.Ee=OO(e,Jc(n))),e.Ee}function OO(n,e){if(n.limitType==="F")return gv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new sp(i.field,s)}));const t=n.endAt?new cu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cu(n.startAt.position,n.startAt.inclusive):null;return gv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yv(n,e,t){return new nm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function im(n,e){return Nd(cr(n),cr(e))&&n.limitType===e.limitType}function Pb(n){return`${xa(cr(n))}|lt:${n.limitType}`}function Ul(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Eb(i))).join(", ")}]`),Yp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>uu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>uu(i))).join(",")),`Target(${r})`})(cr(n))}; limitType=${n.limitType})`}function Vd(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Jc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){const h=lI(a,u,d);return a.inclusive?h<=0:h<0})(r.startAt,Jc(r),i)||r.endAt&&!(function(a,u,d){const h=lI(a,u,d);return a.inclusive?h>=0:h>0})(r.endAt,Jc(r),i))})(n,e)}function Cb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bb(n){return(e,t)=>{let r=!1;for(const i of Jc(n)){const s=LO(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function LO(n,e,t){const r=n.field.isKeyField()?ge.comparator(e.key,t.key):(function(s,a,u){const d=a.data.field(s),h=u.data.field(s);return d!==null&&h!==null?fo(d,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}class as{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return ab(this.inner)}size(){return this.innerSize}}const FO=new wt(ge.comparator);function ur(){return FO}const Ab=new wt(ge.comparator);function Bc(...n){let e=Ab;for(const t of n)e=e.insert(t.key,t);return e}function xb(n){let e=Ab;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function mi(){return Zc()}function Rb(){return Zc()}function Zc(){return new as((n=>n.toString()),((n,e)=>n.isEqual(e)))}const UO=new wt(ge.comparator),jO=new ft(ge.comparator);function ze(...n){let e=jO;for(const t of n)e=e.add(t);return e}const BO=new ft(Be);function V_(){return BO}function M_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function kb(n){return{integerValue:""+n}}function $O(n,e){return YC(e)?kb(e):M_(n,e)}class sm{constructor(){this._=void 0}}function zO(n,e,t){return n instanceof vd?(function(i,s){const a={fields:{[cb]:{stringValue:ub},[hb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&x_(s)&&(s=em(s)),s&&(a.fields[db]=s),{mapValue:a}})(t,e):n instanceof hu?Nb(n,e):n instanceof fu?Vb(n,e):(function(i,s){const a=Db(i,s),u=fI(a)+fI(i.Ae);return fv(a)&&fv(i.Ae)?kb(u):M_(i.serializer,u)})(n,e)}function WO(n,e,t){return n instanceof hu?Nb(n,e):n instanceof fu?Vb(n,e):t}function Db(n,e){return n instanceof _d?(function(r){return fv(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class vd extends sm{}class hu extends sm{constructor(e){super(),this.elements=e}}function Nb(n,e){const t=Mb(e);for(const r of n.elements)t.some((i=>Ii(i,r)))||t.push(r);return{arrayValue:{values:t}}}class fu extends sm{constructor(e){super(),this.elements=e}}function Vb(n,e){let t=Mb(e);for(const r of n.elements)t=t.filter((i=>!Ii(i,r)));return{arrayValue:{values:t}}}class _d extends sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function fI(n){return At(n.integerValue||n.doubleValue)}function Mb(n){return yd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class HO{constructor(e,t){this.field=e,this.transform=t}}function qO(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof hu&&i instanceof hu||r instanceof fu&&i instanceof fu?nu(r.elements,i.elements,Ii):r instanceof _d&&i instanceof _d?Ii(r.Ae,i.Ae):r instanceof vd&&i instanceof vd})(n.transform,e.transform)}class GO{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class om{}function Ob(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Md(n.key,an.none()):new Au(n.key,n.data,an.none());{const t=n.data,r=Rn.empty();let i=new ft(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ls(n.key,r,new Kn(i.toArray()),an.none())}}function KO(n,e,t){n instanceof Au?(function(i,s,a){const u=i.value.clone(),d=mI(i.fieldTransforms,s,a.transformResults);u.setAll(d),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ls?(function(i,s,a){if(!Lf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=mI(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(Lb(i)),d.setAll(u),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function ed(n,e,t,r){return n instanceof Au?(function(s,a,u,d){if(!Lf(s.precondition,a))return u;const h=s.value.clone(),m=gI(s.fieldTransforms,d,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof ls?(function(s,a,u,d){if(!Lf(s.precondition,a))return u;const h=gI(s.fieldTransforms,d,a),m=a.data;return m.setAll(Lb(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,u){return Lf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function QO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Db(r.transform,i||null);s!=null&&(t===null&&(t=Rn.empty()),t.set(r.field,s))}return t||null}function pI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nu(r,i,((s,a)=>qO(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Au extends om{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ls extends om{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Lb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function mI(n,e,t){const r=new Map;ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,WO(a,u,t[i]))}return r}function gI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,zO(s,a,e))}return r}class Md extends om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fb extends om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class O_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KO(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Rb();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const d=Ob(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,((t,r)=>pI(t,r)))&&nu(this.baseMutations,e.baseMutations,((t,r)=>pI(t,r)))}}class L_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return UO})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new L_(e,t,r,i)}}class F_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class YO{constructor(e,t){this.count=e,this.unchangedNames=t}}var en,Je;function XO(n){switch(n){case ie.OK:return Ie(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function Ub(n){if(n===void 0)return qt("GRPC error has no .code"),ie.UNKNOWN;switch(n){case en.OK:return ie.OK;case en.CANCELLED:return ie.CANCELLED;case en.UNKNOWN:return ie.UNKNOWN;case en.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case en.INTERNAL:return ie.INTERNAL;case en.UNAVAILABLE:return ie.UNAVAILABLE;case en.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case en.NOT_FOUND:return ie.NOT_FOUND;case en.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case en.ABORTED:return ie.ABORTED;case en.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case en.DATA_LOSS:return ie.DATA_LOSS;default:return Ie(39323,{code:n})}}(Je=en||(en={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";function JO(){return new TextEncoder}const ZO=new io([4294967295,4294967295],0);function yI(n){const e=JO().encode(n),t=new VC;return t.update(e),new Uint8Array(t.digest())}function vI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new io([t,r],0),new io([i,s],0)]}class U_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(r<0)throw new $c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=io.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(io.fromNumber(r)));return i.compare(ZO)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yI(e),[r,i]=vI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new U_(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=yI(e),[r,i]=vI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Od{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ld.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Od(Ne.min(),i,new wt(Be),ur(),ze())}}class Ld{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ld(r,t,ze(),ze(),ze())}}class Ff{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class jb{constructor(e,t){this.targetId=e,this.Ce=t}}class Bb{constructor(e,t,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class _I{constructor(){this.ve=0,this.Fe=wI(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:s})}})),new Ld(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=wI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eL{constructor(e){this.Ge=e,this.ze=new Map,this.je=ur(),this.Je=pf(),this.He=pf(),this.Ye=new wt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(op(s))if(r===0){const a=new ge(s.path);this.et(t,a,Bt.newNoDocument(a,Ne.min()))}else ke(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=ts(r).toUint8Array()}catch(d){if(d instanceof lb)return co("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new U_(a,i,s)}catch(d){return co(d instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&op(u.target)){const d=new ge(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Bt.newNoDocument(d,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=ze();this.He.forEach(((s,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Od(e,t,this.Ye,this.je,r);return this.je=ur(),this.Je=pf(),this.He=pf(),this.Ye=new wt(Be),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _I,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ft(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ft(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _I),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pf(){return new wt(ge.comparator)}function wI(){return new wt(ge.comparator)}const tL={asc:"ASCENDING",desc:"DESCENDING"},nL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rL={and:"AND",or:"OR"};class iL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vv(n,e){return n.useProto3Json||Yp(e)?e:{value:e}}function pu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $b(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sL(n,e){return pu(n,e.toTimestamp())}function Fn(n){return ke(!!n,49232),Ne.fromTimestamp((function(t){const r=es(t);return new ht(r.seconds,r.nanos)})(n))}function j_(n,e){return _v(n,e).canonicalString()}function _v(n,e){const t=(function(i){return new lt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function zb(n){const e=lt.fromString(n);return ke(Jb(e),10190,{key:e.toString()}),e}function lp(n,e){return j_(n.databaseId,e.path)}function Ia(n,e){const t=zb(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(qb(t))}function Wb(n,e){return j_(n.databaseId,e)}function Hb(n){const e=zb(n);return e.length===4?lt.emptyPath():qb(e)}function wv(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qb(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function EI(n,e,t){return{name:lp(n,e),fields:t.value.mapValue.fields}}function oL(n,e,t){const r=Ia(n,e.name),i=Fn(e.updateTime),s=e.createTime?Fn(e.createTime):Ne.min(),a=new Rn({mapValue:{fields:e.fields}}),u=Bt.newFoundDocument(r,i,s,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function aL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(ke(m===void 0||typeof m=="string",58123),Xt.fromBase64String(m||"")):(ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Xt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const m=h.code===void 0?ie.UNKNOWN:Ub(h.code);return new me(m,h.message||"")})(a);t=new Bb(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ia(n,r.document.name),s=Fn(r.document.updateTime),a=r.document.createTime?Fn(r.document.createTime):Ne.min(),u=new Rn({mapValue:{fields:r.document.fields}}),d=Bt.newFoundDocument(i,s,a,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Ff(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ia(n,r.document),s=r.readTime?Fn(r.readTime):Ne.min(),a=Bt.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Ff([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ia(n,r.document),s=r.removedTargetIds||[];t=new Ff([],s,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new YO(i,s),u=r.targetId;t=new jb(u,a)}}return t}function up(n,e){let t;if(e instanceof Au)t={update:EI(n,e.key,e.value)};else if(e instanceof Md)t={delete:lp(n,e.key)};else if(e instanceof ls)t={update:EI(n,e.key,e.data),updateMask:fL(e.fieldMask)};else{if(!(e instanceof Fb))return Ie(16599,{Vt:e.type});t={verify:lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof vd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof _d)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:sL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie(27497)})(n,e.precondition)),t}function Ev(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?an.updateTime(Fn(s.updateTime)):s.exists!==void 0?an.exists(s.exists):an.none()})(e.currentDocument):an.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,u){let d=null;if("setToServerValue"in u)ke(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new vd;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];d=new hu(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];d=new fu(m)}else"increment"in u?d=new _d(a,u.increment):Ie(16584,{proto:u});const h=Nt.fromServerFormat(u.fieldPath);return new HO(h,d)})(n,i))):[];if(e.update){e.update.name;const i=Ia(n,e.update.name),s=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new Kn(h.map((m=>Nt.fromServerFormat(m))))})(e.updateMask);return new ls(i,s,a,t,r)}return new Au(i,s,t,r)}if(e.delete){const i=Ia(n,e.delete);return new Md(i,t)}if(e.verify){const i=Ia(n,e.verify);return new Fb(i,t)}return Ie(1463,{proto:e})}function lL(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Fn(i.updateTime):Fn(s);return a.isEqual(Ne.min())&&(a=Fn(s)),new GO(a,i.transformResults||[])})(t,e)))):[]}function Gb(n,e){return{documents:[Wb(n,e.path)]}}function Kb(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Wb(n,i);const s=(function(h){if(h.length!==0)return Xb(mt.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:jl(v.field),direction:cL(v.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=vv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function Qb(n){let e=Hb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ke(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const v=Yb(g);return v instanceof mt&&N_(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((v=>(function(A){return new sp(Bl(A.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,Yp(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(g){const v=!!g.before,T=g.values||[];return new cu(T,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const v=!g.before,T=g.values||[];return new cu(T,v)})(t.endAt)),Sb(e,i,a,s,u,"F",d,h)}function uL(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Yb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bl(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bl(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bl(t.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bl(t.unaryFilter.field);return Qe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qe.create(Bl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mt.create(t.compositeFilter.filters.map((r=>Yb(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function cL(n){return tL[n]}function dL(n){return nL[n]}function hL(n){return rL[n]}function jl(n){return{fieldPath:n.canonicalString()}}function Bl(n){return Nt.fromServerFormat(n.fieldPath)}function Xb(n){return n instanceof Qe?(function(t){if(t.op==="=="){if(sI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NAN"}};if(iI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NAN"}};if(iI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(t.field),op:dL(t.op),value:t.value}}})(n):n instanceof mt?(function(t){const r=t.getFilters().map((i=>Xb(i)));return r.length===1?r[0]:{compositeFilter:{op:hL(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function fL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Gi{constructor(e,t,r,i,s=Ne.min(),a=Ne.min(),u=Xt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zb{constructor(e){this.yt=e}}function pL(n,e){let t;if(e.document)t=oL(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ge.fromSegments(e.noDocument.path),i=ka(e.noDocument.readTime);t=Bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=ge.fromSegments(e.unknownDocument.path),i=ka(e.unknownDocument.version);t=Bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new ht(i[0],i[1]);return Ne.fromTimestamp(s)})(e.readTime)),t}function TI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:lp(s,a.key),fields:a.data.value.mapValue.fields,updateTime:pu(s,a.version.toTimestamp()),createTime:pu(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ra(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ra(e.version)}}return r}function cp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ra(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(n){const e=new ht(n.seconds,n.nanoseconds);return Ne.fromTimestamp(e)}function ma(n,e){const t=(e.baseMutations||[]).map((s=>Ev(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Ev(n.yt,s))),i=ht.fromMillis(e.localWriteTimeMs);return new O_(e.batchId,i,t,r)}function zc(n){const e=ka(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ka(n.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return ke(a===1,1966,{count:a}),cr(rm(Hb(s.documents[0])))})(n.query):(function(s){return cr(Qb(s))})(n.query),new Gi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Xt.fromBase64String(n.resumeToken))}function eA(n,e){const t=Ra(e.snapshotVersion),r=Ra(e.lastLimboFreeSnapshotVersion);let i;i=op(e.target)?Gb(n.yt,e.target):Kb(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xa(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tA(n){const e=Qb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yv(e,e.limit,"L"):e}function my(n,e){return new F_(e.largestBatchId,Ev(n.yt,e.overlayMutation))}function II(n,e){const t=e.path.lastSegment();return[n,kn(e.path.popLast()),t]}function SI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ra(r.readTime),documentKey:kn(r.documentKey.path),largestBatchId:r.largestBatchId}}class mL{getBundleMetadata(e,t){return PI(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:ka(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return PI(e).put((function(i){return{bundleId:i.id,createTime:Ra(Fn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return CI(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:tA(s.bundledQuery),readTime:ka(s.readTime)}})(r)}))}saveNamedQuery(e,t){return CI(e).put((function(i){return{name:i.name,readTime:Ra(Fn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function PI(n){return un(n,Xp)}function CI(n){return un(n,Jp)}class am{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new am(e,r)}getOverlay(e,t){return Pc(e).get(II(this.userId,t)).next((r=>r?my(this.serializer,r):null))}getOverlays(e,t){const r=mi();return q.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const u=new F_(t,a);i.push(this.St(e,u))})),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(kn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Pc(e).Z(cv,u))})),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=mi(),s=kn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pc(e).J(cv,a).next((u=>{for(const d of u){const h=my(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=mi();let a;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pc(e).ee({index:nb,range:u},((d,h,m)=>{const g=my(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):m.done()})).next((()=>s))}St(e,t){return Pc(e).put((function(i,s,a){const[u,d,h]=II(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:up(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Pc(n){return un(n,Zp)}class gL{bt(e){return un(e,b_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Xt.fromUint8Array(r):Xt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ga{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),dd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=es(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ts(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?pb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):tm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=lu,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(At(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ge.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ga.Kt=new ga;const Dl=255;function yL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function bI(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=yL(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class vL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=bI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=bI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Dl),this.sn(255)}_n(){this.an(Dl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Dl?(this.sn(Dl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Dl?(this.an(Dl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class _L{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class wL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cc{constructor(){this.cn=new vL,this.ln=new _L(this.cn),this.hn=new wL(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ya{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ya(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Uf(this.En),directionalValue:Uf(this.dn),orderedDocumentKey:Uf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function js(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=AI(n.En,e.En),t!==0?t:(t=AI(n.dn,e.dn),t!==0?t:ge.comparator(n.In,e.In)))}function AI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Uf(n){return bC()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function xI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class RI{constructor(e){this.mn=new ft(((t,r)=>Nt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=av(e);if(t!==void 0&&!this.wn(t))return!1;const r=la(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const d=r[s];if(!this.Sn(u,d)||!this.bn(this.fn[a++],d))return!1}++s}for(;s<r.length;++s){const u=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new ft(Nt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new kf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new kf(r.field,r.dir==="asc"?0:1)));return new ep(ep.UNKNOWN_ID,this.collectionId,t,cd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function nA(n){if(ke(n instanceof Qe||n instanceof mt,20012),n instanceof Qe){if(n instanceof Ib){const t=n.value.arrayValue?.values?.map((r=>Qe.create(n.field,"==",r)))||[];return mt.create(t,"or")}return n}const e=n.filters.map((t=>nA(t)));return mt.create(e,n.op)}function EL(n){if(n.getFilters().length===0)return[];const e=Sv(nA(n));return ke(rA(e),7391),Tv(e)||Iv(e)?[e]:e.getFilters()}function Tv(n){return n instanceof Qe}function Iv(n){return n instanceof mt&&N_(n)}function rA(n){return Tv(n)||Iv(n)||(function(t){if(t instanceof mt&&pv(t)){for(const r of t.getFilters())if(!Tv(r)&&!Iv(r))return!1;return!0}return!1})(n)}function Sv(n){if(ke(n instanceof Qe||n instanceof mt,34018),n instanceof Qe)return n;if(n.filters.length===1)return Sv(n.filters[0]);const e=n.filters.map((r=>Sv(r)));let t=mt.create(e,n.op);return t=dp(t),rA(t)?t:(ke(t instanceof mt,64498),ke(du(t),40251),ke(t.filters.length>1,57927),t.filters.reduce(((r,i)=>B_(r,i))))}function B_(n,e){let t;return ke(n instanceof Qe||n instanceof mt,38388),ke(e instanceof Qe||e instanceof mt,25473),t=n instanceof Qe?e instanceof Qe?(function(i,s){return mt.create([i,s],"and")})(n,e):kI(n,e):e instanceof Qe?kI(e,n):(function(i,s){if(ke(i.filters.length>0&&s.filters.length>0,48005),du(i)&&du(s))return wb(i,s.getFilters());const a=pv(i)?i:s,u=pv(i)?s:i,d=a.filters.map((h=>B_(h,u)));return mt.create(d,"or")})(n,e),dp(t)}function kI(n,e){if(du(e))return wb(e,n.getFilters());{const t=e.filters.map((r=>B_(n,r)));return mt.create(t,"or")}}function dp(n){if(ke(n instanceof Qe||n instanceof mt,11850),n instanceof Qe)return n;const e=n.getFilters();if(e.length===1)return dp(e[0]);if(vb(n))return n;const t=e.map((i=>dp(i))),r=[];return t.forEach((i=>{i instanceof Qe?r.push(i):i instanceof mt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:mt.create(r,n.op)}class TL{constructor(){this.Cn=new $_}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(dr.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class $_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ft(lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(lt.comparator)).toArray()}}const DI="IndexedDbIndexManager",mf=new Uint8Array(0);class IL{constructor(e,t){this.databaseId=t,this.vn=new $_,this.Fn=new as((r=>xa(r)),((r,i)=>Nd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:kn(i)};return NI(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$C(t),""],!1,!0);return NI(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(pi(a.parent))}return r}))}addFieldIndex(e,t){const r=bc(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Vl(e);return s.next((u=>{a.put(SI(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=bc(e),i=Vl(e),s=Nl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=bc(e),r=Nl(e),i=Vl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return q.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new RI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Nl(e);let i=!0;const s=new Map;return q.forEach(this.Mn(t),(a=>this.xn(e,a).next((u=>{i&&(i=!!u),s.set(a,u)})))).next((()=>{if(i){let a=ze();const u=[];return q.forEach(s,((d,h)=>{le(DI,`Using index ${(function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(d)} to execute ${xa(t)}`);const m=(function(D,B){const Z=av(B);if(Z===void 0)return null;for(const re of ap(D,Z.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null})(h,d),g=(function(D,B){const Z=new Map;for(const re of la(B))for(const C of ap(D,re.fieldPath))switch(C.op){case"==":case"in":Z.set(re.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return Z.set(re.fieldPath.canonicalString(),C.value),Array.from(Z.values())}return null})(h,d),v=(function(D,B){const Z=[];let re=!0;for(const C of la(B)){const I=C.kind===0?cI(D,C.fieldPath,D.startAt):dI(D,C.fieldPath,D.startAt);Z.push(I.value),re&&(re=I.inclusive)}return new cu(Z,re)})(h,d),T=(function(D,B){const Z=[];let re=!0;for(const C of la(B)){const I=C.kind===0?dI(D,C.fieldPath,D.endAt):cI(D,C.fieldPath,D.endAt);Z.push(I.value),re&&(re=I.inclusive)}return new cu(Z,re)})(h,d),A=this.On(d,h,v),x=this.On(d,h,T),P=this.Nn(d,h,g),j=this.Bn(d.indexId,m,A,v.inclusive,x,T.inclusive,P);return q.forEach(j,(M=>r.Y(M,t.limit).next((D=>{D.forEach((B=>{const Z=ge.fromSegments(B.documentKey);a.has(Z)||(a=a.add(Z),u.push(Z))}))}))))})).next((()=>u))}return q.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=EL(mt.create(e.filters,"and")).map((r=>gv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,u){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),h=d/(t!=null?t.length:1),m=[];for(let g=0;g<d;++g){const v=t?this.Ln(t[g/h]):mf,T=this.kn(e,v,r[g%h],i),A=this.qn(e,v,s[g%h],a),x=u.map((P=>this.kn(e,v,P,!0)));m.push(...this.createRange(T,A,x))}return m}kn(e,t,r,i){const s=new ya(e,ge.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new ya(e,ge.empty(),t,r);return i?s.An():s}xn(e,t){const r=new RI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const u of s)r.yn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return q.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(d){let h=new ft(Nt.comparator),m=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:h=h.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Cc;for(const i of la(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);ga.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Cc;return ga.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Cc;return ga.Kt.Dt(D_(this.databaseId,t),r.Pn((function(s){const a=la(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Cc);let s=0;for(const a of la(e)){const u=r[s++];for(const d of i)if(this.Un(t,a.fieldPath)&&yd(u))i=this.Kn(i,a,u);else{const h=d.Pn(a.kind);ga.Kt.Dt(u,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const u of i){const d=new Cc;d.seed(u.un()),ga.Kt.Dt(a,d.Pn(t.kind)),s.push(d)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=bc(e),i=Vl(e);return(t?r.J(uv,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return q.forEach(s,(u=>i.get([u.indexId,this.uid]).next((d=>{a.push((function(m,g){const v=g?new cd(g.sequenceNumber,new dr(ka(g.readTime),new ge(pi(g.documentKey)),g.largestBatchId)):cd.empty(),T=m.fields.map((([A,x])=>new kf(Nt.fromServerFormat(A),x)));return new ep(m.indexId,m.collectionGroup,T,v)})(u,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Be(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=bc(e),s=Vl(e);return this.Gn(e).next((a=>i.J(uv,IDBKeyRange.bound(t,t)).next((u=>q.forEach(u,(d=>s.put(SI(d.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?q.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),q.forEach(u,(d=>this.zn(e,i,d).next((h=>{const m=this.jn(s,d);return h.isEqual(m)?q.resolve():this.Jn(e,s,d,h,m)})))))))}))}Hn(e,t,r,i){return Nl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Nl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Nl(e);let s=new ft(js);return i.ee({index:tb,range:IDBKeyRange.only([r.indexId,this.uid,Uf(this.$n(r,t))])},((a,u)=>{s=s.add(new ya(r.indexId,t,xI(u.arrayValue),xI(u.directionalValue)))})).next((()=>s))}jn(e,t){let r=new ft(js);const i=this.Qn(t,e);if(i==null)return r;const s=av(t);if(s!=null){const a=e.data.field(s.fieldPath);if(yd(a))for(const u of a.arrayValue.values||[])r=r.add(new ya(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new ya(t.indexId,e.key,mf,i));return r}Jn(e,t,r,i,s){le(DI,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,m,g,v){const T=d.getIterator(),A=h.getIterator();let x=kl(T),P=kl(A);for(;x||P;){let j=!1,M=!1;if(x&&P){const D=m(x,P);D<0?M=!0:D>0&&(j=!0)}else x!=null?M=!0:j=!0;j?(g(P),P=kl(A)):M?(v(x),x=kl(T)):(x=kl(T),P=kl(A))}})(i,s,js,(u=>{a.push(this.Hn(e,t,r,u))}),(u=>{a.push(this.Yn(e,t,r,u))})),q.waitFor(a)}Gn(e){let t=1;return Vl(e).ee({index:eb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,u)=>js(a,u))).filter(((a,u,d)=>!u||js(a,d[u-1])!==0));const i=[];i.push(e);for(const a of r){const u=js(a,e),d=js(a,t);if(u===0)i[0]=e.An();else if(u>0&&d<0)i.push(a),i.push(a.An());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const u=i[a].Vn(this.uid,mf,ge.empty()),d=i[a+1].Vn(this.uid,mf,ge.empty());s.push(IDBKeyRange.bound(u,d))}return s}Zn(e,t){return js(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(VI)}getMinOffset(e,t){return q.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(VI)}}function NI(n){return un(n,pd)}function Nl(n){return un(n,Yc)}function bc(n){return un(n,C_)}function Vl(n){return un(n,Qc)}function VI(n){ke(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;I_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new dr(e.readTime,e.documentKey,t)}const MI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iA=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function sA(n,e,t){const r=n.store(Fr),i=n.store(iu),s=[],a=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:a},((m,g,v)=>(u++,v.delete())));s.push(d.next((()=>{ke(u===1,47070,{batchId:t.batchId})})));const h=[];for(const m of t.mutations){const g=XC(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return q.waitFor(s).next((()=>h))}function hp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie(14731);e=n.noDocument}return JSON.stringify(e).length}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(iA,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class lm{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){ke(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new lm(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).ee({index:va,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=$l(e),a=Bs(e);return a.add({}).next((u=>{ke(typeof u=="number",49019);const d=new O_(u,t,r,i),h=(function(T,A,x){const P=x.baseMutations.map((M=>up(T.yt,M))),j=x.mutations.map((M=>up(T.yt,M)));return{userId:A,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:P,mutations:j}})(this.serializer,this.userId,d),m=[];let g=new ft(((v,T)=>Be(v.canonicalString(),T.canonicalString())));for(const v of i){const T=XC(this.userId,v.key.path,u);g=g.add(v.key.path.popLast()),m.push(a.put(h)),m.push(s.put(T,ZM))}return g.forEach((v=>{m.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),q.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,t){return Bs(e).get(t).next((r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ma(this.serializer,r)):null))}er(e,t){return this.Xn[t]?q.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Bs(e).ee({index:va,range:i},((a,u,d)=>{u.userId===this.userId&&(ke(u.batchId>=r,47524,{tr:r}),s=ma(this.serializer,u)),d.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ea;return Bs(e).ee({index:va,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ea],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).J(va,t).next((r=>r.map((i=>ma(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Df(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return $l(e).ee({range:i},((a,u,d)=>{const[h,m,g]=a,v=pi(m);if(h===this.userId&&t.path.isEqual(v))return Bs(e).get(g).next((T=>{if(!T)throw Ie(61480,{nr:a,batchId:g});ke(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:g}),s.push(ma(this.serializer,T))}));d.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(Be);const i=[];return t.forEach((s=>{const a=Df(this.userId,s.path),u=IDBKeyRange.lowerBound(a),d=$l(e).ee({range:u},((h,m,g)=>{const[v,T,A]=h,x=pi(T);v===this.userId&&s.path.isEqual(x)?r=r.add(A):g.done()}));i.push(d)})),q.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Df(this.userId,r),a=IDBKeyRange.lowerBound(s);let u=new ft(Be);return $l(e).ee({range:a},((d,h,m)=>{const[g,v,T]=d,A=pi(v);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(u=u.add(T)):m.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(Bs(e).get(s).next((a=>{if(a===null)throw Ie(35274,{batchId:s});ke(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ma(this.serializer,a))})))})),q.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return sA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),q.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return $l(e).ee({range:r},((s,a,u)=>{if(s[0]===this.userId){const d=pi(s[1]);i.push(d)}else u.done()})).next((()=>{ke(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return oA(e,this.userId,t)}_r(e){return aA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ea,lastStreamToken:""}))}}function oA(n,e,t){const r=Df(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return $l(n).ee({range:s,X:!0},((u,d,h)=>{const[m,g,v]=u;m===e&&g===i&&(a=!0),h.done()})).next((()=>a))}function Bs(n){return un(n,Fr)}function $l(n){return un(n,iu)}function aA(n){return un(n,hd)}class Da{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Da(0)}static cr(){return new Da(-1)}}class SL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Da(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ne.fromTimestamp(new ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ml(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Ml(e).ee(((a,u)=>{const d=zc(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))})).next((()=>q.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Ml(e).ee(((r,i)=>{const s=zc(i);t(s)}))}lr(e){return OI(e).get(rp).next((t=>(ke(t!==null,2888),t)))}hr(e,t){return OI(e).put(rp,t)}Pr(e,t){return Ml(e).put(eA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=xa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ml(e).ee({range:i,index:ZC},((a,u,d)=>{const h=zc(u);Nd(t,h.target)&&(s=h,d.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Ks(e);return t.forEach((a=>{const u=kn(a.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,a))})),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ks(e);return q.forEach(t,(s=>{const a=kn(s.path);return q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Ks(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ks(e);let s=ze();return i.ee({range:r,X:!0},((a,u,d)=>{const h=pi(a[1]),m=new ge(h);s=s.add(m)})).next((()=>s))}containsKey(e,t){const r=kn(t.path),i=IDBKeyRange.bound([r],[$C(r)],!1,!0);let s=0;return Ks(e).ee({index:P_,X:!0,range:i},(([a,u],d,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}At(e,t){return Ml(e).get(t).next((r=>r?zc(r):null))}}function Ml(n){return un(n,su)}function OI(n){return un(n,Ta)}function Ks(n){return un(n,ou)}const LI="LruGarbageCollector",PL=1048576;function FI([n,e],[t,r]){const i=Be(n,t);return i===0?Be(e,r):i}class CL{constructor(e){this.Ir=e,this.buffer=new ft(FI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(LI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Io(t)?le(LI,"Ignoring IndexedDB error during garbage collection: ",t):await To(t)}await this.Vr(3e5)}))}}class bL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Gn.ce);const r=new CL(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(MI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,u,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),Fl()<=Ge.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function uA(n,e){return new bL(n,e)}class AL{constructor(e,t){this.db=e,this.garbageCollector=uA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return gf(e,r)}removeReference(e,t,r){return gf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gf(e,t)}br(e,t){return(function(i,s){let a=!1;return aA(i).te((u=>oA(i,u,s).next((d=>(d&&(a=!0),q.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,u)=>{if(u<=t){const d=this.br(e,a).next((h=>{if(!h)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Ne.min()),Ks(e).delete((function(g){return[0,kn(g.path)]})(a)))))}));i.push(d)}})).next((()=>q.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gf(e,t)}Sr(e,t){const r=Ks(e);let i,s=Gn.ce;return r.ee({index:P_},(([a,u],{path:d,sequenceNumber:h})=>{a===0?(s!==Gn.ce&&t(new ge(pi(i)),s),s=h,i=d):s=Gn.ce})).next((()=>{s!==Gn.ce&&t(new ge(pi(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gf(n,e){return Ks(n).put((function(r,i){return{targetId:0,path:kn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class cA{constructor(){this.changes=new as((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ia(e).put(r)}removeEntry(e,t,r){return ia(e).delete((function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],cp(a),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Bt.newInvalidDocument(t);return ia(e).ee({index:Nf,range:IDBKeyRange.only(Ac(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Bt.newInvalidDocument(t)};return ia(e).ee({index:Nf,range:IDBKeyRange.only(Ac(t))},((i,s)=>{r={document:this.Cr(t,s),size:hp(s)}})).next((()=>r))}getEntries(e,t){let r=ur();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=ur(),i=new wt(ge.comparator);return this.Fr(e,t,((s,a)=>{const u=this.Cr(s,a);r=r.insert(s,u),i=i.insert(s,hp(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return q.resolve();let i=new ft(BI);t.forEach((d=>i=i.add(d)));const s=IDBKeyRange.bound(Ac(i.first()),Ac(i.last())),a=i.getIterator();let u=a.getNext();return ia(e).ee({index:Nf,range:s},((d,h,m)=>{const g=ge.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&BI(u,g)<0;)r(u,null),u=a.getNext();u&&u.isEqual(g)&&(r(u,h),u=a.hasNext()?a.getNext():null),u?m.j(Ac(u)):m.done()})).next((()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),cp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ia(e).J(IDBKeyRange.bound(u,d,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let m=ur();for(const g of h){const v=this.Cr(ge.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Vd(t,v)||i.has(v.key))&&(m=m.insert(v.key,v))}return m}))}getAllFromCollectionGroup(e,t,r,i){let s=ur();const a=jI(t,r),u=jI(t,dr.max());return ia(e).ee({index:JC,range:IDBKeyRange.bound(a,u,!0)},((d,h,m)=>{const g=this.Cr(ge.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()})).next((()=>s))}newChangeBuffer(e){return new RL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return UI(e).get(lv).next((t=>(ke(!!t,20021),t)))}Dr(e,t){return UI(e).put(lv,t)}Cr(e,t){if(t){const r=pL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return Bt.newInvalidDocument(e)}}function dA(n){return new xL(n)}class RL extends cA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new as((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new ft(((s,a)=>Be(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),a.isValidDocument()){const d=TI(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=hp(d);r+=h-u.size,t.push(this.Nr.addEntry(e,s,d))}else if(r-=u.size,this.trackRemovals){const d=TI(this.Nr.serializer,a.convertToNoDocument(Ne.min()));t.push(this.Nr.addEntry(e,s,d))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function UI(n){return un(n,fd)}function ia(n){return un(n,np)}function Ac(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jI(n,e){const t=e.documentKey.path.toArray();return[n,cp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Be(t[s],r[s]),i)return i;return i=Be(t.length,r.length),i||(i=Be(t[t.length-2],r[r.length-2]),i||Be(t[t.length-1],r[r.length-1]))}class kL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&ed(r.mutation,i,Kn.empty(),ht.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const i=mi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Bc();return s.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=mi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=ur();const a=Zc(),u=(function(){return Zc()})();return t.forEach(((d,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof ls)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),ed(m.mutation,h,m.mutation.getFieldMask(),ht.now())):a.set(h.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>u.set(h,new kL(m,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Zc();let i=new wt(((a,u)=>a-u)),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||Kn.empty();m=u.applyToLocalView(h,m),r.set(d,m);const g=(i.get(u.batchId)||ze()).add(d);i=i.insert(u.batchId,g)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,g=Rb();m.forEach((v=>{if(!s.has(v)){const T=Ob(t.get(v),r.get(v));T!==null&&g.set(v,T),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return q.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(mi());let u=ru,d=s;return a.next((h=>q.forEach(h,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?q.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,ze()))).next((m=>({batchId:u,changes:xb(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((r=>{let i=Bc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Bc();return this.indexManager.getCollectionParents(e,s).next((u=>q.forEach(u,(d=>{const h=(function(g,v){return new nm(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{a=a.insert(g,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((d,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Bt.newInvalidDocument(m)))}));let u=Bc();return a.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&ed(m.mutation,h,Kn.empty(),ht.now()),Vd(t,h)&&(u=u.insert(d,h))})),u}))}}class DL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:tA(i.bundledQuery),readTime:Fn(i.readTime)}})(t)),q.resolve()}}class NL{constructor(){this.overlays=new wt(ge.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mi();return q.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=mi(),s=t.length+1,a=new ge(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new wt(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=mi(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=mi(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return q.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new F_(t,r));let s=this.qr.get(t);s===void 0&&(s=ze(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class VL{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class z_{constructor(){this.Qr=new ft(pn.$r),this.Ur=new ft(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new pn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ge(new lt([])),r=new pn(t,e),i=new pn(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new lt([])),r=new pn(t,e),i=new pn(t,e+1);let s=ze();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}class ML{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ft(pn.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new O_(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Zr=this.Zr.add(new pn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Ea:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),i=new pn(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const u=this.Xr(a.Yr);s.push(u)})),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(Be);return t.forEach((i=>{const s=new pn(i,0),a=new pn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(u=>{r=r.add(u.Yr)}))})),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ge.isDocumentKey(s)||(s=s.child(""));const a=new pn(new ge(s),0);let u=new ft(Be);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Yr)),!0)}),a),q.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(t.mutations,(i=>{const s=new pn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new pn(t,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class OL{constructor(e){this.ri=e,this.docs=(function(){return new wt(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let r=ur();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))})),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ur();const a=t.path,u=new ge(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||I_(qC(m),r)<=0||(i.has(m.key)||Vd(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return q.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new LL(this)}getSize(e){return q.resolve(this.size)}}class LL extends cA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class FL{constructor(e){this.persistence=e,this.si=new as((t=>xa(t)),Nd),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new z_,this.targetCount=0,this.ai=Da.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Da(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),q.waitFor(s).next((()=>i))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}class W_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gn(0),this.li=!1,this.li=!0,this.hi=new VL,this.referenceDelegate=e(this),this.Pi=new FL(this),this.indexManager=new TL,this.remoteDocumentCache=(function(i){return new OL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Zb(t),this.Ii=new DL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ML(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const i=new UL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class UL extends KC{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.Ri=new z_,this.Vi=null}static mi(e){return new um(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(r=>{const i=ge.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class fp{constructor(e,t){this.persistence=e,this.pi=new as((r=>kn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=uA(this,t)}static mi(e,t){return new fp(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?q.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((u=>{u||(r++,s.removeEntry(a,Ne.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mf(e.data.value)),t}br(e,t,r){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jL{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Qp("createOrUpgrade",t);r<1&&i>=1&&((function(d){d.createObjectStore(Dd)})(e),(function(d){d.createObjectStore(hd,{keyPath:JM}),d.createObjectStore(Fr,{keyPath:JT,autoIncrement:!0}).createIndex(va,ZT,{unique:!0}),d.createObjectStore(iu)})(e),$I(e),(function(d){d.createObjectStore(ua)})(e));let a=q.resolve();return r<3&&i>=3&&(r!==0&&((function(d){d.deleteObjectStore(ou),d.deleteObjectStore(su),d.deleteObjectStore(Ta)})(e),$I(e)),a=a.next((()=>(function(d){const h=d.store(Ta),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return h.put(rp,m)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(d,h){return h.store(Fr).J().next((g=>{d.deleteObjectStore(Fr),d.createObjectStore(Fr,{keyPath:JT,autoIncrement:!0}).createIndex(va,ZT,{unique:!0});const v=h.store(Fr),T=g.map((A=>v.put(A)));return q.waitFor(T)}))})(e,s)))),a=a.next((()=>{(function(d){d.createObjectStore(au,{keyPath:aO})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(d){d.createObjectStore(fd)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(Xp,{keyPath:lO})})(e),(function(d){d.createObjectStore(Jp,{keyPath:uO})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore(Zp,{keyPath:gO});h.createIndex(cv,yO,{unique:!1}),h.createIndex(nb,vO,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(np,{keyPath:eO});h.createIndex(Nf,tO),h.createIndex(JC,nO)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(ua)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(d){d.createObjectStore(C_,{keyPath:cO,autoIncrement:!0}).createIndex(uv,dO,{unique:!1}),d.createObjectStore(Qc,{keyPath:hO}).createIndex(eb,fO,{unique:!1}),d.createObjectStore(Yc,{keyPath:pO}).createIndex(tb,mO,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(Qc).clear()})).next((()=>{t.objectStore(Yc).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(b_,{keyPath:_O})})(e)}))),r<18&&i>=18&&bC()&&(a=a.next((()=>{t.objectStore(Qc).clear()})).next((()=>{t.objectStore(Yc).clear()}))),a}wi(e){let t=0;return e.store(ua).ee(((r,i)=>{t+=hp(i)})).next((()=>{const r={byteSize:t};return e.store(fd).put(lv,r)}))}yi(e){const t=e.store(hd),r=e.store(Fr);return t.J().next((i=>q.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Ea],[s.userId,s.lastAcknowledgedBatchId]);return r.J(va,a).next((u=>q.forEach(u,(d=>{ke(d.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const h=ma(this.serializer,d);return sA(e,s.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(ou),r=e.store(ua);return e.store(Ta).get(rp).next((i=>{const s=[];return r.ee(((a,u)=>{const d=new lt(a),h=(function(g){return[0,kn(g)]})(d);s.push(t.get(h).next((m=>m?q.resolve():(g=>t.put({targetId:0,path:kn(g),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>q.waitFor(s)))}))}bi(e,t){e.createObjectStore(pd,{keyPath:oO});const r=t.store(pd),i=new $_,s=a=>{if(i.add(a)){const u=a.lastSegment(),d=a.popLast();return r.put({collectionId:u,parent:kn(d)})}};return t.store(ua).ee({X:!0},((a,u)=>{const d=new lt(a);return s(d.popLast())})).next((()=>t.store(iu).ee({X:!0},(([a,u,d],h)=>{const m=pi(u);return s(m.popLast())}))))}Di(e){const t=e.store(su);return t.ee(((r,i)=>{const s=zc(i),a=eA(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(ua),i=[];return r.ee(((s,a)=>{const u=t.store(np),d=(function(g){return g.document?new ge(lt.fromString(g.document.name).popFirst(5)):g.noDocument?ge.fromSegments(g.noDocument.path):g.unknownDocument?ge.fromSegments(g.unknownDocument.path):Ie(36783)})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(h))})).next((()=>q.waitFor(i)))}Fi(e,t){const r=t.store(Fr),i=dA(this.serializer),s=new W_(um.mi,this.serializer.yt);return r.J().next((a=>{const u=new Map;return a.forEach((d=>{let h=u.get(d.userId)??ze();ma(this.serializer,d).keys().forEach((m=>h=h.add(m))),u.set(d.userId,h)})),q.forEach(u,((d,h)=>{const m=new mn(h),g=am.wt(this.serializer,m),v=s.getIndexManager(m),T=lm.wt(m,this.serializer,v,s.referenceDelegate);return new hA(i,T,g,v).recalculateAndSaveOverlaysForDocumentKeys(new dv(t,Gn.ce),d).next()}))}))}}function $I(n){n.createObjectStore(ou,{keyPath:iO}).createIndex(P_,sO,{unique:!0}),n.createObjectStore(su,{keyPath:"targetId"}).createIndex(ZC,rO,{unique:!0}),n.createObjectStore(Ta)}const $s="IndexedDbPersistence",gy=18e5,yy=5e3,vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",BL="main";class H_{constructor(e,t,r,i,s,a,u,d,h,m,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=u,this.xi=h,this.Oi=m,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!H_.v())throw new me(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AL(this,i),this.$i=t+BL,this.serializer=new Zb(d),this.Ui=new so(this.$i,this.Ni,new jL(this.serializer)),this.hi=new gL,this.Pi=new SL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dA(this.serializer),this.Ii=new mL,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&qt($s,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ie.FAILED_PRECONDITION,vy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Gn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Io(e))return le($s,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le($s,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return xc(e).get(Rl).next((t=>q.resolve(this.es(t))))}ts(e){return yf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,gy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=un(t,au);return r.J().next((i=>{const s=this.ss(i,gy),a=i.filter((u=>s.indexOf(u)===-1));return q.forEach(a,(u=>r.delete(u.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?q.resolve(!0):xc(e).get(Rl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,yy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new me(ie.FAILED_PRECONDITION,vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||yf(e).J().next((r=>this.ss(r,yy).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||a&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le($s,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Dd,au],(e=>{const t=new dv(e,Gn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>yf(e).J().next((t=>this.ss(t,gy).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return lm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IL(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return am.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){le($s,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(d){return d===18?TO:d===17?ob:d===16?EO:d===15?A_:d===14?sb:d===13?ib:d===12?wO:d===11?rb:void Ie(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(u=>(a=new dv(u,this.ci?this.ci.next():Gn.ce),t==="readwrite-primary"?this.Hi(a).next((d=>!!d||this.Yi(a))).next((d=>{if(!d)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new me(ie.FAILED_PRECONDITION,GC);return r(a)})).next((d=>this.Xi(a).next((()=>d)))):this.Is(a).next((()=>r(a)))))).then((u=>(a.raiseOnCommittedEvent(),u)))}Is(e){return xc(e).get(Rl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,yy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(ie.FAILED_PRECONDITION,vy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xc(e).put(Rl,t)}static v(){return so.v()}Zi(e){const t=xc(e);return t.get(Rl).next((r=>this.es(r)?(le($s,"Releasing primary lease."),t.delete(Rl)):q.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(qt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;CC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le($s,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return qt($s,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xc(n){return un(n,Dd)}function yf(n){return un(n,au)}function fA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class q_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new q_(e,t.fromCache,r,i)}}class $L{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CC()?8:QC(ln())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new $L;return this.Ss(e,t,a).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Fl()<=Ge.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Ul(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Fl()<=Ge.DEBUG&&le("QueryEngine","Query:",Ul(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Fl()<=Ge.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Ul(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):q.resolve())}ys(e,t){if(hI(t))return q.resolve(null);let r=cr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=yv(t,null,"F"),r=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=ze(...s);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const h=this.Ds(t,u);return this.Cs(t,h,a,d.readTime)?this.ys(e,yv(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,r,i){return hI(t)||i.isEqual(Ne.min())?q.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?q.resolve(null):(Fl()<=Ge.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ul(t)),this.vs(e,a,t,HC(i,ru)).next((u=>u)))}))}Ds(e,t){let r=new ft(bb(e));return t.forEach(((i,s)=>{Vd(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Fl()<=Ge.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Ul(t)),this.ps.getDocumentsMatchingQuery(e,t,dr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const G_="LocalStore",zL=3e8;class WL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new wt(Be),this.xs=new as((s=>xa(s)),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mA(n,e,t,r){return new WL(n,e,t,r)}async function gA(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let d=ze();for(const h of i){a.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function HL(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,m){const g=h.batch,v=g.keys();let T=q.resolve();return v.forEach((A=>{T=T.next((()=>m.getEntry(d,A))).next((x=>{const P=h.docVersions.get(A);ke(P!==null,48541),x.version.compareTo(P)<0&&(g.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),m.addEntry(x)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function yA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function qL(n,e){const t=be(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;u.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let T=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Xt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(g,T),(function(x,P,j){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=zL?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(v,T,m)&&u.push(t.Pi.updateTargetData(s,T))}));let d=ur(),h=ze();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(GL(s,a,e.documentUpdates).next((m=>{d=m.ks,h=m.qs}))),!r.isEqual(Ne.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return q.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(t.Ms=i,s)))}function GL(n,e,t){let r=ze(),i=ze();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=ur();return t.forEach(((u,d)=>{const h=s.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):le(G_,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{ks:a,qs:i}}))}function KL(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ea),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pp(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,q.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Gi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function mu(n,e,t){const r=be(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Io(a))throw a;le(G_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Pv(n,e,t){const r=be(n);let i=Ne.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,m){const g=be(d),v=g.xs.get(m);return v!==void 0?q.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,m)})(r,a,cr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,u.targetId).next((d=>{s=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Ne.min(),t?s:ze()))).next((u=>(wA(r,Cb(e),u),{documents:u,Qs:s})))))}function vA(n,e){const t=be(n),r=be(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function _A(n,e){const t=be(n),r=t.Os.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,HC(r,ru),Number.MAX_SAFE_INTEGER))).then((i=>(wA(t,e,i),i)))}function wA(n,e,t){let r=n.Os.get(e)||Ne.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}const EA="firestore_clients";function zI(n,e){return`${EA}_${n}_${e}`}const TA="firestore_mutations";function WI(n,e,t){let r=`${TA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const IA="firestore_targets";function _y(n,e){return`${IA}_${n}_${e}`}const di="SharedClientState";class mp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new me(i.error.code,i.error.message))),a?new mp(e,t,i.state,s):(qt(di,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class td{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new me(r.error.code,r.error.message))),s?new td(e,r.state,i):(qt(di,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=V_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=YC(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new gp(e,s):(qt(di,`Failed to parse client data for instance '${e}': ${t}`),null)}}class K_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new K_(t.clientId,t.onlineState):(qt(di,`Failed to parse online state: ${e}`),null)}}class Cv{constructor(){this.activeTargetIds=V_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wy{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new wt(Be),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=zI(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Cv),this.ro=new RegExp(`^${EA}_${a}_([^_]*)$`),this.io=new RegExp(`^${TA}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${IA}_${a}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(zI(this.persistenceKey,r));if(i){const s=gp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(_y(this.persistenceKey,e));if(i){const s=td.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_y(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return le(di,"READ",e,t),t}setItem(e,t){le(di,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){le(di,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(le(di,"EVENT",t.key,t.newValue),t.key===this.eo)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=Gn.ce;if(s!=null)try{const u=JSON.parse(s);ke(typeof u=="number",30636,{So:s}),a=u}catch(u){qt(di,"Failed to read sequence number from WebStorage",u)}return a})(t.newValue);r!==Gn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new mp(this.currentUser,e,t,r),s=WI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=WI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=_y(this.persistenceKey,e),s=new td(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return gp.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return mp.Ws(new mn(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return td.Ws(i,t)}uo(e){return K_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);le(di,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],u=[];return s.forEach((d=>{i.has(d)||a.push(d)})),i.forEach((d=>{s.has(d)||u.push(d)})),this.syncEngine.Fo(a,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=V_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class SA{constructor(){this.Mo=new Cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QL{Oo(e){}shutdown(){}}const HI="ConnectivityMonitor";class qI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(HI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(HI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vf=null;function bv(){return vf===null?vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():vf++,"0x"+vf.toString(16)}const Ey="RestConnection",YL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ip?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=bv(),u=this.zo(e,t.toUriEncodedString());le(Ey,`Sending RPC '${e}' ${a}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,s);const{host:h}=new URL(u),m=Eo(h);return this.Jo(e,u,d,r,m).then((g=>(le(Ey,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw co(Ey,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=YL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class JL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const bn="WebChannelConnection";class ZL extends XL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=bv();return new Promise(((u,d)=>{const h=new MC;h.setWithCredentials(!0),h.listenOnce(OC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Rf.NO_ERROR:const g=h.getResponseJson();le(bn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Rf.TIMEOUT:le(bn,`RPC '${e}' ${a} timed out`),d(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const v=h.getStatus();if(le(bn,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T?.error;if(A&&A.status&&A.message){const x=(function(j){const M=j.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(M)>=0?M:ie.UNKNOWN})(A.status);d(new me(x,A.message))}else d(new me(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new me(ie.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{le(bn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);le(bn,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=bv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=UC(),u=FC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=s.join("");le(bn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=a.createWebChannel(m,d);this.I_(g);let v=!1,T=!1;const A=new JL({Yo:P=>{T?le(bn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(le(bn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),le(bn,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},Zo:()=>g.close()}),x=(P,j,M)=>{P.listen(j,(D=>{try{M(D)}catch(B){setTimeout((()=>{throw B}),0)}}))};return x(g,jc.EventType.OPEN,(()=>{T||(le(bn,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),x(g,jc.EventType.CLOSE,(()=>{T||(T=!0,le(bn,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(g))})),x(g,jc.EventType.ERROR,(P=>{T||(T=!0,co(bn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),A.a_(new me(ie.UNAVAILABLE,"The operation could not be completed")))})),x(g,jc.EventType.MESSAGE,(P=>{if(!T){const j=P.data[0];ke(!!j,16349);const M=j,D=M?.error||M[0]?.error;if(D){le(bn,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let Z=(function(I){const b=en[I];if(b!==void 0)return Ub(b)})(B),re=D.message;Z===void 0&&(Z=ie.INTERNAL,re="Unknown error status: "+B+" with message "+D.message),T=!0,A.a_(new me(Z,re)),g.close()}else le(bn,`RPC '${e}' stream ${i} received:`,j),A.u_(j)}})),x(u,LC.STAT_EVENT,(P=>{P.stat===sv.PROXY?le(bn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===sv.NOPROXY&&le(bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function PA(){return typeof window<"u"?window:null}function jf(){return typeof document<"u"?document:null}function cm(n){return new iL(n,!0)}class CA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const GI="PersistentStream";class bA{constructor(e,t,r,i,s,a,u,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new me(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(GI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(GI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e2 extends bA{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aL(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ne.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ne.min():a.readTime?Fn(a.readTime):Ne.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=wv(this.serializer),t.addTarget=(function(s,a){let u;const d=a.target;if(u=op(d)?{documents:Gb(s,d)}:{query:Kb(s,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=$b(s,a.resumeToken);const h=vv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ne.min())>0){u.readTime=pu(s,a.snapshotVersion.toTimestamp());const h=vv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=uL(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=wv(this.serializer),t.removeTarget=e,this.q_(t)}}class t2 extends bA{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lL(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=wv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>up(this.serializer,r)))};this.q_(t)}}class n2{}class r2 extends n2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,_v(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(ie.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,_v(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ie.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class i2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qt(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Na="RemoteStore";class s2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Ba(this)&&(le(Na,"Restarting streams for network reachability change."),await(async function(d){const h=be(d);h.Ea.add(4),await Fd(h),h.Ra.set("Unknown"),h.Ea.delete(4),await dm(h)})(this))}))})),this.Ra=new i2(r,i)}}async function dm(n){if(Ba(n))for(const e of n.da)await e(!0)}async function Fd(n){for(const e of n.da)await e(!1)}function hm(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),X_(t)?Y_(t):Ru(t).O_()&&Q_(t,e))}function gu(n,e){const t=be(n),r=Ru(t);t.Ia.delete(e),r.O_()&&AA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ba(t)&&t.Ra.set("Unknown"))}function Q_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ru(n).Y_(e)}function AA(n,e){n.Va.Ue(e),Ru(n).Z_(e)}function Y_(n){n.Va=new eL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ru(n).start(),n.Ra.ua()}function X_(n){return Ba(n)&&!Ru(n).x_()&&n.Ia.size>0}function Ba(n){return be(n).Ea.size===0}function xA(n){n.Va=void 0}async function o2(n){n.Ra.set("Online")}async function a2(n){n.Ia.forEach(((e,t)=>{Q_(n,e)}))}async function l2(n,e){xA(n),X_(n)?(n.Ra.ha(e),Y_(n)):n.Ra.set("Unknown")}async function u2(n,e,t){if(n.Ra.set("Online"),e instanceof Bb&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){le(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yp(n,r)}else if(e instanceof Ff?n.Va.Ze(e):e instanceof jb?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const r=await yA(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.Va.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const m=s.Ia.get(d);if(!m)return;s.Ia.set(d,m.withResumeToken(Xt.EMPTY_BYTE_STRING,m.snapshotVersion)),AA(s,d);const g=new Gi(m.target,d,h,m.sequenceNumber);Q_(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){le(Na,"Failed to raise snapshot:",r),await yp(n,r)}}async function yp(n,e,t){if(!Io(e))throw e;n.Ea.add(1),await Fd(n),n.Ra.set("Offline"),t||(t=()=>yA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Na,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await dm(n)}))}function RA(n,e){return e().catch((t=>yp(n,t,e)))}async function xu(n){const e=be(n),t=po(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ea;for(;c2(e);)try{const i=await KL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,d2(e,i)}catch(i){await yp(e,i)}kA(e)&&DA(e)}function c2(n){return Ba(n)&&n.Ta.length<10}function d2(n,e){n.Ta.push(e);const t=po(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kA(n){return Ba(n)&&!po(n).x_()&&n.Ta.length>0}function DA(n){po(n).start()}async function h2(n){po(n).ra()}async function f2(n){const e=po(n);for(const t of n.Ta)e.ea(t.mutations)}async function p2(n,e,t){const r=n.Ta.shift(),i=L_.from(r,e,t);await RA(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await xu(n)}async function m2(n,e){e&&po(n).X_&&await(async function(r,i){if((function(a){return XO(a)&&a!==ie.ABORTED})(i.code)){const s=r.Ta.shift();po(r).B_(),await RA(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await xu(r)}})(n,e),kA(n)&&DA(n)}async function KI(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),le(Na,"RemoteStore received new credentials");const r=Ba(t);t.Ea.add(3),await Fd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await dm(t)}async function Av(n,e){const t=be(n);e?(t.Ea.delete(2),await dm(t)):e||(t.Ea.add(2),await Fd(t),t.Ra.set("Unknown"))}function Ru(n){return n.ma||(n.ma=(function(t,r,i){const s=be(t);return s.sa(),new e2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:o2.bind(null,n),t_:a2.bind(null,n),r_:l2.bind(null,n),H_:u2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),X_(n)?Y_(n):n.Ra.set("Unknown")):(await n.ma.stop(),xA(n))}))),n.ma}function po(n){return n.fa||(n.fa=(function(t,r,i){const s=be(t);return s.sa(),new t2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:h2.bind(null,n),r_:m2.bind(null,n),ta:f2.bind(null,n),na:p2.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xu(n)):(await n.fa.stop(),n.Ta.length>0&&(le(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class J_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new J_(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fm(n,e){if(qt("AsyncQueue",`${e}: ${n}`),Io(n))return new me(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ge.comparator(t.key,r.key):(t,r)=>ge.comparator(t.key,r.key),this.keyedMap=Bc(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QI{constructor(){this.ga=new wt(ge.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class yu{constructor(e,t,r,i,s,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new yu(e,t,Ql.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class g2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class y2{constructor(){this.queries=YI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=be(t),s=i.queries;i.queries=YI(),s.forEach(((a,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function YI(){return new as((n=>Pb(n)),im)}async function NA(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new g2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=fm(a,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Z_(t)}async function VA(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function v2(n,e){const t=be(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Sa)u.Fa(i)&&(r=!0);a.wa=i}}r&&Z_(t)}function _2(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Z_(n){n.Ca.forEach((e=>{e.next()}))}var xv,XI;(XI=xv||(xv={})).Ma="default",XI.Cache="cache";class MA{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xv.Cache}}class OA{constructor(e){this.key=e}}class LA{constructor(e){this.key=e}}class w2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=bb(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new QI,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),T=Vd(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),x=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;v&&T?v.data.isEqual(T.data)?A!==x&&(r.track({type:3,doc:T}),P=!0):this.su(v,T)||(r.track({type:2,doc:T}),P=!0,(d&&this.eu(T,d)>0||h&&this.eu(T,h)<0)&&(u=!0)):!v&&T?(r.track({type:0,doc:T}),P=!0):v&&!T&&(r.track({type:1,doc:v}),P=!0,(d||h)&&(u=!0)),P&&(T?(a=a.add(T),s=x?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,g)=>(function(T,A){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:P})}};return x(T)-x(A)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,h=d!==this.Za;return this.Za=d,a.length!==0||h?{snapshot:new yu(this.query,e.tu,s,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new QI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new LA(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new OA(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ku="SyncEngine";class E2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class T2{constructor(e){this.key=e,this.hu=!1}}class I2{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new as((u=>Pb(u)),im),this.Iu=new Map,this.Eu=new Set,this.du=new wt(ge.comparator),this.Au=new Map,this.Ru=new z_,this.Vu={},this.mu=new Map,this.fu=Da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S2(n,e,t=!0){const r=pm(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await FA(r,e,t,!0),i}async function P2(n,e){const t=pm(n);await FA(t,e,!0,!1)}async function FA(n,e,t,r){const i=await pp(n.localStore,cr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await ew(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&hm(n.remoteStore,i),u}async function ew(n,e,t,r,i){n.pu=(g,v,T)=>(async function(x,P,j,M){let D=P.view.ru(j);D.Cs&&(D=await Pv(x.localStore,P.query,!1).then((({documents:C})=>P.view.ru(C,D))));const B=M&&M.targetChanges.get(P.targetId),Z=M&&M.targetMismatches.get(P.targetId)!=null,re=P.view.applyChanges(D,x.isPrimaryClient,B,Z);return Rv(x,P.targetId,re.au),re.snapshot})(n,g,v,T);const s=await Pv(n.localStore,e,!0),a=new w2(e,s.Qs),u=a.ru(s.documents),d=Ld.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,d);Rv(n,t,h.au);const m=new E2(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function C2(n,e,t){const r=be(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!im(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&gu(r.remoteStore,i.targetId),vu(r,i.targetId)})).catch(To)):(vu(r,i.targetId),await mu(r.localStore,i.targetId,!0))}async function b2(n,e){const t=be(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gu(t.remoteStore,r.targetId))}async function A2(n,e,t){const r=iw(n);try{const i=await(function(a,u){const d=be(a),h=ht.now(),m=u.reduce(((T,A)=>T.add(A.key)),ze());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let A=ur(),x=ze();return d.Ns.getEntries(T,m).next((P=>{A=P,A.forEach(((j,M)=>{M.isValidDocument()||(x=x.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,A))).next((P=>{g=P;const j=[];for(const M of u){const D=QO(M,g.get(M.key).overlayedDocument);D!=null&&j.push(new ls(M.key,D,gb(D.value.mapValue),an.exists(!0)))}return d.mutationQueue.addMutationBatch(T,h,j,u)})).next((P=>{v=P;const j=P.applyToLocalDocumentSet(g,x);return d.documentOverlayCache.saveOverlays(T,P.batchId,j)}))})).then((()=>({batchId:v.batchId,changes:xb(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let h=a.Vu[a.currentUser.toKey()];h||(h=new wt(Be)),h=h.insert(u,d),a.Vu[a.currentUser.toKey()]=h})(r,i.batchId,t),await Po(r,i.changes),await xu(r.remoteStore)}catch(i){const s=fm(i,"Failed to persist write");t.reject(s)}}async function UA(n,e){const t=be(n);try{const r=await qL(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ke(a.hu,14607):i.removedDocuments.size>0&&(ke(a.hu,42227),a.hu=!1))})),await Po(t,r,e)}catch(r){await To(r)}}function JI(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const d=be(a);d.onlineState=u;let h=!1;d.queries.forEach(((m,g)=>{for(const v of g.Sa)v.va(u)&&(h=!0)})),h&&Z_(d)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x2(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new wt(ge.comparator);a=a.insert(s,Bt.newNoDocument(s,Ne.min()));const u=ze().add(s),d=new Od(Ne.min(),new Map,new wt(Be),a,u);await UA(r,d),r.du=r.du.remove(s),r.Au.delete(e),rw(r)}else await mu(r.localStore,e,!1).then((()=>vu(r,e,t))).catch(To)}async function R2(n,e){const t=be(n),r=e.batch.batchId;try{const i=await HL(t.localStore,e);nw(t,r,null),tw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Po(t,i)}catch(i){await To(i)}}async function k2(n,e,t){const r=be(n);try{const i=await(function(a,u){const d=be(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(ke(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);nw(r,e,t),tw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Po(r,i)}catch(i){await To(i)}}function tw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function nw(n,e,t){const r=be(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function vu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||jA(n,r)}))}function jA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(gu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),rw(n))}function Rv(n,e,t){for(const r of t)r instanceof OA?(n.Ru.addReference(r.key,e),D2(n,r)):r instanceof LA?(le(ku,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||jA(n,r.key)):Ie(19791,{wu:r})}function D2(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(ku,"New document in limbo: "+t),n.Eu.add(r),rw(n))}function rw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ge(lt.fromString(e)),r=n.fu.next();n.Au.set(r,new T2(t)),n.du=n.du.insert(t,r),hm(n.remoteStore,new Gi(cr(rm(t.path)),r,"TargetPurposeLimboResolution",Gn.ce))}}async function Po(n,e,t){const r=be(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{a.push(r.pu(d,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=q_.As(d.targetId,h);s.push(m)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(d,h){const m=be(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>q.forEach(h,(v=>q.forEach(v.Es,(T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T))).next((()=>q.forEach(v.ds,(T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))))))}catch(g){if(!Io(g))throw g;le(G_,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),A=T.snapshotVersion,x=T.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(v,x)}}})(r.localStore,s))}async function N2(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){le(ku,"User change. New user:",e.toKey());const r=await gA(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((d=>{d.reject(new me(ie.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(t,r.Ls)}}function V2(n,e){const t=be(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}async function M2(n,e){const t=be(n),r=await Pv(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Rv(t,e.targetId,i.au),i}async function O2(n,e){const t=be(n);return _A(t.localStore,e).then((r=>Po(t,r)))}async function L2(n,e,t,r){const i=be(n),s=await(function(u,d){const h=be(u),m=be(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>m.er(g,d).next((v=>v?h.localDocuments.getDocuments(g,v):q.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await xu(i.remoteStore):t==="acknowledged"||t==="rejected"?(nw(i,e,r||null),tw(i,e),(function(u,d){be(be(u).mutationQueue).ir(d)})(i.localStore,e)):Ie(6720,"Unknown batchState",{Su:t}),await Po(i,s)):le(ku,"Cannot apply mutation batch with id: "+e)}async function F2(n,e){const t=be(n);if(pm(t),iw(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await ZI(t,r.toArray());t.gu=!0,await Av(t.remoteStore,!0);for(const s of i)hm(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(vu(t,a),mu(t.localStore,a,!0)))),gu(t.remoteStore,a)})),await i,await ZI(t,r),(function(a){const u=be(a);u.Au.forEach(((d,h)=>{gu(u.remoteStore,h)})),u.Ru.Jr(),u.Au=new Map,u.du=new wt(ge.comparator)})(t),t.gu=!1,await Av(t.remoteStore,!1)}}async function ZI(n,e,t){const r=be(n),i=[],s=[];for(const a of e){let u;const d=r.Iu.get(a);if(d&&d.length!==0){u=await pp(r.localStore,cr(d[0]));for(const h of d){const m=r.Tu.get(h),g=await M2(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await vA(r.localStore,a);u=await pp(r.localStore,h),await ew(r,BA(h),a,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(s),i}function BA(n){return Sb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function U2(n){return(function(t){return be(be(t).persistence).Ts()})(be(n).localStore)}async function j2(n,e,t,r){const i=be(n);if(i.gu)return void le(ku,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await _A(i.localStore,Cb(s[0])),u=Od.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Xt.EMPTY_BYTE_STRING);await Po(i,a,u);break}case"rejected":await mu(i.localStore,e,!0),vu(i,e,r);break;default:Ie(64155,t)}}async function B2(n,e,t){const r=pm(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){le(ku,"Adding an already active target "+i);continue}const s=await vA(r.localStore,i),a=await pp(r.localStore,s);await ew(r,BA(s),a.targetId,!1,a.resumeToken),hm(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await mu(r.localStore,i,!1).then((()=>{gu(r.remoteStore,i),vu(r,i)})).catch(To)}}function pm(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x2.bind(null,e),e.Pu.H_=v2.bind(null,e.eventManager),e.Pu.yu=_2.bind(null,e.eventManager),e}function iw(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k2.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mA(this.persistence,new pA,e.initialUser,this.serializer)}Cu(e){return new W_(um.mi,this.serializer)}Du(e){return new SA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class $2 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof fp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new W_((r=>fp.mi(r,t)),this.serializer)}}class $A extends wd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await iw(this.xu.syncEngine),await xu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return mA(this.persistence,new pA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new lA(r,e.asyncQueue,t)}Mu(e,t){const r=new YM(t,this.persistence);return new QM(e.asyncQueue,r)}Cu(e){const t=fA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new H_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PA(),jf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new SA}}class z2 extends $A{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof wy&&(this.sharedClientState.syncEngine={Co:L2.bind(null,t),vo:j2.bind(null,t),Fo:B2.bind(null,t),Ts:U2.bind(null,t),Do:O2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await F2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=PA();if(!wy.v(t))throw new me(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ed{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N2.bind(null,this.syncEngine),await Av(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y2})()}createDatastore(e){const t=cm(e.databaseInfo.databaseId),r=(function(s){return new ZL(s)})(e.databaseInfo);return(function(s,a,u,d){return new r2(s,a,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new s2(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>JI(this.syncEngine,t,0)),(function(){return qI.v()?new qI:new QL})())}createSyncEngine(e,t){return(function(i,s,a,u,d,h,m){const g=new I2(i,s,a,u,d,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=be(t);le(Na,"RemoteStore shutting down."),r.Ea.add(5),await Fd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ed.provider={build:()=>new Ed};class zA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const mo="FirestoreClient";class W2{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=E_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{le(mo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(le(mo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=fm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ty(n,e){n.asyncQueue.verifyOperationInProgress(),le(mo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await gA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function eS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await WA(n);le(mo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>KI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>KI(e.remoteStore,i))),n._onlineComponents=e}async function WA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(mo,"Using user provided OfflineComponentProvider");try{await Ty(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;co("Error using user provided cache. Falling back to memory cache: "+t),await Ty(n,new wd)}}else le(mo,"Using default OfflineComponentProvider"),await Ty(n,new $2(void 0));return n._offlineComponents}async function HA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(mo,"Using user provided OnlineComponentProvider"),await eS(n,n._uninitializedComponentsProvider._online)):(le(mo,"Using default OnlineComponentProvider"),await eS(n,new Ed))),n._onlineComponents}function H2(n){return WA(n).then((e=>e.localStore))}function q2(n){return HA(n).then((e=>e.syncEngine))}async function qA(n){const e=await HA(n),t=e.eventManager;return t.onListen=S2.bind(null,e.syncEngine),t.onUnlisten=C2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b2.bind(null,e.syncEngine),t}function G2(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const u=await(function(h,m){const g=be(h);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,m)))})(i,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new me(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=fm(u,`Failed to get document '${s} from cache`);a.reject(d)}})(await H2(n),e,t))),t.promise}function K2(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new zA({next:v=>{m.Nu(),a.enqueueAndForget((()=>VA(s,g)));const T=v.docs.has(u);!T&&v.fromCache?h.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&d&&d.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new MA(rm(u.path),m,{includeMetadataChanges:!0,qa:!0});return NA(s,g)})(await qA(n),n.asyncQueue,e,t,r))),r.promise}function Q2(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new zA({next:v=>{m.Nu(),a.enqueueAndForget((()=>VA(s,g))),v.fromCache&&d.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new MA(u,m,{includeMetadataChanges:!0,qa:!0});return NA(s,g)})(await qA(n),n.asyncQueue,e,t,r))),r.promise}function GA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const tS=new Map;const KA="firestore.googleapis.com",nS=!0;class rS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KA,this.ssl=nS}else this.host=e.host,this.ssl=e.ssl??nS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PL)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new OM;switch(r.type){case"firstParty":return new jM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=tS.get(t);r&&(le("ComponentProvider","Removing Datastore"),tS.delete(t),r.terminate())})(this),Promise.resolve()}}function Y2(n,e,t,r={}){n=Un(n,mm);const i=Eo(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(m_(`https://${u}`),g_("Firestore",!0)),s.host!==KA&&s.host!==u&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...s,host:u,ssl:i,emulatorOptions:r};if(!Pa(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=mn.MOCK_USER;else{h=cV(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mn(g)}n._authCredentials=new LM(new BC(h,m))}}class gm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gm(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(kd(t,Kt._jsonSchema))return new Kt(e,r||null,new ge(lt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:rn("string",Kt._jsonSchemaVersion),referencePath:rn("string")};class oo extends gm{constructor(e,t,r){super(e,t,rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ge(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function et(n,e,...t){if(n=gt(n),zC("collection","path",e),n instanceof mm){const r=lt.fromString(e,...t);return GT(r),new oo(n,null,r)}{if(!(n instanceof Kt||n instanceof oo))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return GT(r),new oo(n.firestore,null,r)}}function xt(n,e,...t){if(n=gt(n),arguments.length===1&&(e=E_.newId()),zC("doc","path",e),n instanceof mm){const r=lt.fromString(e,...t);return qT(r),new Kt(n,null,new ge(r))}{if(!(n instanceof Kt||n instanceof oo))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return qT(r),new Kt(n.firestore,n instanceof oo?n.converter:null,new ge(r))}}const iS="AsyncQueue";class sS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CA(this,"async_queue_retry"),this._c=()=>{const r=jf();r&&le(iS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=jf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;le(iS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qt("INTERNAL UNHANDLED ERROR: ",oS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=J_.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:oS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function oS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ci extends mm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sS,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sS(e),this._firestoreClient=void 0,await e}}}function X2(n,e){const t=typeof n=="object"?n:__(),r=typeof n=="string"?n:ip,i=Kp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=TC("firestore");s&&Y2(i,...s)}return i}function Ud(n){if(n._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QA(n),n._firestoreClient}function QA(n){const e=n._freezeSettings(),t=(function(i,s,a,u){return new SO(i,s,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GA(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new W2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function J2(n,e){co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return YA(n,Ed.provider,{build:r=>new $A(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function Z2(n){co("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();YA(n,Ed.provider,{build:t=>new z2(t,e.cacheSizeBytes)})}function YA(n,e,t){if((n=Un(n,Ci))._firestoreClient||n._terminated)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new me(ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},QA(n)}class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(Xt.fromBase64String(e))}catch(t){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sr(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kd(e,Sr._jsonSchema))return Sr.fromBase64String(e.bytes)}}Sr._jsonSchemaVersion="firestore/bytes/1.0",Sr._jsonSchema={type:rn("string",Sr._jsonSchemaVersion),bytes:rn("string")};class jd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sw{constructor(e){this._methodName=e}}class yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yi._jsonSchemaVersion}}static fromJSON(e){if(kd(e,yi._jsonSchema))return new yi(e.latitude,e.longitude)}}yi._jsonSchemaVersion="firestore/geoPoint/1.0",yi._jsonSchema={type:rn("string",yi._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};class vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kd(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vi(e.vectorValues);throw new me(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:rn("string",vi._jsonSchemaVersion),vectorValues:rn("object")};const eF=/^__.*__$/;class tF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}class XA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class ow{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ow({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(JA(this.Ac)&&eF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cm(e)}Cc(e,t,r,i=!1){return new ow({Ac:e,methodName:t,Dc:r,path:Nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ym(n){const e=n._freezeSettings(),t=cm(n._databaseId);return new nF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aw(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);lw("Data must be an object, but it was:",a,r);const u=tx(r,a);let d,h;if(s.merge)d=new Kn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const v=kv(e,g,t);if(!a.contains(v))throw new me(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);rx(m,v)||m.push(v)}d=new Kn(m),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new tF(new Rn(u),d,h)}class Bd extends sw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}function ZA(n,e,t,r){const i=n.Cc(1,e,t);lw("Data must be an object, but it was:",i,r);const s=[],a=Rn.empty();So(r,((d,h)=>{const m=uw(e,d,t);h=gt(h);const g=i.yc(m);if(h instanceof Bd)s.push(m);else{const v=vm(h,g);v!=null&&(s.push(m),a.set(m,v))}}));const u=new Kn(s);return new XA(a,u,i.fieldTransforms)}function ex(n,e,t,r,i,s){const a=n.Cc(1,e,t),u=[kv(e,r,t)],d=[i];if(s.length%2!=0)throw new me(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(kv(e,s[v])),d.push(s[v+1]);const h=[],m=Rn.empty();for(let v=u.length-1;v>=0;--v)if(!rx(h,u[v])){const T=u[v];let A=d[v];A=gt(A);const x=a.yc(T);if(A instanceof Bd)h.push(T);else{const P=vm(A,x);P!=null&&(h.push(T),m.set(T,P))}}const g=new Kn(h);return new XA(m,g,a.fieldTransforms)}function vm(n,e){if(nx(n=gt(n)))return lw("Unsupported field value:",e,n),tx(n,e);if(n instanceof sw)return(function(r,i){if(!JA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let d=vm(u,i.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $O(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ht.fromDate(r);return{timestampValue:pu(i.serializer,s)}}if(r instanceof ht){const s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pu(i.serializer,s)}}if(r instanceof yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:$b(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:j_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vi)return(function(a,u){return{mapValue:{fields:{[R_]:{stringValue:k_},[lu]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return M_(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${T_(r)}`)})(n,e)}function tx(n,e){const t={};return ab(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((r,i)=>{const s=vm(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function nx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof yi||n instanceof Sr||n instanceof Kt||n instanceof sw||n instanceof vi)}function lw(n,e,t){if(!nx(t)||!WC(t)){const r=T_(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function kv(n,e,t){if((e=gt(e))instanceof jd)return e._internalPath;if(typeof e=="string")return uw(n,e);throw vp("Field path arguments must be of type string or ",n,!1,void 0,t)}const rF=new RegExp("[~\\*/\\[\\]]");function uw(n,e,t){if(e.search(rF)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jd(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new me(ie.INVALID_ARGUMENT,u+n+d)}function rx(n,e){return n.some((t=>t.isEqual(e)))}class ix{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iF extends ix{data(){return super.data()}}function sx(n,e){return typeof e=="string"?uw(n,e):e instanceof jd?e._internalPath:e._delegate._internalPath}function sF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oF{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return So(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[lu].arrayValue?.values?.map((r=>At(r.doubleValue)));return new vi(t)}convertGeoPoint(e){return new yi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=em(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){const t=es(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);ke(Jb(r),9688,{name:e});const i=new Aa(r.get(1),r.get(3)),s=new ge(r.popFirst(5));return i.isEqual(t)||qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function cw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ao extends ix{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",ao._jsonSchema={type:rn("string",ao._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class Bf extends ao{data(e={}){return super.data(e)}}class Yl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Bf(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const d=new Bf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new zl(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const d=new Bf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new zl(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:aF(u.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=E_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function _m(n){n=Un(n,Kt);const e=Un(n.firestore,Ci);return K2(Ud(e),n._key).then((t=>uF(e,n,t)))}Yl._jsonSchemaVersion="firestore/querySnapshot/1.0",Yl._jsonSchema={type:rn("string",Yl._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};class dw extends oF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function lF(n){n=Un(n,Kt);const e=Un(n.firestore,Ci),t=Ud(e),r=new dw(e);return G2(t,n._key).then((i=>new ao(e,r,n._key,i,new zl(i!==null&&i.hasLocalMutations,!0),n.converter)))}function _t(n){n=Un(n,gm);const e=Un(n.firestore,Ci),t=Ud(e),r=new dw(e);return sF(n._query),Q2(t,n._query).then((i=>new Yl(e,r,n,i)))}function ox(n,e,t){n=Un(n,Kt);const r=Un(n.firestore,Ci),i=cw(n.converter,e,t);return $d(r,[aw(ym(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,an.none())])}function Va(n,e,t,...r){n=Un(n,Kt);const i=Un(n.firestore,Ci),s=ym(i);let a;return a=typeof(e=gt(e))=="string"||e instanceof jd?ex(s,"updateDoc",n._key,e,t,r):ZA(s,"updateDoc",n._key,e),$d(i,[a.toMutation(n._key,an.exists(!0))])}function _p(n){return $d(Un(n.firestore,Ci),[new Md(n._key,an.none())])}function Wc(n,e){const t=Un(n.firestore,Ci),r=xt(n),i=cw(n.converter,e);return $d(t,[aw(ym(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function $d(n,e){return(function(r,i){const s=new jr;return r.asyncQueue.enqueueAndForget((async()=>A2(await q2(r),i,s))),s.promise})(Ud(n),e)}function uF(n,e,t){const r=t.docs.get(e._key),i=new dw(n);return new ao(n,i,e._key,r,new zl(t.hasPendingWrites,t.fromCache),e.converter)}class cF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ym(e)}set(e,t,r){this._verifyNotCommitted();const i=Iy(e,this._firestore),s=cw(i.converter,t,r),a=aw(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,an.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Iy(e,this._firestore);let a;return a=typeof(t=gt(t))=="string"||t instanceof jd?ex(this._dataReader,"WriteBatch.update",s._key,t,r,i):ZA(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Iy(e,this._firestore);return this._mutations=this._mutations.concat(new Md(t._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Iy(n,e){if((n=gt(n)).firestore!==e)throw new me(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function dF(){return new Bd("deleteField")}function go(n){return Ud(n=Un(n,Ci)),new cF(n,(e=>$d(n,e)))}(function(e,t=!0){(function(i){bu=i})(Cu),Ca(new uo("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new Ci(new FM(r.getProvider("auth-internal")),new BM(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(h.options.projectId,m)})(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),gi($T,zT,e),gi($T,zT,"esm2020")})();function ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hF=ax,lx=new xd("auth","Firebase",ax());const wp=new y_("@firebase/auth");function fF(n,...e){wp.logLevel<=Ge.WARN&&wp.warn(`Auth (${Cu}): ${n}`,...e)}function $f(n,...e){wp.logLevel<=Ge.ERROR&&wp.error(`Auth (${Cu}): ${n}`,...e)}function Br(n,...e){throw hw(n,...e)}function _i(n,...e){return hw(n,...e)}function ux(n,e,t){const r={...hF(),[e]:t};return new xd("auth","Firebase",r).create(e,{appName:n.name})}function wi(n){return ux(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lx.create(n,...e)}function Ve(n,e,...t){if(!n)throw hw(e,...t)}function Ki(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $f(e),new Error(e)}function ns(n,e){n||Ki(e)}function Dv(){return typeof self<"u"&&self.location?.href||""}function pF(){return aS()==="http:"||aS()==="https:"}function aS(){return typeof self<"u"&&self.location?.protocol||null}function mF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pF()||mV()||"connection"in navigator)?navigator.onLine:!0}function gF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class zd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=fV()||gV()}get(){return mF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fw(n,e){ns(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class cx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_F=new zd(3e4,6e4);function us(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function $r(n,e,t,r,i={}){return dx(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=Rd({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...s};return pV()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Eo(n.emulatorConfig.host)&&(h.credentials="include"),cx.fetch()(await hx(n,n.config.apiHost,t,u),h)})}async function dx(n,e,t){n._canInitEmulator=!1;const r={...yF,...e};try{const i=new EF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw _f(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _f(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw _f(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw _f(n,"user-disabled",a);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ux(n,m,h);Br(n,m)}}catch(i){if(i instanceof Pi)throw i;Br(n,"network-request-failed",{message:String(i)})}}async function Wd(n,e,t,r,i={}){const s=await $r(n,e,t,r,i);return"mfaPendingCredential"in s&&Br(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function hx(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?fw(n.config,i):`${n.config.apiScheme}://${i}`;return vF.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function wF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),_F.get())})}}function _f(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=_i(n,e,r);return i.customData._tokenResponse=t,i}function lS(n){return n!==void 0&&n.enterprise!==void 0}class TF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IF(n,e){return $r(n,"GET","/v2/recaptchaConfig",us(n,e))}async function SF(n,e){return $r(n,"POST","/v1/accounts:delete",e)}async function Ep(n,e){return $r(n,"POST","/v1/accounts:lookup",e)}function nd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PF(n,e=!1){const t=gt(n),r=await t.getIdToken(e),i=pw(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:nd(Sy(i.auth_time)),issuedAtTime:nd(Sy(i.iat)),expirationTime:nd(Sy(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Sy(n){return Number(n)*1e3}function pw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $f("JWT malformed, contained fewer than 3 sections"),null;try{const i=_C(t);return i?JSON.parse(i):($f("Failed to decode base64 JWT payload"),null)}catch(i){return $f("Caught error parsing JWT payload as JSON",i?.toString()),null}}function uS(n){const e=pw(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ma(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pi&&CF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function CF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class bF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Nv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tp(n){const e=n.auth,t=await n.getIdToken(),r=await Ma(n,Ep(e,{idToken:t}));Ve(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?fx(i.providerUserInfo):[],a=xF(n.providerData,s),u=n.isAnonymous,d=!(n.email&&i.passwordHash)&&!a?.length,h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Nv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function AF(n){const e=gt(n);await Tp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function RF(n,e){const t=await dx(n,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await hx(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&Eo(n.emulatorConfig.host)&&(d.credentials="include"),cx.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kF(n,e){return $r(n,"POST","/v2/accounts:revokeToken",us(n,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=uS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await RF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Xl;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Ki("not implemented")}}function zs(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ur{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new bF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PF(this,e)}reload(){return AF(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(wi(this.auth));const e=await this.getIdToken();return await Ma(this,SF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:A,stsTokenManager:x}=t;Ve(g&&x,e,"internal-error");const P=Xl.fromJSON(this.name,x);Ve(typeof g=="string",e,"internal-error"),zs(r,e.name),zs(i,e.name),Ve(typeof v=="boolean",e,"internal-error"),Ve(typeof T=="boolean",e,"internal-error"),zs(s,e.name),zs(a,e.name),zs(u,e.name),zs(d,e.name),zs(h,e.name),zs(m,e.name);const j=new Ur({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:T,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:P,createdAt:h,lastLoginAt:m});return A&&Array.isArray(A)&&(j.providerData=A.map(M=>({...M}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Xl;i.updateFromServerResponse(t);const s=new Ur({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Tp(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?fx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Xl;u.updateFromIdToken(r);const d=new Ur({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,h),d}}const cS=new Map;function Qi(n){ns(n instanceof Function,"Expected a class definition");let e=cS.get(n);return e?(ns(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cS.set(n,e),e)}class px{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}px.type="NONE";const dS=px;function zf(n,e,t){return`firebase:${n}:${e}:${t}`}class Jl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zf(this.userKey,i.apiKey,s),this.fullPersistenceKey=zf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ep(this.auth,{idToken:e}).catch(()=>{});return t?Ur._fromGetAccountInfoResponse(this.auth,t,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Jl(Qi(dS),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Qi(dS);const a=zf(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const v=await Ep(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Ur._fromGetAccountInfoResponse(e,v,m)}else g=Ur._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Jl(s,e,r):(s=d[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Jl(s,e,r))}}function hS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wx(e))return"Blackberry";if(Ex(e))return"Webos";if(gx(e))return"Safari";if((e.includes("chrome/")||yx(e))&&!e.includes("edge/"))return"Chrome";if(_x(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function mx(n=ln()){return/firefox\//i.test(n)}function gx(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yx(n=ln()){return/crios\//i.test(n)}function vx(n=ln()){return/iemobile/i.test(n)}function _x(n=ln()){return/android/i.test(n)}function wx(n=ln()){return/blackberry/i.test(n)}function Ex(n=ln()){return/webos/i.test(n)}function mw(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DF(n=ln()){return mw(n)&&!!window.navigator?.standalone}function NF(){return yV()&&document.documentMode===10}function Tx(n=ln()){return mw(n)||_x(n)||Ex(n)||wx(n)||/windows phone/i.test(n)||vx(n)}function Ix(n,e=[]){let t;switch(n){case"Browser":t=hS(ln());break;case"Worker":t=`${hS(ln())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cu}/${r}`}class VF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const d=e(s);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function MF(n,e={}){return $r(n,"GET","/v2/passwordPolicy",us(n,e))}const OF=6;class LF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??OF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class FF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fS(this),this.idTokenSubscription=new fS(this),this.beforeStateQueue=new VF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ep(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(wi(this));const t=e?gt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MF(this),t=new LF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qi(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[Qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ix(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fF(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Co(n){return gt(n)}class fS{constructor(e){this.auth=e,this.observer=null,this.addObserver=IV(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UF(n){wm=n}function Sx(n){return wm.loadJS(n)}function jF(){return wm.recaptchaEnterpriseScript}function BF(){return wm.gapiScript}function $F(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class zF{constructor(){this.enterprise=new WF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class WF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const HF="recaptcha-enterprise",Px="NO_RECAPTCHA";class qF{constructor(e){this.type=HF,this.auth=Co(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{IF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new TF(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,a,u){const d=window.grecaptcha;lS(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(Px)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&lS(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=jF();d.length!==0&&(d+=u),Sx(d).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function pS(n,e,t,r=!1,i=!1){const s=new qF(n);let a;if(i)a=Px;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ip(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await pS(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await pS(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function GF(n,e){const t=Kp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Pa(s,e??{}))return i;Br(i,"already-initialized")}return t.initialize({options:e})}function KF(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function QF(n,e,t){const r=Co(n);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Cx(e),{host:a,port:u}=YF(e),d=u===null?"":`:${u}`,h={url:`${s}//${a}${d}/`},m=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Pa(h,r.config.emulator)&&Pa(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Eo(a)?(m_(`${s}//${a}${d}`),g_("Auth",!0)):XF()}function Cx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function YF(n){const e=Cx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:mS(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:mS(a)}}}function mS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class gw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,t){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}async function JF(n,e){return $r(n,"POST","/v1/accounts:update",e)}async function ZF(n,e){return $r(n,"POST","/v1/accounts:signUp",e)}async function eU(n,e){return Wd(n,"POST","/v1/accounts:signInWithPassword",us(n,e))}async function bx(n,e){return $r(n,"POST","/v1/accounts:sendOobCode",us(n,e))}async function tU(n,e){return bx(n,e)}async function nU(n,e){return bx(n,e)}async function rU(n,e){return Wd(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))}async function iU(n,e){return Wd(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))}class Td extends gw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Td(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Td(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,t,"signInWithPassword",eU);case"emailLink":return rU(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,r,"signUpPassword",ZF);case"emailLink":return iU(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zl(n,e){return Wd(n,"POST","/v1/accounts:signInWithIdp",us(n,e))}const sU="http://localhost";class Oa extends gw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Oa(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Zl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:sU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rd(t)}return e}}function oU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aU(n){const e=Fc(Uc(n)).link,t=e?Fc(Uc(e)).deep_link_id:null,r=Fc(Uc(n)).deep_link_id;return(r?Fc(Uc(r)).link:null)||r||t||e||n}class yw{constructor(e){const t=Fc(Uc(e)),r=t.apiKey??null,i=t.oobCode??null,s=oU(t.mode??null);Ve(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=aU(e);try{return new yw(t)}catch{return null}}}class Du{constructor(){this.providerId=Du.PROVIDER_ID}static credential(e,t){return Td._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=yw.parseLink(t);return Ve(r,"argument-error"),Td._fromEmailAndCode(e,r.code,r.tenantId)}}Du.PROVIDER_ID="password";Du.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Du.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ax{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hd extends Ax{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qs extends Hd{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";class Ys extends Hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ys.credential(t,r)}catch{return null}}}Ys.GOOGLE_SIGN_IN_METHOD="google.com";Ys.PROVIDER_ID="google.com";class Xs extends Hd{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";class Js extends Hd{constructor(){super("twitter.com")}static credential(e,t){return Oa._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Js.credential(t,r)}catch{return null}}}Js.TWITTER_SIGN_IN_METHOD="twitter.com";Js.PROVIDER_ID="twitter.com";async function lU(n,e){return Wd(n,"POST","/v1/accounts:signUp",us(n,e))}class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ur._fromIdTokenResponse(e,r,i),a=gS(r);return new La({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=gS(r);return new La({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function gS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Sp extends Pi{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sp(e,t,r,i)}}function xx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sp._fromErrorAndOperation(n,s,e,r):s})}async function uU(n,e,t=!1){const r=await Ma(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return La._forOperation(n,"link",r)}async function cU(n,e,t=!1){const{auth:r}=n;if(qn(r.app))return Promise.reject(wi(r));const i="reauthenticate";try{const s=await Ma(n,xx(r,i,e,n),t);Ve(s.idToken,r,"internal-error");const a=pw(s.idToken);Ve(a,r,"internal-error");const{sub:u}=a;return Ve(n.uid===u,r,"user-mismatch"),La._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Br(r,"user-mismatch"),s}}async function Rx(n,e,t=!1){if(qn(n.app))return Promise.reject(wi(n));const r="signIn",i=await xx(n,r,e),s=await La._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function dU(n,e){return Rx(Co(n),e)}function hU(n,e,t){Ve(t.url?.length>0,n,"invalid-continue-uri"),Ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Ve(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ve(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ve(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function kx(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fU(n,e,t){const r=Co(n);await Ip(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",nU)}async function pU(n,e,t){if(qn(n.app))return Promise.reject(wi(n));const r=Co(n),a=await Ip(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&kx(n),d}),u=await La._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function mU(n,e,t){return qn(n.app)?Promise.reject(wi(n)):dU(gt(n),Du.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kx(n),r})}async function gU(n,e){const t=gt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&hU(t.auth,i,e);const{email:s}=await tU(t.auth,i);s!==n.email&&await n.reload()}async function yU(n,e){return $r(n,"POST","/v1/accounts:update",e)}async function vU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=gt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Ma(r,yU(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function _U(n,e){const t=gt(n);return qn(t.auth.app)?Promise.reject(wi(t.auth)):Dx(t,e,null)}function wU(n,e){return Dx(gt(n),null,e)}async function Dx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await Ma(n,JF(r,s));await n._updateTokensIfNecessary(a,!0)}function yS(n,e){return gt(n).setPersistence(e)}function EU(n,e,t,r){return gt(n).onIdTokenChanged(e,t,r)}function TU(n,e,t){return gt(n).beforeAuthStateChanged(e,t)}function IU(n,e,t,r){return gt(n).onAuthStateChanged(e,t,r)}function vS(n){return gt(n).signOut()}async function SU(n){return gt(n).delete()}const Pp="__sak";class Nx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pp,"1"),this.storage.removeItem(Pp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const PU=1e3,CU=10;class Vx extends Nx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);NF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,CU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},PU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vx.type="LOCAL";const Mx=Vx;class Ox extends Nx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ox.type="SESSION";const Lx=Ox;function bU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Em(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),d=await bU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Em.receivers=[];function vw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class AU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,d)=>{const h=vw("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Ei(){return window}function xU(n){Ei().location.href=n}function Fx(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function RU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kU(){return navigator?.serviceWorker?.controller||null}function DU(){return Fx()?self:null}const Ux="firebaseLocalStorageDb",NU=1,Cp="firebaseLocalStorage",jx="fbase_key";class qd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tm(n,e){return n.transaction([Cp],e?"readwrite":"readonly").objectStore(Cp)}function VU(){const n=indexedDB.deleteDatabase(Ux);return new qd(n).toPromise()}function Vv(){const n=indexedDB.open(Ux,NU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cp,{keyPath:jx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cp)?e(r):(r.close(),await VU(),e(await Vv()))})})}async function _S(n,e,t){const r=Tm(n,!0).put({[jx]:e,value:t});return new qd(r).toPromise()}async function MU(n,e){const t=Tm(n,!1).get(e),r=await new qd(t).toPromise();return r===void 0?null:r.value}function wS(n,e){const t=Tm(n,!0).delete(e);return new qd(t).toPromise()}const OU=800,LU=3;class Bx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>LU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Em._getInstance(DU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await RU(),!this.activeServiceWorker)return;this.sender=new AU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vv();return await _S(e,Pp,"1"),await wS(e,Pp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_S(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>MU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Tm(i,!1).getAll();return new qd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bx.type="LOCAL";const $x=Bx;new zd(3e4,6e4);function FU(n,e){return e?Qi(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class _w extends gw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UU(n){return Rx(n.auth,new _w(n),n.bypassAuthState)}function jU(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),cU(t,new _w(n),n.bypassAuthState)}async function BU(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),uU(t,new _w(n),n.bypassAuthState)}class zx{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UU;case"linkViaPopup":case"linkViaRedirect":return BU;case"reauthViaPopup":case"reauthViaRedirect":return jU;default:Br(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $U=new zd(2e3,1e4);class Wl extends zx{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wl.currentPopupAction&&Wl.currentPopupAction.cancel(),Wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=vw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$U.get())};e()}}Wl.currentPopupAction=null;const zU="pendingRedirect",Wf=new Map;class WU extends zx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{const r=await HU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HU(n,e){const t=KU(e),r=GU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function qU(n,e){Wf.set(n._key(),e)}function GU(n){return Qi(n._redirectPersistence)}function KU(n){return zf(zU,n.config.apiKey,n.name)}async function QU(n,e,t=!1){if(qn(n.app))return Promise.reject(wi(n));const r=Co(n),i=FU(r,e),a=await new WU(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const YU=600*1e3;class XU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Wx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(_i(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YU&&this.cachedEventUids.clear(),this.cachedEventUids.has(ES(e))}saveEventToCache(e){this.cachedEventUids.add(ES(e)),this.lastProcessedEventTime=Date.now()}}function ES(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Wx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function JU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wx(n);default:return!1}}async function ZU(n,e={}){return $r(n,"GET","/v1/projects",e)}const e4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t4=/^https?/;async function n4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ZU(n);for(const t of e)try{if(r4(t))return}catch{}Br(n,"unauthorized-domain")}function r4(n){const e=Dv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!t4.test(t))return!1;if(e4.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const i4=new zd(3e4,6e4);function TS(){const n=Ei().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function s4(n){return new Promise((e,t)=>{function r(){TS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TS(),t(_i(n,"network-request-failed"))},timeout:i4.get()})}if(Ei().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ei().gapi?.load)r();else{const i=$F("iframefcb");return Ei()[i]=()=>{gapi.load?r():t(_i(n,"network-request-failed"))},Sx(`${BF()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function o4(n){return Hf=Hf||s4(n),Hf}const a4=new zd(5e3,15e3),l4="__/auth/iframe",u4="emulator/auth/iframe",c4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h4(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fw(e,u4):`https://${n.config.authDomain}/${l4}`,r={apiKey:e.apiKey,appName:n.name,v:Cu},i=d4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Rd(r).slice(1)}`}async function f4(n){const e=await o4(n),t=Ei().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:h4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=_i(n,"network-request-failed"),u=Ei().setTimeout(()=>{s(a)},a4.get());function d(){Ei().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(a)})}))}const p4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m4=500,g4=600,y4="_blank",v4="http://localhost";class IS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _4(n,e,t,r=m4,i=g4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...p4,width:r.toString(),height:i.toString(),top:s,left:a},h=ln().toLowerCase();t&&(u=yx(h)?y4:t),mx(h)&&(e=e||v4,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[T,A])=>`${v}${T}=${A},`,"");if(DF(h)&&u!=="_self")return w4(e||"",u),new IS(null);const g=window.open(e||"",u,m);Ve(g,n,"popup-blocked");try{g.focus()}catch{}return new IS(g)}function w4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const E4="__/auth/handler",T4="emulator/auth/handler",I4=encodeURIComponent("fac");async function SS(n,e,t,r,i,s){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Cu,eventId:i};if(e instanceof Ax){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",TV(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Hd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${I4}=${encodeURIComponent(d)}`:"";return`${S4(n)}?${Rd(u).slice(1)}${h}`}function S4({config:n}){return n.emulator?fw(n,T4):`https://${n.authDomain}/${E4}`}const Py="webStorageSupport";class P4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lx,this._completeRedirectFn=QU,this._overrideRedirectResult=qU}async _openPopup(e,t,r,i){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await SS(e,t,r,Dv(),i);return _4(e,s,vw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await SS(e,t,r,Dv(),i);return xU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ns(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await f4(e),r=new XU(e);return t.register("authEvent",i=>(Ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Py,{type:Py},i=>{const s=i?.[0]?.[Py];s!==void 0&&t(!!s),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tx()||gx()||mw()}}const C4=P4;var PS="@firebase/auth",CS="1.12.0";class b4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function A4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x4(n){Ca(new uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Ve(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ix(n)},h=new FF(r,i,s,d);return KF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ca(new uo("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(r=>new b4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(PS,CS,A4(n)),gi(PS,CS,"esm2020")}const R4=300,k4=SC("authIdTokenMaxAge")||R4;let bS=null;const D4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>k4)return;const i=t?.token;bS!==i&&(bS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function N4(n=__()){const e=Kp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=GF(n,{popupRedirectResolver:C4,persistence:[$x,Mx,Lx]}),r=SC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=D4(s.toString());TU(t,a,()=>a(t.currentUser)),EU(t,u=>a(u))}}const i=EC("auth");return i&&QF(t,`http://${i}`),t}function V4(){return document.getElementsByTagName("head")?.[0]??document}UF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=_i("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",V4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x4("Browser");const M4={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},Hx=kC(M4),Ce=X2(Hx),fn=N4(Hx),O4=async()=>{try{await yS(fn,$x)}catch(n){console.warn("IndexedDB persistence unavailable, falling back to local storage.",n);try{await yS(fn,Mx)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}},qx=typeof window<"u"?O4():Promise.resolve();typeof window<"u"&&(Z2(Ce).catch(n=>{n.code==="failed-precondition"?J2(Ce).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):n.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",n):console.error("Unexpected error enabling multi-tab persistence for Firestore.",n)}),qx.catch(n=>{console.error("Unexpected error configuring Firebase Auth persistence.",n)}));const L4=1;let Cy=0;function F4(){return Cy=(Cy+1)%Number.MAX_VALUE,Cy.toString()}const Mn={state:{toasts:[]},listeners:[],getState:()=>Mn.state,setState:n=>{typeof n=="function"?Mn.state=n(Mn.state):Mn.state={...Mn.state,...n},Mn.listeners.forEach(e=>e(Mn.state))},subscribe:n=>(Mn.listeners.push(n),()=>{Mn.listeners=Mn.listeners.filter(e=>e!==n)})},U4=({...n})=>{const e=F4(),t=i=>Mn.setState(s=>({...s,toasts:s.toasts.map(a=>a.id===e?{...a,...i}:a)})),r=()=>Mn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return Mn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:r},...i.toasts].slice(0,L4)})),{id:e,dismiss:r,update:t}};function ww(){const[n,e]=k.useState(Mn.getState());return k.useEffect(()=>Mn.subscribe(r=>{e(r)}),[]),k.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:U4,toasts:n.toasts}}const j4=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"){if(n===1)return!0;if(n===0)return!1}if(typeof n=="string"){const e=n.trim().toLowerCase();if(e==="true")return!0;if(e==="false")return!1}return null},Gx=k.createContext(null),B4=new Set(["estandar"]),AS=n=>n==="conservador"?"estandar":B4.has(n)?n:null,Mv=()=>({calculators:{cpm:!0,t8:!0},postpartum:!1,combineMode:"estandar"}),by=({current:n,incoming:e,legacyCombineMode:t})=>{const r=Mv(),i={calculators:{...r.calculators},postpartum:r.postpartum,combineMode:r.combineMode};let s=!1;const a=u=>{if(!u||typeof u!="object")return;Object.keys(i.calculators).forEach(m=>{typeof u?.calculators?.[m]=="boolean"&&(i.calculators[m]=u.calculators[m])});const d=j4(u.postpartum);d!==null&&(i.postpartum=d);const h=AS(u.combineMode);h&&(i.combineMode=h,s=!0)};if(a(n),a(e),!s){const u=AS(t);u&&(i.combineMode=u)}return i},$4=({children:n})=>{const[e,t]=k.useState(null),[r,i]=k.useState(!0),[s,a]=k.useState(null),{toast:u}=ww();k.useEffect(()=>{let j=null,M=!1;return(async()=>{try{await qx}catch{}M||(j=IU(fn,async B=>{if(B){t({id:B.uid,uid:B.uid,email:B.email,displayName:B.displayName,photoURL:B.photoURL});try{if(navigator?.storage?.persist){const C="rnf_storage_persist_requested_v1";let I=!1;try{I=localStorage.getItem(C)==="1"}catch{}if(!I){try{localStorage.setItem(C,"1")}catch{}await navigator.storage.persist()}}}catch{}const Z=xt(Ce,`users/${B.uid}/preferences`,"display"),re={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Mv()};try{try{const I=await lF(Z);if(I.exists()){const{combineMode:b,fertilityStartConfig:O,...L}=I.data(),U=by({current:re.fertilityStartConfig,incoming:O,legacyCombineMode:b});a({...re,...L,fertilityStartConfig:U})}}catch{}const C=await _m(Z);if(C.exists()){const{combineMode:I,fertilityStartConfig:b,...O}=C.data(),L=by({current:re.fertilityStartConfig,incoming:b,legacyCombineMode:I});a({...re,...O,fertilityStartConfig:L})}else a(re)}catch(C){console.error("Failed to load preferences",C),a(re)}}else t(null),a(null);i(!1)}))})(),()=>{M=!0,j&&j()}},[]);const d=async(j,M)=>{try{await mU(fn,j,M)}catch(D){throw u({title:"Error al iniciar sesin",description:D.message,variant:"destructive"}),D}},h=async(j,M)=>{try{const{user:D}=await pU(fn,j,M),B={url:`${window.location.origin}/auth`};await gU(D,B),await vS(fn)}catch(D){throw u({title:"Error al registrarse",description:D.message,variant:"destructive"}),D}},m=async j=>{try{await fU(fn,j)}catch(M){throw u({title:"Error al restablecer contrasea",description:M.message,variant:"destructive"}),M}},g=async()=>{try{await vS(fn),t(null),a(null)}catch(j){throw u({title:"Error al cerrar sesin",description:j.message,variant:"destructive"}),j}},v=async j=>{if(fn.currentUser)try{await _U(fn.currentUser,j),t(M=>M&&{...M,email:j})}catch(M){throw u({title:"Error al actualizar correo",description:M.message,variant:"destructive"}),M}},T=async j=>{if(fn.currentUser)try{await wU(fn.currentUser,j)}catch(M){throw u({title:"Error al actualizar contrasea",description:M.message,variant:"destructive"}),M}},A=async(j={})=>{if(!fn.currentUser)return;const M=xt(Ce,`users/${fn.currentUser.uid}/preferences`,"display"),{combineMode:D,fertilityStartConfig:B,...Z}=j??{},re=B&&typeof B=="object"||D!==void 0,C=re?by({current:s?.fertilityStartConfig,incoming:B,legacyCombineMode:D}):s?.fertilityStartConfig,I={...Z};re&&C&&(I.fertilityStartConfig=C,I.combineMode=dF());try{await ox(M,I,{merge:!0}),a(b=>{const L={...b??{theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Mv()},...Z};return re&&C&&(L.fertilityStartConfig=C),L})}catch(b){throw console.error("Failed to save preferences",b),u({title:"Error al guardar preferencias",description:b.message,variant:"destructive"}),b}},x=async j=>{if(fn.currentUser)try{await vU(fn.currentUser,j),t(M=>M&&{...M,...j})}catch(M){throw u({title:"Error al actualizar perfil",description:M.message,variant:"destructive"}),M}},P=async()=>{if(fn.currentUser)try{await SU(fn.currentUser),t(null),a(null)}catch(j){throw u({title:"Error al eliminar cuenta",description:j.message,variant:"destructive"}),j}};return K.jsx(Gx.Provider,{value:{user:e,login:d,register:h,logout:g,resetPassword:m,updateEmail:v,updatePassword:T,preferences:s,savePreferences:A,updateProfile:x,deleteAccount:P,loadingAuth:r},children:n})},Im=()=>k.useContext(Gx);function rs(n){"@babel/helpers - typeof";return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rs(n)}function Dn(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Et(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function $t(n){Et(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||rs(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Sm(n,e){Et(2,arguments);var t=$t(n),r=Dn(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function z4(n,e){Et(2,arguments);var t=$t(n).getTime(),r=Dn(e);return new Date(t+r)}var W4={};function Nu(){return W4}function bp(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function st(n){Et(1,arguments);var e=$t(n);return e.setHours(0,0,0,0),e}var H4=864e5;function q4(n,e){Et(2,arguments);var t=st(n),r=st(e),i=t.getTime()-bp(t),s=r.getTime()-bp(r);return Math.round((i-s)/H4)}function Kx(n,e){Et(2,arguments);var t=$t(n),r=$t(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var Ew=6e4,Tw=36e5,G4=1e3;function K4(n){return Et(1,arguments),n instanceof Date||rs(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ln(n){if(Et(1,arguments),!K4(n)&&typeof n!="number")return!1;var e=$t(n);return!isNaN(Number(e))}function xS(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Q4(n,e){Et(2,arguments);var t=$t(n),r=$t(e),i=xS(t,r),s=Math.abs(q4(t,r));t.setDate(t.getDate()-i*s);var a=+(xS(t,r)===-i),u=i*(s-a);return u===0?0:u}function Qx(n,e){Et(2,arguments);var t=Dn(e);return z4(n,-t)}var Y4=864e5;function X4(n){Et(1,arguments);var e=$t(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/Y4)+1}function _u(n){Et(1,arguments);var e=1,t=$t(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Yx(n){Et(1,arguments);var e=$t(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=_u(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=_u(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function J4(n){Et(1,arguments);var e=Yx(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=_u(t);return r}var Z4=6048e5;function Xx(n){Et(1,arguments);var e=$t(n),t=_u(e).getTime()-J4(e).getTime();return Math.round(t/Z4)+1}function Fa(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=Nu(),g=Dn((t=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=$t(n),T=v.getUTCDay(),A=(T<g?7:0)+T-g;return v.setUTCDate(v.getUTCDate()-A),v.setUTCHours(0,0,0,0),v}function Iw(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=$t(n),g=m.getUTCFullYear(),v=Nu(),T=Dn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:v.firstWeekContainsDate)!==null&&r!==void 0?r:(d=v.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setUTCFullYear(g+1,0,T),A.setUTCHours(0,0,0,0);var x=Fa(A,e),P=new Date(0);P.setUTCFullYear(g,0,T),P.setUTCHours(0,0,0,0);var j=Fa(P,e);return m.getTime()>=x.getTime()?g+1:m.getTime()>=j.getTime()?g:g-1}function ej(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=Nu(),g=Dn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),v=Iw(n,e),T=new Date(0);T.setUTCFullYear(v,0,g),T.setUTCHours(0,0,0,0);var A=Fa(T,e);return A}var tj=6048e5;function Jx(n,e){Et(1,arguments);var t=$t(n),r=Fa(t,e).getTime()-ej(t,e).getTime();return Math.round(r/tj)+1}function dt(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var Ws={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return dt(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):dt(r+1,2)},d:function(e,t){return dt(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return dt(e.getUTCHours()%12||12,t.length)},H:function(e,t){return dt(e.getUTCHours(),t.length)},m:function(e,t){return dt(e.getUTCMinutes(),t.length)},s:function(e,t){return dt(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return dt(s,t.length)}},Ol={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nj={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Ws.y(e,t)},Y:function(e,t,r,i){var s=Iw(e,i),a=s>0?s:1-s;if(t==="YY"){var u=a%100;return dt(u,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):dt(a,t.length)},R:function(e,t){var r=Yx(e);return dt(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return dt(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return dt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return dt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return Ws.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return dt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=Jx(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):dt(s,t.length)},I:function(e,t,r){var i=Xx(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):dt(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ws.d(e,t)},D:function(e,t,r){var i=X4(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):dt(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return dt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return dt(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return dt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=Ol.noon:i===0?s=Ol.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=Ol.evening:i>=12?s=Ol.afternoon:i>=4?s=Ol.morning:s=Ol.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Ws.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ws.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):dt(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):dt(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ws.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ws.s(e,t)},S:function(e,t){return Ws.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return kS(a);case"XXXX":case"XX":return ca(a);default:return ca(a,":")}},x:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return kS(a);case"xxxx":case"xx":return ca(a);default:return ca(a,":")}},O:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+RS(a,":");default:return"GMT"+ca(a,":")}},z:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+RS(a,":");default:return"GMT"+ca(a,":")}},t:function(e,t,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return dt(a,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,a=s.getTime();return dt(a,t.length)}};function RS(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+dt(s,2)}function kS(n,e){if(n%60===0){var t=n>0?"-":"+";return t+dt(Math.abs(n)/60,2)}return ca(n,e)}function ca(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=dt(Math.floor(i/60),2),a=dt(i%60,2);return r+s+t+a}var DS=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Zx=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},rj=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return DS(e,t);var a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",DS(i,t)).replace("{{time}}",Zx(s,t))},Ov={p:Zx,P:rj},ij=["D","DD"],sj=["YY","YYYY"];function e1(n){return ij.indexOf(n)!==-1}function t1(n){return sj.indexOf(n)!==-1}function Ap(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var oj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aj=function(e,t,r){var i,s=oj[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Ay(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var lj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},uj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dj={date:Ay({formats:lj,defaultWidth:"full"}),time:Ay({formats:uj,defaultWidth:"full"}),dateTime:Ay({formats:cj,defaultWidth:"full"})},hj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fj=function(e,t,r,i){return hj[e]};function Rc(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var u=n.defaultWidth,d=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[d]||n.values[u]}var h=n.argumentCallback?n.argumentCallback(e):e;return i[h]}}var pj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_j={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},wj=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ej={ordinalNumber:wj,era:Rc({values:pj,defaultWidth:"wide"}),quarter:Rc({values:mj,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Rc({values:gj,defaultWidth:"wide"}),day:Rc({values:yj,defaultWidth:"wide"}),dayPeriod:Rc({values:vj,defaultWidth:"wide",formattingValues:_j,defaultFormattingWidth:"wide"})};function kc(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?Ij(u,function(g){return g.test(a)}):Tj(u,function(g){return g.test(a)}),h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;var m=e.slice(a.length);return{value:h,rest:m}}}function Tj(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function Ij(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function Sj(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var u=e.slice(i.length);return{value:a,rest:u}}}var Pj=/^(\d+)(th|st|nd|rd)?/i,Cj=/\d+/i,bj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Aj={any:[/^b/i,/^(a|c)/i]},xj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rj={any:[/1/i,/2/i,/3/i,/4/i]},kj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Oj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lj={ordinalNumber:Sj({matchPattern:Pj,parsePattern:Cj,valueCallback:function(e){return parseInt(e,10)}}),era:kc({matchPatterns:bj,defaultMatchWidth:"wide",parsePatterns:Aj,defaultParseWidth:"any"}),quarter:kc({matchPatterns:xj,defaultMatchWidth:"wide",parsePatterns:Rj,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kc({matchPatterns:kj,defaultMatchWidth:"wide",parsePatterns:Dj,defaultParseWidth:"any"}),day:kc({matchPatterns:Nj,defaultMatchWidth:"wide",parsePatterns:Vj,defaultParseWidth:"any"}),dayPeriod:kc({matchPatterns:Mj,defaultMatchWidth:"any",parsePatterns:Oj,defaultParseWidth:"any"})},n1={code:"en-US",formatDistance:aj,formatLong:dj,formatRelative:fj,localize:Ej,match:Lj,options:{weekStartsOn:0,firstWeekContainsDate:1}},Fj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Uj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jj=/^'([^]*?)'?$/,Bj=/''/g,$j=/[a-zA-Z]/;function He(n,e,t){var r,i,s,a,u,d,h,m,g,v,T,A,x,P,j,M,D,B;Et(2,arguments);var Z=String(e),re=Nu(),C=(r=(i=t?.locale)!==null&&i!==void 0?i:re.locale)!==null&&r!==void 0?r:n1,I=Dn((s=(a=(u=(d=t?.firstWeekContainsDate)!==null&&d!==void 0?d:t==null||(h=t.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:re.firstWeekContainsDate)!==null&&a!==void 0?a:(g=re.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=Dn((T=(A=(x=(P=t?.weekStartsOn)!==null&&P!==void 0?P:t==null||(j=t.locale)===null||j===void 0||(M=j.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&x!==void 0?x:re.weekStartsOn)!==null&&A!==void 0?A:(D=re.locale)===null||D===void 0||(B=D.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&T!==void 0?T:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var O=$t(n);if(!Ln(O))throw new RangeError("Invalid time value");var L=bp(O),U=Qx(O,L),V={firstWeekContainsDate:I,weekStartsOn:b,locale:C,_originalDate:O},ce=Z.match(Uj).map(function(xe){var Se=xe[0];if(Se==="p"||Se==="P"){var De=Ov[Se];return De(xe,C.formatLong)}return xe}).join("").match(Fj).map(function(xe){if(xe==="''")return"'";var Se=xe[0];if(Se==="'")return zj(xe);var De=nj[Se];if(De)return!(t!=null&&t.useAdditionalWeekYearTokens)&&t1(xe)&&Ap(xe,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&e1(xe)&&Ap(xe,e,String(n)),De(U,xe,C.localize,V);if(Se.match($j))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Se+"`");return xe}).join("");return ce}function zj(n){var e=n.match(jj);return e?e[1].replace(Bj,"'"):n}function Wj(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function NS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Hj(n,e){if(n){if(typeof n=="string")return NS(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?NS(n,e):void 0}}function VS(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Hj(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}function Ee(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lv(n,e){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Lv(n,e)}function tt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Lv(n,e)}function xp(n){return xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xp(n)}function r1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r1=function(){return!!n})()}function qj(n,e){if(e&&(rs(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(n)}function nt(n){var e=r1();return function(){var t,r=xp(n);if(e){var i=xp(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return qj(this,t)}}function Ye(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Gj(n,e){if(rs(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(rs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function i1(n){var e=Gj(n,"string");return rs(e)=="symbol"?e:e+""}function Kj(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,i1(r.key),r)}}function Xe(n,e,t){return e&&Kj(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ye(n,e,t){return(e=i1(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Qj=10,s1=(function(){function n(){Ye(this,n),ye(this,"priority",void 0),ye(this,"subPriority",0)}return Xe(n,[{key:"validate",value:function(t,r){return!0}}]),n})(),Yj=(function(n){tt(t,n);var e=nt(t);function t(r,i,s,a,u){var d;return Ye(this,t),d=e.call(this),d.value=r,d.validateValue=i,d.setValue=s,d.priority=a,u&&(d.subPriority=u),d}return Xe(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,a){return this.setValue(i,s,this.value,a)}}]),t})(s1),Xj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",Qj),ye(Ee(r),"subPriority",-1),r}return Xe(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}}]),t})(s1),ot=(function(){function n(){Ye(this,n),ye(this,"incompatibleTokens",void 0),ye(this,"priority",void 0),ye(this,"subPriority",void 0)}return Xe(n,[{key:"run",value:function(t,r,i,s){var a=this.parse(t,r,i,s);return a?{setter:new Yj(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n})(),Jj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",140),ye(Ee(r),"incompatibleTokens",["R","u","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"});case"GGGGG":return a.era(i,{width:"narrow"});default:return a.era(i,{width:"wide"})||a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,a){return s.era=a,i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),Qt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},hi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yt(n,e){return n&&{value:e(n.value),rest:n.rest}}function Vt(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function fi(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*Tw+s*Ew+a*G4),rest:e.slice(t[0].length)}}function o1(n){return Vt(Qt.anyDigitsSigned,n)}function zt(n,e){switch(n){case 1:return Vt(Qt.singleDigit,e);case 2:return Vt(Qt.twoDigits,e);case 3:return Vt(Qt.threeDigits,e);case 4:return Vt(Qt.fourDigits,e);default:return Vt(new RegExp("^\\d{1,"+n+"}"),e)}}function Rp(n,e){switch(n){case 1:return Vt(Qt.singleDigitSigned,e);case 2:return Vt(Qt.twoDigitsSigned,e);case 3:return Vt(Qt.threeDigitsSigned,e);case 4:return Vt(Qt.fourDigitsSigned,e);default:return Vt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Sw(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function a1(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,a=Math.floor(s/100)*100,u=n>=s%100;i=n+a-(u?100:0)}return t?i:1-i}function l1(n){return n%400===0||n%4===0&&n%100!==0}var Zj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",130),ye(Ee(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="yy"}};switch(s){case"y":return Yt(zt(4,i),u);case"yo":return Yt(a.ordinalNumber(i,{unit:"year"}),u);default:return Yt(zt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a){var u=i.getUTCFullYear();if(a.isTwoDigitYear){var d=a1(a.year,u);return i.setUTCFullYear(d,0,1),i.setUTCHours(0,0,0,0),i}var h=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(h,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),eB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",130),ye(Ee(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return Yt(zt(4,i),u);case"Yo":return Yt(a.ordinalNumber(i,{unit:"year"}),u);default:return Yt(zt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a,u){var d=Iw(i,u);if(a.isTwoDigitYear){var h=a1(a.year,d);return i.setUTCFullYear(h,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Fa(i,u)}var m=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(m,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Fa(i,u)}}]),t})(ot),tB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",130),ye(Ee(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s){return Rp(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,a){var u=new Date(0);return u.setUTCFullYear(a,0,4),u.setUTCHours(0,0,0,0),_u(u)}}]),t})(ot),nB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",130),ye(Ee(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s){return Rp(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,a){return i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),rB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",120),ye(Ee(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"Q":case"QQ":return zt(s.length,i);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});default:return a.quarter(i,{width:"wide",context:"formatting"})||a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),iB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",120),ye(Ee(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"q":case"qq":return zt(s.length,i);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});default:return a.quarter(i,{width:"wide",context:"standalone"})||a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),sB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ye(Ee(r),"priority",110),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"M":return Yt(Vt(Qt.month,i),u);case"MM":return Yt(zt(2,i),u);case"Mo":return Yt(a.ordinalNumber(i,{unit:"month"}),u);case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});default:return a.month(i,{width:"wide",context:"formatting"})||a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),oB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",110),ye(Ee(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"L":return Yt(Vt(Qt.month,i),u);case"LL":return Yt(zt(2,i),u);case"Lo":return Yt(a.ordinalNumber(i,{unit:"month"}),u);case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});default:return a.month(i,{width:"wide",context:"standalone"})||a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot);function aB(n,e,t){Et(2,arguments);var r=$t(n),i=Dn(e),s=Jx(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var lB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",100),ye(Ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"w":return Vt(Qt.week,i);case"wo":return a.ordinalNumber(i,{unit:"week"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a,u){return Fa(aB(i,a,u),u)}}]),t})(ot);function uB(n,e){Et(2,arguments);var t=$t(n),r=Dn(e),i=Xx(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var cB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",100),ye(Ee(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"I":return Vt(Qt.week,i);case"Io":return a.ordinalNumber(i,{unit:"week"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a){return _u(uB(i,a))}}]),t})(ot),dB=[31,28,31,30,31,30,31,31,30,31,30,31],hB=[31,29,31,30,31,30,31,31,30,31,30,31],fB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",90),ye(Ee(r),"subPriority",1),ye(Ee(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"d":return Vt(Qt.date,i);case"do":return a.ordinalNumber(i,{unit:"date"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=l1(a),d=i.getUTCMonth();return u?s>=1&&s<=hB[d]:s>=1&&s<=dB[d]}},{key:"set",value:function(i,s,a){return i.setUTCDate(a),i.setUTCHours(0,0,0,0),i}}]),t})(ot),pB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",90),ye(Ee(r),"subpriority",1),ye(Ee(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"D":case"DD":return Vt(Qt.dayOfYear,i);case"Do":return a.ordinalNumber(i,{unit:"date"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=l1(a);return u?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,a){return i.setUTCMonth(0,a),i.setUTCHours(0,0,0,0),i}}]),t})(ot);function Pw(n,e,t){var r,i,s,a,u,d,h,m;Et(2,arguments);var g=Nu(),v=Dn((r=(i=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:g.weekStartsOn)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&r!==void 0?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=$t(n),A=Dn(e),x=T.getUTCDay(),P=A%7,j=(P+7)%7,M=(j<v?7:0)+A-x;return T.setUTCDate(T.getUTCDate()+M),T}var mB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",90),ye(Ee(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Pw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(ot),gB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",90),ye(Ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"e":case"ee":return Yt(zt(s.length,i),d);case"eo":return Yt(a.ordinalNumber(i,{unit:"day"}),d);case"eee":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Pw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(ot),yB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",90),ye(Ee(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"c":case"cc":return Yt(zt(s.length,i),d);case"co":return Yt(a.ordinalNumber(i,{unit:"day"}),d);case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});default:return a.day(i,{width:"wide",context:"standalone"})||a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Pw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(ot);function vB(n,e){Et(2,arguments);var t=Dn(e);t%7===0&&(t=t-7);var r=1,i=$t(n),s=i.getUTCDay(),a=t%7,u=(a+7)%7,d=(u<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+d),i}var _B=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",90),ye(Ee(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h===0?7:h};switch(s){case"i":case"ii":return zt(s.length,i);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return Yt(a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiii":return Yt(a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Yt(a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);default:return Yt(a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,a){return i=vB(i,a),i.setUTCHours(0,0,0,0),i}}]),t})(ot),wB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",80),ye(Ee(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Sw(a),0,0,0),i}}]),t})(ot),EB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",80),ye(Ee(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Sw(a),0,0,0),i}}]),t})(ot),TB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",80),ye(Ee(r),"incompatibleTokens",["a","b","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Sw(a),0,0,0),i}}]),t})(ot),IB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",70),ye(Ee(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"h":return Vt(Qt.hour12h,i);case"ho":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):!u&&a===12?i.setUTCHours(0,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(ot),SB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",70),ye(Ee(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"H":return Vt(Qt.hour23h,i);case"Ho":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,a){return i.setUTCHours(a,0,0,0),i}}]),t})(ot),PB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",70),ye(Ee(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"K":return Vt(Qt.hour11h,i);case"Ko":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(ot),CB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",70),ye(Ee(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"k":return Vt(Qt.hour24h,i);case"ko":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,a){var u=a<=24?a%24:a;return i.setUTCHours(u,0,0,0),i}}]),t})(ot),bB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",60),ye(Ee(r),"incompatibleTokens",["t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"m":return Vt(Qt.minute,i);case"mo":return a.ordinalNumber(i,{unit:"minute"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCMinutes(a,0,0),i}}]),t})(ot),AB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",50),ye(Ee(r),"incompatibleTokens",["t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s,a){switch(s){case"s":return Vt(Qt.second,i);case"so":return a.ordinalNumber(i,{unit:"second"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCSeconds(a,0),i}}]),t})(ot),xB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",30),ye(Ee(r),"incompatibleTokens",["t","T"]),r}return Xe(t,[{key:"parse",value:function(i,s){var a=function(d){return Math.floor(d*Math.pow(10,-s.length+3))};return Yt(zt(s.length,i),a)}},{key:"set",value:function(i,s,a){return i.setUTCMilliseconds(a),i}}]),t})(ot),RB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",10),ye(Ee(r),"incompatibleTokens",["t","T","x"]),r}return Xe(t,[{key:"parse",value:function(i,s){switch(s){case"X":return fi(hi.basicOptionalMinutes,i);case"XX":return fi(hi.basic,i);case"XXXX":return fi(hi.basicOptionalSeconds,i);case"XXXXX":return fi(hi.extendedOptionalSeconds,i);default:return fi(hi.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(ot),kB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",10),ye(Ee(r),"incompatibleTokens",["t","T","X"]),r}return Xe(t,[{key:"parse",value:function(i,s){switch(s){case"x":return fi(hi.basicOptionalMinutes,i);case"xx":return fi(hi.basic,i);case"xxxx":return fi(hi.basicOptionalSeconds,i);case"xxxxx":return fi(hi.extendedOptionalSeconds,i);default:return fi(hi.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(ot),DB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",40),ye(Ee(r),"incompatibleTokens","*"),r}return Xe(t,[{key:"parse",value:function(i){return o1(i)}},{key:"set",value:function(i,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t})(ot),NB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Ye(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ye(Ee(r),"priority",20),ye(Ee(r),"incompatibleTokens","*"),r}return Xe(t,[{key:"parse",value:function(i){return o1(i)}},{key:"set",value:function(i,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t})(ot),VB={G:new Jj,y:new Zj,Y:new eB,R:new tB,u:new nB,Q:new rB,q:new iB,M:new sB,L:new oB,w:new lB,I:new cB,d:new fB,D:new pB,E:new mB,e:new gB,c:new yB,i:new _B,a:new wB,b:new EB,B:new TB,h:new IB,H:new SB,K:new PB,k:new CB,m:new bB,s:new AB,S:new xB,X:new RB,x:new kB,t:new DB,T:new NB},MB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,OB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LB=/^'([^]*?)'?$/,FB=/''/g,UB=/\S/,jB=/[a-zA-Z]/;function BB(n,e,t,r){var i,s,a,u,d,h,m,g,v,T,A,x,P,j;Et(3,arguments);var M=String(n),D=String(e),B=Nu(),Z=(i=(s=void 0)!==null&&s!==void 0?s:B.locale)!==null&&i!==void 0?i:n1;if(!Z.match)throw new RangeError("locale must contain match property");var re=Dn((a=(u=(d=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&d!==void 0?d:B.firstWeekContainsDate)!==null&&u!==void 0?u:(m=B.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(re>=1&&re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Dn((v=(T=(A=(x=void 0)!==null&&x!==void 0?x:void 0)!==null&&A!==void 0?A:B.weekStartsOn)!==null&&T!==void 0?T:(P=B.locale)===null||P===void 0||(j=P.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&v!==void 0?v:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(D==="")return M===""?$t(t):new Date(NaN);var I={firstWeekContainsDate:re,weekStartsOn:C,locale:Z},b=[new Xj],O=D.match(OB).map(function(se){var oe=se[0];if(oe in Ov){var he=Ov[oe];return he(se,Z.formatLong)}return se}).join("").match(MB),L=[],U=VS(O),V;try{var ce=function(){var oe=V.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&t1(oe)&&Ap(oe,D,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&e1(oe)&&Ap(oe,D,n);var he=oe[0],we=VB[he];if(we){var Me=we.incompatibleTokens;if(Array.isArray(Me)){var Ue=L.find(function(Lt){return Me.includes(Lt.token)||Lt.token===he});if(Ue)throw new RangeError("The format string mustn't contain `".concat(Ue.fullToken,"` and `").concat(oe,"` at the same time"))}else if(we.incompatibleTokens==="*"&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(oe,"` and any other token at the same time"));L.push({token:he,fullToken:oe});var at=we.run(M,oe,Z.match,I);if(!at)return{v:new Date(NaN)};b.push(at.setter),M=at.rest}else{if(he.match(jB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");if(oe==="''"?oe="'":he==="'"&&(oe=$B(oe)),M.indexOf(oe)===0)M=M.slice(oe.length);else return{v:new Date(NaN)}}};for(U.s();!(V=U.n()).done;){var xe=ce();if(rs(xe)==="object")return xe.v}}catch(se){U.e(se)}finally{U.f()}if(M.length>0&&UB.test(M))return new Date(NaN);var Se=b.map(function(se){return se.priority}).sort(function(se,oe){return oe-se}).filter(function(se,oe,he){return he.indexOf(se)===oe}).map(function(se){return b.filter(function(oe){return oe.priority===se}).sort(function(oe,he){return he.subPriority-oe.subPriority})}).map(function(se){return se[0]}),De=$t(t);if(isNaN(De.getTime()))return new Date(NaN);var W=Qx(De,bp(De)),Y={},X=VS(Se),N;try{for(X.s();!(N=X.n()).done;){var z=N.value;if(!z.validate(W,I))return new Date(NaN);var ee=z.set(W,Y,I);Array.isArray(ee)?(W=ee[0],Wj(Y,ee[1])):W=ee}}catch(se){X.e(se)}finally{X.f()}return W}function $B(n){return n.match(LB)[1].replace(FB,"'")}function _e(n,e){var t;Et(1,arguments);var r=Dn((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=qB(n),s;if(i.date){var a=GB(i.date,r);s=KB(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var u=s.getTime(),d=0,h;if(i.time&&(d=QB(i.time),isNaN(d)))return new Date(NaN);if(i.timezone){if(h=YB(i.timezone),isNaN(h))return new Date(NaN)}else{var m=new Date(u+d),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(u+d+h)}var wf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,WB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,HB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qB(n){var e={},t=n.split(wf.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],wf.timeZoneDelimiter.test(e.date)&&(e.date=n.split(wf.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=wf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function GB(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function KB(n,e){if(e===null)return new Date(NaN);var t=n.match(zB);if(!t)return new Date(NaN);var r=!!t[4],i=Dc(t[1]),s=Dc(t[2])-1,a=Dc(t[3]),u=Dc(t[4]),d=Dc(t[5])-1;if(r)return t3(e,u,d)?XB(e,u,d):new Date(NaN);var h=new Date(0);return!ZB(e,s,a)||!e3(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}function Dc(n){return n?parseInt(n):1}function QB(n){var e=n.match(WB);if(!e)return NaN;var t=xy(e[1]),r=xy(e[2]),i=xy(e[3]);return n3(t,r,i)?t*Tw+r*Ew+i*1e3:NaN}function xy(n){return n&&parseFloat(n.replace(",","."))||0}function YB(n){if(n==="Z")return 0;var e=n.match(HB);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return r3(r,i)?t*(r*Tw+i*Ew):NaN}function XB(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var JB=[31,null,31,30,31,30,31,31,30,31,30,31];function u1(n){return n%400===0||n%4===0&&n%100!==0}function ZB(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(JB[e]||(u1(n)?29:28))}function e3(n,e){return e>=1&&e<=(u1(n)?366:365)}function t3(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function n3(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function r3(n,e){return e>=0&&e<=59}const kp=n=>n instanceof Date?n.toISOString():Array.isArray(n)?n.map(e=>kp(e)):n&&typeof n=="object"?Object.entries(n).reduce((e,[t,r])=>(r!==void 0&&(e[t]=kp(r)),e),{}):n;class i3 extends Error{constructor(e,t,r,i,s,a){super(r),this.name="AppError",this.code=e,this.title=t,this.details=i?kp(i):void 0,this.action=s?kp(s):void 0,a!==void 0&&(this.cause=a)}toJSON(){return{code:this.code,title:this.title,message:this.message,details:this.details,action:this.action}}}const pt=(n,e,t,r,i,s)=>new i3(n,e,t,r,i,s),MS=(n,e)=>e?`${n} a ${e}`:`${n} en adelante`,Id=(n,e,t)=>{const r=MS(n?.startDate,n?.endDate);return`El rango ${MS(e,t)} se cruza con el ciclo ${r}. Cambia la fecha para que los ciclos no se superpongan.`},Gd=(n,e)=>{if(!n||!e)return 0;const t=st(_e(n)),r=st(_e(e));return Q4(t,r)+1},Nc=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},qf=(n,e)=>!n||!Array.isArray(n)||!e?[]:[...n].sort((r,i)=>{const s=r.timestamp?_e(r.timestamp):r.iso_date?_e(r.iso_date):0,a=i.timestamp?_e(i.timestamp):i.iso_date?_e(i.iso_date):0;return Kx(s,a)}).map(r=>{const i=Nc(r.temperature_raw),s=Nc(r.temperature_corrected),a=Array.isArray(r.measurements)?r.measurements:[],u=h=>{if(!h)return null;const m=Nc(h.temperature),g=Nc(h.temperature_corrected);return h.use_corrected&&g!==null?g:m!==null?m:g!==null?g:null};let d=Nc(r.temperature_chart);if(d==null&&a.length){const m=a.find(g=>g&&g.selected&&u(g)!==null)||a.find(g=>u(g)!==null);m&&(d=u(m))}return d==null&&(r.use_corrected&&s!==null?d=s:i!==null?d=i:s!==null&&(d=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?He(_e(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?He(_e(r.timestamp),"dd/MM"):r.iso_date?He(_e(r.iso_date),"dd/MM"):"N/A",cycleDay:Gd(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:a,temperature_chart:d,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),s3=async n=>{const e=et(Ce,`users/${n}/cycles`),t=await _t(e);if(t.empty)return null;const r=t.docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.end_date===null||d.end_date===void 0).sort((d,h)=>(h.start_date||"").localeCompare(d.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=et(Ce,`users/${n}/cycles/${i.id}/entries`),u=(await _t(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},o3=async(n,e)=>{const t=et(Ce,`users/${n}/cycles`),i=(await _t(t)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.end_date!==null&&a.end_date!==void 0||e&&a.start_date&&a.start_date<e).sort((a,u)=>(u.start_date||"").localeCompare(a.start_date||""));return await Promise.all(i.map(async a=>{const u=et(Ce,`users/${n}/cycles/${a.id}/entries`),h=(await _t(u)).docs.map(m=>({id:m.id,...m.data()}));return{id:a.id,startDate:a.start_date,endDate:a.end_date,needsCompletion:!a.end_date,ignoredForAutoCalculations:!!a.ignored_auto_calculations,data:h}}))},a3=async(n,e)=>{const t=xt(Ce,`users/${n}/cycles/${e}`),r=await _m(t);if(!r.exists())return null;const i=r.data(),s=et(Ce,`users/${n}/cycles/${e}/entries`),u=(await _t(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},Sd=n=>{if(n.iso_date&&Ln(_e(n.iso_date)))return He(_e(n.iso_date),"yyyy-MM-dd");if(typeof n.timestamp=="string"&&Ln(_e(n.timestamp)))return He(_e(n.timestamp),"yyyy-MM-dd");throw pt("split-invalid-entry","Hay una fecha invlida en un registro","No se pudo mover un registro porque su fecha no tiene un formato vlido. Usa yyyy-MM-dd o una fecha ISO completa.",{entryDate:n?.iso_date??n?.timestamp??null},{label:"Revisar fecha",hint:"Corrige la fecha del registro y vuelve a intentarlo."})},c1=n=>n.map(e=>{const t=e.data(),r=t?.start_date,i=typeof r=="string"?st(_e(r)):null;return{id:e.id,data:t,start:i}}).filter(({start:e})=>e&&Ln(e)).sort((e,t)=>Kx(e.start,t.start)).map(({id:e,data:t})=>({id:e,data:t})),d1=(n,e)=>{const t=n.findIndex(r=>r.id===e);return t===-1?{previous:null,current:null,next:null,nextNext:null}:{previous:t>0?n[t-1]:null,current:n[t],next:t<n.length-1?n[t+1]:null,nextNext:t<n.length-2?n[t+2]:null}},Fv=async({userId:n,fromCycleId:e,toCycleId:t,shouldMoveIsoDate:r,toCycleStartIso:i})=>{if(!n||!e||!t||!i)throw pt("split-invalid-entry","Faltan datos para mover registros","No se pudieron mover los registros porque faltan datos necesarios. Revisa la fecha y vuelve a intentarlo.",{userId:n??null,fromCycleId:e??null,toCycleId:t??null,toCycleStartIso:i??null},{label:"Revisar fecha"});const s=et(Ce,`users/${n}/cycles/${e}/entries`),u=(await _t(s)).docs.map(D=>{const B=D.data(),Z=Sd(B);return{id:D.id,ref:D.ref,data:B,isoDate:Z}}).filter(D=>r(D.isoDate));if(!u.length)return{movedEntries:0};const d=et(Ce,`users/${n}/cycles/${t}/entries`),h=await _t(d),m=new Map;for(const D of h.docs){let B=null;try{B=Sd(D.data())}catch{continue}if(m.has(B))throw pt("split-date-conflict","Hay fechas duplicadas",`Ya existen entradas duplicadas para el da ${B} en el ciclo destino.`,{conflictDate:B},{label:"Eliminar/combinar entradas duplicadas"});m.set(B,{id:D.id,ref:D.ref,data:D.data()})}let g=go(Ce),v=0;const T=async()=>{v>=400&&(await g.commit(),g=go(Ce),v=0)},A=async(D,B)=>{await T(),g.set(D,B),v+=1},x=async(D,B)=>{await T(),g.update(D,B),v+=1},P=async D=>{await T(),g.delete(D),v+=1},j=D=>D==null||typeof D=="string"&&D.trim()==="",M=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const D of u){const B=m.get(D.isoDate),Z=Gd(D.isoDate,i);if(B){const b={cycle_day:Z};for(const U of M){const V=B.data?.[U],ce=D.data?.[U];j(V)&&!j(ce)&&(b[U]=ce)}await x(B.ref,b);const O=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),L=await _t(O);for(const U of L.docs){const V=xt(et(Ce,`users/${n}/cycles/${t}/entries/${B.id}/measurements`));await A(V,U.data()),await P(U.ref)}await P(D.ref);continue}const re=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}`);await A(re,{...D.data,cycle_day:Z});const C=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),I=await _t(C);for(const b of I.docs){const O=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}/measurements/${b.id}`);await A(O,b.data()),await P(b.ref)}await P(D.ref)}return v>0&&await g.commit(),{movedEntries:u.length}},h1=async(n,e,t)=>{if(!n||!e||!t)return;const r=et(Ce,`users/${n}/cycles/${e}/entries`),i=await _t(r);let s=go(Ce),a=0;const u=async()=>{a>=400&&(await s.commit(),s=go(Ce),a=0)},d=async(h,m)=>{await u(),s.update(h,m),a+=1};for(const h of i.docs){const m=h.data();let g=null;try{g=Sd(m)}catch{continue}const v=Gd(g,t);await d(h.ref,{cycle_day:v})}a>0&&await s.commit()},f1=async(n,e,t,r)=>{if(!n||!e||!t||!r)throw pt("split-invalid-entry","Faltan datos para dividir el ciclo","No se pudo dividir el ciclo porque faltan datos requeridos. Revisa la fecha elegida e intntalo de nuevo.",{userId:n??null,previousCycleId:e??null,newCycleId:t??null,startDate:r??null},{label:"Revisar fecha"});const i=_e(r);if(!Ln(i))throw pt("split-invalid-date","La fecha de inicio no es vlida","La fecha ingresada para iniciar el nuevo ciclo no tiene un formato vlido. Usa yyyy-MM-dd o ISO.",{startDate:r},{label:"Revisar fecha"});const s=et(Ce,`users/${n}/cycles/${e}/entries`),u=(await _t(s)).docs.map(D=>{const B=D.data(),Z=Sd(B);return{id:D.id,ref:D.ref,data:B,isoDate:Z}}).filter(D=>_e(D.isoDate)>=i);if(!u.length)return{movedEntries:0};const d=et(Ce,`users/${n}/cycles/${t}/entries`),h=await _t(d),m=new Map;for(const D of h.docs){const B=D.data();let Z=null;try{Z=Sd(B)}catch{continue}if(m.has(Z))throw pt("split-date-conflict","Hay fechas duplicadas",`Ya existen entradas duplicadas para el da ${Z} en el ciclo destino.`,{conflictDate:Z},{label:"Eliminar/combinar entradas duplicadas"});m.set(Z,{id:D.id,ref:D.ref,data:B})}let g=go(Ce),v=0;const T=async()=>{v>=400&&(await g.commit(),g=go(Ce),v=0)},A=async(D,B)=>{await T(),g.set(D,B),v+=1},x=async(D,B)=>{await T(),g.update(D,B),v+=1},P=async D=>{await T(),g.delete(D),v+=1},j=D=>D==null||typeof D=="string"&&D.trim()==="",M=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const D of u){const B=m.get(D.isoDate),Z=Gd(D.isoDate,r);if(B){const b={cycle_day:Z};for(const U of M){const V=B.data?.[U],ce=D.data?.[U];j(V)&&!j(ce)&&(b[U]=ce)}await x(B.ref,b);const O=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),L=await _t(O);for(const U of L.docs){const V=xt(et(Ce,`users/${n}/cycles/${t}/entries/${B.id}/measurements`));await A(V,U.data()),await P(U.ref)}await P(D.ref);continue}const re=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}`);await A(re,{...D.data,cycle_day:Z});const C=et(Ce,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),I=await _t(C);for(const b of I.docs){const O=xt(Ce,`users/${n}/cycles/${t}/entries/${D.id}/measurements/${b.id}`);await A(O,b.data()),await P(b.ref)}await P(D.ref)}return v>0&&await g.commit(),{movedEntries:u.length}},l3=async(n,e,t)=>{if(!n||!t)throw pt("cycle-range-invalid","Faltan datos del ciclo","No se puede iniciar un ciclo nuevo sin la fecha de inicio.",{userId:n??null,startDate:t??null},{label:"Cambiar fecha"});const r=_e(t);if(!Ln(r))throw pt("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela e intntalo de nuevo.",{startDate:t},{label:"Cambiar fecha"});const i=et(Ce,`users/${n}/cycles`),a=(await _t(i)).docs.find(d=>{if(d.id===e)return!1;const h=d.data(),m=h.start_date?_e(h.start_date):null,g=h.end_date?_e(h.end_date):null;if(!m)return!1;const v=g??new Date("9999-12-31");return r>=m&&r<=v});if(a){const d={id:a.id,startDate:a.data().start_date,endDate:a.data().end_date};throw pt("cycle-overlap","Las fechas se superponen",Id(d,t,null),{conflictCycle:d,proposedStart:t,proposedEnd:null},{label:"Cambiar fecha",hint:"Elige una fecha de inicio fuera del rango en conflicto."})}const u=xt(et(Ce,`users/${n}/cycles`));if(await ox(u,{user_id:n,start_date:t,ignored_auto_calculations:!1,end_date:null}),e){await f1(n,e,u.id,t);const d=xt(Ce,`users/${n}/cycles/${e}`),h=He(Sm(st(r),-1),"yyyy-MM-dd");await Va(d,{end_date:h})}return{id:u.id,start_date:t}},u3=async n=>{const e=n.user_id,t=n.timestamp??new Date().toISOString(),r={timestamp:t,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation,mucus_appearance:n.mucus_appearance,fertility_symbol:n.fertility_symbol,observations:n.observations,had_relations:!!(n.had_relations??n.hadRelations??!1),ignored:n.ignored,peak_marker:n.peak_marker??null},i=et(Ce,`users/${e}/cycles`),s=await _t(i),a=_e(t),u=s.docs.filter(h=>{const m=h.data(),g=m.start_date?_e(m.start_date):null,v=m.end_date?_e(m.end_date):null;return g&&a>=g&&(!v||a<=v)});let d=null;if(u.length>1?d=u.sort((h,m)=>{const g=_e(h.data().start_date);return _e(m.data().start_date)-g})[0]:u.length===1&&(d=u[0]),d){const h=await Wc(et(Ce,`users/${e}/cycles/${d.id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=et(Ce,`users/${e}/cycles/${d.id}/entries/${h.id}/measurements`);for(const g of n.measurements)await Wc(m,g)}return{id:h.id}}if(n.cycle_id){const h=await Wc(et(Ce,`users/${e}/cycles/${n.cycle_id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=et(Ce,`users/${e}/cycles/${n.cycle_id}/entries/${h.id}/measurements`);for(const g of n.measurements)await Wc(m,g)}return{id:h.id}}return{id:null}},Ry=async(n,e,t,r)=>{const i=xt(Ce,`users/${n}/cycles/${e}/entries/${t}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],a={};for(const u of s)Object.prototype.hasOwnProperty.call(r,u)&&(a[u]=r[u]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(a.timestamp=r.timestamp),Object.keys(a).length===0)return{id:t};if(await Va(i,a),Array.isArray(r.measurements)&&(r.measurements.length>=2||r.measurements.length===0)){const u=et(Ce,`users/${n}/cycles/${e}/entries/${t}/measurements`),d=await _t(u);if(await Promise.all(d.docs.map(h=>_p(h.ref))),r.measurements.length>=2)for(const h of r.measurements)await Wc(u,h)}return{id:t}},c3=async(n,e,t)=>{try{const r=et(Ce,`users/${n}/cycles/${e}/entries/${t}/measurements`);return(await _t(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error fetching measurements for entry",t,r),[]}},OS=async(n,e,t)=>{await _p(xt(Ce,`users/${n}/cycles/${e}/entries/${t}`))},ky=async(n,e,t,r,i=!1)=>{const s=xt(Ce,`users/${e}/cycles/${n}`),a=await _m(s);if(!a.exists())throw pt("unknown","No se encontr el ciclo","No pudimos actualizar las fechas porque el ciclo ya no existe.",{cycleId:n,userId:e},{label:"Actualizar pantalla"});const u=a.data(),d=t??u.start_date,h=r!==void 0?r:u.end_date,m=d?_e(d):null,g=h?_e(h):null;if(m&&g&&g<m)throw pt("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior a la fecha de inicio. Corrige la fecha final.",{startDate:d,endDate:h,invalidField:"endDate"},{label:"Cambiar fecha"});const v=et(Ce,`users/${e}/cycles`),A=(await _t(v)).docs.find(j=>{if(j.id===n)return!1;const M=j.data(),D=M.start_date?_e(M.start_date):null,B=M.end_date?_e(M.end_date):null;if(!D)return!1;const Z=B??new Date("9999-12-31"),re=g??new Date("9999-12-31");return m<=Z&&D<=re}),x=A?{id:A.id,startDate:A.data().start_date,endDate:A.data().end_date}:null;if(i)return{overlap:x};if(A)throw pt("cycle-overlap","Las fechas se superponen",Id(x,d,h),{conflictCycle:x,proposedStart:d,proposedEnd:h},{label:"Cambiar fecha"});const P={};t!==void 0&&(P.start_date=t),r!==void 0&&(P.end_date=r),await Va(s,P)},d3=async(n,e,t)=>{const r=xt(Ce,`users/${n}/cycles/${e}`);await Va(r,{ignored_auto_calculations:t})},h3=async(n,e,t,r)=>{if(!t)return;const i=st(_e(t));if(!Ln(i))throw pt("cycle-range-invalid","La fecha de fin no es vlida","La fecha de fin no tiene un formato vlido. Corrgela para continuar.",{endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const s=et(Ce,`users/${n}/cycles`),a=await _t(s),u=c1(a.docs),{current:d,next:h,nextNext:m}=d1(u,e);if(!d||!h)return;const g=r||d.data.start_date||null,v=g?st(_e(g)):null;if(v&&i<v)throw pt("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior al inicio del ciclo actual. Corrige la fecha final.",{startDate:g||d.data.start_date||null,endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const T=st(Sm(i,1)),A=He(T,"yyyy-MM-dd");if(m?.data?.start_date){const j=st(_e(m.data.start_date));if(T>=j){const M={id:m.id,startDate:m.data.start_date,endDate:m.data.end_date};throw pt("cycle-overlap","Las fechas se superponen",Id(M,A,h.data.end_date??null),{conflictCycle:M,proposedStart:A,proposedEnd:h.data.end_date??null},{label:"Cambiar fecha"})}}if(h.data.end_date){const j=st(_e(h.data.end_date));if(T>j)throw pt("cycle-range-invalid","Rango de fechas invlido","La fecha de inicio propuesta para el siguiente ciclo queda despus de su fecha de fin. Corrige las fechas.",{nextCycleId:h.id,nextStartDate:A,nextEndDate:h.data.end_date,invalidField:"startDate"},{label:"Cambiar fecha"})}const x=st(_e(h.data.start_date));T>x?await Fv({userId:n,fromCycleId:h.id,toCycleId:e,shouldMoveIsoDate:j=>st(_e(j))<T,toCycleStartIso:g||d.data.start_date}):T<x&&await f1(n,e,h.id,A);const P=xt(Ce,`users/${n}/cycles/${h.id}`);await Va(P,{start_date:A}),await h1(n,h.id,A)},f3=async(n,e,t)=>{if(!t)return;const r=st(_e(t));if(!Ln(r))throw pt("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela para continuar.",{startDate:t,invalidField:"startDate"},{label:"Cambiar fecha"});const i=et(Ce,`users/${n}/cycles`),s=await _t(i),a=c1(s.docs),{previous:u,current:d,next:h}=d1(a,e);if(!d)return;const m=d.data.start_date,g=m?st(_e(m)):null,v=d.data.end_date?st(_e(d.data.end_date)):null;if(u?.data?.start_date){const A=st(_e(u.data.start_date));if(r<=A){const x={id:u.id,startDate:u.data.start_date,endDate:u.data.end_date};throw pt("cycle-overlap","Las fechas se superponen",Id(x,He(r,"yyyy-MM-dd"),d.data.end_date??null),{conflictCycle:x,proposedStart:He(r,"yyyy-MM-dd"),proposedEnd:d.data.end_date??null},{label:"Cambiar fecha"})}}if(h?.data?.start_date){const A=st(_e(h.data.start_date));if(r>=A){const x={id:h.id,startDate:h.data.start_date,endDate:h.data.end_date};throw pt("cycle-overlap","Las fechas se superponen",Id(x,He(r,"yyyy-MM-dd"),d.data.end_date??null),{conflictCycle:x,proposedStart:He(r,"yyyy-MM-dd"),proposedEnd:d.data.end_date??null},{label:"Cambiar fecha"})}}if(v&&r>v)throw pt("cycle-range-invalid","Rango de fechas invlido","La fecha de inicio no puede ser posterior a la fecha de fin del ciclo. Corrige la fecha de inicio.",{startDate:He(r,"yyyy-MM-dd"),endDate:d.data.end_date,invalidField:"startDate"},{label:"Cambiar fecha"});if(u){const A=xt(Ce,`users/${n}/cycles/${u.id}`),x=He(Sm(r,-1),"yyyy-MM-dd");await Va(A,{end_date:x}),g&&r<g?await Fv({userId:n,fromCycleId:u.id,toCycleId:e,shouldMoveIsoDate:P=>st(_e(P))>=r,toCycleStartIso:He(r,"yyyy-MM-dd")}):g&&r>g&&await Fv({userId:n,fromCycleId:e,toCycleId:u.id,shouldMoveIsoDate:P=>st(_e(P))<r,toCycleStartIso:u.data.start_date})}const T=xt(Ce,`users/${n}/cycles/${e}`);await Va(T,{start_date:He(r,"yyyy-MM-dd")}),await h1(n,e,He(r,"yyyy-MM-dd"))},LS=async(n,e)=>{const t=et(Ce,`users/${n}/cycles/${e}/entries`),r=await _t(t);await Promise.all(r.docs.map(i=>_p(i.ref))),await _p(xt(Ce,`users/${n}/cycles/${e}`))},p3=async(n,e)=>{if(!n||!e)throw pt("undo-not-current","No se puede deshacer este ciclo","Faltan datos para deshacer el ciclo actual. Vuelve a abrir el ciclo e intntalo otra vez.",{userId:n??null,currentCycleId:e??null},{label:"Volver al ciclo actual"});const t=xt(Ce,`users/${n}/cycles/${e}`),r=await _m(t);if(!r.exists())throw pt("undo-not-current","No se encontr el ciclo actual","No pudimos deshacer el ciclo porque ya no existe.",{currentCycleId:e},{label:"Actualizar pantalla"});const i=r.data();if(i.end_date!==null&&i.end_date!==void 0)throw pt("undo-not-current","Solo puedes deshacer el ciclo actual","Este ciclo ya est cerrado. Para deshacer, abre el ciclo actual.",{currentCycleId:e,endDate:i.end_date},{label:"Volver al ciclo actual"});if(!i.start_date||!Ln(_e(i.start_date)))throw pt("undo-not-current","No se puede deshacer el ciclo","La fecha de inicio del ciclo actual no es vlida. Corrige la fecha del ciclo actual.",{currentCycleId:e,startDate:i.start_date??null},{label:"Cambiar fecha"});const s=await _t(et(Ce,`users/${n}/cycles`)),a=He(Sm(_e(i.start_date),-1),"yyyy-MM-dd"),u=s.docs.filter(I=>I.id!==e).map(I=>({id:I.id,...I.data()})).filter(I=>I.end_date===a).sort((I,b)=>(b.start_date||"").localeCompare(I.start_date||""));if(!u.length)throw pt("no-previous-cycle","No hay un ciclo anterior para recuperar","No encontramos un ciclo previo que termine justo antes del ciclo actual. Revisa las fechas de tus ciclos.",{currentCycleId:e,expectedPreviousEndDate:a},{label:"Revisar fechas de ciclos"});const d=u[0];if(!d.start_date||!Ln(_e(d.start_date)))throw pt("no-previous-cycle","El ciclo anterior tiene una fecha invlida","No se puede deshacer porque el ciclo anterior tiene una fecha de inicio no vlida.",{previousCycleId:d.id,previousStartDate:d.start_date??null},{label:"Cambiar fecha"});const h=I=>{if(I.iso_date&&Ln(_e(I.iso_date)))return He(_e(I.iso_date),"yyyy-MM-dd");if(typeof I.timestamp=="string"&&Ln(_e(I.timestamp)))return He(_e(I.timestamp),"yyyy-MM-dd");throw pt("split-invalid-entry","Hay una fecha invlida en un registro","No se pudo deshacer porque un registro tiene una fecha invlida. Usa yyyy-MM-dd o ISO.",{entryDate:I?.iso_date??I?.timestamp??null},{label:"Revisar fecha"})},m=I=>{try{return I.iso_date&&Ln(_e(I.iso_date))?He(_e(I.iso_date),"yyyy-MM-dd"):typeof I.timestamp=="string"&&Ln(_e(I.timestamp))?He(_e(I.timestamp),"yyyy-MM-dd"):null}catch{return null}},g=et(Ce,`users/${n}/cycles/${d.id}/entries`),v=await _t(g),T=new Set;v.docs.forEach(I=>{const b=m(I.data());b&&T.add(b)});const A=et(Ce,`users/${n}/cycles/${e}/entries`),P=(await _t(A)).docs.map(I=>{const b=I.data(),O=h(b);if(T.has(O))throw pt("undo-date-conflict","Hay conflicto de fechas al deshacer",`Ya existe una entrada para el da ${O} en el ciclo anterior.`,{conflictDate:O,previousCycleId:d.id},{label:"Eliminar/combinar entradas duplicadas"});return T.add(O),{ref:I.ref,id:I.id,data:b,isoDate:O}});let j=go(Ce),M=0;const D=async()=>{M>=400&&(await j.commit(),j=go(Ce),M=0)},B=async(I,b)=>{await D(),j.set(I,b),M+=1},Z=async I=>{await D(),j.delete(I),M+=1},re=async(I,b)=>{await D(),j.update(I,b),M+=1};for(const I of P){const b=xt(Ce,`users/${n}/cycles/${d.id}/entries/${I.id}`),O=Gd(I.isoDate,d.start_date);await B(b,{...I.data,cycle_day:O});const L=et(Ce,`users/${n}/cycles/${e}/entries/${I.id}/measurements`),U=await _t(L);for(const V of U.docs){const ce=xt(Ce,`users/${n}/cycles/${d.id}/entries/${I.id}/measurements/${V.id}`);await B(ce,V.data()),await Z(V.ref)}await Z(I.ref)}const C=xt(Ce,`users/${n}/cycles/${d.id}`);await re(C,{end_date:null}),await Z(t),M>0&&await j.commit()},m3="RNFApp",g3=1,Dp="cycleData",Cw="cycle-data:",bw=()=>typeof indexedDB<"u",Aw=()=>typeof localStorage<"u",y3=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),v3=()=>new Promise((n,e)=>{const t=indexedDB.open(m3,g3);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(Dp)||r.createObjectStore(Dp)},t.onsuccess=()=>{n(t.result)},t.onerror=()=>{e(t.error)}}),xw=async(n,e)=>{const t=await v3();return new Promise((r,i)=>{const s=t.transaction(Dp,n),a=s.objectStore(Dp),u=e(a);s.oncomplete=()=>{t.close(),r(u?.result)},s.onerror=()=>{t.close(),i(s.error??u?.error)}})},FS=async n=>{if(!n)return null;if(bw())try{return await xw("readonly",t=>t.get(n))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(Aw())try{const e=localStorage.getItem(`${Cw}${n}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},_3=async(n,e)=>{if(!n)return;const t=y3(e);if(bw())try{await xw("readwrite",r=>r.put(t,n));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(Aw())try{localStorage.setItem(`${Cw}${n}`,JSON.stringify(t))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},w3=async n=>{if(n){if(bw())try{await xw("readwrite",e=>e.delete(n))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(Aw())try{localStorage.removeItem(`${Cw}${n}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}};const E3="type.googleapis.com/google.protobuf.Int64Value",T3="type.googleapis.com/google.protobuf.UInt64Value";function p1(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Np(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Np(e));if(typeof n=="function"||typeof n=="object")return p1(n,e=>Np(e));throw new Error("Data cannot be encoded in JSON: "+n)}function wu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case E3:case T3:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>wu(e)):typeof n=="function"||typeof n=="object"?p1(n,e=>wu(e)):n}const Rw="functions";const US={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qn extends Pi{constructor(e,t,r){super(`${Rw}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Qn.prototype)}}function I3(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Vp(n,e){let t=I3(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!US[a])return new Qn("internal","internal");t=US[a],r=a}const u=s.message;typeof u=="string"&&(r=u),i=s.details,i!==void 0&&(i=wu(i))}}catch{}return t==="ok"?null:new Qn(t,r,i)}class S3{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,qn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const Uv="us-central1",P3=/^data: (.*?)(?:\n|$)/;function C3(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Qn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class b3{constructor(e,t,r,i,s=Uv,a=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new S3(e,t,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Uv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function A3(n,e,t){const r=Eo(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(m_(n.emulatorOrigin+"/backends"),g_("Functions",!0))}function x3(n,e,t){const r=i=>k3(n,e,i,{});return r.stream=(i,s)=>N3(n,e,i,s),r}function m1(n){return n.emulatorOrigin&&Eo(n.emulatorOrigin)?"include":void 0}async function R3(n,e,t,r,i){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:m1(i)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function g1(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function k3(n,e,t,r){const i=n._url(e);return D3(n,i,t,r)}async function D3(n,e,t,r){t=Np(t);const i={data:t},s=await g1(n,r),a=r.timeout||7e4,u=C3(a),d=await Promise.race([R3(e,i,s,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!d)throw new Qn("cancelled","Firebase Functions instance was deleted.");const h=Vp(d.status,d.json);if(h)throw h;if(!d.json)throw new Qn("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Qn("internal","Response is missing data field.");return{data:wu(m)}}function N3(n,e,t,r){const i=n._url(e);return V3(n,i,t,r||{})}async function V3(n,e,t,r){t=Np(t);const i={data:t},s=await g1(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r?.signal,credentials:m1(n)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const A=new Qn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const T=Vp(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let u,d;const h=new Promise((v,T)=>{u=v,d=T});r?.signal?.addEventListener("abort",()=>{const v=new Qn("cancelled","Request was cancelled.");d(v)});const m=a.body.getReader(),g=M3(m,u,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:T,done:A}=await v.read();return{value:T,done:A}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:h}}function M3(n,e,t,r){const i=(a,u)=>{const d=a.match(P3);if(!d)return;const h=d[1];try{const m=JSON.parse(h);if("result"in m){e(wu(m.result));return}if("message"in m){u.enqueue(wu(m.message));return}if("error"in m){const g=Vp(0,m);u.error(g),t(g);return}}catch(m){if(m instanceof Qn){u.error(m),t(m);return}}},s=new TextDecoder;return new ReadableStream({start(a){let u="";return d();async function d(){if(r?.aborted){const h=new Qn("cancelled","Request was cancelled");return a.error(h),t(h),Promise.resolve()}try{const{value:h,done:m}=await n.read();if(m){u.trim()&&i(u.trim(),a),a.close();return}if(r?.aborted){const v=new Qn("cancelled","Request was cancelled");a.error(v),t(v),await n.cancel();return}u+=s.decode(h,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&i(v.trim(),a);return d()}catch(h){const m=h instanceof Qn?h:Vp(0,null);a.error(m),t(m)}}},cancel(){return n.cancel()}})}const jS="@firebase/functions",BS="0.13.1";const O3="auth-internal",L3="app-check-internal",F3="messaging-internal";function U3(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider(O3),a=t.getProvider(F3),u=t.getProvider(L3);return new b3(i,s,a,u,r)};Ca(new uo(Rw,e,"PUBLIC").setMultipleInstances(!0)),gi(jS,BS,n),gi(jS,BS,"esm2020")}function j3(n=__(),e=Uv){const r=Kp(gt(n),Rw).getImmediate({identifier:e}),i=TC("functions");return i&&B3(r,...i),r}function B3(n,e,t){A3(gt(n),e,t)}function $3(n,e,t){return x3(gt(n),e)}U3();const z3=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=r,t.setPlatform=i,t},W3=n=>n.CapacitorPlatforms=z3(n),y1=W3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});y1.addPlatform;y1.setPlatform;var Eu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Eu||(Eu={}));class Dy extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const H3=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},q3=n=>{var e,t,r,i,s;const a=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},d=u.Plugins=u.Plugins||{},h=n.CapacitorPlatforms,m=()=>a!==null?a.name:H3(n),g=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||m,v=()=>g()!=="web",T=((t=h?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||v,A=C=>{const I=B.get(C);return!!(I?.platforms.has(g())||j(C))},x=((r=h?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||A,P=C=>{var I;return(I=u.PluginHeaders)===null||I===void 0?void 0:I.find(b=>b.name===C)},j=((i=h?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||P,M=C=>n.console.error(C),D=(C,I,b)=>Promise.reject(`${b} does not have an implementation of "${I}".`),B=new Map,Z=(C,I={})=>{const b=B.get(C);if(b)return console.warn(`Capacitor plugin "${C}" already registered. Cannot register plugins twice.`),b.proxy;const O=g(),L=j(C);let U;const V=async()=>(!U&&O in I?U=typeof I[O]=="function"?U=await I[O]():U=I[O]:a!==null&&!U&&"web"in I&&(U=typeof I.web=="function"?U=await I.web():U=I.web),U),ce=(X,N)=>{var z,ee;if(L){const se=L?.methods.find(oe=>N===oe.name);if(se)return se.rtype==="promise"?oe=>u.nativePromise(C,N.toString(),oe):(oe,he)=>u.nativeCallback(C,N.toString(),oe,he);if(X)return(z=X[N])===null||z===void 0?void 0:z.bind(X)}else{if(X)return(ee=X[N])===null||ee===void 0?void 0:ee.bind(X);throw new Dy(`"${C}" plugin is not implemented on ${O}`,Eu.Unimplemented)}},xe=X=>{let N;const z=(...ee)=>{const se=V().then(oe=>{const he=ce(oe,X);if(he){const we=he(...ee);return N=we?.remove,we}else throw new Dy(`"${C}.${X}()" is not implemented on ${O}`,Eu.Unimplemented)});return X==="addListener"&&(se.remove=async()=>N()),se};return z.toString=()=>`${X.toString()}() { [capacitor code] }`,Object.defineProperty(z,"name",{value:X,writable:!1,configurable:!1}),z},Se=xe("addListener"),De=xe("removeListener"),W=(X,N)=>{const z=Se({eventName:X},N),ee=async()=>{const oe=await z;De({eventName:X,callbackId:oe},N)},se=new Promise(oe=>z.then(()=>oe({remove:ee})));return se.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ee()},se},Y=new Proxy({},{get(X,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?W:Se;case"removeListener":return De;default:return xe(N)}}});return d[C]=Y,B.set(C,{name:C,proxy:Y,platforms:new Set([...Object.keys(I),...L?[O]:[]])}),Y},re=((s=h?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||Z;return u.convertFileSrc||(u.convertFileSrc=C=>C),u.getPlatform=g,u.handleError=M,u.isNativePlatform=T,u.isPluginAvailable=x,u.pluginMethodNoop=D,u.registerPlugin=re,u.Exception=Dy,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},G3=n=>n.Capacitor=q3(n),yo=G3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),v1=yo.registerPlugin;yo.Plugins;class _1{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new yo.Exception(e,Eu.Unimplemented)}unavailable(e="not available"){return new yo.Exception(e,Eu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const $S=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),zS=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class K3 extends _1{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=zS(i).trim(),s=zS(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=$S(e.key),r=$S(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}v1("CapacitorCookies",{web:()=>new K3});const Q3=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),Y3=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=n[e[a]],i),{})},X3=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[s,a]=i;let u,d;return Array.isArray(a)?(d="",a.forEach(h=>{u=e?encodeURIComponent(h):h,d+=`${s}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(a):a,d=`${s}=${u}`),`${r}&${d}`},"").substr(1):null,J3=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=Y3(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.data||{}))s.set(a,u);t.body=s.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{s.append(d,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Z3 extends _1{async request(e){const t=J3(e,e.webFetchExtra),r=X3(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let d,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),d=await Q3(h);break;case"json":d=await s.json();break;default:d=await s.text()}const m={};return s.headers.forEach((g,v)=>{m[v]=g}),{data:d,headers:m,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}v1("CapacitorHttp",{web:()=>new Z3});const e6=n=>{if(!n)return null;const e=n.unit,t=Number(n.value);return Number.isFinite(t)?e==="fahrenheit"?(t-32)/1.8:t:null},Gf=["BasalBodyTemperature"],t6=["BasalBodyTemperature","READ_BASAL_BODY_TEMPERATURE","android.permission.health.READ_BASAL_BODY_TEMPERATURE"],WS=n=>String(n||"").toLowerCase().replace(/^android\.permission\.health\./,"").replace(/^read_/,"").replace(/[^a-z0-9]/g,""),n6=n=>{try{const e=new WeakSet;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r},2)}catch{try{return String(n)}catch{return"[Unstringifiable]"}}},r6=(n,e)=>{const t=e&&typeof e=="object"?Object.keys(e):[];console.warn(`${n} keys=${t.join(",")}
${n6(e)}`)},kw=n=>typeof n=="string"?n:n?.availability??n?.value??n?.status,jv=n=>{if(n?.allPermissionsGranted===!0)return!0;const e=n?.permissionResults,t=n?.permissions?.read??n?.readPermissions??e?.read??(Array.isArray(e)?e:null)??n?.read,r=t6.map(WS),i=a=>r.includes(WS(a));if(n===!0||n?.hasAllPermissions===!0)return!0;const s=n?.grantedPermissions??n?.permissionsGranted;return Array.isArray(s)&&s.every(a=>typeof a=="string")?s.some(i):Array.isArray(t)&&t.every(a=>typeof a=="string")?t.some(i):Array.isArray(t)&&t.every(a=>typeof a=="boolean")?t.every(Boolean):Array.isArray(t)&&t.every(a=>a&&typeof a=="object")?t.some(a=>{const u=a.permission??a.name??a.type??a.recordType??a.value,d=a.granted??a.allowed??a.isGranted??a.status;return i(u)&&!!d}):t&&typeof t=="object"?Object.entries(t).some(([a,u])=>{const d=typeof u=="boolean"?u:!!(u?.granted??u?.allowed??u?.value??u?.status);return i(a)&&d}):(r6("[HealthConnect] Unexpected permission response shape",n),!1)};async function i6(){if(!yo.isNativePlatform())return{isAvailable:!1,hasPermissions:!1,availability:"NotNative"};const{HealthConnect:n}=await Si(async()=>{const{HealthConnect:i}=await import("./index-Be4uOk1v.js");return{HealthConnect:i}},[]),e=await n.checkAvailability(),t=kw(e);if(t!=="Available")return{isAvailable:!1,hasPermissions:!1,availability:t};const r=await n.checkHealthPermissions({read:Gf,write:[]});return{isAvailable:!0,hasPermissions:jv(r),availability:t}}async function s6(){const{HealthConnect:n}=await Si(async()=>{const{HealthConnect:s}=await import("./index-Be4uOk1v.js");return{HealthConnect:s}},[]),e=await n.checkAvailability(),t=kw(e);if(t!=="Available")throw new Error(`HEALTH_CONNECT_${t||"Unknown"}`);const r=await n.checkHealthPermissions({read:Gf,write:[]});if(jv(r))return!0;await n.requestHealthPermissions({read:Gf,write:[]});const i=await n.checkHealthPermissions({read:Gf,write:[]});return jv(i)}async function o6({startDate:n}){if(!yo.isNativePlatform())throw new Error("HEALTH_CONNECT_ONLY_IN_APP");const{HealthConnect:e}=await Si(async()=>{const{HealthConnect:m}=await import("./index-Be4uOk1v.js");return{HealthConnect:m}},[]),t=await e.checkAvailability(),r=kw(t);if(r!=="Available")throw new Error(`HEALTH_CONNECT_${r||"Unknown"}`);if(!await s6())throw new Error("HEALTH_CONNECT_PERMISSION_DENIED");const s=_e(n);if(!n||Number.isNaN(s?.getTime?.()))throw new Error("HEALTH_CONNECT_INVALID_START_DATE");const a=st(s),u=new Date;return((await e.readRecords({type:"BasalBodyTemperature",timeRangeFilter:{type:"between",startTime:a,endTime:u},ascendingOrder:!0,pageSize:500}))?.records||[]).map(m=>{const g=e6(m.temperature);if(g==null)return null;const v=new Date(m.time);return{externalId:m?.metadata?.id||null,dataOrigin:m?.metadata?.dataOrigin||null,timestampMs:v.getTime(),timestamp:He(v,"yyyy-MM-dd'T'HH:mm:ssXXX"),localDate:He(v,"yyyy-MM-dd"),time:He(v,"HH:mm"),temperatureC:Number(g.toFixed(2))}}).filter(Boolean)}const w1=k.createContext(null),sa={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1},Ny=(n,e)=>{if(!e)return n;const t=st(_e(e));return n.filter(r=>_e(r.isoDate)<=t)},Vy=(n,e)=>{if(!e)return n;const t=st(_e(e));return n.filter(r=>_e(r.isoDate)>=t)},Ef=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},a6=n=>{if(!n)return!1;const e=n.temperature,t=n.temperature_corrected,r=e==null?"":String(e).trim(),i=t==null?"":String(t).trim();return r!==""||i!==""},HS=n=>n?typeof n=="string"?He(st(_e(n)),"yyyy-MM-dd"):typeof n.toDate=="function"?He(st(n.toDate()),"yyyy-MM-dd"):He(st(new Date(n)),"yyyy-MM-dd"):null,My=(n,e)=>{const t=HS(n),r=HS(e);return t&&r&&_e(r)<_e(t)?{startDate:r,endDate:t}:{startDate:t,endDate:r}},l6=({payload:n,entryId:e,isoDate:t,cycleStartDate:r,existingEntry:i})=>{const s={id:e,iso_date:t,timestamp:n.timestamp,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation??null,mucus_appearance:n.mucus_appearance??null,fertility_symbol:n.fertility_symbol??null,observations:n.observations??null,had_relations:n.had_relations??!1,ignored:n.ignored??!1,peak_marker:n.peak_marker??null,measurements:n.measurements??(Array.isArray(i?.measurements)?i.measurements:[])},a=r?qf([s],r):[];return a.length?{...i,...a[0],measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}:{...i,...s,isoDate:t,measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}},u6=n=>[...n].sort((e,t)=>{const r=e.timestamp?_e(e.timestamp):e.isoDate?_e(e.isoDate):0,i=t.timestamp?_e(t.timestamp):t.isoDate?_e(t.isoDate):0;return r>i?1:r<i?-1:0}),c6=({children:n})=>{const{user:e}=Im(),{toast:t}=ww(),[r,i]=k.useState(sa),[s,a]=k.useState([]),[u,d]=k.useState(!0),h=k.useRef(!1),m=k.useRef(null),g=k.useCallback(()=>{i(sa),a([]),d(!1),h.current=!1},[]),v=k.useCallback(async({silent:W=!1}={})=>{if(!e?.uid){const z=m.current;m.current=null,z&&w3(z).catch(ee=>console.error("Failed to clear cached cycle data on sign-out.",ee)),g();return}m.current=e.uid;let Y=!1;if(!h.current)try{const z=await FS(e.uid);z&&(i(z.currentCycle??sa),a(z.archivedCycles??[]),h.current=!0,Y=!0,W||d(!1))}catch(z){console.error("Failed to hydrate cycle data from cache.",z)}const X=!W&&!Y&&!h.current;if(X&&d(!0),typeof navigator<"u"&&navigator.onLine===!1&&(Y||h.current)){W||d(!1);return}try{const z=await s3(e.uid);let ee=sa;if(z){const{startDate:he,endDate:we}=My(z.startDate,z.endDate),Me=qf(z.data,he),Ue=Vy(Me,he),at=Ny(Ue,we);ee={...z,startDate:he,endDate:we,data:at}}const oe=(await o3(e.uid,z?z.startDate:null)).map(he=>{const{startDate:we,endDate:Me}=My(he.startDate,he.endDate),Ue=qf(he.data||[],we),at=Vy(Ue,we),Lt=Ny(at,Me);return{...he,startDate:we??He(st(new Date),"yyyy-MM-dd"),endDate:Me,needsCompletion:he.needsCompletion,data:Lt}});i(ee),a(oe),await _3(e.uid,{currentCycle:ee,archivedCycles:oe}),h.current=!0}catch(z){if(console.error("Error in loadCycleData:",z),z.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!Y)try{const ee=await FS(e.uid);ee?(i(ee.currentCycle??sa),a(ee.archivedCycles??[]),h.current=!0):(i(sa),a([]),h.current=!1)}catch(ee){console.error("Failed to recover cycle data from cache after error.",ee),i(sa),a([]),h.current=!1}}finally{X&&d(!1)}},[e,g]);k.useEffect(()=>{if(!e?.uid){g();return}v().catch(W=>console.error("Initial cycle data load failed:",W))},[e?.uid,v,g]);const T=k.useCallback((W,Y,X,N,{remove:z=!1}={})=>{const ee=se=>{if(!se||se.id!==W)return se;const oe=Array.isArray(se.data)?se.data:[];if(z)return{...se,data:oe.filter(Ue=>Ue.id!==Y)};const he=oe.find(Ue=>Ue.id===Y)||null,we=l6({payload:X,entryId:Y,isoDate:N,cycleStartDate:se.startDate,existingEntry:he}),Me=he?oe.map(Ue=>Ue.id===Y?we:Ue):u6([...oe,we]);return{...se,data:Me}};i(se=>ee(se)),a(se=>se.map(oe=>ee(oe)))},[]),A=k.useCallback((W,Y,X)=>{const N=z=>{if(!z||z.id!==W)return z;const se=(Array.isArray(z.data)?z.data:[]).map(oe=>oe.id===Y?{...oe,measurements:X,measurementsLoaded:!0}:oe);return{...z,data:se}};i(z=>N(z)),a(z=>z.map(ee=>N(ee)))},[]),x=k.useCallback(async(W,Y,X=null)=>{const N=X??r.id;if(!e?.uid||!N)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");d(!0);try{const z=N===r.id?r:s.find(ut=>ut.id===N);let ee=Y;!ee&&z&&(ee=z.data.find(ut=>ut.isoDate===W.isoDate)),ee&&String(ee.id).startsWith("placeholder-")&&(ee=null);const se=z?.data?.find(ut=>ut?.peak_marker==="peak")||null;W.peak_marker==="peak"&&se&&se.id!==ee?.id&&await Ry(e.uid,N,se.id,{peak_marker:null});const oe=Array.isArray(W.measurements)?W.measurements:[],he=oe.filter(a6),we=he.find(ut=>ut?.selected)||he[0]||null,Me=oe.find(ut=>ut?.time&&String(ut.time).trim()!=="")||we,Ue=(()=>{if(Me?.time&&String(Me.time).trim()!=="")return Me.time;if(ee?.timestamp)try{return He(_e(ee.timestamp),"HH:mm")}catch{return He(new Date,"HH:mm")}return He(new Date,"HH:mm")})(),at=BB(`${W.isoDate} ${Ue}`,"yyyy-MM-dd HH:mm",new Date),Lt=Ef(we?.temperature),zr=Ef(we?.temperature_corrected),Pr=!!we?.use_corrected&&zr!==null,cs=Pr?zr:Lt,Ao=Object.prototype.hasOwnProperty.call(W,"peak_marker"),ds=he.some(ut=>{if(!ut)return!1;const Hr=Ef(ut.temperature),ps=Ef(ut.temperature_corrected);return Hr!==null||ps!==null}),Cr=ut=>ut==null?"":String(ut).trim(),xo=Cr(W.mucusSensation??W.mucus_sensation??""),Ft=Cr(W.mucusAppearance??W.mucus_appearance??""),Rt=Cr(W.observations??""),En=W.fertility_symbol??W.fertilitySymbol??null,Ro=En!=null&&En!==""&&En!=="none",hs=!!(W.had_relations??W.hadRelations??!1),ko=W.peak_marker==="peak",br=!ds&&xo===""&&Ft===""&&!Ro&&Rt===""&&!hs&&!ko,Do=!!ee?.measurementsLoaded&&Array.isArray(ee?.measurements)&&ee.measurements.length>=2,fs=he.length>=2,Wr=Do&&he.length<2,qa=Array.isArray(W.measurements)?fs?he:Wr?[]:void 0:void 0,Xn={cycle_id:N,user_id:e.uid,timestamp:He(at,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:qa,mucus_sensation:W.mucusSensation||null,mucus_appearance:W.mucusAppearance||null,fertility_symbol:W.fertility_symbol==="none"?null:W.fertility_symbol,observations:W.observations||null,had_relations:hs,ignored:ee?W.ignored??ee.ignored:W.ignored||!1,peak_marker:Ao?W.peak_marker??null:ee?.peak_marker??null,temperature_raw:Lt,temperature_corrected:zr,use_corrected:Pr,temperature_chart:cs};let fr=ee?.id??null;if(ee){const ut=Ao&&ee?.peak_marker==="peak"&&!ko;br&&ut?(await OS(e.uid,N,ee.id),T(N,ee.id,Xn,W.isoDate,{remove:!0})):(await Ry(e.uid,N,ee.id,Xn),T(N,ee.id,Xn,W.isoDate))}else{if(br)return;fr=(await u3(Xn))?.id??null,fr&&T(N,fr,Xn,W.isoDate)}v({silent:!0}).catch(ut=>console.error("Background cycle data refresh failed after save:",ut))}catch(z){throw console.error("Error adding/updating data point:",z),z}finally{d(!1)}},[e,r,s,v,T]),P=k.useCallback(async(W,Y)=>{if(!e?.uid||!W||!Y)return[];const X=await c3(e.uid,W,Y);return A(W,Y,X),X},[e,A]),j=k.useCallback(async(W,Y=null)=>{const X=Y??r.id;if(!(!e?.uid||!X)){d(!0);try{await OS(e.uid,X,W),await v({silent:!0})}catch(N){throw console.error("Error deleting record:",N),N}finally{d(!1)}}},[e,r.id,v]),M=k.useCallback(async(W,Y)=>{if(!e?.uid)return;const X=W===r.id,N=X?r:s.find(oe=>oe.id===W);if(!N)throw new Error("Cycle not found for toggling ignore state.");const z=N.data?.find(oe=>oe.id===Y);if(!z)throw new Error("Record not found for toggling ignore state.");const ee=!z.ignored,se=oe=>{X?i(he=>he.id!==W?he:{...he,data:he.data.map(we=>we.id===Y?{...we,ignored:oe}:we)}):a(he=>he.map(we=>we.id!==W?we:{...we,data:(we.data||[]).map(Me=>Me.id===Y?{...Me,ignored:oe}:Me)}))};try{se(ee),await Ry(e.uid,W,Y,{ignored:ee}),v({silent:!0}).catch(oe=>console.error("Background cycle data refresh failed after toggling ignore state:",oe))}catch(oe){throw console.error("Error toggling ignore state:",oe),se(!ee),oe}},[e,r,s,v]),D=k.useCallback(async(W,Y)=>{if(!e?.uid||!W)return;const X=r,N=s,z=ee=>!ee||ee.id!==W||ee.ignoredForAutoCalculations===Y?ee:{...ee,ignoredForAutoCalculations:Y};i(ee=>z(ee)),a(ee=>ee.map(se=>z(se)));try{await d3(e.uid,W,Y),v({silent:!0}).catch(ee=>console.error("Background cycle data refresh failed after updating ignore configuration:",ee))}catch(ee){throw console.error("Error updating cycle ignore configuration:",ee),i(X),a(N),t({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),ee}},[e,r,s,v,t]),B=k.useCallback(async W=>{if(e?.uid){d(!0);try{const Y=st(W?_e(W):new Date);if(r.id&&W){const z=st(_e(r.startDate));if(Y<=z){t({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),d(!1);return}}const X=He(Y,"yyyy-MM-dd"),N=await l3(e.uid,r.id,X);i({id:N.id,startDate:N.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await v({silent:!0})}catch(Y){console.error("Error starting new cycle:",Y);const X=z=>{try{return He(_e(z),"dd/MM/yyyy")}catch{return z}},N=(()=>{if(Y?.code==="cycle-overlap"){const z=Y?.conflictCycle;if(!z)return"Las fechas coinciden con otro ciclo.";const ee=z.startDate?X(z.startDate):"sin fecha de inicio",se=z.endDate?X(z.endDate):"en curso";return`Las fechas coinciden con el ciclo del ${ee} al ${se}.`}return Y?.code==="split-date-conflict"?`No se pudo dividir el ciclo porque el ciclo nuevo ya tiene ms de un registro en ${Y?.conflictDate?X(Y.conflictDate):"esa fecha"}. Esto suele venir de datos duplicados (por ejemplo, creados desde otra sesin o por un estado inconsistente).`:Y?.code==="split-invalid-entry"?"No se pudo dividir el ciclo porque hay registros con fecha invlida en el ciclo anterior.":Y?.code==="split-invalid-date"?"La fecha elegida para iniciar el ciclo no es vlida.":"No se pudo iniciar el nuevo ciclo."})();throw t({title:"Error",description:N,variant:"destructive"}),Y}finally{d(!1)}}},[e,r,v,t]),Z=k.useCallback(W=>{if(!W)return"Las fechas coinciden con otro ciclo.";const{startDate:Y,endDate:X}=W,N=se=>{if(!se)return null;try{return He(_e(se),"dd/MM/yyyy")}catch(oe){return console.error("Failed to format overlap date",oe),se}},z=N(Y)??"sin fecha de inicio",ee=X?N(X):"en curso";return`Las fechas coinciden con el ciclo del ${z} al ${ee}.`},[]),re=k.useCallback((W,Y)=>{const X=W?.conflictCycle??W?.details?.conflictCycle;return W?.code==="cycle-overlap"?Z(X):typeof W?.message=="string"&&W.message.trim()?W.message:Y},[Z]),C=k.useCallback(async(W,Y)=>{if(e?.uid){if(!Y){t({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}d(!0);try{const X=await createNewCycleDB(e.uid,W);try{await ky(X.id,e.uid,void 0,Y)}catch(N){try{await LS(e.uid,X.id)}catch(z){console.error("Failed to clean up cycle after overlap error:",z)}throw N}await v({silent:!0})}catch(X){console.error("Error adding archived cycle:",X);const N=re(X,"No se pudo crear el ciclo.");throw t({title:"Error",description:N,variant:"destructive"}),X}finally{d(!1)}}},[e,v,t,re]),I=k.useCallback(async W=>{if(e?.uid){d(!0);try{await LS(e.uid,W),await v({silent:!0})}catch(Y){throw console.error("Error deleting cycle:",Y),t({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),Y}finally{d(!1)}}},[e,v,t]),b=k.useCallback(async W=>{if(!(!e?.uid||!W)){d(!0);try{await p3(e.uid,W),await v({silent:!0})}catch(Y){console.error("Error undoing current cycle:",Y);const X=(()=>{switch(Y.code){case"no-previous-cycle":return"No hay un ciclo previo compatible para deshacer.";case"undo-not-current":return"Solo se puede deshacer el ciclo actual.";case"undo-invalid-entry":return"Hay registros con fecha invlida en el ciclo actual.";case"undo-date-conflict":if(typeof Y?.conflictDate=="string")try{const N=_e(Y.conflictDate);if(Ln(N))return`El da ${He(N,"dd/MM")} tiene un registro en el ciclo anterior.`}catch{}return"El ciclo anterior ya tiene registros en una de las fechas.";default:return"No se pudo deshacer el ciclo."}})();throw t({title:"Error",description:X,variant:"destructive"}),Y}finally{d(!1)}}},[e,v,t]),O=k.useCallback(async(W,Y,X)=>{if(!e?.uid)return null;try{return(await ky(W,e.uid,Y,X,!0)).overlap}catch(N){return console.error("Error checking cycle overlap:",N),null}},[e]),L=k.useCallback(async(W,Y,X)=>{if(!e?.uid)return;const N=r?.id===W?r:s.find(he=>he.id===W),z=N?.startDate??null,ee=N?.endDate??null,se=Y!==void 0&&Y!==z,oe=X!==void 0&&X!==ee;d(!0);try{if(se&&Y&&await f3(e.uid,W,Y),oe&&X){const he=se?Y:z;await h3(e.uid,W,X,he)}(se||oe)&&await ky(W,e.uid,se?Y:void 0,oe?X:void 0),await v({silent:!0})}catch(he){console.error("Error updating cycle dates:",he);const we=re(he,"No se pudieron actualizar las fechas.");throw t({title:"Error",description:we,variant:"destructive"}),he}finally{d(!1)}},[e,r,s,v,t,re]),U=k.useCallback((W,Y)=>L(W,Y,void 0),[L]),V=k.useCallback((W,Y,X)=>L(W,X,Y),[L]),ce=k.useCallback(async W=>{if(!e?.uid)return null;d(!0);try{const Y=await a3(e.uid,W);if(!Y)return null;const{startDate:X,endDate:N}=My(Y.startDate,Y.endDate),z=qf(Y.data||[],X),ee=Vy(z,X),se=Ny(ee,N);return{...Y,startDate:X??He(st(new Date),"yyyy-MM-dd"),endDate:N,data:se}}catch(Y){return console.error("Error fetching cycle by ID:",Y),null}finally{d(!1)}},[e]),xe=k.useCallback(({silent:W=!0}={})=>v({silent:W}),[v]),Se=k.useCallback(async()=>{if(!e?.uid)throw new Error("NO_USER");if(!r?.id||!r?.startDate)throw new Error("NO_CURRENT_CYCLE");d(!0);try{const W=await o6({startDate:r.startDate});if(!W.length){t({title:"Sin registros",description:"No se encontraron temperaturas en Health Connect."});return}const Y=j3(),z=(await $3(Y,"syncBasalBodyTemperature")({cycleId:r.id,items:W}))?.data;return t({title:"Sincronizacin hecha",description:`Nuevos: ${z?.createdMeasurements??0}  Ya estaban: ${z?.skippedMeasurements??0}  Rechazados: ${z?.rejected??0}`}),await v({silent:!0}),z}catch(W){console.error(W);const X=(N=>typeof N=="string"?N:N?.message??JSON.stringify(N))(W);return X.includes("HEALTH_CONNECT_NotInstalled")||X.includes("HEALTH_CONNECT_NotSupported")?(t({title:"Health Connect no disponible",description:"Instala Health Connect para poder sincronizar tus registros.",variant:"destructive"}),null):X.includes("HEALTH_CONNECT_ONLY_IN_APP")?(t({title:"Solo en la app Android",description:"La sincronizacin est disponible nicamente en la app Android.",variant:"destructive"}),null):X.includes("HEALTH_CONNECT_PERMISSION_DENIED")?(t({title:"Permisos requeridos",description:"Debes conceder permisos de Health Connect para sincronizar.",variant:"destructive"}),null):X.includes("HEALTH_CONNECT_INVALID_START_DATE")?(t({title:"Fecha de inicio invlida",description:"No se pudo leer la fecha de inicio del ciclo actual.",variant:"destructive"}),null):(t({title:"Error al sincronizar",description:X,variant:"destructive"}),null)}finally{d(!1)}},[e,r,v,t]),De={currentCycle:r,archivedCycles:s,syncHealthConnectTemperatures:Se,addOrUpdateDataPoint:x,deleteRecord:j,startNewCycle:B,updateCycleDates:L,forceUpdateCycleStart:U,forceShiftNextCycleStart:V,checkCycleOverlap:O,isLoading:u,getCycleById:ce,refreshData:xe,toggleIgnoreRecord:M,setCycleIgnoreForAutoCalculations:D,addArchivedCycle:C,deleteCycle:I,getMeasurementsForEntry:P,undoCurrentCycle:b};return K.jsx(w1.Provider,{value:De,children:n})},OH=()=>{const n=k.useContext(w1);if(!n)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return n},E1=k.createContext(null),d6=({children:n})=>{const[e,t]=k.useState(!1),[r,i]=k.useState(!1),[s,a]=k.useState(!1),u=yo.isNativePlatform()&&yo.getPlatform()==="android",d=k.useCallback(async()=>{if(!u)return t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"NotAndroid"};a(!0);try{const h=await i6();return t(!!h.isAvailable),i(!!h.hasPermissions),h}catch(h){return console.error("Error al comprobar Health Connect",h),t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"Error"}}finally{a(!1)}},[u]);return k.useEffect(()=>{d()},[d]),K.jsx(E1.Provider,{value:{isAvailable:e,hasPermissions:r,refreshPermissions:d,isChecking:s,isAndroidApp:u},children:n})},LH=()=>{const n=k.useContext(E1);if(!n)throw new Error("useHealthConnect must be used within a HealthConnectProvider");return n},Bv=({children:n})=>K.jsxs("div",{className:"relative h-app overflow-hidden app-background",children:[K.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[K.jsx("div",{className:"wave wave--left-1"}),K.jsx("div",{className:"wave wave--left-2"}),K.jsx("div",{className:"wave wave--left-3"}),K.jsx("div",{className:"wave wave--right-1"}),K.jsx("div",{className:"wave wave--right-2"}),K.jsx("div",{className:"wave wave--right-3"})]}),K.jsx("div",{className:"pointer-events-none absolute inset-0",children:K.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),K.jsx("div",{className:"relative z-10 flex h-app flex-col",children:n})]});class h6 extends nn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}reset=()=>{this.setState({error:null})};componentDidCatch(e,t){console.error("RouteErrorBoundary caught an error",e,t)}render(){const{error:e}=this.state,{FallbackComponent:t,children:r}=this.props;return e?K.jsx(t,{error:e,resetErrorBoundary:this.reset}):r}}var f6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const p6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vu=(n,e)=>{const t=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...d},h)=>k.createElement("svg",{ref:h,...f6,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${p6(n)}`,...d},[...e.map(([m,g])=>k.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},m6=Vu("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),g6=Vu("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),y6=Vu("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),v6=Vu("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),_6=Vu("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),w6=Vu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),E6=()=>{const n=wo(),e=[{to:"/records",label:"Mis registros",icon:y6},{to:"/chart",label:"Grfica",icon:g6},{to:"/",label:"Ciclo actual",icon:v6},{to:"/archived-cycles",label:"Mis ciclos",icon:m6,isActive:t=>t.startsWith("/archived-cycles")||t.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:_6}];return K.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:K.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:t,label:r,icon:i,isActive:s})=>K.jsx("li",{className:"flex",children:K.jsx(XN,{to:t,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:a})=>{const d=(s?s(n.pathname):!1)||a;return K.jsxs(K.Fragment,{children:[K.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${d?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),K.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:K.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${d?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),K.jsx("span",{className:"sr-only",children:r})]})}})},t))})})},da=({children:n,hideBottomNav:e=!1})=>{const t=e?"relative z-10 flex-1 w-full overflow-y-auto":"relative z-10 flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return K.jsxs("div",{className:"relative flex min-h-app flex-col overflow-hidden",children:[K.jsx("main",{className:t,children:n}),!e&&K.jsx(E6,{})]})};function T1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=T1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function I1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=T1(n))&&(r&&(r+=" "),r+=e);return r}function T6(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=S1(e))&&(r&&(r+=" "),r+=t);return r}function S1(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=S1(n[r]))&&(t&&(t+=" "),t+=e);return t}var Dw="-";function I6(n){var e=P6(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(u){var d=u.split(Dw);return d[0]===""&&d.length!==1&&d.shift(),P1(d,e)||S6(u)}function a(u,d){var h=t[u]||[];return d&&i[u]?[].concat(h,i[u]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function P1(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?P1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(Dw);return e.validators.find(function(a){var u=a.validator;return u(s)})?.classGroupId}}var qS=/^\[(.+)\]$/;function S6(n){if(qS.test(n)){var e=qS.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function P6(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=b6(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],u=s[1];$v(u,r,a,e)}),r}function $v(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:GS(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(C6(i)){$v(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var u=a[0],d=a[1];$v(d,GS(e,u),t,r)})})}function GS(n,e){var t=n;return e.split(Dw).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function C6(n){return n.isThemeGetter}function b6(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var d=u[0],h=u[1];return[e+d,h]})):a});return[r,s]}):n}function A6(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return i(a,u),u},set:function(a,u){t.has(a)?t.set(a,u):i(a,u)}}}var C1="!";function x6(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var u=[],d=0,h=0,m,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+i)===e)){u.push(a.slice(h,g)),h=g+i;continue}if(v==="/"){m=g;continue}}v==="["?d++:v==="]"&&d--}var T=u.length===0?a:a.substring(h),A=T.startsWith(C1),x=A?T.substring(1):T,P=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:x,maybePostfixModifierPosition:P}}}function R6(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function k6(n){return{cache:A6(n.cacheSize),splitModifiers:x6(n),...I6(n)}}var D6=/\s+/;function N6(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(D6).map(function(a){var u=t(a),d=u.modifiers,h=u.hasImportantModifier,m=u.baseClassName,g=u.maybePostfixModifierPosition,v=r(g?m.substring(0,g):m),T=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(m),!v)return{isTailwindClass:!1,originalClassName:a};T=!1}var A=R6(d).join(":"),x=h?A+C1:A;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:a,hasPostfixModifier:T}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,m=u+d;return s.has(m)?!1:(s.add(m),i(d,h).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function V6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=u;function u(h){var m=e[0],g=e.slice(1),v=g.reduce(function(T,A){return A(T)},m());return r=k6(v),i=r.cache.get,s=r.cache.set,a=d,d(h)}function d(h){var m=i(h);if(m)return m;var g=N6(h,r);return s(h,g),g}return function(){return a(T6.apply(null,arguments))}}function Pt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var b1=/^\[(?:([a-z-]+):)?(.+)\]$/i,M6=/^\d+\/\d+$/,O6=new Set(["px","full","screen"]),L6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,U6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Lr(n){return _a(n)||O6.has(n)||M6.test(n)||zv(n)}function zv(n){return $a(n,"length",H6)}function j6(n){return $a(n,"size",A1)}function B6(n){return $a(n,"position",A1)}function $6(n){return $a(n,"url",q6)}function Tf(n){return $a(n,"number",_a)}function _a(n){return!Number.isNaN(Number(n))}function z6(n){return n.endsWith("%")&&_a(n.slice(0,-1))}function Vc(n){return KS(n)||$a(n,"number",KS)}function qe(n){return b1.test(n)}function Mc(){return!0}function Hs(n){return L6.test(n)}function W6(n){return $a(n,"",G6)}function $a(n,e,t){var r=b1.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function H6(n){return F6.test(n)}function A1(){return!1}function q6(n){return n.startsWith("url(")}function KS(n){return Number.isInteger(Number(n))}function G6(n){return U6.test(n)}function K6(){var n=Pt("colors"),e=Pt("spacing"),t=Pt("blur"),r=Pt("brightness"),i=Pt("borderColor"),s=Pt("borderRadius"),a=Pt("borderSpacing"),u=Pt("borderWidth"),d=Pt("contrast"),h=Pt("grayscale"),m=Pt("hueRotate"),g=Pt("invert"),v=Pt("gap"),T=Pt("gradientColorStops"),A=Pt("gradientColorStopPositions"),x=Pt("inset"),P=Pt("margin"),j=Pt("opacity"),M=Pt("padding"),D=Pt("saturate"),B=Pt("scale"),Z=Pt("sepia"),re=Pt("skew"),C=Pt("space"),I=Pt("translate"),b=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},L=function(){return["auto",qe,e]},U=function(){return[qe,e]},V=function(){return["",Lr]},ce=function(){return["auto",_a,qe]},xe=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Se=function(){return["solid","dashed","dotted","double","none"]},De=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},W=function(){return["start","end","center","between","around","evenly","stretch"]},Y=function(){return["","0",qe]},X=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},N=function(){return[_a,Tf]},z=function(){return[_a,qe]};return{cacheSize:500,theme:{colors:[Mc],spacing:[Lr],blur:["none","",Hs,qe],brightness:N(),borderColor:[n],borderRadius:["none","","full",Hs,qe],borderSpacing:U(),borderWidth:V(),contrast:N(),grayscale:Y(),hueRotate:z(),invert:Y(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[z6,zv],inset:L(),margin:L(),opacity:N(),padding:U(),saturate:N(),scale:N(),sepia:Y(),skew:z(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Hs]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(xe(),[qe])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vc]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Vc]}],"grid-cols":[{"grid-cols":[Mc]}],"col-start-end":[{col:["auto",{span:["full",Vc]},qe]}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":[Mc]}],"row-start-end":[{row:["auto",{span:[Vc]},qe]}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(W())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(W(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(W(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",qe,e]}],"min-w":[{"min-w":["min","max","fit",qe,Lr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Hs]},Hs,qe]}],h:[{h:[qe,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",qe,Lr]}],"max-h":[{"max-h":[qe,e,"min","max","fit"]}],"font-size":[{text:["base",Hs,zv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tf]}],"font-family":[{font:[Mc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",_a,Tf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qe,Lr]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Se(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr]}],"underline-offset":[{"underline-offset":["auto",qe,Lr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(xe(),[B6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",j6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[A]}],"gradient-via-pos":[{via:[A]}],"gradient-to-pos":[{to:[A]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[].concat(Se(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:Se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Se())}],"outline-offset":[{"outline-offset":[qe,Lr]}],"outline-w":[{outline:[Lr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Lr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Hs,W6]}],"shadow-color":[{shadow:[Mc]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":De()}],"bg-blend":[{"bg-blend":De()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Hs,qe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[D]}],sepia:[{sepia:[Z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[D]}],"backdrop-sepia":[{"backdrop-sepia":[Z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[B]}],"scale-x":[{"scale-x":[B]}],"scale-y":[{"scale-y":[B]}],rotate:[{rotate:[Vc,qe]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[re]}],"skew-y":[{"skew-y":[re]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Lr,Tf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Q6=V6(K6);function za(...n){return Q6(I1(n))}function QS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Pm(...n){return e=>{let t=!1;const r=n.map(i=>{const s=QS(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():QS(n[i],null)}}}}function Ua(...n){return k.useCallback(Pm(...n),n)}var Y6=Symbol.for("react.lazy"),Mp=u_[" use ".trim().toString()];function X6(n){return typeof n=="object"&&n!==null&&"then"in n}function x1(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Y6&&"_payload"in n&&X6(n._payload)}function J6(n){const e=e5(n),t=k.forwardRef((r,i)=>{let{children:s,...a}=r;x1(s)&&typeof Mp=="function"&&(s=Mp(s._payload));const u=k.Children.toArray(s),d=u.find(n5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var Z6=J6("Slot");function e5(n){const e=k.forwardRef((t,r)=>{let{children:i,...s}=t;if(x1(i)&&typeof Mp=="function"&&(i=Mp(i._payload)),k.isValidElement(i)){const a=i5(i),u=r5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Pm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var t5=Symbol("radix.slottable");function n5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===t5}function r5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function i5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const YS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,XS=I1,R1=(n,e)=>t=>{var r;if(e?.variants==null)return XS(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const m=t?.[h],g=s?.[h];if(m===null)return null;const v=YS(m)||YS(g);return i[h][v]}),u=t&&Object.entries(t).reduce((h,m)=>{let[g,v]=m;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:g,className:v,...T}=m;return Object.entries(T).every(A=>{let[x,P]=A;return Array.isArray(P)?P.includes({...s,...u}[x]):{...s,...u}[x]===P})?[...h,g,v]:h},[]);return XS(n,a,d,t?.class,t?.className)},s5=R1("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),eu=nn.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?Z6:"button";return K.jsx(a,{className:za(s5({variant:e,size:t,className:n})),ref:s,...i})});eu.displayName="Button";const o5=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i,k1=({error:n,resetErrorBoundary:e})=>{const t=p_(),{user:r}=Im(),i=typeof navigator<"u"&&navigator.onLine===!1,s=n?.message?n.message:String(n),a=o5.test(s),u=i&&a?"Pantalla no disponible sin conexin":"No se pudo cargar la pantalla",d=i&&a?"Esta pantalla no est disponible sin conexin porque no se haba cargado antes.":"Ocurri un error al cargar esta pantalla. Puedes volver atrs, ir al inicio o reintentar.",h=()=>{e(),t(-1)},m=()=>{e(),t("/")},g=K.jsx("div",{className:"flex min-h-app flex-col items-center justify-center px-6 py-10 text-center",children:K.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white/85 p-6 shadow-lg backdrop-blur-md",children:[K.jsx("h1",{className:"text-2xl font-semibold text-fertiliapp-fuerte",children:u}),K.jsx("p",{className:"text-sm text-gray-600",children:d}),K.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[K.jsx(eu,{type:"button",onClick:h,children:"Volver"}),K.jsx(eu,{type:"button",variant:"secondary",onClick:m,children:"Ir a inicio"}),K.jsx(eu,{type:"button",variant:"outline",onClick:()=>window.location.reload(),children:"Reintentar"})]}),!i&&K.jsxs("details",{className:"text-left text-xs text-gray-500",children:[K.jsx("summary",{className:"cursor-pointer font-medium text-gray-600",children:"Detalles tcnicos"}),K.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words rounded-2xl bg-gray-100 p-3 text-[0.7rem] text-gray-600",children:s})]})]})});return r?K.jsx(da,{children:g}):K.jsx(Bv,{children:g})},JS=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i;function a5({children:n}){const[e,t]=k.useState(null);return k.useEffect(()=>{const r=s=>{const a=s?.reason?.message??String(s?.reason);JS.test(a)&&(s?.preventDefault?.(),t(s?.reason instanceof Error?s.reason:new Error(a)))},i=s=>{const a=s?.message??String(s?.error?.message??s?.error??"");JS.test(a)&&(s?.preventDefault?.(),t(s?.error instanceof Error?s.error:new Error(a)))};return window.addEventListener("unhandledrejection",r),window.addEventListener("error",i),()=>{window.removeEventListener("unhandledrejection",r),window.removeEventListener("error",i)}},[]),e?K.jsx(k1,{error:e,resetErrorBoundary:()=>t(null)}):n}function lr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function FH(n,e){const t=k.createContext(e),r=s=>{const{children:a,...u}=s,d=k.useMemo(()=>u,Object.values(u));return K.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function i(s){const a=k.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function D1(n,e=[]){let t=[];function r(s,a){const u=k.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:T,...A}=g,x=v?.[n]?.[d]||u,P=k.useMemo(()=>A,Object.values(A));return K.jsx(x.Provider,{value:P,children:T})};h.displayName=s+"Provider";function m(g,v){const T=v?.[n]?.[d]||u,A=k.useContext(T);if(A)return A;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const i=()=>{const s=t.map(a=>k.createContext(a));return function(u){const d=u?.[n]||s;return k.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[r,l5(i,...e)]}function l5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((u,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...u,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function ZS(n){const e=u5(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(d5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function u5(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=f5(i),u=h5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Pm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var c5=Symbol("radix.slottable");function d5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===c5}function h5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function f5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function p5(n){const e=n+"CollectionProvider",[t,r]=D1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:P,children:j}=x,M=nn.useRef(null),D=nn.useRef(new Map).current;return K.jsx(i,{scope:P,itemMap:D,collectionRef:M,children:j})};a.displayName=e;const u=n+"CollectionSlot",d=ZS(u),h=nn.forwardRef((x,P)=>{const{scope:j,children:M}=x,D=s(u,j),B=Ua(P,D.collectionRef);return K.jsx(d,{ref:B,children:M})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=ZS(m),T=nn.forwardRef((x,P)=>{const{scope:j,children:M,...D}=x,B=nn.useRef(null),Z=Ua(P,B),re=s(m,j);return nn.useEffect(()=>(re.itemMap.set(B,{ref:B,...D}),()=>{re.itemMap.delete(B)})),K.jsx(v,{[g]:"",ref:Z,children:M})});T.displayName=m;function A(x){const P=s(n+"CollectionConsumer",x);return nn.useCallback(()=>{const M=P.collectionRef.current;if(!M)return[];const D=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(P.itemMap.values()).sort((re,C)=>D.indexOf(re.ref.current)-D.indexOf(C.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:a,Slot:h,ItemSlot:T},A,r]}function m5(n){const e=g5(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(v5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function g5(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=w5(i),u=_5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Pm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var y5=Symbol("radix.slottable");function v5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===y5}function _5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function w5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var E5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bi=E5.reduce((n,e)=>{const t=m5(`Primitive.${e}`),r=k.forwardRef((i,s)=>{const{asChild:a,...u}=i,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),K.jsx(d,{...u,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function N1(n,e){n&&c_.flushSync(()=>n.dispatchEvent(e))}function ja(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>e.current?.(...t),[])}function T5(n,e=globalThis?.document){const t=ja(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var I5="DismissableLayer",Wv="dismissableLayer.update",S5="dismissableLayer.pointerDownOutside",P5="dismissableLayer.focusOutside",eP,V1=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M1=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:u,...d}=n,h=k.useContext(V1),[m,g]=k.useState(null),v=m?.ownerDocument??globalThis?.document,[,T]=k.useState({}),A=Ua(e,C=>g(C)),x=Array.from(h.layers),[P]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(P),M=m?x.indexOf(m):-1,D=h.layersWithOutsidePointerEventsDisabled.size>0,B=M>=j,Z=b5(C=>{const I=C.target,b=[...h.branches].some(O=>O.contains(I));!B||b||(i?.(C),a?.(C),C.defaultPrevented||u?.())},v),re=A5(C=>{const I=C.target;[...h.branches].some(O=>O.contains(I))||(s?.(C),a?.(C),C.defaultPrevented||u?.())},v);return T5(C=>{M===h.layers.size-1&&(r?.(C),!C.defaultPrevented&&u&&(C.preventDefault(),u()))},v),k.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(eP=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),tP(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=eP)}},[m,v,t,h]),k.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),tP())},[m,h]),k.useEffect(()=>{const C=()=>T({});return document.addEventListener(Wv,C),()=>document.removeEventListener(Wv,C)},[]),K.jsx(bi.div,{...d,ref:A,style:{pointerEvents:D?B?"auto":"none":void 0,...n.style},onFocusCapture:lr(n.onFocusCapture,re.onFocusCapture),onBlurCapture:lr(n.onBlurCapture,re.onBlurCapture),onPointerDownCapture:lr(n.onPointerDownCapture,Z.onPointerDownCapture)})});M1.displayName=I5;var C5="DismissableLayerBranch",O1=k.forwardRef((n,e)=>{const t=k.useContext(V1),r=k.useRef(null),i=Ua(e,r);return k.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),K.jsx(bi.div,{...n,ref:i})});O1.displayName=C5;function b5(n,e=globalThis?.document){const t=ja(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=u=>{if(u.target&&!r.current){let d=function(){L1(S5,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function A5(n,e=globalThis?.document){const t=ja(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&L1(P5,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tP(){const n=new CustomEvent(Wv);document.dispatchEvent(n)}function L1(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?N1(i,s):i.dispatchEvent(s)}var x5=M1,R5=O1,Pd=globalThis?.document?k.useLayoutEffect:()=>{},k5="Portal",F1=k.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=k.useState(!1);Pd(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?QD.createPortal(K.jsx(bi.div,{...r,ref:e}),a):null});F1.displayName=k5;function D5(n,e){return k.useReducer((t,r)=>e[t][r]??t,n)}var U1=n=>{const{present:e,children:t}=n,r=N5(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=Ua(r.ref,V5(i));return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};U1.displayName="Presence";function N5(n){const[e,t]=k.useState(),r=k.useRef(null),i=k.useRef(n),s=k.useRef("none"),a=n?"mounted":"unmounted",[u,d]=D5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const h=If(r.current);s.current=u==="mounted"?h:"none"},[u]),Pd(()=>{const h=r.current,m=i.current;if(m!==n){const v=s.current,T=If(h);n?d("MOUNT"):T==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&v!==T?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Pd(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=T=>{const x=If(r.current).includes(CSS.escape(T.animationName));if(T.target===e&&x&&(d("ANIMATION_END"),!i.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},v=T=>{T.target===e&&(s.current=If(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:k.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function If(n){return n?.animationName||"none"}function V5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var M5=u_[" useInsertionEffect ".trim().toString()]||Pd;function O5({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=L5({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const m=k.useRef(n!==void 0);k.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=k.useCallback(m=>{if(u){const g=F5(m)?m(n):m;g!==n&&a.current?.(g)}else s(m)},[u,n,s,a]);return[d,h]}function L5({defaultProp:n,onChange:e}){const[t,r]=k.useState(n),i=k.useRef(t),s=k.useRef(e);return M5(()=>{s.current=e},[e]),k.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function F5(n){return typeof n=="function"}var U5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),j5="VisuallyHidden",Nw=k.forwardRef((n,e)=>K.jsx(bi.span,{...n,ref:e,style:{...U5,...n.style}}));Nw.displayName=j5;var Vw="ToastProvider",[Mw,B5,$5]=p5("Toast"),[j1]=D1("Toast",[$5]),[z5,Cm]=j1(Vw),B1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=n,[u,d]=k.useState(null),[h,m]=k.useState(0),g=k.useRef(!1),v=k.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Vw}\`. Expected non-empty \`string\`.`),K.jsx(Mw.Provider,{scope:e,children:K.jsx(z5,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:k.useCallback(()=>m(T=>T+1),[]),onToastRemove:k.useCallback(()=>m(T=>T-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:a})})};B1.displayName=Vw;var $1="ToastViewport",W5=["F8"],Hv="toast.viewportPause",qv="toast.viewportResume",z1=k.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=W5,label:i="Notifications ({hotkey})",...s}=n,a=Cm($1,t),u=B5(t),d=k.useRef(null),h=k.useRef(null),m=k.useRef(null),g=k.useRef(null),v=Ua(e,g,a.onViewportChange),T=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=a.toastCount>0;k.useEffect(()=>{const P=j=>{r.length!==0&&r.every(D=>j[D]||j.code===D)&&g.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),k.useEffect(()=>{const P=d.current,j=g.current;if(A&&P&&j){const M=()=>{if(!a.isClosePausedRef.current){const re=new CustomEvent(Hv);j.dispatchEvent(re),a.isClosePausedRef.current=!0}},D=()=>{if(a.isClosePausedRef.current){const re=new CustomEvent(qv);j.dispatchEvent(re),a.isClosePausedRef.current=!1}},B=re=>{!P.contains(re.relatedTarget)&&D()},Z=()=>{P.contains(document.activeElement)||D()};return P.addEventListener("focusin",M),P.addEventListener("focusout",B),P.addEventListener("pointermove",M),P.addEventListener("pointerleave",Z),window.addEventListener("blur",M),window.addEventListener("focus",D),()=>{P.removeEventListener("focusin",M),P.removeEventListener("focusout",B),P.removeEventListener("pointermove",M),P.removeEventListener("pointerleave",Z),window.removeEventListener("blur",M),window.removeEventListener("focus",D)}}},[A,a.isClosePausedRef]);const x=k.useCallback(({tabbingDirection:P})=>{const M=u().map(D=>{const B=D.ref.current,Z=[B,...r$(B)];return P==="forwards"?Z:Z.reverse()});return(P==="forwards"?M.reverse():M).flat()},[u]);return k.useEffect(()=>{const P=g.current;if(P){const j=M=>{const D=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!D){const Z=document.activeElement,re=M.shiftKey;if(M.target===P&&re){h.current?.focus();return}const b=x({tabbingDirection:re?"backwards":"forwards"}),O=b.findIndex(L=>L===Z);Oy(b.slice(O+1))?M.preventDefault():re?h.current?.focus():m.current?.focus()}};return P.addEventListener("keydown",j),()=>P.removeEventListener("keydown",j)}},[u,x]),K.jsxs(R5,{ref:d,role:"region","aria-label":i.replace("{hotkey}",T),tabIndex:-1,style:{pointerEvents:A?void 0:"none"},children:[A&&K.jsx(Gv,{ref:h,onFocusFromOutsideViewport:()=>{const P=x({tabbingDirection:"forwards"});Oy(P)}}),K.jsx(Mw.Slot,{scope:t,children:K.jsx(bi.ol,{tabIndex:-1,...s,ref:v})}),A&&K.jsx(Gv,{ref:m,onFocusFromOutsideViewport:()=>{const P=x({tabbingDirection:"backwards"});Oy(P)}})]})});z1.displayName=$1;var W1="ToastFocusProxy",Gv=k.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Cm(W1,t);return K.jsx(Nw,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const u=a.relatedTarget;!s.viewport?.contains(u)&&r()}})});Gv.displayName=W1;var Kd="Toast",H5="toast.swipeStart",q5="toast.swipeMove",G5="toast.swipeCancel",K5="toast.swipeEnd",H1=k.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...a}=n,[u,d]=O5({prop:r,defaultProp:i??!0,onChange:s,caller:Kd});return K.jsx(U1,{present:t||u,children:K.jsx(X5,{open:u,...a,ref:e,onClose:()=>d(!1),onPause:ja(n.onPause),onResume:ja(n.onResume),onSwipeStart:lr(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lr(n.onSwipeMove,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:lr(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lr(n.onSwipeEnd,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),d(!1)})})})});H1.displayName=Kd;var[Q5,Y5]=j1(Kd,{onClose(){}}),X5=k.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:T,...A}=n,x=Cm(Kd,t),[P,j]=k.useState(null),M=Ua(e,ce=>j(ce)),D=k.useRef(null),B=k.useRef(null),Z=i||x.duration,re=k.useRef(0),C=k.useRef(Z),I=k.useRef(0),{onToastAdd:b,onToastRemove:O}=x,L=ja(()=>{P?.contains(document.activeElement)&&x.viewport?.focus(),a()}),U=k.useCallback(ce=>{!ce||ce===1/0||(window.clearTimeout(I.current),re.current=new Date().getTime(),I.current=window.setTimeout(L,ce))},[L]);k.useEffect(()=>{const ce=x.viewport;if(ce){const xe=()=>{U(C.current),h?.()},Se=()=>{const De=new Date().getTime()-re.current;C.current=C.current-De,window.clearTimeout(I.current),d?.()};return ce.addEventListener(Hv,Se),ce.addEventListener(qv,xe),()=>{ce.removeEventListener(Hv,Se),ce.removeEventListener(qv,xe)}}},[x.viewport,Z,d,h,U]),k.useEffect(()=>{s&&!x.isClosePausedRef.current&&U(Z)},[s,Z,x.isClosePausedRef,U]),k.useEffect(()=>(b(),()=>O()),[b,O]);const V=k.useMemo(()=>P?J1(P):null,[P]);return x.viewport?K.jsxs(K.Fragment,{children:[V&&K.jsx(J5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:V}),K.jsx(Q5,{scope:t,onClose:L,children:c_.createPortal(K.jsx(Mw.ItemSlot,{scope:t,children:K.jsx(x5,{asChild:!0,onEscapeKeyDown:lr(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||L(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:K.jsx(bi.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...A,ref:M,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:lr(n.onKeyDown,ce=>{ce.key==="Escape"&&(u?.(ce.nativeEvent),ce.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:lr(n.onPointerDown,ce=>{ce.button===0&&(D.current={x:ce.clientX,y:ce.clientY})}),onPointerMove:lr(n.onPointerMove,ce=>{if(!D.current)return;const xe=ce.clientX-D.current.x,Se=ce.clientY-D.current.y,De=!!B.current,W=["left","right"].includes(x.swipeDirection),Y=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,X=W?Y(0,xe):0,N=W?0:Y(0,Se),z=ce.pointerType==="touch"?10:2,ee={x:X,y:N},se={originalEvent:ce,delta:ee};De?(B.current=ee,Sf(q5,g,se,{discrete:!1})):nP(ee,x.swipeDirection,z)?(B.current=ee,Sf(H5,m,se,{discrete:!1}),ce.target.setPointerCapture(ce.pointerId)):(Math.abs(xe)>z||Math.abs(Se)>z)&&(D.current=null)}),onPointerUp:lr(n.onPointerUp,ce=>{const xe=B.current,Se=ce.target;if(Se.hasPointerCapture(ce.pointerId)&&Se.releasePointerCapture(ce.pointerId),B.current=null,D.current=null,xe){const De=ce.currentTarget,W={originalEvent:ce,delta:xe};nP(xe,x.swipeDirection,x.swipeThreshold)?Sf(K5,T,W,{discrete:!0}):Sf(G5,v,W,{discrete:!0}),De.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),J5=n=>{const{__scopeToast:e,children:t,...r}=n,i=Cm(Kd,e),[s,a]=k.useState(!1),[u,d]=k.useState(!1);return t$(()=>a(!0)),k.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:K.jsx(F1,{asChild:!0,children:K.jsx(Nw,{...r,children:s&&K.jsxs(K.Fragment,{children:[i.label," ",t]})})})},Z5="ToastTitle",q1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return K.jsx(bi.div,{...r,ref:e})});q1.displayName=Z5;var e$="ToastDescription",G1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return K.jsx(bi.div,{...r,ref:e})});G1.displayName=e$;var K1="ToastAction",Q1=k.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?K.jsx(X1,{altText:t,asChild:!0,children:K.jsx(Ow,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${K1}\`. Expected non-empty \`string\`.`),null)});Q1.displayName=K1;var Y1="ToastClose",Ow=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Y5(Y1,t);return K.jsx(X1,{asChild:!0,children:K.jsx(bi.button,{type:"button",...r,ref:e,onClick:lr(n.onClick,i.onClose)})})});Ow.displayName=Y1;var X1=k.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return K.jsx(bi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function J1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),n$(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...J1(r))}}),e}function Sf(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?N1(i,s):i.dispatchEvent(s)}var nP=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function t$(n=()=>{}){const e=ja(n);Pd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function n$(n){return n.nodeType===n.ELEMENT_NODE}function r$(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Oy(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var i$=B1,Z1=z1,eR=H1,tR=q1,nR=G1,rR=Q1,iR=Ow;const s$=i$,sR=nn.forwardRef(({className:n,...e},t)=>K.jsx(Z1,{ref:t,className:za("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));sR.displayName=Z1.displayName;const o$=R1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),oR=nn.forwardRef(({className:n,variant:e,...t},r)=>K.jsx(eR,{ref:r,className:za(o$({variant:e}),n),...t}));oR.displayName=eR.displayName;const a$=nn.forwardRef(({className:n,...e},t)=>K.jsx(rR,{ref:t,className:za("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));a$.displayName=rR.displayName;const aR=nn.forwardRef(({className:n,...e},t)=>K.jsx(iR,{ref:t,className:za("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:K.jsx(w6,{className:"h-4 w-4"})}));aR.displayName=iR.displayName;const lR=nn.forwardRef(({className:n,...e},t)=>K.jsx(tR,{ref:t,className:za("text-sm font-semibold",n),...e}));lR.displayName=tR.displayName;const uR=nn.forwardRef(({className:n,...e},t)=>K.jsx(nR,{ref:t,className:za("text-sm opacity-90",n),...e}));uR.displayName=nR.displayName;function l$(){const{toasts:n}=ww();return K.jsxs(s$,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>K.jsxs(oR,{...s,children:[K.jsxs("div",{className:"grid gap-1",children:[t&&K.jsx(lR,{children:t}),r&&K.jsx(uR,{children:r})]}),i,K.jsx(aR,{})]},e)),K.jsx(sR,{})]})}const cR=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),bm=k.createContext({}),Lw=k.createContext(null),Am=typeof document<"u",u$=Am?k.useLayoutEffect:k.useEffect,dR=k.createContext({strict:!1}),Fw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c$="framerAppearId",hR="data-"+Fw(c$);function d$(n,e,t,r){const{visualElement:i}=k.useContext(bm),s=k.useContext(dR),a=k.useContext(Lw),u=k.useContext(cR).reducedMotion,d=k.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=d.current;k.useInsertionEffect(()=>{h&&h.update(t,a)});const m=k.useRef(!!(t[hR]&&!window.HandoffComplete));return u$(()=>{h&&(h.render(),m.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(h.updateFeatures(),!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),h}function Hl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function h$(n,e,t){return k.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Hl(t)&&(t.current=r))},[e])}function Cd(n){return typeof n=="string"||Array.isArray(n)}function xm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Uw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jw=["initial",...Uw];function Rm(n){return xm(n.animate)||jw.some(e=>Cd(n[e]))}function fR(n){return!!(Rm(n)||n.variants)}function f$(n,e){if(Rm(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Cd(t)?t:void 0,animate:Cd(r)?r:void 0}}return n.inherit!==!1?e:{}}function p$(n){const{initial:e,animate:t}=f$(n,k.useContext(bm));return k.useMemo(()=>({initial:e,animate:t}),[rP(e),rP(t)])}function rP(n){return Array.isArray(n)?n.join(" "):n}const iP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bd={};for(const n in iP)bd[n]={isEnabled:e=>iP[n].some(t=>!!e[t])};function m$(n){for(const e in n)bd[e]={...bd[e],...n[e]}}const pR=k.createContext({}),mR=k.createContext({}),g$=Symbol.for("motionComponentSymbol");function y$({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&m$(n);function s(u,d){let h;const m={...k.useContext(cR),...u,layoutId:v$(u)},{isStatic:g}=m,v=p$(u),T=r(u,g);if(!g&&Am){v.visualElement=d$(i,T,m,e);const A=k.useContext(mR),x=k.useContext(dR).strict;v.visualElement&&(h=v.visualElement.loadFeatures(m,x,n,A))}return k.createElement(bm.Provider,{value:v},h&&v.visualElement?k.createElement(h,{visualElement:v.visualElement,...m}):null,t(i,u,h$(T,v.visualElement,d),T,g,v.visualElement))}const a=k.forwardRef(s);return a[g$]=i,a}function v$({layoutId:n}){const e=k.useContext(pR).id;return e&&n!==void 0?e+"-"+n:n}function _$(n){function e(r,i={}){return y$(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const w$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bw(n){return typeof n!="string"||n.includes("-")?!1:!!(w$.indexOf(n)>-1||/[A-Z]/.test(n))}const Op={};function E$(n){Object.assign(Op,n)}const Qd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wa=new Set(Qd);function gR(n,{layout:e,layoutId:t}){return Wa.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Op[n]||n==="opacity")}const Yn=n=>!!(n&&n.getVelocity),T$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},I$=Qd.length;function S$(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<I$;a++){const u=Qd[a];if(n[u]!==void 0){const d=T$[u]||u;s+=`${d}(${n[u]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const yR=n=>e=>typeof e=="string"&&e.startsWith(n),vR=yR("--"),Kv=yR("var(--"),P$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,C$=(n,e)=>e&&typeof n=="number"?e.transform(n):n,vo=(n,e,t)=>Math.min(Math.max(t,n),e),Ha={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},rd={...Ha,transform:n=>vo(0,1,n)},Pf={...Ha,default:1},id=n=>Math.round(n*1e5)/1e5,km=/(-)?([\d]*\.?[\d])+/g,_R=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,b$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Yd(n){return typeof n=="string"}const Xd=n=>({test:e=>Yd(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),qs=Xd("deg"),Ti=Xd("%"),Fe=Xd("px"),A$=Xd("vh"),x$=Xd("vw"),sP={...Ti,parse:n=>Ti.parse(n)/100,transform:n=>Ti.transform(n*100)},oP={...Ha,transform:Math.round},wR={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,size:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:Pf,scaleX:Pf,scaleY:Pf,scaleZ:Pf,skew:qs,skewX:qs,skewY:qs,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:rd,originX:sP,originY:sP,originZ:Fe,zIndex:oP,fillOpacity:rd,strokeOpacity:rd,numOctaves:oP};function $w(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:u}=n;let d=!1,h=!1,m=!0;for(const g in e){const v=e[g];if(vR(g)){s[g]=v;continue}const T=wR[g],A=C$(v,T);if(Wa.has(g)){if(d=!0,a[g]=A,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(h=!0,u[g]=A):i[g]=A}if(e.transform||(d||r?i.transform=S$(n.transform,t,m,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;i.transformOrigin=`${g} ${v} ${T}`}}const zw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ER(n,e,t){for(const r in e)!Yn(e[r])&&!gR(r,t)&&(n[r]=e[r])}function R$({transformTemplate:n},e,t){return k.useMemo(()=>{const r=zw();return $w(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function k$(n,e,t){const r=n.style||{},i={};return ER(i,r,n),Object.assign(i,R$(n,e,t)),n.transformValues?n.transformValues(i):i}function D$(n,e,t){const r={},i=k$(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const N$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||N$.has(n)}let TR=n=>!Lp(n);function V$(n){n&&(TR=e=>e.startsWith("on")?!Lp(e):n(e))}try{V$(require("@emotion/is-prop-valid").default)}catch{}function M$(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(TR(i)||t===!0&&Lp(i)||!e&&!Lp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function aP(n,e,t){return typeof n=="string"?n:Fe.transform(e+t*n)}function O$(n,e,t){const r=aP(e,n.x,n.width),i=aP(t,n.y,n.height);return`${r} ${i}`}const L$={offset:"stroke-dashoffset",array:"stroke-dasharray"},F$={offset:"strokeDashoffset",array:"strokeDasharray"};function U$(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?L$:F$;n[s.offset]=Fe.transform(-r);const a=Fe.transform(e),u=Fe.transform(t);n[s.array]=`${a} ${u}`}function Ww(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},m,g,v){if($w(n,h,m,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:T,style:A,dimensions:x}=n;T.transform&&(x&&(A.transform=T.transform),delete T.transform),x&&(i!==void 0||s!==void 0||A.transform)&&(A.transformOrigin=O$(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(T.x=e),t!==void 0&&(T.y=t),r!==void 0&&(T.scale=r),a!==void 0&&U$(T,a,u,d,!1)}const IR=()=>({...zw(),attrs:{}}),Hw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function j$(n,e,t,r){const i=k.useMemo(()=>{const s=IR();return Ww(s,e,{enableHardwareAcceleration:!1},Hw(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};ER(s,n.style,n),i.style={...s,...i.style}}return i}function B$(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=(Bw(t)?j$:D$)(r,s,a,t),m={...M$(r,typeof t=="string",n),...d,ref:i},{children:g}=r,v=k.useMemo(()=>Yn(g)?g.get():g,[g]);return k.createElement(t,{...m,children:v})}}function SR(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const PR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CR(n,e,t,r){SR(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(PR.has(i)?i:Fw(i),e.attrs[i])}function qw(n,e){const{style:t}=n,r={};for(const i in t)(Yn(t[i])||e.style&&Yn(e.style[i])||gR(i,n))&&(r[i]=t[i]);return r}function bR(n,e){const t=qw(n,e);for(const r in n)if(Yn(n[r])||Yn(e[r])){const i=Qd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function Gw(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function $$(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const Fp=n=>Array.isArray(n),z$=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),W$=n=>Fp(n)?n[n.length-1]||0:n;function Kf(n){const e=Yn(n)?n.get():n;return z$(e)?e.toValue():e}function H$({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:q$(r,i,s,n),renderState:e()};return t&&(a.mount=u=>t(r,u,a)),a}const AR=n=>(e,t)=>{const r=k.useContext(bm),i=k.useContext(Lw),s=()=>H$(n,e,r,i);return t?s():$$(s)};function q$(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=Kf(s[v]);let{initial:a,animate:u}=n;const d=Rm(n),h=fR(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!xm(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const A=Gw(n,T);if(!A)return;const{transitionEnd:x,transition:P,...j}=A;for(const M in j){let D=j[M];if(Array.isArray(D)){const B=m?D.length-1:0;D=D[B]}D!==null&&(i[M]=D)}for(const M in x)i[M]=x[M]}),i}const Gt=n=>n;class lP{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function G$(n){let e=new lP,t=new lP,r=0,i=!1,s=!1;const a=new WeakSet,u={schedule:(d,h=!1,m=!1)=>{const g=m&&i,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const m=e.order[h];m(d),a.has(m)&&(u.schedule(m),n())}i=!1,s&&(s=!1,u.process(d))}};return u}const Cf=["prepare","read","update","preRender","render","postRender"],K$=40;function Q$(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Cf.reduce((g,v)=>(g[v]=G$(()=>t=!0),g),{}),a=g=>s[g].process(i),u=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,K$),1),i.timestamp=g,i.isProcessing=!0,Cf.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(u))},d=()=>{t=!0,r=!0,i.isProcessing||n(u)};return{schedule:Cf.reduce((g,v)=>{const T=s[v];return g[v]=(A,x=!1,P=!1)=>(t||d(),T.schedule(A,x,P)),g},{}),cancel:g=>Cf.forEach(v=>s[v].cancel(g)),state:i,steps:s}}const{schedule:Ct,cancel:is,state:An,steps:Ly}=Q$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gt,!0),Y$={useVisualState:AR({scrapeMotionValuesFromProps:bR,createRenderState:IR,onMount:(n,e,{renderState:t,latestValues:r})=>{Ct.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Ct.render(()=>{Ww(t,r,{enableHardwareAcceleration:!1},Hw(e.tagName),n.transformTemplate),CR(e,t)})}})},X$={useVisualState:AR({scrapeMotionValuesFromProps:qw,createRenderState:zw})};function J$(n,{forwardMotionProps:e=!1},t,r){return{...Bw(n)?Y$:X$,preloadedFeatures:t,useRender:B$(e),createVisualElement:r,Component:n}}function Yi(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const xR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Dm(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const Z$=n=>e=>xR(e)&&n(e,Dm(e));function Xi(n,e,t,r){return Yi(n,e,Z$(t),r)}const e9=(n,e)=>t=>e(n(t)),lo=(...n)=>n.reduce(e9);function RR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const uP=RR("dragHorizontal"),cP=RR("dragVertical");function kR(n){let e=!1;if(n==="y")e=cP();else if(n==="x")e=uP();else{const t=uP(),r=cP();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function DR(){const n=kR(!0);return n?(n(),!1):!0}class bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function dP(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||DR())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&Ct.update(()=>u[r](s,a))};return Xi(n.current,t,i,{passive:!n.getProps()[r]})}class t9 extends bo{mount(){this.unmount=lo(dP(this.node,!0),dP(this.node,!1))}unmount(){}}class n9 extends bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lo(Yi(this.node.current,"focus",()=>this.onFocus()),Yi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const NR=(n,e)=>e?n===e?!0:NR(n,e.parentElement):!1;function Fy(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Dm(t))}class r9 extends bo{constructor(){super(...arguments),this.removeStartListeners=Gt,this.removeEndListeners=Gt,this.removeAccessibleListeners=Gt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Xi(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ct.update(()=>{!g&&!NR(this.node.current,u.target)?m&&m(u,d):h&&h(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=Xi(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=lo(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Fy("up",(d,h)=>{const{onTap:m}=this.node.getProps();m&&Ct.update(()=>m(d,h))})};this.removeEndListeners(),this.removeEndListeners=Yi(this.node.current,"keyup",a),Fy("down",(u,d)=>{this.startPress(u,d)})},t=Yi(this.node.current,"keydown",e),r=()=>{this.isPressing&&Fy("cancel",(s,a)=>this.cancelPress(s,a))},i=Yi(this.node.current,"blur",r);this.removeAccessibleListeners=lo(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ct.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!DR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ct.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Xi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=lo(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Qv=new WeakMap,Uy=new WeakMap,i9=n=>{const e=Qv.get(n.target);e&&e(n)},s9=n=>{n.forEach(i9)};function o9({root:n,...e}){const t=n||document;Uy.has(t)||Uy.set(t,{});const r=Uy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(s9,{root:n,...e})),r[i]}function a9(n,e,t){const r=o9(e);return Qv.set(n,t),r.observe(n),()=>{Qv.delete(n),r.unobserve(n)}}const l9={some:0,all:1};class u9 extends bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:l9[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(d)};return a9(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(c9(e,t))&&this.startObserver()}unmount(){}}function c9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const d9={inView:{Feature:u9},tap:{Feature:r9},focus:{Feature:n9},hover:{Feature:t9}};function VR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function h9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function f9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Nm(n,e,t){const r=n.getProps();return Gw(r,e,t!==void 0?t:r.custom,h9(n),f9(n))}let Kw=Gt;const Sa=n=>n*1e3,Ji=n=>n/1e3,p9={current:!1},MR=n=>Array.isArray(n)&&typeof n[0]=="number";function OR(n){return!!(!n||typeof n=="string"&&LR[n]||MR(n)||Array.isArray(n)&&n.every(OR))}const Hc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,LR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hc([0,.65,.55,1]),circOut:Hc([.55,0,1,.45]),backIn:Hc([.31,.01,.66,-.59]),backOut:Hc([.33,1.53,.69,.99])};function FR(n){if(n)return MR(n)?Hc(n):Array.isArray(n)?n.map(FR):LR[n]}function m9(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:u,times:d}={}){const h={[e]:t};d&&(h.offset=d);const m=FR(u);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function g9(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const UR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,y9=1e-7,v9=12;function _9(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=UR(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>y9&&++u<v9);return a}function Jd(n,e,t,r){if(n===e&&t===r)return Gt;const i=s=>_9(s,0,1,n,t);return s=>s===0||s===1?s:UR(i(s),e,r)}const w9=Jd(.42,0,1,1),E9=Jd(0,0,.58,1),jR=Jd(.42,0,.58,1),T9=n=>Array.isArray(n)&&typeof n[0]!="number",BR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,$R=n=>e=>1-n(1-e),Qw=n=>1-Math.sin(Math.acos(n)),zR=$R(Qw),I9=BR(Qw),WR=Jd(.33,1.53,.69,.99),Yw=$R(WR),S9=BR(Yw),P9=n=>(n*=2)<1?.5*Yw(n):.5*(2-Math.pow(2,-10*(n-1))),C9={linear:Gt,easeIn:w9,easeInOut:jR,easeOut:E9,circIn:Qw,circInOut:I9,circOut:zR,backIn:Yw,backInOut:S9,backOut:WR,anticipate:P9},hP=n=>{if(Array.isArray(n)){Kw(n.length===4);const[e,t,r,i]=n;return Jd(e,t,r,i)}else if(typeof n=="string")return C9[n];return n},Xw=(n,e)=>t=>!!(Yd(t)&&b$.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),HR=(n,e,t)=>r=>{if(!Yd(r))return r;const[i,s,a,u]=r.match(km);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},b9=n=>vo(0,255,n),jy={...Ha,transform:n=>Math.round(b9(n))},wa={test:Xw("rgb","red"),parse:HR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+jy.transform(n)+", "+jy.transform(e)+", "+jy.transform(t)+", "+id(rd.transform(r))+")"};function A9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Yv={test:Xw("#"),parse:A9,transform:wa.transform},ql={test:Xw("hsl","hue"),parse:HR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ti.transform(id(e))+", "+Ti.transform(id(t))+", "+id(rd.transform(r))+")"},On={test:n=>wa.test(n)||Yv.test(n)||ql.test(n),parse:n=>wa.test(n)?wa.parse(n):ql.test(n)?ql.parse(n):Yv.parse(n),transform:n=>Yd(n)?n:n.hasOwnProperty("red")?wa.transform(n):ql.transform(n)},Mt=(n,e,t)=>-t*n+t*e+n;function By(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function x9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;i=By(d,u,n+1/3),s=By(d,u,n),a=By(d,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const $y=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},R9=[Yv,wa,ql],k9=n=>R9.find(e=>e.test(n));function fP(n){const e=k9(n);let t=e.parse(n);return e===ql&&(t=x9(t)),t}const qR=(n,e)=>{const t=fP(n),r=fP(e),i={...t};return s=>(i.red=$y(t.red,r.red,s),i.green=$y(t.green,r.green,s),i.blue=$y(t.blue,r.blue,s),i.alpha=Mt(t.alpha,r.alpha,s),wa.transform(i))};function D9(n){var e,t;return isNaN(n)&&Yd(n)&&(((e=n.match(km))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(_R))===null||t===void 0?void 0:t.length)||0)>0}const GR={regex:P$,countKey:"Vars",token:"${v}",parse:Gt},KR={regex:_R,countKey:"Colors",token:"${c}",parse:On.parse},QR={regex:km,countKey:"Numbers",token:"${n}",parse:Ha.parse};function zy(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Up(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&zy(t,GR),zy(t,KR),zy(t,QR),t}function YR(n){return Up(n).values}function XR(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Up(n),s=e.length;return a=>{let u=i;for(let d=0;d<s;d++)d<r?u=u.replace(GR.token,a[d]):d<r+t?u=u.replace(KR.token,On.transform(a[d])):u=u.replace(QR.token,id(a[d]));return u}}const N9=n=>typeof n=="number"?0:n;function V9(n){const e=YR(n);return XR(n)(e.map(N9))}const _o={test:D9,parse:YR,createTransformer:XR,getAnimatableNone:V9},JR=(n,e)=>t=>`${t>0?e:n}`;function ZR(n,e){return typeof n=="number"?t=>Mt(n,e,t):On.test(n)?qR(n,e):n.startsWith("var(")?JR(n,e):tk(n,e)}const ek=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>ZR(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},M9=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=ZR(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},tk=(n,e)=>{const t=_o.createTransformer(e),r=Up(n),i=Up(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?lo(ek(r.values,i.values),t):JR(n,e)},Ad=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},pP=(n,e)=>t=>Mt(n,e,t);function O9(n){return typeof n=="number"?pP:typeof n=="string"?On.test(n)?qR:tk:Array.isArray(n)?ek:typeof n=="object"?M9:pP}function L9(n,e,t){const r=[],i=t||O9(n[0]),s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||Gt:e;u=lo(d,u)}r.push(u)}return r}function nk(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Kw(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=L9(e,r,i),u=a.length,d=h=>{let m=0;if(u>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const g=Ad(n[m],n[m+1],h);return a[m](g)};return t?h=>d(vo(n[0],n[s-1],h)):d}function F9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ad(0,e,r);n.push(Mt(t,1,i))}}function U9(n){const e=[0];return F9(e,n.length-1),e}function j9(n,e){return n.map(t=>t*e)}function B9(n,e){return n.map(()=>e||jR).splice(0,n.length-1)}function jp({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=T9(r)?r.map(hP):hP(r),s={done:!1,value:e[0]},a=j9(t&&t.length===e.length?t:U9(e),n),u=nk(a,e,{ease:Array.isArray(i)?i:B9(e,i)});return{calculatedDuration:n,next:d=>(s.value=u(d),s.done=d>=n,s)}}function rk(n,e){return e?n*(1e3/e):0}const $9=5;function ik(n,e,t){const r=Math.max(e-$9,0);return rk(t-n(r),e-r)}const Wy=.001,z9=.01,W9=10,H9=.05,q9=1;function G9({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=vo(H9,q9,a),n=vo(z9,W9,Ji(n)),a<1?(i=h=>{const m=h*a,g=m*n,v=m-t,T=Xv(h,a),A=Math.exp(-g);return Wy-v/T*A},s=h=>{const g=h*a*n,v=g*t+t,T=Math.pow(a,2)*Math.pow(h,2)*n,A=Math.exp(-g),x=Xv(Math.pow(h,2),a);return(-i(h)+Wy>0?-1:1)*((v-T)*A)/x}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-Wy+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,d=Q9(i,s,u);if(n=Sa(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const K9=12;function Q9(n,e,t){let r=t;for(let i=1;i<K9;i++)r=r-n(r)/e(r);return r}function Xv(n,e){return n*Math.sqrt(1-e*e)}const Y9=["duration","bounce"],X9=["stiffness","damping","mass"];function mP(n,e){return e.some(t=>n[t]!==void 0)}function J9(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!mP(n,X9)&&mP(n,Y9)){const t=G9(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function sk({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:v}=J9({...r,velocity:-Ji(r.velocity||0)}),T=g||0,A=d/(2*Math.sqrt(u*h)),x=s-i,P=Ji(Math.sqrt(u/h)),j=Math.abs(x)<5;t||(t=j?.01:2),e||(e=j?.005:.5);let M;if(A<1){const D=Xv(P,A);M=B=>{const Z=Math.exp(-A*P*B);return s-Z*((T+A*P*x)/D*Math.sin(D*B)+x*Math.cos(D*B))}}else if(A===1)M=D=>s-Math.exp(-P*D)*(x+(T+P*x)*D);else{const D=P*Math.sqrt(A*A-1);M=B=>{const Z=Math.exp(-A*P*B),re=Math.min(D*B,300);return s-Z*((T+A*P*x)*Math.sinh(re)+D*x*Math.cosh(re))/D}}return{calculatedDuration:v&&m||null,next:D=>{const B=M(D);if(v)a.done=D>=m;else{let Z=T;D!==0&&(A<1?Z=ik(M,D,B):Z=0);const re=Math.abs(Z)<=t,C=Math.abs(s-B)<=e;a.done=re&&C}return a.value=a.done?s:B,a}}}function gP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],v={done:!1,value:g},T=I=>u!==void 0&&I<u||d!==void 0&&I>d,A=I=>u===void 0?d:d===void 0||Math.abs(u-I)<Math.abs(d-I)?u:d;let x=t*e;const P=g+x,j=a===void 0?P:a(P);j!==P&&(x=j-g);const M=I=>-x*Math.exp(-I/r),D=I=>j+M(I),B=I=>{const b=M(I),O=D(I);v.done=Math.abs(b)<=h,v.value=v.done?j:O};let Z,re;const C=I=>{T(v.value)&&(Z=I,re=sk({keyframes:[v.value,A(v.value)],velocity:ik(D,I,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return C(0),{calculatedDuration:null,next:I=>{let b=!1;return!re&&Z===void 0&&(b=!0,B(I),C(I)),Z!==void 0&&I>Z?re.next(I-Z):(!b&&B(I),v)}}}const Z9=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ct.update(e,!0),stop:()=>is(e),now:()=>An.isProcessing?An.timestamp:performance.now()}},yP=2e4;function vP(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<yP;)e+=t,r=n.next(e);return e>=yP?1/0:e}const ez={decay:gP,inertia:gP,tween:jp,keyframes:jp,spring:sk};function Bp({autoplay:n=!0,delay:e=0,driver:t=Z9,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:m,onUpdate:g,...v}){let T=1,A=!1,x,P;const j=()=>{P=new Promise(N=>{x=N})};j();let M;const D=ez[i]||jp;let B;D!==jp&&typeof r[0]!="number"&&(B=nk([0,100],r,{clamp:!1}),r=[0,100]);const Z=D({...v,keyframes:r});let re;u==="mirror"&&(re=D({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let C="idle",I=null,b=null,O=null;Z.calculatedDuration===null&&s&&(Z.calculatedDuration=vP(Z));const{calculatedDuration:L}=Z;let U=1/0,V=1/0;L!==null&&(U=L+a,V=U*(s+1)-a);let ce=0;const xe=N=>{if(b===null)return;T>0&&(b=Math.min(b,N)),T<0&&(b=Math.min(N-V/T,b)),I!==null?ce=I:ce=Math.round(N-b)*T;const z=ce-e*(T>=0?1:-1),ee=T>=0?z<0:z>V;ce=Math.max(z,0),C==="finished"&&I===null&&(ce=V);let se=ce,oe=Z;if(s){const Ue=Math.min(ce,V)/U;let at=Math.floor(Ue),Lt=Ue%1;!Lt&&Ue>=1&&(Lt=1),Lt===1&&at--,at=Math.min(at,s+1),at%2&&(u==="reverse"?(Lt=1-Lt,a&&(Lt-=a/U)):u==="mirror"&&(oe=re)),se=vo(0,1,Lt)*U}const he=ee?{done:!1,value:r[0]}:oe.next(se);B&&(he.value=B(he.value));let{done:we}=he;!ee&&L!==null&&(we=T>=0?ce>=V:ce<=0);const Me=I===null&&(C==="finished"||C==="running"&&we);return g&&g(he.value),Me&&W(),he},Se=()=>{M&&M.stop(),M=void 0},De=()=>{C="idle",Se(),x(),j(),b=O=null},W=()=>{C="finished",m&&m(),Se(),x()},Y=()=>{if(A)return;M||(M=t(xe));const N=M.now();d&&d(),I!==null?b=N-I:(!b||C==="finished")&&(b=N),C==="finished"&&j(),O=b,I=null,C="running",M.start()};n&&Y();const X={then(N,z){return P.then(N,z)},get time(){return Ji(ce)},set time(N){N=Sa(N),ce=N,I!==null||!M||T===0?I=N:b=M.now()-N/T},get duration(){const N=Z.calculatedDuration===null?vP(Z):Z.calculatedDuration;return Ji(N)},get speed(){return T},set speed(N){N===T||!M||(T=N,X.time=Ji(ce))},get state(){return C},play:Y,pause:()=>{C="paused",I=ce},stop:()=>{A=!0,C!=="idle"&&(C="idle",h&&h(),De())},cancel:()=>{O!==null&&xe(O),De()},complete:()=>{C="finished"},sample:N=>(b=0,xe(N))};return X}function tz(n){let e;return()=>(e===void 0&&(e=n()),e)}const nz=tz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rz=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),bf=10,iz=2e4,sz=(n,e)=>e.type==="spring"||n==="backgroundColor"||!OR(e.ease);function oz(n,e,{onUpdate:t,onComplete:r,...i}){if(!(nz()&&rz.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,d,h=!1;const m=()=>{d=new Promise(D=>{u=D})};m();let{keyframes:g,duration:v=300,ease:T,times:A}=i;if(sz(e,i)){const D=Bp({...i,repeat:0,delay:0});let B={done:!1,value:g[0]};const Z=[];let re=0;for(;!B.done&&re<iz;)B=D.sample(re),Z.push(B.value),re+=bf;A=void 0,g=Z,v=re-bf,T="linear"}const x=m9(n.owner.current,e,g,{...i,duration:v,ease:T,times:A}),P=()=>{h=!1,x.cancel()},j=()=>{h=!0,Ct.update(P),u(),m()};return x.onfinish=()=>{h||(n.set(g9(g,i)),r&&r(),j())},{then(D,B){return d.then(D,B)},attachTimeline(D){return x.timeline=D,x.onfinish=null,Gt},get time(){return Ji(x.currentTime||0)},set time(D){x.currentTime=Sa(D)},get speed(){return x.playbackRate},set speed(D){x.playbackRate=D},get duration(){return Ji(v)},play:()=>{a||(x.play(),is(P))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:D}=x;if(D){const B=Bp({...i,autoplay:!1});n.setWithVelocity(B.sample(D-bf).value,B.sample(D).value,bf)}j()},complete:()=>{h||x.finish()},cancel:j}}function az({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Gt,pause:Gt,stop:Gt,then:s=>(s(),Promise.resolve()),cancel:Gt,complete:Gt});return e?Bp({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const lz={type:"spring",stiffness:500,damping:25,restSpeed:10},uz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),cz={type:"keyframes",duration:.8},dz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hz=(n,{keyframes:e})=>e.length>2?cz:Wa.has(n)?n.startsWith("scale")?uz(e[1]):lz:dz,Jv=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_o.test(e)||e==="0")&&!e.startsWith("url(")),fz=new Set(["brightness","contrast","saturate","opacity"]);function pz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(km)||[];if(!r)return n;const i=t.replace(r,"");let s=fz.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const mz=/([a-z-]*)\(.*?\)/g,Zv={..._o,getAnimatableNone:n=>{const e=n.match(mz);return e?e.map(pz).join(" "):n}},gz={...wR,color:On,backgroundColor:On,outlineColor:On,fill:On,stroke:On,borderColor:On,borderTopColor:On,borderRightColor:On,borderBottomColor:On,borderLeftColor:On,filter:Zv,WebkitFilter:Zv},Jw=n=>gz[n];function ok(n,e){let t=Jw(n);return t!==Zv&&(t=_o),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const ak=n=>/^0[^.\s]+$/.test(n);function yz(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||ak(n)}function vz(n,e,t,r){const i=Jv(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let u;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),yz(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(u=s[h]);if(i&&d.length&&u)for(let h=0;h<d.length;h++){const m=d[h];s[m]=ok(e,u)}return s}function _z({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:d,elapsed:h,...m}){return!!Object.keys(m).length}function Zw(n,e){return n[e]||n.default||n}const wz={skipAnimations:!1},e0=(n,e,t,r={})=>i=>{const s=Zw(r,n)||{},a=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Sa(a);const d=vz(e,n,t,s),h=d[0],m=d[d.length-1],g=Jv(n,h),v=Jv(n,m);let T={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:A=>{e.set(A),s.onUpdate&&s.onUpdate(A)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(_z(s)||(T={...T,...hz(n,T)}),T.duration&&(T.duration=Sa(T.duration)),T.repeatDelay&&(T.repeatDelay=Sa(T.repeatDelay)),!g||!v||p9.current||s.type===!1||wz.skipAnimations)return az(T);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const A=oz(e,n,T);if(A)return A}return Bp(T)};function $p(n){return!!(Yn(n)&&n.add)}const lk=n=>/^\-?\d*\.?\d+$/.test(n);function t0(n,e){n.indexOf(e)===-1&&n.push(e)}function n0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class r0{constructor(){this.subscriptions=[]}add(e){return t0(this.subscriptions,e),()=>n0(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ez=n=>!isNaN(parseFloat(n));class Tz{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=An;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Ct.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ct.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Ez(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new r0);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?rk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tu(n,e){return new Tz(n,e)}const uk=n=>e=>e.test(n),Iz={test:n=>n==="auto",parse:n=>n},ck=[Ha,Fe,Ti,qs,x$,A$,Iz],Oc=n=>ck.find(uk(n)),Sz=[...ck,On,_o],Pz=n=>Sz.find(uk(n));function Cz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Tu(t))}function bz(n,e){const t=Nm(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const u=W$(s[a]);Cz(n,a,u)}}function Az(n,e,t){var r,i;const s=Object.keys(e).filter(u=>!n.hasValue(u)),a=s.length;if(a)for(let u=0;u<a;u++){const d=s[u],h=e[d];let m=null;Array.isArray(h)&&(m=h[0]),m===null&&(m=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),m!=null&&(typeof m=="string"&&(lk(m)||ak(m))?m=parseFloat(m):!Pz(m)&&_o.test(h)&&(m=ok(d,h)),n.addValue(d,Tu(m,{owner:n})),t[d]===void 0&&(t[d]=m),m!==null&&n.setBaseTarget(d,m))}}function xz(n,e){return e?(e[n]||e.default||e).from:void 0}function Rz(n,e,t){const r={};for(const i in n){const s=xz(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function kz({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Dz(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function dk(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in u){const v=n.getValue(g),T=u[g];if(!v||T===void 0||m&&kz(m,g))continue;const A={delay:t,elapsed:0,...Zw(s||{},g)};if(window.HandoffAppearAnimations){const j=n.getProps()[hR];if(j){const M=window.HandoffAppearAnimations(j,g,v,Ct);M!==null&&(A.elapsed=M,A.isHandoff=!0)}}let x=!A.isHandoff&&!Dz(v,T);if(A.type==="spring"&&(v.getVelocity()||A.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(e0(g,v,T,n.shouldReduceMotion&&Wa.has(g)?{type:!1}:A));const P=v.animation;$p(d)&&(d.add(g),P.then(()=>d.remove(g))),h.push(P)}return a&&Promise.all(h).then(()=>{a&&bz(n,a)}),h}function e_(n,e,t={}){const r=Nm(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(dk(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return Nz(n,e,h+d,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function Nz(n,e,t=0,r=0,i=1,s){const a=[],u=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(Vz).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(e_(h,e,{...s,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function Vz(n,e){return n.sortNodePosition(e)}function Mz(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>e_(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=e_(n,e,t);else{const i=typeof e=="function"?Nm(n,e,t.custom):e;r=Promise.all(dk(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const Oz=[...Uw].reverse(),Lz=Uw.length;function Fz(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Mz(n,t,r)))}function Uz(n){let e=Fz(n);const t=Bz();let r=!0;const i=(d,h)=>{const m=Nm(n,h);if(m){const{transition:g,transitionEnd:v,...T}=m;d={...d,...T,...v}}return d};function s(d){e=d(n)}function a(d,h){const m=n.getProps(),g=n.getVariantContext(!0)||{},v=[],T=new Set;let A={},x=1/0;for(let j=0;j<Lz;j++){const M=Oz[j],D=t[M],B=m[M]!==void 0?m[M]:g[M],Z=Cd(B),re=M===h?D.isActive:null;re===!1&&(x=j);let C=B===g[M]&&B!==m[M]&&Z;if(C&&r&&n.manuallyAnimateOnMount&&(C=!1),D.protectedKeys={...A},!D.isActive&&re===null||!B&&!D.prevProp||xm(B)||typeof B=="boolean")continue;let b=jz(D.prevProp,B)||M===h&&D.isActive&&!C&&Z||j>x&&Z,O=!1;const L=Array.isArray(B)?B:[B];let U=L.reduce(i,{});re===!1&&(U={});const{prevResolvedValues:V={}}=D,ce={...V,...U},xe=Se=>{b=!0,T.has(Se)&&(O=!0,T.delete(Se)),D.needsAnimating[Se]=!0};for(const Se in ce){const De=U[Se],W=V[Se];if(A.hasOwnProperty(Se))continue;let Y=!1;Fp(De)&&Fp(W)?Y=!VR(De,W):Y=De!==W,Y?De!==void 0?xe(Se):T.add(Se):De!==void 0&&T.has(Se)?xe(Se):D.protectedKeys[Se]=!0}D.prevProp=B,D.prevResolvedValues=U,D.isActive&&(A={...A,...U}),r&&n.blockInitialAnimation&&(b=!1),b&&(!C||O)&&v.push(...L.map(Se=>({animation:Se,options:{type:M,...d}})))}if(T.size){const j={};T.forEach(M=>{const D=n.getBaseTarget(M);D!==void 0&&(j[M]=D)}),v.push({animation:j})}let P=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(v):Promise.resolve()}function u(d,h,m){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(T=>{var A;return(A=T.animationState)===null||A===void 0?void 0:A.setActive(d,h)}),t[d].isActive=h;const v=a(m,d);for(const T in t)t[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t}}function jz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!VR(e,n):!1}function oa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bz(){return{animate:oa(!0),whileInView:oa(),whileHover:oa(),whileTap:oa(),whileDrag:oa(),whileFocus:oa(),exit:oa()}}class $z extends bo{constructor(e){super(e),e.animationState||(e.animationState=Uz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),xm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let zz=0;class Wz extends bo{constructor(){super(...arguments),this.id=zz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Hz={animation:{Feature:$z},exit:{Feature:Wz}},_P=(n,e)=>Math.abs(n-e);function qz(n,e){const t=_P(n.x,e.x),r=_P(n.y,e.y);return Math.sqrt(t**2+r**2)}class hk{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=qy(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=qz(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:A}=g,{timestamp:x}=An;this.history.push({...A,timestamp:x});const{onStart:P,onMove:j}=this.handlers;v||(P&&P(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Hy(v,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:A,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=qy(g.type==="pointercancel"?this.lastMoveEventInfo:Hy(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,P),A&&A(g,P)},!xR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=Dm(e),u=Hy(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=An;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,qy(u,this.history)),this.removeListeners=lo(Xi(this.contextWindow,"pointermove",this.handlePointerMove),Xi(this.contextWindow,"pointerup",this.handlePointerUp),Xi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),is(this.updatePoint)}}function Hy(n,e){return e?{point:e(n.point)}:n}function wP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function qy({point:n},e){return{point:n,delta:wP(n,fk(e)),offset:wP(n,Gz(e)),velocity:Kz(e,.1)}}function Gz(n){return n[0]}function fk(n){return n[n.length-1]}function Kz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=fk(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Sa(e)));)t--;if(!r)return{x:0,y:0};const s=Ji(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function hr(n){return n.max-n.min}function t_(n,e=0,t=.01){return Math.abs(n-e)<=t}function EP(n,e,t,r=.5){n.origin=r,n.originPoint=Mt(e.min,e.max,n.origin),n.scale=hr(t)/hr(e),(t_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Mt(t.min,t.max,n.origin)-n.originPoint,(t_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function sd(n,e,t,r){EP(n.x,e.x,t.x,r?r.originX:void 0),EP(n.y,e.y,t.y,r?r.originY:void 0)}function TP(n,e,t){n.min=t.min+e.min,n.max=n.min+hr(e)}function Qz(n,e,t){TP(n.x,e.x,t.x),TP(n.y,e.y,t.y)}function IP(n,e,t){n.min=e.min-t.min,n.max=n.min+hr(e)}function od(n,e,t){IP(n.x,e.x,t.x),IP(n.y,e.y,t.y)}function Yz(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Mt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Mt(t,n,r.max):Math.min(n,t)),n}function SP(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Xz(n,{top:e,left:t,bottom:r,right:i}){return{x:SP(n.x,t,i),y:SP(n.y,e,r)}}function PP(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Jz(n,e){return{x:PP(n.x,e.x),y:PP(n.y,e.y)}}function Zz(n,e){let t=.5;const r=hr(n),i=hr(e);return i>r?t=Ad(e.min,e.max-r,n.min):r>i&&(t=Ad(n.min,n.max-i,e.min)),vo(0,1,t)}function eW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const n_=.35;function tW(n=n_){return n===!1?n=0:n===!0&&(n=n_),{x:CP(n,"left","right"),y:CP(n,"top","bottom")}}function CP(n,e,t){return{min:bP(n,e),max:bP(n,t)}}function bP(n,e){return typeof n=="number"?n:n[e]||0}const AP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gl=()=>({x:AP(),y:AP()}),xP=()=>({min:0,max:0}),tn=()=>({x:xP(),y:xP()});function Ir(n){return[n("x"),n("y")]}function pk({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function nW({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function rW(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Gy(n){return n===void 0||n===1}function r_({scale:n,scaleX:e,scaleY:t}){return!Gy(n)||!Gy(e)||!Gy(t)}function ha(n){return r_(n)||mk(n)||n.z||n.rotate||n.rotateX||n.rotateY}function mk(n){return RP(n.x)||RP(n.y)}function RP(n){return n&&n!=="0%"}function zp(n,e,t){const r=n-t,i=e*r;return t+i}function kP(n,e,t,r,i){return i!==void 0&&(n=zp(n,i,r)),zp(n,t,r)+e}function i_(n,e=0,t=1,r,i){n.min=kP(n.min,e,t,r,i),n.max=kP(n.max,e,t,r,i)}function gk(n,{x:e,y:t}){i_(n.x,e.translate,e.scale,e.originPoint),i_(n.y,t.translate,t.scale,t.originPoint)}function iW(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Kl(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,gk(n,a)),r&&ha(s.latestValues)&&Kl(n,s.latestValues))}e.x=DP(e.x),e.y=DP(e.y)}function DP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Gs(n,e){n.min=n.min+e,n.max=n.max+e}function NP(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=Mt(n.min,n.max,s);i_(n,e[t],e[r],a,e.scale)}const sW=["x","scaleX","originX"],oW=["y","scaleY","originY"];function Kl(n,e){NP(n.x,e,sW),NP(n.y,e,oW)}function yk(n,e){return pk(rW(n.getBoundingClientRect(),e))}function aW(n,e,t){const r=yk(n,t),{scroll:i}=e;return i&&(Gs(r.x,i.offset.x),Gs(r.y,i.offset.y)),r}const vk=({current:n})=>n?n.ownerDocument.defaultView:null,lW=new WeakMap;class uW{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Dm(m,"page").point)},s=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:A}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=kR(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ir(P=>{let j=this.getAxisMotionValue(P).get()||0;if(Ti.test(j)){const{projection:M}=this.visualElement;if(M&&M.layout){const D=M.layout.layoutBox[P];D&&(j=hr(D)*(parseFloat(j)/100))}}this.originPoint[P]=j}),A&&Ct.update(()=>A(m,g),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:A,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:P}=g;if(T&&this.currentDirection===null){this.currentDirection=cW(P),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,P),this.updateAxis("y",g.point,P),this.visualElement.render(),x&&x(m,g)},u=(m,g)=>this.stop(m,g),d=()=>Ir(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new hk(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:vk(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ct.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Af(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Yz(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Hl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Xz(i.layoutBox,t):this.constraints=!1,this.elastic=tW(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ir(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=eW(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=aW(r,i.root,this.visualElement.getTransformPagePoint());let a=Jz(i.layout.layoutBox,s);if(t){const u=t(nW(a));this.hasMutatedConstraints=!!u,u&&(a=pk(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=Ir(m=>{if(!Af(m,t,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const v=i?200:1e6,T=i?40:1e7,A={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,A)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(e0(e,r,0,t))}stopAnimation(){Ir(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ir(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ir(t=>{const{drag:r}=this.getProps();if(!Af(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t];s.set(e[t]-Mt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Hl(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ir(a=>{const u=this.getAxisMotionValue(a);if(u){const d=u.get();i[a]=Zz({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ir(a=>{if(!Af(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(Mt(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;lW.set(this.visualElement,this);const e=this.visualElement.current,t=Xi(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Hl(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=Yi(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ir(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=n_,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function Af(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function cW(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class dW extends bo{constructor(e){super(e),this.removeGroupControls=Gt,this.removeListeners=Gt,this.controls=new uW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const VP=n=>(e,t)=>{n&&Ct.update(()=>n(e,t))};class hW extends bo{constructor(){super(...arguments),this.removePointerDownListener=Gt}onPointerDown(e){this.session=new hk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:VP(e),onStart:VP(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Ct.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=Xi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function fW(){const n=k.useContext(Lw);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=k.useId();return k.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Qf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function MP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Lc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Fe.test(n))n=parseFloat(n);else return n;const t=MP(n,e.target.x),r=MP(n,e.target.y);return`${t}% ${r}%`}},pW={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=_o.parse(n);if(i.length>5)return r;const s=_o.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=d;const h=Mt(u,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class mW extends nn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;E$(gW),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Qf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ct.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _k(n){const[e,t]=fW(),r=k.useContext(pR);return nn.createElement(mW,{...n,layoutGroup:r,switchLayoutGroup:k.useContext(mR),isPresent:e,safeToRemove:t})}const gW={borderRadius:{...Lc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lc,borderTopRightRadius:Lc,borderBottomLeftRadius:Lc,borderBottomRightRadius:Lc,boxShadow:pW},wk=["TopLeft","TopRight","BottomLeft","BottomRight"],yW=wk.length,OP=n=>typeof n=="string"?parseFloat(n):n,LP=n=>typeof n=="number"||Fe.test(n);function vW(n,e,t,r,i,s){i?(n.opacity=Mt(0,t.opacity!==void 0?t.opacity:1,_W(r)),n.opacityExit=Mt(e.opacity!==void 0?e.opacity:1,0,wW(r))):s&&(n.opacity=Mt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<yW;a++){const u=`border${wk[a]}Radius`;let d=FP(e,u),h=FP(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||LP(d)===LP(h)?(n[u]=Math.max(Mt(OP(d),OP(h),r),0),(Ti.test(h)||Ti.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=Mt(e.rotate||0,t.rotate||0,r))}function FP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const _W=Ek(0,.5,zR),wW=Ek(.5,.95,Gt);function Ek(n,e,t){return r=>r<n?0:r>e?1:t(Ad(n,e,r))}function UP(n,e){n.min=e.min,n.max=e.max}function Tr(n,e){UP(n.x,e.x),UP(n.y,e.y)}function jP(n,e,t,r,i){return n-=e,n=zp(n,1/t,r),i!==void 0&&(n=zp(n,1/i,r)),n}function EW(n,e=0,t=1,r=.5,i,s=n,a=n){if(Ti.test(e)&&(e=parseFloat(e),e=Mt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Mt(s.min,s.max,r);n===s&&(u-=e),n.min=jP(n.min,e,t,u,i),n.max=jP(n.max,e,t,u,i)}function BP(n,e,[t,r,i],s,a){EW(n,e[t],e[r],e[i],e.scale,s,a)}const TW=["x","scaleX","originX"],IW=["y","scaleY","originY"];function $P(n,e,t,r){BP(n.x,e,TW,t?t.x:void 0,r?r.x:void 0),BP(n.y,e,IW,t?t.y:void 0,r?r.y:void 0)}function zP(n){return n.translate===0&&n.scale===1}function Tk(n){return zP(n.x)&&zP(n.y)}function SW(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Ik(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function WP(n){return hr(n.x)/hr(n.y)}class PW{constructor(){this.members=[]}add(e){t0(this.members,e),e.scheduleRender()}remove(e){if(n0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HP(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:m}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const CW=(n,e)=>n.depth-e.depth;class bW{constructor(){this.children=[],this.isDirty=!1}add(e){t0(this.children,e),this.isDirty=!0}remove(e){n0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(CW),this.isDirty=!1,this.children.forEach(e)}}function AW(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(is(r),n(s-e))};return Ct.read(r,!0),()=>is(r)}function xW(n){window.MotionDebug&&window.MotionDebug.record(n)}function RW(n){return n instanceof SVGElement&&n.tagName!=="svg"}function kW(n,e,t){const r=Yn(n)?n:Tu(n);return r.start(e0("",r,e,t)),r.animation}const qP=["","X","Y","Z"],DW={visibility:"hidden"},GP=1e3;let NW=0;const fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Sk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=NW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fa.totalNodes=fa.resolvedTargetDeltas=fa.recalculatedProjection=0,this.nodes.forEach(OW),this.nodes.forEach(BW),this.nodes.forEach($W),this.nodes.forEach(LW),xW(fa)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new bW)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new r0),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=RW(a),this.instance=a;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=AW(v,250),Qf.hasAnimatedSinceResize&&(Qf.hasAnimatedSinceResize=!1,this.nodes.forEach(QP))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||m.getDefaultTransition()||GW,{onLayoutAnimationStart:P,onLayoutAnimationComplete:j}=m.getProps(),M=!this.targetLayout||!Ik(this.targetLayout,A)||T,D=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||D||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,D);const B={...Zw(x,"layout"),onPlay:P,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||QP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,is(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zW),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KP);return}this.isUpdating||this.nodes.forEach(UW),this.isUpdating=!1,this.nodes.forEach(jW),this.nodes.forEach(VW),this.nodes.forEach(MW),this.clearAllSnapshots();const u=performance.now();An.delta=vo(0,1e3/60,u-An.timestamp),An.timestamp=u,An.isProcessing=!0,Ly.update.process(An),Ly.preRender.process(An),Ly.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(FW),this.sharedNodes.forEach(WW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!Tk(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||ha(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),KW(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return tn();const u=a.measureViewportBox(),{scroll:d}=this.root;return d&&(Gs(u.x,d.offset.x),Gs(u.y,d.offset.y)),u}removeElementScroll(a){const u=tn();Tr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:g}=h;if(h!==this.root&&m&&g.layoutScroll){if(m.isRoot){Tr(u,a);const{scroll:v}=this.root;v&&(Gs(u.x,-v.offset.x),Gs(u.y,-v.offset.y))}Gs(u.x,m.offset.x),Gs(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const d=tn();Tr(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Kl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ha(m.latestValues)&&Kl(d,m.latestValues)}return ha(this.latestValues)&&Kl(d,this.latestValues),d}removeTransform(a){const u=tn();Tr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ha(h.latestValues))continue;r_(h.latestValues)&&h.updateSnapshot();const m=tn(),g=h.measurePageBox();Tr(m,g),$P(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ha(this.latestValues)&&$P(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),od(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),gk(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),od(this.relativeTargetOrigin,this.target,T.target),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||r_(this.parent.latestValues)||mk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===An.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Tr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;iW(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:A}=u;if(!A){this.projectionTransform&&(this.projectionDelta=Gl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Gl(),this.projectionDeltaWithTransform=Gl());const x=this.projectionTransform;sd(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=HP(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=Gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=tn(),T=d?d.source:void 0,A=this.layout?this.layout.source:void 0,x=T!==A,P=this.getStack(),j=!P||P.members.length<=1,M=!!(x&&!j&&this.options.crossfade===!0&&!this.path.some(qW));this.animationProgress=0;let D;this.mixTargetDelta=B=>{const Z=B/1e3;YP(g.x,a.x,Z),YP(g.y,a.y,Z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(od(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HW(this.relativeTarget,this.relativeTargetOrigin,v,Z),D&&SW(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=tn()),Tr(D,this.relativeTarget)),x&&(this.animationValues=m,vW(m,h,this.latestValues,Z,M,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(is(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{Qf.hasAnimatedSinceResize=!0,this.currentAnimation=kW(0,GP,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:m}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&Pk(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||tn();const g=hr(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=hr(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Tr(u,d),Kl(u,m),sd(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new PW),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const h={};for(let m=0;m<qP.length;m++){const g="rotate"+qP[m];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const m in h)a.setStaticValue(m,h[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return DW;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Kf(a?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Kf(a?.pointerEvents)||""),this.hasProjected&&!ha(this.latestValues)&&(x.transform=m?m({},""):"none",this.hasProjected=!1),x}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=HP(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:T,y:A}=this.projectionDelta;h.transformOrigin=`${T.origin*100}% ${A.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Op){if(v[x]===void 0)continue;const{correct:P,applyTo:j}=Op[x],M=h.transform==="none"?v[x]:P(v[x],g);if(j){const D=j.length;for(let B=0;B<D;B++)h[j[B]]=M}else h[x]=M}return this.options.layoutId&&(h.pointerEvents=g===this?Kf(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(KP),this.root.sharedNodes.clear()}}}function VW(n){n.updateLayout()}function MW(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Ir(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],T=hr(v);v.min=r[g].min,v.max=v.min+T}):Pk(s,t.layoutBox,r)&&Ir(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],T=hr(r[g]);v.max=v.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+T)});const u=Gl();sd(u,r,t.layoutBox);const d=Gl();a?sd(d,n.applyTransform(i,!0),t.measuredBox):sd(d,r,t.layoutBox);const h=!Tk(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const A=tn();od(A,t.layoutBox,v.layoutBox);const x=tn();od(x,r,T.layoutBox),Ik(A,x)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=A,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function OW(n){fa.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function LW(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function FW(n){n.clearSnapshot()}function KP(n){n.clearMeasurements()}function UW(n){n.isLayoutDirty=!1}function jW(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function QP(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function BW(n){n.resolveTargetDelta()}function $W(n){n.calcProjection()}function zW(n){n.resetRotation()}function WW(n){n.removeLeadSnapshot()}function YP(n,e,t){n.translate=Mt(e.translate,0,t),n.scale=Mt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function XP(n,e,t,r){n.min=Mt(e.min,t.min,r),n.max=Mt(e.max,t.max,r)}function HW(n,e,t,r){XP(n.x,e.x,t.x,r),XP(n.y,e.y,t.y,r)}function qW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const GW={duration:.45,ease:[.4,0,.1,1]},JP=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),ZP=JP("applewebkit/")&&!JP("chrome/")?Math.round:Gt;function eC(n){n.min=ZP(n.min),n.max=ZP(n.max)}function KW(n){eC(n.x),eC(n.y)}function Pk(n,e,t){return n==="position"||n==="preserve-aspect"&&!t_(WP(e),WP(t),.2)}const QW=Sk({attachResizeListener:(n,e)=>Yi(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ky={current:void 0},Ck=Sk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ky.current){const n=new QW({});n.mount(window),n.setOptions({layoutScroll:!0}),Ky.current=n}return Ky.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),YW={pan:{Feature:hW},drag:{Feature:dW,ProjectionNode:Ck,MeasureLayout:_k}},XW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function JW(n){const e=XW.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function s_(n,e,t=1){const[r,i]=JW(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return lk(a)?parseFloat(a):a}else return Kv(i)?s_(i,e,t+1):i}function ZW(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!Kv(s))return;const a=s_(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!Kv(s))continue;const a=s_(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const eH=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),bk=n=>eH.has(n),tH=n=>Object.keys(n).some(bk),tC=n=>n===Ha||n===Fe,nC=(n,e)=>parseFloat(n.split(", ")[e]),rC=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return nC(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?nC(s[1],n):0}},nH=new Set(["x","y","z"]),rH=Qd.filter(n=>!nH.has(n));function iH(n){const e=[];return rH.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Iu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:rC(4,13),y:rC(5,14)};Iu.translateX=Iu.x;Iu.translateY=Iu.y;const sH=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,u={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{u[h]=Iu[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const m=e.getValue(h);m&&m.jump(u[h]),n[h]=Iu[h](d,s)}),n},oH=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(bk);let s=[],a=!1;const u=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let m=t[d],g=Oc(m);const v=e[d];let T;if(Fp(v)){const A=v.length,x=v[0]===null?1:0;m=v[x],g=Oc(m);for(let P=x;P<A&&v[P]!==null;P++)T?Kw(Oc(v[P])===T):T=Oc(v[P])}else T=Oc(v);if(g!==T)if(tC(g)&&tC(T)){const A=h.get();typeof A=="string"&&h.set(parseFloat(A)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&T===Fe&&(e[d]=v.map(parseFloat))}else g?.transform&&T?.transform&&(m===0||v===0)?m===0?h.set(T.transform(m)):e[d]=g.transform(v):(a||(s=iH(n),a=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,h=sH(e,n,u);return s.length&&s.forEach(([m,g])=>{n.getValue(m).set(g)}),n.render(),Am&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function aH(n,e,t,r){return tH(e)?oH(n,e,t,r):{target:e,transitionEnd:r}}const lH=(n,e,t,r)=>{const i=ZW(n,e,r);return e=i.target,r=i.transitionEnd,aH(n,e,t,r)},o_={current:null},Ak={current:!1};function uH(){if(Ak.current=!0,!!Am)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>o_.current=n.matches;n.addListener(e),e()}else o_.current=!1}function cH(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(Yn(s))n.addValue(i,s),$p(r)&&r.add(i);else if(Yn(a))n.addValue(i,Tu(s,{owner:n})),$p(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const u=n.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,Tu(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const iC=new WeakMap,xk=Object.keys(bd),dH=xk.length,sC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],hH=jw.length;class fH{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ct.render(this.render,!1,!0);const{latestValues:u,renderState:d}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=Rm(t),this.isVariantNode=fR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{});for(const g in m){const v=m[g];u[g]!==void 0&&Yn(v)&&(v.set(u[g],!1),$p(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,iC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Ak.current||uH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){iC.delete(this.current),this.projection&&this.projection.unmount(),is(this.notifyUpdate),is(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=Wa.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ct.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,u;for(let d=0;d<dH;d++){const h=xk[d],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=bd[h];v&&(a=v),m(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!m||g&&Hl(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<sC.length;r++){const i=sC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=cH(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<hH;r++){const i=jw[r],s=this.props[i];(Cd(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Tu(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=Gw(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Yn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new r0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Rk extends fH{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=Rz(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){Az(this,r,a);const u=lH(this,r,a,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function pH(n){return window.getComputedStyle(n)}class mH extends Rk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Wa.has(t)){const r=Jw(t);return r&&r.default||0}else{const r=pH(e),i=(vR(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return yk(e,t)}build(e,t,r,i){$w(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return qw(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){SR(e,t,r,i)}}class gH extends Rk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Wa.has(t)){const r=Jw(t);return r&&r.default||0}return t=PR.has(t)?t:Fw(t),e.getAttribute(t)}measureInstanceViewportBox(){return tn()}scrapeMotionValuesFromProps(e,t){return bR(e,t)}build(e,t,r,i){Ww(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){CR(e,t,r,i)}mount(e){this.isSVGTag=Hw(e.tagName),super.mount(e)}}const yH=(n,e)=>Bw(n)?new gH(e,{enableHardwareAcceleration:!1}):new mH(e,{enableHardwareAcceleration:!0}),vH={layout:{ProjectionNode:Ck,MeasureLayout:_k}},_H={...Hz,...d9,...YW,...vH},xf=_$((n,e)=>J$(n,e,_H,yH));function wH(){const[n,e]=k.useState(!1),[t,r]=k.useState(null);k.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let a,u;const d=h=>{h&&h.addEventListener("statechange",()=>{h.state==="installed"&&navigator.serviceWorker.controller&&(r(h),e(!0))})};return navigator.serviceWorker.ready.then(h=>{a=h,h.waiting&&(r(h.waiting),e(!0)),u=()=>{d(h.installing)},h.addEventListener("updatefound",u)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),a&&u&&a.removeEventListener("updatefound",u)}},[]);const i=()=>{t&&t.postMessage({type:"SKIP_WAITING"}),e(!1)};return n?K.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:K.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[K.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),K.jsxs("div",{className:"flex items-center justify-end gap-2",children:[K.jsx(eu,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),K.jsx(eu,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}function EH(){return k.useEffect(()=>{const n=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${e}px`)};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),null}const TH=k.lazy(()=>Si(()=>import("./AuthPage-BcuPcsIo.js"),__vite__mapDeps([0,1,2,3]))),IH=k.lazy(()=>Si(()=>import("./DashboardPage-DzG9MXDx.js"),__vite__mapDeps([4,5,6,7,8,9,10,1,11,12,3,13]))),SH=k.lazy(()=>Si(()=>import("./ArchivedCyclesPage-uCOwMjRh.js"),__vite__mapDeps([14,8,15,7,6,9]))),PH=k.lazy(()=>Si(()=>import("./CycleDetailPage-BxKgAdQS.js"),__vite__mapDeps([16,9,8,6,7,15,17,5,10,1,11,12,3,18]))),CH=k.lazy(()=>Si(()=>import("./SettingsPage-BrwviuS0.js"),__vite__mapDeps([19,1,11,8,2]))),bH=k.lazy(()=>Si(()=>import("./ChartPage-HeJkwvpP.js"),__vite__mapDeps([20,21,11,8,7,13,12,10,1,6,3,18]))),AH=k.lazy(()=>Si(()=>import("./RecordsPage-DlKFVGTf.js"),__vite__mapDeps([17,5,6,7,8,9,10,1,11,12,3,15])));function Ll({children:n}){const{user:e}=Im();return e?n:K.jsx(Xy,{to:"/auth",replace:!0})}function xH(){const{user:n,loadingAuth:e}=Im(),t=wo();if(e)return K.jsx(Bv,{children:K.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[K.jsx(xf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),K.jsx(xf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const r=n?K.jsx(da,{children:K.jsx("div",{className:"flex min-h-app items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):K.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[K.jsx(xf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),K.jsx(xf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return K.jsx(Bv,{children:K.jsx(k.Suspense,{fallback:r,children:K.jsx(a5,{children:K.jsx(h6,{FallbackComponent:k1,children:K.jsxs(UN,{children:[K.jsx(qi,{path:"/auth",element:n?K.jsx(Xy,{to:"/",replace:!0}):K.jsx(TH,{})}),K.jsx(qi,{path:"/",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(IH,{})})})}),K.jsx(qi,{path:"/chart/:cycleId?",element:K.jsx(Ll,{children:K.jsx(bH,{})})}),K.jsx(qi,{path:"/records",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(AH,{})})})}),K.jsx(qi,{path:"/archived-cycles",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(SH,{})})})}),K.jsx(qi,{path:"/settings",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(CH,{})})})}),K.jsx(qi,{path:"/cycle/:cycleId",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(PH,{})})})}),K.jsx(qi,{path:"*",element:K.jsx(Xy,{to:n?"/":"/auth",replace:!0})})]})},t.pathname)})})})}function RH(){return K.jsxs(GN,{basename:"/",children:[K.jsx(EH,{}),K.jsx(wH,{}),K.jsxs($4,{children:[K.jsx(c6,{children:K.jsx(d6,{children:K.jsx(tV,{children:K.jsx(xH,{})})})}),K.jsx(l$,{})]})]})}if(typeof window<"u"){const{hostname:n}=window.location;if(n.endsWith(".firebaseapp.com")){const e=new URL(window.location.href);e.hostname=n.replace(".firebaseapp.com",".web.app"),window.location.replace(e.toString())}}qD.createRoot(document.getElementById("root")).render(K.jsx(nn.StrictMode,{children:K.jsx(RH,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=new URL("sw.js","/");navigator.serviceWorker.register(n).catch(e=>{console.error("Service worker registration failed:",e)})});export{Dn as $,m6 as A,eu as B,y6 as C,Ua as D,D1 as E,U1 as F,lr as G,ja as H,Pd as I,za as J,LH as K,YN as L,s6 as M,c_ as N,wo as O,bi as P,j4 as Q,nn as R,da as S,a$ as T,_6 as U,v6 as V,s5 as W,w6 as X,Et as Y,z4 as Z,Si as _,p_ as a,u$ as a0,Ct as a1,$$ as a2,Lw as a3,pR as a4,BB as a5,$t as a6,Nu as a7,bp as a8,n1 as a9,K4 as aa,Pm as ab,O5 as ac,F1 as ad,M1 as ae,p5 as af,U5 as ag,J6 as ah,R1 as ai,u_ as aj,FH as ak,OH as al,_1 as am,HD as an,Ay as ao,Rc as ap,kc as aq,Sj as ar,kH as as,a_ as at,ye as au,ww as b,Vu as c,xt as d,Ce as e,_e as f,Ln as g,Ak as h,uH as i,K as j,He as k,Sm as l,xf as m,Q4 as n,st as o,o_ as p,q4 as q,k as r,ox as s,g6 as t,Im as u,DH as v,v1 as w,Hj as x,rs as y,qf as z};
