import{c as f,j as e,B as o,r as A,g as x}from"./index-1Lm-G_PV.js";import{O as W}from"./OverlapWarningDialog-BV8YTdug.js";import{u as N}from"./badge-BIiH4rlp.js";import{D as w,a as D,b as k,c as M,d as C,e as S}from"./useCycleData-O3LOYKfm.js";import{I as Y}from"./input-Dw-8uckr.js";const _=f("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ee=f("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Z=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),j=t=>{if(!t)return"";const a=new Date(t);if(Number.isNaN(a.getTime()))return t;const r=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getFullYear());return`${r}/${s}/${i}`},te=({cycle:t,startDate:a,endDate:r,onStartDateChange:s,onEndDateChange:i,onSave:p,onCancel:l,isProcessing:c=!1,dateError:h="",includeEndDate:d=!0,showOverlapDialog:n=!1,overlapCycle:$=null,onConfirmOverlap:E,onCancelOverlap:F,title:L="Editar fechas del ciclo",description:I="Actualiza las fechas de inicio y fin del ciclo. Guarda los cambios cuando termines.",saveLabel:T="Guardar",cancelLabel:q="Cancelar",onClearError:m,className:B="mb-6 mx-auto w-full max-w-xl",onDeleteCycle:g,deleteTitle:H="Eliminar ciclo",deleteDescription:b="Esta acción no se puede deshacer. Se eliminarán todos los registros asociados.",deleteLabel:O="Eliminar ciclo",isDeletingCycle:z=!1})=>{const y=t?.startDate?j(t.startDate):null,G=t?.endDate?j(t.endDate):"En curso",v=y?`Fecha actual: ${y}${d?` — ${G}`:""}`:null,P=u=>{m&&m(),s?.(u.target.value)},R=u=>{m&&m(),i?.(u.target.value)},V=u=>{u.preventDefault(),p?.()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${B} rounded-3xl border border-rose-100 bg-white/90 p-5 shadow-md`,children:e.jsx("form",{onSubmit:V,className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-titulo mb-1",children:L}),e.jsx("p",{className:"text-sm text-slate-600",children:I}),v&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v}),e.jsxs("div",{className:`grid ${d?"grid-cols-2 gap-4":"grid-cols-1 gap-4"}`,children:[e.jsxs("label",{className:"flex h-full flex-col text-sm text-slate-700",children:["Inicio del ciclo",e.jsx("input",{type:"date",value:a||"",onChange:P,className:"mt-1 w-full rounded-lg border border-fertiliapp-suave bg-white px-3 py-2 text-slate-800 focus:border-fertiliapp-suave focus:outline-none focus:ring-2 focus:ring-fertiliapp-suave"})]}),d&&e.jsxs("label",{className:"flex h-full flex-col text-sm text-slate-700",children:["Fin del ciclo",e.jsx("input",{type:"date",value:r||"",onChange:R,className:"mt-1 w-full rounded-lg border border-fertiliapp-suave bg-white px-3 py-2 text-slate-800 focus:border-fertiliapp-suave focus:outline-none focus:ring-2 focus:ring-fertiliapp-suave"})]})]}),h&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:h}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 justify-center",children:[e.jsx(o,{type:"button",variant:"outline",onClick:l,className:"border-fertiliapp-suave text-titulo hover:brightness-95",disabled:c,children:q}),e.jsx(o,{type:"submit",className:"bg-fertiliapp-fuerte text-white shadow hover:brightness-95",disabled:c,children:T})]}),g&&e.jsxs("div",{className:"mt-6 rounded-3xl bg-alerta-2-suave p-4 text-left",children:[e.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:H}),b&&e.jsx("p",{className:"text-sm text-slate-800 mb-3",children:b}),e.jsxs(o,{type:"button",onClick:g,disabled:c||z,className:"w-full sm:w-auto bg-alerta-2 hover:brightness-95 text-white shadow-md",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),O]})]})]})})}),e.jsx(W,{isOpen:n,conflictCycle:$,onCancel:F,onConfirm:E})]})},ae=({isOpen:t,onClose:a,onConfirm:r,currentCycleStartDate:s})=>{const[i,p]=A.useState(x(new Date,"yyyy-MM-dd"));N(t,a);const l=!s,c=()=>{r(i)},h=l?"":x(new Date(s),"dd/MM/yyyy"),d=(()=>{if(l)return"";const n=new Date(i);return n.setDate(n.getDate()-1),x(n,"dd/MM/yyyy")})();return e.jsx(w,{open:t,onOpenChange:a,children:e.jsxs(D,{className:"bg-white border-pink-100 text-gray-800 rounded-3xl",children:[e.jsxs(k,{children:[e.jsx(M,{children:"Iniciar nuevo ciclo"}),e.jsx(C,{className:"text-gray-600",children:l?"Este será tu primer ciclo. Selecciona la fecha de inicio.":`¿Estás seguro de que quieres iniciar un nuevo ciclo? Los datos del ciclo actual (${h} - ${d}) serán archivados.`})]}),e.jsxs("div",{className:"my-4 space-y-2",children:[e.jsx("label",{htmlFor:"startDate",className:"text-gray-700 text-sm",children:"Fecha de inicio del nuevo ciclo"}),e.jsx(Y,{id:"startDate",type:"date",value:i,onChange:n=>p(n.target.value),max:x(new Date,"yyyy-MM-dd"),min:l?void 0:x(new Date(s),"yyyy-MM-dd"),className:"bg-gray-50 border-gray-200 text-gray-800"})]}),e.jsxs(S,{className:"sm:justify-end",children:[e.jsx(o,{variant:"outline",onClick:a,className:"border-gray-300 text-subtitulo hover:brightness-95",children:"Cancelar"}),e.jsx(o,{variant:"primary",onClick:c,className:"bg-fertiliapp-fuerte hover:brightness-95 text-white",children:l?"Iniciar ciclo":"Confirmar nuevo ciclo"})]})]})})},se=({isOpen:t,onClose:a,onConfirm:r})=>(N(t,a),e.jsx(w,{open:t,onOpenChange:s=>{s||a()},children:e.jsxs(D,{className:"bg-white/95 backdrop-blur border border-fertiliapp-fuerte text-slate-700",children:[e.jsxs(k,{children:[e.jsx(M,{className:"text-lg font-semibold text-fertiliapp-fuerte",children:"Modo postparto activado"}),e.jsx(C,{className:"text-slate-600",children:"Se ha añadido un nuevo ciclo. ¿Deseas desactivar el modo postparto?"})]}),e.jsxs(S,{className:"sm:justify-end gap-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:a,className:"border-pink-200 text-fertiliapp-fuerte hover:bg-pink-50 hover:text-fertiliapp-fuerte",children:"No"}),e.jsx(o,{type:"button",onClick:r,className:"bg-fertiliapp-fuerte hover:brightness-95 text-white shadow-lg",children:"Sí"})]})]})}));export{te as C,_ as L,ae as N,se as P,Z as T,ee as a};
