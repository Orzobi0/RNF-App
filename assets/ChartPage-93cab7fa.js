import{r as y,j as n,M as R}from"./index-5c8ff718.js";import{g as b,R as M,F as j}from"./generatePlaceholders-7d57a5c8.js";import{u as E,p as w,s as d,d as x}from"./useCycleData-d25ac977.js";import"./fertilitySymbols-5c7dd69c.js";import"./button-cd48e5a1.js";import"./pen-line-81c7c7fb.js";const T=()=>{const{currentCycle:t}=E(),[s,u]=y.useState(typeof window<"u"&&window.innerWidth>window.innerHeight?"landscape":"portrait"),[r,m]=y.useState(!1);if(!(t!=null&&t.id))return n.jsx("p",{className:"text-center text-gray-500",children:"No hay ciclo activo."});const v=28,D=10,l=w(t.startDate),f=t.data.reduce((e,a)=>{const o=w(a.isoDate);return o>e?o:e},l),h=d(new Date),S=f>h?f:h,g=x(d(S),l),c=Math.max(v,g+1),I=b(l,c).map(e=>{const a=t.data.find(o=>o.isoDate===e.isoDate);return a?{...a,date:e.date}:e}),i=s==="portrait"?D:c;let p=0;if(s!=="landscape"){const e=x(new Date,d(l)),a=Math.min(Math.max(e,0),c-1);let o=Math.min(c,a+1);a<i-1&&(o=Math.min(c,i)),p=Math.max(0,o-i)}const C=async()=>{if(r){try{await screen.orientation.unlock()}catch(e){console.error(e)}try{document.fullscreenElement&&await document.exitFullscreen()}catch(e){console.error(e)}u("portrait"),m(!1)}else try{await document.documentElement.requestFullscreen(),await screen.orientation.lock("landscape"),u("landscape"),m(!0)}catch(e){console.error(e)}};return n.jsx(R,{hideBottomNav:r,children:n.jsxs("div",{className:r?"fixed inset-0 z-50 h-[100dvh] w-[100dvw] overflow-x-auto overflow-y-auto":"relative w-full overflow-x-auto overflow-y-auto",style:r?void 0:{height:s==="landscape"?"calc(max(100dvw) - var(--bottom-nav-safe))":"calc(100dvh - var(--bottom-nav-safe))",paddingBottom:"env(safe-area-inset-bottom)"},children:[n.jsx("button",{onClick:C,className:"absolute top-4 right-4 z-10 bg-white/80 hover:bg-white text-gray-700 p-2 rounded-full shadow","aria-label":r?"Salir de pantalla completa":"Rotar gr√°fico",children:n.jsx(M,{className:"w-5 h-5"})}),n.jsx(j,{data:I,isFullScreen:r,orientation:s,cycleId:t.id,initialScrollIndex:p,visibleDays:i,reduceMotion:!0,forceLandscape:s==="landscape"})]})})};export{T as default};
