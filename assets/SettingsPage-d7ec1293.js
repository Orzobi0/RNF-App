import{u as I,b as O,r as t,j as e,m as B,U as R,B as i}from"./index-ba6a3a71.js";import{I as n}from"./input-44b95b9b.js";import{L as o}from"./label-75f62444.js";import{D as y,a as N,b as C,c as S,d as D,e as P}from"./dialog-d17201db.js";const G=()=>{const{user:a,updateEmail:z,updatePassword:E,login:k}=I(),{toast:c}=O(),[A,l]=t.useState(!1),[L,r]=t.useState(!1),[x,h]=t.useState((a==null?void 0:a.email)||""),[d,p]=t.useState(!1),[j,w]=t.useState(""),[m,g]=t.useState(""),[f,b]=t.useState(""),[u,v]=t.useState(!1),F=async s=>{s.preventDefault(),p(!0);try{await z(x),c({title:"Correo actualizado"}),l(!1)}finally{p(!1)}},q=async s=>{if(s.preventDefault(),m!==f){c({title:"Error",description:"Las contraseñas no coinciden",variant:"destructive"});return}v(!0);try{await k(a==null?void 0:a.email,j),await E(m),c({title:"Contraseña actualizada"}),r(!1),w(""),g(""),b("")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6 relative z-10 space-y-6",children:[e.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("h1",{className:"text-3xl font-bold text-slate-700 flex items-center",children:[e.jsx(R,{className:"mr-2 h-8 w-8 text-pink-500"}),"Mi cuenta"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur p-4 rounded-xl shadow flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Correo"}),e.jsx("p",{className:"font-medium text-slate-700 break-all",children:a==null?void 0:a.email})]}),e.jsx(i,{onClick:()=>{h((a==null?void 0:a.email)||""),l(!0)},className:"ml-4",children:"Actualizar email"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur p-4 rounded-xl shadow flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Contraseña"}),e.jsx("p",{className:"font-medium text-slate-700",children:"********"})]}),e.jsx(i,{onClick:()=>r(!0),className:"ml-4",children:"Actualizar contraseña"})]})]})]}),e.jsx(y,{open:A,onOpenChange:l,children:e.jsx(N,{className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs(C,{children:[e.jsx(S,{children:"Actualizar correo"}),e.jsx(D,{children:"Introduce el nuevo correo electrónico."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Correo"}),e.jsx(n,{id:"email",type:"email",required:!0,value:x,onChange:s=>h(s.target.value)})]}),e.jsxs(P,{children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:d,children:"Cancelar"}),e.jsx(i,{type:"submit",disabled:d,children:d?"Actualizando...":"Actualizar"})]})]})})}),e.jsx(y,{open:L,onOpenChange:r,children:e.jsx(N,{className:"sm:max-w-md",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs(C,{children:[e.jsx(S,{children:"Actualizar contraseña"}),e.jsx(D,{children:"Cambia tu contraseña."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"current-password",children:"Contraseña actual"}),e.jsx(n,{id:"current-password",type:"password",required:!0,value:j,onChange:s=>w(s.target.value)}),e.jsx(o,{htmlFor:"new-password",children:"Nueva contraseña"}),e.jsx(n,{id:"new-password",type:"password",required:!0,minLength:6,value:m,onChange:s=>g(s.target.value)}),e.jsx(o,{htmlFor:"confirm-password",children:"Repite la contraseña"}),e.jsx(n,{id:"confirm-password",type:"password",required:!0,minLength:6,value:f,onChange:s=>b(s.target.value)})]}),e.jsxs(P,{children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:u,children:"Cancelar"}),e.jsx(i,{type:"submit",disabled:u,children:u?"Actualizando...":"Actualizar"})]})]})})})]})};export{G as default};
