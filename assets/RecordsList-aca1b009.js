import{c as B,j as e,m as c,r as f,p as d,f as N,C as E,B as y}from"./index-094431a6.js";import{e as A,B as m}from"./badge-98f311a3.js";import{c as O,T as $,h as z,d as F,b as H,P as Y,F as w}from"./computePeakStatuses-cc1a8250.js";import{E as q}from"./eye-2e9ccd1a.js";import{T as Z}from"./DeletionDialog-18caf2a0.js";const G=B("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),V=({records:a,onEdit:v,onDelete:k,isProcessing:x,selectedDate:n})=>{if(!a||a.length===0)return e.jsx(c.div,{className:"text-center py-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-3xl p-8 border border-pink-200/50 shadow-lg mx-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 text-pink-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-2",children:"No hay registros"}),e.jsx("p",{className:"text-slate-500",children:"Añade tu primer registro para comenzar."})]})});const _=s=>w.find(i=>i.value===s)||w[0],T=f.useMemo(()=>O(a),[a]),I={P:"Día pico",1:"Post pico 1",2:"Post pico 2",3:"Post pico 3"},C=f.useMemo(()=>{if(!(a!=null&&a.length))return[];const s=[...a].sort((i,r)=>d(r.isoDate)-d(i.isoDate));if(n){const i=s.findIndex(r=>r.isoDate===n);if(i>0){const[r]=s.splice(i,1);s.unshift(r)}}return s},[a,n]);return e.jsx(c.div,{className:"space-y-3",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"show",children:C.map((s,i)=>{var j;const r=_(s.fertility_symbol),t=((j=s.measurements)==null?void 0:j.find(l=>l.selected))||(s.temperature_chart||s.temperature_raw?{temperature:s.temperature_chart??s.temperature_raw,temperature_corrected:s.temperature_corrected??null,time:s.timestamp?N(d(s.timestamp),"HH:mm"):null,use_corrected:s.use_corrected??!1}:null),p=(t==null?void 0:t.use_corrected)??s.use_corrected??!1,o=(t==null?void 0:t.temperature_corrected)??s.temperature_corrected??null,P=(t==null?void 0:t.temperature)??s.temperature_chart??s.temperature_raw??null,h=p&&o!==null?o:P??o,u=h!==null,S=h,L=p&&o!==null,b=T[s.isoDate],g=b&&I[b]||null,D=n===s.isoDate;return e.jsx(c.div,{className:`bg-white/80 backdrop-blur-md border border-pink-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:bg-white/90 rounded-xl ${D?"ring-2 ring-rose-400 shadow-xl shadow-rose-200/70":""}`,variants:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}},children:e.jsxs("div",{className:"p-3 shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"w-5 h-5 text-pink-500 flex-shrink-0"}),e.jsx("span",{className:"font-semibold text-slate-700 text-lg",children:N(d(s.isoDate),"dd/MM/yyyy",{locale:A})}),e.jsxs("span",{className:"text-md text-pink-500",children:["Día ",s.cycleDay]}),g&&e.jsx(m,{className:"ml-2 bg-rose-100 text-rose-600 border border-rose-200",children:g})]}),e.jsx("div",{className:"flex items-center space-x-1 ml-2",children:e.jsx("div",{className:`w-6 h-6 rounded-full border border-slate-300 ${r.color} ${r.pattern?"pattern-bg":""} flex-shrink-0`,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-slate-800",children:[e.jsxs("div",{className:"flex items-center space-x-1 border border-amber-500 px-2 py-1.5 rounded-lg",children:[e.jsx($,{className:"w-4 h-4 bg-amber-500 rounded-full text-white"}),e.jsx("span",{className:"font-medium",children:u?`${S}°C`:""}),L&&e.jsx("span",{className:"w-1 h-1 rounded-full bg-amber-500 shadow-[0_0_4px_rgba(245,158,11,0.65)]",title:"Temperatura corregida"}),u&&s.ignored&&e.jsx(m,{variant:"secondary",className:"text-xs py-0 px-1 bg-orange-200 text-slate-700",children:"Ignorada"})]}),e.jsx("div",{className:"flex items-center space-x-1  border border-gray-400 px-2 py-1.5 rounded-lg",children:(t==null?void 0:t.time)&&e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-3 h-3 text-gray-600"}),e.jsx("span",{children:t.time})]})})]}),Array.isArray(s.measurements)&&s.measurements.length>1&&e.jsx("div",{className:"mt-2 text-xs text-slate-600 space-y-1",children:s.measurements.map((l,R)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:l.time}),e.jsx("span",{children:l.temperature}),l.selected&&e.jsx(m,{className:"ml-1",variant:"secondary",children:"Principal"})]},R))}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 border border-blue-600/40 px-2 py-1.5 rounded-lg",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500/90 to-indigo-600/90 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(F,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"font-semibold text-blue-800 truncate",children:s.mucus_sensation||s.mucusSensation||""})]}),e.jsxs("div",{className:"flex items-center gap-2  border border-emerald-500 px-2 py-1.5 rounded-lg",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-emerald-500/90 to-teal-600/90 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(H,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"font-semibold text-green-800 truncate",children:s.mucus_appearance||s.mucusAppearance||""})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-[1fr_auto] gap-2 items-start text-xs text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 border border-violet-500/40 px-2 py-1.5 rounded-lg",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-violet-500/90 to-purple-600/90 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(Y,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"font-semibold text-violet-800 truncate",children:s.observations||""})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(y,{type:"button",onClick:()=>v(s),variant:"outline",size:"sm",className:"h-8 w-8 p-0 bg-slate-100 border-pink-300 text-pink-600 hover:bg-pink-50 hover:border-pink-400",disabled:x,children:e.jsx(G,{className:"h-3 w-3"})}),e.jsx(y,{type:"button",onClick:()=>k(s.id),variant:"outline",size:"sm",className:"h-8 w-8 p-0 border-rose-300 text-rose-600 hover:bg-rose-800 hover:border-rose-800",disabled:x,children:e.jsx(Z,{className:"h-3 w-3"})})]})]})]})},s.id)})})};export{V as R};
