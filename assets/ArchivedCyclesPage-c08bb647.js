import{r as u,j as e,m as n,A as g,B as l,L as v,C as b,d as S}from"./index-1b0fe1a0.js";import{a as B,p as r,f as j,e as w}from"./useCycleData-270ed225.js";import{B as z,T as O}from"./badge-e000eb74.js";import{E as m}from"./EditCycleDatesDialog-c69612db.js";import{P as N}from"./plus-8b4fb140.js";import{E as I}from"./eye-16f81715.js";import"./dialog-9f479f94.js";import"./input-2e2fdcf0.js";const $=()=>{const{currentCycle:d,archivedCycles:x,isLoading:C,addArchivedCycle:y,updateCycleDates:k,deleteCycle:D}=B(),[h,i]=u.useState(!1),[a,f]=u.useState(null),p=async({startDate:s,endDate:t})=>{try{await y(s,t),i(!1)}catch{}},A=async({startDate:s,endDate:t})=>{if(a)try{await k(a.id,s,t),f(null)}catch{}},E=s=>{window.confirm("¿Eliminar este ciclo?")&&D(s)},c=d.id?[{...d,isCurrent:!0,needsCompletion:!d.endDate},...x]:x;if(C)return e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 flex items-center justify-center",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsx("div",{className:"text-center text-slate-600 p-8",children:"Cargando ciclos archivados..."})]});if(!c||c.length===0)return e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsx("div",{className:"flex items-center justify-center min-h-[100dvh] px-4",children:e.jsx(n.div,{className:"text-center text-slate-600 flex flex-col items-center max-w-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-3xl p-8 border border-pink-200/50 shadow-lg",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-10 h-10 text-pink-500"})}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-700 mb-4",children:"No hay ciclos archivados"}),e.jsx("p",{className:"text-slate-600 mb-8",children:"Cuando inicies un nuevo ciclo, el anterior aparecerá aquí."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(l,{asChild:!0,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white shadow-lg",children:e.jsx(v,{to:"/",children:"Volver al Ciclo Actual"})}),e.jsxs(l,{onClick:()=>i(!0),className:"bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white shadow-lg",children:[e.jsx(N,{className:"mr-2 h-4 w-4"})," Crear Ciclo"]})]})]})})}),e.jsx(m,{isOpen:h,onClose:()=>i(!1),onConfirm:p,title:"Añadir Ciclo Anterior",description:"Ingresa las fechas de un ciclo previo para añadir registros."})]});const M=[...c].sort((s,t)=>r(t.startDate)-r(s.startDate));return e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsxs("div",{className:"w-full max-w-4xl mx-auto px-4 py-6 relative z-10",children:[e.jsxs(n.div,{className:"flex flex-col sm:flex-row justify-between items-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-700 mb-4 sm:mb-0 flex items-center",children:[e.jsx(g,{className:"mr-3 h-8 w-8 text-pink-500"}),"Mis Ciclos"]}),e.jsxs(l,{onClick:()=>i(!0),className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white shadow-lg",style:{filter:"drop-shadow(0 6px 12px rgba(236, 72, 153, 0.3))"},children:[e.jsx(N,{className:"mr-2 h-4 w-4"})," Añadir Ciclo"]})]}),e.jsx(n.div,{className:"space-y-4",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",children:M.map(s=>{const t=s.endDate?j(r(s.endDate),"dd MMM yyyy",{locale:w}):"Sin fecha fin",o=s.data?s.data.length:0;return e.jsx(n.div,{className:"bg-white/80 backdrop-blur-md border border-pink-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:bg-white/90 rounded-xl",variants:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}},children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(b,{className:"w-6 h-6 text-pink-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center flex-wrap gap-2 mb-2",children:e.jsxs("h2",{className:"text-lg font-semibold text-slate-700",children:[j(r(s.startDate),"dd MMM yyyy",{locale:w})," - ",t]})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(S,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{children:[o," registro",o!==1?"s":""]})]}),s.endDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{children:[Math.ceil((r(s.endDate)-r(s.startDate))/(1e3*60*60*24))+1," días"]})]}),s.isCurrent&&e.jsx(z,{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white text-xs",children:"Ciclo actual"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4 sm:mt-0 w-full sm:w-auto",children:[e.jsx(l,{asChild:!0,variant:"outline",size:"sm",className:"w-full sm:w-auto border-pink-300 text-pink-600 hover:bg-pink-50 hover:border-pink-400",children:e.jsxs(v,{to:s.isCurrent?"/":`/cycle/${s.id}`,children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Ver"]})}),e.jsxs(l,{variant:"outline",size:"sm",className:"w-full sm:w-auto border-rose-300 text-rose-600 hover:bg-rose-50 hover:border-rose-400",onClick:()=>E(s.id),children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Eliminar"]})]})]})})},s.id)})})]}),e.jsx(m,{isOpen:h,onClose:()=>i(!1),onConfirm:p,title:"Añadir Ciclo Anterior",description:"Ingresa las fechas de un ciclo previo para añadir registros."}),e.jsx(m,{isOpen:!!a,onClose:()=>f(null),onConfirm:A,initialStartDate:a==null?void 0:a.startDate,initialEndDate:a==null?void 0:a.endDate,title:"Editar Fechas del Ciclo",description:"Actualiza las fechas del ciclo."})]})};export{$ as default};
