const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-BbGYvR2N.js","assets/label-vmCeSukg.js","assets/InstallPrompt-CvO2BhHp.js","assets/eye-DAicHzhc.js","assets/DashboardPage-CUbfzaKw.js","assets/PostpartumExitDialog-DQiCXUxP.js","assets/useBackClose-B75B8Nzp.js","assets/badge-NjDKYZGp.js","assets/useCycleData-DQN_kvv9.js","assets/DeletionDialog-C6up7S7T.js","assets/DataEntryForm-C6Jv8bxR.js","assets/computePeakStatuses-DuBnmQQE.js","assets/peak-mode-button-DESZS8hz.js","assets/useFertilityChart-D6sn-E8m.js","assets/ArchivedCyclesPage-P-JvypBV.js","assets/HeaderIconButton-BTfwmpwK.js","assets/CycleDetailPage-D0bNJTkF.js","assets/RecordsPage-DHke8dmA.js","assets/arrow-left-DBRTbXP-.js","assets/SettingsPage-cf5kQeAg.js","assets/ChartPage-DJkdMOC1.js","assets/FertilityChart-60wUHb5x.js"])))=>i.map(i=>d[i]);
function FD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var NH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ny={exports:{}},Cc={},ry={exports:{}},We={};var fT;function UD(){if(fT)return We;fT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function P(N,z,ee){this.props=N,this.context=z,this.refs=x,this.updater=ee||T}P.prototype.isReactComponent={},P.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},P.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function j(){}j.prototype=P.prototype;function M(N,z,ee){this.props=N,this.context=z,this.refs=x,this.updater=ee||T}var D=M.prototype=new j;D.constructor=M,A(D,P.prototype),D.isPureReactComponent=!0;var B=Array.isArray,Z=Object.prototype.hasOwnProperty,re={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(N,z,ee){var se,oe={},he=null,we=null;if(z!=null)for(se in z.ref!==void 0&&(we=z.ref),z.key!==void 0&&(he=""+z.key),z)Z.call(z,se)&&!C.hasOwnProperty(se)&&(oe[se]=z[se]);var Me=arguments.length-2;if(Me===1)oe.children=ee;else if(1<Me){for(var Ue=Array(Me),at=0;at<Me;at++)Ue[at]=arguments[at+2];oe.children=Ue}if(N&&N.defaultProps)for(se in Me=N.defaultProps,Me)oe[se]===void 0&&(oe[se]=Me[se]);return{$$typeof:n,type:N,key:he,ref:we,props:oe,_owner:re.current}}function b(N,z){return{$$typeof:n,type:N.type,key:z,ref:N.ref,props:N.props,_owner:N._owner}}function O(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function L(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ee){return z[ee]})}var U=/\/+/g;function V(N,z){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):z.toString(36)}function ce(N,z,ee,se,oe){var he=typeof N;(he==="undefined"||he==="boolean")&&(N=null);var we=!1;if(N===null)we=!0;else switch(he){case"string":case"number":we=!0;break;case"object":switch(N.$$typeof){case n:case e:we=!0}}if(we)return we=N,oe=oe(we),N=se===""?"."+V(we,0):se,B(oe)?(ee="",N!=null&&(ee=N.replace(U,"$&/")+"/"),ce(oe,z,ee,"",function(at){return at})):oe!=null&&(O(oe)&&(oe=b(oe,ee+(!oe.key||we&&we.key===oe.key?"":(""+oe.key).replace(U,"$&/")+"/")+N)),z.push(oe)),1;if(we=0,se=se===""?".":se+":",B(N))for(var Me=0;Me<N.length;Me++){he=N[Me];var Ue=se+V(he,Me);we+=ce(he,z,ee,Ue,oe)}else if(Ue=v(N),typeof Ue=="function")for(N=Ue.call(N),Me=0;!(he=N.next()).done;)he=he.value,Ue=se+V(he,Me++),we+=ce(he,z,ee,Ue,oe);else if(he==="object")throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return we}function xe(N,z,ee){if(N==null)return N;var se=[],oe=0;return ce(N,se,"","",function(he){return z.call(ee,he,oe++)}),se}function Pe(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(ee){(N._status===0||N._status===-1)&&(N._status=1,N._result=ee)},function(ee){(N._status===0||N._status===-1)&&(N._status=2,N._result=ee)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var De={current:null},W={transition:null},Y={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:W,ReactCurrentOwner:re};function X(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:xe,forEach:function(N,z,ee){xe(N,function(){z.apply(this,arguments)},ee)},count:function(N){var z=0;return xe(N,function(){z++}),z},toArray:function(N){return xe(N,function(z){return z})||[]},only:function(N){if(!O(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},We.Component=P,We.Fragment=t,We.Profiler=i,We.PureComponent=M,We.StrictMode=r,We.Suspense=d,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,We.act=X,We.cloneElement=function(N,z,ee){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var se=A({},N.props),oe=N.key,he=N.ref,we=N._owner;if(z!=null){if(z.ref!==void 0&&(he=z.ref,we=re.current),z.key!==void 0&&(oe=""+z.key),N.type&&N.type.defaultProps)var Me=N.type.defaultProps;for(Ue in z)Z.call(z,Ue)&&!C.hasOwnProperty(Ue)&&(se[Ue]=z[Ue]===void 0&&Me!==void 0?Me[Ue]:z[Ue])}var Ue=arguments.length-2;if(Ue===1)se.children=ee;else if(1<Ue){Me=Array(Ue);for(var at=0;at<Ue;at++)Me[at]=arguments[at+2];se.children=Me}return{$$typeof:n,type:N.type,key:oe,ref:he,props:se,_owner:we}},We.createContext=function(N){return N={$$typeof:a,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:s,_context:N},N.Consumer=N},We.createElement=I,We.createFactory=function(N){var z=I.bind(null,N);return z.type=N,z},We.createRef=function(){return{current:null}},We.forwardRef=function(N){return{$$typeof:u,render:N}},We.isValidElement=O,We.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:Pe}},We.memo=function(N,z){return{$$typeof:h,type:N,compare:z===void 0?null:z}},We.startTransition=function(N){var z=W.transition;W.transition={};try{N()}finally{W.transition=z}},We.unstable_act=X,We.useCallback=function(N,z){return De.current.useCallback(N,z)},We.useContext=function(N){return De.current.useContext(N)},We.useDebugValue=function(){},We.useDeferredValue=function(N){return De.current.useDeferredValue(N)},We.useEffect=function(N,z){return De.current.useEffect(N,z)},We.useId=function(){return De.current.useId()},We.useImperativeHandle=function(N,z,ee){return De.current.useImperativeHandle(N,z,ee)},We.useInsertionEffect=function(N,z){return De.current.useInsertionEffect(N,z)},We.useLayoutEffect=function(N,z){return De.current.useLayoutEffect(N,z)},We.useMemo=function(N,z){return De.current.useMemo(N,z)},We.useReducer=function(N,z,ee){return De.current.useReducer(N,z,ee)},We.useRef=function(N){return De.current.useRef(N)},We.useState=function(N){return De.current.useState(N)},We.useSyncExternalStore=function(N,z,ee){return De.current.useSyncExternalStore(N,z,ee)},We.useTransition=function(){return De.current.useTransition()},We.version="18.3.1",We}var pT;function l_(){return pT||(pT=1,ry.exports=UD()),ry.exports}var mT;function jD(){if(mT)return Cc;mT=1;var n=l_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},v=null,T=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(T=d.ref);for(m in d)r.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:v,ref:T,props:g,_owner:i.current}}return Cc.Fragment=t,Cc.jsx=a,Cc.jsxs=a,Cc}var gT;function BD(){return gT||(gT=1,ny.exports=jD()),ny.exports}var K=BD(),k=l_();const nn=a_(k),u_=FD({__proto__:null,default:nn},[k]);var df={},iy={exports:{}},Hn={},sy={exports:{}},oy={};var yT;function $D(){return yT||(yT=1,(function(n){function e(W,Y){var X=W.length;W.push(Y);e:for(;0<X;){var N=X-1>>>1,z=W[N];if(0<i(z,Y))W[N]=Y,W[X]=z,X=N;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],X=W.pop();if(X!==Y){W[0]=X;e:for(var N=0,z=W.length,ee=z>>>1;N<ee;){var se=2*(N+1)-1,oe=W[se],he=se+1,we=W[he];if(0>i(oe,X))he<z&&0>i(we,oe)?(W[N]=we,W[he]=X,N=he):(W[N]=oe,W[se]=X,N=se);else if(he<z&&0>i(we,X))W[N]=we,W[he]=X,N=he;else break e}}return Y}function i(W,Y){var X=W.sortIndex-Y.sortIndex;return X!==0?X:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,v=3,T=!1,A=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(W){for(var Y=t(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=W)r(h),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=t(h)}}function B(W){if(x=!1,D(W),!A)if(t(d)!==null)A=!0,Pe(Z);else{var Y=t(h);Y!==null&&De(B,Y.startTime-W)}}function Z(W,Y){A=!1,x&&(x=!1,j(I),I=-1),T=!0;var X=v;try{for(D(Y),g=t(d);g!==null&&(!(g.expirationTime>Y)||W&&!L());){var N=g.callback;if(typeof N=="function"){g.callback=null,v=g.priorityLevel;var z=N(g.expirationTime<=Y);Y=n.unstable_now(),typeof z=="function"?g.callback=z:g===t(d)&&r(d),D(Y)}else r(d);g=t(d)}if(g!==null)var ee=!0;else{var se=t(h);se!==null&&De(B,se.startTime-Y),ee=!1}return ee}finally{g=null,v=X,T=!1}}var re=!1,C=null,I=-1,b=5,O=-1;function L(){return!(n.unstable_now()-O<b)}function U(){if(C!==null){var W=n.unstable_now();O=W;var Y=!0;try{Y=C(!0,W)}finally{Y?V():(re=!1,C=null)}}else re=!1}var V;if(typeof M=="function")V=function(){M(U)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,xe=ce.port2;ce.port1.onmessage=U,V=function(){xe.postMessage(null)}}else V=function(){P(U,0)};function Pe(W){C=W,re||(re=!0,V())}function De(W,Y){I=P(function(){W(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){A||T||(A=!0,Pe(Z))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var X=v;v=Y;try{return W()}finally{v=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=v;v=W;try{return Y()}finally{v=X}},n.unstable_scheduleCallback=function(W,Y,X){var N=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?N+X:N):X=N,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,W={id:m++,callback:Y,priorityLevel:W,startTime:X,expirationTime:z,sortIndex:-1},X>N?(W.sortIndex=X,e(h,W),t(d)===null&&W===t(h)&&(x?(j(I),I=-1):x=!0,De(B,X-N))):(W.sortIndex=z,e(d,W),A||T||(A=!0,Pe(Z))),W},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(W){var Y=v;return function(){var X=v;v=Y;try{return W.apply(this,arguments)}finally{v=X}}}})(oy)),oy}var vT;function zD(){return vT||(vT=1,sy.exports=$D()),sy.exports}var _T;function WD(){if(_T)return Hn;_T=1;var n=l_(),e=zD();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function T(o,l,c,p){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function A(o,l,c,p){if(l===null||typeof l>"u"||T(o,l,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function x(o,l,c,p,y,_,S){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=o,this.type=l,this.sanitizeURL=_,this.removeEmptyString=S}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){P[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];P[l]=new x(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){P[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){P[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){P[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){P[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){P[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){P[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){P[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(j,M);P[l]=new x(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){P[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),P.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){P[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function D(o,l,c,p){var y=P.hasOwnProperty(l)?P[l]:null;(y!==null?y.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(A(l,c,y,p)&&(c=null),p||y===null?v(l)&&(c===null?o.removeAttribute(l):o.setAttribute(l,""+c)):y.mustUseProperty?o[y.propertyName]=c===null?y.type===3?!1:"":c:(l=y.attributeName,p=y.attributeNamespace,c===null?o.removeAttribute(l):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?o.setAttributeNS(p,l,c):o.setAttribute(l,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),re=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),W=Symbol.iterator;function Y(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var X=Object.assign,N;function z(o){if(N===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);N=l&&l[1]||""}return`
`+N+o}var ee=!1;function se(o,l){if(!o||ee)return"";ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(te){var p=te}Reflect.construct(o,[],l)}else{try{l.call()}catch(te){p=te}o.call(l.prototype)}else{try{throw Error()}catch(te){p=te}o()}}catch(te){if(te&&p&&typeof te.stack=="string"){for(var y=te.stack.split(`
`),_=p.stack.split(`
`),S=y.length-1,F=_.length-1;1<=S&&0<=F&&y[S]!==_[F];)F--;for(;1<=S&&0<=F;S--,F--)if(y[S]!==_[F]){if(S!==1||F!==1)do if(S--,F--,0>F||y[S]!==_[F]){var $=`
`+y[S].replace(" at new "," at ");return o.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",o.displayName)),$}while(1<=S&&0<=F);break}}}finally{ee=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?z(o):""}function oe(o){switch(o.tag){case 5:return z(o.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return o=se(o.type,!1),o;case 11:return o=se(o.type.render,!1),o;case 1:return o=se(o.type,!0),o;default:return""}}function he(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case re:return"Portal";case b:return"Profiler";case I:return"StrictMode";case V:return"Suspense";case ce:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case U:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case xe:return l=o.displayName||null,l!==null?l:he(o.type)||"Memo";case Pe:l=o._payload,o=o._init;try{return he(o(l))}catch{}}return null}function we(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Me(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ue(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function at(o){var l=Ue(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(S){p=""+S,_.call(this,S)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Lt(o){o._valueTracker||(o._valueTracker=at(o))}function zr(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),p="";return o&&(p=Ue(o)?o.checked?"true":"false":o.value),o=p,o!==c?(l.setValue(o),!0):!1}function Pr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ds(o,l){var c=l.checked;return X({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function Ao(o,l){var c=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;c=Me(l.value!=null?l.value:c),o._wrapperState={initialChecked:p,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function hs(o,l){l=l.checked,l!=null&&D(o,"checked",l,!1)}function Cr(o,l){hs(o,l);var c=Me(l.value),p=l.type;if(c!=null)p==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ft(o,l.type,c):l.hasOwnProperty("defaultValue")&&Ft(o,l.type,Me(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function xo(o,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,c||l===o.value||(o.value=l),o.defaultValue=l}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function Ft(o,l,c){(l!=="number"||Pr(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var Rt=Array.isArray;function En(o,l,c,p){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&p&&(o[c].defaultSelected=!0)}else{for(c=""+Me(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Ro(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function fs(o,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if(Rt(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}o._wrapperState={initialValue:Me(c)}}function ko(o,l){var c=Me(l.value),p=Me(l.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),l.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),p!=null&&(o.defaultValue=""+p)}function br(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Do(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ps(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Do(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Wr,qa=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,p,y){MSApp.execUnsafeLocalFunction(function(){return o(l,c,p,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Wr=Wr||document.createElement("div"),Wr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Wr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Xn(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(fr).forEach(function(o){ut.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),fr[l]=fr[o]})});function Hr(o,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||fr.hasOwnProperty(o)&&fr[o]?(""+l).trim():l+"px"}function ms(o,l){o=o.style;for(var c in l)if(l.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=Hr(c,l[c],p);c==="float"&&(c="cssFloat"),p?o.setProperty(c,y):o[c]=y}}var Lu=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ar(o,l){if(l){if(Lu[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ga(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=null;function Ka(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ai=null,xi=null,Ut=null;function Fu(o){if(o=dc(o)){if(typeof Ai!="function")throw Error(t(280));var l=o.stateNode;l&&(l=Ph(l),Ai(o.stateNode,o.type,l))}}function ys(o){xi?Ut?Ut.push(o):Ut=[o]:xi=o}function vs(){if(xi){var o=xi,l=Ut;if(Ut=xi=null,Fu(o),l)for(o=0;o<l.length;o++)Fu(l[o])}}function Zd(o,l){return o(l)}function eh(){}var qr=!1;function th(o,l,c){if(qr)return o(l,c);qr=!0;try{return Zd(o,l,c)}finally{qr=!1,(xi!==null||Ut!==null)&&(eh(),vs())}}function No(o,l){var c=o.stateNode;if(c===null)return null;var p=Ph(c);if(p===null)return null;c=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var _s=!1;if(u)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){_s=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{_s=!1}function nh(o,l,c,p,y,_,S,F,$){var te=Array.prototype.slice.call(arguments,3);try{l.apply(c,te)}catch(ue){this.onError(ue)}}var Ri=!1,Gr=null,Qa=!1,pr=null,rh={onError:function(o){Ri=!0,Gr=o}};function ih(o,l,c,p,y,_,S,F,$){Ri=!1,Gr=null,nh.apply(rh,arguments)}function Uu(o,l,c,p,y,_,S,F,$){if(ih.apply(this,arguments),Ri){if(Ri){var te=Gr;Ri=!1,Gr=null}else throw Error(t(198));Qa||(Qa=!0,pr=te)}}function xr(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function ju(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function sh(o){if(xr(o)!==o)throw Error(t(188))}function oh(o){var l=o.alternate;if(!l){if(l=xr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var c=o,p=l;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return sh(y),o;if(_===p)return sh(y),l;_=_.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=_;else{for(var S=!1,F=y.child;F;){if(F===c){S=!0,c=y,p=_;break}if(F===p){S=!0,p=y,c=_;break}F=F.sibling}if(!S){for(F=_.child;F;){if(F===c){S=!0,c=_,p=y;break}if(F===p){S=!0,p=_,c=y;break}F=F.sibling}if(!S)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:l}function ah(o){return o=oh(o),o!==null?Vo(o):null}function Vo(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Vo(o);if(l!==null)return l;o=o.sibling}return null}var Bu=e.unstable_scheduleCallback,Ya=e.unstable_cancelCallback,Mo=e.unstable_shouldYield,ki=e.unstable_requestPaint,Tt=e.unstable_now,Nm=e.unstable_getCurrentPriorityLevel,Xa=e.unstable_ImmediatePriority,$u=e.unstable_UserBlockingPriority,Oo=e.unstable_NormalPriority,zu=e.unstable_LowPriority,Ja=e.unstable_IdlePriority,Lo=null,Jn=null;function lh(o){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Lo,o,void 0,(o.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:Fo,Kr=Math.log,mr=Math.LN2;function Fo(o){return o>>>=0,o===0?32:31-(Kr(o)/mr|0)|0}var Qr=64,Es=4194304;function it(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Di(o,l){var c=o.pendingLanes;if(c===0)return 0;var p=0,y=o.suspendedLanes,_=o.pingedLanes,S=c&268435455;if(S!==0){var F=S&~y;F!==0?p=it(F):(_&=S,_!==0&&(p=it(_)))}else S=c&~y,S!==0?p=it(S):_!==0&&(p=it(_));if(p===0)return 0;if(l!==0&&l!==p&&(l&y)===0&&(y=p&-p,_=l&-l,y>=_||y===16&&(_&4194240)!==0))return l;if((p&4)!==0&&(p|=c&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)c=31-Zn(l),y=1<<c,p|=o[c],l&=~y;return p}function Uo(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jo(o,l){for(var c=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes;0<_;){var S=31-Zn(_),F=1<<S,$=y[S];$===-1?((F&c)===0||(F&p)!==0)&&(y[S]=Uo(F,l)):$<=l&&(o.expiredLanes|=F),_&=~F}}function Wu(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Hu(){var o=Qr;return Qr<<=1,(Qr&4194240)===0&&(Qr=64),o}function qu(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Bo(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Zn(l),o[l]=c}function Vm(o,l){var c=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<c;){var y=31-Zn(c),_=1<<y;l[y]=0,p[y]=-1,o[y]=-1,c&=~_}}function Gu(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var p=31-Zn(c),y=1<<p;y&l|o[p]&l&&(o[p]|=l),c&=~y}}var Qe=0;function Yr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Ku,Za,Qu,Yu,Xu,Xr=!1,el=[],Jr=null,Zr=null,gn=null,$o=new Map,Ni=new Map,er=[],uh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ts(o,l){switch(o){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":$o.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ni.delete(l.pointerId)}}function Rr(o,l,c,p,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:c,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},l!==null&&(l=dc(l),l!==null&&Za(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function ch(o,l,c,p,y){switch(l){case"focusin":return Jr=Rr(Jr,o,l,c,p,y),!0;case"dragenter":return Zr=Rr(Zr,o,l,c,p,y),!0;case"mouseover":return gn=Rr(gn,o,l,c,p,y),!0;case"pointerover":var _=y.pointerId;return $o.set(_,Rr($o.get(_)||null,o,l,c,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Ni.set(_,Rr(Ni.get(_)||null,o,l,c,p,y)),!0}return!1}function tl(o){var l=qo(o.target);if(l!==null){var c=xr(l);if(c!==null){if(l=c.tag,l===13){if(l=ju(c),l!==null){o.blockedOn=l,Xu(o.priority,function(){Qu(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function vt(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=nl(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var p=new c.constructor(c.type,c);gs=p,c.target.dispatchEvent(p),gs=null}else return l=dc(c),l!==null&&Za(l),o.blockedOn=c,!1;l.shift()}return!0}function dh(o,l,c){vt(o)&&c.delete(l)}function Mm(){Xr=!1,Jr!==null&&vt(Jr)&&(Jr=null),Zr!==null&&vt(Zr)&&(Zr=null),gn!==null&&vt(gn)&&(gn=null),$o.forEach(dh),Ni.forEach(dh)}function Is(o,l){o.blockedOn===l&&(o.blockedOn=null,Xr||(Xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Mm)))}function Ss(o){function l(y){return Is(y,o)}if(0<el.length){Is(el[0],o);for(var c=1;c<el.length;c++){var p=el[c];p.blockedOn===o&&(p.blockedOn=null)}}for(Jr!==null&&Is(Jr,o),Zr!==null&&Is(Zr,o),gn!==null&&Is(gn,o),$o.forEach(l),Ni.forEach(l),c=0;c<er.length;c++)p=er[c],p.blockedOn===o&&(p.blockedOn=null);for(;0<er.length&&(c=er[0],c.blockedOn===null);)tl(c),c.blockedOn===null&&er.shift()}var Vi=B.ReactCurrentBatchConfig,Mi=!0;function ei(o,l,c,p){var y=Qe,_=Vi.transition;Vi.transition=null;try{Qe=1,Ju(o,l,c,p)}finally{Qe=y,Vi.transition=_}}function hh(o,l,c,p){var y=Qe,_=Vi.transition;Vi.transition=null;try{Qe=4,Ju(o,l,c,p)}finally{Qe=y,Vi.transition=_}}function Ju(o,l,c,p){if(Mi){var y=nl(o,l,c,p);if(y===null)qm(o,l,p,ti,c),Ts(o,p);else if(ch(y,o,l,c,p))p.stopPropagation();else if(Ts(o,p),l&4&&-1<uh.indexOf(o)){for(;y!==null;){var _=dc(y);if(_!==null&&Ku(_),_=nl(o,l,c,p),_===null&&qm(o,l,p,ti,c),_===y)break;y=_}y!==null&&p.stopPropagation()}else qm(o,l,p,null,c)}}var ti=null;function nl(o,l,c,p){if(ti=null,o=Ka(p),o=qo(o),o!==null)if(l=xr(o),l===null)o=null;else if(c=l.tag,c===13){if(o=ju(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return ti=o,null}function rl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nm()){case Xa:return 1;case $u:return 4;case Oo:case zu:return 16;case Ja:return 536870912;default:return 16}default:return 16}}var tr=null,il=null,Oi=null;function fh(){if(Oi)return Oi;var o,l=il,c=l.length,p,y="value"in tr?tr.value:tr.textContent,_=y.length;for(o=0;o<c&&l[o]===y[o];o++);var S=c-o;for(p=1;p<=S&&l[c-p]===y[_-p];p++);return Oi=y.slice(o,1<p?1-p:void 0)}function zo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function ni(){return!0}function Zu(){return!1}function Tn(o){function l(c,p,y,_,S){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(c=o[F],this[F]=c?c(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ni:Zu,this.isPropagationStopped=Zu,this}return X(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),l}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Tn(ri),Ps=X({},ri,{view:0,detail:0}),sl=Tn(Ps),ol,al,nr,Ho=X({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==nr&&(nr&&o.type==="mousemove"?(ol=o.screenX-nr.screenX,al=o.screenY-nr.screenY):al=ol=0,nr=o),ol)},movementY:function(o){return"movementY"in o?o.movementY:al}}),ec=Tn(Ho),ph=X({},Ho,{dataTransfer:0}),mh=Tn(ph),ll=X({},Ps,{relatedTarget:0}),yn=Tn(ll),gh=X({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=Tn(gh),Cs=X({},ri,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),f=Tn(Cs),w=X({},ri,{data:0}),E=Tn(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=ne[o])?!!l[o]:!1}function $e(){return pe}var Wt=X({},Ps,{key:function(o){if(o.key){var l=R[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=zo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Q[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(o){return o.type==="keypress"?zo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ct=Tn(Wt),Jt=X({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=Tn(Jt),Li=X({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),ii=Tn(Li),si=X({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),ul=Tn(si),tc=X({},Ho,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Dk=Tn(tc),Nk=[9,13,27,32],Om=u&&"CompositionEvent"in window,nc=null;u&&"documentMode"in document&&(nc=document.documentMode);var Vk=u&&"TextEvent"in window&&!nc,s0=u&&(!Om||nc&&8<nc&&11>=nc),o0=" ",a0=!1;function l0(o,l){switch(o){case"keyup":return Nk.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var cl=!1;function Mk(o,l){switch(o){case"compositionend":return u0(l);case"keypress":return l.which!==32?null:(a0=!0,o0);case"textInput":return o=l.data,o===o0&&a0?null:o;default:return null}}function Ok(o,l){if(cl)return o==="compositionend"||!Om&&l0(o,l)?(o=fh(),Oi=il=tr=null,cl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return s0&&l.locale!=="ko"?null:l.data;default:return null}}var Lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Lk[o.type]:l==="textarea"}function d0(o,l,c,p){ys(p),l=Th(l,"onChange"),0<l.length&&(c=new Wo("onChange","change",null,c,p),o.push({event:c,listeners:l}))}var rc=null,ic=null;function Fk(o){x0(o,0)}function vh(o){var l=ml(o);if(zr(l))return o}function Uk(o,l){if(o==="change")return l}var h0=!1;if(u){var Lm;if(u){var Fm="oninput"in document;if(!Fm){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),Fm=typeof f0.oninput=="function"}Lm=Fm}else Lm=!1;h0=Lm&&(!document.documentMode||9<document.documentMode)}function p0(){rc&&(rc.detachEvent("onpropertychange",m0),ic=rc=null)}function m0(o){if(o.propertyName==="value"&&vh(ic)){var l=[];d0(l,ic,o,Ka(o)),th(Fk,l)}}function jk(o,l,c){o==="focusin"?(p0(),rc=l,ic=c,rc.attachEvent("onpropertychange",m0)):o==="focusout"&&p0()}function Bk(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return vh(ic)}function $k(o,l){if(o==="click")return vh(l)}function zk(o,l){if(o==="input"||o==="change")return vh(l)}function Wk(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var kr=typeof Object.is=="function"?Object.is:Wk;function sc(o,l){if(kr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(l,y)||!kr(o[y],l[y]))return!1}return!0}function g0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function y0(o,l){var c=g0(o);o=0;for(var p;c;){if(c.nodeType===3){if(p=o+c.textContent.length,o<=l&&p>=l)return{node:c,offset:l-o};o=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=g0(c)}}function v0(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?v0(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function _0(){for(var o=window,l=Pr();l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=Pr(o.document)}return l}function Um(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Hk(o){var l=_0(),c=o.focusedElem,p=o.selectionRange;if(l!==c&&c&&c.ownerDocument&&v0(c.ownerDocument.documentElement,c)){if(p!==null&&Um(c)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(o,c.value.length);else if(o=(l=c.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=c.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!o.extend&&_>p&&(y=p,p=_,_=y),y=y0(c,_);var S=y0(c,p);y&&S&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==S.node||o.focusOffset!==S.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),_>p?(o.addRange(l),o.extend(S.node,S.offset)):(l.setEnd(S.node,S.offset),o.addRange(l)))}}for(l=[],o=c;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)o=l[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var qk=u&&"documentMode"in document&&11>=document.documentMode,dl=null,jm=null,oc=null,Bm=!1;function w0(o,l,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Bm||dl==null||dl!==Pr(p)||(p=dl,"selectionStart"in p&&Um(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),oc&&sc(oc,p)||(oc=p,p=Th(jm,"onSelect"),0<p.length&&(l=new Wo("onSelect","select",null,l,c),o.push({event:l,listeners:p}),l.target=dl)))}function _h(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var hl={animationend:_h("Animation","AnimationEnd"),animationiteration:_h("Animation","AnimationIteration"),animationstart:_h("Animation","AnimationStart"),transitionend:_h("Transition","TransitionEnd")},$m={},E0={};u&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function wh(o){if($m[o])return $m[o];if(!hl[o])return o;var l=hl[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in E0)return $m[o]=l[c];return o}var T0=wh("animationend"),I0=wh("animationiteration"),S0=wh("animationstart"),P0=wh("transitionend"),C0=new Map,b0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(o,l){C0.set(o,l),s(l,[o])}for(var zm=0;zm<b0.length;zm++){var Wm=b0[zm],Gk=Wm.toLowerCase(),Kk=Wm[0].toUpperCase()+Wm.slice(1);bs(Gk,"on"+Kk)}bs(T0,"onAnimationEnd"),bs(I0,"onAnimationIteration"),bs(S0,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(P0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function A0(o,l,c){var p=o.type||"unknown-event";o.currentTarget=c,Uu(p,l,void 0,o),o.currentTarget=null}function x0(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var p=o[c],y=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var S=p.length-1;0<=S;S--){var F=p[S],$=F.instance,te=F.currentTarget;if(F=F.listener,$!==_&&y.isPropagationStopped())break e;A0(y,F,te),_=$}else for(S=0;S<p.length;S++){if(F=p[S],$=F.instance,te=F.currentTarget,F=F.listener,$!==_&&y.isPropagationStopped())break e;A0(y,F,te),_=$}}}if(Qa)throw o=pr,Qa=!1,pr=null,o}function It(o,l){var c=l[Jm];c===void 0&&(c=l[Jm]=new Set);var p=o+"__bubble";c.has(p)||(R0(l,o,2,!1),c.add(p))}function Hm(o,l,c){var p=0;l&&(p|=4),R0(c,o,p,l)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function lc(o){if(!o[Eh]){o[Eh]=!0,r.forEach(function(c){c!=="selectionchange"&&(Qk.has(c)||Hm(c,!1,o),Hm(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Eh]||(l[Eh]=!0,Hm("selectionchange",!1,l))}}function R0(o,l,c,p){switch(rl(l)){case 1:var y=ei;break;case 4:y=hh;break;default:y=Ju}c=y.bind(null,l,c,o),y=void 0,!_s||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function qm(o,l,c,p,y){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var F=p.stateNode.containerInfo;if(F===y||F.nodeType===8&&F.parentNode===y)break;if(S===4)for(S=p.return;S!==null;){var $=S.tag;if(($===3||$===4)&&($=S.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;S=S.return}for(;F!==null;){if(S=qo(F),S===null)return;if($=S.tag,$===5||$===6){p=_=S;continue e}F=F.parentNode}}p=p.return}th(function(){var te=_,ue=Ka(c),de=[];e:{var ae=C0.get(o);if(ae!==void 0){var _e=Wo,Ce=o;switch(o){case"keypress":if(zo(c)===0)break e;case"keydown":case"keyup":_e=ct;break;case"focusin":Ce="focus",_e=yn;break;case"focusout":Ce="blur",_e=yn;break;case"beforeblur":case"afterblur":_e=yn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=ii;break;case T0:case I0:case S0:_e=yh;break;case P0:_e=ul;break;case"scroll":_e=sl;break;case"wheel":_e=Dk;break;case"copy":case"cut":case"paste":_e=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=rr}var Ae=(l&4)!==0,Ht=!Ae&&o==="scroll",G=Ae?ae!==null?ae+"Capture":null:ae;Ae=[];for(var H=te,J;H!==null;){J=H;var fe=J.stateNode;if(J.tag===5&&fe!==null&&(J=fe,G!==null&&(fe=No(H,G),fe!=null&&Ae.push(uc(H,fe,J)))),Ht)break;H=H.return}0<Ae.length&&(ae=new _e(ae,Ce,null,c,ue),de.push({event:ae,listeners:Ae}))}}if((l&7)===0){e:{if(ae=o==="mouseover"||o==="pointerover",_e=o==="mouseout"||o==="pointerout",ae&&c!==gs&&(Ce=c.relatedTarget||c.fromElement)&&(qo(Ce)||Ce[Fi]))break e;if((_e||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,_e?(Ce=c.relatedTarget||c.toElement,_e=te,Ce=Ce?qo(Ce):null,Ce!==null&&(Ht=xr(Ce),Ce!==Ht||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(_e=null,Ce=te),_e!==Ce)){if(Ae=ec,fe="onMouseLeave",G="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=rr,fe="onPointerLeave",G="onPointerEnter",H="pointer"),Ht=_e==null?ae:ml(_e),J=Ce==null?ae:ml(Ce),ae=new Ae(fe,H+"leave",_e,c,ue),ae.target=Ht,ae.relatedTarget=J,fe=null,qo(ue)===te&&(Ae=new Ae(G,H+"enter",Ce,c,ue),Ae.target=J,Ae.relatedTarget=Ht,fe=Ae),Ht=fe,_e&&Ce)t:{for(Ae=_e,G=Ce,H=0,J=Ae;J;J=fl(J))H++;for(J=0,fe=G;fe;fe=fl(fe))J++;for(;0<H-J;)Ae=fl(Ae),H--;for(;0<J-H;)G=fl(G),J--;for(;H--;){if(Ae===G||G!==null&&Ae===G.alternate)break t;Ae=fl(Ae),G=fl(G)}Ae=null}else Ae=null;_e!==null&&k0(de,ae,_e,Ae,!1),Ce!==null&&Ht!==null&&k0(de,Ht,Ce,Ae,!0)}}e:{if(ae=te?ml(te):window,_e=ae.nodeName&&ae.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ae.type==="file")var Re=Uk;else if(c0(ae))if(h0)Re=zk;else{Re=Bk;var Oe=jk}else(_e=ae.nodeName)&&_e.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Re=$k);if(Re&&(Re=Re(o,te))){d0(de,Re,c,ue);break e}Oe&&Oe(o,ae,te),o==="focusout"&&(Oe=ae._wrapperState)&&Oe.controlled&&ae.type==="number"&&Ft(ae,"number",ae.value)}switch(Oe=te?ml(te):window,o){case"focusin":(c0(Oe)||Oe.contentEditable==="true")&&(dl=Oe,jm=te,oc=null);break;case"focusout":oc=jm=dl=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,w0(de,c,ue);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":w0(de,c,ue)}var Le;if(Om)e:{switch(o){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else cl?l0(o,c)&&(je="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(je="onCompositionStart");je&&(s0&&c.locale!=="ko"&&(cl||je!=="onCompositionStart"?je==="onCompositionEnd"&&cl&&(Le=fh()):(tr=ue,il="value"in tr?tr.value:tr.textContent,cl=!0)),Oe=Th(te,je),0<Oe.length&&(je=new E(je,o,null,c,ue),de.push({event:je,listeners:Oe}),Le?je.data=Le:(Le=u0(c),Le!==null&&(je.data=Le)))),(Le=Vk?Mk(o,c):Ok(o,c))&&(te=Th(te,"onBeforeInput"),0<te.length&&(ue=new E("onBeforeInput","beforeinput",null,c,ue),de.push({event:ue,listeners:te}),ue.data=Le))}x0(de,l)})}function uc(o,l,c){return{instance:o,listener:l,currentTarget:c}}function Th(o,l){for(var c=l+"Capture",p=[];o!==null;){var y=o,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=No(o,c),_!=null&&p.unshift(uc(o,_,y)),_=No(o,l),_!=null&&p.push(uc(o,_,y))),o=o.return}return p}function fl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function k0(o,l,c,p,y){for(var _=l._reactName,S=[];c!==null&&c!==p;){var F=c,$=F.alternate,te=F.stateNode;if($!==null&&$===p)break;F.tag===5&&te!==null&&(F=te,y?($=No(c,_),$!=null&&S.unshift(uc(c,$,F))):y||($=No(c,_),$!=null&&S.push(uc(c,$,F)))),c=c.return}S.length!==0&&o.push({event:l,listeners:S})}var Yk=/\r\n?/g,Xk=/\u0000|\uFFFD/g;function D0(o){return(typeof o=="string"?o:""+o).replace(Yk,`
`).replace(Xk,"")}function Ih(o,l,c){if(l=D0(l),D0(o)!==l&&c)throw Error(t(425))}function Sh(){}var Gm=null,Km=null;function Qm(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ym=typeof setTimeout=="function"?setTimeout:void 0,Jk=typeof clearTimeout=="function"?clearTimeout:void 0,N0=typeof Promise=="function"?Promise:void 0,Zk=typeof queueMicrotask=="function"?queueMicrotask:typeof N0<"u"?function(o){return N0.resolve(null).then(o).catch(eD)}:Ym;function eD(o){setTimeout(function(){throw o})}function Xm(o,l){var c=l,p=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){o.removeChild(y),Ss(l);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);Ss(l)}function As(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function V0(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}var pl=Math.random().toString(36).slice(2),oi="__reactFiber$"+pl,cc="__reactProps$"+pl,Fi="__reactContainer$"+pl,Jm="__reactEvents$"+pl,tD="__reactListeners$"+pl,nD="__reactHandles$"+pl;function qo(o){var l=o[oi];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Fi]||c[oi]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=V0(o);o!==null;){if(c=o[oi])return c;o=V0(o)}return l}o=c,c=o.parentNode}return null}function dc(o){return o=o[oi]||o[Fi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ml(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Ph(o){return o[cc]||null}var Zm=[],gl=-1;function xs(o){return{current:o}}function St(o){0>gl||(o.current=Zm[gl],Zm[gl]=null,gl--)}function _t(o,l){gl++,Zm[gl]=o.current,o.current=l}var Rs={},In=xs(Rs),jn=xs(!1),Go=Rs;function yl(o,l){var c=o.type.contextTypes;if(!c)return Rs;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in c)y[_]=l[_];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Bn(o){return o=o.childContextTypes,o!=null}function Ch(){St(jn),St(In)}function M0(o,l,c){if(In.current!==Rs)throw Error(t(168));_t(In,l),_t(jn,c)}function O0(o,l,c){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in l))throw Error(t(108,we(o)||"Unknown",y));return X({},c,p)}function bh(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Rs,Go=In.current,_t(In,o),_t(jn,jn.current),!0}function L0(o,l,c){var p=o.stateNode;if(!p)throw Error(t(169));c?(o=O0(o,l,Go),p.__reactInternalMemoizedMergedChildContext=o,St(jn),St(In),_t(In,o)):St(jn),_t(jn,c)}var Ui=null,Ah=!1,eg=!1;function F0(o){Ui===null?Ui=[o]:Ui.push(o)}function rD(o){Ah=!0,F0(o)}function ks(){if(!eg&&Ui!==null){eg=!0;var o=0,l=Qe;try{var c=Ui;for(Qe=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}Ui=null,Ah=!1}catch(y){throw Ui!==null&&(Ui=Ui.slice(o+1)),Bu(Xa,ks),y}finally{Qe=l,eg=!1}}return null}var vl=[],_l=0,xh=null,Rh=0,gr=[],yr=0,Ko=null,ji=1,Bi="";function Qo(o,l){vl[_l++]=Rh,vl[_l++]=xh,xh=o,Rh=l}function U0(o,l,c){gr[yr++]=ji,gr[yr++]=Bi,gr[yr++]=Ko,Ko=o;var p=ji;o=Bi;var y=32-Zn(p)-1;p&=~(1<<y),c+=1;var _=32-Zn(l)+y;if(30<_){var S=y-y%5;_=(p&(1<<S)-1).toString(32),p>>=S,y-=S,ji=1<<32-Zn(l)+y|c<<y|p,Bi=_+o}else ji=1<<_|c<<y|p,Bi=o}function tg(o){o.return!==null&&(Qo(o,1),U0(o,1,0))}function ng(o){for(;o===xh;)xh=vl[--_l],vl[_l]=null,Rh=vl[--_l],vl[_l]=null;for(;o===Ko;)Ko=gr[--yr],gr[yr]=null,Bi=gr[--yr],gr[yr]=null,ji=gr[--yr],gr[yr]=null}var ir=null,sr=null,bt=!1,Dr=null;function j0(o,l){var c=Er(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,l=o.deletions,l===null?(o.deletions=[c],o.flags|=16):l.push(c)}function B0(o,l){switch(o.tag){case 5:var c=o.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,ir=o,sr=As(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,ir=o,sr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Ko!==null?{id:ji,overflow:Bi}:null,o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=Er(18,null,null,0),c.stateNode=l,c.return=o,o.child=c,ir=o,sr=null,!0):!1;default:return!1}}function rg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ig(o){if(bt){var l=sr;if(l){var c=l;if(!B0(o,l)){if(rg(o))throw Error(t(418));l=As(c.nextSibling);var p=ir;l&&B0(o,l)?j0(p,c):(o.flags=o.flags&-4097|2,bt=!1,ir=o)}}else{if(rg(o))throw Error(t(418));o.flags=o.flags&-4097|2,bt=!1,ir=o}}}function $0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ir=o}function kh(o){if(o!==ir)return!1;if(!bt)return $0(o),bt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Qm(o.type,o.memoizedProps)),l&&(l=sr)){if(rg(o))throw z0(),Error(t(418));for(;l;)j0(o,l),l=As(l.nextSibling)}if($0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(l===0){sr=As(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}o=o.nextSibling}sr=null}}else sr=ir?As(o.stateNode.nextSibling):null;return!0}function z0(){for(var o=sr;o;)o=As(o.nextSibling)}function wl(){sr=ir=null,bt=!1}function sg(o){Dr===null?Dr=[o]:Dr.push(o)}var iD=B.ReactCurrentBatchConfig;function hc(o,l,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,o));var y=p,_=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(S){var F=y.refs;S===null?delete F[_]:F[_]=S},l._stringRef=_,l)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function Dh(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function W0(o){var l=o._init;return l(o._payload)}function H0(o){function l(G,H){if(o){var J=G.deletions;J===null?(G.deletions=[H],G.flags|=16):J.push(H)}}function c(G,H){if(!o)return null;for(;H!==null;)l(G,H),H=H.sibling;return null}function p(G,H){for(G=new Map;H!==null;)H.key!==null?G.set(H.key,H):G.set(H.index,H),H=H.sibling;return G}function y(G,H){return G=Us(G,H),G.index=0,G.sibling=null,G}function _(G,H,J){return G.index=J,o?(J=G.alternate,J!==null?(J=J.index,J<H?(G.flags|=2,H):J):(G.flags|=2,H)):(G.flags|=1048576,H)}function S(G){return o&&G.alternate===null&&(G.flags|=2),G}function F(G,H,J,fe){return H===null||H.tag!==6?(H=Yg(J,G.mode,fe),H.return=G,H):(H=y(H,J),H.return=G,H)}function $(G,H,J,fe){var Re=J.type;return Re===C?ue(G,H,J.props.children,fe,J.key):H!==null&&(H.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Pe&&W0(Re)===H.type)?(fe=y(H,J.props),fe.ref=hc(G,H,J),fe.return=G,fe):(fe=nf(J.type,J.key,J.props,null,G.mode,fe),fe.ref=hc(G,H,J),fe.return=G,fe)}function te(G,H,J,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=Xg(J,G.mode,fe),H.return=G,H):(H=y(H,J.children||[]),H.return=G,H)}function ue(G,H,J,fe,Re){return H===null||H.tag!==7?(H=ra(J,G.mode,fe,Re),H.return=G,H):(H=y(H,J),H.return=G,H)}function de(G,H,J){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Yg(""+H,G.mode,J),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Z:return J=nf(H.type,H.key,H.props,null,G.mode,J),J.ref=hc(G,null,H),J.return=G,J;case re:return H=Xg(H,G.mode,J),H.return=G,H;case Pe:var fe=H._init;return de(G,fe(H._payload),J)}if(Rt(H)||Y(H))return H=ra(H,G.mode,J,null),H.return=G,H;Dh(G,H)}return null}function ae(G,H,J,fe){var Re=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Re!==null?null:F(G,H,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Z:return J.key===Re?$(G,H,J,fe):null;case re:return J.key===Re?te(G,H,J,fe):null;case Pe:return Re=J._init,ae(G,H,Re(J._payload),fe)}if(Rt(J)||Y(J))return Re!==null?null:ue(G,H,J,fe,null);Dh(G,J)}return null}function _e(G,H,J,fe,Re){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(J)||null,F(H,G,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Z:return G=G.get(fe.key===null?J:fe.key)||null,$(H,G,fe,Re);case re:return G=G.get(fe.key===null?J:fe.key)||null,te(H,G,fe,Re);case Pe:var Oe=fe._init;return _e(G,H,J,Oe(fe._payload),Re)}if(Rt(fe)||Y(fe))return G=G.get(J)||null,ue(H,G,fe,Re,null);Dh(H,fe)}return null}function Ce(G,H,J,fe){for(var Re=null,Oe=null,Le=H,je=H=0,hn=null;Le!==null&&je<J.length;je++){Le.index>je?(hn=Le,Le=null):hn=Le.sibling;var rt=ae(G,Le,J[je],fe);if(rt===null){Le===null&&(Le=hn);break}o&&Le&&rt.alternate===null&&l(G,Le),H=_(rt,H,je),Oe===null?Re=rt:Oe.sibling=rt,Oe=rt,Le=hn}if(je===J.length)return c(G,Le),bt&&Qo(G,je),Re;if(Le===null){for(;je<J.length;je++)Le=de(G,J[je],fe),Le!==null&&(H=_(Le,H,je),Oe===null?Re=Le:Oe.sibling=Le,Oe=Le);return bt&&Qo(G,je),Re}for(Le=p(G,Le);je<J.length;je++)hn=_e(Le,G,je,J[je],fe),hn!==null&&(o&&hn.alternate!==null&&Le.delete(hn.key===null?je:hn.key),H=_(hn,H,je),Oe===null?Re=hn:Oe.sibling=hn,Oe=hn);return o&&Le.forEach(function(js){return l(G,js)}),bt&&Qo(G,je),Re}function Ae(G,H,J,fe){var Re=Y(J);if(typeof Re!="function")throw Error(t(150));if(J=Re.call(J),J==null)throw Error(t(151));for(var Oe=Re=null,Le=H,je=H=0,hn=null,rt=J.next();Le!==null&&!rt.done;je++,rt=J.next()){Le.index>je?(hn=Le,Le=null):hn=Le.sibling;var js=ae(G,Le,rt.value,fe);if(js===null){Le===null&&(Le=hn);break}o&&Le&&js.alternate===null&&l(G,Le),H=_(js,H,je),Oe===null?Re=js:Oe.sibling=js,Oe=js,Le=hn}if(rt.done)return c(G,Le),bt&&Qo(G,je),Re;if(Le===null){for(;!rt.done;je++,rt=J.next())rt=de(G,rt.value,fe),rt!==null&&(H=_(rt,H,je),Oe===null?Re=rt:Oe.sibling=rt,Oe=rt);return bt&&Qo(G,je),Re}for(Le=p(G,Le);!rt.done;je++,rt=J.next())rt=_e(Le,G,je,rt.value,fe),rt!==null&&(o&&rt.alternate!==null&&Le.delete(rt.key===null?je:rt.key),H=_(rt,H,je),Oe===null?Re=rt:Oe.sibling=rt,Oe=rt);return o&&Le.forEach(function(LD){return l(G,LD)}),bt&&Qo(G,je),Re}function Ht(G,H,J,fe){if(typeof J=="object"&&J!==null&&J.type===C&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case Z:e:{for(var Re=J.key,Oe=H;Oe!==null;){if(Oe.key===Re){if(Re=J.type,Re===C){if(Oe.tag===7){c(G,Oe.sibling),H=y(Oe,J.props.children),H.return=G,G=H;break e}}else if(Oe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Pe&&W0(Re)===Oe.type){c(G,Oe.sibling),H=y(Oe,J.props),H.ref=hc(G,Oe,J),H.return=G,G=H;break e}c(G,Oe);break}else l(G,Oe);Oe=Oe.sibling}J.type===C?(H=ra(J.props.children,G.mode,fe,J.key),H.return=G,G=H):(fe=nf(J.type,J.key,J.props,null,G.mode,fe),fe.ref=hc(G,H,J),fe.return=G,G=fe)}return S(G);case re:e:{for(Oe=J.key;H!==null;){if(H.key===Oe)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){c(G,H.sibling),H=y(H,J.children||[]),H.return=G,G=H;break e}else{c(G,H);break}else l(G,H);H=H.sibling}H=Xg(J,G.mode,fe),H.return=G,G=H}return S(G);case Pe:return Oe=J._init,Ht(G,H,Oe(J._payload),fe)}if(Rt(J))return Ce(G,H,J,fe);if(Y(J))return Ae(G,H,J,fe);Dh(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,H!==null&&H.tag===6?(c(G,H.sibling),H=y(H,J),H.return=G,G=H):(c(G,H),H=Yg(J,G.mode,fe),H.return=G,G=H),S(G)):c(G,H)}return Ht}var El=H0(!0),q0=H0(!1),Nh=xs(null),Vh=null,Tl=null,og=null;function ag(){og=Tl=Vh=null}function lg(o){var l=Nh.current;St(Nh),o._currentValue=l}function ug(o,l,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===c)break;o=o.return}}function Il(o,l){Vh=o,og=Tl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&($n=!0),o.firstContext=null)}function vr(o){var l=o._currentValue;if(og!==o)if(o={context:o,memoizedValue:l,next:null},Tl===null){if(Vh===null)throw Error(t(308));Tl=o,Vh.dependencies={lanes:0,firstContext:o}}else Tl=Tl.next=o;return l}var Yo=null;function cg(o){Yo===null?Yo=[o]:Yo.push(o)}function G0(o,l,c,p){var y=l.interleaved;return y===null?(c.next=c,cg(l)):(c.next=y.next,y.next=c),l.interleaved=c,$i(o,p)}function $i(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,c=o.alternate,c!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var Ds=!1;function dg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function zi(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Ns(o,l,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(et&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,$i(o,c)}return y=p.interleaved,y===null?(l.next=l,cg(p)):(l.next=y.next,y.next=l),p.interleaved=l,$i(o,c)}function Mh(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Gu(o,c)}}function Q0(o,l){var c=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?y=_=S:_=_.next=S,c=c.next}while(c!==null);_===null?y=_=l:_=_.next=l}else y=_=l;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function Oh(o,l,c,p){var y=o.updateQueue;Ds=!1;var _=y.firstBaseUpdate,S=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var $=F,te=$.next;$.next=null,S===null?_=te:S.next=te,S=$;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,F=ue.lastBaseUpdate,F!==S&&(F===null?ue.firstBaseUpdate=te:F.next=te,ue.lastBaseUpdate=$))}if(_!==null){var de=y.baseState;S=0,ue=te=$=null,F=_;do{var ae=F.lane,_e=F.eventTime;if((p&ae)===ae){ue!==null&&(ue=ue.next={eventTime:_e,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Ce=o,Ae=F;switch(ae=l,_e=c,Ae.tag){case 1:if(Ce=Ae.payload,typeof Ce=="function"){de=Ce.call(_e,de,ae);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ae.payload,ae=typeof Ce=="function"?Ce.call(_e,de,ae):Ce,ae==null)break e;de=X({},de,ae);break e;case 2:Ds=!0}}F.callback!==null&&F.lane!==0&&(o.flags|=64,ae=y.effects,ae===null?y.effects=[F]:ae.push(F))}else _e={eventTime:_e,lane:ae,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ue===null?(te=ue=_e,$=de):ue=ue.next=_e,S|=ae;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;ae=F,F=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(ue===null&&($=de),y.baseState=$,y.firstBaseUpdate=te,y.lastBaseUpdate=ue,l=y.shared.interleaved,l!==null){y=l;do S|=y.lane,y=y.next;while(y!==l)}else _===null&&(y.shared.lanes=0);Zo|=S,o.lanes=S,o.memoizedState=de}}function Y0(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var fc={},ai=xs(fc),pc=xs(fc),mc=xs(fc);function Xo(o){if(o===fc)throw Error(t(174));return o}function hg(o,l){switch(_t(mc,l),_t(pc,o),_t(ai,fc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ps(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ps(l,o)}St(ai),_t(ai,l)}function Sl(){St(ai),St(pc),St(mc)}function X0(o){Xo(mc.current);var l=Xo(ai.current),c=ps(l,o.type);l!==c&&(_t(pc,o),_t(ai,c))}function fg(o){pc.current===o&&(St(ai),St(pc))}var kt=xs(0);function Lh(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var pg=[];function mg(){for(var o=0;o<pg.length;o++)pg[o]._workInProgressVersionPrimary=null;pg.length=0}var Fh=B.ReactCurrentDispatcher,gg=B.ReactCurrentBatchConfig,Jo=0,Dt=null,sn=null,cn=null,Uh=!1,gc=!1,yc=0,sD=0;function Sn(){throw Error(t(321))}function yg(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!kr(o[c],l[c]))return!1;return!0}function vg(o,l,c,p,y,_){if(Jo=_,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Fh.current=o===null||o.memoizedState===null?uD:cD,o=c(p,y),gc){_=0;do{if(gc=!1,yc=0,25<=_)throw Error(t(301));_+=1,cn=sn=null,l.updateQueue=null,Fh.current=dD,o=c(p,y)}while(gc)}if(Fh.current=$h,l=sn!==null&&sn.next!==null,Jo=0,cn=sn=Dt=null,Uh=!1,l)throw Error(t(300));return o}function _g(){var o=yc!==0;return yc=0,o}function li(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Dt.memoizedState=cn=o:cn=cn.next=o,cn}function _r(){if(sn===null){var o=Dt.alternate;o=o!==null?o.memoizedState:null}else o=sn.next;var l=cn===null?Dt.memoizedState:cn.next;if(l!==null)cn=l,sn=o;else{if(o===null)throw Error(t(310));sn=o,o={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},cn===null?Dt.memoizedState=cn=o:cn=cn.next=o}return cn}function vc(o,l){return typeof l=="function"?l(o):l}function wg(o){var l=_r(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=sn,y=p.baseQueue,_=c.pending;if(_!==null){if(y!==null){var S=y.next;y.next=_.next,_.next=S}p.baseQueue=y=_,c.pending=null}if(y!==null){_=y.next,p=p.baseState;var F=S=null,$=null,te=_;do{var ue=te.lane;if((Jo&ue)===ue)$!==null&&($=$.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),p=te.hasEagerState?te.eagerState:o(p,te.action);else{var de={lane:ue,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};$===null?(F=$=de,S=p):$=$.next=de,Dt.lanes|=ue,Zo|=ue}te=te.next}while(te!==null&&te!==_);$===null?S=p:$.next=F,kr(p,l.memoizedState)||($n=!0),l.memoizedState=p,l.baseState=S,l.baseQueue=$,c.lastRenderedState=p}if(o=c.interleaved,o!==null){y=o;do _=y.lane,Dt.lanes|=_,Zo|=_,y=y.next;while(y!==o)}else y===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function Eg(o){var l=_r(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=c.dispatch,y=c.pending,_=l.memoizedState;if(y!==null){c.pending=null;var S=y=y.next;do _=o(_,S.action),S=S.next;while(S!==y);kr(_,l.memoizedState)||($n=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),c.lastRenderedState=_}return[_,p]}function J0(){}function Z0(o,l){var c=Dt,p=_r(),y=l(),_=!kr(p.memoizedState,y);if(_&&(p.memoizedState=y,$n=!0),p=p.queue,Tg(nE.bind(null,c,p,o),[o]),p.getSnapshot!==l||_||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,_c(9,tE.bind(null,c,p,y,l),void 0,null),dn===null)throw Error(t(349));(Jo&30)!==0||eE(c,l,y)}return y}function eE(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function tE(o,l,c,p){l.value=c,l.getSnapshot=p,rE(l)&&iE(o)}function nE(o,l,c){return c(function(){rE(l)&&iE(o)})}function rE(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!kr(o,c)}catch{return!0}}function iE(o){var l=$i(o,1);l!==null&&Or(l,o,1,-1)}function sE(o){var l=li();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:o},l.queue=o,o=o.dispatch=lD.bind(null,Dt,o),[l.memoizedState,o]}function _c(o,l,c,p){return o={tag:o,create:l,destroy:c,deps:p,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect,c===null?l.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,l.lastEffect=o)),o}function oE(){return _r().memoizedState}function jh(o,l,c,p){var y=li();Dt.flags|=o,y.memoizedState=_c(1|l,c,void 0,p===void 0?null:p)}function Bh(o,l,c,p){var y=_r();p=p===void 0?null:p;var _=void 0;if(sn!==null){var S=sn.memoizedState;if(_=S.destroy,p!==null&&yg(p,S.deps)){y.memoizedState=_c(l,c,_,p);return}}Dt.flags|=o,y.memoizedState=_c(1|l,c,_,p)}function aE(o,l){return jh(8390656,8,o,l)}function Tg(o,l){return Bh(2048,8,o,l)}function lE(o,l){return Bh(4,2,o,l)}function uE(o,l){return Bh(4,4,o,l)}function cE(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function dE(o,l,c){return c=c!=null?c.concat([o]):null,Bh(4,4,cE.bind(null,l,o),c)}function Ig(){}function hE(o,l){var c=_r();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&yg(l,p[1])?p[0]:(c.memoizedState=[o,l],o)}function fE(o,l){var c=_r();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&yg(l,p[1])?p[0]:(o=o(),c.memoizedState=[o,l],o)}function pE(o,l,c){return(Jo&21)===0?(o.baseState&&(o.baseState=!1,$n=!0),o.memoizedState=c):(kr(c,l)||(c=Hu(),Dt.lanes|=c,Zo|=c,o.baseState=!0),l)}function oD(o,l){var c=Qe;Qe=c!==0&&4>c?c:4,o(!0);var p=gg.transition;gg.transition={};try{o(!1),l()}finally{Qe=c,gg.transition=p}}function mE(){return _r().memoizedState}function aD(o,l,c){var p=Ls(o);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},gE(o))yE(l,c);else if(c=G0(o,l,c,p),c!==null){var y=Vn();Or(c,o,p,y),vE(c,l,p)}}function lD(o,l,c){var p=Ls(o),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(gE(o))yE(l,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var S=l.lastRenderedState,F=_(S,c);if(y.hasEagerState=!0,y.eagerState=F,kr(F,S)){var $=l.interleaved;$===null?(y.next=y,cg(l)):(y.next=$.next,$.next=y),l.interleaved=y;return}}catch{}c=G0(o,l,y,p),c!==null&&(y=Vn(),Or(c,o,p,y),vE(c,l,p))}}function gE(o){var l=o.alternate;return o===Dt||l!==null&&l===Dt}function yE(o,l){gc=Uh=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function vE(o,l,c){if((c&4194240)!==0){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Gu(o,c)}}var $h={readContext:vr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},uD={readContext:vr,useCallback:function(o,l){return li().memoizedState=[o,l===void 0?null:l],o},useContext:vr,useEffect:aE,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,jh(4194308,4,cE.bind(null,l,o),c)},useLayoutEffect:function(o,l){return jh(4194308,4,o,l)},useInsertionEffect:function(o,l){return jh(4,2,o,l)},useMemo:function(o,l){var c=li();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var p=li();return l=c!==void 0?c(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=aD.bind(null,Dt,o),[p.memoizedState,o]},useRef:function(o){var l=li();return o={current:o},l.memoizedState=o},useState:sE,useDebugValue:Ig,useDeferredValue:function(o){return li().memoizedState=o},useTransition:function(){var o=sE(!1),l=o[0];return o=oD.bind(null,o[1]),li().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var p=Dt,y=li();if(bt){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),dn===null)throw Error(t(349));(Jo&30)!==0||eE(p,l,c)}y.memoizedState=c;var _={value:c,getSnapshot:l};return y.queue=_,aE(nE.bind(null,p,_,o),[o]),p.flags|=2048,_c(9,tE.bind(null,p,_,c,l),void 0,null),c},useId:function(){var o=li(),l=dn.identifierPrefix;if(bt){var c=Bi,p=ji;c=(p&~(1<<32-Zn(p)-1)).toString(32)+c,l=":"+l+"R"+c,c=yc++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=sD++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},cD={readContext:vr,useCallback:hE,useContext:vr,useEffect:Tg,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:fE,useReducer:wg,useRef:oE,useState:function(){return wg(vc)},useDebugValue:Ig,useDeferredValue:function(o){var l=_r();return pE(l,sn.memoizedState,o)},useTransition:function(){var o=wg(vc)[0],l=_r().memoizedState;return[o,l]},useMutableSource:J0,useSyncExternalStore:Z0,useId:mE,unstable_isNewReconciler:!1},dD={readContext:vr,useCallback:hE,useContext:vr,useEffect:Tg,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:fE,useReducer:Eg,useRef:oE,useState:function(){return Eg(vc)},useDebugValue:Ig,useDeferredValue:function(o){var l=_r();return sn===null?l.memoizedState=o:pE(l,sn.memoizedState,o)},useTransition:function(){var o=Eg(vc)[0],l=_r().memoizedState;return[o,l]},useMutableSource:J0,useSyncExternalStore:Z0,useId:mE,unstable_isNewReconciler:!1};function Nr(o,l){if(o&&o.defaultProps){l=X({},l),o=o.defaultProps;for(var c in o)l[c]===void 0&&(l[c]=o[c]);return l}return l}function Sg(o,l,c,p){l=o.memoizedState,c=c(p,l),c=c==null?l:X({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var zh={isMounted:function(o){return(o=o._reactInternals)?xr(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var p=Vn(),y=Ls(o),_=zi(p,y);_.payload=l,c!=null&&(_.callback=c),l=Ns(o,_,y),l!==null&&(Or(l,o,y,p),Mh(l,o,y))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var p=Vn(),y=Ls(o),_=zi(p,y);_.tag=1,_.payload=l,c!=null&&(_.callback=c),l=Ns(o,_,y),l!==null&&(Or(l,o,y,p),Mh(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=Vn(),p=Ls(o),y=zi(c,p);y.tag=2,l!=null&&(y.callback=l),l=Ns(o,y,p),l!==null&&(Or(l,o,p,c),Mh(l,o,p))}};function _E(o,l,c,p,y,_,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,_,S):l.prototype&&l.prototype.isPureReactComponent?!sc(c,p)||!sc(y,_):!0}function wE(o,l,c){var p=!1,y=Rs,_=l.contextType;return typeof _=="object"&&_!==null?_=vr(_):(y=Bn(l)?Go:In.current,p=l.contextTypes,_=(p=p!=null)?yl(o,y):Rs),l=new l(c,_),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=zh,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=_),l}function EE(o,l,c,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==o&&zh.enqueueReplaceState(l,l.state,null)}function Pg(o,l,c,p){var y=o.stateNode;y.props=c,y.state=o.memoizedState,y.refs={},dg(o);var _=l.contextType;typeof _=="object"&&_!==null?y.context=vr(_):(_=Bn(l)?Go:In.current,y.context=yl(o,_)),y.state=o.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Sg(o,l,_,c),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&zh.enqueueReplaceState(y,y.state,null),Oh(o,c,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Pl(o,l){try{var c="",p=l;do c+=oe(p),p=p.return;while(p);var y=c}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:l,stack:y,digest:null}}function Cg(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function bg(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var hD=typeof WeakMap=="function"?WeakMap:Map;function TE(o,l,c){c=zi(-1,c),c.tag=3,c.payload={element:null};var p=l.value;return c.callback=function(){Yh||(Yh=!0,$g=p),bg(o,l)},c}function IE(o,l,c){c=zi(-1,c),c.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;c.payload=function(){return p(y)},c.callback=function(){bg(o,l)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){bg(o,l),typeof p!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})}),c}function SE(o,l,c){var p=o.pingCache;if(p===null){p=o.pingCache=new hD;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(c)||(y.add(c),o=CD.bind(null,o,l,c),l.then(o,o))}function PE(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function CE(o,l,c,p,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=zi(-1,1),l.tag=2,Ns(c,l,1))),c.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var fD=B.ReactCurrentOwner,$n=!1;function Nn(o,l,c,p){l.child=o===null?q0(l,null,c,p):El(l,o.child,c,p)}function bE(o,l,c,p,y){c=c.render;var _=l.ref;return Il(l,y),p=vg(o,l,c,p,_,y),c=_g(),o!==null&&!$n?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Wi(o,l,y)):(bt&&c&&tg(l),l.flags|=1,Nn(o,l,p,y),l.child)}function AE(o,l,c,p,y){if(o===null){var _=c.type;return typeof _=="function"&&!Qg(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=_,xE(o,l,_,p,y)):(o=nf(c.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,(o.lanes&y)===0){var S=_.memoizedProps;if(c=c.compare,c=c!==null?c:sc,c(S,p)&&o.ref===l.ref)return Wi(o,l,y)}return l.flags|=1,o=Us(_,p),o.ref=l.ref,o.return=l,l.child=o}function xE(o,l,c,p,y){if(o!==null){var _=o.memoizedProps;if(sc(_,p)&&o.ref===l.ref)if($n=!1,l.pendingProps=p=_,(o.lanes&y)!==0)(o.flags&131072)!==0&&($n=!0);else return l.lanes=o.lanes,Wi(o,l,y)}return Ag(o,l,c,p,y)}function RE(o,l,c){var p=l.pendingProps,y=p.children,_=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(bl,or),or|=c;else{if((c&1073741824)===0)return o=_!==null?_.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,_t(bl,or),or|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:c,_t(bl,or),or|=p}else _!==null?(p=_.baseLanes|c,l.memoizedState=null):p=c,_t(bl,or),or|=p;return Nn(o,l,y,c),l.child}function kE(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function Ag(o,l,c,p,y){var _=Bn(c)?Go:In.current;return _=yl(l,_),Il(l,y),c=vg(o,l,c,p,_,y),p=_g(),o!==null&&!$n?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Wi(o,l,y)):(bt&&p&&tg(l),l.flags|=1,Nn(o,l,c,y),l.child)}function DE(o,l,c,p,y){if(Bn(c)){var _=!0;bh(l)}else _=!1;if(Il(l,y),l.stateNode===null)Hh(o,l),wE(l,c,p),Pg(l,c,p,y),p=!0;else if(o===null){var S=l.stateNode,F=l.memoizedProps;S.props=F;var $=S.context,te=c.contextType;typeof te=="object"&&te!==null?te=vr(te):(te=Bn(c)?Go:In.current,te=yl(l,te));var ue=c.getDerivedStateFromProps,de=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==p||$!==te)&&EE(l,S,p,te),Ds=!1;var ae=l.memoizedState;S.state=ae,Oh(l,p,S,y),$=l.memoizedState,F!==p||ae!==$||jn.current||Ds?(typeof ue=="function"&&(Sg(l,c,ue,p),$=l.memoizedState),(F=Ds||_E(l,c,F,p,ae,$,te))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=$),S.props=p,S.state=$,S.context=te,p=F):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{S=l.stateNode,K0(o,l),F=l.memoizedProps,te=l.type===l.elementType?F:Nr(l.type,F),S.props=te,de=l.pendingProps,ae=S.context,$=c.contextType,typeof $=="object"&&$!==null?$=vr($):($=Bn(c)?Go:In.current,$=yl(l,$));var _e=c.getDerivedStateFromProps;(ue=typeof _e=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F!==de||ae!==$)&&EE(l,S,p,$),Ds=!1,ae=l.memoizedState,S.state=ae,Oh(l,p,S,y);var Ce=l.memoizedState;F!==de||ae!==Ce||jn.current||Ds?(typeof _e=="function"&&(Sg(l,c,_e,p),Ce=l.memoizedState),(te=Ds||_E(l,c,te,p,ae,Ce,$)||!1)?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Ce,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Ce,$)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Ce),S.props=p,S.state=Ce,S.context=$,p=te):(typeof S.componentDidUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&ae===o.memoizedState||(l.flags|=1024),p=!1)}return xg(o,l,c,p,_,y)}function xg(o,l,c,p,y,_){kE(o,l);var S=(l.flags&128)!==0;if(!p&&!S)return y&&L0(l,c,!1),Wi(o,l,_);p=l.stateNode,fD.current=l;var F=S&&typeof c.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&S?(l.child=El(l,o.child,null,_),l.child=El(l,null,F,_)):Nn(o,l,F,_),l.memoizedState=p.state,y&&L0(l,c,!0),l.child}function NE(o){var l=o.stateNode;l.pendingContext?M0(o,l.pendingContext,l.pendingContext!==l.context):l.context&&M0(o,l.context,!1),hg(o,l.containerInfo)}function VE(o,l,c,p,y){return wl(),sg(y),l.flags|=256,Nn(o,l,c,p),l.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function kg(o){return{baseLanes:o,cachePool:null,transitions:null}}function ME(o,l,c){var p=l.pendingProps,y=kt.current,_=!1,S=(l.flags&128)!==0,F;if((F=S)||(F=o!==null&&o.memoizedState===null?!1:(y&2)!==0),F?(_=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),_t(kt,y&1),o===null)return ig(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(S=p.children,o=p.fallback,_?(p=l.mode,_=l.child,S={mode:"hidden",children:S},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=rf(S,p,0,null),o=ra(o,p,c,null),_.return=l,o.return=l,_.sibling=o,l.child=_,l.child.memoizedState=kg(c),l.memoizedState=Rg,o):Dg(l,S));if(y=o.memoizedState,y!==null&&(F=y.dehydrated,F!==null))return pD(o,l,S,p,F,y,c);if(_){_=p.fallback,S=l.mode,y=o.child,F=y.sibling;var $={mode:"hidden",children:p.children};return(S&1)===0&&l.child!==y?(p=l.child,p.childLanes=0,p.pendingProps=$,l.deletions=null):(p=Us(y,$),p.subtreeFlags=y.subtreeFlags&14680064),F!==null?_=Us(F,_):(_=ra(_,S,c,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,S=o.child.memoizedState,S=S===null?kg(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=o.childLanes&~c,l.memoizedState=Rg,p}return _=o.child,o=_.sibling,p=Us(_,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=c),p.return=l,p.sibling=null,o!==null&&(c=l.deletions,c===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=p,l.memoizedState=null,p}function Dg(o,l){return l=rf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Wh(o,l,c,p){return p!==null&&sg(p),El(l,o.child,null,c),o=Dg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function pD(o,l,c,p,y,_,S){if(c)return l.flags&256?(l.flags&=-257,p=Cg(Error(t(422))),Wh(o,l,S,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(_=p.fallback,y=l.mode,p=rf({mode:"visible",children:p.children},y,0,null),_=ra(_,y,S,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,(l.mode&1)!==0&&El(l,o.child,null,S),l.child.memoizedState=kg(S),l.memoizedState=Rg,_);if((l.mode&1)===0)return Wh(o,l,S,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var F=p.dgst;return p=F,_=Error(t(419)),p=Cg(_,p,void 0),Wh(o,l,S,p)}if(F=(S&o.childLanes)!==0,$n||F){if(p=dn,p!==null){switch(S&-S){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|S))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,$i(o,y),Or(p,o,y,-1))}return Kg(),p=Cg(Error(t(421))),Wh(o,l,S,p)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=bD.bind(null,o),y._reactRetry=l,null):(o=_.treeContext,sr=As(y.nextSibling),ir=l,bt=!0,Dr=null,o!==null&&(gr[yr++]=ji,gr[yr++]=Bi,gr[yr++]=Ko,ji=o.id,Bi=o.overflow,Ko=l),l=Dg(l,p.children),l.flags|=4096,l)}function OE(o,l,c){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),ug(o.return,l,c)}function Ng(o,l,c,p,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=c,_.tailMode=y)}function LE(o,l,c){var p=l.pendingProps,y=p.revealOrder,_=p.tail;if(Nn(o,l,p.children,c),p=kt.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&OE(o,c,l);else if(o.tag===19)OE(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(_t(kt,p),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&Lh(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),Ng(l,!1,y,c,_);break;case"backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&Lh(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}Ng(l,!0,c,null,_);break;case"together":Ng(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Hh(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Wi(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),Zo|=l.lanes,(c&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,c=Us(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=Us(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function mD(o,l,c){switch(l.tag){case 3:NE(l),wl();break;case 5:X0(l);break;case 1:Bn(l.type)&&bh(l);break;case 4:hg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,y=l.memoizedProps.value;_t(Nh,p._currentValue),p._currentValue=y;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(_t(kt,kt.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?ME(o,l,c):(_t(kt,kt.current&1),o=Wi(o,l,c),o!==null?o.sibling:null);_t(kt,kt.current&1);break;case 19:if(p=(c&l.childLanes)!==0,(o.flags&128)!==0){if(p)return LE(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),_t(kt,kt.current),p)break;return null;case 22:case 23:return l.lanes=0,RE(o,l,c)}return Wi(o,l,c)}var FE,Vg,UE,jE;FE=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Vg=function(){},UE=function(o,l,c,p){var y=o.memoizedProps;if(y!==p){o=l.stateNode,Xo(ai.current);var _=null;switch(c){case"input":y=ds(o,y),p=ds(o,p),_=[];break;case"select":y=X({},y,{value:void 0}),p=X({},p,{value:void 0}),_=[];break;case"textarea":y=Ro(o,y),p=Ro(o,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=Sh)}Ar(c,p);var S;c=null;for(te in y)if(!p.hasOwnProperty(te)&&y.hasOwnProperty(te)&&y[te]!=null)if(te==="style"){var F=y[te];for(S in F)F.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(i.hasOwnProperty(te)?_||(_=[]):(_=_||[]).push(te,null));for(te in p){var $=p[te];if(F=y?.[te],p.hasOwnProperty(te)&&$!==F&&($!=null||F!=null))if(te==="style")if(F){for(S in F)!F.hasOwnProperty(S)||$&&$.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in $)$.hasOwnProperty(S)&&F[S]!==$[S]&&(c||(c={}),c[S]=$[S])}else c||(_||(_=[]),_.push(te,c)),c=$;else te==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(_=_||[]).push(te,$)):te==="children"?typeof $!="string"&&typeof $!="number"||(_=_||[]).push(te,""+$):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(i.hasOwnProperty(te)?($!=null&&te==="onScroll"&&It("scroll",o),_||F===$||(_=[])):(_=_||[]).push(te,$))}c&&(_=_||[]).push("style",c);var te=_;(l.updateQueue=te)&&(l.flags|=4)}},jE=function(o,l,c,p){c!==p&&(l.flags|=4)};function wc(o,l){if(!bt)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Pn(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=c,l}function gD(o,l,c){var p=l.pendingProps;switch(ng(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(l),null;case 1:return Bn(l.type)&&Ch(),Pn(l),null;case 3:return p=l.stateNode,Sl(),St(jn),St(In),mg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(kh(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Dr!==null&&(Hg(Dr),Dr=null))),Vg(o,l),Pn(l),null;case 5:fg(l);var y=Xo(mc.current);if(c=l.type,o!==null&&l.stateNode!=null)UE(o,l,c,p,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return Pn(l),null}if(o=Xo(ai.current),kh(l)){p=l.stateNode,c=l.type;var _=l.memoizedProps;switch(p[oi]=l,p[cc]=_,o=(l.mode&1)!==0,c){case"dialog":It("cancel",p),It("close",p);break;case"iframe":case"object":case"embed":It("load",p);break;case"video":case"audio":for(y=0;y<ac.length;y++)It(ac[y],p);break;case"source":It("error",p);break;case"img":case"image":case"link":It("error",p),It("load",p);break;case"details":It("toggle",p);break;case"input":Ao(p,_),It("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},It("invalid",p);break;case"textarea":fs(p,_),It("invalid",p)}Ar(c,_),y=null;for(var S in _)if(_.hasOwnProperty(S)){var F=_[S];S==="children"?typeof F=="string"?p.textContent!==F&&(_.suppressHydrationWarning!==!0&&Ih(p.textContent,F,o),y=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(_.suppressHydrationWarning!==!0&&Ih(p.textContent,F,o),y=["children",""+F]):i.hasOwnProperty(S)&&F!=null&&S==="onScroll"&&It("scroll",p)}switch(c){case"input":Lt(p),xo(p,_,!0);break;case"textarea":Lt(p),br(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=Sh)}p=y,l.updateQueue=p,p!==null&&(l.flags|=4)}else{S=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Do(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=S.createElement(c,{is:p.is}):(o=S.createElement(c),c==="select"&&(S=o,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):o=S.createElementNS(o,c),o[oi]=l,o[cc]=p,FE(o,l,!1,!1),l.stateNode=o;e:{switch(S=Ga(c,p),c){case"dialog":It("cancel",o),It("close",o),y=p;break;case"iframe":case"object":case"embed":It("load",o),y=p;break;case"video":case"audio":for(y=0;y<ac.length;y++)It(ac[y],o);y=p;break;case"source":It("error",o),y=p;break;case"img":case"image":case"link":It("error",o),It("load",o),y=p;break;case"details":It("toggle",o),y=p;break;case"input":Ao(o,p),y=ds(o,p),It("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=X({},p,{value:void 0}),It("invalid",o);break;case"textarea":fs(o,p),y=Ro(o,p),It("invalid",o);break;default:y=p}Ar(c,y),F=y;for(_ in F)if(F.hasOwnProperty(_)){var $=F[_];_==="style"?ms(o,$):_==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&qa(o,$)):_==="children"?typeof $=="string"?(c!=="textarea"||$!=="")&&Xn(o,$):typeof $=="number"&&Xn(o,""+$):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?$!=null&&_==="onScroll"&&It("scroll",o):$!=null&&D(o,_,$,S))}switch(c){case"input":Lt(o),xo(o,p,!1);break;case"textarea":Lt(o),br(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Me(p.value));break;case"select":o.multiple=!!p.multiple,_=p.value,_!=null?En(o,!!p.multiple,_,!1):p.defaultValue!=null&&En(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=Sh)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Pn(l),null;case 6:if(o&&l.stateNode!=null)jE(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(c=Xo(mc.current),Xo(ai.current),kh(l)){if(p=l.stateNode,c=l.memoizedProps,p[oi]=l,(_=p.nodeValue!==c)&&(o=ir,o!==null))switch(o.tag){case 3:Ih(p.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ih(p.nodeValue,c,(o.mode&1)!==0)}_&&(l.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[oi]=l,l.stateNode=p}return Pn(l),null;case 13:if(St(kt),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(bt&&sr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)z0(),wl(),l.flags|=98560,_=!1;else if(_=kh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[oi]=l}else wl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Pn(l),_=!1}else Dr!==null&&(Hg(Dr),Dr=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(kt.current&1)!==0?on===0&&(on=3):Kg())),l.updateQueue!==null&&(l.flags|=4),Pn(l),null);case 4:return Sl(),Vg(o,l),o===null&&lc(l.stateNode.containerInfo),Pn(l),null;case 10:return lg(l.type._context),Pn(l),null;case 17:return Bn(l.type)&&Ch(),Pn(l),null;case 19:if(St(kt),_=l.memoizedState,_===null)return Pn(l),null;if(p=(l.flags&128)!==0,S=_.rendering,S===null)if(p)wc(_,!1);else{if(on!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(S=Lh(o),S!==null){for(l.flags|=128,wc(_,!1),p=S.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=c,c=l.child;c!==null;)_=c,o=p,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,o=S.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return _t(kt,kt.current&1|2),l.child}o=o.sibling}_.tail!==null&&Tt()>Al&&(l.flags|=128,p=!0,wc(_,!1),l.lanes=4194304)}else{if(!p)if(o=Lh(S),o!==null){if(l.flags|=128,p=!0,c=o.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),wc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!bt)return Pn(l),null}else 2*Tt()-_.renderingStartTime>Al&&c!==1073741824&&(l.flags|=128,p=!0,wc(_,!1),l.lanes=4194304);_.isBackwards?(S.sibling=l.child,l.child=S):(c=_.last,c!==null?c.sibling=S:l.child=S,_.last=S)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Tt(),l.sibling=null,c=kt.current,_t(kt,p?c&1|2:c&1),l):(Pn(l),null);case 22:case 23:return Gg(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(or&1073741824)!==0&&(Pn(l),l.subtreeFlags&6&&(l.flags|=8192)):Pn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function yD(o,l){switch(ng(l),l.tag){case 1:return Bn(l.type)&&Ch(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Sl(),St(jn),St(In),mg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return fg(l),null;case 13:if(St(kt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));wl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return St(kt),null;case 4:return Sl(),null;case 10:return lg(l.type._context),null;case 22:case 23:return Gg(),null;case 24:return null;default:return null}}var qh=!1,Cn=!1,vD=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Cl(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){jt(o,l,p)}else c.current=null}function Mg(o,l,c){try{c()}catch(p){jt(o,l,p)}}var BE=!1;function _D(o,l){if(Gm=Mi,o=_0(),Um(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var S=0,F=-1,$=-1,te=0,ue=0,de=o,ae=null;t:for(;;){for(var _e;de!==c||y!==0&&de.nodeType!==3||(F=S+y),de!==_||p!==0&&de.nodeType!==3||($=S+p),de.nodeType===3&&(S+=de.nodeValue.length),(_e=de.firstChild)!==null;)ae=de,de=_e;for(;;){if(de===o)break t;if(ae===c&&++te===y&&(F=S),ae===_&&++ue===p&&($=S),(_e=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=_e}c=F===-1||$===-1?null:{start:F,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(Km={focusedElem:o,selectionRange:c},Mi=!1,Ie=l;Ie!==null;)if(l=Ie,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ie=o;else for(;Ie!==null;){l=Ie;try{var Ce=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Ae=Ce.memoizedProps,Ht=Ce.memoizedState,G=l.stateNode,H=G.getSnapshotBeforeUpdate(l.elementType===l.type?Ae:Nr(l.type,Ae),Ht);G.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var J=l.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){jt(l,l.return,fe)}if(o=l.sibling,o!==null){o.return=l.return,Ie=o;break}Ie=l.return}return Ce=BE,BE=!1,Ce}function Ec(o,l,c){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var _=y.destroy;y.destroy=void 0,_!==void 0&&Mg(l,c,_)}y=y.next}while(y!==p)}}function Gh(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==l)}}function Og(o){var l=o.ref;if(l!==null){var c=o.stateNode;o.tag,o=c,typeof l=="function"?l(o):l.current=o}}function $E(o){var l=o.alternate;l!==null&&(o.alternate=null,$E(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[oi],delete l[cc],delete l[Jm],delete l[tD],delete l[nD])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function zE(o){return o.tag===5||o.tag===3||o.tag===4}function WE(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||zE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Lg(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Sh));else if(p!==4&&(o=o.child,o!==null))for(Lg(o,l,c),o=o.sibling;o!==null;)Lg(o,l,c),o=o.sibling}function Fg(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(Fg(o,l,c),o=o.sibling;o!==null;)Fg(o,l,c),o=o.sibling}var vn=null,Vr=!1;function Vs(o,l,c){for(c=c.child;c!==null;)HE(o,l,c),c=c.sibling}function HE(o,l,c){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Lo,c)}catch{}switch(c.tag){case 5:Cn||Cl(c,l);case 6:var p=vn,y=Vr;vn=null,Vs(o,l,c),vn=p,Vr=y,vn!==null&&(Vr?(o=vn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):vn.removeChild(c.stateNode));break;case 18:vn!==null&&(Vr?(o=vn,c=c.stateNode,o.nodeType===8?Xm(o.parentNode,c):o.nodeType===1&&Xm(o,c),Ss(o)):Xm(vn,c.stateNode));break;case 4:p=vn,y=Vr,vn=c.stateNode.containerInfo,Vr=!0,Vs(o,l,c),vn=p,Vr=y;break;case 0:case 11:case 14:case 15:if(!Cn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&Mg(c,l,S),y=y.next}while(y!==p)}Vs(o,l,c);break;case 1:if(!Cn&&(Cl(c,l),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(F){jt(c,l,F)}Vs(o,l,c);break;case 21:Vs(o,l,c);break;case 22:c.mode&1?(Cn=(p=Cn)||c.memoizedState!==null,Vs(o,l,c),Cn=p):Vs(o,l,c);break;default:Vs(o,l,c)}}function qE(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new vD),l.forEach(function(p){var y=AD.bind(null,o,p);c.has(p)||(c.add(p),p.then(y,y))})}}function Mr(o,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var _=o,S=l,F=S;e:for(;F!==null;){switch(F.tag){case 5:vn=F.stateNode,Vr=!1;break e;case 3:vn=F.stateNode.containerInfo,Vr=!0;break e;case 4:vn=F.stateNode.containerInfo,Vr=!0;break e}F=F.return}if(vn===null)throw Error(t(160));HE(_,S,y),vn=null,Vr=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(te){jt(y,l,te)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)GE(l,o),l=l.sibling}function GE(o,l){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Mr(l,o),ui(o),p&4){try{Ec(3,o,o.return),Gh(3,o)}catch(Ae){jt(o,o.return,Ae)}try{Ec(5,o,o.return)}catch(Ae){jt(o,o.return,Ae)}}break;case 1:Mr(l,o),ui(o),p&512&&c!==null&&Cl(c,c.return);break;case 5:if(Mr(l,o),ui(o),p&512&&c!==null&&Cl(c,c.return),o.flags&32){var y=o.stateNode;try{Xn(y,"")}catch(Ae){jt(o,o.return,Ae)}}if(p&4&&(y=o.stateNode,y!=null)){var _=o.memoizedProps,S=c!==null?c.memoizedProps:_,F=o.type,$=o.updateQueue;if(o.updateQueue=null,$!==null)try{F==="input"&&_.type==="radio"&&_.name!=null&&hs(y,_),Ga(F,S);var te=Ga(F,_);for(S=0;S<$.length;S+=2){var ue=$[S],de=$[S+1];ue==="style"?ms(y,de):ue==="dangerouslySetInnerHTML"?qa(y,de):ue==="children"?Xn(y,de):D(y,ue,de,te)}switch(F){case"input":Cr(y,_);break;case"textarea":ko(y,_);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var _e=_.value;_e!=null?En(y,!!_.multiple,_e,!1):ae!==!!_.multiple&&(_.defaultValue!=null?En(y,!!_.multiple,_.defaultValue,!0):En(y,!!_.multiple,_.multiple?[]:"",!1))}y[cc]=_}catch(Ae){jt(o,o.return,Ae)}}break;case 6:if(Mr(l,o),ui(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,_=o.memoizedProps;try{y.nodeValue=_}catch(Ae){jt(o,o.return,Ae)}}break;case 3:if(Mr(l,o),ui(o),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Ss(l.containerInfo)}catch(Ae){jt(o,o.return,Ae)}break;case 4:Mr(l,o),ui(o);break;case 13:Mr(l,o),ui(o),y=o.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Bg=Tt())),p&4&&qE(o);break;case 22:if(ue=c!==null&&c.memoizedState!==null,o.mode&1?(Cn=(te=Cn)||ue,Mr(l,o),Cn=te):Mr(l,o),ui(o),p&8192){if(te=o.memoizedState!==null,(o.stateNode.isHidden=te)&&!ue&&(o.mode&1)!==0)for(Ie=o,ue=o.child;ue!==null;){for(de=Ie=ue;Ie!==null;){switch(ae=Ie,_e=ae.child,ae.tag){case 0:case 11:case 14:case 15:Ec(4,ae,ae.return);break;case 1:Cl(ae,ae.return);var Ce=ae.stateNode;if(typeof Ce.componentWillUnmount=="function"){p=ae,c=ae.return;try{l=p,Ce.props=l.memoizedProps,Ce.state=l.memoizedState,Ce.componentWillUnmount()}catch(Ae){jt(p,c,Ae)}}break;case 5:Cl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){YE(de);continue}}_e!==null?(_e.return=ae,Ie=_e):YE(de)}ue=ue.sibling}e:for(ue=null,de=o;;){if(de.tag===5){if(ue===null){ue=de;try{y=de.stateNode,te?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(F=de.stateNode,$=de.memoizedProps.style,S=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=Hr("display",S))}catch(Ae){jt(o,o.return,Ae)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=te?"":de.memoizedProps}catch(Ae){jt(o,o.return,Ae)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===o)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===o)break e;for(;de.sibling===null;){if(de.return===null||de.return===o)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Mr(l,o),ui(o),p&4&&qE(o);break;case 21:break;default:Mr(l,o),ui(o)}}function ui(o){var l=o.flags;if(l&2){try{e:{for(var c=o.return;c!==null;){if(zE(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Xn(y,""),p.flags&=-33);var _=WE(o);Fg(o,_,y);break;case 3:case 4:var S=p.stateNode.containerInfo,F=WE(o);Lg(o,F,S);break;default:throw Error(t(161))}}catch($){jt(o,o.return,$)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function wD(o,l,c){Ie=o,KE(o)}function KE(o,l,c){for(var p=(o.mode&1)!==0;Ie!==null;){var y=Ie,_=y.child;if(y.tag===22&&p){var S=y.memoizedState!==null||qh;if(!S){var F=y.alternate,$=F!==null&&F.memoizedState!==null||Cn;F=qh;var te=Cn;if(qh=S,(Cn=$)&&!te)for(Ie=y;Ie!==null;)S=Ie,$=S.child,S.tag===22&&S.memoizedState!==null?XE(y):$!==null?($.return=S,Ie=$):XE(y);for(;_!==null;)Ie=_,KE(_),_=_.sibling;Ie=y,qh=F,Cn=te}QE(o)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Ie=_):QE(o)}}function QE(o){for(;Ie!==null;){var l=Ie;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Cn||Gh(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Cn)if(c===null)p.componentDidMount();else{var y=l.elementType===l.type?c.memoizedProps:Nr(l.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&Y0(l,_,p);break;case 3:var S=l.updateQueue;if(S!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}Y0(l,S,c)}break;case 5:var F=l.stateNode;if(c===null&&l.flags&4){c=F;var $=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&c.focus();break;case"img":$.src&&(c.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var te=l.alternate;if(te!==null){var ue=te.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&Ss(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Cn||l.flags&512&&Og(l)}catch(ae){jt(l,l.return,ae)}}if(l===o){Ie=null;break}if(c=l.sibling,c!==null){c.return=l.return,Ie=c;break}Ie=l.return}}function YE(o){for(;Ie!==null;){var l=Ie;if(l===o){Ie=null;break}var c=l.sibling;if(c!==null){c.return=l.return,Ie=c;break}Ie=l.return}}function XE(o){for(;Ie!==null;){var l=Ie;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{Gh(4,l)}catch($){jt(l,c,$)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var y=l.return;try{p.componentDidMount()}catch($){jt(l,y,$)}}var _=l.return;try{Og(l)}catch($){jt(l,_,$)}break;case 5:var S=l.return;try{Og(l)}catch($){jt(l,S,$)}}}catch($){jt(l,l.return,$)}if(l===o){Ie=null;break}var F=l.sibling;if(F!==null){F.return=l.return,Ie=F;break}Ie=l.return}}var ED=Math.ceil,Kh=B.ReactCurrentDispatcher,Ug=B.ReactCurrentOwner,wr=B.ReactCurrentBatchConfig,et=0,dn=null,Zt=null,_n=0,or=0,bl=xs(0),on=0,Tc=null,Zo=0,Qh=0,jg=0,Ic=null,zn=null,Bg=0,Al=1/0,Hi=null,Yh=!1,$g=null,Ms=null,Xh=!1,Os=null,Jh=0,Sc=0,zg=null,Zh=-1,ef=0;function Vn(){return(et&6)!==0?Tt():Zh!==-1?Zh:Zh=Tt()}function Ls(o){return(o.mode&1)===0?1:(et&2)!==0&&_n!==0?_n&-_n:iD.transition!==null?(ef===0&&(ef=Hu()),ef):(o=Qe,o!==0||(o=window.event,o=o===void 0?16:rl(o.type)),o)}function Or(o,l,c,p){if(50<Sc)throw Sc=0,zg=null,Error(t(185));Bo(o,c,p),((et&2)===0||o!==dn)&&(o===dn&&((et&2)===0&&(Qh|=c),on===4&&Fs(o,_n)),Wn(o,p),c===1&&et===0&&(l.mode&1)===0&&(Al=Tt()+500,Ah&&ks()))}function Wn(o,l){var c=o.callbackNode;jo(o,l);var p=Di(o,o===dn?_n:0);if(p===0)c!==null&&Ya(c),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(c!=null&&Ya(c),l===1)o.tag===0?rD(ZE.bind(null,o)):F0(ZE.bind(null,o)),Zk(function(){(et&6)===0&&ks()}),c=null;else{switch(Yr(p)){case 1:c=Xa;break;case 4:c=$u;break;case 16:c=Oo;break;case 536870912:c=Ja;break;default:c=Oo}c=aT(c,JE.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function JE(o,l){if(Zh=-1,ef=0,(et&6)!==0)throw Error(t(327));var c=o.callbackNode;if(xl()&&o.callbackNode!==c)return null;var p=Di(o,o===dn?_n:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||l)l=tf(o,p);else{l=p;var y=et;et|=2;var _=tT();(dn!==o||_n!==l)&&(Hi=null,Al=Tt()+500,ta(o,l));do try{SD();break}catch(F){eT(o,F)}while(!0);ag(),Kh.current=_,et=y,Zt!==null?l=0:(dn=null,_n=0,l=on)}if(l!==0){if(l===2&&(y=Wu(o),y!==0&&(p=y,l=Wg(o,y))),l===1)throw c=Tc,ta(o,0),Fs(o,p),Wn(o,Tt()),c;if(l===6)Fs(o,p);else{if(y=o.current.alternate,(p&30)===0&&!TD(y)&&(l=tf(o,p),l===2&&(_=Wu(o),_!==0&&(p=_,l=Wg(o,_))),l===1))throw c=Tc,ta(o,0),Fs(o,p),Wn(o,Tt()),c;switch(o.finishedWork=y,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:na(o,zn,Hi);break;case 3:if(Fs(o,p),(p&130023424)===p&&(l=Bg+500-Tt(),10<l)){if(Di(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){Vn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=Ym(na.bind(null,o,zn,Hi),l);break}na(o,zn,Hi);break;case 4:if(Fs(o,p),(p&4194240)===p)break;for(l=o.eventTimes,y=-1;0<p;){var S=31-Zn(p);_=1<<S,S=l[S],S>y&&(y=S),p&=~_}if(p=y,p=Tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*ED(p/1960))-p,10<p){o.timeoutHandle=Ym(na.bind(null,o,zn,Hi),p);break}na(o,zn,Hi);break;case 5:na(o,zn,Hi);break;default:throw Error(t(329))}}}return Wn(o,Tt()),o.callbackNode===c?JE.bind(null,o):null}function Wg(o,l){var c=Ic;return o.current.memoizedState.isDehydrated&&(ta(o,l).flags|=256),o=tf(o,l),o!==2&&(l=zn,zn=c,l!==null&&Hg(l)),o}function Hg(o){zn===null?zn=o:zn.push.apply(zn,o)}function TD(o){for(var l=o;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],_=y.getSnapshot;y=y.value;try{if(!kr(_(),y))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Fs(o,l){for(l&=~jg,l&=~Qh,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-Zn(l),p=1<<c;o[c]=-1,l&=~p}}function ZE(o){if((et&6)!==0)throw Error(t(327));xl();var l=Di(o,0);if((l&1)===0)return Wn(o,Tt()),null;var c=tf(o,l);if(o.tag!==0&&c===2){var p=Wu(o);p!==0&&(l=p,c=Wg(o,p))}if(c===1)throw c=Tc,ta(o,0),Fs(o,l),Wn(o,Tt()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,na(o,zn,Hi),Wn(o,Tt()),null}function qg(o,l){var c=et;et|=1;try{return o(l)}finally{et=c,et===0&&(Al=Tt()+500,Ah&&ks())}}function ea(o){Os!==null&&Os.tag===0&&(et&6)===0&&xl();var l=et;et|=1;var c=wr.transition,p=Qe;try{if(wr.transition=null,Qe=1,o)return o()}finally{Qe=p,wr.transition=c,et=l,(et&6)===0&&ks()}}function Gg(){or=bl.current,St(bl)}function ta(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,Jk(c)),Zt!==null)for(c=Zt.return;c!==null;){var p=c;switch(ng(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ch();break;case 3:Sl(),St(jn),St(In),mg();break;case 5:fg(p);break;case 4:Sl();break;case 13:St(kt);break;case 19:St(kt);break;case 10:lg(p.type._context);break;case 22:case 23:Gg()}c=c.return}if(dn=o,Zt=o=Us(o.current,null),_n=or=l,on=0,Tc=null,jg=Qh=Zo=0,zn=Ic=null,Yo!==null){for(l=0;l<Yo.length;l++)if(c=Yo[l],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,_=c.pending;if(_!==null){var S=_.next;_.next=y,p.next=S}c.pending=p}Yo=null}return o}function eT(o,l){do{var c=Zt;try{if(ag(),Fh.current=$h,Uh){for(var p=Dt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Uh=!1}if(Jo=0,cn=sn=Dt=null,gc=!1,yc=0,Ug.current=null,c===null||c.return===null){on=1,Tc=l,Zt=null;break}e:{var _=o,S=c.return,F=c,$=l;if(l=_n,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var te=$,ue=F,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var _e=PE(S);if(_e!==null){_e.flags&=-257,CE(_e,S,F,_,l),_e.mode&1&&SE(_,te,l),l=_e,$=te;var Ce=l.updateQueue;if(Ce===null){var Ae=new Set;Ae.add($),l.updateQueue=Ae}else Ce.add($);break e}else{if((l&1)===0){SE(_,te,l),Kg();break e}$=Error(t(426))}}else if(bt&&F.mode&1){var Ht=PE(S);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),CE(Ht,S,F,_,l),sg(Pl($,F));break e}}_=$=Pl($,F),on!==4&&(on=2),Ic===null?Ic=[_]:Ic.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var G=TE(_,$,l);Q0(_,G);break e;case 1:F=$;var H=_.type,J=_.stateNode;if((_.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Ms===null||!Ms.has(J)))){_.flags|=65536,l&=-l,_.lanes|=l;var fe=IE(_,F,l);Q0(_,fe);break e}}_=_.return}while(_!==null)}rT(c)}catch(Re){l=Re,Zt===c&&c!==null&&(Zt=c=c.return);continue}break}while(!0)}function tT(){var o=Kh.current;return Kh.current=$h,o===null?$h:o}function Kg(){(on===0||on===3||on===2)&&(on=4),dn===null||(Zo&268435455)===0&&(Qh&268435455)===0||Fs(dn,_n)}function tf(o,l){var c=et;et|=2;var p=tT();(dn!==o||_n!==l)&&(Hi=null,ta(o,l));do try{ID();break}catch(y){eT(o,y)}while(!0);if(ag(),et=c,Kh.current=p,Zt!==null)throw Error(t(261));return dn=null,_n=0,on}function ID(){for(;Zt!==null;)nT(Zt)}function SD(){for(;Zt!==null&&!Mo();)nT(Zt)}function nT(o){var l=oT(o.alternate,o,or);o.memoizedProps=o.pendingProps,l===null?rT(o):Zt=l,Ug.current=null}function rT(o){var l=o;do{var c=l.alternate;if(o=l.return,(l.flags&32768)===0){if(c=gD(c,l,or),c!==null){Zt=c;return}}else{if(c=yD(c,l),c!==null){c.flags&=32767,Zt=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{on=6,Zt=null;return}}if(l=l.sibling,l!==null){Zt=l;return}Zt=l=o}while(l!==null);on===0&&(on=5)}function na(o,l,c){var p=Qe,y=wr.transition;try{wr.transition=null,Qe=1,PD(o,l,c,p)}finally{wr.transition=y,Qe=p}return null}function PD(o,l,c,p){do xl();while(Os!==null);if((et&6)!==0)throw Error(t(327));c=o.finishedWork;var y=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=c.lanes|c.childLanes;if(Vm(o,_),o===dn&&(Zt=dn=null,_n=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Xh||(Xh=!0,aT(Oo,function(){return xl(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=wr.transition,wr.transition=null;var S=Qe;Qe=1;var F=et;et|=4,Ug.current=null,_D(o,c),GE(c,o),Hk(Km),Mi=!!Gm,Km=Gm=null,o.current=c,wD(c),ki(),et=F,Qe=S,wr.transition=_}else o.current=c;if(Xh&&(Xh=!1,Os=o,Jh=y),_=o.pendingLanes,_===0&&(Ms=null),lh(c.stateNode),Wn(o,Tt()),l!==null)for(p=o.onRecoverableError,c=0;c<l.length;c++)y=l[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(Yh)throw Yh=!1,o=$g,$g=null,o;return(Jh&1)!==0&&o.tag!==0&&xl(),_=o.pendingLanes,(_&1)!==0?o===zg?Sc++:(Sc=0,zg=o):Sc=0,ks(),null}function xl(){if(Os!==null){var o=Yr(Jh),l=wr.transition,c=Qe;try{if(wr.transition=null,Qe=16>o?16:o,Os===null)var p=!1;else{if(o=Os,Os=null,Jh=0,(et&6)!==0)throw Error(t(331));var y=et;for(et|=4,Ie=o.current;Ie!==null;){var _=Ie,S=_.child;if((Ie.flags&16)!==0){var F=_.deletions;if(F!==null){for(var $=0;$<F.length;$++){var te=F[$];for(Ie=te;Ie!==null;){var ue=Ie;switch(ue.tag){case 0:case 11:case 15:Ec(8,ue,_)}var de=ue.child;if(de!==null)de.return=ue,Ie=de;else for(;Ie!==null;){ue=Ie;var ae=ue.sibling,_e=ue.return;if($E(ue),ue===te){Ie=null;break}if(ae!==null){ae.return=_e,Ie=ae;break}Ie=_e}}}var Ce=_.alternate;if(Ce!==null){var Ae=Ce.child;if(Ae!==null){Ce.child=null;do{var Ht=Ae.sibling;Ae.sibling=null,Ae=Ht}while(Ae!==null)}}Ie=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,Ie=S;else e:for(;Ie!==null;){if(_=Ie,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Ec(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,Ie=G;break e}Ie=_.return}}var H=o.current;for(Ie=H;Ie!==null;){S=Ie;var J=S.child;if((S.subtreeFlags&2064)!==0&&J!==null)J.return=S,Ie=J;else e:for(S=H;Ie!==null;){if(F=Ie,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:Gh(9,F)}}catch(Re){jt(F,F.return,Re)}if(F===S){Ie=null;break e}var fe=F.sibling;if(fe!==null){fe.return=F.return,Ie=fe;break e}Ie=F.return}}if(et=y,ks(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Lo,o)}catch{}p=!0}return p}finally{Qe=c,wr.transition=l}}return!1}function iT(o,l,c){l=Pl(c,l),l=TE(o,l,1),o=Ns(o,l,1),l=Vn(),o!==null&&(Bo(o,1,l),Wn(o,l))}function jt(o,l,c){if(o.tag===3)iT(o,o,c);else for(;l!==null;){if(l.tag===3){iT(l,o,c);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ms===null||!Ms.has(p))){o=Pl(c,o),o=IE(l,o,1),l=Ns(l,o,1),o=Vn(),l!==null&&(Bo(l,1,o),Wn(l,o));break}}l=l.return}}function CD(o,l,c){var p=o.pingCache;p!==null&&p.delete(l),l=Vn(),o.pingedLanes|=o.suspendedLanes&c,dn===o&&(_n&c)===c&&(on===4||on===3&&(_n&130023424)===_n&&500>Tt()-Bg?ta(o,0):jg|=c),Wn(o,l)}function sT(o,l){l===0&&((o.mode&1)===0?l=1:(l=Es,Es<<=1,(Es&130023424)===0&&(Es=4194304)));var c=Vn();o=$i(o,l),o!==null&&(Bo(o,l,c),Wn(o,c))}function bD(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),sT(o,c)}function AD(o,l){var c=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),sT(o,c)}var oT;oT=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||jn.current)$n=!0;else{if((o.lanes&c)===0&&(l.flags&128)===0)return $n=!1,mD(o,l,c);$n=(o.flags&131072)!==0}else $n=!1,bt&&(l.flags&1048576)!==0&&U0(l,Rh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Hh(o,l),o=l.pendingProps;var y=yl(l,In.current);Il(l,c),y=vg(null,l,p,o,y,c);var _=_g();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Bn(p)?(_=!0,bh(l)):_=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,dg(l),y.updater=zh,l.stateNode=y,y._reactInternals=l,Pg(l,p,o,c),l=xg(null,l,p,!0,_,c)):(l.tag=0,bt&&_&&tg(l),Nn(null,l,y,c),l=l.child),l;case 16:p=l.elementType;e:{switch(Hh(o,l),o=l.pendingProps,y=p._init,p=y(p._payload),l.type=p,y=l.tag=RD(p),o=Nr(p,o),y){case 0:l=Ag(null,l,p,o,c);break e;case 1:l=DE(null,l,p,o,c);break e;case 11:l=bE(null,l,p,o,c);break e;case 14:l=AE(null,l,p,Nr(p.type,o),c);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),Ag(o,l,p,y,c);case 1:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),DE(o,l,p,y,c);case 3:e:{if(NE(l),o===null)throw Error(t(387));p=l.pendingProps,_=l.memoizedState,y=_.element,K0(o,l),Oh(l,p,null,c);var S=l.memoizedState;if(p=S.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){y=Pl(Error(t(423)),l),l=VE(o,l,p,c,y);break e}else if(p!==y){y=Pl(Error(t(424)),l),l=VE(o,l,p,c,y);break e}else for(sr=As(l.stateNode.containerInfo.firstChild),ir=l,bt=!0,Dr=null,c=q0(l,null,p,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(wl(),p===y){l=Wi(o,l,c);break e}Nn(o,l,p,c)}l=l.child}return l;case 5:return X0(l),o===null&&ig(l),p=l.type,y=l.pendingProps,_=o!==null?o.memoizedProps:null,S=y.children,Qm(p,y)?S=null:_!==null&&Qm(p,_)&&(l.flags|=32),kE(o,l),Nn(o,l,S,c),l.child;case 6:return o===null&&ig(l),null;case 13:return ME(o,l,c);case 4:return hg(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=El(l,null,p,c):Nn(o,l,p,c),l.child;case 11:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),bE(o,l,p,y,c);case 7:return Nn(o,l,l.pendingProps,c),l.child;case 8:return Nn(o,l,l.pendingProps.children,c),l.child;case 12:return Nn(o,l,l.pendingProps.children,c),l.child;case 10:e:{if(p=l.type._context,y=l.pendingProps,_=l.memoizedProps,S=y.value,_t(Nh,p._currentValue),p._currentValue=S,_!==null)if(kr(_.value,S)){if(_.children===y.children&&!jn.current){l=Wi(o,l,c);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var F=_.dependencies;if(F!==null){S=_.child;for(var $=F.firstContext;$!==null;){if($.context===p){if(_.tag===1){$=zi(-1,c&-c),$.tag=2;var te=_.updateQueue;if(te!==null){te=te.shared;var ue=te.pending;ue===null?$.next=$:($.next=ue.next,ue.next=$),te.pending=$}}_.lanes|=c,$=_.alternate,$!==null&&($.lanes|=c),ug(_.return,c,l),F.lanes|=c;break}$=$.next}}else if(_.tag===10)S=_.type===l.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=c,F=S.alternate,F!==null&&(F.lanes|=c),ug(S,c,l),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===l){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}Nn(o,l,y.children,c),l=l.child}return l;case 9:return y=l.type,p=l.pendingProps.children,Il(l,c),y=vr(y),p=p(y),l.flags|=1,Nn(o,l,p,c),l.child;case 14:return p=l.type,y=Nr(p,l.pendingProps),y=Nr(p.type,y),AE(o,l,p,y,c);case 15:return xE(o,l,l.type,l.pendingProps,c);case 17:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:Nr(p,y),Hh(o,l),l.tag=1,Bn(p)?(o=!0,bh(l)):o=!1,Il(l,c),wE(l,p,y),Pg(l,p,y,c),xg(null,l,p,!0,o,c);case 19:return LE(o,l,c);case 22:return RE(o,l,c)}throw Error(t(156,l.tag))};function aT(o,l){return Bu(o,l)}function xD(o,l,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(o,l,c,p){return new xD(o,l,c,p)}function Qg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function RD(o){if(typeof o=="function")return Qg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===xe)return 14}return 2}function Us(o,l){var c=o.alternate;return c===null?(c=Er(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function nf(o,l,c,p,y,_){var S=2;if(p=o,typeof o=="function")Qg(o)&&(S=1);else if(typeof o=="string")S=5;else e:switch(o){case C:return ra(c.children,y,_,l);case I:S=8,y|=8;break;case b:return o=Er(12,c,l,y|2),o.elementType=b,o.lanes=_,o;case V:return o=Er(13,c,l,y),o.elementType=V,o.lanes=_,o;case ce:return o=Er(19,c,l,y),o.elementType=ce,o.lanes=_,o;case De:return rf(c,y,_,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:S=10;break e;case L:S=9;break e;case U:S=11;break e;case xe:S=14;break e;case Pe:S=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Er(S,c,l,y),l.elementType=o,l.type=p,l.lanes=_,l}function ra(o,l,c,p){return o=Er(7,o,p,l),o.lanes=c,o}function rf(o,l,c,p){return o=Er(22,o,p,l),o.elementType=De,o.lanes=c,o.stateNode={isHidden:!1},o}function Yg(o,l,c){return o=Er(6,o,null,l),o.lanes=c,o}function Xg(o,l,c){return l=Er(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function kD(o,l,c,p,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Jg(o,l,c,p,y,_,S,F,$){return o=new kD(o,l,c,F,$),l===1?(l=1,_===!0&&(l|=8)):l=0,_=Er(3,null,null,l),o.current=_,_.stateNode=o,_.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},dg(_),o}function DD(o,l,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:p==null?null:""+p,children:o,containerInfo:l,implementation:c}}function lT(o){if(!o)return Rs;o=o._reactInternals;e:{if(xr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Bn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Bn(c))return O0(o,c,l)}return l}function uT(o,l,c,p,y,_,S,F,$){return o=Jg(c,p,!0,o,y,_,S,F,$),o.context=lT(null),c=o.current,p=Vn(),y=Ls(c),_=zi(p,y),_.callback=l??null,Ns(c,_,y),o.current.lanes=y,Bo(o,y,p),Wn(o,p),o}function sf(o,l,c,p){var y=l.current,_=Vn(),S=Ls(y);return c=lT(c),l.context===null?l.context=c:l.pendingContext=c,l=zi(_,S),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=Ns(y,l,S),o!==null&&(Or(o,y,S,_),Mh(o,y,S)),S}function of(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function cT(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function Zg(o,l){cT(o,l),(o=o.alternate)&&cT(o,l)}function ND(){return null}var dT=typeof reportError=="function"?reportError:function(o){console.error(o)};function ey(o){this._internalRoot=o}af.prototype.render=ey.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));sf(o,l,null,null)},af.prototype.unmount=ey.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;ea(function(){sf(null,o,null,null)}),l[Fi]=null}};function af(o){this._internalRoot=o}af.prototype.unstable_scheduleHydration=function(o){if(o){var l=Yu();o={blockedOn:null,target:o,priority:l};for(var c=0;c<er.length&&l!==0&&l<er[c].priority;c++);er.splice(c,0,o),c===0&&tl(o)}};function ty(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function lf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function hT(){}function VD(o,l,c,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var te=of(S);_.call(te)}}var S=uT(l,p,o,0,null,!1,!1,"",hT);return o._reactRootContainer=S,o[Fi]=S.current,lc(o.nodeType===8?o.parentNode:o),ea(),S}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var F=p;p=function(){var te=of($);F.call(te)}}var $=Jg(o,0,!1,null,null,!1,!1,"",hT);return o._reactRootContainer=$,o[Fi]=$.current,lc(o.nodeType===8?o.parentNode:o),ea(function(){sf(l,$,c,p)}),$}function uf(o,l,c,p,y){var _=c._reactRootContainer;if(_){var S=_;if(typeof y=="function"){var F=y;y=function(){var $=of(S);F.call($)}}sf(l,S,o,y)}else S=VD(c,l,o,y,p);return of(S)}Ku=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=it(l.pendingLanes);c!==0&&(Gu(l,c|1),Wn(l,Tt()),(et&6)===0&&(Al=Tt()+500,ks()))}break;case 13:ea(function(){var p=$i(o,1);if(p!==null){var y=Vn();Or(p,o,1,y)}}),Zg(o,1)}},Za=function(o){if(o.tag===13){var l=$i(o,134217728);if(l!==null){var c=Vn();Or(l,o,134217728,c)}Zg(o,134217728)}},Qu=function(o){if(o.tag===13){var l=Ls(o),c=$i(o,l);if(c!==null){var p=Vn();Or(c,o,l,p)}Zg(o,l)}},Yu=function(){return Qe},Xu=function(o,l){var c=Qe;try{return Qe=o,l()}finally{Qe=c}},Ai=function(o,l,c){switch(l){case"input":if(Cr(o,c),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var p=c[l];if(p!==o&&p.form===o.form){var y=Ph(p);if(!y)throw Error(t(90));zr(p),Cr(p,y)}}}break;case"textarea":ko(o,c);break;case"select":l=c.value,l!=null&&En(o,!!c.multiple,l,!1)}},Zd=qg,eh=ea;var MD={usingClientEntryPoint:!1,Events:[dc,ml,Ph,ys,vs,qg]},Pc={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OD={bundleType:Pc.bundleType,version:Pc.version,rendererPackageName:Pc.rendererPackageName,rendererConfig:Pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ah(o),o===null?null:o.stateNode},findFiberByHostInstance:Pc.findFiberByHostInstance||ND,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Lo=cf.inject(OD),Jn=cf}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MD,Hn.createPortal=function(o,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ty(l))throw Error(t(200));return DD(o,l,null,c)},Hn.createRoot=function(o,l){if(!ty(o))throw Error(t(299));var c=!1,p="",y=dT;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=Jg(o,1,!1,null,null,c,!1,p,y),o[Fi]=l.current,lc(o.nodeType===8?o.parentNode:o),new ey(l)},Hn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ah(l),o=o===null?null:o.stateNode,o},Hn.flushSync=function(o){return ea(o)},Hn.hydrate=function(o,l,c){if(!lf(l))throw Error(t(200));return uf(null,o,l,!0,c)},Hn.hydrateRoot=function(o,l,c){if(!ty(o))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,_="",S=dT;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),l=uT(l,null,o,1,c??null,y,!1,_,S),o[Fi]=l.current,lc(o),p)for(o=0;o<p.length;o++)c=p[o],y=c._getVersion,y=y(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,y]:l.mutableSourceEagerHydrationData.push(c,y);return new af(l)},Hn.render=function(o,l,c){if(!lf(l))throw Error(t(200));return uf(null,o,l,!1,c)},Hn.unmountComponentAtNode=function(o){if(!lf(o))throw Error(t(40));return o._reactRootContainer?(ea(function(){uf(null,null,o,!1,function(){o._reactRootContainer=null,o[Fi]=null})}),!0):!1},Hn.unstable_batchedUpdates=qg,Hn.unstable_renderSubtreeIntoContainer=function(o,l,c,p){if(!lf(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return uf(o,l,c,!1,p)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var wT;function aC(){if(wT)return iy.exports;wT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),iy.exports=WD(),iy.exports}var ET;function HD(){if(ET)return df;ET=1;var n=aC();return df.createRoot=n.createRoot,df.hydrateRoot=n.hydrateRoot,df}var qD=HD();const GD=a_(qD),KD="modulepreload",QD=function(n){return"/"+n},TT={},Si=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=QD(h),h in TT)return;TT[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":KD,m||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((T,A)=>{v.addEventListener("load",T),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var c_=aC();const YD=a_(c_);function ld(){return ld=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ld.apply(this,arguments)}var eo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(eo||(eo={}));const IT="popstate";function XD(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Ky("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Yf(i)}return ZD(e,t,null,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function d_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JD(){return Math.random().toString(36).substr(2,8)}function ST(n,e){return{usr:n.state,key:n.key,idx:e}}function Ky(n,e,t,r){return t===void 0&&(t=null),ld({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cu(e):e,{state:t,key:e&&e.key||r||JD()})}function Yf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function ZD(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=eo.Pop,d=null,h=m();h==null&&(h=0,a.replaceState(ld({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=eo.Pop;let P=m(),j=P==null?null:P-h;h=P,d&&d({action:u,location:x.location,delta:j})}function v(P,j){u=eo.Push;let M=Ky(x.location,P,j);h=m()+1;let D=ST(M,h),B=x.createHref(M);try{a.pushState(D,"",B)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;i.location.assign(B)}s&&d&&d({action:u,location:x.location,delta:1})}function T(P,j){u=eo.Replace;let M=Ky(x.location,P,j);h=m();let D=ST(M,h),B=x.createHref(M);a.replaceState(D,"",B),s&&d&&d({action:u,location:x.location,delta:0})}function A(P){let j=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof P=="string"?P:Yf(P);return M=M.replace(/ $/,"%20"),Ot(j,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,j)}let x={get action(){return u},get location(){return n(i,a)},listen(P){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(IT,g),d=P,()=>{i.removeEventListener(IT,g),d=null}},createHref(P){return e(i,P)},createURL:A,encodeLocation(P){let j=A(P);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:T,go(P){return a.go(P)}};return x}var PT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(PT||(PT={}));function eN(n,e,t){return t===void 0&&(t="/"),tN(n,e,t)}function tN(n,e,t,r){let i=typeof e=="string"?Cu(e):e,s=nu(i.pathname||"/",t);if(s==null)return null;let a=lC(n);nN(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=fN(s);u=dN(a[d],h)}return u}function lC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(Ot(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=no([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(Ot(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),lC(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:uN(h,s.index),routesMeta:m})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let d of uC(s.path))i(s,a,d)}),e}function uC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=uC(r.join("/")),u=[];return u.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...a),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function nN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:cN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const rN=/^:[\w-]+$/,iN=3,sN=2,oN=1,aN=10,lN=-2,CT=n=>n==="*";function uN(n,e){let t=n.split("/"),r=t.length;return t.some(CT)&&(r+=lN),e&&(r+=sN),t.filter(i=>!CT(i)).reduce((i,s)=>i+(rN.test(s)?iN:s===""?oN:aN),r)}function cN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function dN(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=Qy({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),v=d.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:no([s,g.pathname]),pathnameBase:vN(no([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=no([s,g.pathnameBase]))}return a}function Qy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=hN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:v,isOptional:T}=m;if(v==="*"){let x=u[g]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const A=u[g];return T&&!A?h[v]=void 0:h[v]=(A||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function hN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),d_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return d_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function nu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const pN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mN=n=>pN.test(n);function gN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Cu(n):n,s;if(t)if(mN(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),d_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=bT(t.substring(1),"/"):s=bT(t,e)}else s=e;return{pathname:s,search:_N(r),hash:wN(i)}}function bT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ay(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function h_(n,e){let t=yN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function f_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Cu(n):(i=ld({},n),Ot(!i.pathname||!i.pathname.includes("?"),ay("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),ay("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),ay("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let d=gN(i,u),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const no=n=>n.join("/").replace(/\/\/+/g,"/"),vN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_N=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function EN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const cC=["post","put","patch","delete"];new Set(cC);const TN=["get",...cC];new Set(TN);function ud(){return ud=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ud.apply(this,arguments)}const zp=k.createContext(null),dC=k.createContext(null),os=k.createContext(null),Wp=k.createContext(null),as=k.createContext({outlet:null,matches:[],isDataRoute:!1}),hC=k.createContext(null);function IN(n,e){let{relative:t}=e===void 0?{}:e;bu()||Ot(!1);let{basename:r,navigator:i}=k.useContext(os),{hash:s,pathname:a,search:u}=Hp(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:no([r,a])),i.createHref({pathname:d,search:u,hash:s})}function bu(){return k.useContext(Wp)!=null}function wo(){return bu()||Ot(!1),k.useContext(Wp).location}function fC(n){k.useContext(os).static||k.useLayoutEffect(n)}function p_(){let{isDataRoute:n}=k.useContext(as);return n?ON():SN()}function SN(){bu()||Ot(!1);let n=k.useContext(zp),{basename:e,future:t,navigator:r}=k.useContext(os),{matches:i}=k.useContext(as),{pathname:s}=wo(),a=JSON.stringify(h_(i,t.v7_relativeSplatPath)),u=k.useRef(!1);return fC(()=>{u.current=!0}),k.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=f_(h,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:no([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,s,n])}function VH(){let{matches:n}=k.useContext(as),e=n[n.length-1];return e?e.params:{}}function Hp(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=k.useContext(os),{matches:i}=k.useContext(as),{pathname:s}=wo(),a=JSON.stringify(h_(i,r.v7_relativeSplatPath));return k.useMemo(()=>f_(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function PN(n,e){return CN(n,e)}function CN(n,e,t,r){bu()||Ot(!1);let{navigator:i}=k.useContext(os),{matches:s}=k.useContext(as),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=wo(),m;if(e){var g;let P=typeof e=="string"?Cu(e):e;d==="/"||(g=P.pathname)!=null&&g.startsWith(d)||Ot(!1),m=P}else m=h;let v=m.pathname||"/",T=v;if(d!=="/"){let P=d.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(P.length).join("/")}let A=eN(n,{pathname:T}),x=kN(A&&A.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:no([d,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?d:no([d,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,t,r);return e&&x?k.createElement(Wp.Provider,{value:{location:ud({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:eo.Pop}},x):x}function bN(){let n=MN(),e=EN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:i},t):null,null)}const AN=k.createElement(bN,null);class xN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(as.Provider,{value:this.props.routeContext},k.createElement(hC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RN(n){let{routeContext:e,match:t,children:r}=n,i=k.useContext(zp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(as.Provider,{value:e},r)}function kN(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||Ot(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:v,errors:T}=t,A=g.route.loader&&v[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||A){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let T,A=!1,x=null,P=null;t&&(T=u&&g.route.id?u[g.route.id]:void 0,x=g.route.errorElement||AN,d&&(h<0&&v===0?(LN("route-fallback"),A=!0,P=null):h===v&&(A=!0,P=g.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,v+1)),M=()=>{let D;return T?D=x:A?D=P:g.route.Component?D=k.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=m,k.createElement(RN,{match:g,routeContext:{outlet:m,matches:j,isDataRoute:t!=null},children:D})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?k.createElement(xN,{location:t.location,revalidation:t.revalidation,component:x,error:T,children:M(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):M()},null)}var pC=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(pC||{}),mC=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(mC||{});function DN(n){let e=k.useContext(zp);return e||Ot(!1),e}function NN(n){let e=k.useContext(dC);return e||Ot(!1),e}function VN(n){let e=k.useContext(as);return e||Ot(!1),e}function gC(n){let e=VN(),t=e.matches[e.matches.length-1];return t.route.id||Ot(!1),t.route.id}function MN(){var n;let e=k.useContext(hC),t=NN(),r=gC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function ON(){let{router:n}=DN(pC.UseNavigateStable),e=gC(mC.UseNavigateStable),t=k.useRef(!1);return fC(()=>{t.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ud({fromRouteId:e},s)))},[n,e])}const AT={};function LN(n,e,t){AT[n]||(AT[n]=!0)}function FN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Yy(n){let{to:e,replace:t,state:r,relative:i}=n;bu()||Ot(!1);let{future:s,static:a}=k.useContext(os),{matches:u}=k.useContext(as),{pathname:d}=wo(),h=p_(),m=f_(e,h_(u,s.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(m);return k.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function qi(n){Ot(!1)}function UN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=eo.Pop,navigator:s,static:a=!1,future:u}=n;bu()&&Ot(!1);let d=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:d,navigator:s,static:a,future:ud({v7_relativeSplatPath:!1},u)}),[d,u,s,a]);typeof r=="string"&&(r=Cu(r));let{pathname:m="/",search:g="",hash:v="",state:T=null,key:A="default"}=r,x=k.useMemo(()=>{let P=nu(m,d);return P==null?null:{location:{pathname:P,search:g,hash:v,state:T,key:A},navigationType:i}},[d,m,g,v,T,A,i]);return x==null?null:k.createElement(os.Provider,{value:h},k.createElement(Wp.Provider,{children:t,value:x}))}function jN(n){let{children:e,location:t}=n;return PN(Xy(e),t)}new Promise(()=>{});function Xy(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){t.push.apply(t,Xy(r.props.children,s));return}r.type!==qi&&Ot(!1),!r.props.index||!r.props.children||Ot(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Xy(r.props.children,s)),t.push(a)}),t}function Xf(){return Xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xf.apply(this,arguments)}function yC(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function BN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $N(n,e){return n.button===0&&(!e||e==="_self")&&!BN(n)}const zN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],HN="6";try{window.__reactRouterVersion=HN}catch{}const qN=k.createContext({isTransitioning:!1}),GN="startTransition",xT=u_[GN];function KN(n){let{basename:e,children:t,future:r,window:i}=n,s=k.useRef();s.current==null&&(s.current=XD({window:i,v5Compat:!0}));let a=s.current,[u,d]=k.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},m=k.useCallback(g=>{h&&xT?xT(()=>d(g)):d(g)},[d,h]);return k.useLayoutEffect(()=>a.listen(m),[a,m]),k.useEffect(()=>FN(r),[r]),k.createElement(UN,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const QN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XN=k.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g}=e,v=yC(e,zN),{basename:T}=k.useContext(os),A,x=!1;if(typeof h=="string"&&YN.test(h)&&(A=h,QN))try{let D=new URL(window.location.href),B=h.startsWith("//")?new URL(D.protocol+h):new URL(h),Z=nu(B.pathname,T);B.origin===D.origin&&Z!=null?h=Z+B.search+B.hash:x=!0}catch{}let P=IN(h,{relative:i}),j=eV(h,{replace:a,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function M(D){r&&r(D),D.defaultPrevented||j(D)}return k.createElement("a",Xf({},v,{href:A||P,onClick:x||s?r:M,ref:t,target:d}))}),JN=k.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:u,to:d,viewTransition:h,children:m}=e,g=yC(e,WN),v=Hp(d,{relative:g.relative}),T=wo(),A=k.useContext(dC),{navigator:x,basename:P}=k.useContext(os),j=A!=null&&tV(v)&&h===!0,M=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,D=T.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(D=D.toLowerCase(),B=B?B.toLowerCase():null,M=M.toLowerCase()),B&&P&&(B=nu(B,P)||B);const Z=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let re=D===M||!a&&D.startsWith(M)&&D.charAt(Z)==="/",C=B!=null&&(B===M||!a&&B.startsWith(M)&&B.charAt(M.length)==="/"),I={isActive:re,isPending:C,isTransitioning:j},b=re?r:void 0,O;typeof s=="function"?O=s(I):O=[s,re?"active":null,C?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(I):u;return k.createElement(XN,Xf({},g,{"aria-current":b,className:O,ref:t,style:L,to:d,viewTransition:h}),typeof m=="function"?m(I):m)});var Jy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Jy||(Jy={}));var RT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(RT||(RT={}));function ZN(n){let e=k.useContext(zp);return e||Ot(!1),e}function eV(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,d=p_(),h=wo(),m=Hp(n,{relative:a});return k.useCallback(g=>{if($N(g,t)){g.preventDefault();let v=r!==void 0?r:Yf(h)===Yf(m);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[h,d,m,r,i,t,n,s,a,u])}function tV(n,e){e===void 0&&(e={});let t=k.useContext(qN);t==null&&Ot(!1);let{basename:r}=ZN(Jy.useViewTransitionState),i=Hp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=nu(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=nu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Qy(i.pathname,a)!=null||Qy(i.pathname,s)!=null}class nV extends nn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?K.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[K.jsx("h2",{children:"Se produjo un error"}),K.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(this.state.error?.stack||this.state.error)})]}):this.props.children}}const rV=()=>{};var kT={};const vC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},iV=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},_C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let v=(u&15)<<2|h>>6,T=h&63;d||(T=64,a||(v=64)),r.push(t[m],t[g],t[v],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):iV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new sV;const v=s<<2|u>>4;if(r.push(v),h!==64){const T=u<<4&240|h>>2;if(r.push(T),g!==64){const A=h<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oV=function(n){const e=vC(n);return _C.encodeByteArray(e,!0)},Jf=function(n){return oV(n).replace(/\./g,"")},wC=function(n){try{return _C.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const aV=()=>EC().__FIREBASE_DEFAULTS__,lV=()=>{if(typeof process>"u"||typeof kT>"u")return;const n=kT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wC(n[1]);return e&&JSON.parse(e)},qp=()=>{try{return rV()||aV()||lV()||uV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TC=n=>qp()?.emulatorHosts?.[n],IC=n=>{const e=TC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},SC=()=>qp()?.config,PC=n=>qp()?.[`_${n}`];class cV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Eo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m_(n){return(await fetch(n,{credentials:"include"})).ok}function dV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Jf(JSON.stringify(t)),Jf(JSON.stringify(a)),""].join(".")}const Gc={};function hV(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?n.emulator.push(e):n.prod.push(e);return n}function fV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let DT=!1;function g_(n,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Gc[n]===e||Gc[n]||DT)return;Gc[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=hV().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{DT=!0,a()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=fV(r),T=t("text"),A=document.getElementById(T)||document.createElement("span"),x=t("learnmore"),P=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),M=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const D=v.element;u(D),m(P,x);const B=h();d(M,j),D.append(M,A,P,B),document.body.appendChild(D)}s?(A.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function CC(){const n=qp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gV(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vV(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bC(){return!CC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AC(){return!CC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xC(){try{return typeof indexedDB=="object"}catch{return!1}}function _V(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const wV="FirebaseError";class Pi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wV,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?EV(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Pi(i,u,r)}}function EV(n,e){return n.replace(TV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TV=/\{\$([^}]+)}/g;function IV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(NT(s)&&NT(a)){if(!Pa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function NT(n){return n!==null&&typeof n=="object"}function Rd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Bc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function SV(n,e){const t=new PV(n,e);return t.subscribe.bind(t)}class PV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");CV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ly),i.error===void 0&&(i.error=ly),i.complete===void 0&&(i.complete=ly);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ly(){}function yt(n){return n&&n._delegate?n._delegate:n}class co{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const aa="[DEFAULT]";let bV=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new cV;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xV(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AV(n){return n===aa?void 0:n}function xV(n){return n.instantiationMode==="EAGER"}class RV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const kV={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},DV=Ke.INFO,NV={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},VV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=NV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class y_{constructor(e){this.name=e,this._logLevel=DV,this._logHandler=VV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const MV=(n,e)=>e.some(t=>n instanceof t);let VT,MT;function OV(){return VT||(VT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LV(){return MT||(MT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RC=new WeakMap,Zy=new WeakMap,kC=new WeakMap,uy=new WeakMap,v_=new WeakMap;function FV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(ro(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&RC.set(t,n)}).catch(()=>{}),v_.set(e,n),e}function UV(n){if(Zy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Zy.set(n,e)}let ev={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ro(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jV(n){ev=n(ev)}function BV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cy(this),e,...t);return kC.set(r,e.sort?e.sort():[e]),ro(r)}:LV().includes(n)?function(...e){return n.apply(cy(this),e),ro(RC.get(this))}:function(...e){return ro(n.apply(cy(this),e))}}function $V(n){return typeof n=="function"?BV(n):(n instanceof IDBTransaction&&UV(n),MV(n,OV())?new Proxy(n,ev):n)}function ro(n){if(n instanceof IDBRequest)return FV(n);if(uy.has(n))return uy.get(n);const e=$V(n);return e!==n&&(uy.set(n,e),v_.set(e,n)),e}const cy=n=>v_.get(n);function zV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=ro(a);return r&&a.addEventListener("upgradeneeded",d=>{r(ro(a.result),d.oldVersion,d.newVersion,ro(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const WV=["get","getKey","getAll","getAllKeys","count"],HV=["put","add","delete","clear"],dy=new Map;function OT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dy.get(e))return dy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=HV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WV.includes(t)))return;const s=async function(a,...u){const d=this.transaction(a,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&d.done]))[0]};return dy.set(e,s),s}jV(n=>({...n,get:(e,t,r)=>OT(e,t)||n.get(e,t,r),has:(e,t)=>!!OT(e,t)||n.has(e,t)}));class qV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function GV(n){return n.getComponent()?.type==="VERSION"}const tv="@firebase/app",LT="0.14.6";const Zi=new y_("@firebase/app"),KV="@firebase/app-compat",QV="@firebase/analytics-compat",YV="@firebase/analytics",XV="@firebase/app-check-compat",JV="@firebase/app-check",ZV="@firebase/auth",eM="@firebase/auth-compat",tM="@firebase/database",nM="@firebase/data-connect",rM="@firebase/database-compat",iM="@firebase/functions",sM="@firebase/functions-compat",oM="@firebase/installations",aM="@firebase/installations-compat",lM="@firebase/messaging",uM="@firebase/messaging-compat",cM="@firebase/performance",dM="@firebase/performance-compat",hM="@firebase/remote-config",fM="@firebase/remote-config-compat",pM="@firebase/storage",mM="@firebase/storage-compat",gM="@firebase/firestore",yM="@firebase/ai",vM="@firebase/firestore-compat",_M="firebase",wM="12.6.0";const nv="[DEFAULT]",EM={[tv]:"fire-core",[KV]:"fire-core-compat",[YV]:"fire-analytics",[QV]:"fire-analytics-compat",[JV]:"fire-app-check",[XV]:"fire-app-check-compat",[ZV]:"fire-auth",[eM]:"fire-auth-compat",[tM]:"fire-rtdb",[nM]:"fire-data-connect",[rM]:"fire-rtdb-compat",[iM]:"fire-fn",[sM]:"fire-fn-compat",[oM]:"fire-iid",[aM]:"fire-iid-compat",[lM]:"fire-fcm",[uM]:"fire-fcm-compat",[cM]:"fire-perf",[dM]:"fire-perf-compat",[hM]:"fire-rc",[fM]:"fire-rc-compat",[pM]:"fire-gcs",[mM]:"fire-gcs-compat",[gM]:"fire-fst",[vM]:"fire-fst-compat",[yM]:"fire-vertex","fire-js":"fire-js",[_M]:"fire-js-all"};const Zf=new Map,TM=new Map,rv=new Map;function FT(n,e){try{n.container.addComponent(e)}catch(t){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ca(n){const e=n.name;if(rv.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;rv.set(e,n);for(const t of Zf.values())FT(t,n);for(const t of TM.values())FT(t,n);return!0}function Gp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qn(n){return n==null?!1:n.settings!==void 0}const IM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},io=new xd("app","Firebase",IM);class SM{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}}const Au=wM;function DC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:nv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw io.create("bad-app-name",{appName:String(i)});if(t||(t=SC()),!t)throw io.create("no-options");const s=Zf.get(i);if(s){if(Pa(t,s.options)&&Pa(r,s.config))return s;throw io.create("duplicate-app",{appName:i})}const a=new RV(i);for(const d of rv.values())a.addComponent(d);const u=new SM(t,r,a);return Zf.set(i,u),u}function __(n=nv){const e=Zf.get(n);if(!e&&n===nv&&SC())return DC();if(!e)throw io.create("no-app",{appName:n});return e}function gi(n,e,t){let r=EM[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(a.join(" "));return}Ca(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const PM="firebase-heartbeat-database",CM=1,cd="firebase-heartbeat-store";let hy=null;function NC(){return hy||(hy=zV(PM,CM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cd)}catch(t){console.warn(t)}}}}).catch(n=>{throw io.create("idb-open",{originalErrorMessage:n.message})})),hy}async function bM(n){try{const t=(await NC()).transaction(cd),r=await t.objectStore(cd).get(VC(n));return await t.done,r}catch(e){if(e instanceof Pi)Zi.warn(e.message);else{const t=io.create("idb-get",{originalErrorMessage:e?.message});Zi.warn(t.message)}}}async function UT(n,e){try{const r=(await NC()).transaction(cd,"readwrite");await r.objectStore(cd).put(e,VC(n)),await r.done}catch(t){if(t instanceof Pi)Zi.warn(t.message);else{const r=io.create("idb-set",{originalErrorMessage:t?.message});Zi.warn(r.message)}}}function VC(n){return`${n.name}!${n.options.appId}`}const AM=1024,xM=30;class RM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>xM){const i=NM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jT(),{heartbeatsToSend:t,unsentEntries:r}=kM(this._heartbeatsCache.heartbeats),i=Jf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Zi.warn(e),""}}}function jT(){return new Date().toISOString().substring(0,10)}function kM(n,e=AM){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),BT(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class DM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xC()?_V().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BT(n){return Jf(JSON.stringify({version:2,heartbeats:n})).length}function NM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function VM(n){Ca(new co("platform-logger",e=>new qV(e),"PRIVATE")),Ca(new co("heartbeat",e=>new RM(e),"PRIVATE")),gi(tv,LT,n),gi(tv,LT,"esm2020"),gi("fire-js","")}VM("");var MM="firebase",OM="12.7.0";gi(MM,OM,"app");var $T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var so,MC;(function(){var n;function e(C,I){function b(){}b.prototype=I.prototype,C.F=I.prototype,C.prototype=new b,C.prototype.constructor=C,C.D=function(O,L,U){for(var V=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)V[ce-2]=arguments[ce];return I.prototype[L].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,b){b||(b=0);const O=Array(16);if(typeof I=="string")for(var L=0;L<16;++L)O[L]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(L=0;L<16;++L)O[L]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=C.g[0],b=C.g[1],L=C.g[2];let U=C.g[3],V;V=I+(U^b&(L^U))+O[0]+3614090360&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[1]+3905402710&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[2]+606105819&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[3]+3250441966&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(U^b&(L^U))+O[4]+4118548399&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[5]+1200080426&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[6]+2821735955&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[7]+4249261313&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(U^b&(L^U))+O[8]+1770035416&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[9]+2336552879&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[10]+4294925233&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[11]+2304563134&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(U^b&(L^U))+O[12]+1804603682&4294967295,I=b+(V<<7&4294967295|V>>>25),V=U+(L^I&(b^L))+O[13]+4254626195&4294967295,U=I+(V<<12&4294967295|V>>>20),V=L+(b^U&(I^b))+O[14]+2792965006&4294967295,L=U+(V<<17&4294967295|V>>>15),V=b+(I^L&(U^I))+O[15]+1236535329&4294967295,b=L+(V<<22&4294967295|V>>>10),V=I+(L^U&(b^L))+O[1]+4129170786&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[6]+3225465664&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[11]+643717713&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[0]+3921069994&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(b^L))+O[5]+3593408605&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[10]+38016083&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[15]+3634488961&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[4]+3889429448&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(b^L))+O[9]+568446438&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[14]+3275163606&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[3]+4107603335&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[8]+1163531501&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(L^U&(b^L))+O[13]+2850285829&4294967295,I=b+(V<<5&4294967295|V>>>27),V=U+(b^L&(I^b))+O[2]+4243563512&4294967295,U=I+(V<<9&4294967295|V>>>23),V=L+(I^b&(U^I))+O[7]+1735328473&4294967295,L=U+(V<<14&4294967295|V>>>18),V=b+(U^I&(L^U))+O[12]+2368359562&4294967295,b=L+(V<<20&4294967295|V>>>12),V=I+(b^L^U)+O[5]+4294588738&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[8]+2272392833&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[11]+1839030562&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[14]+4259657740&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(b^L^U)+O[1]+2763975236&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[4]+1272893353&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[7]+4139469664&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[10]+3200236656&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(b^L^U)+O[13]+681279174&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[0]+3936430074&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[3]+3572445317&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[6]+76029189&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(b^L^U)+O[9]+3654602809&4294967295,I=b+(V<<4&4294967295|V>>>28),V=U+(I^b^L)+O[12]+3873151461&4294967295,U=I+(V<<11&4294967295|V>>>21),V=L+(U^I^b)+O[15]+530742520&4294967295,L=U+(V<<16&4294967295|V>>>16),V=b+(L^U^I)+O[2]+3299628645&4294967295,b=L+(V<<23&4294967295|V>>>9),V=I+(L^(b|~U))+O[0]+4096336452&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[7]+1126891415&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[14]+2878612391&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[5]+4237533241&4294967295,b=L+(V<<21&4294967295|V>>>11),V=I+(L^(b|~U))+O[12]+1700485571&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[3]+2399980690&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[10]+4293915773&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[1]+2240044497&4294967295,b=L+(V<<21&4294967295|V>>>11),V=I+(L^(b|~U))+O[8]+1873313359&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[15]+4264355552&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[6]+2734768916&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[13]+1309151649&4294967295,b=L+(V<<21&4294967295|V>>>11),V=I+(L^(b|~U))+O[4]+4149444226&4294967295,I=b+(V<<6&4294967295|V>>>26),V=U+(b^(I|~L))+O[11]+3174756917&4294967295,U=I+(V<<10&4294967295|V>>>22),V=L+(I^(U|~b))+O[2]+718787259&4294967295,L=U+(V<<15&4294967295|V>>>17),V=b+(U^(L|~I))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+U&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const b=I-this.blockSize,O=this.C;let L=this.h,U=0;for(;U<I;){if(L==0)for(;U<=b;)i(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<I;)if(O[L++]=C.charCodeAt(U++),L==this.blockSize){i(this,O),L=0;break}}else for(;U<I;)if(O[L++]=C[U++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var b=C.length-8;b<C.length;++b)C[b]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,b=0;b<4;++b)for(let O=0;O<32;O+=8)C[I++]=this.g[b]>>>O&255;return C};function s(C,I){var b=u;return Object.prototype.hasOwnProperty.call(b,C)?b[C]:b[C]=I(C)}function a(C,I){this.h=I;const b=[];let O=!0;for(let L=C.length-1;L>=0;L--){const U=C[L]|0;O&&U==I||(b[L]=U,O=!1)}this.g=b}var u={};function d(C){return-128<=C&&C<128?s(C,function(I){return new a([I|0],I<0?-1:0)}):new a([C|0],C<0?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return g;if(C<0)return P(h(-C));const I=[];let b=1;for(let O=0;C>=b;O++)I[O]=C/b|0,b*=4294967296;return new a(I,0)}function m(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return P(m(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=h(Math.pow(I,8));let O=g;for(let U=0;U<C.length;U+=8){var L=Math.min(8,C.length-U);const V=parseInt(C.substring(U,U+L),I);L<8?(L=h(Math.pow(I,L)),O=O.j(L).add(h(V))):(O=O.j(b),O=O.add(h(V)))}return O}var g=d(0),v=d(1),T=d(16777216);n=a.prototype,n.m=function(){if(x(this))return-P(this).m();let C=0,I=1;for(let b=0;b<this.g.length;b++){const O=this.i(b);C+=(O>=0?O:4294967296+O)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(x(this))return"-"+P(this).toString(C);const I=h(Math.pow(C,6));var b=this;let O="";for(;;){const L=B(b,I).g;b=j(b,L.j(I));let U=((b.g.length>0?b.g[0]:b.h)>>>0).toString(C);if(b=L,A(b))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function x(C){return C.h==-1}n.l=function(C){return C=j(this,C),x(C)?-1:A(C)?0:1};function P(C){const I=C.g.length,b=[];for(let O=0;O<I;O++)b[O]=~C.g[O];return new a(b,~C.h).add(v)}n.abs=function(){return x(this)?P(this):this},n.add=function(C){const I=Math.max(this.g.length,C.g.length),b=[];let O=0;for(let L=0;L<=I;L++){let U=O+(this.i(L)&65535)+(C.i(L)&65535),V=(U>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);O=V>>>16,U&=65535,V&=65535,b[L]=V<<16|U}return new a(b,b[b.length-1]&-2147483648?-1:0)};function j(C,I){return C.add(P(I))}n.j=function(C){if(A(this)||A(C))return g;if(x(this))return x(C)?P(this).j(P(C)):P(P(this).j(C));if(x(C))return P(this.j(P(C)));if(this.l(T)<0&&C.l(T)<0)return h(this.m()*C.m());const I=this.g.length+C.g.length,b=[];for(var O=0;O<2*I;O++)b[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<C.g.length;L++){const U=this.i(O)>>>16,V=this.i(O)&65535,ce=C.i(L)>>>16,xe=C.i(L)&65535;b[2*O+2*L]+=V*xe,M(b,2*O+2*L),b[2*O+2*L+1]+=U*xe,M(b,2*O+2*L+1),b[2*O+2*L+1]+=V*ce,M(b,2*O+2*L+1),b[2*O+2*L+2]+=U*ce,M(b,2*O+2*L+2)}for(C=0;C<I;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=I;C<2*I;C++)b[C]=0;return new a(b,0)};function M(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function D(C,I){this.g=C,this.h=I}function B(C,I){if(A(I))throw Error("division by zero");if(A(C))return new D(g,g);if(x(C))return I=B(P(C),I),new D(P(I.g),P(I.h));if(x(I))return I=B(C,P(I)),new D(P(I.g),I.h);if(C.g.length>30){if(x(C)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var b=v,O=I;O.l(C)<=0;)b=Z(b),O=Z(O);var L=re(b,1),U=re(O,1);for(O=re(O,2),b=re(b,2);!A(O);){var V=U.add(O);V.l(C)<=0&&(L=L.add(b),U=V),O=re(O,1),b=re(b,1)}return I=j(C,L.j(I)),new D(L,I)}for(L=g;C.l(I)>=0;){for(b=Math.max(1,Math.floor(C.m()/I.m())),O=Math.ceil(Math.log(b)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=h(b),V=U.j(I);x(V)||V.l(C)>0;)b-=O,U=h(b),V=U.j(I);A(U)&&(U=v),L=L.add(U),C=j(C,V)}return new D(L,C)}n.B=function(C){return B(this,C).h},n.and=function(C){const I=Math.max(this.g.length,C.g.length),b=[];for(let O=0;O<I;O++)b[O]=this.i(O)&C.i(O);return new a(b,this.h&C.h)},n.or=function(C){const I=Math.max(this.g.length,C.g.length),b=[];for(let O=0;O<I;O++)b[O]=this.i(O)|C.i(O);return new a(b,this.h|C.h)},n.xor=function(C){const I=Math.max(this.g.length,C.g.length),b=[];for(let O=0;O<I;O++)b[O]=this.i(O)^C.i(O);return new a(b,this.h^C.h)};function Z(C){const I=C.g.length+1,b=[];for(let O=0;O<I;O++)b[O]=C.i(O)<<1|C.i(O-1)>>>31;return new a(b,C.h)}function re(C,I){const b=I>>5;I%=32;const O=C.g.length-b,L=[];for(let U=0;U<O;U++)L[U]=I>0?C.i(U+b)>>>I|C.i(U+b+1)<<32-I:C.i(U+b);return new a(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,MC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,so=a}).apply(typeof $T<"u"?$T:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var OC,$c,LC,Rf,iv,FC,UC,jC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var w=0;w<f.length;++w){var E=f[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,w){if(w)e:{var E=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var Q=f[R];if(!(Q in E))break e;E=E[Q]}f=f[f.length-1],R=E[f],w=w(R),w!=R&&w!=null&&e(E,f,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(w){var E=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&E.push([R,w[R]]);return E}});var s=s||{},a=this||self;function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function d(f,w,E){return f.call.apply(f.bind,arguments)}function h(f,w,E){return h=d,h.apply(null,arguments)}function m(f,w){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function g(f,w){function E(){}E.prototype=w.prototype,f.Z=w.prototype,f.prototype=new E,f.prototype.constructor=f,f.Ob=function(R,Q,ne){for(var pe=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)pe[$e-2]=arguments[$e];return w.prototype[Q].apply(R,pe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function T(f){const w=f.length;if(w>0){const E=Array(w);for(let R=0;R<w;R++)E[R]=f[R];return E}return[]}function A(f,w){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var E=typeof Q;if(E=E!="object"?E:Q?Array.isArray(Q)?"array":E:"null",E=="array"||E=="object"&&typeof Q.length=="number"){E=f.length||0;const ne=Q.length||0;f.length=E+ne;for(let pe=0;pe<ne;pe++)f[E+pe]=Q[pe]}else f.push(Q)}}class x{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function P(f){a.setTimeout(()=>{throw f},0)}function j(){var f=C;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class M{constructor(){this.h=this.g=null}add(w,E){const R=D.get();R.set(w,E),this.h?this.h.next=R:this.g=R,this.h=R}}var D=new x(()=>new B,f=>f.reset());class B{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,re=!1,C=new M,I=()=>{const f=Promise.resolve(void 0);Z=()=>{f.then(b)}};function b(){for(var f;f=j();){try{f.h.call(f.g)}catch(E){P(E)}var w=D;w.j(f),w.h<100&&(w.h++,f.next=w.g,w.g=f)}re=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,w),a.removeEventListener("test",E,w)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function ce(f,w){L.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,w)}g(ce,L),ce.prototype.init=function(f,w){const E=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget,w||(E=="mouseover"?w=f.fromElement:E=="mouseout"&&(w=f.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),Pe=0;function De(f,w,E,R,Q){this.listener=f,this.proxy=null,this.src=w,this.type=E,this.capture=!!R,this.ha=Q,this.key=++Pe,this.da=this.fa=!1}function W(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Y(f,w,E){for(const R in f)w.call(E,f[R],R,f)}function X(f,w){for(const E in f)w.call(void 0,f[E],E,f)}function N(f){const w={};for(const E in f)w[E]=f[E];return w}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(f,w){let E,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(E in R)f[E]=R[E];for(let ne=0;ne<z.length;ne++)E=z[ne],Object.prototype.hasOwnProperty.call(R,E)&&(f[E]=R[E])}}function se(f){this.src=f,this.g={},this.h=0}se.prototype.add=function(f,w,E,R,Q){const ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);const pe=he(f,w,R,Q);return pe>-1?(w=f[pe],E||(w.fa=!1)):(w=new De(w,this.src,ne,!!R,Q),w.fa=E,f.push(w)),w};function oe(f,w){const E=w.type;if(E in f.g){var R=f.g[E],Q=Array.prototype.indexOf.call(R,w,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(R,Q,1),ne&&(W(w),f.g[E].length==0&&(delete f.g[E],f.h--))}}function he(f,w,E,R){for(let Q=0;Q<f.length;++Q){const ne=f[Q];if(!ne.da&&ne.listener==w&&ne.capture==!!E&&ne.ha==R)return Q}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Me={};function Ue(f,w,E,R,Q){if(Array.isArray(w)){for(let ne=0;ne<w.length;ne++)Ue(f,w[ne],E,R,Q);return null}return E=xo(E),f&&f[xe]?f.J(w,E,u(R)?!!R.capture:!1,Q):at(f,w,E,!1,R,Q)}function at(f,w,E,R,Q,ne){if(!w)throw Error("Invalid event type");const pe=u(Q)?!!Q.capture:!!Q;let $e=hs(f);if($e||(f[we]=$e=new se(f)),E=$e.add(w,E,R,pe,ne),E.proxy)return E;if(R=Lt(),E.proxy=R,R.src=f,R.listener=E,f.addEventListener)U||(Q=pe),Q===void 0&&(Q=!1),f.addEventListener(w.toString(),R,Q);else if(f.attachEvent)f.attachEvent(ds(w.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lt(){function f(E){return w.call(f.src,f.listener,E)}const w=Ao;return f}function zr(f,w,E,R,Q){if(Array.isArray(w))for(var ne=0;ne<w.length;ne++)zr(f,w[ne],E,R,Q);else R=u(R)?!!R.capture:!!R,E=xo(E),f&&f[xe]?(f=f.i,ne=String(w).toString(),ne in f.g&&(w=f.g[ne],E=he(w,E,R,Q),E>-1&&(W(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete f.g[ne],f.h--)))):f&&(f=hs(f))&&(w=f.g[w.toString()],f=-1,w&&(f=he(w,E,R,Q)),(E=f>-1?w[f]:null)&&Pr(E))}function Pr(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[xe])oe(w.i,f);else{var E=f.type,R=f.proxy;w.removeEventListener?w.removeEventListener(E,R,f.capture):w.detachEvent?w.detachEvent(ds(E),R):w.addListener&&w.removeListener&&w.removeListener(R),(E=hs(w))?(oe(E,f),E.h==0&&(E.src=null,w[we]=null)):W(f)}}}function ds(f){return f in Me?Me[f]:Me[f]="on"+f}function Ao(f,w){if(f.da)f=!0;else{w=new ce(w,this);const E=f.listener,R=f.ha||f.src;f.fa&&Pr(f),f=E.call(R,w)}return f}function hs(f){return f=f[we],f instanceof se?f:null}var Cr="__closure_events_fn_"+(Math.random()*1e9>>>0);function xo(f){return typeof f=="function"?f:(f[Cr]||(f[Cr]=function(w){return f.handleEvent(w)}),f[Cr])}function Ft(){O.call(this),this.i=new se(this),this.M=this,this.G=null}g(Ft,O),Ft.prototype[xe]=!0,Ft.prototype.removeEventListener=function(f,w,E,R){zr(this,f,w,E,R)};function Rt(f,w){var E,R=f.G;if(R)for(E=[];R;R=R.G)E.push(R);if(f=f.M,R=w.type||w,typeof w=="string")w=new L(w,f);else if(w instanceof L)w.target=w.target||f;else{var Q=w;w=new L(R,f),ee(w,Q)}Q=!0;let ne,pe;if(E)for(pe=E.length-1;pe>=0;pe--)ne=w.g=E[pe],Q=En(ne,R,!0,w)&&Q;if(ne=w.g=f,Q=En(ne,R,!0,w)&&Q,Q=En(ne,R,!1,w)&&Q,E)for(pe=0;pe<E.length;pe++)ne=w.g=E[pe],Q=En(ne,R,!1,w)&&Q}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var f=this.i;for(const w in f.g){const E=f.g[w];for(let R=0;R<E.length;R++)W(E[R]);delete f.g[w],f.h--}}this.G=null},Ft.prototype.J=function(f,w,E,R){return this.i.add(String(f),w,!1,E,R)},Ft.prototype.K=function(f,w,E,R){return this.i.add(String(f),w,!0,E,R)};function En(f,w,E,R){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();let Q=!0;for(let ne=0;ne<w.length;++ne){const pe=w[ne];if(pe&&!pe.da&&pe.capture==E){const $e=pe.listener,Wt=pe.ha||pe.src;pe.fa&&oe(f.i,pe),Q=$e.call(Wt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function Ro(f,w){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(f,w||0)}function fs(f){f.g=Ro(()=>{f.g=null,f.i&&(f.i=!1,fs(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class ko extends O{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:fs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(f){O.call(this),this.h=f,this.g={}}g(br,O);var Do=[];function ps(f){Y(f.g,function(w,E){this.g.hasOwnProperty(E)&&Pr(w)},f),f.g={}}br.prototype.N=function(){br.Z.N.call(this),ps(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=a.JSON.stringify,qa=a.JSON.parse,Xn=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function fr(){}function ut(){}var Hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ms(){L.call(this,"d")}g(ms,L);function Lu(){L.call(this,"c")}g(Lu,L);var Ar={},Ga=null;function gs(){return Ga=Ga||new Ft}Ar.Ia="serverreachability";function Ka(f){L.call(this,Ar.Ia,f)}g(Ka,L);function Ai(f){const w=gs();Rt(w,new Ka(w))}Ar.STAT_EVENT="statevent";function xi(f,w){L.call(this,Ar.STAT_EVENT,f),this.stat=w}g(xi,L);function Ut(f){const w=gs();Rt(w,new xi(w,f))}Ar.Ja="timingevent";function Fu(f,w){L.call(this,Ar.Ja,f),this.size=w}g(Fu,L);function ys(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},w)}function vs(){this.g=!0}vs.prototype.ua=function(){this.g=!1};function Zd(f,w,E,R,Q,ne){f.info(function(){if(f.g)if(ne){var pe="",$e=ne.split("&");for(let ct=0;ct<$e.length;ct++){var Wt=$e[ct].split("=");if(Wt.length>1){const Jt=Wt[0];Wt=Wt[1];const rr=Jt.split("_");pe=rr.length>=2&&rr[1]=="type"?pe+(Jt+"="+Wt+"&"):pe+(Jt+"=redacted&")}}}else pe=null;else pe=ne;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+w+`
`+E+`
`+pe})}function eh(f,w,E,R,Q,ne,pe){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+w+`
`+E+`
`+ne+" "+pe})}function qr(f,w,E,R){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+No(f,E)+(R?" "+R:"")})}function th(f,w){f.info(function(){return"TIMEOUT: "+w})}vs.prototype.info=function(){};function No(f,w){if(!f.g)return w;if(!w)return null;try{const ne=JSON.parse(w);if(ne){for(f=0;f<ne.length;f++)if(Array.isArray(ne[f])){var E=ne[f];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let pe=1;pe<R.length;pe++)R[pe]=""}}}}return Wr(ne)}catch{return w}}var _s={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ws={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nh;function Ri(){}g(Ri,fr),Ri.prototype.g=function(){return new XMLHttpRequest},nh=new Ri;function Gr(f){return encodeURIComponent(String(f))}function Qa(f){var w=1;f=f.split(":");const E=[];for(;w>0&&f.length;)E.push(f.shift()),w--;return f.length&&E.push(f.join(":")),E}function pr(f,w,E,R){this.j=f,this.i=w,this.l=E,this.S=R||1,this.V=new br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rh}function rh(){this.i=null,this.g="",this.h=!1}var ih={},Uu={};function xr(f,w,E){f.M=1,f.A=Di(mr(w)),f.u=E,f.R=!0,ju(f,null)}function ju(f,w){f.F=Date.now(),Vo(f),f.B=mr(f.A);var E=f.B,R=f.S;Array.isArray(R)||(R=[String(R)]),Yu(E.i,"t",R),f.C=0,E=f.j.L,f.h=new rh,f.g=ph(f.j,E?w:null,!f.u),f.P>0&&(f.O=new ko(h(f.Y,f,f.g),f.P)),w=f.V,E=f.g,R=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Do[0]=Q.toString()),Q=Do);for(let ne=0;ne<Q.length;ne++){const pe=Ue(E,Q[ne],R||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=f.J?N(f.J):{},f.u?(f.v||(f.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,w)):(f.v="GET",f.g.ea(f.B,f.v,null,w)),Ai(),Zd(f.i,f.v,f.B,f.l,f.S,f.u)}pr.prototype.ba=function(f){f=f.target;const w=this.O;w&&ei(f)==3?w.j():this.Y(f)},pr.prototype.Y=function(f){try{if(f==this.g)e:{const $e=ei(this.g),Wt=this.g.ya(),ct=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||hh(this.g)))){this.K||$e!=4||Wt==7||(Wt==8||ct<=0?Ai(3):Ai(2)),Ya(this);var w=this.g.ca();this.X=w;var E=sh(this);if(this.o=w==200,eh(this.i,this.v,this.B,this.l,this.S,$e,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var ne=R;break t}}ne=null}if(f=ne)qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tt(this,f);else{this.o=!1,this.m=3,Ut(12),ki(this),Mo(this);break e}}if(this.R){f=!0;let Jt;for(;!this.K&&this.C<E.length;)if(Jt=ah(this,E),Jt==Uu){$e==4&&(this.m=4,Ut(14),f=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==ih){this.m=4,Ut(15),qr(this.i,this.l,E,"[Invalid Chunk]"),f=!1;break}else qr(this.i,this.l,Jt,null),Tt(this,Jt);if(oh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||E.length!=0||this.h.h||(this.m=1,Ut(16),f=!1),this.o=this.o&&f,!f)qr(this.i,this.l,E,"[Invalid Chunked Response]"),ki(this),Mo(this);else if(E.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Wo(pe),pe.P=!0,Ut(11))}}else qr(this.i,this.l,E,null),Tt(this,E);$e==4&&ki(this),this.o&&!this.K&&($e==4?ol(this.j,this):(this.o=!1,Vo(this)))}else Ju(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),ki(this),Mo(this)}}}catch{}};function sh(f){if(!oh(f))return f.g.la();const w=hh(f.g);if(w==="")return"";let E="";const R=w.length,Q=ei(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return ki(f),Mo(f),"";f.h.i=new a.TextDecoder}for(let ne=0;ne<R;ne++)f.h.h=!0,E+=f.h.i.decode(w[ne],{stream:!(Q&&ne==R-1)});return w.length=0,f.h.g+=E,f.C=0,f.h.g}function oh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function ah(f,w){var E=f.C,R=w.indexOf(`
`,E);return R==-1?Uu:(E=Number(w.substring(E,R)),isNaN(E)?ih:(R+=1,R+E>w.length?Uu:(w=w.slice(R,R+E),f.C=R+E,w)))}pr.prototype.cancel=function(){this.K=!0,ki(this)};function Vo(f){f.T=Date.now()+f.H,Bu(f,f.H)}function Bu(f,w){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ys(h(f.aa,f),w)}function Ya(f){f.D&&(a.clearTimeout(f.D),f.D=null)}pr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(th(this.i,this.B),this.M!=2&&(Ai(),Ut(17)),ki(this),this.m=2,Mo(this)):Bu(this,this.T-f)};function Mo(f){f.j.I==0||f.K||ol(f.j,f)}function ki(f){Ya(f);var w=f.O;w&&typeof w.dispose=="function"&&w.dispose(),f.O=null,ps(f.V),f.g&&(w=f.g,f.g=null,w.abort(),w.dispose())}function Tt(f,w){try{var E=f.j;if(E.I!=0&&(E.g==f||zu(E.h,f))){if(!f.L&&zu(E.h,f)&&E.I==3){try{var R=E.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<f.F)sl(E),tr(E);else break e;ri(E),Ut(18)}}else E.xa=Q[1],0<E.xa-E.K&&Q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=ys(h(E.Va,E),6e3));Oo(E.h)<=1&&E.ta&&(E.ta=void 0)}else nr(E,11)}else if((f.L||E.g==f)&&sl(E),!V(w))for(Q=E.Ba.g.parse(w),w=0;w<Q.length;w++){let ct=Q[w];const Jt=ct[0];if(!(Jt<=E.K))if(E.K=Jt,ct=ct[1],E.I==2)if(ct[0]=="c"){E.M=ct[1],E.ba=ct[2];const rr=ct[3];rr!=null&&(E.ka=rr,E.j.info("VER="+E.ka));const Li=ct[4];Li!=null&&(E.za=Li,E.j.info("SVER="+E.za));const ii=ct[5];ii!=null&&typeof ii=="number"&&ii>0&&(R=1.5*ii,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const si=f.g;if(si){const ul=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var ne=R.h;ne.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Ja(ne,ne.h),ne.h=null))}if(R.G){const tc=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;tc&&(R.wa=tc,it(R.J,R.G,tc))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-f.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var pe=f;if(R.na=ec(R,R.L?R.ba:null,R.W),pe.L){Lo(R.h,pe);var $e=pe,Wt=R.O;Wt&&($e.H=Wt),$e.D&&(Ya($e),Vo($e)),R.g=pe}else Tn(R);E.i.length>0&&Oi(E)}else ct[0]!="stop"&&ct[0]!="close"||nr(E,7);else E.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?nr(E,7):rl(E):ct[0]!="noop"&&E.l&&E.l.qa(ct),E.A=0)}}Ai(4)}catch{}}var Nm=class{constructor(f,w){this.g=f,this.map=w}};function Xa(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $u(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Oo(f){return f.h?1:f.g?f.g.size:0}function zu(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function Ja(f,w){f.g?f.g.add(w):f.h=w}function Lo(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}Xa.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Jn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const E of f.g.values())w=w.concat(E.G);return w}return T(f.i)}var lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zn(f,w){if(f){f=f.split("&");for(let E=0;E<f.length;E++){const R=f[E].indexOf("=");let Q,ne=null;R>=0?(Q=f[E].substring(0,R),ne=f[E].substring(R+1)):Q=f[E],w(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Kr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;f instanceof Kr?(this.l=f.l,Fo(this,f.j),this.o=f.o,this.g=f.g,Qr(this,f.u),this.h=f.h,Es(this,Xu(f.i)),this.m=f.m):f&&(w=String(f).match(lh))?(this.l=!1,Fo(this,w[1]||"",!0),this.o=Uo(w[2]||""),this.g=Uo(w[3]||"",!0),Qr(this,w[4]),this.h=Uo(w[5]||"",!0),Es(this,w[6]||"",!0),this.m=Uo(w[7]||"")):(this.l=!1,this.i=new Qe(null,this.l))}Kr.prototype.toString=function(){const f=[];var w=this.j;w&&f.push(jo(w,Hu,!0),":");var E=this.g;return(E||w=="file")&&(f.push("//"),(w=this.o)&&f.push(jo(w,Hu,!0),"@"),f.push(Gr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&f.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(jo(E,E.charAt(0)=="/"?Bo:qu,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",jo(E,Gu)),f.join("")},Kr.prototype.resolve=function(f){const w=mr(this);let E=!!f.j;E?Fo(w,f.j):E=!!f.o,E?w.o=f.o:E=!!f.g,E?w.g=f.g:E=f.u!=null;var R=f.h;if(E)Qr(w,f.u);else if(E=!!f.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=w.h.lastIndexOf("/");Q!=-1&&(R=w.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let pe=0;pe<Q.length;){const $e=Q[pe++];$e=="."?R&&pe==Q.length&&ne.push(""):$e==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),R&&pe==Q.length&&ne.push("")):(ne.push($e),R=!0)}R=ne.join("/")}else R=Q}return E?w.h=R:E=f.i.toString()!=="",E?Es(w,Xu(f.i)):E=!!f.m,E&&(w.m=f.m),w};function mr(f){return new Kr(f)}function Fo(f,w,E){f.j=E?Uo(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function Qr(f,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);f.u=w}else f.u=null}function Es(f,w,E){w instanceof Qe?(f.i=w,el(f.i,f.l)):(E||(w=jo(w,Vm)),f.i=new Qe(w,f.l))}function it(f,w,E){f.i.set(w,E)}function Di(f){return it(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Uo(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function jo(f,w,E){return typeof f=="string"?(f=encodeURI(f).replace(w,Wu),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Wu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Hu=/[#\/\?@]/g,qu=/[#\?:]/g,Bo=/[#\?]/g,Vm=/[#\?@]/g,Gu=/#/g;function Qe(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Yr(f){f.g||(f.g=new Map,f.h=0,f.i&&Zn(f.i,function(w,E){f.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}n=Qe.prototype,n.add=function(f,w){Yr(this),this.i=null,f=Xr(this,f);let E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(w),this.h+=1,this};function Ku(f,w){Yr(f),w=Xr(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Za(f,w){return Yr(f),w=Xr(f,w),f.g.has(w)}n.forEach=function(f,w){Yr(this),this.g.forEach(function(E,R){E.forEach(function(Q){f.call(w,Q,R,this)},this)},this)};function Qu(f,w){Yr(f);let E=[];if(typeof w=="string")Za(f,w)&&(E=E.concat(f.g.get(Xr(f,w))));else for(f=Array.from(f.g.values()),w=0;w<f.length;w++)E=E.concat(f[w]);return E}n.set=function(f,w){return Yr(this),this.i=null,f=Xr(this,f),Za(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=Qu(this,f),f.length>0?String(f[0]):w):w};function Yu(f,w,E){Ku(f,w),E.length>0&&(f.i=null,f.g.set(Xr(f,w),T(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var E=w[R];const Q=Gr(E);E=Qu(this,E);for(let ne=0;ne<E.length;ne++){let pe=Q;E[ne]!==""&&(pe+="="+Gr(E[ne])),f.push(pe)}}return this.i=f.join("&")};function Xu(f){const w=new Qe;return w.i=f.i,f.g&&(w.g=new Map(f.g),w.h=f.h),w}function Xr(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function el(f,w){w&&!f.j&&(Yr(f),f.i=null,f.g.forEach(function(E,R){const Q=R.toLowerCase();R!=Q&&(Ku(this,R),Yu(this,Q,E))},f)),f.j=w}function Jr(f,w){const E=new vs;if(a.Image){const R=new Image;R.onload=m(gn,E,"TestLoadImage: loaded",!0,w,R),R.onerror=m(gn,E,"TestLoadImage: error",!1,w,R),R.onabort=m(gn,E,"TestLoadImage: abort",!1,w,R),R.ontimeout=m(gn,E,"TestLoadImage: timeout",!1,w,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else w(!1)}function Zr(f,w){const E=new vs,R=new AbortController,Q=setTimeout(()=>{R.abort(),gn(E,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:R.signal}).then(ne=>{clearTimeout(Q),ne.ok?gn(E,"TestPingServer: ok",!0,w):gn(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),gn(E,"TestPingServer: error",!1,w)})}function gn(f,w,E,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(E)}catch{}}function $o(){this.g=new Xn}function Ni(f){this.i=f.Sb||null,this.h=f.ab||!1}g(Ni,fr),Ni.prototype.g=function(){return new er(this.i,this.h)};function er(f,w){Ft.call(this),this.H=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(er,Ft),n=er.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=w,this.readyState=1,Rr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(w.body=f),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uh(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function uh(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Ts(this):Rr(this),this.readyState==3&&uh(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ts(this))},n.Na=function(f){this.g&&(this.response=f,Ts(this))},n.ga=function(){this.g&&Ts(this)};function Ts(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Rr(f)}n.setRequestHeader=function(f,w){this.A.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=w.next();return f.join(`\r
`)};function Rr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ch(f){let w="";return Y(f,function(E,R){w+=R,w+=":",w+=E,w+=`\r
`}),w}function tl(f,w,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=ch(E),typeof f=="string"?E!=null&&Gr(E):it(f,w,E))}function vt(f){Ft.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(vt,Ft);var dh=/^https?$/i,Mm=["POST","PUT"];n=vt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,w,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nh.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(ne){Is(this,ne);return}if(f=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)E.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ne of R.keys())E.set(ne,R.get(ne));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Mm,w,void 0)>=0)||R||Q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,pe]of E)this.g.setRequestHeader(ne,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ne){Is(this,ne)}};function Is(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.o=5,Ss(f),Mi(f)}function Ss(f){f.A||(f.A=!0,Rt(f,"complete"),Rt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Rt(this,"complete"),Rt(this,"abort"),Mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mi(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vi(this):this.Xa())},n.Xa=function(){Vi(this)};function Vi(f){if(f.h&&typeof s<"u"){if(f.v&&ei(f)==4)setTimeout(f.Ca.bind(f),0);else if(Rt(f,"readystatechange"),ei(f)==4){f.h=!1;try{const ne=f.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var R;if(R=ne===0){let pe=String(f.D).match(lh)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),R=!dh.test(pe?pe.toLowerCase():"")}E=R}if(E)Rt(f,"complete"),Rt(f,"success");else{f.o=6;try{var Q=ei(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",Ss(f)}}finally{Mi(f)}}}}function Mi(f,w){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const E=f.g;f.g=null,w||Rt(f,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(f){return f.g?f.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),qa(w)}};function hh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ju(f){const w={};f=(f.g&&ei(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(V(f[R]))continue;var E=Qa(f[R]);const Q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ne=w[Q]||[];w[Q]=ne,ne.push(E)}X(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(f,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||w}function nl(f){this.za=0,this.i=[],this.j=new vs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ti("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ti("baseRetryDelayMs",5e3,f),this.Za=ti("retryDelaySeedMs",1e4,f),this.Ta=ti("forwardChannelMaxRetries",2,f),this.va=ti("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Xa(f&&f.concurrentRequestLimit),this.Ba=new $o,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=nl.prototype,n.ka=8,n.I=1,n.connect=function(f,w,E,R){Ut(0),this.W=f,this.H=w||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=ec(this,null,this.W),Oi(this)};function rl(f){if(il(f),f.I==3){var w=f.V++,E=mr(f.J);if(it(E,"SID",f.M),it(E,"RID",w),it(E,"TYPE","terminate"),ni(f,E),w=new pr(f,f.j,w),w.M=2,w.A=Di(mr(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=w.A,E=!0),E||(w.g=ph(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Vo(w)}Ho(f)}function tr(f){f.g&&(Wo(f),f.g.cancel(),f.g=null)}function il(f){tr(f),f.v&&(a.clearTimeout(f.v),f.v=null),sl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Oi(f){if(!$u(f.h)&&!f.m){f.m=!0;var w=f.Ea;Z||I(),re||(Z(),re=!0),C.add(w,f),f.D=0}}function fh(f,w){return Oo(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=w.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ys(h(f.Ea,f,w),al(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new pr(this,this.j,f);let ne=this.o;if(this.U&&(ne?(ne=N(ne),ee(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Zu(this,Q,w),E=mr(this.J),it(E,"RID",f),it(E,"CVER",22),this.G&&it(E,"X-HTTP-Session-Id",this.G),ni(this,E),ne&&(this.R?w="headers="+Gr(ch(ne))+"&"+w:this.u&&tl(E,this.u,ne)),Ja(this.h,Q),this.Ra&&it(E,"TYPE","init"),this.S?(it(E,"$req",w),it(E,"SID","null"),Q.U=!0,xr(Q,E,null)):xr(Q,E,w),this.I=2}}else this.I==3&&(f?zo(this,f):this.i.length==0||$u(this.h)||zo(this))};function zo(f,w){var E;w?E=w.l:E=f.V++;const R=mr(f.J);it(R,"SID",f.M),it(R,"RID",E),it(R,"AID",f.K),ni(f,R),f.u&&f.o&&tl(R,f.u,f.o),E=new pr(f,f.j,E,f.D+1),f.u===null&&(E.J=f.o),w&&(f.i=w.G.concat(f.i)),w=Zu(f,E,1e3),E.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ja(f.h,E),xr(E,R,w)}function ni(f,w){f.H&&Y(f.H,function(E,R){it(w,R,E)}),f.l&&Y({},function(E,R){it(w,R,E)})}function Zu(f,w,E){E=Math.min(f.i.length,E);const R=f.l?h(f.l.Ka,f.l,f):null;e:{var Q=f.i;let $e=-1;for(;;){const Wt=["count="+E];$e==-1?E>0?($e=Q[0].g,Wt.push("ofs="+$e)):$e=0:Wt.push("ofs="+$e);let ct=!0;for(let Jt=0;Jt<E;Jt++){var ne=Q[Jt].g;const rr=Q[Jt].map;if(ne-=$e,ne<0)$e=Math.max(0,Q[Jt].g-100),ct=!1;else try{ne="req"+ne+"_"||"";try{var pe=rr instanceof Map?rr:Object.entries(rr);for(const[Li,ii]of pe){let si=ii;u(ii)&&(si=Wr(ii)),Wt.push(ne+Li+"="+encodeURIComponent(si))}}catch(Li){throw Wt.push(ne+"type="+encodeURIComponent("_badmap")),Li}}catch{R&&R(rr)}}if(ct){pe=Wt.join("&");break e}}pe=void 0}return f=f.i.splice(0,E),w.G=f,pe}function Tn(f){if(!f.g&&!f.v){f.Y=1;var w=f.Da;Z||I(),re||(Z(),re=!0),C.add(w,f),f.A=0}}function ri(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ys(h(f.Da,f),al(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Ps(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ys(h(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),tr(this),Ps(this))};function Wo(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function Ps(f){f.g=new pr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var w=mr(f.na);it(w,"RID","rpc"),it(w,"SID",f.M),it(w,"AID",f.K),it(w,"CI",f.F?"0":"1"),!f.F&&f.ia&&it(w,"TO",f.ia),it(w,"TYPE","xmlhttp"),ni(f,w),f.u&&f.o&&tl(w,f.u,f.o),f.O&&(f.g.H=f.O);var E=f.g;f=f.ba,E.M=1,E.A=Di(mr(w)),E.u=null,E.R=!0,ju(E,f)}n.Va=function(){this.C!=null&&(this.C=null,tr(this),ri(this),Ut(19))};function sl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function ol(f,w){var E=null;if(f.g==w){sl(f),Wo(f),f.g=null;var R=2}else if(zu(f.h,w))E=w.G,Lo(f.h,w),R=1;else return;if(f.I!=0){if(w.o)if(R==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var Q=f.D;R=gs(),Rt(R,new Fu(R,E)),Oi(f)}else Tn(f);else if(Q=w.m,Q==3||Q==0&&w.X>0||!(R==1&&fh(f,w)||R==2&&ri(f)))switch(E&&E.length>0&&(w=f.h,w.i=w.i.concat(E)),Q){case 1:nr(f,5);break;case 4:nr(f,10);break;case 3:nr(f,6);break;default:nr(f,2)}}}function al(f,w){let E=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(E*=2),E*w}function nr(f,w){if(f.j.info("Error code "+w),w==2){var E=h(f.bb,f),R=f.Ua;const Q=!R;R=new Kr(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fo(R,"https"),Di(R),Q?Jr(R.toString(),E):Zr(R.toString(),E)}else Ut(2);f.I=0,f.l&&f.l.pa(w),Ho(f),il(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Ho(f){if(f.I=0,f.ja=[],f.l){const w=Jn(f.h);(w.length!=0||f.i.length!=0)&&(A(f.ja,w),A(f.ja,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.oa()}}function ec(f,w,E){var R=E instanceof Kr?mr(E):new Kr(E);if(R.g!="")w&&(R.g=w+"."+R.g),Qr(R,R.u);else{var Q=a.location;R=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new Kr(null);R&&Fo(ne,R),w&&(ne.g=w),Q&&Qr(ne,Q),E&&(ne.h=E),R=ne}return E=f.G,w=f.wa,E&&w&&it(R,E,w),it(R,"VER",f.ka),ni(f,R),R}function ph(f,w,E){if(w&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Aa&&!f.ma?new vt(new Ni({ab:E})):new vt(f.ma),w.Fa(f.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}n=mh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ll(){}ll.prototype.g=function(f,w){return new yn(f,w)};function yn(f,w){Ft.call(this),this.g=new nl(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(f?f["X-WebChannel-Client-Profile"]=w.sa:f={"X-WebChannel-Client-Profile":w.sa}),this.g.U=f,(f=w&&w.Qb)&&!V(f)&&(this.g.u=f),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.G=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Cs(this)}g(yn,Ft),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){rl(this.g)},yn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.v&&(E={},E.__data__=Wr(f),f=E);w.i.push(new Nm(w.Ya++,f)),w.I==3&&Oi(w)},yn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,yn.Z.N.call(this)};function gh(f){ms.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const E in w){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}g(gh,ms);function yh(){Lu.call(this),this.status=1}g(yh,Lu);function Cs(f){this.g=f}g(Cs,mh),Cs.prototype.ra=function(){Rt(this.g,"a")},Cs.prototype.qa=function(f){Rt(this.g,new gh(f))},Cs.prototype.pa=function(f){Rt(this.g,new yh)},Cs.prototype.oa=function(){Rt(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,jC=function(){return new ll},UC=function(){return gs()},FC=Ar,iv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,Rf=_s,ws.COMPLETE="complete",LC=ws,ut.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,$c=ut,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,OC=vt}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const zT="@firebase/firestore",WT="4.9.3";let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let xu="12.7.0";const ba=new y_("@firebase/firestore");function Fl(){return ba.logLevel}function le(n,...e){if(ba.logLevel<=Ke.DEBUG){const t=e.map(w_);ba.debug(`Firestore (${xu}): ${n}`,...t)}}function qt(n,...e){if(ba.logLevel<=Ke.ERROR){const t=e.map(w_);ba.error(`Firestore (${xu}): ${n}`,...t)}}function ho(n,...e){if(ba.logLevel<=Ke.WARN){const t=e.map(w_);ba.warn(`Firestore (${xu}): ${n}`,...t)}}function w_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,BC(n,r,t)}function BC(n,e,t){let r=`FIRESTORE (${xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qt(r),new Error(r)}function ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||BC(e,i,r)}function be(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $C{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(mn.UNAUTHENTICATED)))}shutdown(){}}class FM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class UM{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jr,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},u=d=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jr)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new $C(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class jM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $M{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new HT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function zM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class E_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function sv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return fy(i)===fy(s)?Be(i,s):fy(i)?1:-1}return Be(n.length,e.length)}const WM=55296,HM=57343;function fy(n){const e=n.charCodeAt(0);return e>=WM&&e<=HM}function ru(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function zC(n){return n+"\0"}const qT="__name__";class ci{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ci.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ci?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ci.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Be(e.length,t.length)}static compareSegments(e,t){const r=ci.isNumericId(e),i=ci.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ci.extractNumericId(e).compare(ci.extractNumericId(t)):sv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return so.fromString(e.substring(4,e.length-2))}}class lt extends ci{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const qM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ci{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return qM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qT}static keyField(){return new Nt([qT])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(lt.fromString(e))}static fromName(e){return new ge(lt.fromString(e).popFirst(5))}static empty(){return new ge(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new lt(e.slice()))}}function WC(n,e,t){if(!t)throw new me(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GM(n,e,t,r){if(e===!0&&r===!0)throw new me(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GT(n){if(!ge.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KT(n){if(ge.isDocumentKey(n))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function T_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=T_(n);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rn(n,e){const t={typeString:n};return e&&(t.value=e),t}function kd(n,e){if(!HC(n))throw new me(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new me(ie.INVALID_ARGUMENT,t);return!0}const QT=-62135596800,YT=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*YT);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<QT)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YT}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kd(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:rn("string",ft._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ft(0,0))}static max(){return new Ne(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;class ep{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ov(n){return n.fields.find((e=>e.kind===2))}function la(n){return n.fields.filter((e=>e.kind!==2))}ep.UNKNOWN_ID=-1;class kf{constructor(e,t){this.fieldPath=e,this.kind=t}}class dd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dd(0,dr.min())}}function qC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new dr(i,ge.empty(),e)}function GC(n){return new dr(n.readTime,n.key,iu)}class dr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dr(Ne.min(),ge.empty(),iu)}static max(){return new dr(Ne.max(),ge.empty(),iu)}}function I_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}const KC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function To(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==KC)throw n;le("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,r)=>{t(e)}))}static reject(e){return new q(((t,r)=>{r(e)}))}static waitFor(e){return new q(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(d=>r(d)))})),a=!0,s===i&&t()}))}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next((i=>i?q.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new q(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next((m=>{a[h]=m,++u,u===s&&r(a)}),(m=>i(m)))}}))}static doWhile(e,t){return new q(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const ar="SimpleDb";class Kp{static open(e,t,r,i){try{return new Kp(t,e.transaction(i,r))}catch(s){throw new Kc(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new jr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Kc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=S_(r.target.error);this.S.reject(new Kc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(ar,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QM(t)}}class oo{static delete(e){return le(ar,"Removing database:",e),pa(EC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xC())return!1;if(oo.F())return!0;const e=ln(),t=oo.M(e),r=0<t&&t<10,i=YC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,oo.M(ln())===12.2&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(ar,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new me(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new me(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Kc(e,a))},i.onupgradeneeded=s=>{le(ar,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{le(ar,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const u=Kp.open(this.db,e,s?"readonly":"readwrite",r),d=i(u).next((h=>(u.C(),h))).catch((h=>(u.abort(h),q.reject(h)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,h=d.name!=="FirebaseError"&&a<3;if(le(ar,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class KM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return pa(this.U.delete())}}class Kc extends me{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Io(n){return n.name==="IndexedDbTransactionError"}class QM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(ar,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(ar,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pa(r)}add(e){return le(ar,"ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(ar,"GET",this.store.name,e,t),t)))}delete(e){return le(ar,"DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return le(ar,"COUNT",this.store.name),pa(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new q(((a,u)=>{s.onerror=d=>{u(d.target.error)},s.onsuccess=d=>{a(d.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((u,d)=>{a.push(d)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){le(ar,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new q(((r,i)=>{t.onerror=s=>{const a=S_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((u=>{u?a.continue():r()})):r()}}))}H(e,t){const r=[];return new q(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const d=new KM(u),h=t(u.primaryKey,u.value,d);if(h instanceof q){const m=h.catch((g=>(d.done(),q.reject(g))));r.push(m)}d.isDone?i():d.G===null?u.continue():u.continue(d.G)}})).next((()=>q.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pa(n){return new q(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=S_(r.target.error);t(i)}}))}let XT=!1;function S_(n){const e=oo.M(ln());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XT||(XT=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Qc="IndexBackfiller";class YM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(Qc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(Qc,`Documents written: ${t}`)}catch(t){Io(t)?le(Qc,"Ignoring IndexedDB error during index backfill: ",t):await To(t)}await this.re(6e4)}))}}class XM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return q.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return le(Qc,`Processing collection: ${a}`),this.oe(e,a,i).next((u=>{i-=u,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((u=>(le(Qc,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=GC(s);I_(a,r)>0&&(r=a)})),new dr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Gn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gn.ce=-1;const Ea=-1;function Qp(n){return n==null}function hd(n){return n===0&&1/n==-1/0}function XC(n){return typeof n=="number"&&Number.isInteger(n)&&!hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const tp="";function kn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JT(e)),e=JM(n.get(t),e);return JT(e)}function JM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case tp:t+="";break;default:t+=s}}return t}function JT(n){return n+tp+""}function pi(n){const e=n.length;if(ke(e>=2,64408,{path:n}),e===2)return ke(n.charAt(0)===tp&&n.charAt(1)==="",56145,{path:n}),lt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(tp,s);switch((a<0||a>t)&&Se(50515,{path:n}),n.charAt(a+1)){case"":const u=n.substring(s,a);let d;i.length===0?d=u:(i+=u,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Se(61167,{path:n})}s=a+2}return new lt(r)}const ua="remoteDocuments",Dd="owner",Rl="owner",fd="mutationQueues",ZM="userId",Fr="mutations",ZT="batchId",va="userMutationsIndex",eI=["userId","batchId"];function Df(n,e){return[n,kn(e)]}function JC(n,e,t){return[n,kn(e),t]}const eO={},su="documentMutations",np="remoteDocumentsV14",tO=["prefixPath","collectionGroup","readTime","documentId"],Nf="documentKeyIndex",nO=["prefixPath","collectionGroup","documentId"],ZC="collectionGroupIndex",rO=["collectionGroup","readTime","prefixPath","documentId"],pd="remoteDocumentGlobal",av="remoteDocumentGlobalKey",ou="targets",eb="queryTargetsIndex",iO=["canonicalId","targetId"],au="targetDocuments",sO=["targetId","path"],P_="documentTargetsIndex",oO=["path","targetId"],rp="targetGlobalKey",Ta="targetGlobal",md="collectionParents",aO=["collectionId","parent"],lu="clientMetadata",lO="clientId",Yp="bundles",uO="bundleId",Xp="namedQueries",cO="name",C_="indexConfiguration",dO="indexId",lv="collectionGroupIndex",hO="collectionGroup",Yc="indexState",fO=["indexId","uid"],tb="sequenceNumberIndex",pO=["uid","sequenceNumber"],Xc="indexEntries",mO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nb="documentKeyIndex",gO=["indexId","uid","orderedDocumentKey"],Jp="documentOverlays",yO=["userId","collectionPath","documentId"],uv="collectionPathOverlayIndex",vO=["userId","collectionPath","largestBatchId"],rb="collectionGroupOverlayIndex",_O=["userId","collectionGroup","largestBatchId"],b_="globals",wO="name",ib=[fd,Fr,su,ua,ou,Dd,Ta,au,lu,pd,md,Yp,Xp],EO=[...ib,Jp],sb=[fd,Fr,su,np,ou,Dd,Ta,au,lu,pd,md,Yp,Xp,Jp],ob=sb,A_=[...ob,C_,Yc,Xc],TO=A_,ab=[...A_,b_],IO=ab;class cv extends QC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function un(n,e){const t=be(n);return oo.O(t.le,e)}function tI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wt{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??wn.RED,this.left=i??wn.EMPTY,this.right=s??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new wn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nI(this.data.getIterator())}getIteratorFrom(e){return new nI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class nI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kl(n){return n.hasNext()?n.getNext():void 0}class Kn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new mt(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ru(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class ub extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ub("Invalid base64 string: "+s):s}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const SO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(n){if(ke(!!n,39018),typeof n=="string"){let e=0;const t=SO.exec(n);if(ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ts(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}const cb="server_timestamp",db="__type__",hb="__previous_value__",fb="__local_write_time__";function x_(n){return(n?.mapValue?.fields||{})[db]?.stringValue===cb}function Zp(n){const e=n.mapValue.fields[hb];return x_(e)?Zp(e):e}function gd(n){const e=es(n.mapValue.fields[fb].timestampValue);return new ft(e.seconds,e.nanos)}class PO{constructor(e,t,r,i,s,a,u,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=m}}const ip="(default)";class Aa{constructor(e,t){this.projectId=e,this.database=t||ip}static empty(){return new Aa("","")}get isDefaultDatabase(){return this.database===ip}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const R_="__type__",pb="__max__",to={mapValue:{fields:{__type__:{stringValue:pb}}}},k_="__vector__",uu="value",Vf={nullValue:"NULL_VALUE"};function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?x_(n)?4:mb(n)?9007199254740991:em(n)?10:11:Se(28295,{value:n})}function Ii(n,e){if(n===e)return!0;const t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gd(n).isEqual(gd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=es(i.timestampValue),u=es(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=At(i.doubleValue),u=At(s.doubleValue);return a===u?hd(a)===hd(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return ru(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(tI(a)!==tI(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Ii(a[d],u[d])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function yd(n,e){return(n.values||[]).find((t=>Ii(t,e)))!==void 0}function po(n,e){if(n===e)return 0;const t=fo(n),r=fo(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=At(s.integerValue||s.doubleValue),d=At(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return rI(n.timestampValue,e.timestampValue);case 4:return rI(gd(n),gd(e));case 5:return sv(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=ts(s),d=ts(a);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=Be(u[h],d[h]);if(m!==0)return m}return Be(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Be(At(s.latitude),At(a.latitude));return u!==0?u:Be(At(s.longitude),At(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iI(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},d=a.fields||{},h=u[uu]?.arrayValue,m=d[uu]?.arrayValue,g=Be(h?.values?.length||0,m?.values?.length||0);return g!==0?g:iI(h,m)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===to.mapValue&&a===to.mapValue)return 0;if(s===to.mapValue)return 1;if(a===to.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),h=a.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const v=sv(d[g],m[g]);if(v!==0)return v;const T=po(u[d[g]],h[m[g]]);if(T!==0)return T}return Be(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function rI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=es(n),r=es(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function iI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=po(t[i],r[i]);if(s)return s}return Be(t.length,r.length)}function cu(n){return dv(n)}function dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=es(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ts(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=dv(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${dv(t.fields[a])}`;return i+"}"})(n.mapValue):Se(61005,{value:n})}function Mf(n){switch(fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zp(n);return e?16+Mf(e):16;case 5:return 2*n.stringValue.length;case 6:return ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Mf(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return So(r.fields,((s,a)=>{i+=s.length+Mf(a)})),i})(n.mapValue);default:throw Se(13486,{value:n})}}function D_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hv(n){return!!n&&"integerValue"in n}function vd(n){return!!n&&"arrayValue"in n}function sI(n){return!!n&&"nullValue"in n}function oI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function em(n){return(n?.mapValue?.fields||{})[R_]?.stringValue===k_}function Jc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Jc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jc(n.arrayValue.values[t]);return e}return{...n}}function mb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pb}const gb={mapValue:{fields:{[R_]:{stringValue:k_},[uu]:{arrayValue:{}}}}};function CO(n){return"nullValue"in n?Vf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?D_(Aa.empty(),ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?em(n)?gb:{mapValue:{}}:Se(35942,{value:n})}function bO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?D_(Aa.empty(),ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?gb:"mapValue"in n?em(n)?{mapValue:{}}:to:Se(61959,{value:n})}function aI(n,e){const t=po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lI(n,e){const t=po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Jc(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Rn(Jc(this.value))}}function yb(n){const e=[];return So(n.fields,((t,r)=>{const i=new Nt([t]);if(Of(r)){const s=yb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Kn(e)}class Bt{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Bt(e,0,Ne.min(),Ne.min(),Ne.min(),Rn.empty(),0)}static newFoundDocument(e,t,r,i){return new Bt(e,1,t,Ne.min(),r,i,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ne.min(),Ne.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ne.min(),Ne.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class du{constructor(e,t){this.position=e,this.inclusive=t}}function uI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ge.comparator(ge.fromName(a.referenceValue),t.key):r=po(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}class sp{constructor(e,t="asc"){this.field=e,this.dir=t}}function AO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class vb{}class Ye extends vb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xO(e,t,r):t==="array-contains"?new DO(e,r):t==="in"?new Sb(e,r):t==="not-in"?new NO(e,r):t==="array-contains-any"?new VO(e,r):new Ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RO(e,r):new kO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(po(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gt extends vb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gt(e,t)}matches(e){return hu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hu(n){return n.op==="and"}function fv(n){return n.op==="or"}function N_(n){return _b(n)&&hu(n)}function _b(n){for(const e of n.filters)if(e instanceof gt)return!1;return!0}function pv(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+cu(n.value);if(N_(n))return n.filters.map((e=>pv(e))).join(",");{const e=n.filters.map((t=>pv(t))).join(",");return`${n.op}(${e})`}}function wb(n,e){return n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)})(n,e):n instanceof gt?(function(r,i){return i instanceof gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&wb(a,i.filters[u])),!0):!1})(n,e):void Se(19439)}function Eb(n,e){const t=n.filters.concat(e);return gt.create(t,n.op)}function Tb(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${cu(t.value)}`})(n):n instanceof gt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Tb).join(" ,")+"}"})(n):"Filter"}class xO extends Ye{constructor(e,t,r){super(e,t,r),this.key=ge.fromName(r.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class RO extends Ye{constructor(e,t){super(e,"in",t),this.keys=Ib("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kO extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=Ib("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ib(n,e){return(e.arrayValue?.values||[]).map((t=>ge.fromName(t.referenceValue)))}class DO extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vd(t)&&yd(t.arrayValue,this.value)}}class Sb extends Ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yd(this.value.arrayValue,t)}}class NO extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yd(this.value.arrayValue,t)}}class VO extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>yd(this.value.arrayValue,r)))}}class MO{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function mv(n,e=null,t=[],r=[],i=null,s=null,a=null){return new MO(n,e,t,r,i,s,a)}function xa(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>pv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Qp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>cu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>cu(r))).join(",")),e.Te=t}return e.Te}function Nd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cI(n.startAt,e.startAt)&&cI(n.endAt,e.endAt)}function op(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ap(n,e){return n.filters.filter((t=>t instanceof Ye&&t.field.isEqual(e)))}function dI(n,e,t){let r=Vf,i=!0;for(const s of ap(n,e)){let a=Vf,u=!0;switch(s.op){case"<":case"<=":a=CO(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=Vf}aI({value:r,inclusive:i},{value:a,inclusive:u})<0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];aI({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function hI(n,e,t){let r=to,i=!0;for(const s of ap(n,e)){let a=to,u=!0;switch(s.op){case">=":case">":a=bO(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=to}lI({value:r,inclusive:i},{value:a,inclusive:u})>0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];lI({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class tm{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Pb(n,e,t,r,i,s,a,u){return new tm(n,e,t,r,i,s,a,u)}function nm(n){return new tm(n)}function fI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OO(n){return n.collectionGroup!==null}function Zc(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new mt(Nt.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new sp(s,r))})),t.has(Nt.keyField().canonicalString())||e.Ie.push(new sp(Nt.keyField(),r))}return e.Ie}function cr(n){const e=be(n);return e.Ee||(e.Ee=LO(e,Zc(n))),e.Ee}function LO(n,e){if(n.limitType==="F")return mv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new sp(i.field,s)}));const t=n.endAt?new du(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new du(n.startAt.position,n.startAt.inclusive):null;return mv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gv(n,e,t){return new tm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rm(n,e){return Nd(cr(n),cr(e))&&n.limitType===e.limitType}function Cb(n){return`${xa(cr(n))}|lt:${n.limitType}`}function Ul(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Tb(i))).join(", ")}]`),Qp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>cu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>cu(i))).join(",")),`Target(${r})`})(cr(n))}; limitType=${n.limitType})`}function Vd(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Zc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){const h=uI(a,u,d);return a.inclusive?h<=0:h<0})(r.startAt,Zc(r),i)||r.endAt&&!(function(a,u,d){const h=uI(a,u,d);return a.inclusive?h>=0:h>0})(r.endAt,Zc(r),i))})(n,e)}function bb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ab(n){return(e,t)=>{let r=!1;for(const i of Zc(n)){const s=FO(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function FO(n,e,t){const r=n.field.isKeyField()?ge.comparator(e.key,t.key):(function(s,a,u){const d=a.data.field(s),h=u.data.field(s);return d!==null&&h!==null?po(d,h):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:n.dir})}}class ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return lb(this.inner)}size(){return this.innerSize}}const UO=new wt(ge.comparator);function ur(){return UO}const xb=new wt(ge.comparator);function zc(...n){let e=xb;for(const t of n)e=e.insert(t.key,t);return e}function Rb(n){let e=xb;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function mi(){return ed()}function kb(){return ed()}function ed(){return new ls((n=>n.toString()),((n,e)=>n.isEqual(e)))}const jO=new wt(ge.comparator),BO=new mt(ge.comparator);function ze(...n){let e=BO;for(const t of n)e=e.add(t);return e}const $O=new mt(Be);function V_(){return $O}function M_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function Db(n){return{integerValue:""+n}}function zO(n,e){return XC(e)?Db(e):M_(n,e)}class im{constructor(){this._=void 0}}function WO(n,e,t){return n instanceof _d?(function(i,s){const a={fields:{[db]:{stringValue:cb},[fb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&x_(s)&&(s=Zp(s)),s&&(a.fields[hb]=s),{mapValue:a}})(t,e):n instanceof fu?Vb(n,e):n instanceof pu?Mb(n,e):(function(i,s){const a=Nb(i,s),u=pI(a)+pI(i.Ae);return hv(a)&&hv(i.Ae)?Db(u):M_(i.serializer,u)})(n,e)}function HO(n,e,t){return n instanceof fu?Vb(n,e):n instanceof pu?Mb(n,e):t}function Nb(n,e){return n instanceof wd?(function(r){return hv(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class _d extends im{}class fu extends im{constructor(e){super(),this.elements=e}}function Vb(n,e){const t=Ob(e);for(const r of n.elements)t.some((i=>Ii(i,r)))||t.push(r);return{arrayValue:{values:t}}}class pu extends im{constructor(e){super(),this.elements=e}}function Mb(n,e){let t=Ob(e);for(const r of n.elements)t=t.filter((i=>!Ii(i,r)));return{arrayValue:{values:t}}}class wd extends im{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function pI(n){return At(n.integerValue||n.doubleValue)}function Ob(n){return vd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qO{constructor(e,t){this.field=e,this.transform=t}}function GO(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof fu&&i instanceof fu||r instanceof pu&&i instanceof pu?ru(r.elements,i.elements,Ii):r instanceof wd&&i instanceof wd?Ii(r.Ae,i.Ae):r instanceof _d&&i instanceof _d})(n.transform,e.transform)}class KO{constructor(e,t){this.version=e,this.transformResults=t}}class an{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sm{}function Lb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Md(n.key,an.none()):new Ru(n.key,n.data,an.none());{const t=n.data,r=Rn.empty();let i=new mt(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new us(n.key,r,new Kn(i.toArray()),an.none())}}function QO(n,e,t){n instanceof Ru?(function(i,s,a){const u=i.value.clone(),d=gI(i.fieldTransforms,s,a.transformResults);u.setAll(d),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof us?(function(i,s,a){if(!Lf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=gI(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(Fb(i)),d.setAll(u),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function td(n,e,t,r){return n instanceof Ru?(function(s,a,u,d){if(!Lf(s.precondition,a))return u;const h=s.value.clone(),m=yI(s.fieldTransforms,d,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof us?(function(s,a,u,d){if(!Lf(s.precondition,a))return u;const h=yI(s.fieldTransforms,d,a),m=a.data;return m.setAll(Fb(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,u){return Lf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function YO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Nb(r.transform,i||null);s!=null&&(t===null&&(t=Rn.empty()),t.set(r.field,s))}return t||null}function mI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ru(r,i,((s,a)=>GO(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ru extends sm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class us extends sm{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gI(n,e,t){const r=new Map;ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,HO(a,u,t[i]))}return r}function yI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,WO(s,a,e))}return r}class Md extends sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ub extends sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class O_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QO(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=td(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=td(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kb();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const d=Lb(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&ru(this.mutations,e.mutations,((t,r)=>mI(t,r)))&&ru(this.baseMutations,e.baseMutations,((t,r)=>mI(t,r)))}}class L_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return jO})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new L_(e,t,r,i)}}class F_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XO{constructor(e,t){this.count=e,this.unchangedNames=t}}var en,Ze;function JO(n){switch(n){case ie.OK:return Se(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function jb(n){if(n===void 0)return qt("GRPC error has no .code"),ie.UNKNOWN;switch(n){case en.OK:return ie.OK;case en.CANCELLED:return ie.CANCELLED;case en.UNKNOWN:return ie.UNKNOWN;case en.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case en.INTERNAL:return ie.INTERNAL;case en.UNAVAILABLE:return ie.UNAVAILABLE;case en.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case en.NOT_FOUND:return ie.NOT_FOUND;case en.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case en.ABORTED:return ie.ABORTED;case en.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case en.DATA_LOSS:return ie.DATA_LOSS;default:return Se(39323,{code:n})}}(Ze=en||(en={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";function ZO(){return new TextEncoder}const eL=new so([4294967295,4294967295],0);function vI(n){const e=ZO().encode(n),t=new MC;return t.update(e),new Uint8Array(t.digest())}function _I(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new so([t,r],0),new so([i,s],0)]}class U_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(r<0)throw new Wc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=so.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(so.fromNumber(r)));return i.compare(eL)===1&&(i=new so([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vI(e),[r,i]=_I(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new U_(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=vI(e),[r,i]=_I(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Od{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ld.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Od(Ne.min(),i,new wt(Be),ur(),ze())}}class Ld{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ld(r,t,ze(),ze(),ze())}}class Ff{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class Bb{constructor(e,t){this.targetId=e,this.Ce=t}}class $b{constructor(e,t,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class wI{constructor(){this.ve=0,this.Fe=EI(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Se(38017,{changeType:s})}})),new Ld(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=EI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tL{constructor(e){this.Ge=e,this.ze=new Map,this.je=ur(),this.Je=pf(),this.He=pf(),this.Ye=new wt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(op(s))if(r===0){const a=new ge(s.path);this.et(t,a,Bt.newNoDocument(a,Ne.min()))}else ke(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=ts(r).toUint8Array()}catch(d){if(d instanceof ub)return ho("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new U_(a,i,s)}catch(d){return ho(d instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&op(u.target)){const d=new ge(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Bt.newNoDocument(d,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=ze();this.He.forEach(((s,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Od(e,t,this.Ye,this.je,r);return this.je=ur(),this.Je=pf(),this.He=pf(),this.Ye=new wt(Be),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pf(){return new wt(ge.comparator)}function EI(){return new wt(ge.comparator)}const nL={asc:"ASCENDING",desc:"DESCENDING"},rL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iL={and:"AND",or:"OR"};class sL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yv(n,e){return n.useProto3Json||Qp(e)?e:{value:e}}function mu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oL(n,e){return mu(n,e.toTimestamp())}function Fn(n){return ke(!!n,49232),Ne.fromTimestamp((function(t){const r=es(t);return new ft(r.seconds,r.nanos)})(n))}function j_(n,e){return vv(n,e).canonicalString()}function vv(n,e){const t=(function(i){return new lt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Wb(n){const e=lt.fromString(n);return ke(Zb(e),10190,{key:e.toString()}),e}function lp(n,e){return j_(n.databaseId,e.path)}function Ia(n,e){const t=Wb(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(Gb(t))}function Hb(n,e){return j_(n.databaseId,e)}function qb(n){const e=Wb(n);return e.length===4?lt.emptyPath():Gb(e)}function _v(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gb(n){return ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function TI(n,e,t){return{name:lp(n,e),fields:t.value.mapValue.fields}}function aL(n,e,t){const r=Ia(n,e.name),i=Fn(e.updateTime),s=e.createTime?Fn(e.createTime):Ne.min(),a=new Rn({mapValue:{fields:e.fields}}),u=Bt.newFoundDocument(r,i,s,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function lL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Se(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(ke(m===void 0||typeof m=="string",58123),Xt.fromBase64String(m||"")):(ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Xt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const m=h.code===void 0?ie.UNKNOWN:jb(h.code);return new me(m,h.message||"")})(a);t=new $b(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ia(n,r.document.name),s=Fn(r.document.updateTime),a=r.document.createTime?Fn(r.document.createTime):Ne.min(),u=new Rn({mapValue:{fields:r.document.fields}}),d=Bt.newFoundDocument(i,s,a,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Ff(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ia(n,r.document),s=r.readTime?Fn(r.readTime):Ne.min(),a=Bt.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Ff([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ia(n,r.document),s=r.removedTargetIds||[];t=new Ff([],s,i,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new XO(i,s),u=r.targetId;t=new Bb(u,a)}}return t}function up(n,e){let t;if(e instanceof Ru)t={update:TI(n,e.key,e.value)};else if(e instanceof Md)t={delete:lp(n,e.key)};else if(e instanceof us)t={update:TI(n,e.key,e.data),updateMask:pL(e.fieldMask)};else{if(!(e instanceof Ub))return Se(16599,{Vt:e.type});t={verify:lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof _d)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof fu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof pu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Se(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:oL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Se(27497)})(n,e.precondition)),t}function wv(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?an.updateTime(Fn(s.updateTime)):s.exists!==void 0?an.exists(s.exists):an.none()})(e.currentDocument):an.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,u){let d=null;if("setToServerValue"in u)ke(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new _d;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];d=new fu(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];d=new pu(m)}else"increment"in u?d=new wd(a,u.increment):Se(16584,{proto:u});const h=Nt.fromServerFormat(u.fieldPath);return new qO(h,d)})(n,i))):[];if(e.update){e.update.name;const i=Ia(n,e.update.name),s=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new Kn(h.map((m=>Nt.fromServerFormat(m))))})(e.updateMask);return new us(i,s,a,t,r)}return new Ru(i,s,t,r)}if(e.delete){const i=Ia(n,e.delete);return new Md(i,t)}if(e.verify){const i=Ia(n,e.verify);return new Ub(i,t)}return Se(1463,{proto:e})}function uL(n,e){return n&&n.length>0?(ke(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Fn(i.updateTime):Fn(s);return a.isEqual(Ne.min())&&(a=Fn(s)),new KO(a,i.transformResults||[])})(t,e)))):[]}function Kb(n,e){return{documents:[Hb(n,e.path)]}}function Qb(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hb(n,i);const s=(function(h){if(h.length!==0)return Jb(gt.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:jl(v.field),direction:dL(v.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=yv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function Yb(n){let e=qb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ke(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const v=Xb(g);return v instanceof gt&&N_(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((v=>(function(A){return new sp(Bl(A.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,Qp(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(g){const v=!!g.before,T=g.values||[];return new du(T,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const v=!g.before,T=g.values||[];return new du(T,v)})(t.endAt)),Pb(e,i,a,s,u,"F",d,h)}function cL(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Xb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bl(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Bl(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bl(t.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bl(t.unaryFilter.field);return Ye.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(Bl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gt.create(t.compositeFilter.filters.map((r=>Xb(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function dL(n){return nL[n]}function hL(n){return rL[n]}function fL(n){return iL[n]}function jl(n){return{fieldPath:n.canonicalString()}}function Bl(n){return Nt.fromServerFormat(n.fieldPath)}function Jb(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(oI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NAN"}};if(sI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NAN"}};if(sI(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(t.field),op:hL(t.op),value:t.value}}})(n):n instanceof gt?(function(t){const r=t.getFilters().map((i=>Jb(i)));return r.length===1?r[0]:{compositeFilter:{op:fL(t.op),filters:r}}})(n):Se(54877,{filter:n})}function pL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Zb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Gi{constructor(e,t,r,i,s=Ne.min(),a=Ne.min(),u=Xt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class eA{constructor(e){this.yt=e}}function mL(n,e){let t;if(e.document)t=aL(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ge.fromSegments(e.noDocument.path),i=ka(e.noDocument.readTime);t=Bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const r=ge.fromSegments(e.unknownDocument.path),i=ka(e.unknownDocument.version);t=Bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new ft(i[0],i[1]);return Ne.fromTimestamp(s)})(e.readTime)),t}function II(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:lp(s,a.key),fields:a.data.value.mapValue.fields,updateTime:mu(s,a.version.toTimestamp()),createTime:mu(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ra(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ra(e.version)}}return r}function cp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ra(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(n){const e=new ft(n.seconds,n.nanoseconds);return Ne.fromTimestamp(e)}function ma(n,e){const t=(e.baseMutations||[]).map((s=>wv(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>wv(n.yt,s))),i=ft.fromMillis(e.localWriteTimeMs);return new O_(e.batchId,i,t,r)}function Hc(n){const e=ka(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ka(n.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return ke(a===1,1966,{count:a}),cr(nm(qb(s.documents[0])))})(n.query):(function(s){return cr(Yb(s))})(n.query),new Gi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Xt.fromBase64String(n.resumeToken))}function tA(n,e){const t=Ra(e.snapshotVersion),r=Ra(e.lastLimboFreeSnapshotVersion);let i;i=op(e.target)?Kb(n.yt,e.target):Qb(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xa(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nA(n){const e=Yb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gv(e,e.limit,"L"):e}function py(n,e){return new F_(e.largestBatchId,wv(n.yt,e.overlayMutation))}function SI(n,e){const t=e.path.lastSegment();return[n,kn(e.path.popLast()),t]}function PI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ra(r.readTime),documentKey:kn(r.documentKey.path),largestBatchId:r.largestBatchId}}class gL{getBundleMetadata(e,t){return CI(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:ka(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return CI(e).put((function(i){return{bundleId:i.id,createTime:Ra(Fn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return bI(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:nA(s.bundledQuery),readTime:ka(s.readTime)}})(r)}))}saveNamedQuery(e,t){return bI(e).put((function(i){return{name:i.name,readTime:Ra(Fn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function CI(n){return un(n,Yp)}function bI(n){return un(n,Xp)}class om{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new om(e,r)}getOverlay(e,t){return bc(e).get(SI(this.userId,t)).next((r=>r?py(this.serializer,r):null))}getOverlays(e,t){const r=mi();return q.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const u=new F_(t,a);i.push(this.St(e,u))})),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(kn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(bc(e).Z(uv,u))})),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=mi(),s=kn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return bc(e).J(uv,a).next((u=>{for(const d of u){const h=py(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=mi();let a;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bc(e).ee({index:rb,range:u},((d,h,m)=>{const g=py(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):m.done()})).next((()=>s))}St(e,t){return bc(e).put((function(i,s,a){const[u,d,h]=SI(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:up(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function bc(n){return un(n,Jp)}class yL{bt(e){return un(e,b_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Xt.fromUint8Array(r):Xt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ga{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),hd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=es(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ts(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?mb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):em(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Se(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=uu,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(At(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ge.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ga.Kt=new ga;const Dl=255;function vL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function AI(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=vL(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class _L{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=AI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=AI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Dl),this.sn(255)}_n(){this.an(Dl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Dl?(this.sn(Dl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Dl?(this.an(Dl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wL{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class EL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ac{constructor(){this.cn=new _L,this.ln=new wL(this.cn),this.hn=new EL(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ya{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ya(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Uf(this.En),directionalValue:Uf(this.dn),orderedDocumentKey:Uf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Bs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=xI(n.En,e.En),t!==0?t:(t=xI(n.dn,e.dn),t!==0?t:ge.comparator(n.In,e.In)))}function xI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Uf(n){return AC()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function RI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class kI{constructor(e){this.mn=new mt(((t,r)=>Nt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=ov(e);if(t!==void 0&&!this.wn(t))return!1;const r=la(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const d=r[s];if(!this.Sn(u,d)||!this.bn(this.fn[a++],d))return!1}++s}for(;s<r.length;++s){const u=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new mt(Nt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new kf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new kf(r.field,r.dir==="asc"?0:1)));return new ep(ep.UNKNOWN_ID,this.collectionId,t,dd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function rA(n){if(ke(n instanceof Ye||n instanceof gt,20012),n instanceof Ye){if(n instanceof Sb){const t=n.value.arrayValue?.values?.map((r=>Ye.create(n.field,"==",r)))||[];return gt.create(t,"or")}return n}const e=n.filters.map((t=>rA(t)));return gt.create(e,n.op)}function TL(n){if(n.getFilters().length===0)return[];const e=Iv(rA(n));return ke(iA(e),7391),Ev(e)||Tv(e)?[e]:e.getFilters()}function Ev(n){return n instanceof Ye}function Tv(n){return n instanceof gt&&N_(n)}function iA(n){return Ev(n)||Tv(n)||(function(t){if(t instanceof gt&&fv(t)){for(const r of t.getFilters())if(!Ev(r)&&!Tv(r))return!1;return!0}return!1})(n)}function Iv(n){if(ke(n instanceof Ye||n instanceof gt,34018),n instanceof Ye)return n;if(n.filters.length===1)return Iv(n.filters[0]);const e=n.filters.map((r=>Iv(r)));let t=gt.create(e,n.op);return t=dp(t),iA(t)?t:(ke(t instanceof gt,64498),ke(hu(t),40251),ke(t.filters.length>1,57927),t.filters.reduce(((r,i)=>B_(r,i))))}function B_(n,e){let t;return ke(n instanceof Ye||n instanceof gt,38388),ke(e instanceof Ye||e instanceof gt,25473),t=n instanceof Ye?e instanceof Ye?(function(i,s){return gt.create([i,s],"and")})(n,e):DI(n,e):e instanceof Ye?DI(e,n):(function(i,s){if(ke(i.filters.length>0&&s.filters.length>0,48005),hu(i)&&hu(s))return Eb(i,s.getFilters());const a=fv(i)?i:s,u=fv(i)?s:i,d=a.filters.map((h=>B_(h,u)));return gt.create(d,"or")})(n,e),dp(t)}function DI(n,e){if(hu(e))return Eb(e,n.getFilters());{const t=e.filters.map((r=>B_(n,r)));return gt.create(t,"or")}}function dp(n){if(ke(n instanceof Ye||n instanceof gt,11850),n instanceof Ye)return n;const e=n.getFilters();if(e.length===1)return dp(e[0]);if(_b(n))return n;const t=e.map((i=>dp(i))),r=[];return t.forEach((i=>{i instanceof Ye?r.push(i):i instanceof gt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:gt.create(r,n.op)}class IL{constructor(){this.Cn=new $_}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(dr.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class $_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(lt.comparator)).toArray()}}const NI="IndexedDbIndexManager",mf=new Uint8Array(0);class SL{constructor(e,t){this.databaseId=t,this.vn=new $_,this.Fn=new ls((r=>xa(r)),((r,i)=>Nd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:kn(i)};return VI(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[zC(t),""],!1,!0);return VI(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(pi(a.parent))}return r}))}addFieldIndex(e,t){const r=xc(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Vl(e);return s.next((u=>{a.put(PI(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=xc(e),i=Vl(e),s=Nl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=xc(e),r=Nl(e),i=Vl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return q.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new kI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Nl(e);let i=!0;const s=new Map;return q.forEach(this.Mn(t),(a=>this.xn(e,a).next((u=>{i&&(i=!!u),s.set(a,u)})))).next((()=>{if(i){let a=ze();const u=[];return q.forEach(s,((d,h)=>{le(NI,`Using index ${(function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(d)} to execute ${xa(t)}`);const m=(function(D,B){const Z=ov(B);if(Z===void 0)return null;for(const re of ap(D,Z.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null})(h,d),g=(function(D,B){const Z=new Map;for(const re of la(B))for(const C of ap(D,re.fieldPath))switch(C.op){case"==":case"in":Z.set(re.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return Z.set(re.fieldPath.canonicalString(),C.value),Array.from(Z.values())}return null})(h,d),v=(function(D,B){const Z=[];let re=!0;for(const C of la(B)){const I=C.kind===0?dI(D,C.fieldPath,D.startAt):hI(D,C.fieldPath,D.startAt);Z.push(I.value),re&&(re=I.inclusive)}return new du(Z,re)})(h,d),T=(function(D,B){const Z=[];let re=!0;for(const C of la(B)){const I=C.kind===0?hI(D,C.fieldPath,D.endAt):dI(D,C.fieldPath,D.endAt);Z.push(I.value),re&&(re=I.inclusive)}return new du(Z,re)})(h,d),A=this.On(d,h,v),x=this.On(d,h,T),P=this.Nn(d,h,g),j=this.Bn(d.indexId,m,A,v.inclusive,x,T.inclusive,P);return q.forEach(j,(M=>r.Y(M,t.limit).next((D=>{D.forEach((B=>{const Z=ge.fromSegments(B.documentKey);a.has(Z)||(a=a.add(Z),u.push(Z))}))}))))})).next((()=>u))}return q.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=TL(gt.create(e.filters,"and")).map((r=>mv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,u){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),h=d/(t!=null?t.length:1),m=[];for(let g=0;g<d;++g){const v=t?this.Ln(t[g/h]):mf,T=this.kn(e,v,r[g%h],i),A=this.qn(e,v,s[g%h],a),x=u.map((P=>this.kn(e,v,P,!0)));m.push(...this.createRange(T,A,x))}return m}kn(e,t,r,i){const s=new ya(e,ge.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new ya(e,ge.empty(),t,r);return i?s.An():s}xn(e,t){const r=new kI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const u of s)r.yn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return q.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(d){let h=new mt(Nt.comparator),m=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:h=h.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Ac;for(const i of la(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);ga.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Ac;return ga.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Ac;return ga.Kt.Dt(D_(this.databaseId,t),r.Pn((function(s){const a=la(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Ac);let s=0;for(const a of la(e)){const u=r[s++];for(const d of i)if(this.Un(t,a.fieldPath)&&vd(u))i=this.Kn(i,a,u);else{const h=d.Pn(a.kind);ga.Kt.Dt(u,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const u of i){const d=new Ac;d.seed(u.un()),ga.Kt.Dt(a,d.Pn(t.kind)),s.push(d)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Ye&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=xc(e),i=Vl(e);return(t?r.J(lv,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return q.forEach(s,(u=>i.get([u.indexId,this.uid]).next((d=>{a.push((function(m,g){const v=g?new dd(g.sequenceNumber,new dr(ka(g.readTime),new ge(pi(g.documentKey)),g.largestBatchId)):dd.empty(),T=m.fields.map((([A,x])=>new kf(Nt.fromServerFormat(A),x)));return new ep(m.indexId,m.collectionGroup,T,v)})(u,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Be(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=xc(e),s=Vl(e);return this.Gn(e).next((a=>i.J(lv,IDBKeyRange.bound(t,t)).next((u=>q.forEach(u,(d=>s.put(PI(d.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?q.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),q.forEach(u,(d=>this.zn(e,i,d).next((h=>{const m=this.jn(s,d);return h.isEqual(m)?q.resolve():this.Jn(e,s,d,h,m)})))))))}))}Hn(e,t,r,i){return Nl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Nl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Nl(e);let s=new mt(Bs);return i.ee({index:nb,range:IDBKeyRange.only([r.indexId,this.uid,Uf(this.$n(r,t))])},((a,u)=>{s=s.add(new ya(r.indexId,t,RI(u.arrayValue),RI(u.directionalValue)))})).next((()=>s))}jn(e,t){let r=new mt(Bs);const i=this.Qn(t,e);if(i==null)return r;const s=ov(t);if(s!=null){const a=e.data.field(s.fieldPath);if(vd(a))for(const u of a.arrayValue.values||[])r=r.add(new ya(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new ya(t.indexId,e.key,mf,i));return r}Jn(e,t,r,i,s){le(NI,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,m,g,v){const T=d.getIterator(),A=h.getIterator();let x=kl(T),P=kl(A);for(;x||P;){let j=!1,M=!1;if(x&&P){const D=m(x,P);D<0?M=!0:D>0&&(j=!0)}else x!=null?M=!0:j=!0;j?(g(P),P=kl(A)):M?(v(x),x=kl(T)):(x=kl(T),P=kl(A))}})(i,s,Bs,(u=>{a.push(this.Hn(e,t,r,u))}),(u=>{a.push(this.Yn(e,t,r,u))})),q.waitFor(a)}Gn(e){let t=1;return Vl(e).ee({index:tb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,u)=>Bs(a,u))).filter(((a,u,d)=>!u||Bs(a,d[u-1])!==0));const i=[];i.push(e);for(const a of r){const u=Bs(a,e),d=Bs(a,t);if(u===0)i[0]=e.An();else if(u>0&&d<0)i.push(a),i.push(a.An());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const u=i[a].Vn(this.uid,mf,ge.empty()),d=i[a+1].Vn(this.uid,mf,ge.empty());s.push(IDBKeyRange.bound(u,d))}return s}Zn(e,t){return Bs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(MI)}getMinOffset(e,t){return q.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Se(44426))))).next(MI)}}function VI(n){return un(n,md)}function Nl(n){return un(n,Xc)}function xc(n){return un(n,C_)}function Vl(n){return un(n,Yc)}function MI(n){ke(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;I_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new dr(e.readTime,e.documentKey,t)}const OI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sA=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function oA(n,e,t){const r=n.store(Fr),i=n.store(su),s=[],a=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:a},((m,g,v)=>(u++,v.delete())));s.push(d.next((()=>{ke(u===1,47070,{batchId:t.batchId})})));const h=[];for(const m of t.mutations){const g=JC(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return q.waitFor(s).next((()=>h))}function hp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Se(14731);e=n.noDocument}return JSON.stringify(e).length}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(sA,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class am{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){ke(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new am(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $s(e).ee({index:va,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=$l(e),a=$s(e);return a.add({}).next((u=>{ke(typeof u=="number",49019);const d=new O_(u,t,r,i),h=(function(T,A,x){const P=x.baseMutations.map((M=>up(T.yt,M))),j=x.mutations.map((M=>up(T.yt,M)));return{userId:A,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:P,mutations:j}})(this.serializer,this.userId,d),m=[];let g=new mt(((v,T)=>Be(v.canonicalString(),T.canonicalString())));for(const v of i){const T=JC(this.userId,v.key.path,u);g=g.add(v.key.path.popLast()),m.push(a.put(h)),m.push(s.put(T,eO))}return g.forEach((v=>{m.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),q.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,t){return $s(e).get(t).next((r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ma(this.serializer,r)):null))}er(e,t){return this.Xn[t]?q.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $s(e).ee({index:va,range:i},((a,u,d)=>{u.userId===this.userId&&(ke(u.batchId>=r,47524,{tr:r}),s=ma(this.serializer,u)),d.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ea;return $s(e).ee({index:va,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ea],[this.userId,Number.POSITIVE_INFINITY]);return $s(e).J(va,t).next((r=>r.map((i=>ma(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Df(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return $l(e).ee({range:i},((a,u,d)=>{const[h,m,g]=a,v=pi(m);if(h===this.userId&&t.path.isEqual(v))return $s(e).get(g).next((T=>{if(!T)throw Se(61480,{nr:a,batchId:g});ke(T.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:T.userId,batchId:g}),s.push(ma(this.serializer,T))}));d.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Be);const i=[];return t.forEach((s=>{const a=Df(this.userId,s.path),u=IDBKeyRange.lowerBound(a),d=$l(e).ee({range:u},((h,m,g)=>{const[v,T,A]=h,x=pi(T);v===this.userId&&s.path.isEqual(x)?r=r.add(A):g.done()}));i.push(d)})),q.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Df(this.userId,r),a=IDBKeyRange.lowerBound(s);let u=new mt(Be);return $l(e).ee({range:a},((d,h,m)=>{const[g,v,T]=d,A=pi(v);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(u=u.add(T)):m.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push($s(e).get(s).next((a=>{if(a===null)throw Se(35274,{batchId:s});ke(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ma(this.serializer,a))})))})),q.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return oA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),q.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return $l(e).ee({range:r},((s,a,u)=>{if(s[0]===this.userId){const d=pi(s[1]);i.push(d)}else u.done()})).next((()=>{ke(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return aA(e,this.userId,t)}_r(e){return lA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ea,lastStreamToken:""}))}}function aA(n,e,t){const r=Df(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return $l(n).ee({range:s,X:!0},((u,d,h)=>{const[m,g,v]=u;m===e&&g===i&&(a=!0),h.done()})).next((()=>a))}function $s(n){return un(n,Fr)}function $l(n){return un(n,su)}function lA(n){return un(n,fd)}class Da{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Da(0)}static cr(){return new Da(-1)}}class PL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Da(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ne.fromTimestamp(new ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ml(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Ml(e).ee(((a,u)=>{const d=Hc(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))})).next((()=>q.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Ml(e).ee(((r,i)=>{const s=Hc(i);t(s)}))}lr(e){return LI(e).get(rp).next((t=>(ke(t!==null,2888),t)))}hr(e,t){return LI(e).put(rp,t)}Pr(e,t){return Ml(e).put(tA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=xa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ml(e).ee({range:i,index:eb},((a,u,d)=>{const h=Hc(u);Nd(t,h.target)&&(s=h,d.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Qs(e);return t.forEach((a=>{const u=kn(a.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,a))})),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qs(e);return q.forEach(t,(s=>{const a=kn(s.path);return q.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Qs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qs(e);let s=ze();return i.ee({range:r,X:!0},((a,u,d)=>{const h=pi(a[1]),m=new ge(h);s=s.add(m)})).next((()=>s))}containsKey(e,t){const r=kn(t.path),i=IDBKeyRange.bound([r],[zC(r)],!1,!0);let s=0;return Qs(e).ee({index:P_,X:!0,range:i},(([a,u],d,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}At(e,t){return Ml(e).get(t).next((r=>r?Hc(r):null))}}function Ml(n){return un(n,ou)}function LI(n){return un(n,Ta)}function Qs(n){return un(n,au)}const FI="LruGarbageCollector",CL=1048576;function UI([n,e],[t,r]){const i=Be(n,t);return i===0?Be(e,r):i}class bL{constructor(e){this.Ir=e,this.buffer=new mt(UI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();UI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(FI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Io(t)?le(FI,"Ignoring IndexedDB error during garbage collection: ",t):await To(t)}await this.Vr(3e5)}))}}class AL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Gn.ce);const r=new bL(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(OI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,u,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),Fl()<=Ke.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function cA(n,e){return new AL(n,e)}class xL{constructor(e,t){this.db=e,this.garbageCollector=cA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return gf(e,r)}removeReference(e,t,r){return gf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gf(e,t)}br(e,t){return(function(i,s){let a=!1;return lA(i).te((u=>aA(i,u,s).next((d=>(d&&(a=!0),q.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,u)=>{if(u<=t){const d=this.br(e,a).next((h=>{if(!h)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Ne.min()),Qs(e).delete((function(g){return[0,kn(g.path)]})(a)))))}));i.push(d)}})).next((()=>q.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gf(e,t)}Sr(e,t){const r=Qs(e);let i,s=Gn.ce;return r.ee({index:P_},(([a,u],{path:d,sequenceNumber:h})=>{a===0?(s!==Gn.ce&&t(new ge(pi(i)),s),s=h,i=d):s=Gn.ce})).next((()=>{s!==Gn.ce&&t(new ge(pi(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gf(n,e){return Qs(n).put((function(r,i){return{targetId:0,path:kn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class dA{constructor(){this.changes=new ls((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ia(e).put(r)}removeEntry(e,t,r){return ia(e).delete((function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],cp(a),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Bt.newInvalidDocument(t);return ia(e).ee({index:Nf,range:IDBKeyRange.only(Rc(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Bt.newInvalidDocument(t)};return ia(e).ee({index:Nf,range:IDBKeyRange.only(Rc(t))},((i,s)=>{r={document:this.Cr(t,s),size:hp(s)}})).next((()=>r))}getEntries(e,t){let r=ur();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=ur(),i=new wt(ge.comparator);return this.Fr(e,t,((s,a)=>{const u=this.Cr(s,a);r=r.insert(s,u),i=i.insert(s,hp(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return q.resolve();let i=new mt($I);t.forEach((d=>i=i.add(d)));const s=IDBKeyRange.bound(Rc(i.first()),Rc(i.last())),a=i.getIterator();let u=a.getNext();return ia(e).ee({index:Nf,range:s},((d,h,m)=>{const g=ge.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&$I(u,g)<0;)r(u,null),u=a.getNext();u&&u.isEqual(g)&&(r(u,h),u=a.hasNext()?a.getNext():null),u?m.j(Rc(u)):m.done()})).next((()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),cp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ia(e).J(IDBKeyRange.bound(u,d,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let m=ur();for(const g of h){const v=this.Cr(ge.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Vd(t,v)||i.has(v.key))&&(m=m.insert(v.key,v))}return m}))}getAllFromCollectionGroup(e,t,r,i){let s=ur();const a=BI(t,r),u=BI(t,dr.max());return ia(e).ee({index:ZC,range:IDBKeyRange.bound(a,u,!0)},((d,h,m)=>{const g=this.Cr(ge.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()})).next((()=>s))}newChangeBuffer(e){return new kL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return jI(e).get(av).next((t=>(ke(!!t,20021),t)))}Dr(e,t){return jI(e).put(av,t)}Cr(e,t){if(t){const r=mL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return Bt.newInvalidDocument(e)}}function hA(n){return new RL(n)}class kL extends dA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ls((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new mt(((s,a)=>Be(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),a.isValidDocument()){const d=II(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=hp(d);r+=h-u.size,t.push(this.Nr.addEntry(e,s,d))}else if(r-=u.size,this.trackRemovals){const d=II(this.Nr.serializer,a.convertToNoDocument(Ne.min()));t.push(this.Nr.addEntry(e,s,d))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function jI(n){return un(n,pd)}function ia(n){return un(n,np)}function Rc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BI(n,e){const t=e.documentKey.path.toArray();return[n,cp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $I(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Be(t[s],r[s]),i)return i;return i=Be(t.length,r.length),i||(i=Be(t[t.length-2],r[r.length-2]),i||Be(t[t.length-1],r[r.length-1]))}class DL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&td(r.mutation,i,Kn.empty(),ft.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const i=mi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=zc();return s.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=mi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=ur();const a=ed(),u=(function(){return ed()})();return t.forEach(((d,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof us)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),td(m.mutation,h,m.mutation.getFieldMask(),ft.now())):a.set(h.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>u.set(h,new DL(m,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=ed();let i=new wt(((a,u)=>a-u)),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||Kn.empty();m=u.applyToLocalView(h,m),r.set(d,m);const g=(i.get(u.batchId)||ze()).add(d);i=i.insert(u.batchId,g)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,g=kb();m.forEach((v=>{if(!s.has(v)){const T=Lb(t.get(v),r.get(v));T!==null&&g.set(v,T),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return q.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(mi());let u=iu,d=s;return a.next((h=>q.forEach(h,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?q.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,ze()))).next((m=>({batchId:u,changes:Rb(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((r=>{let i=zc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=zc();return this.indexManager.getCollectionParents(e,s).next((u=>q.forEach(u,(d=>{const h=(function(g,v){return new tm(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{a=a.insert(g,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((d,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Bt.newInvalidDocument(m)))}));let u=zc();return a.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&td(m.mutation,h,Kn.empty(),ft.now()),Vd(t,h)&&(u=u.insert(d,h))})),u}))}}class NL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:nA(i.bundledQuery),readTime:Fn(i.readTime)}})(t)),q.resolve()}}class VL{constructor(){this.overlays=new wt(ge.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mi();return q.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=mi(),s=t.length+1,a=new ge(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new wt(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=mi(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=mi(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return q.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new F_(t,r));let s=this.qr.get(t);s===void 0&&(s=ze(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class ML{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class z_{constructor(){this.Qr=new mt(pn.$r),this.Ur=new mt(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new pn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ge(new lt([])),r=new pn(t,e),i=new pn(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new lt([])),r=new pn(t,e),i=new pn(t,e+1);let s=ze();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}class OL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(pn.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new O_(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Zr=this.Zr.add(new pn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Ea:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),i=new pn(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const u=this.Xr(a.Yr);s.push(u)})),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Be);return t.forEach((i=>{const s=new pn(i,0),a=new pn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(u=>{r=r.add(u.Yr)}))})),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ge.isDocumentKey(s)||(s=s.child(""));const a=new pn(new ge(s),0);let u=new mt(Be);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Yr)),!0)}),a),q.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(t.mutations,(i=>{const s=new pn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new pn(t,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LL{constructor(e){this.ri=e,this.docs=(function(){return new wt(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let r=ur();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bt.newInvalidDocument(i))})),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ur();const a=t.path,u=new ge(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||I_(GC(m),r)<=0||(i.has(m.key)||Vd(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Se(9500)}ii(e,t){return q.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new FL(this)}getSize(e){return q.resolve(this.size)}}class FL extends dA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class UL{constructor(e){this.persistence=e,this.si=new ls((t=>xa(t)),Nd),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new z_,this.targetCount=0,this.ai=Da.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Da(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),q.waitFor(s).next((()=>i))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}}class W_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gn(0),this.li=!1,this.li=!0,this.hi=new ML,this.referenceDelegate=e(this),this.Pi=new UL(this),this.indexManager=new IL,this.remoteDocumentCache=(function(i){return new LL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new eA(t),this.Ii=new NL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new OL(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const i=new jL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class jL extends QC{constructor(e){super(),this.currentSequenceNumber=e}}class lm{constructor(e){this.persistence=e,this.Ri=new z_,this.Vi=null}static mi(e){return new lm(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(r=>{const i=ge.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class fp{constructor(e,t){this.persistence=e,this.pi=new ls((r=>kn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=cA(this,t)}static mi(e,t){return new fp(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?q.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((u=>{u||(r++,s.removeEntry(a,Ne.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mf(e.data.value)),t}br(e,t,r){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class BL{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Kp("createOrUpgrade",t);r<1&&i>=1&&((function(d){d.createObjectStore(Dd)})(e),(function(d){d.createObjectStore(fd,{keyPath:ZM}),d.createObjectStore(Fr,{keyPath:ZT,autoIncrement:!0}).createIndex(va,eI,{unique:!0}),d.createObjectStore(su)})(e),zI(e),(function(d){d.createObjectStore(ua)})(e));let a=q.resolve();return r<3&&i>=3&&(r!==0&&((function(d){d.deleteObjectStore(au),d.deleteObjectStore(ou),d.deleteObjectStore(Ta)})(e),zI(e)),a=a.next((()=>(function(d){const h=d.store(Ta),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return h.put(rp,m)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(d,h){return h.store(Fr).J().next((g=>{d.deleteObjectStore(Fr),d.createObjectStore(Fr,{keyPath:ZT,autoIncrement:!0}).createIndex(va,eI,{unique:!0});const v=h.store(Fr),T=g.map((A=>v.put(A)));return q.waitFor(T)}))})(e,s)))),a=a.next((()=>{(function(d){d.createObjectStore(lu,{keyPath:lO})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(d){d.createObjectStore(pd)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(Yp,{keyPath:uO})})(e),(function(d){d.createObjectStore(Xp,{keyPath:cO})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore(Jp,{keyPath:yO});h.createIndex(uv,vO,{unique:!1}),h.createIndex(rb,_O,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(np,{keyPath:tO});h.createIndex(Nf,nO),h.createIndex(ZC,rO)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(ua)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(d){d.createObjectStore(C_,{keyPath:dO,autoIncrement:!0}).createIndex(lv,hO,{unique:!1}),d.createObjectStore(Yc,{keyPath:fO}).createIndex(tb,pO,{unique:!1}),d.createObjectStore(Xc,{keyPath:mO}).createIndex(nb,gO,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(Yc).clear()})).next((()=>{t.objectStore(Xc).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(b_,{keyPath:wO})})(e)}))),r<18&&i>=18&&AC()&&(a=a.next((()=>{t.objectStore(Yc).clear()})).next((()=>{t.objectStore(Xc).clear()}))),a}wi(e){let t=0;return e.store(ua).ee(((r,i)=>{t+=hp(i)})).next((()=>{const r={byteSize:t};return e.store(pd).put(av,r)}))}yi(e){const t=e.store(fd),r=e.store(Fr);return t.J().next((i=>q.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Ea],[s.userId,s.lastAcknowledgedBatchId]);return r.J(va,a).next((u=>q.forEach(u,(d=>{ke(d.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const h=ma(this.serializer,d);return oA(e,s.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(au),r=e.store(ua);return e.store(Ta).get(rp).next((i=>{const s=[];return r.ee(((a,u)=>{const d=new lt(a),h=(function(g){return[0,kn(g)]})(d);s.push(t.get(h).next((m=>m?q.resolve():(g=>t.put({targetId:0,path:kn(g),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>q.waitFor(s)))}))}bi(e,t){e.createObjectStore(md,{keyPath:aO});const r=t.store(md),i=new $_,s=a=>{if(i.add(a)){const u=a.lastSegment(),d=a.popLast();return r.put({collectionId:u,parent:kn(d)})}};return t.store(ua).ee({X:!0},((a,u)=>{const d=new lt(a);return s(d.popLast())})).next((()=>t.store(su).ee({X:!0},(([a,u,d],h)=>{const m=pi(u);return s(m.popLast())}))))}Di(e){const t=e.store(ou);return t.ee(((r,i)=>{const s=Hc(i),a=tA(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(ua),i=[];return r.ee(((s,a)=>{const u=t.store(np),d=(function(g){return g.document?new ge(lt.fromString(g.document.name).popFirst(5)):g.noDocument?ge.fromSegments(g.noDocument.path):g.unknownDocument?ge.fromSegments(g.unknownDocument.path):Se(36783)})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(h))})).next((()=>q.waitFor(i)))}Fi(e,t){const r=t.store(Fr),i=hA(this.serializer),s=new W_(lm.mi,this.serializer.yt);return r.J().next((a=>{const u=new Map;return a.forEach((d=>{let h=u.get(d.userId)??ze();ma(this.serializer,d).keys().forEach((m=>h=h.add(m))),u.set(d.userId,h)})),q.forEach(u,((d,h)=>{const m=new mn(h),g=om.wt(this.serializer,m),v=s.getIndexManager(m),T=am.wt(m,this.serializer,v,s.referenceDelegate);return new fA(i,T,g,v).recalculateAndSaveOverlaysForDocumentKeys(new cv(t,Gn.ce),d).next()}))}))}}function zI(n){n.createObjectStore(au,{keyPath:sO}).createIndex(P_,oO,{unique:!0}),n.createObjectStore(ou,{keyPath:"targetId"}).createIndex(eb,iO,{unique:!0}),n.createObjectStore(Ta)}const zs="IndexedDbPersistence",my=18e5,gy=5e3,yy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$L="main";class H_{constructor(e,t,r,i,s,a,u,d,h,m,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=u,this.xi=h,this.Oi=m,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!H_.v())throw new me(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xL(this,i),this.$i=t+$L,this.serializer=new eA(d),this.Ui=new oo(this.$i,this.Ni,new BL(this.serializer)),this.hi=new yL,this.Pi=new PL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hA(this.serializer),this.Ii=new gL,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&qt(zs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new me(ie.FAILED_PRECONDITION,yy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Gn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Io(e))return le(zs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(zs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return kc(e).get(Rl).next((t=>q.resolve(this.es(t))))}ts(e){return yf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,my)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=un(t,lu);return r.J().next((i=>{const s=this.ss(i,my),a=i.filter((u=>s.indexOf(u)===-1));return q.forEach(a,(u=>r.delete(u.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?q.resolve(!0):kc(e).get(Rl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,gy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new me(ie.FAILED_PRECONDITION,yy);return!1}}return!(!this.networkEnabled||!this.inForeground)||yf(e).J().next((r=>this.ss(r,gy).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||a&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(zs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Dd,lu],(e=>{const t=new cv(e,Gn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>yf(e).J().next((t=>this.ss(t,my).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return am.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SL(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return om.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){le(zs,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(d){return d===18?IO:d===17?ab:d===16?TO:d===15?A_:d===14?ob:d===13?sb:d===12?EO:d===11?ib:void Se(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(u=>(a=new cv(u,this.ci?this.ci.next():Gn.ce),t==="readwrite-primary"?this.Hi(a).next((d=>!!d||this.Yi(a))).next((d=>{if(!d)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new me(ie.FAILED_PRECONDITION,KC);return r(a)})).next((d=>this.Xi(a).next((()=>d)))):this.Is(a).next((()=>r(a)))))).then((u=>(a.raiseOnCommittedEvent(),u)))}Is(e){return kc(e).get(Rl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,gy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new me(ie.FAILED_PRECONDITION,yy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kc(e).put(Rl,t)}static v(){return oo.v()}Zi(e){const t=kc(e);return t.get(Rl).next((r=>this.es(r)?(le(zs,"Releasing primary lease."),t.delete(Rl)):q.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(qt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;bC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(zs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return qt(zs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kc(n){return un(n,Dd)}function yf(n){return un(n,lu)}function pA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class q_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new q_(e,t.fromCache,r,i)}}class zL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bC()?8:YC(ln())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new zL;return this.Ss(e,t,a).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Fl()<=Ke.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Ul(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Fl()<=Ke.DEBUG&&le("QueryEngine","Query:",Ul(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Fl()<=Ke.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Ul(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):q.resolve())}ys(e,t){if(fI(t))return q.resolve(null);let r=cr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=gv(t,null,"F"),r=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=ze(...s);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const h=this.Ds(t,u);return this.Cs(t,h,a,d.readTime)?this.ys(e,gv(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,r,i){return fI(t)||i.isEqual(Ne.min())?q.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?q.resolve(null):(Fl()<=Ke.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ul(t)),this.vs(e,a,t,qC(i,iu)).next((u=>u)))}))}Ds(e,t){let r=new mt(Ab(e));return t.forEach(((i,s)=>{Vd(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Fl()<=Ke.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Ul(t)),this.ps.getDocumentsMatchingQuery(e,t,dr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const G_="LocalStore",WL=3e8;class HL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new wt(Be),this.xs=new ls((s=>xa(s)),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function gA(n,e,t,r){return new HL(n,e,t,r)}async function yA(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let d=ze();for(const h of i){a.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function qL(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,m){const g=h.batch,v=g.keys();let T=q.resolve();return v.forEach((A=>{T=T.next((()=>m.getEntry(d,A))).next((x=>{const P=h.docVersions.get(A);ke(P!==null,48541),x.version.compareTo(P)<0&&(g.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),m.addEntry(x)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function vA(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GL(n,e){const t=be(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;u.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let T=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Xt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(g,T),(function(x,P,j){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=WL?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(v,T,m)&&u.push(t.Pi.updateTargetData(s,T))}));let d=ur(),h=ze();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(KL(s,a,e.documentUpdates).next((m=>{d=m.ks,h=m.qs}))),!r.isEqual(Ne.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return q.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(t.Ms=i,s)))}function KL(n,e,t){let r=ze(),i=ze();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=ur();return t.forEach(((u,d)=>{const h=s.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):le(G_,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{ks:a,qs:i}}))}function QL(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ea),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pp(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,q.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Gi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function gu(n,e,t){const r=be(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Io(a))throw a;le(G_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Sv(n,e,t){const r=be(n);let i=Ne.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,m){const g=be(d),v=g.xs.get(m);return v!==void 0?q.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,m)})(r,a,cr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,u.targetId).next((d=>{s=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Ne.min(),t?s:ze()))).next((u=>(EA(r,bb(e),u),{documents:u,Qs:s})))))}function _A(n,e){const t=be(n),r=be(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function wA(n,e){const t=be(n),r=t.Os.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,qC(r,iu),Number.MAX_SAFE_INTEGER))).then((i=>(EA(t,e,i),i)))}function EA(n,e,t){let r=n.Os.get(e)||Ne.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}const TA="firestore_clients";function WI(n,e){return`${TA}_${n}_${e}`}const IA="firestore_mutations";function HI(n,e,t){let r=`${IA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const SA="firestore_targets";function vy(n,e){return`${SA}_${n}_${e}`}const di="SharedClientState";class mp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new me(i.error.code,i.error.message))),a?new mp(e,t,i.state,s):(qt(di,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new me(r.error.code,r.error.message))),s?new nd(e,r.state,i):(qt(di,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=V_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=XC(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new gp(e,s):(qt(di,`Failed to parse client data for instance '${e}': ${t}`),null)}}class K_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new K_(t.clientId,t.onlineState):(qt(di,`Failed to parse online state: ${e}`),null)}}class Pv{constructor(){this.activeTargetIds=V_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _y{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new wt(Be),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=WI(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Pv),this.ro=new RegExp(`^${TA}_${a}_([^_]*)$`),this.io=new RegExp(`^${IA}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${SA}_${a}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(WI(this.persistenceKey,r));if(i){const s=gp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(vy(this.persistenceKey,e));if(i){const s=nd.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return le(di,"READ",e,t),t}setItem(e,t){le(di,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){le(di,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(le(di,"EVENT",t.key,t.newValue),t.key===this.eo)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=Gn.ce;if(s!=null)try{const u=JSON.parse(s);ke(typeof u=="number",30636,{So:s}),a=u}catch(u){qt(di,"Failed to read sequence number from WebStorage",u)}return a})(t.newValue);r!==Gn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new mp(this.currentUser,e,t,r),s=HI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=HI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=vy(this.persistenceKey,e),s=new nd(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return gp.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return mp.Ws(new mn(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return nd.Ws(i,t)}uo(e){return K_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);le(di,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],u=[];return s.forEach((d=>{i.has(d)||a.push(d)})),i.forEach((d=>{s.has(d)||u.push(d)})),this.syncEngine.Fo(a,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=V_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class PA{constructor(){this.Mo=new Pv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Pv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class YL{Oo(e){}shutdown(){}}const qI="ConnectivityMonitor";class GI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(qI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(qI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vf=null;function Cv(){return vf===null?vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():vf++,"0x"+vf.toString(16)}const wy="RestConnection",XL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ip?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=Cv(),u=this.zo(e,t.toUriEncodedString());le(wy,`Sending RPC '${e}' ${a}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,s);const{host:h}=new URL(u),m=Eo(h);return this.Jo(e,u,d,r,m).then((g=>(le(wy,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw ho(wy,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=XL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class ZL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const bn="WebChannelConnection";class e2 extends JL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=Cv();return new Promise(((u,d)=>{const h=new OC;h.setWithCredentials(!0),h.listenOnce(LC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Rf.NO_ERROR:const g=h.getResponseJson();le(bn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Rf.TIMEOUT:le(bn,`RPC '${e}' ${a} timed out`),d(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const v=h.getStatus();if(le(bn,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T?.error;if(A&&A.status&&A.message){const x=(function(j){const M=j.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(M)>=0?M:ie.UNKNOWN})(A.status);d(new me(x,A.message))}else d(new me(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new me(ie.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{le(bn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);le(bn,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=Cv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=jC(),u=UC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=s.join("");le(bn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=a.createWebChannel(m,d);this.I_(g);let v=!1,T=!1;const A=new ZL({Yo:P=>{T?le(bn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(le(bn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),le(bn,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},Zo:()=>g.close()}),x=(P,j,M)=>{P.listen(j,(D=>{try{M(D)}catch(B){setTimeout((()=>{throw B}),0)}}))};return x(g,$c.EventType.OPEN,(()=>{T||(le(bn,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),x(g,$c.EventType.CLOSE,(()=>{T||(T=!0,le(bn,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(g))})),x(g,$c.EventType.ERROR,(P=>{T||(T=!0,ho(bn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),A.a_(new me(ie.UNAVAILABLE,"The operation could not be completed")))})),x(g,$c.EventType.MESSAGE,(P=>{if(!T){const j=P.data[0];ke(!!j,16349);const M=j,D=M?.error||M[0]?.error;if(D){le(bn,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let Z=(function(I){const b=en[I];if(b!==void 0)return jb(b)})(B),re=D.message;Z===void 0&&(Z=ie.INTERNAL,re="Unknown error status: "+B+" with message "+D.message),T=!0,A.a_(new me(Z,re)),g.close()}else le(bn,`RPC '${e}' stream ${i} received:`,j),A.u_(j)}})),x(u,FC.STAT_EVENT,(P=>{P.stat===iv.PROXY?le(bn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===iv.NOPROXY&&le(bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function CA(){return typeof window<"u"?window:null}function jf(){return typeof document<"u"?document:null}function um(n){return new sL(n,!0)}class bA{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const KI="PersistentStream";class AA{constructor(e,t,r,i,s,a,u,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new me(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(KI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(KI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class t2 extends AA{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lL(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ne.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ne.min():a.readTime?Fn(a.readTime):Ne.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=_v(this.serializer),t.addTarget=(function(s,a){let u;const d=a.target;if(u=op(d)?{documents:Kb(s,d)}:{query:Qb(s,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=zb(s,a.resumeToken);const h=yv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ne.min())>0){u.readTime=mu(s,a.snapshotVersion.toTimestamp());const h=yv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=cL(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=_v(this.serializer),t.removeTarget=e,this.q_(t)}}class n2 extends AA{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uL(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=_v(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>up(this.serializer,r)))};this.q_(t)}}class r2{}class i2 extends r2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,vv(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new me(ie.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,vv(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ie.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class s2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qt(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Na="RemoteStore";class o2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Ba(this)&&(le(Na,"Restarting streams for network reachability change."),await(async function(d){const h=be(d);h.Ea.add(4),await Fd(h),h.Ra.set("Unknown"),h.Ea.delete(4),await cm(h)})(this))}))})),this.Ra=new s2(r,i)}}async function cm(n){if(Ba(n))for(const e of n.da)await e(!0)}async function Fd(n){for(const e of n.da)await e(!1)}function dm(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),X_(t)?Y_(t):Du(t).O_()&&Q_(t,e))}function yu(n,e){const t=be(n),r=Du(t);t.Ia.delete(e),r.O_()&&xA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ba(t)&&t.Ra.set("Unknown"))}function Q_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Du(n).Y_(e)}function xA(n,e){n.Va.Ue(e),Du(n).Z_(e)}function Y_(n){n.Va=new tL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Du(n).start(),n.Ra.ua()}function X_(n){return Ba(n)&&!Du(n).x_()&&n.Ia.size>0}function Ba(n){return be(n).Ea.size===0}function RA(n){n.Va=void 0}async function a2(n){n.Ra.set("Online")}async function l2(n){n.Ia.forEach(((e,t)=>{Q_(n,e)}))}async function u2(n,e){RA(n),X_(n)?(n.Ra.ha(e),Y_(n)):n.Ra.set("Unknown")}async function c2(n,e,t){if(n.Ra.set("Online"),e instanceof $b&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){le(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yp(n,r)}else if(e instanceof Ff?n.Va.Ze(e):e instanceof Bb?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const r=await vA(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.Va.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const m=s.Ia.get(d);if(!m)return;s.Ia.set(d,m.withResumeToken(Xt.EMPTY_BYTE_STRING,m.snapshotVersion)),xA(s,d);const g=new Gi(m.target,d,h,m.sequenceNumber);Q_(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){le(Na,"Failed to raise snapshot:",r),await yp(n,r)}}async function yp(n,e,t){if(!Io(e))throw e;n.Ea.add(1),await Fd(n),n.Ra.set("Offline"),t||(t=()=>vA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Na,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cm(n)}))}function kA(n,e){return e().catch((t=>yp(n,t,e)))}async function ku(n){const e=be(n),t=mo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ea;for(;d2(e);)try{const i=await QL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,h2(e,i)}catch(i){await yp(e,i)}DA(e)&&NA(e)}function d2(n){return Ba(n)&&n.Ta.length<10}function h2(n,e){n.Ta.push(e);const t=mo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function DA(n){return Ba(n)&&!mo(n).x_()&&n.Ta.length>0}function NA(n){mo(n).start()}async function f2(n){mo(n).ra()}async function p2(n){const e=mo(n);for(const t of n.Ta)e.ea(t.mutations)}async function m2(n,e,t){const r=n.Ta.shift(),i=L_.from(r,e,t);await kA(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await ku(n)}async function g2(n,e){e&&mo(n).X_&&await(async function(r,i){if((function(a){return JO(a)&&a!==ie.ABORTED})(i.code)){const s=r.Ta.shift();mo(r).B_(),await kA(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await ku(r)}})(n,e),DA(n)&&NA(n)}async function QI(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),le(Na,"RemoteStore received new credentials");const r=Ba(t);t.Ea.add(3),await Fd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cm(t)}async function bv(n,e){const t=be(n);e?(t.Ea.delete(2),await cm(t)):e||(t.Ea.add(2),await Fd(t),t.Ra.set("Unknown"))}function Du(n){return n.ma||(n.ma=(function(t,r,i){const s=be(t);return s.sa(),new t2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:a2.bind(null,n),t_:l2.bind(null,n),r_:u2.bind(null,n),H_:c2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),X_(n)?Y_(n):n.Ra.set("Unknown")):(await n.ma.stop(),RA(n))}))),n.ma}function mo(n){return n.fa||(n.fa=(function(t,r,i){const s=be(t);return s.sa(),new n2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:f2.bind(null,n),r_:g2.bind(null,n),ta:p2.bind(null,n),na:m2.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ku(n)):(await n.fa.stop(),n.Ta.length>0&&(le(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class J_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new J_(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(n,e){if(qt("AsyncQueue",`${e}: ${n}`),Io(n))return new me(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ge.comparator(t.key,r.key):(t,r)=>ge.comparator(t.key,r.key),this.keyedMap=zc(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YI{constructor(){this.ga=new wt(ge.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class vu{constructor(e,t,r,i,s,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new vu(e,t,Yl.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class y2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class v2{constructor(){this.queries=XI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=be(t),s=i.queries;i.queries=XI(),s.forEach(((a,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function XI(){return new ls((n=>Cb(n)),rm)}async function VA(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new y2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=hm(a,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Z_(t)}async function MA(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _2(n,e){const t=be(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Sa)u.Fa(i)&&(r=!0);a.wa=i}}r&&Z_(t)}function w2(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function Z_(n){n.Ca.forEach((e=>{e.next()}))}var Av,JI;(JI=Av||(Av={})).Ma="default",JI.Cache="cache";class OA{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Av.Cache}}class LA{constructor(e){this.key=e}}class FA{constructor(e){this.key=e}}class E2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=Ab(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new YI,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),T=Vd(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),x=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;v&&T?v.data.isEqual(T.data)?A!==x&&(r.track({type:3,doc:T}),P=!0):this.su(v,T)||(r.track({type:2,doc:T}),P=!0,(d&&this.eu(T,d)>0||h&&this.eu(T,h)<0)&&(u=!0)):!v&&T?(r.track({type:0,doc:T}),P=!0):v&&!T&&(r.track({type:1,doc:v}),P=!0,(d||h)&&(u=!0)),P&&(T?(a=a.add(T),s=x?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,g)=>(function(T,A){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:P})}};return x(T)-x(A)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,h=d!==this.Za;return this.Za=d,a.length!==0||h?{snapshot:new vu(this.query,e.tu,s,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new FA(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new LA(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Nu="SyncEngine";class T2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class I2{constructor(e){this.key=e,this.hu=!1}}class S2{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ls((u=>Cb(u)),rm),this.Iu=new Map,this.Eu=new Set,this.du=new wt(ge.comparator),this.Au=new Map,this.Ru=new z_,this.Vu={},this.mu=new Map,this.fu=Da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function P2(n,e,t=!0){const r=fm(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await UA(r,e,t,!0),i}async function C2(n,e){const t=fm(n);await UA(t,e,!0,!1)}async function UA(n,e,t,r){const i=await pp(n.localStore,cr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await ew(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&dm(n.remoteStore,i),u}async function ew(n,e,t,r,i){n.pu=(g,v,T)=>(async function(x,P,j,M){let D=P.view.ru(j);D.Cs&&(D=await Sv(x.localStore,P.query,!1).then((({documents:C})=>P.view.ru(C,D))));const B=M&&M.targetChanges.get(P.targetId),Z=M&&M.targetMismatches.get(P.targetId)!=null,re=P.view.applyChanges(D,x.isPrimaryClient,B,Z);return xv(x,P.targetId,re.au),re.snapshot})(n,g,v,T);const s=await Sv(n.localStore,e,!0),a=new E2(e,s.Qs),u=a.ru(s.documents),d=Ld.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,d);xv(n,t,h.au);const m=new T2(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function b2(n,e,t){const r=be(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!rm(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yu(r.remoteStore,i.targetId),_u(r,i.targetId)})).catch(To)):(_u(r,i.targetId),await gu(r.localStore,i.targetId,!0))}async function A2(n,e){const t=be(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yu(t.remoteStore,r.targetId))}async function x2(n,e,t){const r=iw(n);try{const i=await(function(a,u){const d=be(a),h=ft.now(),m=u.reduce(((T,A)=>T.add(A.key)),ze());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let A=ur(),x=ze();return d.Ns.getEntries(T,m).next((P=>{A=P,A.forEach(((j,M)=>{M.isValidDocument()||(x=x.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,A))).next((P=>{g=P;const j=[];for(const M of u){const D=YO(M,g.get(M.key).overlayedDocument);D!=null&&j.push(new us(M.key,D,yb(D.value.mapValue),an.exists(!0)))}return d.mutationQueue.addMutationBatch(T,h,j,u)})).next((P=>{v=P;const j=P.applyToLocalDocumentSet(g,x);return d.documentOverlayCache.saveOverlays(T,P.batchId,j)}))})).then((()=>({batchId:v.batchId,changes:Rb(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let h=a.Vu[a.currentUser.toKey()];h||(h=new wt(Be)),h=h.insert(u,d),a.Vu[a.currentUser.toKey()]=h})(r,i.batchId,t),await Po(r,i.changes),await ku(r.remoteStore)}catch(i){const s=hm(i,"Failed to persist write");t.reject(s)}}async function jA(n,e){const t=be(n);try{const r=await GL(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ke(a.hu,14607):i.removedDocuments.size>0&&(ke(a.hu,42227),a.hu=!1))})),await Po(t,r,e)}catch(r){await To(r)}}function ZI(n,e,t){const r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const d=be(a);d.onlineState=u;let h=!1;d.queries.forEach(((m,g)=>{for(const v of g.Sa)v.va(u)&&(h=!0)})),h&&Z_(d)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R2(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new wt(ge.comparator);a=a.insert(s,Bt.newNoDocument(s,Ne.min()));const u=ze().add(s),d=new Od(Ne.min(),new Map,new wt(Be),a,u);await jA(r,d),r.du=r.du.remove(s),r.Au.delete(e),rw(r)}else await gu(r.localStore,e,!1).then((()=>_u(r,e,t))).catch(To)}async function k2(n,e){const t=be(n),r=e.batch.batchId;try{const i=await qL(t.localStore,e);nw(t,r,null),tw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Po(t,i)}catch(i){await To(i)}}async function D2(n,e,t){const r=be(n);try{const i=await(function(a,u){const d=be(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(ke(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);nw(r,e,t),tw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Po(r,i)}catch(i){await To(i)}}function tw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function nw(n,e,t){const r=be(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function _u(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||BA(n,r)}))}function BA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(yu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),rw(n))}function xv(n,e,t){for(const r of t)r instanceof LA?(n.Ru.addReference(r.key,e),N2(n,r)):r instanceof FA?(le(Nu,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||BA(n,r.key)):Se(19791,{wu:r})}function N2(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(Nu,"New document in limbo: "+t),n.Eu.add(r),rw(n))}function rw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ge(lt.fromString(e)),r=n.fu.next();n.Au.set(r,new I2(t)),n.du=n.du.insert(t,r),dm(n.remoteStore,new Gi(cr(nm(t.path)),r,"TargetPurposeLimboResolution",Gn.ce))}}async function Po(n,e,t){const r=be(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{a.push(r.pu(d,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=q_.As(d.targetId,h);s.push(m)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(d,h){const m=be(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>q.forEach(h,(v=>q.forEach(v.Es,(T=>m.persistence.referenceDelegate.addReference(g,v.targetId,T))).next((()=>q.forEach(v.ds,(T=>m.persistence.referenceDelegate.removeReference(g,v.targetId,T)))))))))}catch(g){if(!Io(g))throw g;le(G_,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const T=m.Ms.get(v),A=T.snapshotVersion,x=T.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(v,x)}}})(r.localStore,s))}async function V2(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){le(Nu,"User change. New user:",e.toKey());const r=await yA(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((d=>{d.reject(new me(ie.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(t,r.Ls)}}function M2(n,e){const t=be(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}async function O2(n,e){const t=be(n),r=await Sv(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&xv(t,e.targetId,i.au),i}async function L2(n,e){const t=be(n);return wA(t.localStore,e).then((r=>Po(t,r)))}async function F2(n,e,t,r){const i=be(n),s=await(function(u,d){const h=be(u),m=be(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>m.er(g,d).next((v=>v?h.localDocuments.getDocuments(g,v):q.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await ku(i.remoteStore):t==="acknowledged"||t==="rejected"?(nw(i,e,r||null),tw(i,e),(function(u,d){be(be(u).mutationQueue).ir(d)})(i.localStore,e)):Se(6720,"Unknown batchState",{Su:t}),await Po(i,s)):le(Nu,"Cannot apply mutation batch with id: "+e)}async function U2(n,e){const t=be(n);if(fm(t),iw(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await eS(t,r.toArray());t.gu=!0,await bv(t.remoteStore,!0);for(const s of i)dm(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(_u(t,a),gu(t.localStore,a,!0)))),yu(t.remoteStore,a)})),await i,await eS(t,r),(function(a){const u=be(a);u.Au.forEach(((d,h)=>{yu(u.remoteStore,h)})),u.Ru.Jr(),u.Au=new Map,u.du=new wt(ge.comparator)})(t),t.gu=!1,await bv(t.remoteStore,!1)}}async function eS(n,e,t){const r=be(n),i=[],s=[];for(const a of e){let u;const d=r.Iu.get(a);if(d&&d.length!==0){u=await pp(r.localStore,cr(d[0]));for(const h of d){const m=r.Tu.get(h),g=await O2(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await _A(r.localStore,a);u=await pp(r.localStore,h),await ew(r,$A(h),a,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(s),i}function $A(n){return Pb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function j2(n){return(function(t){return be(be(t).persistence).Ts()})(be(n).localStore)}async function B2(n,e,t,r){const i=be(n);if(i.gu)return void le(Nu,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await wA(i.localStore,bb(s[0])),u=Od.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Xt.EMPTY_BYTE_STRING);await Po(i,a,u);break}case"rejected":await gu(i.localStore,e,!0),_u(i,e,r);break;default:Se(64155,t)}}async function $2(n,e,t){const r=fm(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){le(Nu,"Adding an already active target "+i);continue}const s=await _A(r.localStore,i),a=await pp(r.localStore,s);await ew(r,$A(s),a.targetId,!1,a.resumeToken),dm(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await gu(r.localStore,i,!1).then((()=>{yu(r.remoteStore,i),_u(r,i)})).catch(To)}}function fm(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.Pu.H_=_2.bind(null,e.eventManager),e.Pu.yu=w2.bind(null,e.eventManager),e}function iw(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D2.bind(null,e),e}class Ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gA(this.persistence,new mA,e.initialUser,this.serializer)}Cu(e){return new W_(lm.mi,this.serializer)}Du(e){return new PA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ed.provider={build:()=>new Ed};class z2 extends Ed{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ke(this.persistence.referenceDelegate instanceof fp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new W_((r=>fp.mi(r,t)),this.serializer)}}class zA extends Ed{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await iw(this.xu.syncEngine),await ku(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return gA(this.persistence,new mA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new uA(r,e.asyncQueue,t)}Mu(e,t){const r=new XM(t,this.persistence);return new YM(e.asyncQueue,r)}Cu(e){const t=pA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new H_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CA(),jf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new PA}}class W2 extends zA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof _y&&(this.sharedClientState.syncEngine={Co:F2.bind(null,t),vo:B2.bind(null,t),Fo:$2.bind(null,t),Ts:j2.bind(null,t),Do:L2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await U2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=CA();if(!_y.v(t))throw new me(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _y(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Td{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V2.bind(null,this.syncEngine),await bv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new v2})()}createDatastore(e){const t=um(e.databaseInfo.databaseId),r=(function(s){return new e2(s)})(e.databaseInfo);return(function(s,a,u,d){return new i2(s,a,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new o2(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>ZI(this.syncEngine,t,0)),(function(){return GI.v()?new GI:new YL})())}createSyncEngine(e,t){return(function(i,s,a,u,d,h,m){const g=new S2(i,s,a,u,d,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=be(t);le(Na,"RemoteStore shutting down."),r.Ea.add(5),await Fd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Td.provider={build:()=>new Td};class WA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const go="FirestoreClient";class H2{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=E_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{le(go,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(le(go,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ey(n,e){n.asyncQueue.verifyOperationInProgress(),le(go,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await yA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function tS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HA(n);le(go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>QI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>QI(e.remoteStore,i))),n._onlineComponents=e}async function HA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(go,"Using user provided OfflineComponentProvider");try{await Ey(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ho("Error using user provided cache. Falling back to memory cache: "+t),await Ey(n,new Ed)}}else le(go,"Using default OfflineComponentProvider"),await Ey(n,new z2(void 0));return n._offlineComponents}async function qA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(go,"Using user provided OnlineComponentProvider"),await tS(n,n._uninitializedComponentsProvider._online)):(le(go,"Using default OnlineComponentProvider"),await tS(n,new Td))),n._onlineComponents}function q2(n){return HA(n).then((e=>e.localStore))}function G2(n){return qA(n).then((e=>e.syncEngine))}async function GA(n){const e=await qA(n),t=e.eventManager;return t.onListen=P2.bind(null,e.syncEngine),t.onUnlisten=b2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A2.bind(null,e.syncEngine),t}function K2(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const u=await(function(h,m){const g=be(h);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,m)))})(i,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new me(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=hm(u,`Failed to get document '${s} from cache`);a.reject(d)}})(await q2(n),e,t))),t.promise}function Q2(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new WA({next:v=>{m.Nu(),a.enqueueAndForget((()=>MA(s,g)));const T=v.docs.has(u);!T&&v.fromCache?h.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&d&&d.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new OA(nm(u.path),m,{includeMetadataChanges:!0,qa:!0});return VA(s,g)})(await GA(n),n.asyncQueue,e,t,r))),r.promise}function Y2(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new WA({next:v=>{m.Nu(),a.enqueueAndForget((()=>MA(s,g))),v.fromCache&&d.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new OA(u,m,{includeMetadataChanges:!0,qa:!0});return VA(s,g)})(await GA(n),n.asyncQueue,e,t,r))),r.promise}function KA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const nS=new Map;const QA="firestore.googleapis.com",rS=!0;class iS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QA,this.ssl=rS}else this.host=e.host,this.ssl=e.ssl??rS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CL)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new LM;switch(r.type){case"firstParty":return new BM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=nS.get(t);r&&(le("ComponentProvider","Removing Datastore"),nS.delete(t),r.terminate())})(this),Promise.resolve()}}function X2(n,e,t,r={}){n=Un(n,pm);const i=Eo(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(m_(`https://${u}`),g_("Firestore",!0)),s.host!==QA&&s.host!==u&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...s,host:u,ssl:i,emulatorOptions:r};if(!Pa(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=mn.MOCK_USER;else{h=dV(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mn(g)}n._authCredentials=new FM(new $C(h,m))}}class mm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mm(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(kd(t,Kt._jsonSchema))return new Kt(e,r||null,new ge(lt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:rn("string",Kt._jsonSchemaVersion),referencePath:rn("string")};class ao extends mm{constructor(e,t,r){super(e,t,nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ge(e))}withConverter(e){return new ao(this.firestore,e,this._path)}}function qe(n,e,...t){if(n=yt(n),WC("collection","path",e),n instanceof pm){const r=lt.fromString(e,...t);return KT(r),new ao(n,null,r)}{if(!(n instanceof Kt||n instanceof ao))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return KT(r),new ao(n.firestore,null,r)}}function xt(n,e,...t){if(n=yt(n),arguments.length===1&&(e=E_.newId()),WC("doc","path",e),n instanceof pm){const r=lt.fromString(e,...t);return GT(r),new Kt(n,null,new ge(r))}{if(!(n instanceof Kt||n instanceof ao))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return GT(r),new Kt(n.firestore,n instanceof ao?n.converter:null,new ge(r))}}const sS="AsyncQueue";class oS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bA(this,"async_queue_retry"),this._c=()=>{const r=jf();r&&le(sS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=jf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;le(sS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,qt("INTERNAL UNHANDLED ERROR: ",aS(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=J_.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Se(47125,{Pc:aS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function aS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ci extends pm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new oS,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oS(e),this._firestoreClient=void 0,await e}}}function J2(n,e){const t=typeof n=="object"?n:__(),r=typeof n=="string"?n:ip,i=Gp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=IC("firestore");s&&X2(i,...s)}return i}function Ud(n){if(n._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YA(n),n._firestoreClient}function YA(n){const e=n._freezeSettings(),t=(function(i,s,a,u){return new PO(i,s,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,KA(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new H2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function Z2(n,e){ho("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return XA(n,Td.provider,{build:r=>new zA(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function eF(n){ho("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();XA(n,Td.provider,{build:t=>new W2(t,e.cacheSizeBytes)})}function XA(n,e,t){if((n=Un(n,Ci))._firestoreClient||n._terminated)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new me(ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},YA(n)}class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(Xt.fromBase64String(e))}catch(t){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sr(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kd(e,Sr._jsonSchema))return Sr.fromBase64String(e.bytes)}}Sr._jsonSchemaVersion="firestore/bytes/1.0",Sr._jsonSchema={type:rn("string",Sr._jsonSchemaVersion),bytes:rn("string")};class jd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sw{constructor(e){this._methodName=e}}class yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yi._jsonSchemaVersion}}static fromJSON(e){if(kd(e,yi._jsonSchema))return new yi(e.latitude,e.longitude)}}yi._jsonSchemaVersion="firestore/geoPoint/1.0",yi._jsonSchema={type:rn("string",yi._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};class vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kd(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vi(e.vectorValues);throw new me(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:rn("string",vi._jsonSchemaVersion),vectorValues:rn("object")};const tF=/^__.*__$/;class nF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class JA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class ow{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ow({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ZA(this.Ac)&&tF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||um(e)}Cc(e,t,r,i=!1){return new ow({Ac:e,methodName:t,Dc:r,path:Nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gm(n){const e=n._freezeSettings(),t=um(n._databaseId);return new rF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aw(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);lw("Data must be an object, but it was:",a,r);const u=nx(r,a);let d,h;if(s.merge)d=new Kn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const v=Rv(e,g,t);if(!a.contains(v))throw new me(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);ix(m,v)||m.push(v)}d=new Kn(m),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new nF(new Rn(u),d,h)}class Bd extends sw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}function ex(n,e,t,r){const i=n.Cc(1,e,t);lw("Data must be an object, but it was:",i,r);const s=[],a=Rn.empty();So(r,((d,h)=>{const m=uw(e,d,t);h=yt(h);const g=i.yc(m);if(h instanceof Bd)s.push(m);else{const v=ym(h,g);v!=null&&(s.push(m),a.set(m,v))}}));const u=new Kn(s);return new JA(a,u,i.fieldTransforms)}function tx(n,e,t,r,i,s){const a=n.Cc(1,e,t),u=[Rv(e,r,t)],d=[i];if(s.length%2!=0)throw new me(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(Rv(e,s[v])),d.push(s[v+1]);const h=[],m=Rn.empty();for(let v=u.length-1;v>=0;--v)if(!ix(h,u[v])){const T=u[v];let A=d[v];A=yt(A);const x=a.yc(T);if(A instanceof Bd)h.push(T);else{const P=ym(A,x);P!=null&&(h.push(T),m.set(T,P))}}const g=new Kn(h);return new JA(m,g,a.fieldTransforms)}function ym(n,e){if(rx(n=yt(n)))return lw("Unsupported field value:",e,n),nx(n,e);if(n instanceof sw)return(function(r,i){if(!ZA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let d=ym(u,i.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ft.fromDate(r);return{timestampValue:mu(i.serializer,s)}}if(r instanceof ft){const s=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mu(i.serializer,s)}}if(r instanceof yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:zb(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:j_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vi)return(function(a,u){return{mapValue:{fields:{[R_]:{stringValue:k_},[uu]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return M_(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${T_(r)}`)})(n,e)}function nx(n,e){const t={};return lb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((r,i)=>{const s=ym(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function rx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof yi||n instanceof Sr||n instanceof Kt||n instanceof sw||n instanceof vi)}function lw(n,e,t){if(!rx(t)||!HC(t)){const r=T_(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Rv(n,e,t){if((e=yt(e))instanceof jd)return e._internalPath;if(typeof e=="string")return uw(n,e);throw vp("Field path arguments must be of type string or ",n,!1,void 0,t)}const iF=new RegExp("[~\\*/\\[\\]]");function uw(n,e,t){if(e.search(iF)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jd(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new me(ie.INVALID_ARGUMENT,u+n+d)}function ix(n,e){return n.some((t=>t.isEqual(e)))}class sx{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ox("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sF extends sx{data(){return super.data()}}function ox(n,e){return typeof e=="string"?uw(n,e):e instanceof jd?e._internalPath:e._delegate._internalPath}function oF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aF{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return So(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[uu].arrayValue?.values?.map((r=>At(r.doubleValue)));return new vi(t)}convertGeoPoint(e){return new yi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gd(e));default:return null}}convertTimestamp(e){const t=es(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);ke(Zb(r),9688,{name:e});const i=new Aa(r.get(1),r.get(3)),s=new ge(r.popFirst(5));return i.isEqual(t)||qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function cw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends sx{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ox("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:rn("string",lo._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class Bf extends lo{data(e={}){return super.data(e)}}class Xl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Bf(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const d=new Bf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new zl(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const d=new Bf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new zl(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:lF(u.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=E_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}function vm(n){n=Un(n,Kt);const e=Un(n.firestore,Ci);return Q2(Ud(e),n._key).then((t=>cF(e,n,t)))}Xl._jsonSchemaVersion="firestore/querySnapshot/1.0",Xl._jsonSchema={type:rn("string",Xl._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};class dw extends aF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function uF(n){n=Un(n,Kt);const e=Un(n.firestore,Ci),t=Ud(e),r=new dw(e);return K2(t,n._key).then((i=>new lo(e,r,n._key,i,new zl(i!==null&&i.hasLocalMutations,!0),n.converter)))}function pt(n){n=Un(n,mm);const e=Un(n.firestore,Ci),t=Ud(e),r=new dw(e);return oF(n._query),Y2(t,n._query).then((i=>new Xl(e,r,n,i)))}function ax(n,e,t){n=Un(n,Kt);const r=Un(n.firestore,Ci),i=cw(n.converter,e,t);return $d(r,[aw(gm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,an.none())])}function Va(n,e,t,...r){n=Un(n,Kt);const i=Un(n.firestore,Ci),s=gm(i);let a;return a=typeof(e=yt(e))=="string"||e instanceof jd?tx(s,"updateDoc",n._key,e,t,r):ex(s,"updateDoc",n._key,e),$d(i,[a.toMutation(n._key,an.exists(!0))])}function hw(n){return $d(Un(n.firestore,Ci),[new Md(n._key,an.none())])}function Wl(n,e){const t=Un(n.firestore,Ci),r=xt(n),i=cw(n.converter,e);return $d(t,[aw(gm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function $d(n,e){return(function(r,i){const s=new jr;return r.asyncQueue.enqueueAndForget((async()=>x2(await G2(r),i,s))),s.promise})(Ud(n),e)}function cF(n,e,t){const r=t.docs.get(e._key),i=new dw(n);return new lo(n,i,e._key,r,new zl(t.hasPendingWrites,t.fromCache),e.converter)}class dF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gm(e)}set(e,t,r){this._verifyNotCommitted();const i=Ty(e,this._firestore),s=cw(i.converter,t,r),a=aw(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,an.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ty(e,this._firestore);let a;return a=typeof(t=yt(t))=="string"||t instanceof jd?tx(this._dataReader,"WriteBatch.update",s._key,t,r,i):ex(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ty(e,this._firestore);return this._mutations=this._mutations.concat(new Md(t._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new me(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ty(n,e){if((n=yt(n)).firestore!==e)throw new me(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function hF(){return new Bd("deleteField")}function ns(n){return Ud(n=Un(n,Ci)),new dF(n,(e=>$d(n,e)))}(function(e,t=!0){(function(i){xu=i})(Au),Ca(new co("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new Ci(new UM(r.getProvider("auth-internal")),new $M(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(h.options.projectId,m)})(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),gi(zT,WT,e),gi(zT,WT,"esm2020")})();function lx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fF=lx,ux=new xd("auth","Firebase",lx());const _p=new y_("@firebase/auth");function pF(n,...e){_p.logLevel<=Ke.WARN&&_p.warn(`Auth (${Au}): ${n}`,...e)}function $f(n,...e){_p.logLevel<=Ke.ERROR&&_p.error(`Auth (${Au}): ${n}`,...e)}function Br(n,...e){throw fw(n,...e)}function _i(n,...e){return fw(n,...e)}function cx(n,e,t){const r={...fF(),[e]:t};return new xd("auth","Firebase",r).create(e,{appName:n.name})}function wi(n){return cx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ux.create(n,...e)}function Ve(n,e,...t){if(!n)throw fw(e,...t)}function Ki(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $f(e),new Error(e)}function rs(n,e){n||Ki(e)}function kv(){return typeof self<"u"&&self.location?.href||""}function mF(){return lS()==="http:"||lS()==="https:"}function lS(){return typeof self<"u"&&self.location?.protocol||null}function gF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mF()||gV()||"connection"in navigator)?navigator.onLine:!0}function yF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class zd{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=pV()||yV()}get(){return gF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pw(n,e){rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class dx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _F=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wF=new zd(3e4,6e4);function cs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function $r(n,e,t,r,i={}){return hx(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=Rd({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...s};return mV()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Eo(n.emulatorConfig.host)&&(h.credentials="include"),dx.fetch()(await fx(n,n.config.apiHost,t,u),h)})}async function hx(n,e,t){n._canInitEmulator=!1;const r={...vF,...e};try{const i=new TF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw _f(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _f(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw _f(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw _f(n,"user-disabled",a);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw cx(n,m,h);Br(n,m)}}catch(i){if(i instanceof Pi)throw i;Br(n,"network-request-failed",{message:String(i)})}}async function Wd(n,e,t,r,i={}){const s=await $r(n,e,t,r,i);return"mfaPendingCredential"in s&&Br(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function fx(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?pw(n.config,i):`${n.config.apiScheme}://${i}`;return _F.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function EF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),wF.get())})}}function _f(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=_i(n,e,r);return i.customData._tokenResponse=t,i}function uS(n){return n!==void 0&&n.enterprise!==void 0}class IF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return EF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SF(n,e){return $r(n,"GET","/v2/recaptchaConfig",cs(n,e))}async function PF(n,e){return $r(n,"POST","/v1/accounts:delete",e)}async function wp(n,e){return $r(n,"POST","/v1/accounts:lookup",e)}function rd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CF(n,e=!1){const t=yt(n),r=await t.getIdToken(e),i=mw(r);Ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:rd(Iy(i.auth_time)),issuedAtTime:rd(Iy(i.iat)),expirationTime:rd(Iy(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Iy(n){return Number(n)*1e3}function mw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $f("JWT malformed, contained fewer than 3 sections"),null;try{const i=wC(t);return i?JSON.parse(i):($f("Failed to decode base64 JWT payload"),null)}catch(i){return $f("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cS(n){const e=mw(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ma(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pi&&bF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function bF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class AF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Dv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rd(this.lastLoginAt),this.creationTime=rd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ep(n){const e=n.auth,t=await n.getIdToken(),r=await Ma(n,wp(e,{idToken:t}));Ve(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?px(i.providerUserInfo):[],a=RF(n.providerData,s),u=n.isAnonymous,d=!(n.email&&i.passwordHash)&&!a?.length,h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Dv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function xF(n){const e=yt(n);await Ep(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function px(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function kF(n,e){const t=await hx(n,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await fx(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&Eo(n.emulatorConfig.host)&&(d.credentials="include"),dx.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DF(n,e){return $r(n,"POST","/v2/accounts:revokeToken",cs(n,e))}class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=cS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await kF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Jl;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ve(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ve(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return Ki("not implemented")}}function Ws(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ur{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new AF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CF(this,e)}reload(){return xF(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ep(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(wi(this.auth));const e=await this.getIdToken();return await Ma(this,PF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:T,providerData:A,stsTokenManager:x}=t;Ve(g&&x,e,"internal-error");const P=Jl.fromJSON(this.name,x);Ve(typeof g=="string",e,"internal-error"),Ws(r,e.name),Ws(i,e.name),Ve(typeof v=="boolean",e,"internal-error"),Ve(typeof T=="boolean",e,"internal-error"),Ws(s,e.name),Ws(a,e.name),Ws(u,e.name),Ws(d,e.name),Ws(h,e.name),Ws(m,e.name);const j=new Ur({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:T,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:P,createdAt:h,lastLoginAt:m});return A&&Array.isArray(A)&&(j.providerData=A.map(M=>({...M}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Jl;i.updateFromServerResponse(t);const s=new Ur({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ep(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ve(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?px(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Jl;u.updateFromIdToken(r);const d=new Ur({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Dv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,h),d}}const dS=new Map;function Qi(n){rs(n instanceof Function,"Expected a class definition");let e=dS.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dS.set(n,e),e)}class mx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mx.type="NONE";const hS=mx;function zf(n,e,t){return`firebase:${n}:${e}:${t}`}class Zl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zf(this.userKey,i.apiKey,s),this.fullPersistenceKey=zf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wp(this.auth,{idToken:e}).catch(()=>{});return t?Ur._fromGetAccountInfoResponse(this.auth,t,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zl(Qi(hS),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Qi(hS);const a=zf(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const v=await wp(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Ur._fromGetAccountInfoResponse(e,v,m)}else g=Ur._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Zl(s,e,r):(s=d[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Zl(s,e,r))}}function fS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_x(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ex(e))return"Blackberry";if(Tx(e))return"Webos";if(yx(e))return"Safari";if((e.includes("chrome/")||vx(e))&&!e.includes("edge/"))return"Chrome";if(wx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function gx(n=ln()){return/firefox\//i.test(n)}function yx(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vx(n=ln()){return/crios\//i.test(n)}function _x(n=ln()){return/iemobile/i.test(n)}function wx(n=ln()){return/android/i.test(n)}function Ex(n=ln()){return/blackberry/i.test(n)}function Tx(n=ln()){return/webos/i.test(n)}function gw(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function NF(n=ln()){return gw(n)&&!!window.navigator?.standalone}function VF(){return vV()&&document.documentMode===10}function Ix(n=ln()){return gw(n)||wx(n)||Tx(n)||Ex(n)||/windows phone/i.test(n)||_x(n)}function Sx(n,e=[]){let t;switch(n){case"Browser":t=fS(ln());break;case"Worker":t=`${fS(ln())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Au}/${r}`}class MF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const d=e(s);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function OF(n,e={}){return $r(n,"GET","/v2/passwordPolicy",cs(n,e))}const LF=6;class FF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class UF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pS(this),this.idTokenSubscription=new pS(this),this.beforeStateQueue=new MF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ux,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wp(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ep(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(wi(this));const t=e?yt(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OF(this),t=new FF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await DF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qi(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[Qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&pF(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Co(n){return yt(n)}class pS{constructor(e){this.auth=e,this.observer=null,this.addObserver=SV(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jF(n){_m=n}function Px(n){return _m.loadJS(n)}function BF(){return _m.recaptchaEnterpriseScript}function $F(){return _m.gapiScript}function zF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class WF{constructor(){this.enterprise=new HF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class HF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qF="recaptcha-enterprise",Cx="NO_RECAPTCHA";class GF{constructor(e){this.type=qF,this.auth=Co(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{SF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new IF(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,a,u){const d=window.grecaptcha;uS(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(Cx)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&uS(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=BF();d.length!==0&&(d+=u),Px(d).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function mS(n,e,t,r=!1,i=!1){const s=new GF(n);let a;if(i)a=Cx;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Tp(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await mS(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await mS(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function KF(n,e){const t=Gp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Pa(s,e??{}))return i;Br(i,"already-initialized")}return t.initialize({options:e})}function QF(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YF(n,e,t){const r=Co(n);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=bx(e),{host:a,port:u}=XF(e),d=u===null?"":`:${u}`,h={url:`${s}//${a}${d}/`},m=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(Pa(h,r.config.emulator)&&Pa(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Eo(a)?(m_(`${s}//${a}${d}`),g_("Auth",!0)):JF()}function bx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XF(n){const e=bx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gS(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:gS(a)}}}function gS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class yw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,t){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}async function ZF(n,e){return $r(n,"POST","/v1/accounts:update",e)}async function eU(n,e){return $r(n,"POST","/v1/accounts:signUp",e)}async function tU(n,e){return Wd(n,"POST","/v1/accounts:signInWithPassword",cs(n,e))}async function Ax(n,e){return $r(n,"POST","/v1/accounts:sendOobCode",cs(n,e))}async function nU(n,e){return Ax(n,e)}async function rU(n,e){return Ax(n,e)}async function iU(n,e){return Wd(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}async function sU(n,e){return Wd(n,"POST","/v1/accounts:signInWithEmailLink",cs(n,e))}class Id extends yw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Id(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Id(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,t,"signInWithPassword",tU);case"emailLink":return iU(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tp(e,r,"signUpPassword",eU);case"emailLink":return sU(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eu(n,e){return Wd(n,"POST","/v1/accounts:signInWithIdp",cs(n,e))}const oU="http://localhost";class Oa extends yw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Oa(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return eu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,eu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,eu(e,t)}buildRequest(){const e={requestUri:oU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rd(t)}return e}}function aU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lU(n){const e=jc(Bc(n)).link,t=e?jc(Bc(e)).deep_link_id:null,r=jc(Bc(n)).deep_link_id;return(r?jc(Bc(r)).link:null)||r||t||e||n}class vw{constructor(e){const t=jc(Bc(e)),r=t.apiKey??null,i=t.oobCode??null,s=aU(t.mode??null);Ve(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lU(e);try{return new vw(t)}catch{return null}}}class Vu{constructor(){this.providerId=Vu.PROVIDER_ID}static credential(e,t){return Id._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=vw.parseLink(t);return Ve(r,"argument-error"),Id._fromEmailAndCode(e,r.code,r.tenantId)}}Vu.PROVIDER_ID="password";Vu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hd extends xx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ys extends Hd{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";class Xs extends Hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";class Js extends Hd{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.GITHUB_SIGN_IN_METHOD="github.com";Js.PROVIDER_ID="github.com";class Zs extends Hd{constructor(){super("twitter.com")}static credential(e,t){return Oa._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zs.credential(t,r)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";async function uU(n,e){return Wd(n,"POST","/v1/accounts:signUp",cs(n,e))}class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ur._fromIdTokenResponse(e,r,i),a=yS(r);return new La({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=yS(r);return new La({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function yS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Ip extends Pi{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ip.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ip(e,t,r,i)}}function Rx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ip._fromErrorAndOperation(n,s,e,r):s})}async function cU(n,e,t=!1){const r=await Ma(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return La._forOperation(n,"link",r)}async function dU(n,e,t=!1){const{auth:r}=n;if(qn(r.app))return Promise.reject(wi(r));const i="reauthenticate";try{const s=await Ma(n,Rx(r,i,e,n),t);Ve(s.idToken,r,"internal-error");const a=mw(s.idToken);Ve(a,r,"internal-error");const{sub:u}=a;return Ve(n.uid===u,r,"user-mismatch"),La._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Br(r,"user-mismatch"),s}}async function kx(n,e,t=!1){if(qn(n.app))return Promise.reject(wi(n));const r="signIn",i=await Rx(n,r,e),s=await La._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function hU(n,e){return kx(Co(n),e)}function fU(n,e,t){Ve(t.url?.length>0,n,"invalid-continue-uri"),Ve(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Ve(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ve(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ve(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Dx(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pU(n,e,t){const r=Co(n);await Tp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rU)}async function mU(n,e,t){if(qn(n.app))return Promise.reject(wi(n));const r=Co(n),a=await Tp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Dx(n),d}),u=await La._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function gU(n,e,t){return qn(n.app)?Promise.reject(wi(n)):hU(yt(n),Vu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Dx(n),r})}async function yU(n,e){const t=yt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&fU(t.auth,i,e);const{email:s}=await nU(t.auth,i);s!==n.email&&await n.reload()}async function vU(n,e){return $r(n,"POST","/v1/accounts:update",e)}async function _U(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=yt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Ma(r,vU(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function wU(n,e){const t=yt(n);return qn(t.auth.app)?Promise.reject(wi(t.auth)):Nx(t,e,null)}function EU(n,e){return Nx(yt(n),null,e)}async function Nx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await Ma(n,ZF(r,s));await n._updateTokensIfNecessary(a,!0)}function vS(n,e){return yt(n).setPersistence(e)}function TU(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function IU(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function SU(n,e,t,r){return yt(n).onAuthStateChanged(e,t,r)}function _S(n){return yt(n).signOut()}async function PU(n){return yt(n).delete()}const Sp="__sak";class Vx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sp,"1"),this.storage.removeItem(Sp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const CU=1e3,bU=10;class Mx extends Vx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);VF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},CU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mx.type="LOCAL";const Ox=Mx;class Lx extends Vx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lx.type="SESSION";const Fx=Lx;function AU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new wm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),d=await AU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wm.receivers=[];function _w(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class xU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,d)=>{const h=_w("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Ei(){return window}function RU(n){Ei().location.href=n}function Ux(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function kU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DU(){return navigator?.serviceWorker?.controller||null}function NU(){return Ux()?self:null}const jx="firebaseLocalStorageDb",VU=1,Pp="firebaseLocalStorage",Bx="fbase_key";class qd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Em(n,e){return n.transaction([Pp],e?"readwrite":"readonly").objectStore(Pp)}function MU(){const n=indexedDB.deleteDatabase(jx);return new qd(n).toPromise()}function Nv(){const n=indexedDB.open(jx,VU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Pp,{keyPath:Bx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Pp)?e(r):(r.close(),await MU(),e(await Nv()))})})}async function wS(n,e,t){const r=Em(n,!0).put({[Bx]:e,value:t});return new qd(r).toPromise()}async function OU(n,e){const t=Em(n,!1).get(e),r=await new qd(t).toPromise();return r===void 0?null:r.value}function ES(n,e){const t=Em(n,!0).delete(e);return new qd(t).toPromise()}const LU=800,FU=3;class $x{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>FU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ux()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(NU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kU(),!this.activeServiceWorker)return;this.sender=new xU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nv();return await wS(e,Sp,"1"),await ES(e,Sp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>wS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>OU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ES(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Em(i,!1).getAll();return new qd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$x.type="LOCAL";const zx=$x;new zd(3e4,6e4);function UU(n,e){return e?Qi(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class ww extends yw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jU(n){return kx(n.auth,new ww(n),n.bypassAuthState)}function BU(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),dU(t,new ww(n),n.bypassAuthState)}async function $U(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),cU(t,new ww(n),n.bypassAuthState)}class Wx{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jU;case"linkViaPopup":case"linkViaRedirect":return $U;case"reauthViaPopup":case"reauthViaRedirect":return BU;default:Br(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zU=new zd(2e3,1e4);class Hl extends Wx{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Hl.currentPopupAction&&Hl.currentPopupAction.cancel(),Hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=_w();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zU.get())};e()}}Hl.currentPopupAction=null;const WU="pendingRedirect",Wf=new Map;class HU extends Wx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{const r=await qU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qU(n,e){const t=QU(e),r=KU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function GU(n,e){Wf.set(n._key(),e)}function KU(n){return Qi(n._redirectPersistence)}function QU(n){return zf(WU,n.config.apiKey,n.name)}async function YU(n,e,t=!1){if(qn(n.app))return Promise.reject(wi(n));const r=Co(n),i=UU(r,e),a=await new HU(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const XU=600*1e3;class JU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Hx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(_i(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XU&&this.cachedEventUids.clear(),this.cachedEventUids.has(TS(e))}saveEventToCache(e){this.cachedEventUids.add(TS(e)),this.lastProcessedEventTime=Date.now()}}function TS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Hx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hx(n);default:return!1}}async function e4(n,e={}){return $r(n,"GET","/v1/projects",e)}const t4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n4=/^https?/;async function r4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await e4(n);for(const t of e)try{if(i4(t))return}catch{}Br(n,"unauthorized-domain")}function i4(n){const e=kv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!n4.test(t))return!1;if(t4.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const s4=new zd(3e4,6e4);function IS(){const n=Ei().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o4(n){return new Promise((e,t)=>{function r(){IS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IS(),t(_i(n,"network-request-failed"))},timeout:s4.get()})}if(Ei().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ei().gapi?.load)r();else{const i=zF("iframefcb");return Ei()[i]=()=>{gapi.load?r():t(_i(n,"network-request-failed"))},Px(`${$F()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function a4(n){return Hf=Hf||o4(n),Hf}const l4=new zd(5e3,15e3),u4="__/auth/iframe",c4="emulator/auth/iframe",d4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f4(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pw(e,c4):`https://${n.config.authDomain}/${u4}`,r={apiKey:e.apiKey,appName:n.name,v:Au},i=h4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Rd(r).slice(1)}`}async function p4(n){const e=await a4(n),t=Ei().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:f4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=_i(n,"network-request-failed"),u=Ei().setTimeout(()=>{s(a)},l4.get());function d(){Ei().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(a)})}))}const m4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g4=500,y4=600,v4="_blank",_4="http://localhost";class SS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w4(n,e,t,r=g4,i=y4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...m4,width:r.toString(),height:i.toString(),top:s,left:a},h=ln().toLowerCase();t&&(u=vx(h)?v4:t),gx(h)&&(e=e||_4,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[T,A])=>`${v}${T}=${A},`,"");if(NF(h)&&u!=="_self")return E4(e||"",u),new SS(null);const g=window.open(e||"",u,m);Ve(g,n,"popup-blocked");try{g.focus()}catch{}return new SS(g)}function E4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const T4="__/auth/handler",I4="emulator/auth/handler",S4=encodeURIComponent("fac");async function PS(n,e,t,r,i,s){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Au,eventId:i};if(e instanceof xx){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",IV(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof Hd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${S4}=${encodeURIComponent(d)}`:"";return`${P4(n)}?${Rd(u).slice(1)}${h}`}function P4({config:n}){return n.emulator?pw(n,I4):`https://${n.authDomain}/${T4}`}const Sy="webStorageSupport";class C4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fx,this._completeRedirectFn=YU,this._overrideRedirectResult=GU}async _openPopup(e,t,r,i){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await PS(e,t,r,kv(),i);return w4(e,s,_w())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await PS(e,t,r,kv(),i);return RU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(rs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await p4(e),r=new JU(e);return t.register("authEvent",i=>(Ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sy,{type:Sy},i=>{const s=i?.[0]?.[Sy];s!==void 0&&t(!!s),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ix()||yx()||gw()}}const b4=C4;var CS="@firebase/auth",bS="1.12.0";class A4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function x4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(n){Ca(new co("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Ve(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sx(n)},h=new UF(r,i,s,d);return QF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ca(new co("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(r=>new A4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(CS,bS,x4(n)),gi(CS,bS,"esm2020")}const k4=300,D4=PC("authIdTokenMaxAge")||k4;let AS=null;const N4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>D4)return;const i=t?.token;AS!==i&&(AS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function V4(n=__()){const e=Gp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=KF(n,{popupRedirectResolver:b4,persistence:[zx,Ox,Fx]}),r=PC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=N4(s.toString());IU(t,a,()=>a(t.currentUser)),TU(t,u=>a(u))}}const i=TC("auth");return i&&YF(t,`http://${i}`),t}function M4(){return document.getElementsByTagName("head")?.[0]??document}jF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=_i("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",M4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");const O4={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},qx=DC(O4),Ee=J2(qx),fn=V4(qx),L4=async()=>{try{await vS(fn,zx)}catch(n){console.warn("IndexedDB persistence unavailable, falling back to local storage.",n);try{await vS(fn,Ox)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}},Gx=typeof window<"u"?L4():Promise.resolve();typeof window<"u"&&(eF(Ee).catch(n=>{n.code==="failed-precondition"?Z2(Ee).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):n.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",n):console.error("Unexpected error enabling multi-tab persistence for Firestore.",n)}),Gx.catch(n=>{console.error("Unexpected error configuring Firebase Auth persistence.",n)}));const F4=1;let Py=0;function U4(){return Py=(Py+1)%Number.MAX_VALUE,Py.toString()}const Mn={state:{toasts:[]},listeners:[],getState:()=>Mn.state,setState:n=>{typeof n=="function"?Mn.state=n(Mn.state):Mn.state={...Mn.state,...n},Mn.listeners.forEach(e=>e(Mn.state))},subscribe:n=>(Mn.listeners.push(n),()=>{Mn.listeners=Mn.listeners.filter(e=>e!==n)})},j4=({...n})=>{const e=U4(),t=i=>Mn.setState(s=>({...s,toasts:s.toasts.map(a=>a.id===e?{...a,...i}:a)})),r=()=>Mn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return Mn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:r},...i.toasts].slice(0,F4)})),{id:e,dismiss:r,update:t}};function Ew(){const[n,e]=k.useState(Mn.getState());return k.useEffect(()=>Mn.subscribe(r=>{e(r)}),[]),k.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:j4,toasts:n.toasts}}const B4=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"){if(n===1)return!0;if(n===0)return!1}if(typeof n=="string"){const e=n.trim().toLowerCase();if(e==="true")return!0;if(e==="false")return!1}return null},Kx=k.createContext(null),$4=new Set(["estandar"]),xS=n=>n==="conservador"?"estandar":$4.has(n)?n:null,Vv=()=>({calculators:{cpm:!0,t8:!0},postpartum:!1,combineMode:"estandar"}),Cy=({current:n,incoming:e,legacyCombineMode:t})=>{const r=Vv(),i={calculators:{...r.calculators},postpartum:r.postpartum,combineMode:r.combineMode};let s=!1;const a=u=>{if(!u||typeof u!="object")return;Object.keys(i.calculators).forEach(m=>{typeof u?.calculators?.[m]=="boolean"&&(i.calculators[m]=u.calculators[m])});const d=B4(u.postpartum);d!==null&&(i.postpartum=d);const h=xS(u.combineMode);h&&(i.combineMode=h,s=!0)};if(a(n),a(e),!s){const u=xS(t);u&&(i.combineMode=u)}return i},z4=({children:n})=>{const[e,t]=k.useState(null),[r,i]=k.useState(!0),[s,a]=k.useState(null),{toast:u}=Ew();k.useEffect(()=>{let j=null,M=!1;return(async()=>{try{await Gx}catch{}M||(j=SU(fn,async B=>{if(B){t({id:B.uid,uid:B.uid,email:B.email,displayName:B.displayName,photoURL:B.photoURL});try{if(navigator?.storage?.persist){const C="rnf_storage_persist_requested_v1";let I=!1;try{I=localStorage.getItem(C)==="1"}catch{}if(!I){try{localStorage.setItem(C,"1")}catch{}await navigator.storage.persist()}}}catch{}const Z=xt(Ee,`users/${B.uid}/preferences`,"display"),re={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Vv()};try{try{const I=await uF(Z);if(I.exists()){const{combineMode:b,fertilityStartConfig:O,...L}=I.data(),U=Cy({current:re.fertilityStartConfig,incoming:O,legacyCombineMode:b});a({...re,...L,fertilityStartConfig:U})}}catch{}const C=await vm(Z);if(C.exists()){const{combineMode:I,fertilityStartConfig:b,...O}=C.data(),L=Cy({current:re.fertilityStartConfig,incoming:b,legacyCombineMode:I});a({...re,...O,fertilityStartConfig:L})}else a(re)}catch(C){console.error("Failed to load preferences",C),a(re)}}else t(null),a(null);i(!1)}))})(),()=>{M=!0,j&&j()}},[]);const d=async(j,M)=>{try{await gU(fn,j,M)}catch(D){throw u({title:"Error al iniciar sesin",description:D.message,variant:"destructive"}),D}},h=async(j,M)=>{try{const{user:D}=await mU(fn,j,M),B={url:`${window.location.origin}/auth`};await yU(D,B),await _S(fn)}catch(D){throw u({title:"Error al registrarse",description:D.message,variant:"destructive"}),D}},m=async j=>{try{await pU(fn,j)}catch(M){throw u({title:"Error al restablecer contrasea",description:M.message,variant:"destructive"}),M}},g=async()=>{try{await _S(fn),t(null),a(null)}catch(j){throw u({title:"Error al cerrar sesin",description:j.message,variant:"destructive"}),j}},v=async j=>{if(fn.currentUser)try{await wU(fn.currentUser,j),t(M=>M&&{...M,email:j})}catch(M){throw u({title:"Error al actualizar correo",description:M.message,variant:"destructive"}),M}},T=async j=>{if(fn.currentUser)try{await EU(fn.currentUser,j)}catch(M){throw u({title:"Error al actualizar contrasea",description:M.message,variant:"destructive"}),M}},A=async(j={})=>{if(!fn.currentUser)return;const M=xt(Ee,`users/${fn.currentUser.uid}/preferences`,"display"),{combineMode:D,fertilityStartConfig:B,...Z}=j??{},re=B&&typeof B=="object"||D!==void 0,C=re?Cy({current:s?.fertilityStartConfig,incoming:B,legacyCombineMode:D}):s?.fertilityStartConfig,I={...Z};re&&C&&(I.fertilityStartConfig=C,I.combineMode=hF());try{await ax(M,I,{merge:!0}),a(b=>{const L={...b??{theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Vv()},...Z};return re&&C&&(L.fertilityStartConfig=C),L})}catch(b){throw console.error("Failed to save preferences",b),u({title:"Error al guardar preferencias",description:b.message,variant:"destructive"}),b}},x=async j=>{if(fn.currentUser)try{await _U(fn.currentUser,j),t(M=>M&&{...M,...j})}catch(M){throw u({title:"Error al actualizar perfil",description:M.message,variant:"destructive"}),M}},P=async()=>{if(fn.currentUser)try{await PU(fn.currentUser),t(null),a(null)}catch(j){throw u({title:"Error al eliminar cuenta",description:j.message,variant:"destructive"}),j}};return K.jsx(Kx.Provider,{value:{user:e,login:d,register:h,logout:g,resetPassword:m,updateEmail:v,updatePassword:T,preferences:s,savePreferences:A,updateProfile:x,deleteAccount:P,loadingAuth:r},children:n})},Tm=()=>k.useContext(Kx);function is(n){"@babel/helpers - typeof";return is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(n)}function Dn(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Et(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function $t(n){Et(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||is(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Im(n,e){Et(2,arguments);var t=$t(n),r=Dn(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function W4(n,e){Et(2,arguments);var t=$t(n).getTime(),r=Dn(e);return new Date(t+r)}var H4={};function Mu(){return H4}function Cp(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function st(n){Et(1,arguments);var e=$t(n);return e.setHours(0,0,0,0),e}var q4=864e5;function G4(n,e){Et(2,arguments);var t=st(n),r=st(e),i=t.getTime()-Cp(t),s=r.getTime()-Cp(r);return Math.round((i-s)/q4)}function Qx(n,e){Et(2,arguments);var t=$t(n),r=$t(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var Tw=6e4,Iw=36e5,K4=1e3;function Q4(n){return Et(1,arguments),n instanceof Date||is(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ln(n){if(Et(1,arguments),!Q4(n)&&typeof n!="number")return!1;var e=$t(n);return!isNaN(Number(e))}function RS(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Y4(n,e){Et(2,arguments);var t=$t(n),r=$t(e),i=RS(t,r),s=Math.abs(G4(t,r));t.setDate(t.getDate()-i*s);var a=+(RS(t,r)===-i),u=i*(s-a);return u===0?0:u}function Yx(n,e){Et(2,arguments);var t=Dn(e);return W4(n,-t)}var X4=864e5;function J4(n){Et(1,arguments);var e=$t(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/X4)+1}function wu(n){Et(1,arguments);var e=1,t=$t(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Xx(n){Et(1,arguments);var e=$t(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=wu(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=wu(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Z4(n){Et(1,arguments);var e=Xx(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=wu(t);return r}var ej=6048e5;function Jx(n){Et(1,arguments);var e=$t(n),t=wu(e).getTime()-Z4(e).getTime();return Math.round(t/ej)+1}function Fa(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=Mu(),g=Dn((t=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=$t(n),T=v.getUTCDay(),A=(T<g?7:0)+T-g;return v.setUTCDate(v.getUTCDate()-A),v.setUTCHours(0,0,0,0),v}function Sw(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=$t(n),g=m.getUTCFullYear(),v=Mu(),T=Dn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:v.firstWeekContainsDate)!==null&&r!==void 0?r:(d=v.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=new Date(0);A.setUTCFullYear(g+1,0,T),A.setUTCHours(0,0,0,0);var x=Fa(A,e),P=new Date(0);P.setUTCFullYear(g,0,T),P.setUTCHours(0,0,0,0);var j=Fa(P,e);return m.getTime()>=x.getTime()?g+1:m.getTime()>=j.getTime()?g:g-1}function tj(n,e){var t,r,i,s,a,u,d,h;Et(1,arguments);var m=Mu(),g=Dn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),v=Sw(n,e),T=new Date(0);T.setUTCFullYear(v,0,g),T.setUTCHours(0,0,0,0);var A=Fa(T,e);return A}var nj=6048e5;function Zx(n,e){Et(1,arguments);var t=$t(n),r=Fa(t,e).getTime()-tj(t,e).getTime();return Math.round(r/nj)+1}function dt(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var Hs={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return dt(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):dt(r+1,2)},d:function(e,t){return dt(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return dt(e.getUTCHours()%12||12,t.length)},H:function(e,t){return dt(e.getUTCHours(),t.length)},m:function(e,t){return dt(e.getUTCMinutes(),t.length)},s:function(e,t){return dt(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return dt(s,t.length)}},Ol={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rj={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Hs.y(e,t)},Y:function(e,t,r,i){var s=Sw(e,i),a=s>0?s:1-s;if(t==="YY"){var u=a%100;return dt(u,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):dt(a,t.length)},R:function(e,t){var r=Xx(e);return dt(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return dt(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return dt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return dt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return Hs.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return dt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=Zx(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):dt(s,t.length)},I:function(e,t,r){var i=Jx(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):dt(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Hs.d(e,t)},D:function(e,t,r){var i=J4(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):dt(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return dt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return dt(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return dt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=Ol.noon:i===0?s=Ol.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=Ol.evening:i>=12?s=Ol.afternoon:i>=4?s=Ol.morning:s=Ol.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Hs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Hs.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):dt(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):dt(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Hs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Hs.s(e,t)},S:function(e,t){return Hs.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return DS(a);case"XXXX":case"XX":return ca(a);default:return ca(a,":")}},x:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return DS(a);case"xxxx":case"xx":return ca(a);default:return ca(a,":")}},O:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+kS(a,":");default:return"GMT"+ca(a,":")}},z:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+kS(a,":");default:return"GMT"+ca(a,":")}},t:function(e,t,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return dt(a,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,a=s.getTime();return dt(a,t.length)}};function kS(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+dt(s,2)}function DS(n,e){if(n%60===0){var t=n>0?"-":"+";return t+dt(Math.abs(n)/60,2)}return ca(n,e)}function ca(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=dt(Math.floor(i/60),2),a=dt(i%60,2);return r+s+t+a}var NS=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},e1=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ij=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return NS(e,t);var a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",NS(i,t)).replace("{{time}}",e1(s,t))},Mv={p:e1,P:ij},sj=["D","DD"],oj=["YY","YYYY"];function t1(n){return sj.indexOf(n)!==-1}function n1(n){return oj.indexOf(n)!==-1}function bp(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var aj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lj=function(e,t,r){var i,s=aj[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function by(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var uj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hj={date:by({formats:uj,defaultWidth:"full"}),time:by({formats:cj,defaultWidth:"full"}),dateTime:by({formats:dj,defaultWidth:"full"})},fj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pj=function(e,t,r,i){return fj[e]};function Dc(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var u=n.defaultWidth,d=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[d]||n.values[u]}var h=n.argumentCallback?n.argumentCallback(e):e;return i[h]}}var mj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_j={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ej=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Tj={ordinalNumber:Ej,era:Dc({values:mj,defaultWidth:"wide"}),quarter:Dc({values:gj,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Dc({values:yj,defaultWidth:"wide"}),day:Dc({values:vj,defaultWidth:"wide"}),dayPeriod:Dc({values:_j,defaultWidth:"wide",formattingValues:wj,defaultFormattingWidth:"wide"})};function Nc(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?Sj(u,function(g){return g.test(a)}):Ij(u,function(g){return g.test(a)}),h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;var m=e.slice(a.length);return{value:h,rest:m}}}function Ij(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function Sj(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function Pj(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var u=e.slice(i.length);return{value:a,rest:u}}}var Cj=/^(\d+)(th|st|nd|rd)?/i,bj=/\d+/i,Aj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xj={any:[/^b/i,/^(a|c)/i]},Rj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kj={any:[/1/i,/2/i,/3/i,/4/i]},Dj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Nj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fj={ordinalNumber:Pj({matchPattern:Cj,parsePattern:bj,valueCallback:function(e){return parseInt(e,10)}}),era:Nc({matchPatterns:Aj,defaultMatchWidth:"wide",parsePatterns:xj,defaultParseWidth:"any"}),quarter:Nc({matchPatterns:Rj,defaultMatchWidth:"wide",parsePatterns:kj,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Nc({matchPatterns:Dj,defaultMatchWidth:"wide",parsePatterns:Nj,defaultParseWidth:"any"}),day:Nc({matchPatterns:Vj,defaultMatchWidth:"wide",parsePatterns:Mj,defaultParseWidth:"any"}),dayPeriod:Nc({matchPatterns:Oj,defaultMatchWidth:"any",parsePatterns:Lj,defaultParseWidth:"any"})},r1={code:"en-US",formatDistance:lj,formatLong:hj,formatRelative:pj,localize:Tj,match:Fj,options:{weekStartsOn:0,firstWeekContainsDate:1}},Uj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Bj=/^'([^]*?)'?$/,$j=/''/g,zj=/[a-zA-Z]/;function He(n,e,t){var r,i,s,a,u,d,h,m,g,v,T,A,x,P,j,M,D,B;Et(2,arguments);var Z=String(e),re=Mu(),C=(r=(i=t?.locale)!==null&&i!==void 0?i:re.locale)!==null&&r!==void 0?r:r1,I=Dn((s=(a=(u=(d=t?.firstWeekContainsDate)!==null&&d!==void 0?d:t==null||(h=t.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:re.firstWeekContainsDate)!==null&&a!==void 0?a:(g=re.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=Dn((T=(A=(x=(P=t?.weekStartsOn)!==null&&P!==void 0?P:t==null||(j=t.locale)===null||j===void 0||(M=j.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&x!==void 0?x:re.weekStartsOn)!==null&&A!==void 0?A:(D=re.locale)===null||D===void 0||(B=D.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&T!==void 0?T:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var O=$t(n);if(!Ln(O))throw new RangeError("Invalid time value");var L=Cp(O),U=Yx(O,L),V={firstWeekContainsDate:I,weekStartsOn:b,locale:C,_originalDate:O},ce=Z.match(jj).map(function(xe){var Pe=xe[0];if(Pe==="p"||Pe==="P"){var De=Mv[Pe];return De(xe,C.formatLong)}return xe}).join("").match(Uj).map(function(xe){if(xe==="''")return"'";var Pe=xe[0];if(Pe==="'")return Wj(xe);var De=rj[Pe];if(De)return!(t!=null&&t.useAdditionalWeekYearTokens)&&n1(xe)&&bp(xe,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&t1(xe)&&bp(xe,e,String(n)),De(U,xe,C.localize,V);if(Pe.match(zj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Pe+"`");return xe}).join("");return ce}function Wj(n){var e=n.match(Bj);return e?e[1].replace($j,"'"):n}function Hj(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function VS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function qj(n,e){if(n){if(typeof n=="string")return VS(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?VS(n,e):void 0}}function MS(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=qj(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}function Te(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ov(n,e){return Ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Ov(n,e)}function tt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ov(n,e)}function Ap(n){return Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ap(n)}function i1(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i1=function(){return!!n})()}function Gj(n,e){if(e&&(is(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(n)}function nt(n){var e=i1();return function(){var t,r=Ap(n);if(e){var i=Ap(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Gj(this,t)}}function Xe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Kj(n,e){if(is(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function s1(n){var e=Kj(n,"string");return is(e)=="symbol"?e:e+""}function Qj(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,s1(r.key),r)}}function Je(n,e,t){return e&&Qj(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ve(n,e,t){return(e=s1(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Yj=10,o1=(function(){function n(){Xe(this,n),ve(this,"priority",void 0),ve(this,"subPriority",0)}return Je(n,[{key:"validate",value:function(t,r){return!0}}]),n})(),Xj=(function(n){tt(t,n);var e=nt(t);function t(r,i,s,a,u){var d;return Xe(this,t),d=e.call(this),d.value=r,d.validateValue=i,d.setValue=s,d.priority=a,u&&(d.subPriority=u),d}return Je(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,a){return this.setValue(i,s,this.value,a)}}]),t})(o1),Jj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",Yj),ve(Te(r),"subPriority",-1),r}return Je(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}}]),t})(o1),ot=(function(){function n(){Xe(this,n),ve(this,"incompatibleTokens",void 0),ve(this,"priority",void 0),ve(this,"subPriority",void 0)}return Je(n,[{key:"run",value:function(t,r,i,s){var a=this.parse(t,r,i,s);return a?{setter:new Xj(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n})(),Zj=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",140),ve(Te(r),"incompatibleTokens",["R","u","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"});case"GGGGG":return a.era(i,{width:"narrow"});default:return a.era(i,{width:"wide"})||a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,a){return s.era=a,i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),Qt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},hi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yt(n,e){return n&&{value:e(n.value),rest:n.rest}}function Vt(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function fi(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*Iw+s*Tw+a*K4),rest:e.slice(t[0].length)}}function a1(n){return Vt(Qt.anyDigitsSigned,n)}function zt(n,e){switch(n){case 1:return Vt(Qt.singleDigit,e);case 2:return Vt(Qt.twoDigits,e);case 3:return Vt(Qt.threeDigits,e);case 4:return Vt(Qt.fourDigits,e);default:return Vt(new RegExp("^\\d{1,"+n+"}"),e)}}function xp(n,e){switch(n){case 1:return Vt(Qt.singleDigitSigned,e);case 2:return Vt(Qt.twoDigitsSigned,e);case 3:return Vt(Qt.threeDigitsSigned,e);case 4:return Vt(Qt.fourDigitsSigned,e);default:return Vt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Pw(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function l1(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,a=Math.floor(s/100)*100,u=n>=s%100;i=n+a-(u?100:0)}return t?i:1-i}function u1(n){return n%400===0||n%4===0&&n%100!==0}var eB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",130),ve(Te(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="yy"}};switch(s){case"y":return Yt(zt(4,i),u);case"yo":return Yt(a.ordinalNumber(i,{unit:"year"}),u);default:return Yt(zt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a){var u=i.getUTCFullYear();if(a.isTwoDigitYear){var d=l1(a.year,u);return i.setUTCFullYear(d,0,1),i.setUTCHours(0,0,0,0),i}var h=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(h,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),tB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",130),ve(Te(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return Yt(zt(4,i),u);case"Yo":return Yt(a.ordinalNumber(i,{unit:"year"}),u);default:return Yt(zt(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a,u){var d=Sw(i,u);if(a.isTwoDigitYear){var h=l1(a.year,d);return i.setUTCFullYear(h,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Fa(i,u)}var m=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(m,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Fa(i,u)}}]),t})(ot),nB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",130),ve(Te(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s){return xp(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,a){var u=new Date(0);return u.setUTCFullYear(a,0,4),u.setUTCHours(0,0,0,0),wu(u)}}]),t})(ot),rB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",130),ve(Te(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s){return xp(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,a){return i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),iB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",120),ve(Te(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"Q":case"QQ":return zt(s.length,i);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});default:return a.quarter(i,{width:"wide",context:"formatting"})||a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),sB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",120),ve(Te(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"q":case"qq":return zt(s.length,i);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});default:return a.quarter(i,{width:"wide",context:"standalone"})||a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),oB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ve(Te(r),"priority",110),r}return Je(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"M":return Yt(Vt(Qt.month,i),u);case"MM":return Yt(zt(2,i),u);case"Mo":return Yt(a.ordinalNumber(i,{unit:"month"}),u);case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});default:return a.month(i,{width:"wide",context:"formatting"})||a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot),aB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",110),ve(Te(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"L":return Yt(Vt(Qt.month,i),u);case"LL":return Yt(zt(2,i),u);case"Lo":return Yt(a.ordinalNumber(i,{unit:"month"}),u);case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});default:return a.month(i,{width:"wide",context:"standalone"})||a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(ot);function lB(n,e,t){Et(2,arguments);var r=$t(n),i=Dn(e),s=Zx(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var uB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",100),ve(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"w":return Vt(Qt.week,i);case"wo":return a.ordinalNumber(i,{unit:"week"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a,u){return Fa(lB(i,a,u),u)}}]),t})(ot);function cB(n,e){Et(2,arguments);var t=$t(n),r=Dn(e),i=Jx(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var dB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",100),ve(Te(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"I":return Vt(Qt.week,i);case"Io":return a.ordinalNumber(i,{unit:"week"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a){return wu(cB(i,a))}}]),t})(ot),hB=[31,28,31,30,31,30,31,31,30,31,30,31],fB=[31,29,31,30,31,30,31,31,30,31,30,31],pB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",90),ve(Te(r),"subPriority",1),ve(Te(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"d":return Vt(Qt.date,i);case"do":return a.ordinalNumber(i,{unit:"date"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=u1(a),d=i.getUTCMonth();return u?s>=1&&s<=fB[d]:s>=1&&s<=hB[d]}},{key:"set",value:function(i,s,a){return i.setUTCDate(a),i.setUTCHours(0,0,0,0),i}}]),t})(ot),mB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",90),ve(Te(r),"subpriority",1),ve(Te(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"D":case"DD":return Vt(Qt.dayOfYear,i);case"Do":return a.ordinalNumber(i,{unit:"date"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=u1(a);return u?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,a){return i.setUTCMonth(0,a),i.setUTCHours(0,0,0,0),i}}]),t})(ot);function Cw(n,e,t){var r,i,s,a,u,d,h,m;Et(2,arguments);var g=Mu(),v=Dn((r=(i=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:g.weekStartsOn)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&r!==void 0?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=$t(n),A=Dn(e),x=T.getUTCDay(),P=A%7,j=(P+7)%7,M=(j<v?7:0)+A-x;return T.setUTCDate(T.getUTCDate()+M),T}var gB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",90),ve(Te(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Cw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(ot),yB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",90),ve(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"e":case"ee":return Yt(zt(s.length,i),d);case"eo":return Yt(a.ordinalNumber(i,{unit:"day"}),d);case"eee":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Cw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(ot),vB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",90),ve(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"c":case"cc":return Yt(zt(s.length,i),d);case"co":return Yt(a.ordinalNumber(i,{unit:"day"}),d);case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});default:return a.day(i,{width:"wide",context:"standalone"})||a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Cw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(ot);function _B(n,e){Et(2,arguments);var t=Dn(e);t%7===0&&(t=t-7);var r=1,i=$t(n),s=i.getUTCDay(),a=t%7,u=(a+7)%7,d=(u<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+d),i}var wB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",90),ve(Te(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h===0?7:h};switch(s){case"i":case"ii":return zt(s.length,i);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return Yt(a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiii":return Yt(a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Yt(a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);default:return Yt(a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,a){return i=_B(i,a),i.setUTCHours(0,0,0,0),i}}]),t})(ot),EB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",80),ve(Te(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Pw(a),0,0,0),i}}]),t})(ot),TB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",80),ve(Te(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Pw(a),0,0,0),i}}]),t})(ot),IB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",80),ve(Te(r),"incompatibleTokens",["a","b","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Pw(a),0,0,0),i}}]),t})(ot),SB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",70),ve(Te(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"h":return Vt(Qt.hour12h,i);case"ho":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):!u&&a===12?i.setUTCHours(0,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(ot),PB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",70),ve(Te(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"H":return Vt(Qt.hour23h,i);case"Ho":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,a){return i.setUTCHours(a,0,0,0),i}}]),t})(ot),CB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",70),ve(Te(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"K":return Vt(Qt.hour11h,i);case"Ko":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(ot),bB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",70),ve(Te(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"k":return Vt(Qt.hour24h,i);case"ko":return a.ordinalNumber(i,{unit:"hour"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,a){var u=a<=24?a%24:a;return i.setUTCHours(u,0,0,0),i}}]),t})(ot),AB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",60),ve(Te(r),"incompatibleTokens",["t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"m":return Vt(Qt.minute,i);case"mo":return a.ordinalNumber(i,{unit:"minute"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCMinutes(a,0,0),i}}]),t})(ot),xB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",50),ve(Te(r),"incompatibleTokens",["t","T"]),r}return Je(t,[{key:"parse",value:function(i,s,a){switch(s){case"s":return Vt(Qt.second,i);case"so":return a.ordinalNumber(i,{unit:"second"});default:return zt(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCSeconds(a,0),i}}]),t})(ot),RB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",30),ve(Te(r),"incompatibleTokens",["t","T"]),r}return Je(t,[{key:"parse",value:function(i,s){var a=function(d){return Math.floor(d*Math.pow(10,-s.length+3))};return Yt(zt(s.length,i),a)}},{key:"set",value:function(i,s,a){return i.setUTCMilliseconds(a),i}}]),t})(ot),kB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",10),ve(Te(r),"incompatibleTokens",["t","T","x"]),r}return Je(t,[{key:"parse",value:function(i,s){switch(s){case"X":return fi(hi.basicOptionalMinutes,i);case"XX":return fi(hi.basic,i);case"XXXX":return fi(hi.basicOptionalSeconds,i);case"XXXXX":return fi(hi.extendedOptionalSeconds,i);default:return fi(hi.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(ot),DB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",10),ve(Te(r),"incompatibleTokens",["t","T","X"]),r}return Je(t,[{key:"parse",value:function(i,s){switch(s){case"x":return fi(hi.basicOptionalMinutes,i);case"xx":return fi(hi.basic,i);case"xxxx":return fi(hi.basicOptionalSeconds,i);case"xxxxx":return fi(hi.extendedOptionalSeconds,i);default:return fi(hi.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(ot),NB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",40),ve(Te(r),"incompatibleTokens","*"),r}return Je(t,[{key:"parse",value:function(i){return a1(i)}},{key:"set",value:function(i,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t})(ot),VB=(function(n){tt(t,n);var e=nt(t);function t(){var r;Xe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),ve(Te(r),"priority",20),ve(Te(r),"incompatibleTokens","*"),r}return Je(t,[{key:"parse",value:function(i){return a1(i)}},{key:"set",value:function(i,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t})(ot),MB={G:new Zj,y:new eB,Y:new tB,R:new nB,u:new rB,Q:new iB,q:new sB,M:new oB,L:new aB,w:new uB,I:new dB,d:new pB,D:new mB,E:new gB,e:new yB,c:new vB,i:new wB,a:new EB,b:new TB,B:new IB,h:new SB,H:new PB,K:new CB,k:new bB,m:new AB,s:new xB,S:new RB,X:new kB,x:new DB,t:new NB,T:new VB},OB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FB=/^'([^]*?)'?$/,UB=/''/g,jB=/\S/,BB=/[a-zA-Z]/;function $B(n,e,t,r){var i,s,a,u,d,h,m,g,v,T,A,x,P,j;Et(3,arguments);var M=String(n),D=String(e),B=Mu(),Z=(i=(s=void 0)!==null&&s!==void 0?s:B.locale)!==null&&i!==void 0?i:r1;if(!Z.match)throw new RangeError("locale must contain match property");var re=Dn((a=(u=(d=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&d!==void 0?d:B.firstWeekContainsDate)!==null&&u!==void 0?u:(m=B.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(re>=1&&re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=Dn((v=(T=(A=(x=void 0)!==null&&x!==void 0?x:void 0)!==null&&A!==void 0?A:B.weekStartsOn)!==null&&T!==void 0?T:(P=B.locale)===null||P===void 0||(j=P.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&v!==void 0?v:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(D==="")return M===""?$t(t):new Date(NaN);var I={firstWeekContainsDate:re,weekStartsOn:C,locale:Z},b=[new Jj],O=D.match(LB).map(function(se){var oe=se[0];if(oe in Mv){var he=Mv[oe];return he(se,Z.formatLong)}return se}).join("").match(OB),L=[],U=MS(O),V;try{var ce=function(){var oe=V.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&n1(oe)&&bp(oe,D,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&t1(oe)&&bp(oe,D,n);var he=oe[0],we=MB[he];if(we){var Me=we.incompatibleTokens;if(Array.isArray(Me)){var Ue=L.find(function(Lt){return Me.includes(Lt.token)||Lt.token===he});if(Ue)throw new RangeError("The format string mustn't contain `".concat(Ue.fullToken,"` and `").concat(oe,"` at the same time"))}else if(we.incompatibleTokens==="*"&&L.length>0)throw new RangeError("The format string mustn't contain `".concat(oe,"` and any other token at the same time"));L.push({token:he,fullToken:oe});var at=we.run(M,oe,Z.match,I);if(!at)return{v:new Date(NaN)};b.push(at.setter),M=at.rest}else{if(he.match(BB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");if(oe==="''"?oe="'":he==="'"&&(oe=zB(oe)),M.indexOf(oe)===0)M=M.slice(oe.length);else return{v:new Date(NaN)}}};for(U.s();!(V=U.n()).done;){var xe=ce();if(is(xe)==="object")return xe.v}}catch(se){U.e(se)}finally{U.f()}if(M.length>0&&jB.test(M))return new Date(NaN);var Pe=b.map(function(se){return se.priority}).sort(function(se,oe){return oe-se}).filter(function(se,oe,he){return he.indexOf(se)===oe}).map(function(se){return b.filter(function(oe){return oe.priority===se}).sort(function(oe,he){return he.subPriority-oe.subPriority})}).map(function(se){return se[0]}),De=$t(t);if(isNaN(De.getTime()))return new Date(NaN);var W=Yx(De,Cp(De)),Y={},X=MS(Pe),N;try{for(X.s();!(N=X.n()).done;){var z=N.value;if(!z.validate(W,I))return new Date(NaN);var ee=z.set(W,Y,I);Array.isArray(ee)?(W=ee[0],Hj(Y,ee[1])):W=ee}}catch(se){X.e(se)}finally{X.f()}return W}function zB(n){return n.match(FB)[1].replace(UB,"'")}function ye(n,e){var t;Et(1,arguments);var r=Dn((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=GB(n),s;if(i.date){var a=KB(i.date,r);s=QB(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var u=s.getTime(),d=0,h;if(i.time&&(d=YB(i.time),isNaN(d)))return new Date(NaN);if(i.timezone){if(h=XB(i.timezone),isNaN(h))return new Date(NaN)}else{var m=new Date(u+d),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(u+d+h)}var wf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},WB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,HB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,qB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function GB(n){var e={},t=n.split(wf.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],wf.timeZoneDelimiter.test(e.date)&&(e.date=n.split(wf.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=wf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function KB(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function QB(n,e){if(e===null)return new Date(NaN);var t=n.match(WB);if(!t)return new Date(NaN);var r=!!t[4],i=Vc(t[1]),s=Vc(t[2])-1,a=Vc(t[3]),u=Vc(t[4]),d=Vc(t[5])-1;if(r)return n3(e,u,d)?JB(e,u,d):new Date(NaN);var h=new Date(0);return!e3(e,s,a)||!t3(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}function Vc(n){return n?parseInt(n):1}function YB(n){var e=n.match(HB);if(!e)return NaN;var t=Ay(e[1]),r=Ay(e[2]),i=Ay(e[3]);return r3(t,r,i)?t*Iw+r*Tw+i*1e3:NaN}function Ay(n){return n&&parseFloat(n.replace(",","."))||0}function XB(n){if(n==="Z")return 0;var e=n.match(qB);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return i3(r,i)?t*(r*Iw+i*Tw):NaN}function JB(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var ZB=[31,null,31,30,31,30,31,31,30,31,30,31];function c1(n){return n%400===0||n%4===0&&n%100!==0}function e3(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(ZB[e]||(c1(n)?29:28))}function t3(n,e){return e>=1&&e<=(c1(n)?366:365)}function n3(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function r3(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function i3(n,e){return e>=0&&e<=59}const Rp=n=>n instanceof Date?n.toISOString():Array.isArray(n)?n.map(e=>Rp(e)):n&&typeof n=="object"?Object.entries(n).reduce((e,[t,r])=>(r!==void 0&&(e[t]=Rp(r)),e),{}):n;class s3 extends Error{constructor(e,t,r,i,s,a){super(r),this.name="AppError",this.code=e,this.title=t,this.details=i?Rp(i):void 0,this.action=s?Rp(s):void 0,a!==void 0&&(this.cause=a)}toJSON(){return{code:this.code,title:this.title,message:this.message,details:this.details,action:this.action}}}const ht=(n,e,t,r,i,s)=>new s3(n,e,t,r,i,s),OS=(n,e)=>e?`${n} a ${e}`:`${n} en adelante`,Eu=(n,e,t)=>{const r=OS(n?.startDate,n?.endDate);return`El rango ${OS(e,t)} se cruza con el ciclo ${r}. Cambia la fecha para que los ciclos no se superpongan.`},Gd=(n,e)=>{if(!n||!e)return 0;const t=st(ye(n)),r=st(ye(e));return Y4(t,r)+1},Mc=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},qf=(n,e)=>!n||!Array.isArray(n)||!e?[]:[...n].sort((r,i)=>{const s=r.timestamp?ye(r.timestamp):r.iso_date?ye(r.iso_date):0,a=i.timestamp?ye(i.timestamp):i.iso_date?ye(i.iso_date):0;return Qx(s,a)}).map(r=>{const i=Mc(r.temperature_raw),s=Mc(r.temperature_corrected),a=Array.isArray(r.measurements)?r.measurements:[],u=h=>{if(!h)return null;const m=Mc(h.temperature),g=Mc(h.temperature_corrected);return h.use_corrected&&g!==null?g:m!==null?m:g!==null?g:null};let d=Mc(r.temperature_chart);if(d==null&&a.length){const m=a.find(g=>g&&g.selected&&u(g)!==null)||a.find(g=>u(g)!==null);m&&(d=u(m))}return d==null&&(r.use_corrected&&s!==null?d=s:i!==null?d=i:s!==null&&(d=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?He(ye(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?He(ye(r.timestamp),"dd/MM"):r.iso_date?He(ye(r.iso_date),"dd/MM"):"N/A",cycleDay:Gd(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:a,temperature_chart:d,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),o3=async n=>{const e=qe(Ee,`users/${n}/cycles`),t=await pt(e);if(t.empty)return null;const r=t.docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.end_date===null||d.end_date===void 0).sort((d,h)=>(h.start_date||"").localeCompare(d.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=qe(Ee,`users/${n}/cycles/${i.id}/entries`),u=(await pt(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},a3=async(n,e)=>{const t=qe(Ee,`users/${n}/cycles`),i=(await pt(t)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.end_date!==null&&a.end_date!==void 0||e&&a.start_date&&a.start_date<e).sort((a,u)=>(u.start_date||"").localeCompare(a.start_date||""));return await Promise.all(i.map(async a=>{const u=qe(Ee,`users/${n}/cycles/${a.id}/entries`),h=(await pt(u)).docs.map(m=>({id:m.id,...m.data()}));return{id:a.id,startDate:a.start_date,endDate:a.end_date,needsCompletion:!a.end_date,ignoredForAutoCalculations:!!a.ignored_auto_calculations,data:h}}))},l3=async(n,e)=>{const t=xt(Ee,`users/${n}/cycles/${e}`),r=await vm(t);if(!r.exists())return null;const i=r.data(),s=qe(Ee,`users/${n}/cycles/${e}/entries`),u=(await pt(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},u3=async(n,e)=>{const t=qe(Ee,`users/${n}/cycles`),r=await pt(t),i=ye(e),s=r.docs.find(u=>{const d=u.data(),h=d.start_date?ye(d.start_date):null,m=d.end_date?ye(d.end_date):null;if(!h||!i)return!1;const g=m??new Date("9999-12-31");return i>=h&&i<=g});if(s){const u={id:s.id,startDate:s.data().start_date,endDate:s.data().end_date};throw ht("cycle-overlap","Las fechas se superponen",Eu(u,e,null),{conflictCycle:u,proposedStart:e,proposedEnd:null},{label:"Cambiar fecha",hint:"Elige una fecha de inicio que no pise otro ciclo."})}return{id:(await Wl(qe(Ee,`users/${n}/cycles`),{user_id:n,start_date:e,ignored_auto_calculations:!1,end_date:null})).id,start_date:e}},Sd=n=>{if(n.iso_date&&Ln(ye(n.iso_date)))return He(ye(n.iso_date),"yyyy-MM-dd");if(typeof n.timestamp=="string"&&Ln(ye(n.timestamp)))return He(ye(n.timestamp),"yyyy-MM-dd");throw ht("split-invalid-entry","Hay una fecha invlida en un registro","No se pudo mover un registro porque su fecha no tiene un formato vlido. Usa yyyy-MM-dd o una fecha ISO completa.",{entryDate:n?.iso_date??n?.timestamp??null},{label:"Revisar fecha",hint:"Corrige la fecha del registro y vuelve a intentarlo."})},d1=n=>n.map(e=>{const t=e.data(),r=t?.start_date,i=typeof r=="string"?st(ye(r)):null;return{id:e.id,data:t,start:i}}).filter(({start:e})=>e&&Ln(e)).sort((e,t)=>Qx(e.start,t.start)).map(({id:e,data:t})=>({id:e,data:t})),h1=(n,e)=>{const t=n.findIndex(r=>r.id===e);return t===-1?{previous:null,current:null,next:null,nextNext:null}:{previous:t>0?n[t-1]:null,current:n[t],next:t<n.length-1?n[t+1]:null,nextNext:t<n.length-2?n[t+2]:null}},Lv=async({userId:n,fromCycleId:e,toCycleId:t,shouldMoveIsoDate:r,toCycleStartIso:i})=>{if(!n||!e||!t||!i)throw ht("split-invalid-entry","Faltan datos para mover registros","No se pudieron mover los registros porque faltan datos necesarios. Revisa la fecha y vuelve a intentarlo.",{userId:n??null,fromCycleId:e??null,toCycleId:t??null,toCycleStartIso:i??null},{label:"Revisar fecha"});const s=qe(Ee,`users/${n}/cycles/${e}/entries`),u=(await pt(s)).docs.map(D=>{const B=D.data(),Z=Sd(B);return{id:D.id,ref:D.ref,data:B,isoDate:Z}}).filter(D=>r(D.isoDate));if(!u.length)return{movedEntries:0};const d=qe(Ee,`users/${n}/cycles/${t}/entries`),h=await pt(d),m=new Map;for(const D of h.docs){let B=null;try{B=Sd(D.data())}catch{continue}if(m.has(B))throw ht("split-date-conflict","Hay fechas duplicadas",`Ya existen entradas duplicadas para el da ${B} en el ciclo destino.`,{conflictDate:B},{label:"Eliminar/combinar entradas duplicadas"});m.set(B,{id:D.id,ref:D.ref,data:D.data()})}let g=ns(Ee),v=0;const T=async()=>{v>=400&&(await g.commit(),g=ns(Ee),v=0)},A=async(D,B)=>{await T(),g.set(D,B),v+=1},x=async(D,B)=>{await T(),g.update(D,B),v+=1},P=async D=>{await T(),g.delete(D),v+=1},j=D=>D==null||typeof D=="string"&&D.trim()==="",M=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const D of u){const B=m.get(D.isoDate),Z=Gd(D.isoDate,i);if(B){const b={cycle_day:Z};for(const U of M){const V=B.data?.[U],ce=D.data?.[U];j(V)&&!j(ce)&&(b[U]=ce)}await x(B.ref,b);const O=qe(Ee,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),L=await pt(O);for(const U of L.docs){const V=xt(qe(Ee,`users/${n}/cycles/${t}/entries/${B.id}/measurements`));await A(V,U.data()),await P(U.ref)}await P(D.ref);continue}const re=xt(Ee,`users/${n}/cycles/${t}/entries/${D.id}`);await A(re,{...D.data,cycle_day:Z});const C=qe(Ee,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),I=await pt(C);for(const b of I.docs){const O=xt(Ee,`users/${n}/cycles/${t}/entries/${D.id}/measurements/${b.id}`);await A(O,b.data()),await P(b.ref)}await P(D.ref)}return v>0&&await g.commit(),{movedEntries:u.length}},f1=async(n,e,t)=>{if(!n||!e||!t)return;const r=qe(Ee,`users/${n}/cycles/${e}/entries`),i=await pt(r);let s=ns(Ee),a=0;const u=async()=>{a>=400&&(await s.commit(),s=ns(Ee),a=0)},d=async(h,m)=>{await u(),s.update(h,m),a+=1};for(const h of i.docs){const m=h.data();let g=null;try{g=Sd(m)}catch{continue}const v=Gd(g,t);await d(h.ref,{cycle_day:v})}a>0&&await s.commit()},p1=async(n,e,t,r)=>{if(!n||!e||!t||!r)throw ht("split-invalid-entry","Faltan datos para dividir el ciclo","No se pudo dividir el ciclo porque faltan datos requeridos. Revisa la fecha elegida e intntalo de nuevo.",{userId:n??null,previousCycleId:e??null,newCycleId:t??null,startDate:r??null},{label:"Revisar fecha"});const i=ye(r);if(!Ln(i))throw ht("split-invalid-date","La fecha de inicio no es vlida","La fecha ingresada para iniciar el nuevo ciclo no tiene un formato vlido. Usa yyyy-MM-dd o ISO.",{startDate:r},{label:"Revisar fecha"});const s=qe(Ee,`users/${n}/cycles/${e}/entries`),u=(await pt(s)).docs.map(D=>{const B=D.data(),Z=Sd(B);return{id:D.id,ref:D.ref,data:B,isoDate:Z}}).filter(D=>ye(D.isoDate)>=i);if(!u.length)return{movedEntries:0};const d=qe(Ee,`users/${n}/cycles/${t}/entries`),h=await pt(d),m=new Map;for(const D of h.docs){const B=D.data();let Z=null;try{Z=Sd(B)}catch{continue}if(m.has(Z))throw ht("split-date-conflict","Hay fechas duplicadas",`Ya existen entradas duplicadas para el da ${Z} en el ciclo destino.`,{conflictDate:Z},{label:"Eliminar/combinar entradas duplicadas"});m.set(Z,{id:D.id,ref:D.ref,data:B})}let g=ns(Ee),v=0;const T=async()=>{v>=400&&(await g.commit(),g=ns(Ee),v=0)},A=async(D,B)=>{await T(),g.set(D,B),v+=1},x=async(D,B)=>{await T(),g.update(D,B),v+=1},P=async D=>{await T(),g.delete(D),v+=1},j=D=>D==null||typeof D=="string"&&D.trim()==="",M=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const D of u){const B=m.get(D.isoDate),Z=Gd(D.isoDate,r);if(B){const b={cycle_day:Z};for(const U of M){const V=B.data?.[U],ce=D.data?.[U];j(V)&&!j(ce)&&(b[U]=ce)}await x(B.ref,b);const O=qe(Ee,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),L=await pt(O);for(const U of L.docs){const V=xt(qe(Ee,`users/${n}/cycles/${t}/entries/${B.id}/measurements`));await A(V,U.data()),await P(U.ref)}await P(D.ref);continue}const re=xt(Ee,`users/${n}/cycles/${t}/entries/${D.id}`);await A(re,{...D.data,cycle_day:Z});const C=qe(Ee,`users/${n}/cycles/${e}/entries/${D.id}/measurements`),I=await pt(C);for(const b of I.docs){const O=xt(Ee,`users/${n}/cycles/${t}/entries/${D.id}/measurements/${b.id}`);await A(O,b.data()),await P(b.ref)}await P(D.ref)}return v>0&&await g.commit(),{movedEntries:u.length}},c3=async(n,e,t)=>{if(!n||!t)throw ht("cycle-range-invalid","Faltan datos del ciclo","No se puede iniciar un ciclo nuevo sin la fecha de inicio.",{userId:n??null,startDate:t??null},{label:"Cambiar fecha"});const r=ye(t);if(!Ln(r))throw ht("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela e intntalo de nuevo.",{startDate:t},{label:"Cambiar fecha"});const i=qe(Ee,`users/${n}/cycles`),a=(await pt(i)).docs.find(d=>{if(d.id===e)return!1;const h=d.data(),m=h.start_date?ye(h.start_date):null,g=h.end_date?ye(h.end_date):null;if(!m)return!1;const v=g??new Date("9999-12-31");return r>=m&&r<=v});if(a){const d={id:a.id,startDate:a.data().start_date,endDate:a.data().end_date};throw ht("cycle-overlap","Las fechas se superponen",Eu(d,t,null),{conflictCycle:d,proposedStart:t,proposedEnd:null},{label:"Cambiar fecha",hint:"Elige una fecha de inicio fuera del rango en conflicto."})}const u=xt(qe(Ee,`users/${n}/cycles`));if(await ax(u,{user_id:n,start_date:t,ignored_auto_calculations:!1,end_date:null}),e){await p1(n,e,u.id,t);const d=xt(Ee,`users/${n}/cycles/${e}`),h=He(Im(st(r),-1),"yyyy-MM-dd");await Va(d,{end_date:h})}return{id:u.id,start_date:t}},d3=async n=>{const e=n.user_id,t=n.timestamp??new Date().toISOString(),r={timestamp:t,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation,mucus_appearance:n.mucus_appearance,fertility_symbol:n.fertility_symbol,observations:n.observations,had_relations:!!(n.had_relations??n.hadRelations??!1),ignored:n.ignored,peak_marker:n.peak_marker??null},i=qe(Ee,`users/${e}/cycles`),s=await pt(i),a=ye(t),u=s.docs.filter(h=>{const m=h.data(),g=m.start_date?ye(m.start_date):null,v=m.end_date?ye(m.end_date):null;return g&&a>=g&&(!v||a<=v)});let d=null;if(u.length>1?d=u.sort((h,m)=>{const g=ye(h.data().start_date);return ye(m.data().start_date)-g})[0]:u.length===1&&(d=u[0]),d){const h=await Wl(qe(Ee,`users/${e}/cycles/${d.id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=qe(Ee,`users/${e}/cycles/${d.id}/entries/${h.id}/measurements`);for(const g of n.measurements)await Wl(m,g)}return{id:h.id}}if(n.cycle_id){const h=await Wl(qe(Ee,`users/${e}/cycles/${n.cycle_id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=qe(Ee,`users/${e}/cycles/${n.cycle_id}/entries/${h.id}/measurements`);for(const g of n.measurements)await Wl(m,g)}return{id:h.id}}return{id:null}},xy=async(n,e,t,r)=>{const i=xt(Ee,`users/${n}/cycles/${e}/entries/${t}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],a={};for(const u of s)Object.prototype.hasOwnProperty.call(r,u)&&(a[u]=r[u]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(a.timestamp=r.timestamp),Object.keys(a).length===0)return{id:t};if(await Va(i,a),Array.isArray(r.measurements)&&(r.measurements.length>=2||r.measurements.length===0)){const u=qe(Ee,`users/${n}/cycles/${e}/entries/${t}/measurements`),d=await pt(u);if(await Promise.all(d.docs.map(h=>hw(h.ref))),r.measurements.length>=2)for(const h of r.measurements)await Wl(u,h)}return{id:t}},h3=async(n,e,t)=>{try{const r=qe(Ee,`users/${n}/cycles/${e}/entries/${t}/measurements`);return(await pt(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error fetching measurements for entry",t,r),[]}},Fv=async(n,e=400)=>{if(!(!Array.isArray(n)||n.length===0))for(let t=0;t<n.length;t+=e){const r=n.slice(t,t+e),i=ns(Ee);r.forEach(s=>i.delete(s)),await i.commit()}},LS=async(n,e,t)=>{const r=xt(Ee,`users/${n}/cycles/${e}/entries/${t}`),i=qe(Ee,`users/${n}/cycles/${e}/entries/${t}/measurements`),a=(await pt(i)).docs.map(u=>u.ref);await Fv(a),await hw(r)},Ry=async(n,e,t,r,i=!1)=>{const s=xt(Ee,`users/${e}/cycles/${n}`),a=await vm(s);if(!a.exists())throw ht("unknown","No se encontr el ciclo","No pudimos actualizar las fechas porque el ciclo ya no existe.",{cycleId:n,userId:e},{label:"Actualizar pantalla"});const u=a.data(),d=t??u.start_date,h=r!==void 0?r:u.end_date,m=d?ye(d):null,g=h?ye(h):null;if(m&&g&&g<m)throw ht("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior a la fecha de inicio. Corrige la fecha final.",{startDate:d,endDate:h,invalidField:"endDate"},{label:"Cambiar fecha"});const v=qe(Ee,`users/${e}/cycles`),A=(await pt(v)).docs.find(j=>{if(j.id===n)return!1;const M=j.data(),D=M.start_date?ye(M.start_date):null,B=M.end_date?ye(M.end_date):null;if(!D)return!1;const Z=B??new Date("9999-12-31"),re=g??new Date("9999-12-31");return m<=Z&&D<=re}),x=A?{id:A.id,startDate:A.data().start_date,endDate:A.data().end_date}:null;if(i)return{overlap:x};if(A)throw ht("cycle-overlap","Las fechas se superponen",Eu(x,d,h),{conflictCycle:x,proposedStart:d,proposedEnd:h},{label:"Cambiar fecha"});const P={};t!==void 0&&(P.start_date=t),r!==void 0&&(P.end_date=r),await Va(s,P)},f3=async(n,e,t)=>{const r=xt(Ee,`users/${n}/cycles/${e}`);await Va(r,{ignored_auto_calculations:t})},p3=async(n,e,t,r)=>{if(!t)return;const i=st(ye(t));if(!Ln(i))throw ht("cycle-range-invalid","La fecha de fin no es vlida","La fecha de fin no tiene un formato vlido. Corrgela para continuar.",{endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const s=qe(Ee,`users/${n}/cycles`),a=await pt(s),u=d1(a.docs),{current:d,next:h,nextNext:m}=h1(u,e);if(!d||!h)return;const g=r||d.data.start_date||null,v=g?st(ye(g)):null;if(v&&i<v)throw ht("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior al inicio del ciclo actual. Corrige la fecha final.",{startDate:g||d.data.start_date||null,endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const T=st(Im(i,1)),A=He(T,"yyyy-MM-dd");if(m?.data?.start_date){const j=st(ye(m.data.start_date));if(T>=j){const M={id:m.id,startDate:m.data.start_date,endDate:m.data.end_date};throw ht("cycle-overlap","Las fechas se superponen",Eu(M,A,h.data.end_date??null),{conflictCycle:M,proposedStart:A,proposedEnd:h.data.end_date??null},{label:"Cambiar fecha"})}}if(h.data.end_date){const j=st(ye(h.data.end_date));if(T>j)throw ht("cycle-range-invalid","Rango de fechas invlido","La fecha de inicio propuesta para el siguiente ciclo queda despus de su fecha de fin. Corrige las fechas.",{nextCycleId:h.id,nextStartDate:A,nextEndDate:h.data.end_date,invalidField:"startDate"},{label:"Cambiar fecha"})}const x=st(ye(h.data.start_date));T>x?await Lv({userId:n,fromCycleId:h.id,toCycleId:e,shouldMoveIsoDate:j=>st(ye(j))<T,toCycleStartIso:g||d.data.start_date}):T<x&&await p1(n,e,h.id,A);const P=xt(Ee,`users/${n}/cycles/${h.id}`);await Va(P,{start_date:A}),await f1(n,h.id,A)},m3=async(n,e,t)=>{if(!t)return;const r=st(ye(t));if(!Ln(r))throw ht("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela para continuar.",{startDate:t,invalidField:"startDate"},{label:"Cambiar fecha"});const i=qe(Ee,`users/${n}/cycles`),s=await pt(i),a=d1(s.docs),{previous:u,current:d,next:h}=h1(a,e);if(!d)return;const m=d.data.start_date,g=m?st(ye(m)):null,v=d.data.end_date?st(ye(d.data.end_date)):null;if(u?.data?.start_date){const A=st(ye(u.data.start_date));if(r<=A){const x={id:u.id,startDate:u.data.start_date,endDate:u.data.end_date};throw ht("cycle-overlap","Las fechas se superponen",Eu(x,He(r,"yyyy-MM-dd"),d.data.end_date??null),{conflictCycle:x,proposedStart:He(r,"yyyy-MM-dd"),proposedEnd:d.data.end_date??null},{label:"Cambiar fecha"})}}if(h?.data?.start_date){const A=st(ye(h.data.start_date));if(r>=A){const x={id:h.id,startDate:h.data.start_date,endDate:h.data.end_date};throw ht("cycle-overlap","Las fechas se superponen",Eu(x,He(r,"yyyy-MM-dd"),d.data.end_date??null),{conflictCycle:x,proposedStart:He(r,"yyyy-MM-dd"),proposedEnd:d.data.end_date??null},{label:"Cambiar fecha"})}}if(v&&r>v)throw ht("cycle-range-invalid","Rango de fechas invlido","La fecha de inicio no puede ser posterior a la fecha de fin del ciclo. Corrige la fecha de inicio.",{startDate:He(r,"yyyy-MM-dd"),endDate:d.data.end_date,invalidField:"startDate"},{label:"Cambiar fecha"});if(u){const A=xt(Ee,`users/${n}/cycles/${u.id}`),x=He(Im(r,-1),"yyyy-MM-dd");await Va(A,{end_date:x}),g&&r<g?await Lv({userId:n,fromCycleId:u.id,toCycleId:e,shouldMoveIsoDate:P=>st(ye(P))>=r,toCycleStartIso:He(r,"yyyy-MM-dd")}):g&&r>g&&await Lv({userId:n,fromCycleId:e,toCycleId:u.id,shouldMoveIsoDate:P=>st(ye(P))<r,toCycleStartIso:u.data.start_date})}const T=xt(Ee,`users/${n}/cycles/${e}`);await Va(T,{start_date:He(r,"yyyy-MM-dd")}),await f1(n,e,He(r,"yyyy-MM-dd"))},FS=async(n,e)=>{const t=qe(Ee,`users/${n}/cycles/${e}/entries`),r=await pt(t),i=[];for(const s of r.docs){const a=qe(Ee,`users/${n}/cycles/${e}/entries/${s.id}/measurements`);(await pt(a)).docs.forEach(d=>{i.push(d.ref)})}await Fv(i),await Fv(r.docs.map(s=>s.ref)),await hw(xt(Ee,`users/${n}/cycles/${e}`))},g3=async(n,e)=>{if(!n||!e)throw ht("undo-not-current","No se puede deshacer este ciclo","Faltan datos para deshacer el ciclo actual. Vuelve a abrir el ciclo e intntalo otra vez.",{userId:n??null,currentCycleId:e??null},{label:"Volver al ciclo actual"});const t=xt(Ee,`users/${n}/cycles/${e}`),r=await vm(t);if(!r.exists())throw ht("undo-not-current","No se encontr el ciclo actual","No pudimos deshacer el ciclo porque ya no existe.",{currentCycleId:e},{label:"Actualizar pantalla"});const i=r.data();if(i.end_date!==null&&i.end_date!==void 0)throw ht("undo-not-current","Solo puedes deshacer el ciclo actual","Este ciclo ya est cerrado. Para deshacer, abre el ciclo actual.",{currentCycleId:e,endDate:i.end_date},{label:"Volver al ciclo actual"});if(!i.start_date||!Ln(ye(i.start_date)))throw ht("undo-not-current","No se puede deshacer el ciclo","La fecha de inicio del ciclo actual no es vlida. Corrige la fecha del ciclo actual.",{currentCycleId:e,startDate:i.start_date??null},{label:"Cambiar fecha"});const s=await pt(qe(Ee,`users/${n}/cycles`)),a=He(Im(ye(i.start_date),-1),"yyyy-MM-dd"),u=s.docs.filter(I=>I.id!==e).map(I=>({id:I.id,...I.data()})).filter(I=>I.end_date===a).sort((I,b)=>(b.start_date||"").localeCompare(I.start_date||""));if(!u.length)throw ht("no-previous-cycle","No hay un ciclo anterior para recuperar","No encontramos un ciclo previo que termine justo antes del ciclo actual. Revisa las fechas de tus ciclos.",{currentCycleId:e,expectedPreviousEndDate:a},{label:"Revisar fechas de ciclos"});const d=u[0];if(!d.start_date||!Ln(ye(d.start_date)))throw ht("no-previous-cycle","El ciclo anterior tiene una fecha invlida","No se puede deshacer porque el ciclo anterior tiene una fecha de inicio no vlida.",{previousCycleId:d.id,previousStartDate:d.start_date??null},{label:"Cambiar fecha"});const h=I=>{if(I.iso_date&&Ln(ye(I.iso_date)))return He(ye(I.iso_date),"yyyy-MM-dd");if(typeof I.timestamp=="string"&&Ln(ye(I.timestamp)))return He(ye(I.timestamp),"yyyy-MM-dd");throw ht("split-invalid-entry","Hay una fecha invlida en un registro","No se pudo deshacer porque un registro tiene una fecha invlida. Usa yyyy-MM-dd o ISO.",{entryDate:I?.iso_date??I?.timestamp??null},{label:"Revisar fecha"})},m=I=>{try{return I.iso_date&&Ln(ye(I.iso_date))?He(ye(I.iso_date),"yyyy-MM-dd"):typeof I.timestamp=="string"&&Ln(ye(I.timestamp))?He(ye(I.timestamp),"yyyy-MM-dd"):null}catch{return null}},g=qe(Ee,`users/${n}/cycles/${d.id}/entries`),v=await pt(g),T=new Set;v.docs.forEach(I=>{const b=m(I.data());b&&T.add(b)});const A=qe(Ee,`users/${n}/cycles/${e}/entries`),P=(await pt(A)).docs.map(I=>{const b=I.data(),O=h(b);if(T.has(O))throw ht("undo-date-conflict","Hay conflicto de fechas al deshacer",`Ya existe una entrada para el da ${O} en el ciclo anterior.`,{conflictDate:O,previousCycleId:d.id},{label:"Eliminar/combinar entradas duplicadas"});return T.add(O),{ref:I.ref,id:I.id,data:b,isoDate:O}});let j=ns(Ee),M=0;const D=async()=>{M>=400&&(await j.commit(),j=ns(Ee),M=0)},B=async(I,b)=>{await D(),j.set(I,b),M+=1},Z=async I=>{await D(),j.delete(I),M+=1},re=async(I,b)=>{await D(),j.update(I,b),M+=1};for(const I of P){const b=xt(Ee,`users/${n}/cycles/${d.id}/entries/${I.id}`),O=Gd(I.isoDate,d.start_date);await B(b,{...I.data,cycle_day:O});const L=qe(Ee,`users/${n}/cycles/${e}/entries/${I.id}/measurements`),U=await pt(L);for(const V of U.docs){const ce=xt(Ee,`users/${n}/cycles/${d.id}/entries/${I.id}/measurements/${V.id}`);await B(ce,V.data()),await Z(V.ref)}await Z(I.ref)}const C=xt(Ee,`users/${n}/cycles/${d.id}`);await re(C,{end_date:null}),await Z(t),M>0&&await j.commit()},y3="RNFApp",v3=1,kp="cycleData",bw="cycle-data:",Aw=()=>typeof indexedDB<"u",xw=()=>typeof localStorage<"u",_3=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),w3=()=>new Promise((n,e)=>{const t=indexedDB.open(y3,v3);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(kp)||r.createObjectStore(kp)},t.onsuccess=()=>{n(t.result)},t.onerror=()=>{e(t.error)}}),Rw=async(n,e)=>{const t=await w3();return new Promise((r,i)=>{const s=t.transaction(kp,n),a=s.objectStore(kp),u=e(a);s.oncomplete=()=>{t.close(),r(u?.result)},s.onerror=()=>{t.close(),i(s.error??u?.error)}})},US=async n=>{if(!n)return null;if(Aw())try{return await Rw("readonly",t=>t.get(n))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(xw())try{const e=localStorage.getItem(`${bw}${n}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},E3=async(n,e)=>{if(!n)return;const t=_3(e);if(Aw())try{await Rw("readwrite",r=>r.put(t,n));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(xw())try{localStorage.setItem(`${bw}${n}`,JSON.stringify(t))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},T3=async n=>{if(n){if(Aw())try{await Rw("readwrite",e=>e.delete(n))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(xw())try{localStorage.removeItem(`${bw}${n}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}};const I3="type.googleapis.com/google.protobuf.Int64Value",S3="type.googleapis.com/google.protobuf.UInt64Value";function m1(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Dp(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Dp(e));if(typeof n=="function"||typeof n=="object")return m1(n,e=>Dp(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Tu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case I3:case S3:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Tu(e)):typeof n=="function"||typeof n=="object"?m1(n,e=>Tu(e)):n}const kw="functions";const jS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qn extends Pi{constructor(e,t,r){super(`${kw}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Qn.prototype)}}function P3(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Np(n,e){let t=P3(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!jS[a])return new Qn("internal","internal");t=jS[a],r=a}const u=s.message;typeof u=="string"&&(r=u),i=s.details,i!==void 0&&(i=Tu(i))}}catch{}return t==="ok"?null:new Qn(t,r,i)}class C3{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,qn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const Uv="us-central1",b3=/^data: (.*?)(?:\n|$)/;function A3(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Qn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class x3{constructor(e,t,r,i,s=Uv,a=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new C3(e,t,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Uv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function R3(n,e,t){const r=Eo(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(m_(n.emulatorOrigin+"/backends"),g_("Functions",!0))}function k3(n,e,t){const r=i=>N3(n,e,i,{});return r.stream=(i,s)=>M3(n,e,i,s),r}function g1(n){return n.emulatorOrigin&&Eo(n.emulatorOrigin)?"include":void 0}async function D3(n,e,t,r,i){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:g1(i)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function y1(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function N3(n,e,t,r){const i=n._url(e);return V3(n,i,t,r)}async function V3(n,e,t,r){t=Dp(t);const i={data:t},s=await y1(n,r),a=r.timeout||7e4,u=A3(a),d=await Promise.race([D3(e,i,s,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!d)throw new Qn("cancelled","Firebase Functions instance was deleted.");const h=Np(d.status,d.json);if(h)throw h;if(!d.json)throw new Qn("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Qn("internal","Response is missing data field.");return{data:Tu(m)}}function M3(n,e,t,r){const i=n._url(e);return O3(n,i,t,r||{})}async function O3(n,e,t,r){t=Dp(t);const i={data:t},s=await y1(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r?.signal,credentials:g1(n)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const A=new Qn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const T=Np(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let u,d;const h=new Promise((v,T)=>{u=v,d=T});r?.signal?.addEventListener("abort",()=>{const v=new Qn("cancelled","Request was cancelled.");d(v)});const m=a.body.getReader(),g=L3(m,u,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:T,done:A}=await v.read();return{value:T,done:A}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:h}}function L3(n,e,t,r){const i=(a,u)=>{const d=a.match(b3);if(!d)return;const h=d[1];try{const m=JSON.parse(h);if("result"in m){e(Tu(m.result));return}if("message"in m){u.enqueue(Tu(m.message));return}if("error"in m){const g=Np(0,m);u.error(g),t(g);return}}catch(m){if(m instanceof Qn){u.error(m),t(m);return}}},s=new TextDecoder;return new ReadableStream({start(a){let u="";return d();async function d(){if(r?.aborted){const h=new Qn("cancelled","Request was cancelled");return a.error(h),t(h),Promise.resolve()}try{const{value:h,done:m}=await n.read();if(m){u.trim()&&i(u.trim(),a),a.close();return}if(r?.aborted){const v=new Qn("cancelled","Request was cancelled");a.error(v),t(v),await n.cancel();return}u+=s.decode(h,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&i(v.trim(),a);return d()}catch(h){const m=h instanceof Qn?h:Np(0,null);a.error(m),t(m)}}},cancel(){return n.cancel()}})}const BS="@firebase/functions",$S="0.13.1";const F3="auth-internal",U3="app-check-internal",j3="messaging-internal";function B3(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider(F3),a=t.getProvider(j3),u=t.getProvider(U3);return new x3(i,s,a,u,r)};Ca(new co(kw,e,"PUBLIC").setMultipleInstances(!0)),gi(BS,$S,n),gi(BS,$S,"esm2020")}function $3(n=__(),e=Uv){const r=Gp(yt(n),kw).getImmediate({identifier:e}),i=IC("functions");return i&&z3(r,...i),r}function z3(n,e,t){R3(yt(n),e,t)}function W3(n,e,t){return k3(yt(n),e)}B3();const H3=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=r,t.setPlatform=i,t},q3=n=>n.CapacitorPlatforms=H3(n),v1=q3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});v1.addPlatform;v1.setPlatform;var Iu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Iu||(Iu={}));class ky extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const G3=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},K3=n=>{var e,t,r,i,s;const a=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},d=u.Plugins=u.Plugins||{},h=n.CapacitorPlatforms,m=()=>a!==null?a.name:G3(n),g=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||m,v=()=>g()!=="web",T=((t=h?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||v,A=C=>{const I=B.get(C);return!!(I?.platforms.has(g())||j(C))},x=((r=h?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||A,P=C=>{var I;return(I=u.PluginHeaders)===null||I===void 0?void 0:I.find(b=>b.name===C)},j=((i=h?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||P,M=C=>n.console.error(C),D=(C,I,b)=>Promise.reject(`${b} does not have an implementation of "${I}".`),B=new Map,Z=(C,I={})=>{const b=B.get(C);if(b)return console.warn(`Capacitor plugin "${C}" already registered. Cannot register plugins twice.`),b.proxy;const O=g(),L=j(C);let U;const V=async()=>(!U&&O in I?U=typeof I[O]=="function"?U=await I[O]():U=I[O]:a!==null&&!U&&"web"in I&&(U=typeof I.web=="function"?U=await I.web():U=I.web),U),ce=(X,N)=>{var z,ee;if(L){const se=L?.methods.find(oe=>N===oe.name);if(se)return se.rtype==="promise"?oe=>u.nativePromise(C,N.toString(),oe):(oe,he)=>u.nativeCallback(C,N.toString(),oe,he);if(X)return(z=X[N])===null||z===void 0?void 0:z.bind(X)}else{if(X)return(ee=X[N])===null||ee===void 0?void 0:ee.bind(X);throw new ky(`"${C}" plugin is not implemented on ${O}`,Iu.Unimplemented)}},xe=X=>{let N;const z=(...ee)=>{const se=V().then(oe=>{const he=ce(oe,X);if(he){const we=he(...ee);return N=we?.remove,we}else throw new ky(`"${C}.${X}()" is not implemented on ${O}`,Iu.Unimplemented)});return X==="addListener"&&(se.remove=async()=>N()),se};return z.toString=()=>`${X.toString()}() { [capacitor code] }`,Object.defineProperty(z,"name",{value:X,writable:!1,configurable:!1}),z},Pe=xe("addListener"),De=xe("removeListener"),W=(X,N)=>{const z=Pe({eventName:X},N),ee=async()=>{const oe=await z;De({eventName:X,callbackId:oe},N)},se=new Promise(oe=>z.then(()=>oe({remove:ee})));return se.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ee()},se},Y=new Proxy({},{get(X,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?W:Pe;case"removeListener":return De;default:return xe(N)}}});return d[C]=Y,B.set(C,{name:C,proxy:Y,platforms:new Set([...Object.keys(I),...L?[O]:[]])}),Y},re=((s=h?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||Z;return u.convertFileSrc||(u.convertFileSrc=C=>C),u.getPlatform=g,u.handleError=M,u.isNativePlatform=T,u.isPluginAvailable=x,u.pluginMethodNoop=D,u.registerPlugin=re,u.Exception=ky,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},Q3=n=>n.Capacitor=K3(n),yo=Q3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),_1=yo.registerPlugin;yo.Plugins;class w1{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new yo.Exception(e,Iu.Unimplemented)}unavailable(e="not available"){return new yo.Exception(e,Iu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const zS=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),WS=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Y3 extends w1{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=WS(i).trim(),s=WS(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=zS(e.key),r=zS(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}_1("CapacitorCookies",{web:()=>new Y3});const X3=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),J3=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=n[e[a]],i),{})},Z3=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[s,a]=i;let u,d;return Array.isArray(a)?(d="",a.forEach(h=>{u=e?encodeURIComponent(h):h,d+=`${s}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(a):a,d=`${s}=${u}`),`${r}&${d}`},"").substr(1):null,e6=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=J3(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.data||{}))s.set(a,u);t.body=s.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{s.append(d,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class t6 extends w1{async request(e){const t=e6(e,e.webFetchExtra),r=Z3(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let d,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),d=await X3(h);break;case"json":d=await s.json();break;default:d=await s.text()}const m={};return s.headers.forEach((g,v)=>{m[v]=g}),{data:d,headers:m,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}_1("CapacitorHttp",{web:()=>new t6});const n6=n=>{if(!n)return null;const e=n.unit,t=Number(n.value);return Number.isFinite(t)?e==="fahrenheit"?(t-32)/1.8:t:null},Gf=["BasalBodyTemperature"],r6=["BasalBodyTemperature","READ_BASAL_BODY_TEMPERATURE","android.permission.health.READ_BASAL_BODY_TEMPERATURE"],HS=n=>String(n||"").toLowerCase().replace(/^android\.permission\.health\./,"").replace(/^read_/,"").replace(/[^a-z0-9]/g,""),i6=n=>{try{const e=new WeakSet;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r},2)}catch{try{return String(n)}catch{return"[Unstringifiable]"}}},s6=(n,e)=>{const t=e&&typeof e=="object"?Object.keys(e):[];console.warn(`${n} keys=${t.join(",")}
${i6(e)}`)},Dw=n=>typeof n=="string"?n:n?.availability??n?.value??n?.status,jv=n=>{if(n?.allPermissionsGranted===!0)return!0;const e=n?.permissionResults,t=n?.permissions?.read??n?.readPermissions??e?.read??(Array.isArray(e)?e:null)??n?.read,r=r6.map(HS),i=a=>r.includes(HS(a));if(n===!0||n?.hasAllPermissions===!0)return!0;const s=n?.grantedPermissions??n?.permissionsGranted;return Array.isArray(s)&&s.every(a=>typeof a=="string")?s.some(i):Array.isArray(t)&&t.every(a=>typeof a=="string")?t.some(i):Array.isArray(t)&&t.every(a=>typeof a=="boolean")?t.every(Boolean):Array.isArray(t)&&t.every(a=>a&&typeof a=="object")?t.some(a=>{const u=a.permission??a.name??a.type??a.recordType??a.value,d=a.granted??a.allowed??a.isGranted??a.status;return i(u)&&!!d}):t&&typeof t=="object"?Object.entries(t).some(([a,u])=>{const d=typeof u=="boolean"?u:!!(u?.granted??u?.allowed??u?.value??u?.status);return i(a)&&d}):(s6("[HealthConnect] Unexpected permission response shape",n),!1)};async function o6(){if(!yo.isNativePlatform())return{isAvailable:!1,hasPermissions:!1,availability:"NotNative"};const{HealthConnect:n}=await Si(async()=>{const{HealthConnect:i}=await import("./index-3cZU5CL-.js");return{HealthConnect:i}},[]),e=await n.checkAvailability(),t=Dw(e);if(t!=="Available")return{isAvailable:!1,hasPermissions:!1,availability:t};const r=await n.checkHealthPermissions({read:Gf,write:[]});return{isAvailable:!0,hasPermissions:jv(r),availability:t}}async function a6(){const{HealthConnect:n}=await Si(async()=>{const{HealthConnect:s}=await import("./index-3cZU5CL-.js");return{HealthConnect:s}},[]),e=await n.checkAvailability(),t=Dw(e);if(t!=="Available")throw new Error(`HEALTH_CONNECT_${t||"Unknown"}`);const r=await n.checkHealthPermissions({read:Gf,write:[]});if(jv(r))return!0;await n.requestHealthPermissions({read:Gf,write:[]});const i=await n.checkHealthPermissions({read:Gf,write:[]});return jv(i)}async function l6({startDate:n}){if(!yo.isNativePlatform())throw new Error("HEALTH_CONNECT_ONLY_IN_APP");const{HealthConnect:e}=await Si(async()=>{const{HealthConnect:m}=await import("./index-3cZU5CL-.js");return{HealthConnect:m}},[]),t=await e.checkAvailability(),r=Dw(t);if(r!=="Available")throw new Error(`HEALTH_CONNECT_${r||"Unknown"}`);if(!await a6())throw new Error("HEALTH_CONNECT_PERMISSION_DENIED");const s=ye(n);if(!n||Number.isNaN(s?.getTime?.()))throw new Error("HEALTH_CONNECT_INVALID_START_DATE");const a=st(s),u=new Date;return((await e.readRecords({type:"BasalBodyTemperature",timeRangeFilter:{type:"between",startTime:a,endTime:u},ascendingOrder:!0,pageSize:500}))?.records||[]).map(m=>{const g=n6(m.temperature);if(g==null)return null;const v=new Date(m.time);return{externalId:m?.metadata?.id||null,dataOrigin:m?.metadata?.dataOrigin||null,timestampMs:v.getTime(),timestamp:He(v,"yyyy-MM-dd'T'HH:mm:ssXXX"),localDate:He(v,"yyyy-MM-dd"),time:He(v,"HH:mm"),temperatureC:Number(g.toFixed(2))}}).filter(Boolean)}const E1=k.createContext(null),sa={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1},Dy=(n,e)=>{if(!e)return n;const t=st(ye(e));return n.filter(r=>ye(r.isoDate)<=t)},Ny=(n,e)=>{if(!e)return n;const t=st(ye(e));return n.filter(r=>ye(r.isoDate)>=t)},Ef=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},u6=n=>{if(!n)return!1;const e=n.temperature,t=n.temperature_corrected,r=e==null?"":String(e).trim(),i=t==null?"":String(t).trim();return r!==""||i!==""},qS=n=>n?typeof n=="string"?He(st(ye(n)),"yyyy-MM-dd"):typeof n.toDate=="function"?He(st(n.toDate()),"yyyy-MM-dd"):He(st(new Date(n)),"yyyy-MM-dd"):null,Vy=(n,e)=>{const t=qS(n),r=qS(e);return t&&r&&ye(r)<ye(t)?{startDate:r,endDate:t}:{startDate:t,endDate:r}},c6=({payload:n,entryId:e,isoDate:t,cycleStartDate:r,existingEntry:i})=>{const s={id:e,iso_date:t,timestamp:n.timestamp,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation??null,mucus_appearance:n.mucus_appearance??null,fertility_symbol:n.fertility_symbol??null,observations:n.observations??null,had_relations:n.had_relations??!1,ignored:n.ignored??!1,peak_marker:n.peak_marker??null,measurements:n.measurements??(Array.isArray(i?.measurements)?i.measurements:[])},a=r?qf([s],r):[];return a.length?{...i,...a[0],measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}:{...i,...s,isoDate:t,measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}},d6=n=>[...n].sort((e,t)=>{const r=e.timestamp?ye(e.timestamp):e.isoDate?ye(e.isoDate):0,i=t.timestamp?ye(t.timestamp):t.isoDate?ye(t.isoDate):0;return r>i?1:r<i?-1:0}),h6=({children:n})=>{const{user:e}=Tm(),{toast:t}=Ew(),[r,i]=k.useState(sa),[s,a]=k.useState([]),[u,d]=k.useState(!0),h=k.useRef(!1),m=k.useRef(null),g=k.useCallback(()=>{i(sa),a([]),d(!1),h.current=!1},[]),v=k.useCallback(async({silent:W=!1}={})=>{if(!e?.uid){const z=m.current;m.current=null,z&&T3(z).catch(ee=>console.error("Failed to clear cached cycle data on sign-out.",ee)),g();return}m.current=e.uid;let Y=!1;if(!h.current)try{const z=await US(e.uid);z&&(i(z.currentCycle??sa),a(z.archivedCycles??[]),h.current=!0,Y=!0,W||d(!1))}catch(z){console.error("Failed to hydrate cycle data from cache.",z)}const X=!W&&!Y&&!h.current;if(X&&d(!0),typeof navigator<"u"&&navigator.onLine===!1&&(Y||h.current)){W||d(!1);return}try{const z=await o3(e.uid);let ee=sa;if(z){const{startDate:he,endDate:we}=Vy(z.startDate,z.endDate),Me=qf(z.data,he),Ue=Ny(Me,he),at=Dy(Ue,we);ee={...z,startDate:he,endDate:we,data:at}}const oe=(await a3(e.uid,z?z.startDate:null)).map(he=>{const{startDate:we,endDate:Me}=Vy(he.startDate,he.endDate),Ue=qf(he.data||[],we),at=Ny(Ue,we),Lt=Dy(at,Me);return{...he,startDate:we??He(st(new Date),"yyyy-MM-dd"),endDate:Me,needsCompletion:he.needsCompletion,data:Lt}});i(ee),a(oe),await E3(e.uid,{currentCycle:ee,archivedCycles:oe}),h.current=!0}catch(z){if(console.error("Error in loadCycleData:",z),z.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!Y)try{const ee=await US(e.uid);ee?(i(ee.currentCycle??sa),a(ee.archivedCycles??[]),h.current=!0):(i(sa),a([]),h.current=!1)}catch(ee){console.error("Failed to recover cycle data from cache after error.",ee),i(sa),a([]),h.current=!1}}finally{X&&d(!1)}},[e,g]);k.useEffect(()=>{if(!e?.uid){g();return}v().catch(W=>console.error("Initial cycle data load failed:",W))},[e?.uid,v,g]);const T=k.useCallback((W,Y,X,N,{remove:z=!1}={})=>{const ee=se=>{if(!se||se.id!==W)return se;const oe=Array.isArray(se.data)?se.data:[];if(z)return{...se,data:oe.filter(Ue=>Ue.id!==Y)};const he=oe.find(Ue=>Ue.id===Y)||null,we=c6({payload:X,entryId:Y,isoDate:N,cycleStartDate:se.startDate,existingEntry:he}),Me=he?oe.map(Ue=>Ue.id===Y?we:Ue):d6([...oe,we]);return{...se,data:Me}};i(se=>ee(se)),a(se=>se.map(oe=>ee(oe)))},[]),A=k.useCallback((W,Y,X)=>{const N=z=>{if(!z||z.id!==W)return z;const se=(Array.isArray(z.data)?z.data:[]).map(oe=>oe.id===Y?{...oe,measurements:X,measurementsLoaded:!0}:oe);return{...z,data:se}};i(z=>N(z)),a(z=>z.map(ee=>N(ee)))},[]),x=k.useCallback(async(W,Y,X=null)=>{const N=X??r.id;if(!e?.uid||!N)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");d(!0);try{const z=N===r.id?r:s.find(ut=>ut.id===N);let ee=Y;!ee&&z&&(ee=z.data.find(ut=>ut.isoDate===W.isoDate)),ee&&String(ee.id).startsWith("placeholder-")&&(ee=null);const se=z?.data?.find(ut=>ut?.peak_marker==="peak")||null;W.peak_marker==="peak"&&se&&se.id!==ee?.id&&await xy(e.uid,N,se.id,{peak_marker:null});const oe=Array.isArray(W.measurements)?W.measurements:[],he=oe.filter(u6),we=he.find(ut=>ut?.selected)||he[0]||null,Me=oe.find(ut=>ut?.time&&String(ut.time).trim()!=="")||we,Ue=(()=>{if(Me?.time&&String(Me.time).trim()!=="")return Me.time;if(ee?.timestamp)try{return He(ye(ee.timestamp),"HH:mm")}catch{return He(new Date,"HH:mm")}return He(new Date,"HH:mm")})(),at=$B(`${W.isoDate} ${Ue}`,"yyyy-MM-dd HH:mm",new Date),Lt=Ef(we?.temperature),zr=Ef(we?.temperature_corrected),Pr=!!we?.use_corrected&&zr!==null,ds=Pr?zr:Lt,Ao=Object.prototype.hasOwnProperty.call(W,"peak_marker"),hs=he.some(ut=>{if(!ut)return!1;const Hr=Ef(ut.temperature),ms=Ef(ut.temperature_corrected);return Hr!==null||ms!==null}),Cr=ut=>ut==null?"":String(ut).trim(),xo=Cr(W.mucusSensation??W.mucus_sensation??""),Ft=Cr(W.mucusAppearance??W.mucus_appearance??""),Rt=Cr(W.observations??""),En=W.fertility_symbol??W.fertilitySymbol??null,Ro=En!=null&&En!==""&&En!=="none",fs=!!(W.had_relations??W.hadRelations??!1),ko=W.peak_marker==="peak",br=!hs&&xo===""&&Ft===""&&!Ro&&Rt===""&&!fs&&!ko,Do=!!ee?.measurementsLoaded&&Array.isArray(ee?.measurements)&&ee.measurements.length>=2,ps=he.length>=2,Wr=Do&&he.length<2,qa=Array.isArray(W.measurements)?ps?he:Wr?[]:void 0:void 0,Xn={cycle_id:N,user_id:e.uid,timestamp:He(at,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:qa,mucus_sensation:W.mucusSensation||null,mucus_appearance:W.mucusAppearance||null,fertility_symbol:W.fertility_symbol==="none"?null:W.fertility_symbol,observations:W.observations||null,had_relations:fs,ignored:ee?W.ignored??ee.ignored:W.ignored||!1,peak_marker:Ao?W.peak_marker??null:ee?.peak_marker??null,temperature_raw:Lt,temperature_corrected:zr,use_corrected:Pr,temperature_chart:ds};let fr=ee?.id??null;if(ee){const ut=Ao&&ee?.peak_marker==="peak"&&!ko;br&&ut?(await LS(e.uid,N,ee.id),T(N,ee.id,Xn,W.isoDate,{remove:!0})):(await xy(e.uid,N,ee.id,Xn),T(N,ee.id,Xn,W.isoDate))}else{if(br)return;fr=(await d3(Xn))?.id??null,fr&&T(N,fr,Xn,W.isoDate)}v({silent:!0}).catch(ut=>console.error("Background cycle data refresh failed after save:",ut))}catch(z){throw console.error("Error adding/updating data point:",z),z}finally{d(!1)}},[e,r,s,v,T]),P=k.useCallback(async(W,Y)=>{if(!e?.uid||!W||!Y)return[];const X=await h3(e.uid,W,Y);return A(W,Y,X),X},[e,A]),j=k.useCallback(async(W,Y=null)=>{const X=Y??r.id;if(!(!e?.uid||!X)){d(!0);try{await LS(e.uid,X,W),await v({silent:!0})}catch(N){throw console.error("Error deleting record:",N),N}finally{d(!1)}}},[e,r.id,v]),M=k.useCallback(async(W,Y)=>{if(!e?.uid)return;const X=W===r.id,N=X?r:s.find(oe=>oe.id===W);if(!N)throw new Error("Cycle not found for toggling ignore state.");const z=N.data?.find(oe=>oe.id===Y);if(!z)throw new Error("Record not found for toggling ignore state.");const ee=!z.ignored,se=oe=>{X?i(he=>he.id!==W?he:{...he,data:he.data.map(we=>we.id===Y?{...we,ignored:oe}:we)}):a(he=>he.map(we=>we.id!==W?we:{...we,data:(we.data||[]).map(Me=>Me.id===Y?{...Me,ignored:oe}:Me)}))};try{se(ee),await xy(e.uid,W,Y,{ignored:ee}),v({silent:!0}).catch(oe=>console.error("Background cycle data refresh failed after toggling ignore state:",oe))}catch(oe){throw console.error("Error toggling ignore state:",oe),se(!ee),oe}},[e,r,s,v]),D=k.useCallback(async(W,Y)=>{if(!e?.uid||!W)return;const X=r,N=s,z=ee=>!ee||ee.id!==W||ee.ignoredForAutoCalculations===Y?ee:{...ee,ignoredForAutoCalculations:Y};i(ee=>z(ee)),a(ee=>ee.map(se=>z(se)));try{await f3(e.uid,W,Y),v({silent:!0}).catch(ee=>console.error("Background cycle data refresh failed after updating ignore configuration:",ee))}catch(ee){throw console.error("Error updating cycle ignore configuration:",ee),i(X),a(N),t({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),ee}},[e,r,s,v,t]),B=k.useCallback(async W=>{if(e?.uid){d(!0);try{const Y=st(W?ye(W):new Date);if(r.id&&W){const z=st(ye(r.startDate));if(Y<=z){t({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),d(!1);return}}const X=He(Y,"yyyy-MM-dd"),N=await c3(e.uid,r.id,X);i({id:N.id,startDate:N.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await v({silent:!0})}catch(Y){console.error("Error starting new cycle:",Y);const X=z=>{try{return He(ye(z),"dd/MM/yyyy")}catch{return z}},N=(()=>{if(Y?.code==="cycle-overlap"){const z=Y?.conflictCycle;if(!z)return"Las fechas coinciden con otro ciclo.";const ee=z.startDate?X(z.startDate):"sin fecha de inicio",se=z.endDate?X(z.endDate):"en curso";return`Las fechas coinciden con el ciclo del ${ee} al ${se}.`}return Y?.code==="split-date-conflict"?`No se pudo dividir el ciclo porque el ciclo nuevo ya tiene ms de un registro en ${Y?.conflictDate?X(Y.conflictDate):"esa fecha"}. Esto suele venir de datos duplicados (por ejemplo, creados desde otra sesin o por un estado inconsistente).`:Y?.code==="split-invalid-entry"?"No se pudo dividir el ciclo porque hay registros con fecha invlida en el ciclo anterior.":Y?.code==="split-invalid-date"?"La fecha elegida para iniciar el ciclo no es vlida.":"No se pudo iniciar el nuevo ciclo."})();throw t({title:"Error",description:N,variant:"destructive"}),Y}finally{d(!1)}}},[e,r,v,t]),Z=k.useCallback(W=>{if(!W)return"Las fechas coinciden con otro ciclo.";const{startDate:Y,endDate:X}=W,N=se=>{if(!se)return null;try{return He(ye(se),"dd/MM/yyyy")}catch(oe){return console.error("Failed to format overlap date",oe),se}},z=N(Y)??"sin fecha de inicio",ee=X?N(X):"en curso";return`Las fechas coinciden con el ciclo del ${z} al ${ee}.`},[]),re=k.useCallback((W,Y)=>{const X=W?.conflictCycle??W?.details?.conflictCycle;return W?.code==="cycle-overlap"?Z(X):typeof W?.message=="string"&&W.message.trim()?W.message:Y},[Z]),C=k.useCallback(async(W,Y)=>{if(e?.uid){if(!Y){t({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}d(!0);try{const X=await u3(e.uid,W);try{await Ry(X.id,e.uid,void 0,Y)}catch(N){try{await FS(e.uid,X.id)}catch(z){console.error("Failed to clean up cycle after overlap error:",z)}throw N}await v({silent:!0})}catch(X){console.error("Error adding archived cycle:",X);const N=re(X,"No se pudo crear el ciclo.");throw t({title:"Error",description:N,variant:"destructive"}),X}finally{d(!1)}}},[e,v,t,re]),I=k.useCallback(async W=>{if(e?.uid){d(!0);try{await FS(e.uid,W),await v({silent:!0})}catch(Y){throw console.error("Error deleting cycle:",Y),t({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),Y}finally{d(!1)}}},[e,v,t]),b=k.useCallback(async W=>{if(!(!e?.uid||!W)){d(!0);try{await g3(e.uid,W),await v({silent:!0})}catch(Y){console.error("Error undoing current cycle:",Y);const X=(()=>{switch(Y.code){case"no-previous-cycle":return"No hay un ciclo previo compatible para deshacer.";case"undo-not-current":return"Solo se puede deshacer el ciclo actual.";case"undo-invalid-entry":return"Hay registros con fecha invlida en el ciclo actual.";case"undo-date-conflict":if(typeof Y?.conflictDate=="string")try{const N=ye(Y.conflictDate);if(Ln(N))return`El da ${He(N,"dd/MM")} tiene un registro en el ciclo anterior.`}catch{}return"El ciclo anterior ya tiene registros en una de las fechas.";default:return"No se pudo deshacer el ciclo."}})();throw t({title:"Error",description:X,variant:"destructive"}),Y}finally{d(!1)}}},[e,v,t]),O=k.useCallback(async(W,Y,X)=>{if(!e?.uid)return null;try{return(await Ry(W,e.uid,Y,X,!0)).overlap}catch(N){return console.error("Error checking cycle overlap:",N),null}},[e]),L=k.useCallback(async(W,Y,X)=>{if(!e?.uid)return;const N=r?.id===W?r:s.find(he=>he.id===W),z=N?.startDate??null,ee=N?.endDate??null,se=Y!==void 0&&Y!==z,oe=X!==void 0&&X!==ee;d(!0);try{if(se&&Y&&await m3(e.uid,W,Y),oe&&X){const he=se?Y:z;await p3(e.uid,W,X,he)}(se||oe)&&await Ry(W,e.uid,se?Y:void 0,oe?X:void 0),await v({silent:!0})}catch(he){console.error("Error updating cycle dates:",he);const we=re(he,"No se pudieron actualizar las fechas.");throw t({title:"Error",description:we,variant:"destructive"}),he}finally{d(!1)}},[e,r,s,v,t,re]),U=k.useCallback((W,Y)=>L(W,Y,void 0),[L]),V=k.useCallback((W,Y,X)=>L(W,X,Y),[L]),ce=k.useCallback(async W=>{if(!e?.uid)return null;d(!0);try{const Y=await l3(e.uid,W);if(!Y)return null;const{startDate:X,endDate:N}=Vy(Y.startDate,Y.endDate),z=qf(Y.data||[],X),ee=Ny(z,X),se=Dy(ee,N);return{...Y,startDate:X??He(st(new Date),"yyyy-MM-dd"),endDate:N,data:se}}catch(Y){return console.error("Error fetching cycle by ID:",Y),null}finally{d(!1)}},[e]),xe=k.useCallback(({silent:W=!0}={})=>v({silent:W}),[v]),Pe=k.useCallback(async()=>{if(!e?.uid)throw new Error("NO_USER");if(!r?.id||!r?.startDate)throw new Error("NO_CURRENT_CYCLE");d(!0);try{const W=await l6({startDate:r.startDate});if(!W.length){t({title:"Sin registros",description:"No se encontraron temperaturas en Health Connect."});return}const Y=$3(),z=(await W3(Y,"syncBasalBodyTemperature")({cycleId:r.id,items:W}))?.data;return t({title:"Sincronizacin hecha",description:`Nuevos: ${z?.createdMeasurements??0}  Ya estaban: ${z?.skippedMeasurements??0}  Rechazados: ${z?.rejected??0}`}),await v({silent:!0}),z}catch(W){console.error(W);const X=(N=>typeof N=="string"?N:N?.message??JSON.stringify(N))(W);return X.includes("HEALTH_CONNECT_NotInstalled")||X.includes("HEALTH_CONNECT_NotSupported")?(t({title:"Health Connect no disponible",description:"Instala Health Connect para poder sincronizar tus registros.",variant:"destructive"}),null):X.includes("HEALTH_CONNECT_ONLY_IN_APP")?(t({title:"Solo en la app Android",description:"La sincronizacin est disponible nicamente en la app Android.",variant:"destructive"}),null):X.includes("HEALTH_CONNECT_PERMISSION_DENIED")?(t({title:"Permisos requeridos",description:"Debes conceder permisos de Health Connect para sincronizar.",variant:"destructive"}),null):X.includes("HEALTH_CONNECT_INVALID_START_DATE")?(t({title:"Fecha de inicio invlida",description:"No se pudo leer la fecha de inicio del ciclo actual.",variant:"destructive"}),null):(t({title:"Error al sincronizar",description:X,variant:"destructive"}),null)}finally{d(!1)}},[e,r,v,t]),De={currentCycle:r,archivedCycles:s,syncHealthConnectTemperatures:Pe,addOrUpdateDataPoint:x,deleteRecord:j,startNewCycle:B,updateCycleDates:L,forceUpdateCycleStart:U,forceShiftNextCycleStart:V,checkCycleOverlap:O,isLoading:u,getCycleById:ce,refreshData:xe,toggleIgnoreRecord:M,setCycleIgnoreForAutoCalculations:D,addArchivedCycle:C,deleteCycle:I,getMeasurementsForEntry:P,undoCurrentCycle:b};return K.jsx(E1.Provider,{value:De,children:n})},FH=()=>{const n=k.useContext(E1);if(!n)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return n},T1=k.createContext(null),f6=({children:n})=>{const[e,t]=k.useState(!1),[r,i]=k.useState(!1),[s,a]=k.useState(!1),u=yo.isNativePlatform()&&yo.getPlatform()==="android",d=k.useCallback(async()=>{if(!u)return t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"NotAndroid"};a(!0);try{const h=await o6();return t(!!h.isAvailable),i(!!h.hasPermissions),h}catch(h){return console.error("Error al comprobar Health Connect",h),t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"Error"}}finally{a(!1)}},[u]);return k.useEffect(()=>{d()},[d]),K.jsx(T1.Provider,{value:{isAvailable:e,hasPermissions:r,refreshPermissions:d,isChecking:s,isAndroidApp:u},children:n})},UH=()=>{const n=k.useContext(T1);if(!n)throw new Error("useHealthConnect must be used within a HealthConnectProvider");return n},Bv=({children:n})=>K.jsxs("div",{className:"relative h-app overflow-hidden app-background",children:[K.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[K.jsx("div",{className:"wave wave--left-1"}),K.jsx("div",{className:"wave wave--left-2"}),K.jsx("div",{className:"wave wave--left-3"}),K.jsx("div",{className:"wave wave--right-1"}),K.jsx("div",{className:"wave wave--right-2"}),K.jsx("div",{className:"wave wave--right-3"})]}),K.jsx("div",{className:"pointer-events-none absolute inset-0",children:K.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),K.jsx("div",{className:"relative z-10 flex h-app flex-col",children:n})]});class p6 extends nn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}reset=()=>{this.setState({error:null})};componentDidCatch(e,t){console.error("RouteErrorBoundary caught an error",e,t)}render(){const{error:e}=this.state,{FallbackComponent:t,children:r}=this.props;return e?K.jsx(t,{error:e,resetErrorBoundary:this.reset}):r}}var m6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const g6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ou=(n,e)=>{const t=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...d},h)=>k.createElement("svg",{ref:h,...m6,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${g6(n)}`,...d},[...e.map(([m,g])=>k.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},y6=Ou("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),v6=Ou("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),_6=Ou("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),w6=Ou("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),E6=Ou("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),T6=Ou("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),I6=()=>{const n=wo(),e=[{to:"/records",label:"Mis registros",icon:_6},{to:"/chart",label:"Grfica",icon:v6},{to:"/",label:"Ciclo actual",icon:w6},{to:"/archived-cycles",label:"Mis ciclos",icon:y6,isActive:t=>t.startsWith("/archived-cycles")||t.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:E6}];return K.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:K.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:t,label:r,icon:i,isActive:s})=>K.jsx("li",{className:"flex",children:K.jsx(JN,{to:t,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:a})=>{const d=(s?s(n.pathname):!1)||a;return K.jsxs(K.Fragment,{children:[K.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${d?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),K.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:K.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${d?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),K.jsx("span",{className:"sr-only",children:r})]})}})},t))})})},da=({children:n,hideBottomNav:e=!1})=>{const t=e?"relative z-10 flex-1 w-full overflow-y-auto":"relative z-10 flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return K.jsxs("div",{className:"relative flex min-h-app flex-col overflow-hidden",children:[K.jsx("main",{className:t,children:n}),!e&&K.jsx(I6,{})]})};function I1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=I1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function S1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=I1(n))&&(r&&(r+=" "),r+=e);return r}function S6(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=P1(e))&&(r&&(r+=" "),r+=t);return r}function P1(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=P1(n[r]))&&(t&&(t+=" "),t+=e);return t}var Nw="-";function P6(n){var e=b6(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(u){var d=u.split(Nw);return d[0]===""&&d.length!==1&&d.shift(),C1(d,e)||C6(u)}function a(u,d){var h=t[u]||[];return d&&i[u]?[].concat(h,i[u]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function C1(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?C1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(Nw);return e.validators.find(function(a){var u=a.validator;return u(s)})?.classGroupId}}var GS=/^\[(.+)\]$/;function C6(n){if(GS.test(n)){var e=GS.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function b6(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=x6(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],u=s[1];$v(u,r,a,e)}),r}function $v(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:KS(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(A6(i)){$v(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var u=a[0],d=a[1];$v(d,KS(e,u),t,r)})})}function KS(n,e){var t=n;return e.split(Nw).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function A6(n){return n.isThemeGetter}function x6(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var d=u[0],h=u[1];return[e+d,h]})):a});return[r,s]}):n}function R6(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return i(a,u),u},set:function(a,u){t.has(a)?t.set(a,u):i(a,u)}}}var b1="!";function k6(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var u=[],d=0,h=0,m,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+i)===e)){u.push(a.slice(h,g)),h=g+i;continue}if(v==="/"){m=g;continue}}v==="["?d++:v==="]"&&d--}var T=u.length===0?a:a.substring(h),A=T.startsWith(b1),x=A?T.substring(1):T,P=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:A,baseClassName:x,maybePostfixModifierPosition:P}}}function D6(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function N6(n){return{cache:R6(n.cacheSize),splitModifiers:k6(n),...P6(n)}}var V6=/\s+/;function M6(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(V6).map(function(a){var u=t(a),d=u.modifiers,h=u.hasImportantModifier,m=u.baseClassName,g=u.maybePostfixModifierPosition,v=r(g?m.substring(0,g):m),T=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(m),!v)return{isTailwindClass:!1,originalClassName:a};T=!1}var A=D6(d).join(":"),x=h?A+b1:A;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:a,hasPostfixModifier:T}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,m=u+d;return s.has(m)?!1:(s.add(m),i(d,h).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function O6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=u;function u(h){var m=e[0],g=e.slice(1),v=g.reduce(function(T,A){return A(T)},m());return r=N6(v),i=r.cache.get,s=r.cache.set,a=d,d(h)}function d(h){var m=i(h);if(m)return m;var g=M6(h,r);return s(h,g),g}return function(){return a(S6.apply(null,arguments))}}function Pt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var A1=/^\[(?:([a-z-]+):)?(.+)\]$/i,L6=/^\d+\/\d+$/,F6=new Set(["px","full","screen"]),U6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,j6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Lr(n){return _a(n)||F6.has(n)||L6.test(n)||zv(n)}function zv(n){return $a(n,"length",G6)}function $6(n){return $a(n,"size",x1)}function z6(n){return $a(n,"position",x1)}function W6(n){return $a(n,"url",K6)}function Tf(n){return $a(n,"number",_a)}function _a(n){return!Number.isNaN(Number(n))}function H6(n){return n.endsWith("%")&&_a(n.slice(0,-1))}function Oc(n){return QS(n)||$a(n,"number",QS)}function Ge(n){return A1.test(n)}function Lc(){return!0}function qs(n){return U6.test(n)}function q6(n){return $a(n,"",Q6)}function $a(n,e,t){var r=A1.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function G6(n){return j6.test(n)}function x1(){return!1}function K6(n){return n.startsWith("url(")}function QS(n){return Number.isInteger(Number(n))}function Q6(n){return B6.test(n)}function Y6(){var n=Pt("colors"),e=Pt("spacing"),t=Pt("blur"),r=Pt("brightness"),i=Pt("borderColor"),s=Pt("borderRadius"),a=Pt("borderSpacing"),u=Pt("borderWidth"),d=Pt("contrast"),h=Pt("grayscale"),m=Pt("hueRotate"),g=Pt("invert"),v=Pt("gap"),T=Pt("gradientColorStops"),A=Pt("gradientColorStopPositions"),x=Pt("inset"),P=Pt("margin"),j=Pt("opacity"),M=Pt("padding"),D=Pt("saturate"),B=Pt("scale"),Z=Pt("sepia"),re=Pt("skew"),C=Pt("space"),I=Pt("translate"),b=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},L=function(){return["auto",Ge,e]},U=function(){return[Ge,e]},V=function(){return["",Lr]},ce=function(){return["auto",_a,Ge]},xe=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Pe=function(){return["solid","dashed","dotted","double","none"]},De=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},W=function(){return["start","end","center","between","around","evenly","stretch"]},Y=function(){return["","0",Ge]},X=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},N=function(){return[_a,Tf]},z=function(){return[_a,Ge]};return{cacheSize:500,theme:{colors:[Lc],spacing:[Lr],blur:["none","",qs,Ge],brightness:N(),borderColor:[n],borderRadius:["none","","full",qs,Ge],borderSpacing:U(),borderWidth:V(),contrast:N(),grayscale:Y(),hueRotate:z(),invert:Y(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[H6,zv],inset:L(),margin:L(),opacity:N(),padding:U(),saturate:N(),scale:N(),sepia:Y(),skew:z(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[qs]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(xe(),[Ge])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oc]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Oc]}],"grid-cols":[{"grid-cols":[Lc]}],"col-start-end":[{col:["auto",{span:["full",Oc]},Ge]}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":[Lc]}],"row-start-end":[{row:["auto",{span:[Oc]},Ge]}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(W())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(W(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(W(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ge,e]}],"min-w":[{"min-w":["min","max","fit",Ge,Lr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[qs]},qs,Ge]}],h:[{h:[Ge,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ge,Lr]}],"max-h":[{"max-h":[Ge,e,"min","max","fit"]}],"font-size":[{text:["base",qs,zv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tf]}],"font-family":[{font:[Lc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",_a,Tf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ge,Lr]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Pe(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr]}],"underline-offset":[{"underline-offset":["auto",Ge,Lr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(xe(),[z6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},W6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[A]}],"gradient-via-pos":[{via:[A]}],"gradient-to-pos":[{to:[A]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[].concat(Pe(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:Pe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Pe())}],"outline-offset":[{"outline-offset":[Ge,Lr]}],"outline-w":[{outline:[Lr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Lr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",qs,q6]}],"shadow-color":[{shadow:[Lc]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":De()}],"bg-blend":[{"bg-blend":De()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",qs,Ge]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[D]}],sepia:[{sepia:[Z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[D]}],"backdrop-sepia":[{"backdrop-sepia":[Z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[B]}],"scale-x":[{"scale-x":[B]}],"scale-y":[{"scale-y":[B]}],rotate:[{rotate:[Oc,Ge]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[re]}],"skew-y":[{"skew-y":[re]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Lr,Tf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var X6=O6(Y6);function za(...n){return X6(S1(n))}function YS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Sm(...n){return e=>{let t=!1;const r=n.map(i=>{const s=YS(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():YS(n[i],null)}}}}function Ua(...n){return k.useCallback(Sm(...n),n)}var J6=Symbol.for("react.lazy"),Vp=u_[" use ".trim().toString()];function Z6(n){return typeof n=="object"&&n!==null&&"then"in n}function R1(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===J6&&"_payload"in n&&Z6(n._payload)}function e5(n){const e=n5(n),t=k.forwardRef((r,i)=>{let{children:s,...a}=r;R1(s)&&typeof Vp=="function"&&(s=Vp(s._payload));const u=k.Children.toArray(s),d=u.find(i5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var t5=e5("Slot");function n5(n){const e=k.forwardRef((t,r)=>{let{children:i,...s}=t;if(R1(i)&&typeof Vp=="function"&&(i=Vp(i._payload)),k.isValidElement(i)){const a=o5(i),u=s5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Sm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var r5=Symbol("radix.slottable");function i5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===r5}function s5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function o5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const XS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,JS=S1,k1=(n,e)=>t=>{var r;if(e?.variants==null)return JS(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const m=t?.[h],g=s?.[h];if(m===null)return null;const v=XS(m)||XS(g);return i[h][v]}),u=t&&Object.entries(t).reduce((h,m)=>{let[g,v]=m;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:g,className:v,...T}=m;return Object.entries(T).every(A=>{let[x,P]=A;return Array.isArray(P)?P.includes({...s,...u}[x]):{...s,...u}[x]===P})?[...h,g,v]:h},[]);return JS(n,a,d,t?.class,t?.className)},a5=k1("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),tu=nn.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?t5:"button";return K.jsx(a,{className:za(a5({variant:e,size:t,className:n})),ref:s,...i})});tu.displayName="Button";const l5=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i,D1=({error:n,resetErrorBoundary:e})=>{const t=p_(),{user:r}=Tm(),i=typeof navigator<"u"&&navigator.onLine===!1,s=n?.message?n.message:String(n),a=l5.test(s),u=i&&a?"Pantalla no disponible sin conexin":"No se pudo cargar la pantalla",d=i&&a?"Esta pantalla no est disponible sin conexin porque no se haba cargado antes.":"Ocurri un error al cargar esta pantalla. Puedes volver atrs, ir al inicio o reintentar.",h=()=>{e(),t(-1)},m=()=>{e(),t("/")},g=K.jsx("div",{className:"flex min-h-app flex-col items-center justify-center px-6 py-10 text-center",children:K.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white/85 p-6 shadow-lg backdrop-blur-md",children:[K.jsx("h1",{className:"text-2xl font-semibold text-fertiliapp-fuerte",children:u}),K.jsx("p",{className:"text-sm text-gray-600",children:d}),K.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[K.jsx(tu,{type:"button",onClick:h,children:"Volver"}),K.jsx(tu,{type:"button",variant:"secondary",onClick:m,children:"Ir a inicio"}),K.jsx(tu,{type:"button",variant:"outline",onClick:()=>window.location.reload(),children:"Reintentar"})]}),!i&&K.jsxs("details",{className:"text-left text-xs text-gray-500",children:[K.jsx("summary",{className:"cursor-pointer font-medium text-gray-600",children:"Detalles tcnicos"}),K.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words rounded-2xl bg-gray-100 p-3 text-[0.7rem] text-gray-600",children:s})]})]})});return r?K.jsx(da,{children:g}):K.jsx(Bv,{children:g})},ZS=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i;function u5({children:n}){const[e,t]=k.useState(null);return k.useEffect(()=>{const r=s=>{const a=s?.reason?.message??String(s?.reason);ZS.test(a)&&(s?.preventDefault?.(),t(s?.reason instanceof Error?s.reason:new Error(a)))},i=s=>{const a=s?.message??String(s?.error?.message??s?.error??"");ZS.test(a)&&(s?.preventDefault?.(),t(s?.error instanceof Error?s.error:new Error(a)))};return window.addEventListener("unhandledrejection",r),window.addEventListener("error",i),()=>{window.removeEventListener("unhandledrejection",r),window.removeEventListener("error",i)}},[]),e?K.jsx(D1,{error:e,resetErrorBoundary:()=>t(null)}):n}function lr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function jH(n,e){const t=k.createContext(e),r=s=>{const{children:a,...u}=s,d=k.useMemo(()=>u,Object.values(u));return K.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function i(s){const a=k.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function N1(n,e=[]){let t=[];function r(s,a){const u=k.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:T,...A}=g,x=v?.[n]?.[d]||u,P=k.useMemo(()=>A,Object.values(A));return K.jsx(x.Provider,{value:P,children:T})};h.displayName=s+"Provider";function m(g,v){const T=v?.[n]?.[d]||u,A=k.useContext(T);if(A)return A;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const i=()=>{const s=t.map(a=>k.createContext(a));return function(u){const d=u?.[n]||s;return k.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[r,c5(i,...e)]}function c5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((u,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...u,...g}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function eP(n){const e=d5(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(f5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function d5(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=m5(i),u=p5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Sm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var h5=Symbol("radix.slottable");function f5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===h5}function p5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function m5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function g5(n){const e=n+"CollectionProvider",[t,r]=N1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:P,children:j}=x,M=nn.useRef(null),D=nn.useRef(new Map).current;return K.jsx(i,{scope:P,itemMap:D,collectionRef:M,children:j})};a.displayName=e;const u=n+"CollectionSlot",d=eP(u),h=nn.forwardRef((x,P)=>{const{scope:j,children:M}=x,D=s(u,j),B=Ua(P,D.collectionRef);return K.jsx(d,{ref:B,children:M})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=eP(m),T=nn.forwardRef((x,P)=>{const{scope:j,children:M,...D}=x,B=nn.useRef(null),Z=Ua(P,B),re=s(m,j);return nn.useEffect(()=>(re.itemMap.set(B,{ref:B,...D}),()=>{re.itemMap.delete(B)})),K.jsx(v,{[g]:"",ref:Z,children:M})});T.displayName=m;function A(x){const P=s(n+"CollectionConsumer",x);return nn.useCallback(()=>{const M=P.collectionRef.current;if(!M)return[];const D=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(P.itemMap.values()).sort((re,C)=>D.indexOf(re.ref.current)-D.indexOf(C.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:a,Slot:h,ItemSlot:T},A,r]}function y5(n){const e=v5(n),t=k.forwardRef((r,i)=>{const{children:s,...a}=r,u=k.Children.toArray(s),d=u.find(w5);if(d){const h=d.props.children,m=u.map(g=>g===d?k.Children.count(h)>1?k.Children.only(null):k.isValidElement(h)?h.props.children:null:g);return K.jsx(e,{...a,ref:i,children:k.isValidElement(h)?k.cloneElement(h,void 0,m):null})}return K.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function v5(n){const e=k.forwardRef((t,r)=>{const{children:i,...s}=t;if(k.isValidElement(i)){const a=T5(i),u=E5(s,i.props);return i.type!==k.Fragment&&(u.ref=r?Sm(r,a):a),k.cloneElement(i,u)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var _5=Symbol("radix.slottable");function w5(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===_5}function E5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function T5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var I5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bi=I5.reduce((n,e)=>{const t=y5(`Primitive.${e}`),r=k.forwardRef((i,s)=>{const{asChild:a,...u}=i,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),K.jsx(d,{...u,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function V1(n,e){n&&c_.flushSync(()=>n.dispatchEvent(e))}function ja(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n}),k.useMemo(()=>(...t)=>e.current?.(...t),[])}function S5(n,e=globalThis?.document){const t=ja(n);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var P5="DismissableLayer",Wv="dismissableLayer.update",C5="dismissableLayer.pointerDownOutside",b5="dismissableLayer.focusOutside",tP,M1=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),O1=k.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:u,...d}=n,h=k.useContext(M1),[m,g]=k.useState(null),v=m?.ownerDocument??globalThis?.document,[,T]=k.useState({}),A=Ua(e,C=>g(C)),x=Array.from(h.layers),[P]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(P),M=m?x.indexOf(m):-1,D=h.layersWithOutsidePointerEventsDisabled.size>0,B=M>=j,Z=x5(C=>{const I=C.target,b=[...h.branches].some(O=>O.contains(I));!B||b||(i?.(C),a?.(C),C.defaultPrevented||u?.())},v),re=R5(C=>{const I=C.target;[...h.branches].some(O=>O.contains(I))||(s?.(C),a?.(C),C.defaultPrevented||u?.())},v);return S5(C=>{M===h.layers.size-1&&(r?.(C),!C.defaultPrevented&&u&&(C.preventDefault(),u()))},v),k.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(tP=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),nP(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=tP)}},[m,v,t,h]),k.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),nP())},[m,h]),k.useEffect(()=>{const C=()=>T({});return document.addEventListener(Wv,C),()=>document.removeEventListener(Wv,C)},[]),K.jsx(bi.div,{...d,ref:A,style:{pointerEvents:D?B?"auto":"none":void 0,...n.style},onFocusCapture:lr(n.onFocusCapture,re.onFocusCapture),onBlurCapture:lr(n.onBlurCapture,re.onBlurCapture),onPointerDownCapture:lr(n.onPointerDownCapture,Z.onPointerDownCapture)})});O1.displayName=P5;var A5="DismissableLayerBranch",L1=k.forwardRef((n,e)=>{const t=k.useContext(M1),r=k.useRef(null),i=Ua(e,r);return k.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),K.jsx(bi.div,{...n,ref:i})});L1.displayName=A5;function x5(n,e=globalThis?.document){const t=ja(n),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const s=u=>{if(u.target&&!r.current){let d=function(){F1(C5,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function R5(n,e=globalThis?.document){const t=ja(n),r=k.useRef(!1);return k.useEffect(()=>{const i=s=>{s.target&&!r.current&&F1(b5,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nP(){const n=new CustomEvent(Wv);document.dispatchEvent(n)}function F1(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?V1(i,s):i.dispatchEvent(s)}var k5=O1,D5=L1,Pd=globalThis?.document?k.useLayoutEffect:()=>{},N5="Portal",U1=k.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=k.useState(!1);Pd(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?YD.createPortal(K.jsx(bi.div,{...r,ref:e}),a):null});U1.displayName=N5;function V5(n,e){return k.useReducer((t,r)=>e[t][r]??t,n)}var j1=n=>{const{present:e,children:t}=n,r=M5(e),i=typeof t=="function"?t({present:r.isPresent}):k.Children.only(t),s=Ua(r.ref,O5(i));return typeof t=="function"||r.isPresent?k.cloneElement(i,{ref:s}):null};j1.displayName="Presence";function M5(n){const[e,t]=k.useState(),r=k.useRef(null),i=k.useRef(n),s=k.useRef("none"),a=n?"mounted":"unmounted",[u,d]=V5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const h=If(r.current);s.current=u==="mounted"?h:"none"},[u]),Pd(()=>{const h=r.current,m=i.current;if(m!==n){const v=s.current,T=If(h);n?d("MOUNT"):T==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&v!==T?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Pd(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=T=>{const x=If(r.current).includes(CSS.escape(T.animationName));if(T.target===e&&x&&(d("ANIMATION_END"),!i.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},v=T=>{T.target===e&&(s.current=If(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:k.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function If(n){return n?.animationName||"none"}function O5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var L5=u_[" useInsertionEffect ".trim().toString()]||Pd;function F5({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=U5({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const m=k.useRef(n!==void 0);k.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=k.useCallback(m=>{if(u){const g=j5(m)?m(n):m;g!==n&&a.current?.(g)}else s(m)},[u,n,s,a]);return[d,h]}function U5({defaultProp:n,onChange:e}){const[t,r]=k.useState(n),i=k.useRef(t),s=k.useRef(e);return L5(()=>{s.current=e},[e]),k.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function j5(n){return typeof n=="function"}var B5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$5="VisuallyHidden",Vw=k.forwardRef((n,e)=>K.jsx(bi.span,{...n,ref:e,style:{...B5,...n.style}}));Vw.displayName=$5;var Mw="ToastProvider",[Ow,z5,W5]=g5("Toast"),[B1]=N1("Toast",[W5]),[H5,Pm]=B1(Mw),$1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=n,[u,d]=k.useState(null),[h,m]=k.useState(0),g=k.useRef(!1),v=k.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mw}\`. Expected non-empty \`string\`.`),K.jsx(Ow.Provider,{scope:e,children:K.jsx(H5,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:k.useCallback(()=>m(T=>T+1),[]),onToastRemove:k.useCallback(()=>m(T=>T-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:a})})};$1.displayName=Mw;var z1="ToastViewport",q5=["F8"],Hv="toast.viewportPause",qv="toast.viewportResume",W1=k.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=q5,label:i="Notifications ({hotkey})",...s}=n,a=Pm(z1,t),u=z5(t),d=k.useRef(null),h=k.useRef(null),m=k.useRef(null),g=k.useRef(null),v=Ua(e,g,a.onViewportChange),T=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=a.toastCount>0;k.useEffect(()=>{const P=j=>{r.length!==0&&r.every(D=>j[D]||j.code===D)&&g.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),k.useEffect(()=>{const P=d.current,j=g.current;if(A&&P&&j){const M=()=>{if(!a.isClosePausedRef.current){const re=new CustomEvent(Hv);j.dispatchEvent(re),a.isClosePausedRef.current=!0}},D=()=>{if(a.isClosePausedRef.current){const re=new CustomEvent(qv);j.dispatchEvent(re),a.isClosePausedRef.current=!1}},B=re=>{!P.contains(re.relatedTarget)&&D()},Z=()=>{P.contains(document.activeElement)||D()};return P.addEventListener("focusin",M),P.addEventListener("focusout",B),P.addEventListener("pointermove",M),P.addEventListener("pointerleave",Z),window.addEventListener("blur",M),window.addEventListener("focus",D),()=>{P.removeEventListener("focusin",M),P.removeEventListener("focusout",B),P.removeEventListener("pointermove",M),P.removeEventListener("pointerleave",Z),window.removeEventListener("blur",M),window.removeEventListener("focus",D)}}},[A,a.isClosePausedRef]);const x=k.useCallback(({tabbingDirection:P})=>{const M=u().map(D=>{const B=D.ref.current,Z=[B,...s$(B)];return P==="forwards"?Z:Z.reverse()});return(P==="forwards"?M.reverse():M).flat()},[u]);return k.useEffect(()=>{const P=g.current;if(P){const j=M=>{const D=M.altKey||M.ctrlKey||M.metaKey;if(M.key==="Tab"&&!D){const Z=document.activeElement,re=M.shiftKey;if(M.target===P&&re){h.current?.focus();return}const b=x({tabbingDirection:re?"backwards":"forwards"}),O=b.findIndex(L=>L===Z);My(b.slice(O+1))?M.preventDefault():re?h.current?.focus():m.current?.focus()}};return P.addEventListener("keydown",j),()=>P.removeEventListener("keydown",j)}},[u,x]),K.jsxs(D5,{ref:d,role:"region","aria-label":i.replace("{hotkey}",T),tabIndex:-1,style:{pointerEvents:A?void 0:"none"},children:[A&&K.jsx(Gv,{ref:h,onFocusFromOutsideViewport:()=>{const P=x({tabbingDirection:"forwards"});My(P)}}),K.jsx(Ow.Slot,{scope:t,children:K.jsx(bi.ol,{tabIndex:-1,...s,ref:v})}),A&&K.jsx(Gv,{ref:m,onFocusFromOutsideViewport:()=>{const P=x({tabbingDirection:"backwards"});My(P)}})]})});W1.displayName=z1;var H1="ToastFocusProxy",Gv=k.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Pm(H1,t);return K.jsx(Vw,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const u=a.relatedTarget;!s.viewport?.contains(u)&&r()}})});Gv.displayName=H1;var Kd="Toast",G5="toast.swipeStart",K5="toast.swipeMove",Q5="toast.swipeCancel",Y5="toast.swipeEnd",q1=k.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...a}=n,[u,d]=F5({prop:r,defaultProp:i??!0,onChange:s,caller:Kd});return K.jsx(j1,{present:t||u,children:K.jsx(Z5,{open:u,...a,ref:e,onClose:()=>d(!1),onPause:ja(n.onPause),onResume:ja(n.onResume),onSwipeStart:lr(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lr(n.onSwipeMove,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:lr(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lr(n.onSwipeEnd,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),d(!1)})})})});q1.displayName=Kd;var[X5,J5]=B1(Kd,{onClose(){}}),Z5=k.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:T,...A}=n,x=Pm(Kd,t),[P,j]=k.useState(null),M=Ua(e,ce=>j(ce)),D=k.useRef(null),B=k.useRef(null),Z=i||x.duration,re=k.useRef(0),C=k.useRef(Z),I=k.useRef(0),{onToastAdd:b,onToastRemove:O}=x,L=ja(()=>{P?.contains(document.activeElement)&&x.viewport?.focus(),a()}),U=k.useCallback(ce=>{!ce||ce===1/0||(window.clearTimeout(I.current),re.current=new Date().getTime(),I.current=window.setTimeout(L,ce))},[L]);k.useEffect(()=>{const ce=x.viewport;if(ce){const xe=()=>{U(C.current),h?.()},Pe=()=>{const De=new Date().getTime()-re.current;C.current=C.current-De,window.clearTimeout(I.current),d?.()};return ce.addEventListener(Hv,Pe),ce.addEventListener(qv,xe),()=>{ce.removeEventListener(Hv,Pe),ce.removeEventListener(qv,xe)}}},[x.viewport,Z,d,h,U]),k.useEffect(()=>{s&&!x.isClosePausedRef.current&&U(Z)},[s,Z,x.isClosePausedRef,U]),k.useEffect(()=>(b(),()=>O()),[b,O]);const V=k.useMemo(()=>P?Z1(P):null,[P]);return x.viewport?K.jsxs(K.Fragment,{children:[V&&K.jsx(e$,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:V}),K.jsx(X5,{scope:t,onClose:L,children:c_.createPortal(K.jsx(Ow.ItemSlot,{scope:t,children:K.jsx(k5,{asChild:!0,onEscapeKeyDown:lr(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||L(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:K.jsx(bi.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...A,ref:M,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:lr(n.onKeyDown,ce=>{ce.key==="Escape"&&(u?.(ce.nativeEvent),ce.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:lr(n.onPointerDown,ce=>{ce.button===0&&(D.current={x:ce.clientX,y:ce.clientY})}),onPointerMove:lr(n.onPointerMove,ce=>{if(!D.current)return;const xe=ce.clientX-D.current.x,Pe=ce.clientY-D.current.y,De=!!B.current,W=["left","right"].includes(x.swipeDirection),Y=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,X=W?Y(0,xe):0,N=W?0:Y(0,Pe),z=ce.pointerType==="touch"?10:2,ee={x:X,y:N},se={originalEvent:ce,delta:ee};De?(B.current=ee,Sf(K5,g,se,{discrete:!1})):rP(ee,x.swipeDirection,z)?(B.current=ee,Sf(G5,m,se,{discrete:!1}),ce.target.setPointerCapture(ce.pointerId)):(Math.abs(xe)>z||Math.abs(Pe)>z)&&(D.current=null)}),onPointerUp:lr(n.onPointerUp,ce=>{const xe=B.current,Pe=ce.target;if(Pe.hasPointerCapture(ce.pointerId)&&Pe.releasePointerCapture(ce.pointerId),B.current=null,D.current=null,xe){const De=ce.currentTarget,W={originalEvent:ce,delta:xe};rP(xe,x.swipeDirection,x.swipeThreshold)?Sf(Y5,T,W,{discrete:!0}):Sf(Q5,v,W,{discrete:!0}),De.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),e$=n=>{const{__scopeToast:e,children:t,...r}=n,i=Pm(Kd,e),[s,a]=k.useState(!1),[u,d]=k.useState(!1);return r$(()=>a(!0)),k.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:K.jsx(U1,{asChild:!0,children:K.jsx(Vw,{...r,children:s&&K.jsxs(K.Fragment,{children:[i.label," ",t]})})})},t$="ToastTitle",G1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return K.jsx(bi.div,{...r,ref:e})});G1.displayName=t$;var n$="ToastDescription",K1=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return K.jsx(bi.div,{...r,ref:e})});K1.displayName=n$;var Q1="ToastAction",Y1=k.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?K.jsx(J1,{altText:t,asChild:!0,children:K.jsx(Lw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Q1}\`. Expected non-empty \`string\`.`),null)});Y1.displayName=Q1;var X1="ToastClose",Lw=k.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=J5(X1,t);return K.jsx(J1,{asChild:!0,children:K.jsx(bi.button,{type:"button",...r,ref:e,onClick:lr(n.onClick,i.onClose)})})});Lw.displayName=X1;var J1=k.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return K.jsx(bi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Z1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),i$(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Z1(r))}}),e}function Sf(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?V1(i,s):i.dispatchEvent(s)}var rP=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function r$(n=()=>{}){const e=ja(n);Pd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function i$(n){return n.nodeType===n.ELEMENT_NODE}function s$(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function My(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var o$=$1,eR=W1,tR=q1,nR=G1,rR=K1,iR=Y1,sR=Lw;const a$=o$,oR=nn.forwardRef(({className:n,...e},t)=>K.jsx(eR,{ref:t,className:za("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));oR.displayName=eR.displayName;const l$=k1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),aR=nn.forwardRef(({className:n,variant:e,...t},r)=>K.jsx(tR,{ref:r,className:za(l$({variant:e}),n),...t}));aR.displayName=tR.displayName;const u$=nn.forwardRef(({className:n,...e},t)=>K.jsx(iR,{ref:t,className:za("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));u$.displayName=iR.displayName;const lR=nn.forwardRef(({className:n,...e},t)=>K.jsx(sR,{ref:t,className:za("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:K.jsx(T6,{className:"h-4 w-4"})}));lR.displayName=sR.displayName;const uR=nn.forwardRef(({className:n,...e},t)=>K.jsx(nR,{ref:t,className:za("text-sm font-semibold",n),...e}));uR.displayName=nR.displayName;const cR=nn.forwardRef(({className:n,...e},t)=>K.jsx(rR,{ref:t,className:za("text-sm opacity-90",n),...e}));cR.displayName=rR.displayName;function c$(){const{toasts:n}=Ew();return K.jsxs(a$,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>K.jsxs(aR,{...s,children:[K.jsxs("div",{className:"grid gap-1",children:[t&&K.jsx(uR,{children:t}),r&&K.jsx(cR,{children:r})]}),i,K.jsx(lR,{})]},e)),K.jsx(oR,{})]})}const dR=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Cm=k.createContext({}),Fw=k.createContext(null),bm=typeof document<"u",d$=bm?k.useLayoutEffect:k.useEffect,hR=k.createContext({strict:!1}),Uw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),h$="framerAppearId",fR="data-"+Uw(h$);function f$(n,e,t,r){const{visualElement:i}=k.useContext(Cm),s=k.useContext(hR),a=k.useContext(Fw),u=k.useContext(dR).reducedMotion,d=k.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=d.current;k.useInsertionEffect(()=>{h&&h.update(t,a)});const m=k.useRef(!!(t[fR]&&!window.HandoffComplete));return d$(()=>{h&&(h.render(),m.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(h.updateFeatures(),!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),h}function ql(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function p$(n,e,t){return k.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ql(t)&&(t.current=r))},[e])}function Cd(n){return typeof n=="string"||Array.isArray(n)}function Am(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const jw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bw=["initial",...jw];function xm(n){return Am(n.animate)||Bw.some(e=>Cd(n[e]))}function pR(n){return!!(xm(n)||n.variants)}function m$(n,e){if(xm(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Cd(t)?t:void 0,animate:Cd(r)?r:void 0}}return n.inherit!==!1?e:{}}function g$(n){const{initial:e,animate:t}=m$(n,k.useContext(Cm));return k.useMemo(()=>({initial:e,animate:t}),[iP(e),iP(t)])}function iP(n){return Array.isArray(n)?n.join(" "):n}const sP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bd={};for(const n in sP)bd[n]={isEnabled:e=>sP[n].some(t=>!!e[t])};function y$(n){for(const e in n)bd[e]={...bd[e],...n[e]}}const mR=k.createContext({}),gR=k.createContext({}),v$=Symbol.for("motionComponentSymbol");function _$({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&y$(n);function s(u,d){let h;const m={...k.useContext(dR),...u,layoutId:w$(u)},{isStatic:g}=m,v=g$(u),T=r(u,g);if(!g&&bm){v.visualElement=f$(i,T,m,e);const A=k.useContext(gR),x=k.useContext(hR).strict;v.visualElement&&(h=v.visualElement.loadFeatures(m,x,n,A))}return k.createElement(Cm.Provider,{value:v},h&&v.visualElement?k.createElement(h,{visualElement:v.visualElement,...m}):null,t(i,u,p$(T,v.visualElement,d),T,g,v.visualElement))}const a=k.forwardRef(s);return a[v$]=i,a}function w$({layoutId:n}){const e=k.useContext(mR).id;return e&&n!==void 0?e+"-"+n:n}function E$(n){function e(r,i={}){return _$(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const T$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $w(n){return typeof n!="string"||n.includes("-")?!1:!!(T$.indexOf(n)>-1||/[A-Z]/.test(n))}const Mp={};function I$(n){Object.assign(Mp,n)}const Qd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wa=new Set(Qd);function yR(n,{layout:e,layoutId:t}){return Wa.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Mp[n]||n==="opacity")}const Yn=n=>!!(n&&n.getVelocity),S$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},P$=Qd.length;function C$(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<P$;a++){const u=Qd[a];if(n[u]!==void 0){const d=S$[u]||u;s+=`${d}(${n[u]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const vR=n=>e=>typeof e=="string"&&e.startsWith(n),_R=vR("--"),Kv=vR("var(--"),b$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,A$=(n,e)=>e&&typeof n=="number"?e.transform(n):n,vo=(n,e,t)=>Math.min(Math.max(t,n),e),Ha={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},id={...Ha,transform:n=>vo(0,1,n)},Pf={...Ha,default:1},sd=n=>Math.round(n*1e5)/1e5,Rm=/(-)?([\d]*\.?[\d])+/g,wR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,x$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Yd(n){return typeof n=="string"}const Xd=n=>({test:e=>Yd(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Gs=Xd("deg"),Ti=Xd("%"),Fe=Xd("px"),R$=Xd("vh"),k$=Xd("vw"),oP={...Ti,parse:n=>Ti.parse(n)/100,transform:n=>Ti.transform(n*100)},aP={...Ha,transform:Math.round},ER={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,size:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,rotate:Gs,rotateX:Gs,rotateY:Gs,rotateZ:Gs,scale:Pf,scaleX:Pf,scaleY:Pf,scaleZ:Pf,skew:Gs,skewX:Gs,skewY:Gs,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:id,originX:oP,originY:oP,originZ:Fe,zIndex:aP,fillOpacity:id,strokeOpacity:id,numOctaves:aP};function zw(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:u}=n;let d=!1,h=!1,m=!0;for(const g in e){const v=e[g];if(_R(g)){s[g]=v;continue}const T=ER[g],A=A$(v,T);if(Wa.has(g)){if(d=!0,a[g]=A,!m)continue;v!==(T.default||0)&&(m=!1)}else g.startsWith("origin")?(h=!0,u[g]=A):i[g]=A}if(e.transform||(d||r?i.transform=C$(n.transform,t,m,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:T=0}=u;i.transformOrigin=`${g} ${v} ${T}`}}const Ww=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TR(n,e,t){for(const r in e)!Yn(e[r])&&!yR(r,t)&&(n[r]=e[r])}function D$({transformTemplate:n},e,t){return k.useMemo(()=>{const r=Ww();return zw(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function N$(n,e,t){const r=n.style||{},i={};return TR(i,r,n),Object.assign(i,D$(n,e,t)),n.transformValues?n.transformValues(i):i}function V$(n,e,t){const r={},i=N$(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const M$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Op(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||M$.has(n)}let IR=n=>!Op(n);function O$(n){n&&(IR=e=>e.startsWith("on")?!Op(e):n(e))}try{O$(require("@emotion/is-prop-valid").default)}catch{}function L$(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(IR(i)||t===!0&&Op(i)||!e&&!Op(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function lP(n,e,t){return typeof n=="string"?n:Fe.transform(e+t*n)}function F$(n,e,t){const r=lP(e,n.x,n.width),i=lP(t,n.y,n.height);return`${r} ${i}`}const U$={offset:"stroke-dashoffset",array:"stroke-dasharray"},j$={offset:"strokeDashoffset",array:"strokeDasharray"};function B$(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?U$:j$;n[s.offset]=Fe.transform(-r);const a=Fe.transform(e),u=Fe.transform(t);n[s.array]=`${a} ${u}`}function Hw(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},m,g,v){if(zw(n,h,m,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:T,style:A,dimensions:x}=n;T.transform&&(x&&(A.transform=T.transform),delete T.transform),x&&(i!==void 0||s!==void 0||A.transform)&&(A.transformOrigin=F$(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(T.x=e),t!==void 0&&(T.y=t),r!==void 0&&(T.scale=r),a!==void 0&&B$(T,a,u,d,!1)}const SR=()=>({...Ww(),attrs:{}}),qw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function $$(n,e,t,r){const i=k.useMemo(()=>{const s=SR();return Hw(s,e,{enableHardwareAcceleration:!1},qw(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};TR(s,n.style,n),i.style={...s,...i.style}}return i}function z$(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=($w(t)?$$:V$)(r,s,a,t),m={...L$(r,typeof t=="string",n),...d,ref:i},{children:g}=r,v=k.useMemo(()=>Yn(g)?g.get():g,[g]);return k.createElement(t,{...m,children:v})}}function PR(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const CR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bR(n,e,t,r){PR(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(CR.has(i)?i:Uw(i),e.attrs[i])}function Gw(n,e){const{style:t}=n,r={};for(const i in t)(Yn(t[i])||e.style&&Yn(e.style[i])||yR(i,n))&&(r[i]=t[i]);return r}function AR(n,e){const t=Gw(n,e);for(const r in n)if(Yn(n[r])||Yn(e[r])){const i=Qd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function Kw(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function W$(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const Lp=n=>Array.isArray(n),H$=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),q$=n=>Lp(n)?n[n.length-1]||0:n;function Kf(n){const e=Yn(n)?n.get():n;return H$(e)?e.toValue():e}function G$({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:K$(r,i,s,n),renderState:e()};return t&&(a.mount=u=>t(r,u,a)),a}const xR=n=>(e,t)=>{const r=k.useContext(Cm),i=k.useContext(Fw),s=()=>G$(n,e,r,i);return t?s():W$(s)};function K$(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=Kf(s[v]);let{initial:a,animate:u}=n;const d=xm(n),h=pR(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Am(g)&&(Array.isArray(g)?g:[g]).forEach(T=>{const A=Kw(n,T);if(!A)return;const{transitionEnd:x,transition:P,...j}=A;for(const M in j){let D=j[M];if(Array.isArray(D)){const B=m?D.length-1:0;D=D[B]}D!==null&&(i[M]=D)}for(const M in x)i[M]=x[M]}),i}const Gt=n=>n;class uP{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Q$(n){let e=new uP,t=new uP,r=0,i=!1,s=!1;const a=new WeakSet,u={schedule:(d,h=!1,m=!1)=>{const g=m&&i,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const m=e.order[h];m(d),a.has(m)&&(u.schedule(m),n())}i=!1,s&&(s=!1,u.process(d))}};return u}const Cf=["prepare","read","update","preRender","render","postRender"],Y$=40;function X$(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Cf.reduce((g,v)=>(g[v]=Q$(()=>t=!0),g),{}),a=g=>s[g].process(i),u=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,Y$),1),i.timestamp=g,i.isProcessing=!0,Cf.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(u))},d=()=>{t=!0,r=!0,i.isProcessing||n(u)};return{schedule:Cf.reduce((g,v)=>{const T=s[v];return g[v]=(A,x=!1,P=!1)=>(t||d(),T.schedule(A,x,P)),g},{}),cancel:g=>Cf.forEach(v=>s[v].cancel(g)),state:i,steps:s}}const{schedule:Ct,cancel:ss,state:An,steps:Oy}=X$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gt,!0),J$={useVisualState:xR({scrapeMotionValuesFromProps:AR,createRenderState:SR,onMount:(n,e,{renderState:t,latestValues:r})=>{Ct.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Ct.render(()=>{Hw(t,r,{enableHardwareAcceleration:!1},qw(e.tagName),n.transformTemplate),bR(e,t)})}})},Z$={useVisualState:xR({scrapeMotionValuesFromProps:Gw,createRenderState:Ww})};function e9(n,{forwardMotionProps:e=!1},t,r){return{...$w(n)?J$:Z$,preloadedFeatures:t,useRender:z$(e),createVisualElement:r,Component:n}}function Yi(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const RR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function km(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const t9=n=>e=>RR(e)&&n(e,km(e));function Xi(n,e,t,r){return Yi(n,e,t9(t),r)}const n9=(n,e)=>t=>e(n(t)),uo=(...n)=>n.reduce(n9);function kR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const cP=kR("dragHorizontal"),dP=kR("dragVertical");function DR(n){let e=!1;if(n==="y")e=dP();else if(n==="x")e=cP();else{const t=cP(),r=dP();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function NR(){const n=DR(!0);return n?(n(),!1):!0}class bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function hP(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||NR())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&Ct.update(()=>u[r](s,a))};return Xi(n.current,t,i,{passive:!n.getProps()[r]})}class r9 extends bo{mount(){this.unmount=uo(hP(this.node,!0),hP(this.node,!1))}unmount(){}}class i9 extends bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=uo(Yi(this.node.current,"focus",()=>this.onFocus()),Yi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VR=(n,e)=>e?n===e?!0:VR(n,e.parentElement):!1;function Ly(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,km(t))}class s9 extends bo{constructor(){super(...arguments),this.removeStartListeners=Gt,this.removeEndListeners=Gt,this.removeAccessibleListeners=Gt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Xi(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Ct.update(()=>{!g&&!VR(this.node.current,u.target)?m&&m(u,d):h&&h(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=Xi(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=uo(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Ly("up",(d,h)=>{const{onTap:m}=this.node.getProps();m&&Ct.update(()=>m(d,h))})};this.removeEndListeners(),this.removeEndListeners=Yi(this.node.current,"keyup",a),Ly("down",(u,d)=>{this.startPress(u,d)})},t=Yi(this.node.current,"keydown",e),r=()=>{this.isPressing&&Ly("cancel",(s,a)=>this.cancelPress(s,a))},i=Yi(this.node.current,"blur",r);this.removeAccessibleListeners=uo(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ct.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!NR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ct.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Xi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=uo(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Qv=new WeakMap,Fy=new WeakMap,o9=n=>{const e=Qv.get(n.target);e&&e(n)},a9=n=>{n.forEach(o9)};function l9({root:n,...e}){const t=n||document;Fy.has(t)||Fy.set(t,{});const r=Fy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(a9,{root:n,...e})),r[i]}function u9(n,e,t){const r=l9(e);return Qv.set(n,t),r.observe(n),()=>{Qv.delete(n),r.unobserve(n)}}const c9={some:0,all:1};class d9 extends bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:c9[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(d)};return u9(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(h9(e,t))&&this.startObserver()}unmount(){}}function h9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const f9={inView:{Feature:d9},tap:{Feature:s9},focus:{Feature:i9},hover:{Feature:r9}};function MR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function p9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function m9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Dm(n,e,t){const r=n.getProps();return Kw(r,e,t!==void 0?t:r.custom,p9(n),m9(n))}let Qw=Gt;const Sa=n=>n*1e3,Ji=n=>n/1e3,g9={current:!1},OR=n=>Array.isArray(n)&&typeof n[0]=="number";function LR(n){return!!(!n||typeof n=="string"&&FR[n]||OR(n)||Array.isArray(n)&&n.every(LR))}const qc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,FR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qc([0,.65,.55,1]),circOut:qc([.55,0,1,.45]),backIn:qc([.31,.01,.66,-.59]),backOut:qc([.33,1.53,.69,.99])};function UR(n){if(n)return OR(n)?qc(n):Array.isArray(n)?n.map(UR):FR[n]}function y9(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:u,times:d}={}){const h={[e]:t};d&&(h.offset=d);const m=UR(u);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function v9(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const jR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,_9=1e-7,w9=12;function E9(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=jR(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>_9&&++u<w9);return a}function Jd(n,e,t,r){if(n===e&&t===r)return Gt;const i=s=>E9(s,0,1,n,t);return s=>s===0||s===1?s:jR(i(s),e,r)}const T9=Jd(.42,0,1,1),I9=Jd(0,0,.58,1),BR=Jd(.42,0,.58,1),S9=n=>Array.isArray(n)&&typeof n[0]!="number",$R=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,zR=n=>e=>1-n(1-e),Yw=n=>1-Math.sin(Math.acos(n)),WR=zR(Yw),P9=$R(Yw),HR=Jd(.33,1.53,.69,.99),Xw=zR(HR),C9=$R(Xw),b9=n=>(n*=2)<1?.5*Xw(n):.5*(2-Math.pow(2,-10*(n-1))),A9={linear:Gt,easeIn:T9,easeInOut:BR,easeOut:I9,circIn:Yw,circInOut:P9,circOut:WR,backIn:Xw,backInOut:C9,backOut:HR,anticipate:b9},fP=n=>{if(Array.isArray(n)){Qw(n.length===4);const[e,t,r,i]=n;return Jd(e,t,r,i)}else if(typeof n=="string")return A9[n];return n},Jw=(n,e)=>t=>!!(Yd(t)&&x$.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),qR=(n,e,t)=>r=>{if(!Yd(r))return r;const[i,s,a,u]=r.match(Rm);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},x9=n=>vo(0,255,n),Uy={...Ha,transform:n=>Math.round(x9(n))},wa={test:Jw("rgb","red"),parse:qR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Uy.transform(n)+", "+Uy.transform(e)+", "+Uy.transform(t)+", "+sd(id.transform(r))+")"};function R9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Yv={test:Jw("#"),parse:R9,transform:wa.transform},Gl={test:Jw("hsl","hue"),parse:qR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ti.transform(sd(e))+", "+Ti.transform(sd(t))+", "+sd(id.transform(r))+")"},On={test:n=>wa.test(n)||Yv.test(n)||Gl.test(n),parse:n=>wa.test(n)?wa.parse(n):Gl.test(n)?Gl.parse(n):Yv.parse(n),transform:n=>Yd(n)?n:n.hasOwnProperty("red")?wa.transform(n):Gl.transform(n)},Mt=(n,e,t)=>-t*n+t*e+n;function jy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function k9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;i=jy(d,u,n+1/3),s=jy(d,u,n),a=jy(d,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const By=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},D9=[Yv,wa,Gl],N9=n=>D9.find(e=>e.test(n));function pP(n){const e=N9(n);let t=e.parse(n);return e===Gl&&(t=k9(t)),t}const GR=(n,e)=>{const t=pP(n),r=pP(e),i={...t};return s=>(i.red=By(t.red,r.red,s),i.green=By(t.green,r.green,s),i.blue=By(t.blue,r.blue,s),i.alpha=Mt(t.alpha,r.alpha,s),wa.transform(i))};function V9(n){var e,t;return isNaN(n)&&Yd(n)&&(((e=n.match(Rm))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(wR))===null||t===void 0?void 0:t.length)||0)>0}const KR={regex:b$,countKey:"Vars",token:"${v}",parse:Gt},QR={regex:wR,countKey:"Colors",token:"${c}",parse:On.parse},YR={regex:Rm,countKey:"Numbers",token:"${n}",parse:Ha.parse};function $y(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Fp(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&$y(t,KR),$y(t,QR),$y(t,YR),t}function XR(n){return Fp(n).values}function JR(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Fp(n),s=e.length;return a=>{let u=i;for(let d=0;d<s;d++)d<r?u=u.replace(KR.token,a[d]):d<r+t?u=u.replace(QR.token,On.transform(a[d])):u=u.replace(YR.token,sd(a[d]));return u}}const M9=n=>typeof n=="number"?0:n;function O9(n){const e=XR(n);return JR(n)(e.map(M9))}const _o={test:V9,parse:XR,createTransformer:JR,getAnimatableNone:O9},ZR=(n,e)=>t=>`${t>0?e:n}`;function ek(n,e){return typeof n=="number"?t=>Mt(n,e,t):On.test(n)?GR(n,e):n.startsWith("var(")?ZR(n,e):nk(n,e)}const tk=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>ek(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},L9=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=ek(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},nk=(n,e)=>{const t=_o.createTransformer(e),r=Fp(n),i=Fp(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?uo(tk(r.values,i.values),t):ZR(n,e)},Ad=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},mP=(n,e)=>t=>Mt(n,e,t);function F9(n){return typeof n=="number"?mP:typeof n=="string"?On.test(n)?GR:nk:Array.isArray(n)?tk:typeof n=="object"?L9:mP}function U9(n,e,t){const r=[],i=t||F9(n[0]),s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||Gt:e;u=uo(d,u)}r.push(u)}return r}function rk(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Qw(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=U9(e,r,i),u=a.length,d=h=>{let m=0;if(u>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const g=Ad(n[m],n[m+1],h);return a[m](g)};return t?h=>d(vo(n[0],n[s-1],h)):d}function j9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ad(0,e,r);n.push(Mt(t,1,i))}}function B9(n){const e=[0];return j9(e,n.length-1),e}function $9(n,e){return n.map(t=>t*e)}function z9(n,e){return n.map(()=>e||BR).splice(0,n.length-1)}function Up({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=S9(r)?r.map(fP):fP(r),s={done:!1,value:e[0]},a=$9(t&&t.length===e.length?t:B9(e),n),u=rk(a,e,{ease:Array.isArray(i)?i:z9(e,i)});return{calculatedDuration:n,next:d=>(s.value=u(d),s.done=d>=n,s)}}function ik(n,e){return e?n*(1e3/e):0}const W9=5;function sk(n,e,t){const r=Math.max(e-W9,0);return ik(t-n(r),e-r)}const zy=.001,H9=.01,q9=10,G9=.05,K9=1;function Q9({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=vo(G9,K9,a),n=vo(H9,q9,Ji(n)),a<1?(i=h=>{const m=h*a,g=m*n,v=m-t,T=Xv(h,a),A=Math.exp(-g);return zy-v/T*A},s=h=>{const g=h*a*n,v=g*t+t,T=Math.pow(a,2)*Math.pow(h,2)*n,A=Math.exp(-g),x=Xv(Math.pow(h,2),a);return(-i(h)+zy>0?-1:1)*((v-T)*A)/x}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-zy+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,d=X9(i,s,u);if(n=Sa(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const Y9=12;function X9(n,e,t){let r=t;for(let i=1;i<Y9;i++)r=r-n(r)/e(r);return r}function Xv(n,e){return n*Math.sqrt(1-e*e)}const J9=["duration","bounce"],Z9=["stiffness","damping","mass"];function gP(n,e){return e.some(t=>n[t]!==void 0)}function ez(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!gP(n,Z9)&&gP(n,J9)){const t=Q9(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function ok({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:v}=ez({...r,velocity:-Ji(r.velocity||0)}),T=g||0,A=d/(2*Math.sqrt(u*h)),x=s-i,P=Ji(Math.sqrt(u/h)),j=Math.abs(x)<5;t||(t=j?.01:2),e||(e=j?.005:.5);let M;if(A<1){const D=Xv(P,A);M=B=>{const Z=Math.exp(-A*P*B);return s-Z*((T+A*P*x)/D*Math.sin(D*B)+x*Math.cos(D*B))}}else if(A===1)M=D=>s-Math.exp(-P*D)*(x+(T+P*x)*D);else{const D=P*Math.sqrt(A*A-1);M=B=>{const Z=Math.exp(-A*P*B),re=Math.min(D*B,300);return s-Z*((T+A*P*x)*Math.sinh(re)+D*x*Math.cosh(re))/D}}return{calculatedDuration:v&&m||null,next:D=>{const B=M(D);if(v)a.done=D>=m;else{let Z=T;D!==0&&(A<1?Z=sk(M,D,B):Z=0);const re=Math.abs(Z)<=t,C=Math.abs(s-B)<=e;a.done=re&&C}return a.value=a.done?s:B,a}}}function yP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],v={done:!1,value:g},T=I=>u!==void 0&&I<u||d!==void 0&&I>d,A=I=>u===void 0?d:d===void 0||Math.abs(u-I)<Math.abs(d-I)?u:d;let x=t*e;const P=g+x,j=a===void 0?P:a(P);j!==P&&(x=j-g);const M=I=>-x*Math.exp(-I/r),D=I=>j+M(I),B=I=>{const b=M(I),O=D(I);v.done=Math.abs(b)<=h,v.value=v.done?j:O};let Z,re;const C=I=>{T(v.value)&&(Z=I,re=ok({keyframes:[v.value,A(v.value)],velocity:sk(D,I,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return C(0),{calculatedDuration:null,next:I=>{let b=!1;return!re&&Z===void 0&&(b=!0,B(I),C(I)),Z!==void 0&&I>Z?re.next(I-Z):(!b&&B(I),v)}}}const tz=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ct.update(e,!0),stop:()=>ss(e),now:()=>An.isProcessing?An.timestamp:performance.now()}},vP=2e4;function _P(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<vP;)e+=t,r=n.next(e);return e>=vP?1/0:e}const nz={decay:yP,inertia:yP,tween:Up,keyframes:Up,spring:ok};function jp({autoplay:n=!0,delay:e=0,driver:t=tz,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:m,onUpdate:g,...v}){let T=1,A=!1,x,P;const j=()=>{P=new Promise(N=>{x=N})};j();let M;const D=nz[i]||Up;let B;D!==Up&&typeof r[0]!="number"&&(B=rk([0,100],r,{clamp:!1}),r=[0,100]);const Z=D({...v,keyframes:r});let re;u==="mirror"&&(re=D({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let C="idle",I=null,b=null,O=null;Z.calculatedDuration===null&&s&&(Z.calculatedDuration=_P(Z));const{calculatedDuration:L}=Z;let U=1/0,V=1/0;L!==null&&(U=L+a,V=U*(s+1)-a);let ce=0;const xe=N=>{if(b===null)return;T>0&&(b=Math.min(b,N)),T<0&&(b=Math.min(N-V/T,b)),I!==null?ce=I:ce=Math.round(N-b)*T;const z=ce-e*(T>=0?1:-1),ee=T>=0?z<0:z>V;ce=Math.max(z,0),C==="finished"&&I===null&&(ce=V);let se=ce,oe=Z;if(s){const Ue=Math.min(ce,V)/U;let at=Math.floor(Ue),Lt=Ue%1;!Lt&&Ue>=1&&(Lt=1),Lt===1&&at--,at=Math.min(at,s+1),at%2&&(u==="reverse"?(Lt=1-Lt,a&&(Lt-=a/U)):u==="mirror"&&(oe=re)),se=vo(0,1,Lt)*U}const he=ee?{done:!1,value:r[0]}:oe.next(se);B&&(he.value=B(he.value));let{done:we}=he;!ee&&L!==null&&(we=T>=0?ce>=V:ce<=0);const Me=I===null&&(C==="finished"||C==="running"&&we);return g&&g(he.value),Me&&W(),he},Pe=()=>{M&&M.stop(),M=void 0},De=()=>{C="idle",Pe(),x(),j(),b=O=null},W=()=>{C="finished",m&&m(),Pe(),x()},Y=()=>{if(A)return;M||(M=t(xe));const N=M.now();d&&d(),I!==null?b=N-I:(!b||C==="finished")&&(b=N),C==="finished"&&j(),O=b,I=null,C="running",M.start()};n&&Y();const X={then(N,z){return P.then(N,z)},get time(){return Ji(ce)},set time(N){N=Sa(N),ce=N,I!==null||!M||T===0?I=N:b=M.now()-N/T},get duration(){const N=Z.calculatedDuration===null?_P(Z):Z.calculatedDuration;return Ji(N)},get speed(){return T},set speed(N){N===T||!M||(T=N,X.time=Ji(ce))},get state(){return C},play:Y,pause:()=>{C="paused",I=ce},stop:()=>{A=!0,C!=="idle"&&(C="idle",h&&h(),De())},cancel:()=>{O!==null&&xe(O),De()},complete:()=>{C="finished"},sample:N=>(b=0,xe(N))};return X}function rz(n){let e;return()=>(e===void 0&&(e=n()),e)}const iz=rz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sz=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),bf=10,oz=2e4,az=(n,e)=>e.type==="spring"||n==="backgroundColor"||!LR(e.ease);function lz(n,e,{onUpdate:t,onComplete:r,...i}){if(!(iz()&&sz.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,d,h=!1;const m=()=>{d=new Promise(D=>{u=D})};m();let{keyframes:g,duration:v=300,ease:T,times:A}=i;if(az(e,i)){const D=jp({...i,repeat:0,delay:0});let B={done:!1,value:g[0]};const Z=[];let re=0;for(;!B.done&&re<oz;)B=D.sample(re),Z.push(B.value),re+=bf;A=void 0,g=Z,v=re-bf,T="linear"}const x=y9(n.owner.current,e,g,{...i,duration:v,ease:T,times:A}),P=()=>{h=!1,x.cancel()},j=()=>{h=!0,Ct.update(P),u(),m()};return x.onfinish=()=>{h||(n.set(v9(g,i)),r&&r(),j())},{then(D,B){return d.then(D,B)},attachTimeline(D){return x.timeline=D,x.onfinish=null,Gt},get time(){return Ji(x.currentTime||0)},set time(D){x.currentTime=Sa(D)},get speed(){return x.playbackRate},set speed(D){x.playbackRate=D},get duration(){return Ji(v)},play:()=>{a||(x.play(),ss(P))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:D}=x;if(D){const B=jp({...i,autoplay:!1});n.setWithVelocity(B.sample(D-bf).value,B.sample(D).value,bf)}j()},complete:()=>{h||x.finish()},cancel:j}}function uz({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Gt,pause:Gt,stop:Gt,then:s=>(s(),Promise.resolve()),cancel:Gt,complete:Gt});return e?jp({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const cz={type:"spring",stiffness:500,damping:25,restSpeed:10},dz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),hz={type:"keyframes",duration:.8},fz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pz=(n,{keyframes:e})=>e.length>2?hz:Wa.has(n)?n.startsWith("scale")?dz(e[1]):cz:fz,Jv=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_o.test(e)||e==="0")&&!e.startsWith("url(")),mz=new Set(["brightness","contrast","saturate","opacity"]);function gz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Rm)||[];if(!r)return n;const i=t.replace(r,"");let s=mz.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const yz=/([a-z-]*)\(.*?\)/g,Zv={..._o,getAnimatableNone:n=>{const e=n.match(yz);return e?e.map(gz).join(" "):n}},vz={...ER,color:On,backgroundColor:On,outlineColor:On,fill:On,stroke:On,borderColor:On,borderTopColor:On,borderRightColor:On,borderBottomColor:On,borderLeftColor:On,filter:Zv,WebkitFilter:Zv},Zw=n=>vz[n];function ak(n,e){let t=Zw(n);return t!==Zv&&(t=_o),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const lk=n=>/^0[^.\s]+$/.test(n);function _z(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||lk(n)}function wz(n,e,t,r){const i=Jv(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let u;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),_z(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(u=s[h]);if(i&&d.length&&u)for(let h=0;h<d.length;h++){const m=d[h];s[m]=ak(e,u)}return s}function Ez({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:d,elapsed:h,...m}){return!!Object.keys(m).length}function e0(n,e){return n[e]||n.default||n}const Tz={skipAnimations:!1},t0=(n,e,t,r={})=>i=>{const s=e0(r,n)||{},a=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Sa(a);const d=wz(e,n,t,s),h=d[0],m=d[d.length-1],g=Jv(n,h),v=Jv(n,m);let T={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:A=>{e.set(A),s.onUpdate&&s.onUpdate(A)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(Ez(s)||(T={...T,...pz(n,T)}),T.duration&&(T.duration=Sa(T.duration)),T.repeatDelay&&(T.repeatDelay=Sa(T.repeatDelay)),!g||!v||g9.current||s.type===!1||Tz.skipAnimations)return uz(T);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const A=lz(e,n,T);if(A)return A}return jp(T)};function Bp(n){return!!(Yn(n)&&n.add)}const uk=n=>/^\-?\d*\.?\d+$/.test(n);function n0(n,e){n.indexOf(e)===-1&&n.push(e)}function r0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class i0{constructor(){this.subscriptions=[]}add(e){return n0(this.subscriptions,e),()=>r0(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Iz=n=>!isNaN(parseFloat(n));class Sz{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=An;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Ct.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ct.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Iz(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new i0);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ik(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Su(n,e){return new Sz(n,e)}const ck=n=>e=>e.test(n),Pz={test:n=>n==="auto",parse:n=>n},dk=[Ha,Fe,Ti,Gs,k$,R$,Pz],Fc=n=>dk.find(ck(n)),Cz=[...dk,On,_o],bz=n=>Cz.find(ck(n));function Az(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Su(t))}function xz(n,e){const t=Dm(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const u=q$(s[a]);Az(n,a,u)}}function Rz(n,e,t){var r,i;const s=Object.keys(e).filter(u=>!n.hasValue(u)),a=s.length;if(a)for(let u=0;u<a;u++){const d=s[u],h=e[d];let m=null;Array.isArray(h)&&(m=h[0]),m===null&&(m=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),m!=null&&(typeof m=="string"&&(uk(m)||lk(m))?m=parseFloat(m):!bz(m)&&_o.test(h)&&(m=ak(d,h)),n.addValue(d,Su(m,{owner:n})),t[d]===void 0&&(t[d]=m),m!==null&&n.setBaseTarget(d,m))}}function kz(n,e){return e?(e[n]||e.default||e).from:void 0}function Dz(n,e,t){const r={};for(const i in n){const s=kz(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function Nz({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Vz(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function hk(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in u){const v=n.getValue(g),T=u[g];if(!v||T===void 0||m&&Nz(m,g))continue;const A={delay:t,elapsed:0,...e0(s||{},g)};if(window.HandoffAppearAnimations){const j=n.getProps()[fR];if(j){const M=window.HandoffAppearAnimations(j,g,v,Ct);M!==null&&(A.elapsed=M,A.isHandoff=!0)}}let x=!A.isHandoff&&!Vz(v,T);if(A.type==="spring"&&(v.getVelocity()||A.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(t0(g,v,T,n.shouldReduceMotion&&Wa.has(g)?{type:!1}:A));const P=v.animation;Bp(d)&&(d.add(g),P.then(()=>d.remove(g))),h.push(P)}return a&&Promise.all(h).then(()=>{a&&xz(n,a)}),h}function e_(n,e,t={}){const r=Dm(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(hk(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return Mz(n,e,h+d,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function Mz(n,e,t=0,r=0,i=1,s){const a=[],u=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(Oz).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(e_(h,e,{...s,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function Oz(n,e){return n.sortNodePosition(e)}function Lz(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>e_(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=e_(n,e,t);else{const i=typeof e=="function"?Dm(n,e,t.custom):e;r=Promise.all(hk(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const Fz=[...jw].reverse(),Uz=jw.length;function jz(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Lz(n,t,r)))}function Bz(n){let e=jz(n);const t=zz();let r=!0;const i=(d,h)=>{const m=Dm(n,h);if(m){const{transition:g,transitionEnd:v,...T}=m;d={...d,...T,...v}}return d};function s(d){e=d(n)}function a(d,h){const m=n.getProps(),g=n.getVariantContext(!0)||{},v=[],T=new Set;let A={},x=1/0;for(let j=0;j<Uz;j++){const M=Fz[j],D=t[M],B=m[M]!==void 0?m[M]:g[M],Z=Cd(B),re=M===h?D.isActive:null;re===!1&&(x=j);let C=B===g[M]&&B!==m[M]&&Z;if(C&&r&&n.manuallyAnimateOnMount&&(C=!1),D.protectedKeys={...A},!D.isActive&&re===null||!B&&!D.prevProp||Am(B)||typeof B=="boolean")continue;let b=$z(D.prevProp,B)||M===h&&D.isActive&&!C&&Z||j>x&&Z,O=!1;const L=Array.isArray(B)?B:[B];let U=L.reduce(i,{});re===!1&&(U={});const{prevResolvedValues:V={}}=D,ce={...V,...U},xe=Pe=>{b=!0,T.has(Pe)&&(O=!0,T.delete(Pe)),D.needsAnimating[Pe]=!0};for(const Pe in ce){const De=U[Pe],W=V[Pe];if(A.hasOwnProperty(Pe))continue;let Y=!1;Lp(De)&&Lp(W)?Y=!MR(De,W):Y=De!==W,Y?De!==void 0?xe(Pe):T.add(Pe):De!==void 0&&T.has(Pe)?xe(Pe):D.protectedKeys[Pe]=!0}D.prevProp=B,D.prevResolvedValues=U,D.isActive&&(A={...A,...U}),r&&n.blockInitialAnimation&&(b=!1),b&&(!C||O)&&v.push(...L.map(Pe=>({animation:Pe,options:{type:M,...d}})))}if(T.size){const j={};T.forEach(M=>{const D=n.getBaseTarget(M);D!==void 0&&(j[M]=D)}),v.push({animation:j})}let P=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(v):Promise.resolve()}function u(d,h,m){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(T=>{var A;return(A=T.animationState)===null||A===void 0?void 0:A.setActive(d,h)}),t[d].isActive=h;const v=a(m,d);for(const T in t)t[T].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t}}function $z(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!MR(e,n):!1}function oa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zz(){return{animate:oa(!0),whileInView:oa(),whileHover:oa(),whileTap:oa(),whileDrag:oa(),whileFocus:oa(),exit:oa()}}class Wz extends bo{constructor(e){super(e),e.animationState||(e.animationState=Bz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Am(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Hz=0;class qz extends bo{constructor(){super(...arguments),this.id=Hz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Gz={animation:{Feature:Wz},exit:{Feature:qz}},wP=(n,e)=>Math.abs(n-e);function Kz(n,e){const t=wP(n.x,e.x),r=wP(n.y,e.y);return Math.sqrt(t**2+r**2)}class fk{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Hy(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=Kz(g.offset,{x:0,y:0})>=3;if(!v&&!T)return;const{point:A}=g,{timestamp:x}=An;this.history.push({...A,timestamp:x});const{onStart:P,onMove:j}=this.handlers;v||(P&&P(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Wy(v,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:T,onSessionEnd:A,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Hy(g.type==="pointercancel"?this.lastMoveEventInfo:Wy(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(g,P),A&&A(g,P)},!RR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=km(e),u=Wy(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=An;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,Hy(u,this.history)),this.removeListeners=uo(Xi(this.contextWindow,"pointermove",this.handlePointerMove),Xi(this.contextWindow,"pointerup",this.handlePointerUp),Xi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ss(this.updatePoint)}}function Wy(n,e){return e?{point:e(n.point)}:n}function EP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Hy({point:n},e){return{point:n,delta:EP(n,pk(e)),offset:EP(n,Qz(e)),velocity:Yz(e,.1)}}function Qz(n){return n[0]}function pk(n){return n[n.length-1]}function Yz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=pk(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Sa(e)));)t--;if(!r)return{x:0,y:0};const s=Ji(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function hr(n){return n.max-n.min}function t_(n,e=0,t=.01){return Math.abs(n-e)<=t}function TP(n,e,t,r=.5){n.origin=r,n.originPoint=Mt(e.min,e.max,n.origin),n.scale=hr(t)/hr(e),(t_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Mt(t.min,t.max,n.origin)-n.originPoint,(t_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function od(n,e,t,r){TP(n.x,e.x,t.x,r?r.originX:void 0),TP(n.y,e.y,t.y,r?r.originY:void 0)}function IP(n,e,t){n.min=t.min+e.min,n.max=n.min+hr(e)}function Xz(n,e,t){IP(n.x,e.x,t.x),IP(n.y,e.y,t.y)}function SP(n,e,t){n.min=e.min-t.min,n.max=n.min+hr(e)}function ad(n,e,t){SP(n.x,e.x,t.x),SP(n.y,e.y,t.y)}function Jz(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Mt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Mt(t,n,r.max):Math.min(n,t)),n}function PP(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Zz(n,{top:e,left:t,bottom:r,right:i}){return{x:PP(n.x,t,i),y:PP(n.y,e,r)}}function CP(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function eW(n,e){return{x:CP(n.x,e.x),y:CP(n.y,e.y)}}function tW(n,e){let t=.5;const r=hr(n),i=hr(e);return i>r?t=Ad(e.min,e.max-r,n.min):r>i&&(t=Ad(n.min,n.max-i,e.min)),vo(0,1,t)}function nW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const n_=.35;function rW(n=n_){return n===!1?n=0:n===!0&&(n=n_),{x:bP(n,"left","right"),y:bP(n,"top","bottom")}}function bP(n,e,t){return{min:AP(n,e),max:AP(n,t)}}function AP(n,e){return typeof n=="number"?n:n[e]||0}const xP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kl=()=>({x:xP(),y:xP()}),RP=()=>({min:0,max:0}),tn=()=>({x:RP(),y:RP()});function Ir(n){return[n("x"),n("y")]}function mk({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function iW({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sW(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function qy(n){return n===void 0||n===1}function r_({scale:n,scaleX:e,scaleY:t}){return!qy(n)||!qy(e)||!qy(t)}function ha(n){return r_(n)||gk(n)||n.z||n.rotate||n.rotateX||n.rotateY}function gk(n){return kP(n.x)||kP(n.y)}function kP(n){return n&&n!=="0%"}function $p(n,e,t){const r=n-t,i=e*r;return t+i}function DP(n,e,t,r,i){return i!==void 0&&(n=$p(n,i,r)),$p(n,t,r)+e}function i_(n,e=0,t=1,r,i){n.min=DP(n.min,e,t,r,i),n.max=DP(n.max,e,t,r,i)}function yk(n,{x:e,y:t}){i_(n.x,e.translate,e.scale,e.originPoint),i_(n.y,t.translate,t.scale,t.originPoint)}function oW(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ql(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,yk(n,a)),r&&ha(s.latestValues)&&Ql(n,s.latestValues))}e.x=NP(e.x),e.y=NP(e.y)}function NP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Ks(n,e){n.min=n.min+e,n.max=n.max+e}function VP(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=Mt(n.min,n.max,s);i_(n,e[t],e[r],a,e.scale)}const aW=["x","scaleX","originX"],lW=["y","scaleY","originY"];function Ql(n,e){VP(n.x,e,aW),VP(n.y,e,lW)}function vk(n,e){return mk(sW(n.getBoundingClientRect(),e))}function uW(n,e,t){const r=vk(n,t),{scroll:i}=e;return i&&(Ks(r.x,i.offset.x),Ks(r.y,i.offset.y)),r}const _k=({current:n})=>n?n.ownerDocument.defaultView:null,cW=new WeakMap;class dW{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(km(m,"page").point)},s=(m,g)=>{const{drag:v,dragPropagation:T,onDragStart:A}=this.getProps();if(v&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=DR(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ir(P=>{let j=this.getAxisMotionValue(P).get()||0;if(Ti.test(j)){const{projection:M}=this.visualElement;if(M&&M.layout){const D=M.layout.layoutBox[P];D&&(j=hr(D)*(parseFloat(j)/100))}}this.originPoint[P]=j}),A&&Ct.update(()=>A(m,g),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:A,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:P}=g;if(T&&this.currentDirection===null){this.currentDirection=hW(P),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",g.point,P),this.updateAxis("y",g.point,P),this.visualElement.render(),x&&x(m,g)},u=(m,g)=>this.stop(m,g),d=()=>Ir(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new fk(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:_k(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ct.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Af(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Jz(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&ql(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Zz(i.layoutBox,t):this.constraints=!1,this.elastic=rW(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ir(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=nW(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ql(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=uW(r,i.root,this.visualElement.getTransformPagePoint());let a=eW(i.layout.layoutBox,s);if(t){const u=t(iW(a));this.hasMutatedConstraints=!!u,u&&(a=mk(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=Ir(m=>{if(!Af(m,t,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const v=i?200:1e6,T=i?40:1e7,A={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,A)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(t0(e,r,0,t))}stopAnimation(){Ir(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ir(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ir(t=>{const{drag:r}=this.getProps();if(!Af(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t];s.set(e[t]-Mt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ql(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ir(a=>{const u=this.getAxisMotionValue(a);if(u){const d=u.get();i[a]=tW({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ir(a=>{if(!Af(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(Mt(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;cW.set(this.visualElement,this);const e=this.visualElement.current,t=Xi(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ql(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=Yi(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ir(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=n_,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function Af(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function hW(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class fW extends bo{constructor(e){super(e),this.removeGroupControls=Gt,this.removeListeners=Gt,this.controls=new dW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const MP=n=>(e,t)=>{n&&Ct.update(()=>n(e,t))};class pW extends bo{constructor(){super(...arguments),this.removePointerDownListener=Gt}onPointerDown(e){this.session=new fk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_k(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:MP(e),onStart:MP(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Ct.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=Xi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function mW(){const n=k.useContext(Fw);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=k.useId();return k.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Qf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Uc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Fe.test(n))n=parseFloat(n);else return n;const t=OP(n,e.target.x),r=OP(n,e.target.y);return`${t}% ${r}%`}},gW={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=_o.parse(n);if(i.length>5)return r;const s=_o.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=d;const h=Mt(u,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class yW extends nn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;I$(vW),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Qf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ct.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wk(n){const[e,t]=mW(),r=k.useContext(mR);return nn.createElement(yW,{...n,layoutGroup:r,switchLayoutGroup:k.useContext(gR),isPresent:e,safeToRemove:t})}const vW={borderRadius:{...Uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uc,borderTopRightRadius:Uc,borderBottomLeftRadius:Uc,borderBottomRightRadius:Uc,boxShadow:gW},Ek=["TopLeft","TopRight","BottomLeft","BottomRight"],_W=Ek.length,LP=n=>typeof n=="string"?parseFloat(n):n,FP=n=>typeof n=="number"||Fe.test(n);function wW(n,e,t,r,i,s){i?(n.opacity=Mt(0,t.opacity!==void 0?t.opacity:1,EW(r)),n.opacityExit=Mt(e.opacity!==void 0?e.opacity:1,0,TW(r))):s&&(n.opacity=Mt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<_W;a++){const u=`border${Ek[a]}Radius`;let d=UP(e,u),h=UP(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||FP(d)===FP(h)?(n[u]=Math.max(Mt(LP(d),LP(h),r),0),(Ti.test(h)||Ti.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=Mt(e.rotate||0,t.rotate||0,r))}function UP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const EW=Tk(0,.5,WR),TW=Tk(.5,.95,Gt);function Tk(n,e,t){return r=>r<n?0:r>e?1:t(Ad(n,e,r))}function jP(n,e){n.min=e.min,n.max=e.max}function Tr(n,e){jP(n.x,e.x),jP(n.y,e.y)}function BP(n,e,t,r,i){return n-=e,n=$p(n,1/t,r),i!==void 0&&(n=$p(n,1/i,r)),n}function IW(n,e=0,t=1,r=.5,i,s=n,a=n){if(Ti.test(e)&&(e=parseFloat(e),e=Mt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Mt(s.min,s.max,r);n===s&&(u-=e),n.min=BP(n.min,e,t,u,i),n.max=BP(n.max,e,t,u,i)}function $P(n,e,[t,r,i],s,a){IW(n,e[t],e[r],e[i],e.scale,s,a)}const SW=["x","scaleX","originX"],PW=["y","scaleY","originY"];function zP(n,e,t,r){$P(n.x,e,SW,t?t.x:void 0,r?r.x:void 0),$P(n.y,e,PW,t?t.y:void 0,r?r.y:void 0)}function WP(n){return n.translate===0&&n.scale===1}function Ik(n){return WP(n.x)&&WP(n.y)}function CW(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Sk(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function HP(n){return hr(n.x)/hr(n.y)}class bW{constructor(){this.members=[]}add(e){n0(this.members,e),e.scheduleRender()}remove(e){if(r0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qP(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:m}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const AW=(n,e)=>n.depth-e.depth;class xW{constructor(){this.children=[],this.isDirty=!1}add(e){n0(this.children,e),this.isDirty=!0}remove(e){r0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AW),this.isDirty=!1,this.children.forEach(e)}}function RW(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ss(r),n(s-e))};return Ct.read(r,!0),()=>ss(r)}function kW(n){window.MotionDebug&&window.MotionDebug.record(n)}function DW(n){return n instanceof SVGElement&&n.tagName!=="svg"}function NW(n,e,t){const r=Yn(n)?n:Su(n);return r.start(t0("",r,e,t)),r.animation}const GP=["","X","Y","Z"],VW={visibility:"hidden"},KP=1e3;let MW=0;const fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Pk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=MW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fa.totalNodes=fa.resolvedTargetDeltas=fa.recalculatedProjection=0,this.nodes.forEach(FW),this.nodes.forEach(zW),this.nodes.forEach(WW),this.nodes.forEach(UW),kW(fa)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new xW)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new i0),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=DW(a),this.instance=a;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=RW(v,250),Qf.hasAnimatedSinceResize&&(Qf.hasAnimatedSinceResize=!1,this.nodes.forEach(YP))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:T,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||m.getDefaultTransition()||QW,{onLayoutAnimationStart:P,onLayoutAnimationComplete:j}=m.getProps(),M=!this.targetLayout||!Sk(this.targetLayout,A)||T,D=!v&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||D||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,D);const B={...e0(x,"layout"),onPlay:P,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||YP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ss(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HW),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QP);return}this.isUpdating||this.nodes.forEach(BW),this.isUpdating=!1,this.nodes.forEach($W),this.nodes.forEach(OW),this.nodes.forEach(LW),this.clearAllSnapshots();const u=performance.now();An.delta=vo(0,1e3/60,u-An.timestamp),An.timestamp=u,An.isProcessing=!0,Oy.update.process(An),Oy.preRender.process(An),Oy.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(jW),this.sharedNodes.forEach(qW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!Ik(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||ha(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),YW(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return tn();const u=a.measureViewportBox(),{scroll:d}=this.root;return d&&(Ks(u.x,d.offset.x),Ks(u.y,d.offset.y)),u}removeElementScroll(a){const u=tn();Tr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:g}=h;if(h!==this.root&&m&&g.layoutScroll){if(m.isRoot){Tr(u,a);const{scroll:v}=this.root;v&&(Ks(u.x,-v.offset.x),Ks(u.y,-v.offset.y))}Ks(u.x,m.offset.x),Ks(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const d=tn();Tr(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Ql(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ha(m.latestValues)&&Ql(d,m.latestValues)}return ha(this.latestValues)&&Ql(d,this.latestValues),d}removeTransform(a){const u=tn();Tr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ha(h.latestValues))continue;r_(h.latestValues)&&h.updateSnapshot();const m=tn(),g=h.measurePageBox();Tr(m,g),zP(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ha(this.latestValues)&&zP(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),ad(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Xz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),yk(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),ad(this.relativeTargetOrigin,this.target,T.target),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||r_(this.parent.latestValues)||gk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===An.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Tr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,T=this.treeScale.y;oW(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:A}=u;if(!A){this.projectionTransform&&(this.projectionDelta=Kl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Kl(),this.projectionDeltaWithTransform=Kl());const x=this.projectionTransform;od(this.projectionDelta,this.layoutCorrected,A,this.latestValues),this.projectionTransform=qP(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==T)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=Kl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=tn(),T=d?d.source:void 0,A=this.layout?this.layout.source:void 0,x=T!==A,P=this.getStack(),j=!P||P.members.length<=1,M=!!(x&&!j&&this.options.crossfade===!0&&!this.path.some(KW));this.animationProgress=0;let D;this.mixTargetDelta=B=>{const Z=B/1e3;XP(g.x,a.x,Z),XP(g.y,a.y,Z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ad(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GW(this.relativeTarget,this.relativeTargetOrigin,v,Z),D&&CW(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=tn()),Tr(D,this.relativeTarget)),x&&(this.animationValues=m,wW(m,h,this.latestValues,Z,M,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ss(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{Qf.hasAnimatedSinceResize=!0,this.currentAnimation=NW(0,KP,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:m}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&Ck(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||tn();const g=hr(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=hr(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Tr(u,d),Ql(u,m),od(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new bW),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const h={};for(let m=0;m<GP.length;m++){const g="rotate"+GP[m];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const m in h)a.setStaticValue(m,h[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VW;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Kf(a?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Kf(a?.pointerEvents)||""),this.hasProjected&&!ha(this.latestValues)&&(x.transform=m?m({},""):"none",this.hasProjected=!1),x}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=qP(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:T,y:A}=this.projectionDelta;h.transformOrigin=`${T.origin*100}% ${A.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Mp){if(v[x]===void 0)continue;const{correct:P,applyTo:j}=Mp[x],M=h.transform==="none"?v[x]:P(v[x],g);if(j){const D=j.length;for(let B=0;B<D;B++)h[j[B]]=M}else h[x]=M}return this.options.layoutId&&(h.pointerEvents=g===this?Kf(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(QP),this.root.sharedNodes.clear()}}}function OW(n){n.updateLayout()}function LW(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Ir(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],T=hr(v);v.min=r[g].min,v.max=v.min+T}):Ck(s,t.layoutBox,r)&&Ir(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],T=hr(r[g]);v.max=v.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+T)});const u=Kl();od(u,r,t.layoutBox);const d=Kl();a?od(d,n.applyTransform(i,!0),t.measuredBox):od(d,r,t.layoutBox);const h=!Ik(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:T}=g;if(v&&T){const A=tn();ad(A,t.layoutBox,v.layoutBox);const x=tn();ad(x,r,T.layoutBox),Sk(A,x)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=A,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function FW(n){fa.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function UW(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function jW(n){n.clearSnapshot()}function QP(n){n.clearMeasurements()}function BW(n){n.isLayoutDirty=!1}function $W(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function YP(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function zW(n){n.resolveTargetDelta()}function WW(n){n.calcProjection()}function HW(n){n.resetRotation()}function qW(n){n.removeLeadSnapshot()}function XP(n,e,t){n.translate=Mt(e.translate,0,t),n.scale=Mt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function JP(n,e,t,r){n.min=Mt(e.min,t.min,r),n.max=Mt(e.max,t.max,r)}function GW(n,e,t,r){JP(n.x,e.x,t.x,r),JP(n.y,e.y,t.y,r)}function KW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const QW={duration:.45,ease:[.4,0,.1,1]},ZP=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),eC=ZP("applewebkit/")&&!ZP("chrome/")?Math.round:Gt;function tC(n){n.min=eC(n.min),n.max=eC(n.max)}function YW(n){tC(n.x),tC(n.y)}function Ck(n,e,t){return n==="position"||n==="preserve-aspect"&&!t_(HP(e),HP(t),.2)}const XW=Pk({attachResizeListener:(n,e)=>Yi(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gy={current:void 0},bk=Pk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Gy.current){const n=new XW({});n.mount(window),n.setOptions({layoutScroll:!0}),Gy.current=n}return Gy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),JW={pan:{Feature:pW},drag:{Feature:fW,ProjectionNode:bk,MeasureLayout:wk}},ZW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eH(n){const e=ZW.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function s_(n,e,t=1){const[r,i]=eH(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return uk(a)?parseFloat(a):a}else return Kv(i)?s_(i,e,t+1):i}function tH(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!Kv(s))return;const a=s_(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!Kv(s))continue;const a=s_(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const nH=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ak=n=>nH.has(n),rH=n=>Object.keys(n).some(Ak),nC=n=>n===Ha||n===Fe,rC=(n,e)=>parseFloat(n.split(", ")[e]),iC=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return rC(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?rC(s[1],n):0}},iH=new Set(["x","y","z"]),sH=Qd.filter(n=>!iH.has(n));function oH(n){const e=[];return sH.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Pu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:iC(4,13),y:iC(5,14)};Pu.translateX=Pu.x;Pu.translateY=Pu.y;const aH=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,u={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{u[h]=Pu[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const m=e.getValue(h);m&&m.jump(u[h]),n[h]=Pu[h](d,s)}),n},lH=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Ak);let s=[],a=!1;const u=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let m=t[d],g=Fc(m);const v=e[d];let T;if(Lp(v)){const A=v.length,x=v[0]===null?1:0;m=v[x],g=Fc(m);for(let P=x;P<A&&v[P]!==null;P++)T?Qw(Fc(v[P])===T):T=Fc(v[P])}else T=Fc(v);if(g!==T)if(nC(g)&&nC(T)){const A=h.get();typeof A=="string"&&h.set(parseFloat(A)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&T===Fe&&(e[d]=v.map(parseFloat))}else g?.transform&&T?.transform&&(m===0||v===0)?m===0?h.set(T.transform(m)):e[d]=g.transform(v):(a||(s=oH(n),a=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,h=aH(e,n,u);return s.length&&s.forEach(([m,g])=>{n.getValue(m).set(g)}),n.render(),bm&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function uH(n,e,t,r){return rH(e)?lH(n,e,t,r):{target:e,transitionEnd:r}}const cH=(n,e,t,r)=>{const i=tH(n,e,r);return e=i.target,r=i.transitionEnd,uH(n,e,t,r)},o_={current:null},xk={current:!1};function dH(){if(xk.current=!0,!!bm)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>o_.current=n.matches;n.addListener(e),e()}else o_.current=!1}function hH(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(Yn(s))n.addValue(i,s),Bp(r)&&r.add(i);else if(Yn(a))n.addValue(i,Su(s,{owner:n})),Bp(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const u=n.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,Su(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const sC=new WeakMap,Rk=Object.keys(bd),fH=Rk.length,oC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pH=Bw.length;class mH{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ct.render(this.render,!1,!0);const{latestValues:u,renderState:d}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=xm(t),this.isVariantNode=pR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{});for(const g in m){const v=m[g];u[g]!==void 0&&Yn(v)&&(v.set(u[g],!1),Bp(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,sC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),xk.current||dH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){sC.delete(this.current),this.projection&&this.projection.unmount(),ss(this.notifyUpdate),ss(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=Wa.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ct.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,u;for(let d=0;d<fH;d++){const h=Rk[d],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:T}=bd[h];v&&(a=v),m(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),T&&(u=T))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:T}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!m||g&&ql(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:T})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<oC.length;r++){const i=oC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=hH(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<pH;r++){const i=Bw[r],s=this.props[i];(Cd(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Su(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=Kw(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Yn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new i0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class kk extends mH{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=Dz(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){Rz(this,r,a);const u=cH(this,r,a,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function gH(n){return window.getComputedStyle(n)}class yH extends kk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Wa.has(t)){const r=Zw(t);return r&&r.default||0}else{const r=gH(e),i=(_R(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return vk(e,t)}build(e,t,r,i){zw(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Gw(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){PR(e,t,r,i)}}class vH extends kk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Wa.has(t)){const r=Zw(t);return r&&r.default||0}return t=CR.has(t)?t:Uw(t),e.getAttribute(t)}measureInstanceViewportBox(){return tn()}scrapeMotionValuesFromProps(e,t){return AR(e,t)}build(e,t,r,i){Hw(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){bR(e,t,r,i)}mount(e){this.isSVGTag=qw(e.tagName),super.mount(e)}}const _H=(n,e)=>$w(n)?new vH(e,{enableHardwareAcceleration:!1}):new yH(e,{enableHardwareAcceleration:!0}),wH={layout:{ProjectionNode:bk,MeasureLayout:wk}},EH={...Gz,...f9,...JW,...wH},xf=E$((n,e)=>e9(n,e,EH,_H));function TH(){const[n,e]=k.useState(!1),[t,r]=k.useState(null);k.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let a,u;const d=h=>{h&&h.addEventListener("statechange",()=>{h.state==="installed"&&navigator.serviceWorker.controller&&(r(h),e(!0))})};return navigator.serviceWorker.ready.then(h=>{a=h,h.waiting&&(r(h.waiting),e(!0)),u=()=>{d(h.installing)},h.addEventListener("updatefound",u)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),a&&u&&a.removeEventListener("updatefound",u)}},[]);const i=()=>{t&&t.postMessage({type:"SKIP_WAITING"}),e(!1)};return n?K.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:K.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[K.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),K.jsxs("div",{className:"flex items-center justify-end gap-2",children:[K.jsx(tu,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),K.jsx(tu,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}function IH(){return k.useEffect(()=>{const n=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${e}px`)};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),null}const SH=k.lazy(()=>Si(()=>import("./AuthPage-BbGYvR2N.js"),__vite__mapDeps([0,1,2,3]))),PH=k.lazy(()=>Si(()=>import("./DashboardPage-CUbfzaKw.js"),__vite__mapDeps([4,5,6,7,8,9,10,1,11,12,3,13]))),CH=k.lazy(()=>Si(()=>import("./ArchivedCyclesPage-P-JvypBV.js"),__vite__mapDeps([14,8,15,7,6,9]))),bH=k.lazy(()=>Si(()=>import("./CycleDetailPage-D0bNJTkF.js"),__vite__mapDeps([16,9,8,6,7,15,17,5,10,1,11,12,3,18]))),AH=k.lazy(()=>Si(()=>import("./SettingsPage-cf5kQeAg.js"),__vite__mapDeps([19,1,11,8,2]))),xH=k.lazy(()=>Si(()=>import("./ChartPage-DJkdMOC1.js"),__vite__mapDeps([20,21,11,8,7,13,12,10,1,6,3,18]))),RH=k.lazy(()=>Si(()=>import("./RecordsPage-DHke8dmA.js"),__vite__mapDeps([17,5,6,7,8,9,10,1,11,12,3,15])));function Ll({children:n}){const{user:e}=Tm();return e?n:K.jsx(Yy,{to:"/auth",replace:!0})}function kH(){const{user:n,loadingAuth:e}=Tm(),t=wo();if(e)return K.jsx(Bv,{children:K.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[K.jsx(xf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),K.jsx(xf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const r=n?K.jsx(da,{children:K.jsx("div",{className:"flex min-h-app items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):K.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[K.jsx(xf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),K.jsx(xf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return K.jsx(Bv,{children:K.jsx(k.Suspense,{fallback:r,children:K.jsx(u5,{children:K.jsx(p6,{FallbackComponent:D1,children:K.jsxs(jN,{children:[K.jsx(qi,{path:"/auth",element:n?K.jsx(Yy,{to:"/",replace:!0}):K.jsx(SH,{})}),K.jsx(qi,{path:"/",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(PH,{})})})}),K.jsx(qi,{path:"/chart/:cycleId?",element:K.jsx(Ll,{children:K.jsx(xH,{})})}),K.jsx(qi,{path:"/records",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(RH,{})})})}),K.jsx(qi,{path:"/archived-cycles",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(CH,{})})})}),K.jsx(qi,{path:"/settings",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(AH,{})})})}),K.jsx(qi,{path:"/cycle/:cycleId",element:K.jsx(Ll,{children:K.jsx(da,{children:K.jsx(bH,{})})})}),K.jsx(qi,{path:"*",element:K.jsx(Yy,{to:n?"/":"/auth",replace:!0})})]})},t.pathname)})})})}function DH(){return K.jsxs(KN,{basename:"/",children:[K.jsx(IH,{}),K.jsx(TH,{}),K.jsxs(z4,{children:[K.jsx(h6,{children:K.jsx(f6,{children:K.jsx(nV,{children:K.jsx(kH,{})})})}),K.jsx(c$,{})]})]})}if(typeof window<"u"){const{hostname:n}=window.location;if(n.endsWith(".firebaseapp.com")){const e=new URL(window.location.href);e.hostname=n.replace(".firebaseapp.com",".web.app"),window.location.replace(e.toString())}}GD.createRoot(document.getElementById("root")).render(K.jsx(nn.StrictMode,{children:K.jsx(DH,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=new URL("sw.js","/");navigator.serviceWorker.register(n).catch(e=>{console.error("Service worker registration failed:",e)})});export{Dn as $,y6 as A,tu as B,_6 as C,Ua as D,N1 as E,j1 as F,lr as G,ja as H,Pd as I,za as J,UH as K,XN as L,a6 as M,c_ as N,wo as O,bi as P,B4 as Q,nn as R,da as S,u$ as T,E6 as U,w6 as V,a5 as W,T6 as X,Et as Y,W4 as Z,Si as _,p_ as a,d$ as a0,Ct as a1,W$ as a2,Fw as a3,mR as a4,$B as a5,$t as a6,Mu as a7,Cp as a8,r1 as a9,Q4 as aa,Sm as ab,F5 as ac,U1 as ad,O1 as ae,g5 as af,B5 as ag,e5 as ah,k1 as ai,u_ as aj,jH as ak,FH as al,w1 as am,qD as an,by as ao,Dc as ap,Nc as aq,Pj as ar,NH as as,a_ as at,ve as au,Ew as b,Ou as c,xt as d,Ee as e,ye as f,Ln as g,xk as h,dH as i,K as j,He as k,Im as l,xf as m,Y4 as n,st as o,o_ as p,G4 as q,k as r,ax as s,v6 as t,Tm as u,VH as v,_1 as w,qj as x,is as y,qf as z};
