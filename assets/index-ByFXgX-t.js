const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-C5Iee6s8.js","assets/label--L53Nrbo.js","assets/InstallPrompt-C-h-YE9m.js","assets/eye-CfXbXuuz.js","assets/DashboardPage-oDnSWUBf.js","assets/PostpartumExitDialog-81hY3wEb.js","assets/useBackClose-BFeNma-P.js","assets/badge-CetW1kHg.js","assets/useCycleData-BwqH7MfP.js","assets/DeletionDialog-Da12udM-.js","assets/DataEntryForm-B10-vrnA.js","assets/computePeakStatuses-hwVxT-Am.js","assets/peak-mode-button-DTRv1E4U.js","assets/useFertilityChart-B4dbAta_.js","assets/ArchivedCyclesPage-D0vFe0-0.js","assets/HeaderIconButton-9FbpFFvA.js","assets/CycleDetailPage-MoYBqsWD.js","assets/RecordsPage-BpP3kG0n.js","assets/arrow-left-RIrLE-V6.js","assets/SettingsPage-DYzmoz43.js","assets/ChartPage-BBb8zx7B.js","assets/FertilityChart-C1dfcuJt.js"])))=>i.map(i=>d[i]);
function pN(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Aq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ty={exports:{}},zc={},Sy={exports:{}},st={};var LT;function mN(){if(LT)return st;LT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,b={};function P(B,ee,we){this.props=B,this.context=ee,this.refs=b,this.updater=we||E}P.prototype.isReactComponent={},P.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},P.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function L(){}L.prototype=P.prototype;function D(B,ee,we){this.props=B,this.context=ee,this.refs=b,this.updater=we||E}var A=D.prototype=new L;A.constructor=D,I(A,P.prototype),A.isPureReactComponent=!0;var j=Array.isArray,H=Object.prototype.hasOwnProperty,Y={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(B,ee,we){var Te,Ee={},Me=null,tt=null;if(ee!=null)for(Te in ee.ref!==void 0&&(tt=ee.ref),ee.key!==void 0&&(Me=""+ee.key),ee)H.call(ee,Te)&&!x.hasOwnProperty(Te)&&(Ee[Te]=ee[Te]);var rt=arguments.length-2;if(rt===1)Ee.children=we;else if(1<rt){for(var at=Array(rt),kt=0;kt<rt;kt++)at[kt]=arguments[kt+2];Ee.children=at}if(B&&B.defaultProps)for(Te in rt=B.defaultProps,rt)Ee[Te]===void 0&&(Ee[Te]=rt[Te]);return{$$typeof:n,type:B,key:Me,ref:tt,props:Ee,_owner:Y.current}}function k(B,ee){return{$$typeof:n,type:B.type,key:ee,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var ee={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(we){return ee[we]})}var U=/\/+/g;function V(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):ee.toString(36)}function ie(B,ee,we,Te,Ee){var Me=typeof B;(Me==="undefined"||Me==="boolean")&&(B=null);var tt=!1;if(B===null)tt=!0;else switch(Me){case"string":case"number":tt=!0;break;case"object":switch(B.$$typeof){case n:case e:tt=!0}}if(tt)return tt=B,Ee=Ee(tt),B=Te===""?"."+V(tt,0):Te,j(Ee)?(we="",B!=null&&(we=B.replace(U,"$&/")+"/"),ie(Ee,ee,we,"",function(kt){return kt})):Ee!=null&&(O(Ee)&&(Ee=k(Ee,we+(!Ee.key||tt&&tt.key===Ee.key?"":(""+Ee.key).replace(U,"$&/")+"/")+B)),ee.push(Ee)),1;if(tt=0,Te=Te===""?".":Te+":",j(B))for(var rt=0;rt<B.length;rt++){Me=B[rt];var at=Te+V(Me,rt);tt+=ie(Me,ee,we,at,Ee)}else if(at=v(B),typeof at=="function")for(B=at.call(B),rt=0;!(Me=B.next()).done;)Me=Me.value,at=Te+V(Me,rt++),tt+=ie(Me,ee,we,at,Ee);else if(Me==="object")throw ee=String(B),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return tt}function Ie(B,ee,we){if(B==null)return B;var Te=[],Ee=0;return ie(B,Te,"","",function(Me){return ee.call(we,Me,Ee++)}),Te}function Ce(B){if(B._status===-1){var ee=B._result;ee=ee(),ee.then(function(we){(B._status===0||B._status===-1)&&(B._status=1,B._result=we)},function(we){(B._status===0||B._status===-1)&&(B._status=2,B._result=we)}),B._status===-1&&(B._status=0,B._result=ee)}if(B._status===1)return B._result.default;throw B._result}var je={current:null},se={transition:null},_e={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:se,ReactCurrentOwner:Y};function ue(){throw Error("act(...) is not supported in production builds of React.")}return st.Children={map:Ie,forEach:function(B,ee,we){Ie(B,function(){ee.apply(this,arguments)},we)},count:function(B){var ee=0;return Ie(B,function(){ee++}),ee},toArray:function(B){return Ie(B,function(ee){return ee})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},st.Component=P,st.Fragment=t,st.Profiler=i,st.PureComponent=D,st.StrictMode=r,st.Suspense=c,st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,st.act=ue,st.cloneElement=function(B,ee,we){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Te=I({},B.props),Ee=B.key,Me=B.ref,tt=B._owner;if(ee!=null){if(ee.ref!==void 0&&(Me=ee.ref,tt=Y.current),ee.key!==void 0&&(Ee=""+ee.key),B.type&&B.type.defaultProps)var rt=B.type.defaultProps;for(at in ee)H.call(ee,at)&&!x.hasOwnProperty(at)&&(Te[at]=ee[at]===void 0&&rt!==void 0?rt[at]:ee[at])}var at=arguments.length-2;if(at===1)Te.children=we;else if(1<at){rt=Array(at);for(var kt=0;kt<at;kt++)rt[kt]=arguments[kt+2];Te.children=rt}return{$$typeof:n,type:B.type,key:Ee,ref:Me,props:Te,_owner:tt}},st.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:s,_context:B},B.Consumer=B},st.createElement=S,st.createFactory=function(B){var ee=S.bind(null,B);return ee.type=B,ee},st.createRef=function(){return{current:null}},st.forwardRef=function(B){return{$$typeof:u,render:B}},st.isValidElement=O,st.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:Ce}},st.memo=function(B,ee){return{$$typeof:h,type:B,compare:ee===void 0?null:ee}},st.startTransition=function(B){var ee=se.transition;se.transition={};try{B()}finally{se.transition=ee}},st.unstable_act=ue,st.useCallback=function(B,ee){return je.current.useCallback(B,ee)},st.useContext=function(B){return je.current.useContext(B)},st.useDebugValue=function(){},st.useDeferredValue=function(B){return je.current.useDeferredValue(B)},st.useEffect=function(B,ee){return je.current.useEffect(B,ee)},st.useId=function(){return je.current.useId()},st.useImperativeHandle=function(B,ee,we){return je.current.useImperativeHandle(B,ee,we)},st.useInsertionEffect=function(B,ee){return je.current.useInsertionEffect(B,ee)},st.useLayoutEffect=function(B,ee){return je.current.useLayoutEffect(B,ee)},st.useMemo=function(B,ee){return je.current.useMemo(B,ee)},st.useReducer=function(B,ee,we){return je.current.useReducer(B,ee,we)},st.useRef=function(B){return je.current.useRef(B)},st.useState=function(B){return je.current.useState(B)},st.useSyncExternalStore=function(B,ee,we){return je.current.useSyncExternalStore(B,ee,we)},st.useTransition=function(){return je.current.useTransition()},st.version="18.3.1",st}var FT;function A_(){return FT||(FT=1,Sy.exports=mN()),Sy.exports}var UT;function gN(){if(UT)return zc;UT=1;var n=A_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,c,h){var m,g={},v=null,E=null;h!==void 0&&(v=""+h),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(E=c.ref);for(m in c)r.call(c,m)&&!s.hasOwnProperty(m)&&(g[m]=c[m]);if(u&&u.defaultProps)for(m in c=u.defaultProps,c)g[m]===void 0&&(g[m]=c[m]);return{$$typeof:e,type:u,key:v,ref:E,props:g,_owner:i.current}}return zc.Fragment=t,zc.jsx=a,zc.jsxs=a,zc}var jT;function yN(){return jT||(jT=1,Ty.exports=gN()),Ty.exports}var G=yN(),R=A_();const pn=b_(R),x_=pN({__proto__:null,default:pn},[R]);var xf={},Iy={exports:{}},rr={},Cy={exports:{}},Py={};var BT;function vN(){return BT||(BT=1,(function(n){function e(se,_e){var ue=se.length;se.push(_e);e:for(;0<ue;){var B=ue-1>>>1,ee=se[B];if(0<i(ee,_e))se[B]=_e,se[ue]=ee,ue=B;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var _e=se[0],ue=se.pop();if(ue!==_e){se[0]=ue;e:for(var B=0,ee=se.length,we=ee>>>1;B<we;){var Te=2*(B+1)-1,Ee=se[Te],Me=Te+1,tt=se[Me];if(0>i(Ee,ue))Me<ee&&0>i(tt,Ee)?(se[B]=tt,se[Me]=ue,B=Me):(se[B]=Ee,se[Te]=ue,B=Te);else if(Me<ee&&0>i(tt,ue))se[B]=tt,se[Me]=ue,B=Me;else break e}}return _e}function i(se,_e){var ue=se.sortIndex-_e.sortIndex;return ue!==0?ue:se.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var c=[],h=[],m=1,g=null,v=3,E=!1,I=!1,b=!1,P=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(se){for(var _e=t(h);_e!==null;){if(_e.callback===null)r(h);else if(_e.startTime<=se)r(h),_e.sortIndex=_e.expirationTime,e(c,_e);else break;_e=t(h)}}function j(se){if(b=!1,A(se),!I)if(t(c)!==null)I=!0,Ce(H);else{var _e=t(h);_e!==null&&je(j,_e.startTime-se)}}function H(se,_e){I=!1,b&&(b=!1,L(S),S=-1),E=!0;var ue=v;try{for(A(_e),g=t(c);g!==null&&(!(g.expirationTime>_e)||se&&!M());){var B=g.callback;if(typeof B=="function"){g.callback=null,v=g.priorityLevel;var ee=B(g.expirationTime<=_e);_e=n.unstable_now(),typeof ee=="function"?g.callback=ee:g===t(c)&&r(c),A(_e)}else r(c);g=t(c)}if(g!==null)var we=!0;else{var Te=t(h);Te!==null&&je(j,Te.startTime-_e),we=!1}return we}finally{g=null,v=ue,E=!1}}var Y=!1,x=null,S=-1,k=5,O=-1;function M(){return!(n.unstable_now()-O<k)}function U(){if(x!==null){var se=n.unstable_now();O=se;var _e=!0;try{_e=x(!0,se)}finally{_e?V():(Y=!1,x=null)}}else Y=!1}var V;if(typeof D=="function")V=function(){D(U)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ie=ie.port2;ie.port1.onmessage=U,V=function(){Ie.postMessage(null)}}else V=function(){P(U,0)};function Ce(se){x=se,Y||(Y=!0,V())}function je(se,_e){S=P(function(){se(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){I||E||(I=!0,Ce(H))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(se){switch(v){case 1:case 2:case 3:var _e=3;break;default:_e=v}var ue=v;v=_e;try{return se()}finally{v=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,_e){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ue=v;v=se;try{return _e()}finally{v=ue}},n.unstable_scheduleCallback=function(se,_e,ue){var B=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?B+ue:B):ue=B,se){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ue+ee,se={id:m++,callback:_e,priorityLevel:se,startTime:ue,expirationTime:ee,sortIndex:-1},ue>B?(se.sortIndex=ue,e(h,se),t(c)===null&&se===t(h)&&(b?(L(S),S=-1):b=!0,je(j,ue-B))):(se.sortIndex=ee,e(c,se),I||E||(I=!0,Ce(H))),se},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(se){var _e=v;return function(){var ue=v;v=_e;try{return se.apply(this,arguments)}finally{v=ue}}}})(Py)),Py}var $T;function _N(){return $T||($T=1,Cy.exports=vN()),Cy.exports}var zT;function wN(){if(zT)return rr;zT=1;var n=A_(),e=_N();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return c.call(g,o)?!0:c.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function E(o,l,d,p){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function I(o,l,d,p){if(l===null||typeof l>"u"||E(o,l,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(o,l,d,p,y,_,C){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=o,this.type=l,this.sanitizeURL=_,this.removeEmptyString=C}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){P[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];P[l]=new b(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){P[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){P[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){P[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){P[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){P[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){P[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){P[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function D(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(L,D);P[l]=new b(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(L,D);P[l]=new b(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(L,D);P[l]=new b(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){P[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),P.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){P[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function A(o,l,d,p){var y=P.hasOwnProperty(l)?P[l]:null;(y!==null?y.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(I(l,d,y,p)&&(d=null),p||y===null?v(l)&&(d===null?o.removeAttribute(l):o.setAttribute(l,""+d)):y.mustUseProperty?o[y.propertyName]=d===null?y.type===3?!1:"":d:(l=y.attributeName,p=y.attributeNamespace,d===null?o.removeAttribute(l):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,p?o.setAttributeNS(p,l,d):o.setAttribute(l,d))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),se=Symbol.iterator;function _e(o){return o===null||typeof o!="object"?null:(o=se&&o[se]||o["@@iterator"],typeof o=="function"?o:null)}var ue=Object.assign,B;function ee(o){if(B===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+o}var we=!1;function Te(o,l){if(!o||we)return"";we=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var p=X}Reflect.construct(o,[],l)}else{try{l.call()}catch(X){p=X}o.call(l.prototype)}else{try{throw Error()}catch(X){p=X}o()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),_=p.stack.split(`
`),C=y.length-1,F=_.length-1;1<=C&&0<=F&&y[C]!==_[F];)F--;for(;1<=C&&0<=F;C--,F--)if(y[C]!==_[F]){if(C!==1||F!==1)do if(C--,F--,0>F||y[C]!==_[F]){var $=`
`+y[C].replace(" at new "," at ");return o.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",o.displayName)),$}while(1<=C&&0<=F);break}}}finally{we=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?ee(o):""}function Ee(o){switch(o.tag){case 5:return ee(o.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return o=Te(o.type,!1),o;case 11:return o=Te(o.type.render,!1),o;case 1:return o=Te(o.type,!0),o;default:return""}}function Me(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case x:return"Fragment";case Y:return"Portal";case k:return"Profiler";case S:return"StrictMode";case V:return"Suspense";case ie:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case M:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case U:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ie:return l=o.displayName||null,l!==null?l:Me(o.type)||"Memo";case Ce:l=o._payload,o=o._init;try{return Me(o(l))}catch{}}return null}function tt(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(l);case 8:return l===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function rt(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function at(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function kt(o){var l=at(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(C){p=""+C,_.call(this,C)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function gn(o){o._valueTracker||(o._valueTracker=kt(o))}function Ds(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return o&&(p=at(o)?o.checked?"true":"false":o.value),o=p,o!==d?(l.setValue(o),!0):!1}function oi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function J(o,l){var d=l.checked;return ue({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function ne(o,l){var d=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;d=rt(l.value!=null?l.value:d),o._wrapperState={initialChecked:p,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function de(o,l){l=l.checked,l!=null&&A(o,"checked",l,!1)}function ve(o,l){de(o,l);var d=rt(l.value),p=l.type;if(d!=null)p==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?pe(o,l.type,d):l.hasOwnProperty("defaultValue")&&pe(o,l.type,rt(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function he(o,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,d||l===o.value||(o.value=l),o.defaultValue=l}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function pe(o,l,d){(l!=="number"||oi(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var Ae=Array.isArray;function Ke(o,l,d,p){if(o=o.options,l){l={};for(var y=0;y<d.length;y++)l["$"+d[y]]=!0;for(d=0;d<o.length;d++)y=l.hasOwnProperty("$"+o[d].value),o[d].selected!==y&&(o[d].selected=y),y&&p&&(o[d].defaultSelected=!0)}else{for(d=""+rt(d),l=null,y=0;y<o.length;y++){if(o[y].value===d){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function Ue(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ge(o,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(Ae(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}o._wrapperState={initialValue:rt(d)}}function gt(o,l){var d=rt(l.value),p=rt(l.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),l.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),p!=null&&(o.defaultValue=""+p)}function ot(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Ot(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ur(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Ot(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var An,qo=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,p,y){MSApp.execUnsafeLocalFunction(function(){return o(l,d,p,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(An=An||document.createElement("div"),An.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=An.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function qi(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cl=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(o){cl.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),jr[l]=jr[o]})});function Pr(o,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||jr.hasOwnProperty(o)&&jr[o]?(""+l).trim():l+"px"}function ks(o,l){o=o.style;for(var d in l)if(l.hasOwnProperty(d)){var p=d.indexOf("--")===0,y=Pr(d,l[d],p);d==="float"&&(d="cssFloat"),p?o.setProperty(d,y):o[d]=y}}var Go=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cr(o,l){if(l){if(Go[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Br(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function Gi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var br=null,Ar=null,$t=null;function Ko(o){if(o=Ac(o)){if(typeof br!="function")throw Error(t(280));var l=o.stateNode;l&&(l=zh(l),br(o.stateNode,o.type,l))}}function li(o){Ar?$t?$t.push(o):$t=[o]:Ar=o}function ui(){if(Ar){var o=Ar,l=$t;if($t=Ar=null,Ko(o),l)for(o=0;o<l.length;o++)Ko(l[o])}}function ci(o,l){return o(l)}function Ns(){}var ht=!1;function dl(o,l,d){if(ht)return o(l,d);ht=!0;try{return ci(o,l,d)}finally{ht=!1,(Ar!==null||$t!==null)&&(Ns(),ui())}}function Ki(o,l){var d=o.stateNode;if(d===null)return null;var p=zh(d);if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var Vs=!1;if(u)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Vs=!1}function wh(o,l,d,p,y,_,C,F,$){var X=Array.prototype.slice.call(arguments,3);try{l.apply(d,X)}catch(le){this.onError(le)}}var Qi=!1,di=null,hl=!1,xr=null,Eh={onError:function(o){Qi=!0,di=o}};function Th(o,l,d,p,y,_,C,F,$){Qi=!1,di=null,wh.apply(Eh,arguments)}function nc(o,l,d,p,y,_,C,F,$){if(Th.apply(this,arguments),Qi){if(Qi){var X=di;Qi=!1,di=null}else throw Error(t(198));hl||(hl=!0,xr=X)}}function $r(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function rc(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Sh(o){if($r(o)!==o)throw Error(t(188))}function Ih(o){var l=o.alternate;if(!l){if(l=$r(o),l===null)throw Error(t(188));return l!==o?null:o}for(var d=o,p=l;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){d=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return Sh(y),o;if(_===p)return Sh(y),l;_=_.sibling}throw Error(t(188))}if(d.return!==p.return)d=y,p=_;else{for(var C=!1,F=y.child;F;){if(F===d){C=!0,d=y,p=_;break}if(F===p){C=!0,p=y,d=_;break}F=F.sibling}if(!C){for(F=_.child;F;){if(F===d){C=!0,d=_,p=y;break}if(F===p){C=!0,p=_,d=y;break}F=F.sibling}if(!C)throw Error(t(189))}}if(d.alternate!==p)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?o:l}function Ch(o){return o=Ih(o),o!==null?Qo(o):null}function Qo(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Qo(o);if(l!==null)return l;o=o.sibling}return null}var ic=e.unstable_scheduleCallback,fl=e.unstable_cancelCallback,Yo=e.unstable_shouldYield,Yi=e.unstable_requestPaint,Lt=e.unstable_now,Zm=e.unstable_getCurrentPriorityLevel,pl=e.unstable_ImmediatePriority,sc=e.unstable_UserBlockingPriority,Xo=e.unstable_NormalPriority,oc=e.unstable_LowPriority,ml=e.unstable_IdlePriority,Jo=null,dr=null;function Ph(o){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Jo,o,void 0,(o.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:Zo,hi=Math.log,Rr=Math.LN2;function Zo(o){return o>>>=0,o===0?32:31-(hi(o)/Rr|0)|0}var fi=64,Os=4194304;function Tt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Xi(o,l){var d=o.pendingLanes;if(d===0)return 0;var p=0,y=o.suspendedLanes,_=o.pingedLanes,C=d&268435455;if(C!==0){var F=C&~y;F!==0?p=Tt(F):(_&=C,_!==0&&(p=Tt(_)))}else C=d&~y,C!==0?p=Tt(C):_!==0&&(p=Tt(_));if(p===0)return 0;if(l!==0&&l!==p&&(l&y)===0&&(y=p&-p,_=l&-l,y>=_||y===16&&(_&4194240)!==0))return l;if((p&4)!==0&&(p|=d&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)d=31-hr(l),y=1<<d,p|=o[d],l&=~y;return p}function ea(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ta(o,l){for(var d=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes;0<_;){var C=31-hr(_),F=1<<C,$=y[C];$===-1?((F&d)===0||(F&p)!==0)&&(y[C]=ea(F,l)):$<=l&&(o.expiredLanes|=F),_&=~F}}function ac(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function lc(){var o=fi;return fi<<=1,(fi&4194240)===0&&(fi=64),o}function uc(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function na(o,l,d){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-hr(l),o[l]=d}function eg(o,l){var d=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<d;){var y=31-hr(d),_=1<<y;l[y]=0,p[y]=-1,o[y]=-1,d&=~_}}function cc(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var p=31-hr(d),y=1<<p;y&l|o[p]&l&&(o[p]|=l),d&=~y}}var ft=0;function pi(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var dc,gl,hc,fc,pc,mi=!1,yl=[],gi=null,yi=null,xn=null,ra=new Map,Ji=new Map,fr=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ls(o,l){switch(o){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":ra.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ji.delete(l.pointerId)}}function zr(o,l,d,p,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},l!==null&&(l=Ac(l),l!==null&&gl(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function Ah(o,l,d,p,y){switch(l){case"focusin":return gi=zr(gi,o,l,d,p,y),!0;case"dragenter":return yi=zr(yi,o,l,d,p,y),!0;case"mouseover":return xn=zr(xn,o,l,d,p,y),!0;case"pointerover":var _=y.pointerId;return ra.set(_,zr(ra.get(_)||null,o,l,d,p,y)),!0;case"gotpointercapture":return _=y.pointerId,Ji.set(_,zr(Ji.get(_)||null,o,l,d,p,y)),!0}return!1}function vl(o){var l=aa(o.target);if(l!==null){var d=$r(l);if(d!==null){if(l=d.tag,l===13){if(l=rc(d),l!==null){o.blockedOn=l,pc(o.priority,function(){hc(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dt(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=_l(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var p=new d.constructor(d.type,d);ai=p,d.target.dispatchEvent(p),ai=null}else return l=Ac(d),l!==null&&gl(l),o.blockedOn=d,!1;l.shift()}return!0}function xh(o,l,d){Dt(o)&&d.delete(l)}function tg(){mi=!1,gi!==null&&Dt(gi)&&(gi=null),yi!==null&&Dt(yi)&&(yi=null),xn!==null&&Dt(xn)&&(xn=null),ra.forEach(xh),Ji.forEach(xh)}function Fs(o,l){o.blockedOn===l&&(o.blockedOn=null,mi||(mi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tg)))}function Us(o){function l(y){return Fs(y,o)}if(0<yl.length){Fs(yl[0],o);for(var d=1;d<yl.length;d++){var p=yl[d];p.blockedOn===o&&(p.blockedOn=null)}}for(gi!==null&&Fs(gi,o),yi!==null&&Fs(yi,o),xn!==null&&Fs(xn,o),ra.forEach(l),Ji.forEach(l),d=0;d<fr.length;d++)p=fr[d],p.blockedOn===o&&(p.blockedOn=null);for(;0<fr.length&&(d=fr[0],d.blockedOn===null);)vl(d),d.blockedOn===null&&fr.shift()}var Zi=j.ReactCurrentBatchConfig,es=!0;function vi(o,l,d,p){var y=ft,_=Zi.transition;Zi.transition=null;try{ft=1,mc(o,l,d,p)}finally{ft=y,Zi.transition=_}}function Rh(o,l,d,p){var y=ft,_=Zi.transition;Zi.transition=null;try{ft=4,mc(o,l,d,p)}finally{ft=y,Zi.transition=_}}function mc(o,l,d,p){if(es){var y=_l(o,l,d,p);if(y===null)hg(o,l,p,_i,d),Ls(o,p);else if(Ah(y,o,l,d,p))p.stopPropagation();else if(Ls(o,p),l&4&&-1<bh.indexOf(o)){for(;y!==null;){var _=Ac(y);if(_!==null&&dc(_),_=_l(o,l,d,p),_===null&&hg(o,l,p,_i,d),_===y)break;y=_}y!==null&&p.stopPropagation()}else hg(o,l,p,null,d)}}var _i=null;function _l(o,l,d,p){if(_i=null,o=Gi(p),o=aa(o),o!==null)if(l=$r(o),l===null)o=null;else if(d=l.tag,d===13){if(o=rc(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return _i=o,null}function wl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zm()){case pl:return 1;case sc:return 4;case Xo:case oc:return 16;case ml:return 536870912;default:return 16}default:return 16}}var pr=null,El=null,ts=null;function Dh(){if(ts)return ts;var o,l=El,d=l.length,p,y="value"in pr?pr.value:pr.textContent,_=y.length;for(o=0;o<d&&l[o]===y[o];o++);var C=d-o;for(p=1;p<=C&&l[d-p]===y[_-p];p++);return ts=y.slice(o,1<p?1-p:void 0)}function ia(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function wi(){return!0}function gc(){return!1}function Vn(o){function l(d,p,y,_,C){this._reactName=d,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(d=o[F],this[F]=d?d(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wi:gc,this.isPropagationStopped=gc,this}return ue(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),l}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Vn(Ei),js=ue({},Ei,{view:0,detail:0}),Tl=Vn(js),Sl,Il,mr,oa=ue({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==mr&&(mr&&o.type==="mousemove"?(Sl=o.screenX-mr.screenX,Il=o.screenY-mr.screenY):Il=Sl=0,mr=o),Sl)},movementY:function(o){return"movementY"in o?o.movementY:Il}}),yc=Vn(oa),kh=ue({},oa,{dataTransfer:0}),Nh=Vn(kh),Cl=ue({},js,{relatedTarget:0}),Rn=Vn(Cl),Vh=ue({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Mh=Vn(Vh),Bs=ue({},Ei,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),f=Vn(Bs),w=ue({},Ei,{data:0}),T=Vn(w),N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ye(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Z[o])?!!l[o]:!1}function nt(){return ye}var nn=ue({},js,{key:function(o){if(o.key){var l=N[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=ia(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?K[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nt,charCode:function(o){return o.type==="keypress"?ia(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ia(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Ct=Vn(nn),cn=ue({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gr=Vn(cn),ns=ue({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nt}),Ti=Vn(ns),Si=ue({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pl=Vn(Si),vc=ue({},oa,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lk=Vn(vc),uk=[9,13,27,32],ng=u&&"CompositionEvent"in window,_c=null;u&&"documentMode"in document&&(_c=document.documentMode);var ck=u&&"TextEvent"in window&&!_c,xE=u&&(!ng||_c&&8<_c&&11>=_c),RE=" ",DE=!1;function kE(o,l){switch(o){case"keyup":return uk.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var bl=!1;function dk(o,l){switch(o){case"compositionend":return NE(l);case"keypress":return l.which!==32?null:(DE=!0,RE);case"textInput":return o=l.data,o===RE&&DE?null:o;default:return null}}function hk(o,l){if(bl)return o==="compositionend"||!ng&&kE(o,l)?(o=Dh(),ts=El=pr=null,bl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return xE&&l.locale!=="ko"?null:l.data;default:return null}}var fk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VE(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!fk[o.type]:l==="textarea"}function ME(o,l,d,p){li(p),l=jh(l,"onChange"),0<l.length&&(d=new sa("onChange","change",null,d,p),o.push({event:d,listeners:l}))}var wc=null,Ec=null;function pk(o){ZE(o,0)}function Oh(o){var l=kl(o);if(Ds(l))return o}function mk(o,l){if(o==="change")return l}var OE=!1;if(u){var rg;if(u){var ig="oninput"in document;if(!ig){var LE=document.createElement("div");LE.setAttribute("oninput","return;"),ig=typeof LE.oninput=="function"}rg=ig}else rg=!1;OE=rg&&(!document.documentMode||9<document.documentMode)}function FE(){wc&&(wc.detachEvent("onpropertychange",UE),Ec=wc=null)}function UE(o){if(o.propertyName==="value"&&Oh(Ec)){var l=[];ME(l,Ec,o,Gi(o)),dl(pk,l)}}function gk(o,l,d){o==="focusin"?(FE(),wc=l,Ec=d,wc.attachEvent("onpropertychange",UE)):o==="focusout"&&FE()}function yk(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Oh(Ec)}function vk(o,l){if(o==="click")return Oh(l)}function _k(o,l){if(o==="input"||o==="change")return Oh(l)}function wk(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Wr=typeof Object.is=="function"?Object.is:wk;function Tc(o,l){if(Wr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var y=d[p];if(!c.call(l,y)||!Wr(o[y],l[y]))return!1}return!0}function jE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function BE(o,l){var d=jE(o);o=0;for(var p;d;){if(d.nodeType===3){if(p=o+d.textContent.length,o<=l&&p>=l)return{node:d,offset:l-o};o=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=jE(d)}}function $E(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?$E(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function zE(){for(var o=window,l=oi();l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=oi(o.document)}return l}function sg(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function Ek(o){var l=zE(),d=o.focusedElem,p=o.selectionRange;if(l!==d&&d&&d.ownerDocument&&$E(d.ownerDocument.documentElement,d)){if(p!==null&&sg(d)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(o,d.value.length);else if(o=(l=d.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=d.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!o.extend&&_>p&&(y=p,p=_,_=y),y=BE(d,_);var C=BE(d,p);y&&C&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==C.node||o.focusOffset!==C.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),_>p?(o.addRange(l),o.extend(C.node,C.offset)):(l.setEnd(C.node,C.offset),o.addRange(l)))}}for(l=[],o=d;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)o=l[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Tk=u&&"documentMode"in document&&11>=document.documentMode,Al=null,og=null,Sc=null,ag=!1;function WE(o,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ag||Al==null||Al!==oi(p)||(p=Al,"selectionStart"in p&&sg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Sc&&Tc(Sc,p)||(Sc=p,p=jh(og,"onSelect"),0<p.length&&(l=new sa("onSelect","select",null,l,d),o.push({event:l,listeners:p}),l.target=Al)))}function Lh(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var xl={animationend:Lh("Animation","AnimationEnd"),animationiteration:Lh("Animation","AnimationIteration"),animationstart:Lh("Animation","AnimationStart"),transitionend:Lh("Transition","TransitionEnd")},lg={},HE={};u&&(HE=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function Fh(o){if(lg[o])return lg[o];if(!xl[o])return o;var l=xl[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in HE)return lg[o]=l[d];return o}var qE=Fh("animationend"),GE=Fh("animationiteration"),KE=Fh("animationstart"),QE=Fh("transitionend"),YE=new Map,XE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $s(o,l){YE.set(o,l),s(l,[o])}for(var ug=0;ug<XE.length;ug++){var cg=XE[ug],Sk=cg.toLowerCase(),Ik=cg[0].toUpperCase()+cg.slice(1);$s(Sk,"on"+Ik)}$s(qE,"onAnimationEnd"),$s(GE,"onAnimationIteration"),$s(KE,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(QE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ic));function JE(o,l,d){var p=o.type||"unknown-event";o.currentTarget=d,nc(p,l,void 0,o),o.currentTarget=null}function ZE(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var p=o[d],y=p.event;p=p.listeners;e:{var _=void 0;if(l)for(var C=p.length-1;0<=C;C--){var F=p[C],$=F.instance,X=F.currentTarget;if(F=F.listener,$!==_&&y.isPropagationStopped())break e;JE(y,F,X),_=$}else for(C=0;C<p.length;C++){if(F=p[C],$=F.instance,X=F.currentTarget,F=F.listener,$!==_&&y.isPropagationStopped())break e;JE(y,F,X),_=$}}}if(hl)throw o=xr,hl=!1,xr=null,o}function Ft(o,l){var d=l[vg];d===void 0&&(d=l[vg]=new Set);var p=o+"__bubble";d.has(p)||(e0(l,o,2,!1),d.add(p))}function dg(o,l,d){var p=0;l&&(p|=4),e0(d,o,p,l)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function Cc(o){if(!o[Uh]){o[Uh]=!0,r.forEach(function(d){d!=="selectionchange"&&(Ck.has(d)||dg(d,!1,o),dg(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Uh]||(l[Uh]=!0,dg("selectionchange",!1,l))}}function e0(o,l,d,p){switch(wl(l)){case 1:var y=vi;break;case 4:y=Rh;break;default:y=mc}d=y.bind(null,l,d,o),y=void 0,!Vs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,d,{capture:!0,passive:y}):o.addEventListener(l,d,!0):y!==void 0?o.addEventListener(l,d,{passive:y}):o.addEventListener(l,d,!1)}function hg(o,l,d,p,y){var _=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var F=p.stateNode.containerInfo;if(F===y||F.nodeType===8&&F.parentNode===y)break;if(C===4)for(C=p.return;C!==null;){var $=C.tag;if(($===3||$===4)&&($=C.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;C=C.return}for(;F!==null;){if(C=aa(F),C===null)return;if($=C.tag,$===5||$===6){p=_=C;continue e}F=F.parentNode}}p=p.return}dl(function(){var X=_,le=Gi(d),fe=[];e:{var oe=YE.get(o);if(oe!==void 0){var be=sa,ke=o;switch(o){case"keypress":if(ia(d)===0)break e;case"keydown":case"keyup":be=Ct;break;case"focusin":ke="focus",be=Rn;break;case"focusout":ke="blur",be=Rn;break;case"beforeblur":case"afterblur":be=Rn;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=Nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Ti;break;case qE:case GE:case KE:be=Mh;break;case QE:be=Pl;break;case"scroll":be=Tl;break;case"wheel":be=lk;break;case"copy":case"cut":case"paste":be=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=gr}var Oe=(l&4)!==0,rn=!Oe&&o==="scroll",q=Oe?oe!==null?oe+"Capture":null:oe;Oe=[];for(var z=X,Q;z!==null;){Q=z;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,q!==null&&(me=Ki(z,q),me!=null&&Oe.push(Pc(z,me,Q)))),rn)break;z=z.return}0<Oe.length&&(oe=new be(oe,ke,null,d,le),fe.push({event:oe,listeners:Oe}))}}if((l&7)===0){e:{if(oe=o==="mouseover"||o==="pointerover",be=o==="mouseout"||o==="pointerout",oe&&d!==ai&&(ke=d.relatedTarget||d.fromElement)&&(aa(ke)||ke[rs]))break e;if((be||oe)&&(oe=le.window===le?le:(oe=le.ownerDocument)?oe.defaultView||oe.parentWindow:window,be?(ke=d.relatedTarget||d.toElement,be=X,ke=ke?aa(ke):null,ke!==null&&(rn=$r(ke),ke!==rn||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(be=null,ke=X),be!==ke)){if(Oe=yc,me="onMouseLeave",q="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(Oe=gr,me="onPointerLeave",q="onPointerEnter",z="pointer"),rn=be==null?oe:kl(be),Q=ke==null?oe:kl(ke),oe=new Oe(me,z+"leave",be,d,le),oe.target=rn,oe.relatedTarget=Q,me=null,aa(le)===X&&(Oe=new Oe(q,z+"enter",ke,d,le),Oe.target=Q,Oe.relatedTarget=rn,me=Oe),rn=me,be&&ke)t:{for(Oe=be,q=ke,z=0,Q=Oe;Q;Q=Rl(Q))z++;for(Q=0,me=q;me;me=Rl(me))Q++;for(;0<z-Q;)Oe=Rl(Oe),z--;for(;0<Q-z;)q=Rl(q),Q--;for(;z--;){if(Oe===q||q!==null&&Oe===q.alternate)break t;Oe=Rl(Oe),q=Rl(q)}Oe=null}else Oe=null;be!==null&&t0(fe,oe,be,Oe,!1),ke!==null&&rn!==null&&t0(fe,rn,ke,Oe,!0)}}e:{if(oe=X?kl(X):window,be=oe.nodeName&&oe.nodeName.toLowerCase(),be==="select"||be==="input"&&oe.type==="file")var Le=mk;else if(VE(oe))if(OE)Le=_k;else{Le=yk;var He=gk}else(be=oe.nodeName)&&be.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Le=vk);if(Le&&(Le=Le(o,X))){ME(fe,Le,d,le);break e}He&&He(o,oe,X),o==="focusout"&&(He=oe._wrapperState)&&He.controlled&&oe.type==="number"&&pe(oe,"number",oe.value)}switch(He=X?kl(X):window,o){case"focusin":(VE(He)||He.contentEditable==="true")&&(Al=He,og=X,Sc=null);break;case"focusout":Sc=og=Al=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,WE(fe,d,le);break;case"selectionchange":if(Tk)break;case"keydown":case"keyup":WE(fe,d,le)}var qe;if(ng)e:{switch(o){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else bl?kE(o,d)&&(Je="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Je="onCompositionStart");Je&&(xE&&d.locale!=="ko"&&(bl||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&bl&&(qe=Dh()):(pr=le,El="value"in pr?pr.value:pr.textContent,bl=!0)),He=jh(X,Je),0<He.length&&(Je=new T(Je,o,null,d,le),fe.push({event:Je,listeners:He}),qe?Je.data=qe:(qe=NE(d),qe!==null&&(Je.data=qe)))),(qe=ck?dk(o,d):hk(o,d))&&(X=jh(X,"onBeforeInput"),0<X.length&&(le=new T("onBeforeInput","beforeinput",null,d,le),fe.push({event:le,listeners:X}),le.data=qe))}ZE(fe,l)})}function Pc(o,l,d){return{instance:o,listener:l,currentTarget:d}}function jh(o,l){for(var d=l+"Capture",p=[];o!==null;){var y=o,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=Ki(o,d),_!=null&&p.unshift(Pc(o,_,y)),_=Ki(o,l),_!=null&&p.push(Pc(o,_,y))),o=o.return}return p}function Rl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function t0(o,l,d,p,y){for(var _=l._reactName,C=[];d!==null&&d!==p;){var F=d,$=F.alternate,X=F.stateNode;if($!==null&&$===p)break;F.tag===5&&X!==null&&(F=X,y?($=Ki(d,_),$!=null&&C.unshift(Pc(d,$,F))):y||($=Ki(d,_),$!=null&&C.push(Pc(d,$,F)))),d=d.return}C.length!==0&&o.push({event:l,listeners:C})}var Pk=/\r\n?/g,bk=/\u0000|\uFFFD/g;function n0(o){return(typeof o=="string"?o:""+o).replace(Pk,`
`).replace(bk,"")}function Bh(o,l,d){if(l=n0(l),n0(o)!==l&&d)throw Error(t(425))}function $h(){}var fg=null,pg=null;function mg(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var gg=typeof setTimeout=="function"?setTimeout:void 0,Ak=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,xk=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(o){return r0.resolve(null).then(o).catch(Rk)}:gg;function Rk(o){setTimeout(function(){throw o})}function yg(o,l){var d=l,p=0;do{var y=d.nextSibling;if(o.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(p===0){o.removeChild(y),Us(l);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=y}while(d);Us(l)}function zs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function i0(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}var Dl=Math.random().toString(36).slice(2),Ii="__reactFiber$"+Dl,bc="__reactProps$"+Dl,rs="__reactContainer$"+Dl,vg="__reactEvents$"+Dl,Dk="__reactListeners$"+Dl,kk="__reactHandles$"+Dl;function aa(o){var l=o[Ii];if(l)return l;for(var d=o.parentNode;d;){if(l=d[rs]||d[Ii]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=i0(o);o!==null;){if(d=o[Ii])return d;o=i0(o)}return l}o=d,d=o.parentNode}return null}function Ac(o){return o=o[Ii]||o[rs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function kl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function zh(o){return o[bc]||null}var _g=[],Nl=-1;function Ws(o){return{current:o}}function Ut(o){0>Nl||(o.current=_g[Nl],_g[Nl]=null,Nl--)}function Nt(o,l){Nl++,_g[Nl]=o.current,o.current=l}var Hs={},Mn=Ws(Hs),Jn=Ws(!1),la=Hs;function Vl(o,l){var d=o.type.contextTypes;if(!d)return Hs;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in d)y[_]=l[_];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Zn(o){return o=o.childContextTypes,o!=null}function Wh(){Ut(Jn),Ut(Mn)}function s0(o,l,d){if(Mn.current!==Hs)throw Error(t(168));Nt(Mn,l),Nt(Jn,d)}function o0(o,l,d){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var y in p)if(!(y in l))throw Error(t(108,tt(o)||"Unknown",y));return ue({},d,p)}function Hh(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Hs,la=Mn.current,Nt(Mn,o),Nt(Jn,Jn.current),!0}function a0(o,l,d){var p=o.stateNode;if(!p)throw Error(t(169));d?(o=o0(o,l,la),p.__reactInternalMemoizedMergedChildContext=o,Ut(Jn),Ut(Mn),Nt(Mn,o)):Ut(Jn),Nt(Jn,d)}var is=null,qh=!1,wg=!1;function l0(o){is===null?is=[o]:is.push(o)}function Nk(o){qh=!0,l0(o)}function qs(){if(!wg&&is!==null){wg=!0;var o=0,l=ft;try{var d=is;for(ft=1;o<d.length;o++){var p=d[o];do p=p(!0);while(p!==null)}is=null,qh=!1}catch(y){throw is!==null&&(is=is.slice(o+1)),ic(pl,qs),y}finally{ft=l,wg=!1}}return null}var Ml=[],Ol=0,Gh=null,Kh=0,Dr=[],kr=0,ua=null,ss=1,os="";function ca(o,l){Ml[Ol++]=Kh,Ml[Ol++]=Gh,Gh=o,Kh=l}function u0(o,l,d){Dr[kr++]=ss,Dr[kr++]=os,Dr[kr++]=ua,ua=o;var p=ss;o=os;var y=32-hr(p)-1;p&=~(1<<y),d+=1;var _=32-hr(l)+y;if(30<_){var C=y-y%5;_=(p&(1<<C)-1).toString(32),p>>=C,y-=C,ss=1<<32-hr(l)+y|d<<y|p,os=_+o}else ss=1<<_|d<<y|p,os=o}function Eg(o){o.return!==null&&(ca(o,1),u0(o,1,0))}function Tg(o){for(;o===Gh;)Gh=Ml[--Ol],Ml[Ol]=null,Kh=Ml[--Ol],Ml[Ol]=null;for(;o===ua;)ua=Dr[--kr],Dr[kr]=null,os=Dr[--kr],Dr[kr]=null,ss=Dr[--kr],Dr[kr]=null}var yr=null,vr=null,zt=!1,Hr=null;function c0(o,l){var d=Or(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=o,l=o.deletions,l===null?(o.deletions=[d],o.flags|=16):l.push(d)}function d0(o,l){switch(o.tag){case 5:var d=o.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,yr=o,vr=zs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,yr=o,vr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=ua!==null?{id:ss,overflow:os}:null,o.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Or(18,null,null,0),d.stateNode=l,d.return=o,o.child=d,yr=o,vr=null,!0):!1;default:return!1}}function Sg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Ig(o){if(zt){var l=vr;if(l){var d=l;if(!d0(o,l)){if(Sg(o))throw Error(t(418));l=zs(d.nextSibling);var p=yr;l&&d0(o,l)?c0(p,d):(o.flags=o.flags&-4097|2,zt=!1,yr=o)}}else{if(Sg(o))throw Error(t(418));o.flags=o.flags&-4097|2,zt=!1,yr=o}}}function h0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;yr=o}function Qh(o){if(o!==yr)return!1;if(!zt)return h0(o),zt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!mg(o.type,o.memoizedProps)),l&&(l=vr)){if(Sg(o))throw f0(),Error(t(418));for(;l;)c0(o,l),l=zs(l.nextSibling)}if(h0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(l===0){vr=zs(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}o=o.nextSibling}vr=null}}else vr=yr?zs(o.stateNode.nextSibling):null;return!0}function f0(){for(var o=vr;o;)o=zs(o.nextSibling)}function Ll(){vr=yr=null,zt=!1}function Cg(o){Hr===null?Hr=[o]:Hr.push(o)}var Vk=j.ReactCurrentBatchConfig;function xc(o,l,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var p=d.stateNode}if(!p)throw Error(t(147,o));var y=p,_=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===_?l.ref:(l=function(C){var F=y.refs;C===null?delete F[_]:F[_]=C},l._stringRef=_,l)}if(typeof o!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,o))}return o}function Yh(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function p0(o){var l=o._init;return l(o._payload)}function m0(o){function l(q,z){if(o){var Q=q.deletions;Q===null?(q.deletions=[z],q.flags|=16):Q.push(z)}}function d(q,z){if(!o)return null;for(;z!==null;)l(q,z),z=z.sibling;return null}function p(q,z){for(q=new Map;z!==null;)z.key!==null?q.set(z.key,z):q.set(z.index,z),z=z.sibling;return q}function y(q,z){return q=eo(q,z),q.index=0,q.sibling=null,q}function _(q,z,Q){return q.index=Q,o?(Q=q.alternate,Q!==null?(Q=Q.index,Q<z?(q.flags|=2,z):Q):(q.flags|=2,z)):(q.flags|=1048576,z)}function C(q){return o&&q.alternate===null&&(q.flags|=2),q}function F(q,z,Q,me){return z===null||z.tag!==6?(z=gy(Q,q.mode,me),z.return=q,z):(z=y(z,Q),z.return=q,z)}function $(q,z,Q,me){var Le=Q.type;return Le===x?le(q,z,Q.props.children,me,Q.key):z!==null&&(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Ce&&p0(Le)===z.type)?(me=y(z,Q.props),me.ref=xc(q,z,Q),me.return=q,me):(me=Ef(Q.type,Q.key,Q.props,null,q.mode,me),me.ref=xc(q,z,Q),me.return=q,me)}function X(q,z,Q,me){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=yy(Q,q.mode,me),z.return=q,z):(z=y(z,Q.children||[]),z.return=q,z)}function le(q,z,Q,me,Le){return z===null||z.tag!==7?(z=va(Q,q.mode,me,Le),z.return=q,z):(z=y(z,Q),z.return=q,z)}function fe(q,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number")return z=gy(""+z,q.mode,Q),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case H:return Q=Ef(z.type,z.key,z.props,null,q.mode,Q),Q.ref=xc(q,null,z),Q.return=q,Q;case Y:return z=yy(z,q.mode,Q),z.return=q,z;case Ce:var me=z._init;return fe(q,me(z._payload),Q)}if(Ae(z)||_e(z))return z=va(z,q.mode,Q,null),z.return=q,z;Yh(q,z)}return null}function oe(q,z,Q,me){var Le=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Le!==null?null:F(q,z,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:return Q.key===Le?$(q,z,Q,me):null;case Y:return Q.key===Le?X(q,z,Q,me):null;case Ce:return Le=Q._init,oe(q,z,Le(Q._payload),me)}if(Ae(Q)||_e(Q))return Le!==null?null:le(q,z,Q,me,null);Yh(q,Q)}return null}function be(q,z,Q,me,Le){if(typeof me=="string"&&me!==""||typeof me=="number")return q=q.get(Q)||null,F(z,q,""+me,Le);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case H:return q=q.get(me.key===null?Q:me.key)||null,$(z,q,me,Le);case Y:return q=q.get(me.key===null?Q:me.key)||null,X(z,q,me,Le);case Ce:var He=me._init;return be(q,z,Q,He(me._payload),Le)}if(Ae(me)||_e(me))return q=q.get(Q)||null,le(z,q,me,Le,null);Yh(z,me)}return null}function ke(q,z,Q,me){for(var Le=null,He=null,qe=z,Je=z=0,In=null;qe!==null&&Je<Q.length;Je++){qe.index>Je?(In=qe,qe=null):In=qe.sibling;var Et=oe(q,qe,Q[Je],me);if(Et===null){qe===null&&(qe=In);break}o&&qe&&Et.alternate===null&&l(q,qe),z=_(Et,z,Je),He===null?Le=Et:He.sibling=Et,He=Et,qe=In}if(Je===Q.length)return d(q,qe),zt&&ca(q,Je),Le;if(qe===null){for(;Je<Q.length;Je++)qe=fe(q,Q[Je],me),qe!==null&&(z=_(qe,z,Je),He===null?Le=qe:He.sibling=qe,He=qe);return zt&&ca(q,Je),Le}for(qe=p(q,qe);Je<Q.length;Je++)In=be(qe,q,Je,Q[Je],me),In!==null&&(o&&In.alternate!==null&&qe.delete(In.key===null?Je:In.key),z=_(In,z,Je),He===null?Le=In:He.sibling=In,He=In);return o&&qe.forEach(function(to){return l(q,to)}),zt&&ca(q,Je),Le}function Oe(q,z,Q,me){var Le=_e(Q);if(typeof Le!="function")throw Error(t(150));if(Q=Le.call(Q),Q==null)throw Error(t(151));for(var He=Le=null,qe=z,Je=z=0,In=null,Et=Q.next();qe!==null&&!Et.done;Je++,Et=Q.next()){qe.index>Je?(In=qe,qe=null):In=qe.sibling;var to=oe(q,qe,Et.value,me);if(to===null){qe===null&&(qe=In);break}o&&qe&&to.alternate===null&&l(q,qe),z=_(to,z,Je),He===null?Le=to:He.sibling=to,He=to,qe=In}if(Et.done)return d(q,qe),zt&&ca(q,Je),Le;if(qe===null){for(;!Et.done;Je++,Et=Q.next())Et=fe(q,Et.value,me),Et!==null&&(z=_(Et,z,Je),He===null?Le=Et:He.sibling=Et,He=Et);return zt&&ca(q,Je),Le}for(qe=p(q,qe);!Et.done;Je++,Et=Q.next())Et=be(qe,q,Je,Et.value,me),Et!==null&&(o&&Et.alternate!==null&&qe.delete(Et.key===null?Je:Et.key),z=_(Et,z,Je),He===null?Le=Et:He.sibling=Et,He=Et);return o&&qe.forEach(function(fN){return l(q,fN)}),zt&&ca(q,Je),Le}function rn(q,z,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===x&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:e:{for(var Le=Q.key,He=z;He!==null;){if(He.key===Le){if(Le=Q.type,Le===x){if(He.tag===7){d(q,He.sibling),z=y(He,Q.props.children),z.return=q,q=z;break e}}else if(He.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Ce&&p0(Le)===He.type){d(q,He.sibling),z=y(He,Q.props),z.ref=xc(q,He,Q),z.return=q,q=z;break e}d(q,He);break}else l(q,He);He=He.sibling}Q.type===x?(z=va(Q.props.children,q.mode,me,Q.key),z.return=q,q=z):(me=Ef(Q.type,Q.key,Q.props,null,q.mode,me),me.ref=xc(q,z,Q),me.return=q,q=me)}return C(q);case Y:e:{for(He=Q.key;z!==null;){if(z.key===He)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){d(q,z.sibling),z=y(z,Q.children||[]),z.return=q,q=z;break e}else{d(q,z);break}else l(q,z);z=z.sibling}z=yy(Q,q.mode,me),z.return=q,q=z}return C(q);case Ce:return He=Q._init,rn(q,z,He(Q._payload),me)}if(Ae(Q))return ke(q,z,Q,me);if(_e(Q))return Oe(q,z,Q,me);Yh(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,z!==null&&z.tag===6?(d(q,z.sibling),z=y(z,Q),z.return=q,q=z):(d(q,z),z=gy(Q,q.mode,me),z.return=q,q=z),C(q)):d(q,z)}return rn}var Fl=m0(!0),g0=m0(!1),Xh=Ws(null),Jh=null,Ul=null,Pg=null;function bg(){Pg=Ul=Jh=null}function Ag(o){var l=Xh.current;Ut(Xh),o._currentValue=l}function xg(o,l,d){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===d)break;o=o.return}}function jl(o,l){Jh=o,Pg=Ul=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(er=!0),o.firstContext=null)}function Nr(o){var l=o._currentValue;if(Pg!==o)if(o={context:o,memoizedValue:l,next:null},Ul===null){if(Jh===null)throw Error(t(308));Ul=o,Jh.dependencies={lanes:0,firstContext:o}}else Ul=Ul.next=o;return l}var da=null;function Rg(o){da===null?da=[o]:da.push(o)}function y0(o,l,d,p){var y=l.interleaved;return y===null?(d.next=d,Rg(l)):(d.next=y.next,y.next=d),l.interleaved=d,as(o,p)}function as(o,l){o.lanes|=l;var d=o.alternate;for(d!==null&&(d.lanes|=l),d=o,o=o.return;o!==null;)o.childLanes|=l,d=o.alternate,d!==null&&(d.childLanes|=l),d=o,o=o.return;return d.tag===3?d.stateNode:null}var Gs=!1;function Dg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ls(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Ks(o,l,d){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(vt&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,as(o,d)}return y=p.interleaved,y===null?(l.next=l,Rg(p)):(l.next=y.next,y.next=l),p.interleaved=l,as(o,d)}function Zh(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,d|=p,l.lanes=d,cc(o,d)}}function _0(o,l){var d=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?y=_=C:_=_.next=C,d=d.next}while(d!==null);_===null?y=_=l:_=_.next=l}else y=_=l;d={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}function ef(o,l,d,p){var y=o.updateQueue;Gs=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var $=F,X=$.next;$.next=null,C===null?_=X:C.next=X,C=$;var le=o.alternate;le!==null&&(le=le.updateQueue,F=le.lastBaseUpdate,F!==C&&(F===null?le.firstBaseUpdate=X:F.next=X,le.lastBaseUpdate=$))}if(_!==null){var fe=y.baseState;C=0,le=X=$=null,F=_;do{var oe=F.lane,be=F.eventTime;if((p&oe)===oe){le!==null&&(le=le.next={eventTime:be,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var ke=o,Oe=F;switch(oe=l,be=d,Oe.tag){case 1:if(ke=Oe.payload,typeof ke=="function"){fe=ke.call(be,fe,oe);break e}fe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Oe.payload,oe=typeof ke=="function"?ke.call(be,fe,oe):ke,oe==null)break e;fe=ue({},fe,oe);break e;case 2:Gs=!0}}F.callback!==null&&F.lane!==0&&(o.flags|=64,oe=y.effects,oe===null?y.effects=[F]:oe.push(F))}else be={eventTime:be,lane:oe,tag:F.tag,payload:F.payload,callback:F.callback,next:null},le===null?(X=le=be,$=fe):le=le.next=be,C|=oe;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;oe=F,F=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);if(le===null&&($=fe),y.baseState=$,y.firstBaseUpdate=X,y.lastBaseUpdate=le,l=y.shared.interleaved,l!==null){y=l;do C|=y.lane,y=y.next;while(y!==l)}else _===null&&(y.shared.lanes=0);pa|=C,o.lanes=C,o.memoizedState=fe}}function w0(o,l,d){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],y=p.callback;if(y!==null){if(p.callback=null,p=d,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Rc={},Ci=Ws(Rc),Dc=Ws(Rc),kc=Ws(Rc);function ha(o){if(o===Rc)throw Error(t(174));return o}function kg(o,l){switch(Nt(kc,l),Nt(Dc,o),Nt(Ci,Rc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ur(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ur(l,o)}Ut(Ci),Nt(Ci,l)}function Bl(){Ut(Ci),Ut(Dc),Ut(kc)}function E0(o){ha(kc.current);var l=ha(Ci.current),d=ur(l,o.type);l!==d&&(Nt(Dc,o),Nt(Ci,d))}function Ng(o){Dc.current===o&&(Ut(Ci),Ut(Dc))}var Ht=Ws(0);function tf(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vg=[];function Mg(){for(var o=0;o<Vg.length;o++)Vg[o]._workInProgressVersionPrimary=null;Vg.length=0}var nf=j.ReactCurrentDispatcher,Og=j.ReactCurrentBatchConfig,fa=0,qt=null,yn=null,Tn=null,rf=!1,Nc=!1,Vc=0,Mk=0;function On(){throw Error(t(321))}function Lg(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!Wr(o[d],l[d]))return!1;return!0}function Fg(o,l,d,p,y,_){if(fa=_,qt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,nf.current=o===null||o.memoizedState===null?Uk:jk,o=d(p,y),Nc){_=0;do{if(Nc=!1,Vc=0,25<=_)throw Error(t(301));_+=1,Tn=yn=null,l.updateQueue=null,nf.current=Bk,o=d(p,y)}while(Nc)}if(nf.current=af,l=yn!==null&&yn.next!==null,fa=0,Tn=yn=qt=null,rf=!1,l)throw Error(t(300));return o}function Ug(){var o=Vc!==0;return Vc=0,o}function Pi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?qt.memoizedState=Tn=o:Tn=Tn.next=o,Tn}function Vr(){if(yn===null){var o=qt.alternate;o=o!==null?o.memoizedState:null}else o=yn.next;var l=Tn===null?qt.memoizedState:Tn.next;if(l!==null)Tn=l,yn=o;else{if(o===null)throw Error(t(310));yn=o,o={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Tn===null?qt.memoizedState=Tn=o:Tn=Tn.next=o}return Tn}function Mc(o,l){return typeof l=="function"?l(o):l}function jg(o){var l=Vr(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var p=yn,y=p.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}p.baseQueue=y=_,d.pending=null}if(y!==null){_=y.next,p=p.baseState;var F=C=null,$=null,X=_;do{var le=X.lane;if((fa&le)===le)$!==null&&($=$.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:o(p,X.action);else{var fe={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};$===null?(F=$=fe,C=p):$=$.next=fe,qt.lanes|=le,pa|=le}X=X.next}while(X!==null&&X!==_);$===null?C=p:$.next=F,Wr(p,l.memoizedState)||(er=!0),l.memoizedState=p,l.baseState=C,l.baseQueue=$,d.lastRenderedState=p}if(o=d.interleaved,o!==null){y=o;do _=y.lane,qt.lanes|=_,pa|=_,y=y.next;while(y!==o)}else y===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Bg(o){var l=Vr(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=o;var p=d.dispatch,y=d.pending,_=l.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do _=o(_,C.action),C=C.next;while(C!==y);Wr(_,l.memoizedState)||(er=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,p]}function T0(){}function S0(o,l){var d=qt,p=Vr(),y=l(),_=!Wr(p.memoizedState,y);if(_&&(p.memoizedState=y,er=!0),p=p.queue,$g(P0.bind(null,d,p,o),[o]),p.getSnapshot!==l||_||Tn!==null&&Tn.memoizedState.tag&1){if(d.flags|=2048,Oc(9,C0.bind(null,d,p,y,l),void 0,null),Sn===null)throw Error(t(349));(fa&30)!==0||I0(d,l,y)}return y}function I0(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=qt.updateQueue,l===null?(l={lastEffect:null,stores:null},qt.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function C0(o,l,d,p){l.value=d,l.getSnapshot=p,b0(l)&&A0(o)}function P0(o,l,d){return d(function(){b0(l)&&A0(o)})}function b0(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!Wr(o,d)}catch{return!0}}function A0(o){var l=as(o,1);l!==null&&Qr(l,o,1,-1)}function x0(o){var l=Pi();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:o},l.queue=o,o=o.dispatch=Fk.bind(null,qt,o),[l.memoizedState,o]}function Oc(o,l,d,p){return o={tag:o,create:l,destroy:d,deps:p,next:null},l=qt.updateQueue,l===null?(l={lastEffect:null,stores:null},qt.updateQueue=l,l.lastEffect=o.next=o):(d=l.lastEffect,d===null?l.lastEffect=o.next=o:(p=d.next,d.next=o,o.next=p,l.lastEffect=o)),o}function R0(){return Vr().memoizedState}function sf(o,l,d,p){var y=Pi();qt.flags|=o,y.memoizedState=Oc(1|l,d,void 0,p===void 0?null:p)}function of(o,l,d,p){var y=Vr();p=p===void 0?null:p;var _=void 0;if(yn!==null){var C=yn.memoizedState;if(_=C.destroy,p!==null&&Lg(p,C.deps)){y.memoizedState=Oc(l,d,_,p);return}}qt.flags|=o,y.memoizedState=Oc(1|l,d,_,p)}function D0(o,l){return sf(8390656,8,o,l)}function $g(o,l){return of(2048,8,o,l)}function k0(o,l){return of(4,2,o,l)}function N0(o,l){return of(4,4,o,l)}function V0(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function M0(o,l,d){return d=d!=null?d.concat([o]):null,of(4,4,V0.bind(null,l,o),d)}function zg(){}function O0(o,l){var d=Vr();l=l===void 0?null:l;var p=d.memoizedState;return p!==null&&l!==null&&Lg(l,p[1])?p[0]:(d.memoizedState=[o,l],o)}function L0(o,l){var d=Vr();l=l===void 0?null:l;var p=d.memoizedState;return p!==null&&l!==null&&Lg(l,p[1])?p[0]:(o=o(),d.memoizedState=[o,l],o)}function F0(o,l,d){return(fa&21)===0?(o.baseState&&(o.baseState=!1,er=!0),o.memoizedState=d):(Wr(d,l)||(d=lc(),qt.lanes|=d,pa|=d,o.baseState=!0),l)}function Ok(o,l){var d=ft;ft=d!==0&&4>d?d:4,o(!0);var p=Og.transition;Og.transition={};try{o(!1),l()}finally{ft=d,Og.transition=p}}function U0(){return Vr().memoizedState}function Lk(o,l,d){var p=Js(o);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},j0(o))B0(l,d);else if(d=y0(o,l,d,p),d!==null){var y=Gn();Qr(d,o,p,y),$0(d,l,p)}}function Fk(o,l,d){var p=Js(o),y={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(j0(o))B0(l,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var C=l.lastRenderedState,F=_(C,d);if(y.hasEagerState=!0,y.eagerState=F,Wr(F,C)){var $=l.interleaved;$===null?(y.next=y,Rg(l)):(y.next=$.next,$.next=y),l.interleaved=y;return}}catch{}d=y0(o,l,y,p),d!==null&&(y=Gn(),Qr(d,o,p,y),$0(d,l,p))}}function j0(o){var l=o.alternate;return o===qt||l!==null&&l===qt}function B0(o,l){Nc=rf=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function $0(o,l,d){if((d&4194240)!==0){var p=l.lanes;p&=o.pendingLanes,d|=p,l.lanes=d,cc(o,d)}}var af={readContext:Nr,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},Uk={readContext:Nr,useCallback:function(o,l){return Pi().memoizedState=[o,l===void 0?null:l],o},useContext:Nr,useEffect:D0,useImperativeHandle:function(o,l,d){return d=d!=null?d.concat([o]):null,sf(4194308,4,V0.bind(null,l,o),d)},useLayoutEffect:function(o,l){return sf(4194308,4,o,l)},useInsertionEffect:function(o,l){return sf(4,2,o,l)},useMemo:function(o,l){var d=Pi();return l=l===void 0?null:l,o=o(),d.memoizedState=[o,l],o},useReducer:function(o,l,d){var p=Pi();return l=d!==void 0?d(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=Lk.bind(null,qt,o),[p.memoizedState,o]},useRef:function(o){var l=Pi();return o={current:o},l.memoizedState=o},useState:x0,useDebugValue:zg,useDeferredValue:function(o){return Pi().memoizedState=o},useTransition:function(){var o=x0(!1),l=o[0];return o=Ok.bind(null,o[1]),Pi().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,d){var p=qt,y=Pi();if(zt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),Sn===null)throw Error(t(349));(fa&30)!==0||I0(p,l,d)}y.memoizedState=d;var _={value:d,getSnapshot:l};return y.queue=_,D0(P0.bind(null,p,_,o),[o]),p.flags|=2048,Oc(9,C0.bind(null,p,_,d,l),void 0,null),d},useId:function(){var o=Pi(),l=Sn.identifierPrefix;if(zt){var d=os,p=ss;d=(p&~(1<<32-hr(p)-1)).toString(32)+d,l=":"+l+"R"+d,d=Vc++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Mk++,l=":"+l+"r"+d.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},jk={readContext:Nr,useCallback:O0,useContext:Nr,useEffect:$g,useImperativeHandle:M0,useInsertionEffect:k0,useLayoutEffect:N0,useMemo:L0,useReducer:jg,useRef:R0,useState:function(){return jg(Mc)},useDebugValue:zg,useDeferredValue:function(o){var l=Vr();return F0(l,yn.memoizedState,o)},useTransition:function(){var o=jg(Mc)[0],l=Vr().memoizedState;return[o,l]},useMutableSource:T0,useSyncExternalStore:S0,useId:U0,unstable_isNewReconciler:!1},Bk={readContext:Nr,useCallback:O0,useContext:Nr,useEffect:$g,useImperativeHandle:M0,useInsertionEffect:k0,useLayoutEffect:N0,useMemo:L0,useReducer:Bg,useRef:R0,useState:function(){return Bg(Mc)},useDebugValue:zg,useDeferredValue:function(o){var l=Vr();return yn===null?l.memoizedState=o:F0(l,yn.memoizedState,o)},useTransition:function(){var o=Bg(Mc)[0],l=Vr().memoizedState;return[o,l]},useMutableSource:T0,useSyncExternalStore:S0,useId:U0,unstable_isNewReconciler:!1};function qr(o,l){if(o&&o.defaultProps){l=ue({},l),o=o.defaultProps;for(var d in o)l[d]===void 0&&(l[d]=o[d]);return l}return l}function Wg(o,l,d,p){l=o.memoizedState,d=d(p,l),d=d==null?l:ue({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var lf={isMounted:function(o){return(o=o._reactInternals)?$r(o)===o:!1},enqueueSetState:function(o,l,d){o=o._reactInternals;var p=Gn(),y=Js(o),_=ls(p,y);_.payload=l,d!=null&&(_.callback=d),l=Ks(o,_,y),l!==null&&(Qr(l,o,y,p),Zh(l,o,y))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var p=Gn(),y=Js(o),_=ls(p,y);_.tag=1,_.payload=l,d!=null&&(_.callback=d),l=Ks(o,_,y),l!==null&&(Qr(l,o,y,p),Zh(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Gn(),p=Js(o),y=ls(d,p);y.tag=2,l!=null&&(y.callback=l),l=Ks(o,y,p),l!==null&&(Qr(l,o,p,d),Zh(l,o,p))}};function z0(o,l,d,p,y,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,_,C):l.prototype&&l.prototype.isPureReactComponent?!Tc(d,p)||!Tc(y,_):!0}function W0(o,l,d){var p=!1,y=Hs,_=l.contextType;return typeof _=="object"&&_!==null?_=Nr(_):(y=Zn(l)?la:Mn.current,p=l.contextTypes,_=(p=p!=null)?Vl(o,y):Hs),l=new l(d,_),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=lf,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=_),l}function H0(o,l,d,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==o&&lf.enqueueReplaceState(l,l.state,null)}function Hg(o,l,d,p){var y=o.stateNode;y.props=d,y.state=o.memoizedState,y.refs={},Dg(o);var _=l.contextType;typeof _=="object"&&_!==null?y.context=Nr(_):(_=Zn(l)?la:Mn.current,y.context=Vl(o,_)),y.state=o.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Wg(o,l,_,d),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&lf.enqueueReplaceState(y,y.state,null),ef(o,d,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function $l(o,l){try{var d="",p=l;do d+=Ee(p),p=p.return;while(p);var y=d}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:l,stack:y,digest:null}}function qg(o,l,d){return{value:o,source:null,stack:d??null,digest:l??null}}function Gg(o,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var $k=typeof WeakMap=="function"?WeakMap:Map;function q0(o,l,d){d=ls(-1,d),d.tag=3,d.payload={element:null};var p=l.value;return d.callback=function(){mf||(mf=!0,ly=p),Gg(o,l)},d}function G0(o,l,d){d=ls(-1,d),d.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;d.payload=function(){return p(y)},d.callback=function(){Gg(o,l)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){Gg(o,l),typeof p!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})}),d}function K0(o,l,d){var p=o.pingCache;if(p===null){p=o.pingCache=new $k;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(d)||(y.add(d),o=nN.bind(null,o,l,d),l.then(o,o))}function Q0(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function Y0(o,l,d,p,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=ls(-1,1),l.tag=2,Ks(d,l,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var zk=j.ReactCurrentOwner,er=!1;function qn(o,l,d,p){l.child=o===null?g0(l,null,d,p):Fl(l,o.child,d,p)}function X0(o,l,d,p,y){d=d.render;var _=l.ref;return jl(l,y),p=Fg(o,l,d,p,_,y),d=Ug(),o!==null&&!er?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,us(o,l,y)):(zt&&d&&Eg(l),l.flags|=1,qn(o,l,p,y),l.child)}function J0(o,l,d,p,y){if(o===null){var _=d.type;return typeof _=="function"&&!my(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=_,Z0(o,l,_,p,y)):(o=Ef(d.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,(o.lanes&y)===0){var C=_.memoizedProps;if(d=d.compare,d=d!==null?d:Tc,d(C,p)&&o.ref===l.ref)return us(o,l,y)}return l.flags|=1,o=eo(_,p),o.ref=l.ref,o.return=l,l.child=o}function Z0(o,l,d,p,y){if(o!==null){var _=o.memoizedProps;if(Tc(_,p)&&o.ref===l.ref)if(er=!1,l.pendingProps=p=_,(o.lanes&y)!==0)(o.flags&131072)!==0&&(er=!0);else return l.lanes=o.lanes,us(o,l,y)}return Kg(o,l,d,p,y)}function eT(o,l,d){var p=l.pendingProps,y=p.children,_=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Wl,_r),_r|=d;else{if((d&1073741824)===0)return o=_!==null?_.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Nt(Wl,_r),_r|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:d,Nt(Wl,_r),_r|=p}else _!==null?(p=_.baseLanes|d,l.memoizedState=null):p=d,Nt(Wl,_r),_r|=p;return qn(o,l,y,d),l.child}function tT(o,l){var d=l.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Kg(o,l,d,p,y){var _=Zn(d)?la:Mn.current;return _=Vl(l,_),jl(l,y),d=Fg(o,l,d,p,_,y),p=Ug(),o!==null&&!er?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,us(o,l,y)):(zt&&p&&Eg(l),l.flags|=1,qn(o,l,d,y),l.child)}function nT(o,l,d,p,y){if(Zn(d)){var _=!0;Hh(l)}else _=!1;if(jl(l,y),l.stateNode===null)cf(o,l),W0(l,d,p),Hg(l,d,p,y),p=!0;else if(o===null){var C=l.stateNode,F=l.memoizedProps;C.props=F;var $=C.context,X=d.contextType;typeof X=="object"&&X!==null?X=Nr(X):(X=Zn(d)?la:Mn.current,X=Vl(l,X));var le=d.getDerivedStateFromProps,fe=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";fe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==p||$!==X)&&H0(l,C,p,X),Gs=!1;var oe=l.memoizedState;C.state=oe,ef(l,p,C,y),$=l.memoizedState,F!==p||oe!==$||Jn.current||Gs?(typeof le=="function"&&(Wg(l,d,le,p),$=l.memoizedState),(F=Gs||z0(l,d,F,p,oe,$,X))?(fe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=$),C.props=p,C.state=$,C.context=X,p=F):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{C=l.stateNode,v0(o,l),F=l.memoizedProps,X=l.type===l.elementType?F:qr(l.type,F),C.props=X,fe=l.pendingProps,oe=C.context,$=d.contextType,typeof $=="object"&&$!==null?$=Nr($):($=Zn(d)?la:Mn.current,$=Vl(l,$));var be=d.getDerivedStateFromProps;(le=typeof be=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==fe||oe!==$)&&H0(l,C,p,$),Gs=!1,oe=l.memoizedState,C.state=oe,ef(l,p,C,y);var ke=l.memoizedState;F!==fe||oe!==ke||Jn.current||Gs?(typeof be=="function"&&(Wg(l,d,be,p),ke=l.memoizedState),(X=Gs||z0(l,d,X,p,oe,ke,$)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,ke,$),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,ke,$)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===o.memoizedProps&&oe===o.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&oe===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ke),C.props=p,C.state=ke,C.context=$,p=X):(typeof C.componentDidUpdate!="function"||F===o.memoizedProps&&oe===o.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&oe===o.memoizedState||(l.flags|=1024),p=!1)}return Qg(o,l,d,p,_,y)}function Qg(o,l,d,p,y,_){tT(o,l);var C=(l.flags&128)!==0;if(!p&&!C)return y&&a0(l,d,!1),us(o,l,_);p=l.stateNode,zk.current=l;var F=C&&typeof d.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&C?(l.child=Fl(l,o.child,null,_),l.child=Fl(l,null,F,_)):qn(o,l,F,_),l.memoizedState=p.state,y&&a0(l,d,!0),l.child}function rT(o){var l=o.stateNode;l.pendingContext?s0(o,l.pendingContext,l.pendingContext!==l.context):l.context&&s0(o,l.context,!1),kg(o,l.containerInfo)}function iT(o,l,d,p,y){return Ll(),Cg(y),l.flags|=256,qn(o,l,d,p),l.child}var Yg={dehydrated:null,treeContext:null,retryLane:0};function Xg(o){return{baseLanes:o,cachePool:null,transitions:null}}function sT(o,l,d){var p=l.pendingProps,y=Ht.current,_=!1,C=(l.flags&128)!==0,F;if((F=C)||(F=o!==null&&o.memoizedState===null?!1:(y&2)!==0),F?(_=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),Nt(Ht,y&1),o===null)return Ig(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(C=p.children,o=p.fallback,_?(p=l.mode,_=l.child,C={mode:"hidden",children:C},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=Tf(C,p,0,null),o=va(o,p,d,null),_.return=l,o.return=l,_.sibling=o,l.child=_,l.child.memoizedState=Xg(d),l.memoizedState=Yg,o):Jg(l,C));if(y=o.memoizedState,y!==null&&(F=y.dehydrated,F!==null))return Wk(o,l,C,p,F,y,d);if(_){_=p.fallback,C=l.mode,y=o.child,F=y.sibling;var $={mode:"hidden",children:p.children};return(C&1)===0&&l.child!==y?(p=l.child,p.childLanes=0,p.pendingProps=$,l.deletions=null):(p=eo(y,$),p.subtreeFlags=y.subtreeFlags&14680064),F!==null?_=eo(F,_):(_=va(_,C,d,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,C=o.child.memoizedState,C=C===null?Xg(d):{baseLanes:C.baseLanes|d,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=o.childLanes&~d,l.memoizedState=Yg,p}return _=o.child,o=_.sibling,p=eo(_,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=d),p.return=l,p.sibling=null,o!==null&&(d=l.deletions,d===null?(l.deletions=[o],l.flags|=16):d.push(o)),l.child=p,l.memoizedState=null,p}function Jg(o,l){return l=Tf({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function uf(o,l,d,p){return p!==null&&Cg(p),Fl(l,o.child,null,d),o=Jg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Wk(o,l,d,p,y,_,C){if(d)return l.flags&256?(l.flags&=-257,p=qg(Error(t(422))),uf(o,l,C,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(_=p.fallback,y=l.mode,p=Tf({mode:"visible",children:p.children},y,0,null),_=va(_,y,C,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,(l.mode&1)!==0&&Fl(l,o.child,null,C),l.child.memoizedState=Xg(C),l.memoizedState=Yg,_);if((l.mode&1)===0)return uf(o,l,C,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var F=p.dgst;return p=F,_=Error(t(419)),p=qg(_,p,void 0),uf(o,l,C,p)}if(F=(C&o.childLanes)!==0,er||F){if(p=Sn,p!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|C))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,as(o,y),Qr(p,o,y,-1))}return py(),p=qg(Error(t(421))),uf(o,l,C,p)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=rN.bind(null,o),y._reactRetry=l,null):(o=_.treeContext,vr=zs(y.nextSibling),yr=l,zt=!0,Hr=null,o!==null&&(Dr[kr++]=ss,Dr[kr++]=os,Dr[kr++]=ua,ss=o.id,os=o.overflow,ua=l),l=Jg(l,p.children),l.flags|=4096,l)}function oT(o,l,d){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),xg(o.return,l,d)}function Zg(o,l,d,p,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:y}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=d,_.tailMode=y)}function aT(o,l,d){var p=l.pendingProps,y=p.revealOrder,_=p.tail;if(qn(o,l,p.children,d),p=Ht.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&oT(o,d,l);else if(o.tag===19)oT(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(Nt(Ht,p),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(d=l.child,y=null;d!==null;)o=d.alternate,o!==null&&tf(o)===null&&(y=d),d=d.sibling;d=y,d===null?(y=l.child,l.child=null):(y=d.sibling,d.sibling=null),Zg(l,!1,y,d,_);break;case"backwards":for(d=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&tf(o)===null){l.child=y;break}o=y.sibling,y.sibling=d,d=y,y=o}Zg(l,!0,d,null,_);break;case"together":Zg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function cf(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function us(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),pa|=l.lanes,(d&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,d=eo(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=eo(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function Hk(o,l,d){switch(l.tag){case 3:rT(l),Ll();break;case 5:E0(l);break;case 1:Zn(l.type)&&Hh(l);break;case 4:kg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,y=l.memoizedProps.value;Nt(Xh,p._currentValue),p._currentValue=y;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(Nt(Ht,Ht.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?sT(o,l,d):(Nt(Ht,Ht.current&1),o=us(o,l,d),o!==null?o.sibling:null);Nt(Ht,Ht.current&1);break;case 19:if(p=(d&l.childLanes)!==0,(o.flags&128)!==0){if(p)return aT(o,l,d);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Nt(Ht,Ht.current),p)break;return null;case 22:case 23:return l.lanes=0,eT(o,l,d)}return us(o,l,d)}var lT,ey,uT,cT;lT=function(o,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},ey=function(){},uT=function(o,l,d,p){var y=o.memoizedProps;if(y!==p){o=l.stateNode,ha(Ci.current);var _=null;switch(d){case"input":y=J(o,y),p=J(o,p),_=[];break;case"select":y=ue({},y,{value:void 0}),p=ue({},p,{value:void 0}),_=[];break;case"textarea":y=Ue(o,y),p=Ue(o,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=$h)}cr(d,p);var C;d=null;for(X in y)if(!p.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var F=y[X];for(C in F)F.hasOwnProperty(C)&&(d||(d={}),d[C]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in p){var $=p[X];if(F=y?.[X],p.hasOwnProperty(X)&&$!==F&&($!=null||F!=null))if(X==="style")if(F){for(C in F)!F.hasOwnProperty(C)||$&&$.hasOwnProperty(C)||(d||(d={}),d[C]="");for(C in $)$.hasOwnProperty(C)&&F[C]!==$[C]&&(d||(d={}),d[C]=$[C])}else d||(_||(_=[]),_.push(X,d)),d=$;else X==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,F=F?F.__html:void 0,$!=null&&F!==$&&(_=_||[]).push(X,$)):X==="children"?typeof $!="string"&&typeof $!="number"||(_=_||[]).push(X,""+$):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?($!=null&&X==="onScroll"&&Ft("scroll",o),_||F===$||(_=[])):(_=_||[]).push(X,$))}d&&(_=_||[]).push("style",d);var X=_;(l.updateQueue=X)&&(l.flags|=4)}},cT=function(o,l,d,p){d!==p&&(l.flags|=4)};function Lc(o,l){if(!zt)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Ln(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,p=0;if(l)for(var y=o.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)d|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=d,l}function qk(o,l,d){var p=l.pendingProps;switch(Tg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(l),null;case 1:return Zn(l.type)&&Wh(),Ln(l),null;case 3:return p=l.stateNode,Bl(),Ut(Jn),Ut(Mn),Mg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Qh(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Hr!==null&&(dy(Hr),Hr=null))),ey(o,l),Ln(l),null;case 5:Ng(l);var y=ha(kc.current);if(d=l.type,o!==null&&l.stateNode!=null)uT(o,l,d,p,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return Ln(l),null}if(o=ha(Ci.current),Qh(l)){p=l.stateNode,d=l.type;var _=l.memoizedProps;switch(p[Ii]=l,p[bc]=_,o=(l.mode&1)!==0,d){case"dialog":Ft("cancel",p),Ft("close",p);break;case"iframe":case"object":case"embed":Ft("load",p);break;case"video":case"audio":for(y=0;y<Ic.length;y++)Ft(Ic[y],p);break;case"source":Ft("error",p);break;case"img":case"image":case"link":Ft("error",p),Ft("load",p);break;case"details":Ft("toggle",p);break;case"input":ne(p,_),Ft("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},Ft("invalid",p);break;case"textarea":Ge(p,_),Ft("invalid",p)}cr(d,_),y=null;for(var C in _)if(_.hasOwnProperty(C)){var F=_[C];C==="children"?typeof F=="string"?p.textContent!==F&&(_.suppressHydrationWarning!==!0&&Bh(p.textContent,F,o),y=["children",F]):typeof F=="number"&&p.textContent!==""+F&&(_.suppressHydrationWarning!==!0&&Bh(p.textContent,F,o),y=["children",""+F]):i.hasOwnProperty(C)&&F!=null&&C==="onScroll"&&Ft("scroll",p)}switch(d){case"input":gn(p),he(p,_,!0);break;case"textarea":gn(p),ot(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=$h)}p=y,l.updateQueue=p,p!==null&&(l.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ot(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=C.createElement(d,{is:p.is}):(o=C.createElement(d),d==="select"&&(C=o,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):o=C.createElementNS(o,d),o[Ii]=l,o[bc]=p,lT(o,l,!1,!1),l.stateNode=o;e:{switch(C=Br(d,p),d){case"dialog":Ft("cancel",o),Ft("close",o),y=p;break;case"iframe":case"object":case"embed":Ft("load",o),y=p;break;case"video":case"audio":for(y=0;y<Ic.length;y++)Ft(Ic[y],o);y=p;break;case"source":Ft("error",o),y=p;break;case"img":case"image":case"link":Ft("error",o),Ft("load",o),y=p;break;case"details":Ft("toggle",o),y=p;break;case"input":ne(o,p),y=J(o,p),Ft("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=ue({},p,{value:void 0}),Ft("invalid",o);break;case"textarea":Ge(o,p),y=Ue(o,p),Ft("invalid",o);break;default:y=p}cr(d,y),F=y;for(_ in F)if(F.hasOwnProperty(_)){var $=F[_];_==="style"?ks(o,$):_==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&qo(o,$)):_==="children"?typeof $=="string"?(d!=="textarea"||$!=="")&&qi(o,$):typeof $=="number"&&qi(o,""+$):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?$!=null&&_==="onScroll"&&Ft("scroll",o):$!=null&&A(o,_,$,C))}switch(d){case"input":gn(o),he(o,p,!1);break;case"textarea":gn(o),ot(o);break;case"option":p.value!=null&&o.setAttribute("value",""+rt(p.value));break;case"select":o.multiple=!!p.multiple,_=p.value,_!=null?Ke(o,!!p.multiple,_,!1):p.defaultValue!=null&&Ke(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=$h)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ln(l),null;case 6:if(o&&l.stateNode!=null)cT(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(d=ha(kc.current),ha(Ci.current),Qh(l)){if(p=l.stateNode,d=l.memoizedProps,p[Ii]=l,(_=p.nodeValue!==d)&&(o=yr,o!==null))switch(o.tag){case 3:Bh(p.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Bh(p.nodeValue,d,(o.mode&1)!==0)}_&&(l.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Ii]=l,l.stateNode=p}return Ln(l),null;case 13:if(Ut(Ht),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(zt&&vr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)f0(),Ll(),l.flags|=98560,_=!1;else if(_=Qh(l),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Ii]=l}else Ll(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ln(l),_=!1}else Hr!==null&&(dy(Hr),Hr=null),_=!0;if(!_)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Ht.current&1)!==0?vn===0&&(vn=3):py())),l.updateQueue!==null&&(l.flags|=4),Ln(l),null);case 4:return Bl(),ey(o,l),o===null&&Cc(l.stateNode.containerInfo),Ln(l),null;case 10:return Ag(l.type._context),Ln(l),null;case 17:return Zn(l.type)&&Wh(),Ln(l),null;case 19:if(Ut(Ht),_=l.memoizedState,_===null)return Ln(l),null;if(p=(l.flags&128)!==0,C=_.rendering,C===null)if(p)Lc(_,!1);else{if(vn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(C=tf(o),C!==null){for(l.flags|=128,Lc(_,!1),p=C.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=d,d=l.child;d!==null;)_=d,o=p,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,o=C.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return Nt(Ht,Ht.current&1|2),l.child}o=o.sibling}_.tail!==null&&Lt()>Hl&&(l.flags|=128,p=!0,Lc(_,!1),l.lanes=4194304)}else{if(!p)if(o=tf(C),o!==null){if(l.flags|=128,p=!0,d=o.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Lc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!zt)return Ln(l),null}else 2*Lt()-_.renderingStartTime>Hl&&d!==1073741824&&(l.flags|=128,p=!0,Lc(_,!1),l.lanes=4194304);_.isBackwards?(C.sibling=l.child,l.child=C):(d=_.last,d!==null?d.sibling=C:l.child=C,_.last=C)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=Lt(),l.sibling=null,d=Ht.current,Nt(Ht,p?d&1|2:d&1),l):(Ln(l),null);case 22:case 23:return fy(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(_r&1073741824)!==0&&(Ln(l),l.subtreeFlags&6&&(l.flags|=8192)):Ln(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function Gk(o,l){switch(Tg(l),l.tag){case 1:return Zn(l.type)&&Wh(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Bl(),Ut(Jn),Ut(Mn),Mg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Ng(l),null;case 13:if(Ut(Ht),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ll()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Ut(Ht),null;case 4:return Bl(),null;case 10:return Ag(l.type._context),null;case 22:case 23:return fy(),null;case 24:return null;default:return null}}var df=!1,Fn=!1,Kk=typeof WeakSet=="function"?WeakSet:Set,Re=null;function zl(o,l){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){Xt(o,l,p)}else d.current=null}function ty(o,l,d){try{d()}catch(p){Xt(o,l,p)}}var dT=!1;function Qk(o,l){if(fg=es,o=zE(),sg(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var C=0,F=-1,$=-1,X=0,le=0,fe=o,oe=null;t:for(;;){for(var be;fe!==d||y!==0&&fe.nodeType!==3||(F=C+y),fe!==_||p!==0&&fe.nodeType!==3||($=C+p),fe.nodeType===3&&(C+=fe.nodeValue.length),(be=fe.firstChild)!==null;)oe=fe,fe=be;for(;;){if(fe===o)break t;if(oe===d&&++X===y&&(F=C),oe===_&&++le===p&&($=C),(be=fe.nextSibling)!==null)break;fe=oe,oe=fe.parentNode}fe=be}d=F===-1||$===-1?null:{start:F,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(pg={focusedElem:o,selectionRange:d},es=!1,Re=l;Re!==null;)if(l=Re,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Re=o;else for(;Re!==null;){l=Re;try{var ke=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Oe=ke.memoizedProps,rn=ke.memoizedState,q=l.stateNode,z=q.getSnapshotBeforeUpdate(l.elementType===l.type?Oe:qr(l.type,Oe),rn);q.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Q=l.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){Xt(l,l.return,me)}if(o=l.sibling,o!==null){o.return=l.return,Re=o;break}Re=l.return}return ke=dT,dT=!1,ke}function Fc(o,l,d){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var _=y.destroy;y.destroy=void 0,_!==void 0&&ty(l,d,_)}y=y.next}while(y!==p)}}function hf(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&o)===o){var p=d.create;d.destroy=p()}d=d.next}while(d!==l)}}function ny(o){var l=o.ref;if(l!==null){var d=o.stateNode;o.tag,o=d,typeof l=="function"?l(o):l.current=o}}function hT(o){var l=o.alternate;l!==null&&(o.alternate=null,hT(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Ii],delete l[bc],delete l[vg],delete l[Dk],delete l[kk])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function fT(o){return o.tag===5||o.tag===3||o.tag===4}function pT(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||fT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ry(o,l,d){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(o,l):d.insertBefore(o,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(o,d)):(l=d,l.appendChild(o)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=$h));else if(p!==4&&(o=o.child,o!==null))for(ry(o,l,d),o=o.sibling;o!==null;)ry(o,l,d),o=o.sibling}function iy(o,l,d){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(iy(o,l,d),o=o.sibling;o!==null;)iy(o,l,d),o=o.sibling}var Dn=null,Gr=!1;function Qs(o,l,d){for(d=d.child;d!==null;)mT(o,l,d),d=d.sibling}function mT(o,l,d){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Jo,d)}catch{}switch(d.tag){case 5:Fn||zl(d,l);case 6:var p=Dn,y=Gr;Dn=null,Qs(o,l,d),Dn=p,Gr=y,Dn!==null&&(Gr?(o=Dn,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):Dn.removeChild(d.stateNode));break;case 18:Dn!==null&&(Gr?(o=Dn,d=d.stateNode,o.nodeType===8?yg(o.parentNode,d):o.nodeType===1&&yg(o,d),Us(o)):yg(Dn,d.stateNode));break;case 4:p=Dn,y=Gr,Dn=d.stateNode.containerInfo,Gr=!0,Qs(o,l,d),Dn=p,Gr=y;break;case 0:case 11:case 14:case 15:if(!Fn&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&ty(d,l,C),y=y.next}while(y!==p)}Qs(o,l,d);break;case 1:if(!Fn&&(zl(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(F){Xt(d,l,F)}Qs(o,l,d);break;case 21:Qs(o,l,d);break;case 22:d.mode&1?(Fn=(p=Fn)||d.memoizedState!==null,Qs(o,l,d),Fn=p):Qs(o,l,d);break;default:Qs(o,l,d)}}function gT(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new Kk),l.forEach(function(p){var y=iN.bind(null,o,p);d.has(p)||(d.add(p),p.then(y,y))})}}function Kr(o,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];try{var _=o,C=l,F=C;e:for(;F!==null;){switch(F.tag){case 5:Dn=F.stateNode,Gr=!1;break e;case 3:Dn=F.stateNode.containerInfo,Gr=!0;break e;case 4:Dn=F.stateNode.containerInfo,Gr=!0;break e}F=F.return}if(Dn===null)throw Error(t(160));mT(_,C,y),Dn=null,Gr=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(X){Xt(y,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)yT(l,o),l=l.sibling}function yT(o,l){var d=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Kr(l,o),bi(o),p&4){try{Fc(3,o,o.return),hf(3,o)}catch(Oe){Xt(o,o.return,Oe)}try{Fc(5,o,o.return)}catch(Oe){Xt(o,o.return,Oe)}}break;case 1:Kr(l,o),bi(o),p&512&&d!==null&&zl(d,d.return);break;case 5:if(Kr(l,o),bi(o),p&512&&d!==null&&zl(d,d.return),o.flags&32){var y=o.stateNode;try{qi(y,"")}catch(Oe){Xt(o,o.return,Oe)}}if(p&4&&(y=o.stateNode,y!=null)){var _=o.memoizedProps,C=d!==null?d.memoizedProps:_,F=o.type,$=o.updateQueue;if(o.updateQueue=null,$!==null)try{F==="input"&&_.type==="radio"&&_.name!=null&&de(y,_),Br(F,C);var X=Br(F,_);for(C=0;C<$.length;C+=2){var le=$[C],fe=$[C+1];le==="style"?ks(y,fe):le==="dangerouslySetInnerHTML"?qo(y,fe):le==="children"?qi(y,fe):A(y,le,fe,X)}switch(F){case"input":ve(y,_);break;case"textarea":gt(y,_);break;case"select":var oe=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var be=_.value;be!=null?Ke(y,!!_.multiple,be,!1):oe!==!!_.multiple&&(_.defaultValue!=null?Ke(y,!!_.multiple,_.defaultValue,!0):Ke(y,!!_.multiple,_.multiple?[]:"",!1))}y[bc]=_}catch(Oe){Xt(o,o.return,Oe)}}break;case 6:if(Kr(l,o),bi(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,_=o.memoizedProps;try{y.nodeValue=_}catch(Oe){Xt(o,o.return,Oe)}}break;case 3:if(Kr(l,o),bi(o),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Us(l.containerInfo)}catch(Oe){Xt(o,o.return,Oe)}break;case 4:Kr(l,o),bi(o);break;case 13:Kr(l,o),bi(o),y=o.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(ay=Lt())),p&4&&gT(o);break;case 22:if(le=d!==null&&d.memoizedState!==null,o.mode&1?(Fn=(X=Fn)||le,Kr(l,o),Fn=X):Kr(l,o),bi(o),p&8192){if(X=o.memoizedState!==null,(o.stateNode.isHidden=X)&&!le&&(o.mode&1)!==0)for(Re=o,le=o.child;le!==null;){for(fe=Re=le;Re!==null;){switch(oe=Re,be=oe.child,oe.tag){case 0:case 11:case 14:case 15:Fc(4,oe,oe.return);break;case 1:zl(oe,oe.return);var ke=oe.stateNode;if(typeof ke.componentWillUnmount=="function"){p=oe,d=oe.return;try{l=p,ke.props=l.memoizedProps,ke.state=l.memoizedState,ke.componentWillUnmount()}catch(Oe){Xt(p,d,Oe)}}break;case 5:zl(oe,oe.return);break;case 22:if(oe.memoizedState!==null){wT(fe);continue}}be!==null?(be.return=oe,Re=be):wT(fe)}le=le.sibling}e:for(le=null,fe=o;;){if(fe.tag===5){if(le===null){le=fe;try{y=fe.stateNode,X?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(F=fe.stateNode,$=fe.memoizedProps.style,C=$!=null&&$.hasOwnProperty("display")?$.display:null,F.style.display=Pr("display",C))}catch(Oe){Xt(o,o.return,Oe)}}}else if(fe.tag===6){if(le===null)try{fe.stateNode.nodeValue=X?"":fe.memoizedProps}catch(Oe){Xt(o,o.return,Oe)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===o)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===o)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===o)break e;le===fe&&(le=null),fe=fe.return}le===fe&&(le=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Kr(l,o),bi(o),p&4&&gT(o);break;case 21:break;default:Kr(l,o),bi(o)}}function bi(o){var l=o.flags;if(l&2){try{e:{for(var d=o.return;d!==null;){if(fT(d)){var p=d;break e}d=d.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(qi(y,""),p.flags&=-33);var _=pT(o);iy(o,_,y);break;case 3:case 4:var C=p.stateNode.containerInfo,F=pT(o);ry(o,F,C);break;default:throw Error(t(161))}}catch($){Xt(o,o.return,$)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Yk(o,l,d){Re=o,vT(o)}function vT(o,l,d){for(var p=(o.mode&1)!==0;Re!==null;){var y=Re,_=y.child;if(y.tag===22&&p){var C=y.memoizedState!==null||df;if(!C){var F=y.alternate,$=F!==null&&F.memoizedState!==null||Fn;F=df;var X=Fn;if(df=C,(Fn=$)&&!X)for(Re=y;Re!==null;)C=Re,$=C.child,C.tag===22&&C.memoizedState!==null?ET(y):$!==null?($.return=C,Re=$):ET(y);for(;_!==null;)Re=_,vT(_),_=_.sibling;Re=y,df=F,Fn=X}_T(o)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Re=_):_T(o)}}function _T(o){for(;Re!==null;){var l=Re;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Fn||hf(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Fn)if(d===null)p.componentDidMount();else{var y=l.elementType===l.type?d.memoizedProps:qr(l.type,d.memoizedProps);p.componentDidUpdate(y,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=l.updateQueue;_!==null&&w0(l,_,p);break;case 3:var C=l.updateQueue;if(C!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}w0(l,C,d)}break;case 5:var F=l.stateNode;if(d===null&&l.flags&4){d=F;var $=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&d.focus();break;case"img":$.src&&(d.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var fe=le.dehydrated;fe!==null&&Us(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fn||l.flags&512&&ny(l)}catch(oe){Xt(l,l.return,oe)}}if(l===o){Re=null;break}if(d=l.sibling,d!==null){d.return=l.return,Re=d;break}Re=l.return}}function wT(o){for(;Re!==null;){var l=Re;if(l===o){Re=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Re=d;break}Re=l.return}}function ET(o){for(;Re!==null;){var l=Re;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{hf(4,l)}catch($){Xt(l,d,$)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var y=l.return;try{p.componentDidMount()}catch($){Xt(l,y,$)}}var _=l.return;try{ny(l)}catch($){Xt(l,_,$)}break;case 5:var C=l.return;try{ny(l)}catch($){Xt(l,C,$)}}}catch($){Xt(l,l.return,$)}if(l===o){Re=null;break}var F=l.sibling;if(F!==null){F.return=l.return,Re=F;break}Re=l.return}}var Xk=Math.ceil,ff=j.ReactCurrentDispatcher,sy=j.ReactCurrentOwner,Mr=j.ReactCurrentBatchConfig,vt=0,Sn=null,dn=null,kn=0,_r=0,Wl=Ws(0),vn=0,Uc=null,pa=0,pf=0,oy=0,jc=null,tr=null,ay=0,Hl=1/0,cs=null,mf=!1,ly=null,Ys=null,gf=!1,Xs=null,yf=0,Bc=0,uy=null,vf=-1,_f=0;function Gn(){return(vt&6)!==0?Lt():vf!==-1?vf:vf=Lt()}function Js(o){return(o.mode&1)===0?1:(vt&2)!==0&&kn!==0?kn&-kn:Vk.transition!==null?(_f===0&&(_f=lc()),_f):(o=ft,o!==0||(o=window.event,o=o===void 0?16:wl(o.type)),o)}function Qr(o,l,d,p){if(50<Bc)throw Bc=0,uy=null,Error(t(185));na(o,d,p),((vt&2)===0||o!==Sn)&&(o===Sn&&((vt&2)===0&&(pf|=d),vn===4&&Zs(o,kn)),nr(o,p),d===1&&vt===0&&(l.mode&1)===0&&(Hl=Lt()+500,qh&&qs()))}function nr(o,l){var d=o.callbackNode;ta(o,l);var p=Xi(o,o===Sn?kn:0);if(p===0)d!==null&&fl(d),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(d!=null&&fl(d),l===1)o.tag===0?Nk(ST.bind(null,o)):l0(ST.bind(null,o)),xk(function(){(vt&6)===0&&qs()}),d=null;else{switch(pi(p)){case 1:d=pl;break;case 4:d=sc;break;case 16:d=Xo;break;case 536870912:d=ml;break;default:d=Xo}d=DT(d,TT.bind(null,o))}o.callbackPriority=l,o.callbackNode=d}}function TT(o,l){if(vf=-1,_f=0,(vt&6)!==0)throw Error(t(327));var d=o.callbackNode;if(ql()&&o.callbackNode!==d)return null;var p=Xi(o,o===Sn?kn:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||l)l=wf(o,p);else{l=p;var y=vt;vt|=2;var _=CT();(Sn!==o||kn!==l)&&(cs=null,Hl=Lt()+500,ga(o,l));do try{eN();break}catch(F){IT(o,F)}while(!0);bg(),ff.current=_,vt=y,dn!==null?l=0:(Sn=null,kn=0,l=vn)}if(l!==0){if(l===2&&(y=ac(o),y!==0&&(p=y,l=cy(o,y))),l===1)throw d=Uc,ga(o,0),Zs(o,p),nr(o,Lt()),d;if(l===6)Zs(o,p);else{if(y=o.current.alternate,(p&30)===0&&!Jk(y)&&(l=wf(o,p),l===2&&(_=ac(o),_!==0&&(p=_,l=cy(o,_))),l===1))throw d=Uc,ga(o,0),Zs(o,p),nr(o,Lt()),d;switch(o.finishedWork=y,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:ya(o,tr,cs);break;case 3:if(Zs(o,p),(p&130023424)===p&&(l=ay+500-Lt(),10<l)){if(Xi(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){Gn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=gg(ya.bind(null,o,tr,cs),l);break}ya(o,tr,cs);break;case 4:if(Zs(o,p),(p&4194240)===p)break;for(l=o.eventTimes,y=-1;0<p;){var C=31-hr(p);_=1<<C,C=l[C],C>y&&(y=C),p&=~_}if(p=y,p=Lt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Xk(p/1960))-p,10<p){o.timeoutHandle=gg(ya.bind(null,o,tr,cs),p);break}ya(o,tr,cs);break;case 5:ya(o,tr,cs);break;default:throw Error(t(329))}}}return nr(o,Lt()),o.callbackNode===d?TT.bind(null,o):null}function cy(o,l){var d=jc;return o.current.memoizedState.isDehydrated&&(ga(o,l).flags|=256),o=wf(o,l),o!==2&&(l=tr,tr=d,l!==null&&dy(l)),o}function dy(o){tr===null?tr=o:tr.push.apply(tr,o)}function Jk(o){for(var l=o;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var y=d[p],_=y.getSnapshot;y=y.value;try{if(!Wr(_(),y))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Zs(o,l){for(l&=~oy,l&=~pf,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var d=31-hr(l),p=1<<d;o[d]=-1,l&=~p}}function ST(o){if((vt&6)!==0)throw Error(t(327));ql();var l=Xi(o,0);if((l&1)===0)return nr(o,Lt()),null;var d=wf(o,l);if(o.tag!==0&&d===2){var p=ac(o);p!==0&&(l=p,d=cy(o,p))}if(d===1)throw d=Uc,ga(o,0),Zs(o,l),nr(o,Lt()),d;if(d===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,ya(o,tr,cs),nr(o,Lt()),null}function hy(o,l){var d=vt;vt|=1;try{return o(l)}finally{vt=d,vt===0&&(Hl=Lt()+500,qh&&qs())}}function ma(o){Xs!==null&&Xs.tag===0&&(vt&6)===0&&ql();var l=vt;vt|=1;var d=Mr.transition,p=ft;try{if(Mr.transition=null,ft=1,o)return o()}finally{ft=p,Mr.transition=d,vt=l,(vt&6)===0&&qs()}}function fy(){_r=Wl.current,Ut(Wl)}function ga(o,l){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,Ak(d)),dn!==null)for(d=dn.return;d!==null;){var p=d;switch(Tg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Wh();break;case 3:Bl(),Ut(Jn),Ut(Mn),Mg();break;case 5:Ng(p);break;case 4:Bl();break;case 13:Ut(Ht);break;case 19:Ut(Ht);break;case 10:Ag(p.type._context);break;case 22:case 23:fy()}d=d.return}if(Sn=o,dn=o=eo(o.current,null),kn=_r=l,vn=0,Uc=null,oy=pf=pa=0,tr=jc=null,da!==null){for(l=0;l<da.length;l++)if(d=da[l],p=d.interleaved,p!==null){d.interleaved=null;var y=p.next,_=d.pending;if(_!==null){var C=_.next;_.next=y,p.next=C}d.pending=p}da=null}return o}function IT(o,l){do{var d=dn;try{if(bg(),nf.current=af,rf){for(var p=qt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}rf=!1}if(fa=0,Tn=yn=qt=null,Nc=!1,Vc=0,sy.current=null,d===null||d.return===null){vn=1,Uc=l,dn=null;break}e:{var _=o,C=d.return,F=d,$=l;if(l=kn,F.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var X=$,le=F,fe=le.tag;if((le.mode&1)===0&&(fe===0||fe===11||fe===15)){var oe=le.alternate;oe?(le.updateQueue=oe.updateQueue,le.memoizedState=oe.memoizedState,le.lanes=oe.lanes):(le.updateQueue=null,le.memoizedState=null)}var be=Q0(C);if(be!==null){be.flags&=-257,Y0(be,C,F,_,l),be.mode&1&&K0(_,X,l),l=be,$=X;var ke=l.updateQueue;if(ke===null){var Oe=new Set;Oe.add($),l.updateQueue=Oe}else ke.add($);break e}else{if((l&1)===0){K0(_,X,l),py();break e}$=Error(t(426))}}else if(zt&&F.mode&1){var rn=Q0(C);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),Y0(rn,C,F,_,l),Cg($l($,F));break e}}_=$=$l($,F),vn!==4&&(vn=2),jc===null?jc=[_]:jc.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,l&=-l,_.lanes|=l;var q=q0(_,$,l);_0(_,q);break e;case 1:F=$;var z=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Ys===null||!Ys.has(Q)))){_.flags|=65536,l&=-l,_.lanes|=l;var me=G0(_,F,l);_0(_,me);break e}}_=_.return}while(_!==null)}bT(d)}catch(Le){l=Le,dn===d&&d!==null&&(dn=d=d.return);continue}break}while(!0)}function CT(){var o=ff.current;return ff.current=af,o===null?af:o}function py(){(vn===0||vn===3||vn===2)&&(vn=4),Sn===null||(pa&268435455)===0&&(pf&268435455)===0||Zs(Sn,kn)}function wf(o,l){var d=vt;vt|=2;var p=CT();(Sn!==o||kn!==l)&&(cs=null,ga(o,l));do try{Zk();break}catch(y){IT(o,y)}while(!0);if(bg(),vt=d,ff.current=p,dn!==null)throw Error(t(261));return Sn=null,kn=0,vn}function Zk(){for(;dn!==null;)PT(dn)}function eN(){for(;dn!==null&&!Yo();)PT(dn)}function PT(o){var l=RT(o.alternate,o,_r);o.memoizedProps=o.pendingProps,l===null?bT(o):dn=l,sy.current=null}function bT(o){var l=o;do{var d=l.alternate;if(o=l.return,(l.flags&32768)===0){if(d=qk(d,l,_r),d!==null){dn=d;return}}else{if(d=Gk(d,l),d!==null){d.flags&=32767,dn=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{vn=6,dn=null;return}}if(l=l.sibling,l!==null){dn=l;return}dn=l=o}while(l!==null);vn===0&&(vn=5)}function ya(o,l,d){var p=ft,y=Mr.transition;try{Mr.transition=null,ft=1,tN(o,l,d,p)}finally{Mr.transition=y,ft=p}return null}function tN(o,l,d,p){do ql();while(Xs!==null);if((vt&6)!==0)throw Error(t(327));d=o.finishedWork;var y=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=d.lanes|d.childLanes;if(eg(o,_),o===Sn&&(dn=Sn=null,kn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||gf||(gf=!0,DT(Xo,function(){return ql(),null})),_=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||_){_=Mr.transition,Mr.transition=null;var C=ft;ft=1;var F=vt;vt|=4,sy.current=null,Qk(o,d),yT(d,o),Ek(pg),es=!!fg,pg=fg=null,o.current=d,Yk(d),Yi(),vt=F,ft=C,Mr.transition=_}else o.current=d;if(gf&&(gf=!1,Xs=o,yf=y),_=o.pendingLanes,_===0&&(Ys=null),Ph(d.stateNode),nr(o,Lt()),l!==null)for(p=o.onRecoverableError,d=0;d<l.length;d++)y=l[d],p(y.value,{componentStack:y.stack,digest:y.digest});if(mf)throw mf=!1,o=ly,ly=null,o;return(yf&1)!==0&&o.tag!==0&&ql(),_=o.pendingLanes,(_&1)!==0?o===uy?Bc++:(Bc=0,uy=o):Bc=0,qs(),null}function ql(){if(Xs!==null){var o=pi(yf),l=Mr.transition,d=ft;try{if(Mr.transition=null,ft=16>o?16:o,Xs===null)var p=!1;else{if(o=Xs,Xs=null,yf=0,(vt&6)!==0)throw Error(t(331));var y=vt;for(vt|=4,Re=o.current;Re!==null;){var _=Re,C=_.child;if((Re.flags&16)!==0){var F=_.deletions;if(F!==null){for(var $=0;$<F.length;$++){var X=F[$];for(Re=X;Re!==null;){var le=Re;switch(le.tag){case 0:case 11:case 15:Fc(8,le,_)}var fe=le.child;if(fe!==null)fe.return=le,Re=fe;else for(;Re!==null;){le=Re;var oe=le.sibling,be=le.return;if(hT(le),le===X){Re=null;break}if(oe!==null){oe.return=be,Re=oe;break}Re=be}}}var ke=_.alternate;if(ke!==null){var Oe=ke.child;if(Oe!==null){ke.child=null;do{var rn=Oe.sibling;Oe.sibling=null,Oe=rn}while(Oe!==null)}}Re=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,Re=C;else e:for(;Re!==null;){if(_=Re,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Fc(9,_,_.return)}var q=_.sibling;if(q!==null){q.return=_.return,Re=q;break e}Re=_.return}}var z=o.current;for(Re=z;Re!==null;){C=Re;var Q=C.child;if((C.subtreeFlags&2064)!==0&&Q!==null)Q.return=C,Re=Q;else e:for(C=z;Re!==null;){if(F=Re,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:hf(9,F)}}catch(Le){Xt(F,F.return,Le)}if(F===C){Re=null;break e}var me=F.sibling;if(me!==null){me.return=F.return,Re=me;break e}Re=F.return}}if(vt=y,qs(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Jo,o)}catch{}p=!0}return p}finally{ft=d,Mr.transition=l}}return!1}function AT(o,l,d){l=$l(d,l),l=q0(o,l,1),o=Ks(o,l,1),l=Gn(),o!==null&&(na(o,1,l),nr(o,l))}function Xt(o,l,d){if(o.tag===3)AT(o,o,d);else for(;l!==null;){if(l.tag===3){AT(l,o,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ys===null||!Ys.has(p))){o=$l(d,o),o=G0(l,o,1),l=Ks(l,o,1),o=Gn(),l!==null&&(na(l,1,o),nr(l,o));break}}l=l.return}}function nN(o,l,d){var p=o.pingCache;p!==null&&p.delete(l),l=Gn(),o.pingedLanes|=o.suspendedLanes&d,Sn===o&&(kn&d)===d&&(vn===4||vn===3&&(kn&130023424)===kn&&500>Lt()-ay?ga(o,0):oy|=d),nr(o,l)}function xT(o,l){l===0&&((o.mode&1)===0?l=1:(l=Os,Os<<=1,(Os&130023424)===0&&(Os=4194304)));var d=Gn();o=as(o,l),o!==null&&(na(o,l,d),nr(o,d))}function rN(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),xT(o,d)}function iN(o,l){var d=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(d=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),xT(o,d)}var RT;RT=function(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps||Jn.current)er=!0;else{if((o.lanes&d)===0&&(l.flags&128)===0)return er=!1,Hk(o,l,d);er=(o.flags&131072)!==0}else er=!1,zt&&(l.flags&1048576)!==0&&u0(l,Kh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;cf(o,l),o=l.pendingProps;var y=Vl(l,Mn.current);jl(l,d),y=Fg(null,l,p,o,y,d);var _=Ug();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Zn(p)?(_=!0,Hh(l)):_=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Dg(l),y.updater=lf,l.stateNode=y,y._reactInternals=l,Hg(l,p,o,d),l=Qg(null,l,p,!0,_,d)):(l.tag=0,zt&&_&&Eg(l),qn(null,l,y,d),l=l.child),l;case 16:p=l.elementType;e:{switch(cf(o,l),o=l.pendingProps,y=p._init,p=y(p._payload),l.type=p,y=l.tag=oN(p),o=qr(p,o),y){case 0:l=Kg(null,l,p,o,d);break e;case 1:l=nT(null,l,p,o,d);break e;case 11:l=X0(null,l,p,o,d);break e;case 14:l=J0(null,l,p,qr(p.type,o),d);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:qr(p,y),Kg(o,l,p,y,d);case 1:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:qr(p,y),nT(o,l,p,y,d);case 3:e:{if(rT(l),o===null)throw Error(t(387));p=l.pendingProps,_=l.memoizedState,y=_.element,v0(o,l),ef(l,p,null,d);var C=l.memoizedState;if(p=C.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){y=$l(Error(t(423)),l),l=iT(o,l,p,d,y);break e}else if(p!==y){y=$l(Error(t(424)),l),l=iT(o,l,p,d,y);break e}else for(vr=zs(l.stateNode.containerInfo.firstChild),yr=l,zt=!0,Hr=null,d=g0(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ll(),p===y){l=us(o,l,d);break e}qn(o,l,p,d)}l=l.child}return l;case 5:return E0(l),o===null&&Ig(l),p=l.type,y=l.pendingProps,_=o!==null?o.memoizedProps:null,C=y.children,mg(p,y)?C=null:_!==null&&mg(p,_)&&(l.flags|=32),tT(o,l),qn(o,l,C,d),l.child;case 6:return o===null&&Ig(l),null;case 13:return sT(o,l,d);case 4:return kg(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=Fl(l,null,p,d):qn(o,l,p,d),l.child;case 11:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:qr(p,y),X0(o,l,p,y,d);case 7:return qn(o,l,l.pendingProps,d),l.child;case 8:return qn(o,l,l.pendingProps.children,d),l.child;case 12:return qn(o,l,l.pendingProps.children,d),l.child;case 10:e:{if(p=l.type._context,y=l.pendingProps,_=l.memoizedProps,C=y.value,Nt(Xh,p._currentValue),p._currentValue=C,_!==null)if(Wr(_.value,C)){if(_.children===y.children&&!Jn.current){l=us(o,l,d);break e}}else for(_=l.child,_!==null&&(_.return=l);_!==null;){var F=_.dependencies;if(F!==null){C=_.child;for(var $=F.firstContext;$!==null;){if($.context===p){if(_.tag===1){$=ls(-1,d&-d),$.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?$.next=$:($.next=le.next,le.next=$),X.pending=$}}_.lanes|=d,$=_.alternate,$!==null&&($.lanes|=d),xg(_.return,d,l),F.lanes|=d;break}$=$.next}}else if(_.tag===10)C=_.type===l.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=d,F=C.alternate,F!==null&&(F.lanes|=d),xg(C,d,l),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===l){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}qn(o,l,y.children,d),l=l.child}return l;case 9:return y=l.type,p=l.pendingProps.children,jl(l,d),y=Nr(y),p=p(y),l.flags|=1,qn(o,l,p,d),l.child;case 14:return p=l.type,y=qr(p,l.pendingProps),y=qr(p.type,y),J0(o,l,p,y,d);case 15:return Z0(o,l,l.type,l.pendingProps,d);case 17:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:qr(p,y),cf(o,l),l.tag=1,Zn(p)?(o=!0,Hh(l)):o=!1,jl(l,d),W0(l,p,y),Hg(l,p,y,d),Qg(null,l,p,!0,o,d);case 19:return aT(o,l,d);case 22:return eT(o,l,d)}throw Error(t(156,l.tag))};function DT(o,l){return ic(o,l)}function sN(o,l,d,p){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(o,l,d,p){return new sN(o,l,d,p)}function my(o){return o=o.prototype,!(!o||!o.isReactComponent)}function oN(o){if(typeof o=="function")return my(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===Ie)return 14}return 2}function eo(o,l){var d=o.alternate;return d===null?(d=Or(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function Ef(o,l,d,p,y,_){var C=2;if(p=o,typeof o=="function")my(o)&&(C=1);else if(typeof o=="string")C=5;else e:switch(o){case x:return va(d.children,y,_,l);case S:C=8,y|=8;break;case k:return o=Or(12,d,l,y|2),o.elementType=k,o.lanes=_,o;case V:return o=Or(13,d,l,y),o.elementType=V,o.lanes=_,o;case ie:return o=Or(19,d,l,y),o.elementType=ie,o.lanes=_,o;case je:return Tf(d,y,_,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:C=10;break e;case M:C=9;break e;case U:C=11;break e;case Ie:C=14;break e;case Ce:C=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Or(C,d,l,y),l.elementType=o,l.type=p,l.lanes=_,l}function va(o,l,d,p){return o=Or(7,o,p,l),o.lanes=d,o}function Tf(o,l,d,p){return o=Or(22,o,p,l),o.elementType=je,o.lanes=d,o.stateNode={isHidden:!1},o}function gy(o,l,d){return o=Or(6,o,null,l),o.lanes=d,o}function yy(o,l,d){return l=Or(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function aN(o,l,d,p,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uc(0),this.expirationTimes=uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uc(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function vy(o,l,d,p,y,_,C,F,$){return o=new aN(o,l,d,F,$),l===1?(l=1,_===!0&&(l|=8)):l=0,_=Or(3,null,null,l),o.current=_,_.stateNode=o,_.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dg(_),o}function lN(o,l,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:p==null?null:""+p,children:o,containerInfo:l,implementation:d}}function kT(o){if(!o)return Hs;o=o._reactInternals;e:{if($r(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Zn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var d=o.type;if(Zn(d))return o0(o,d,l)}return l}function NT(o,l,d,p,y,_,C,F,$){return o=vy(d,p,!0,o,y,_,C,F,$),o.context=kT(null),d=o.current,p=Gn(),y=Js(d),_=ls(p,y),_.callback=l??null,Ks(d,_,y),o.current.lanes=y,na(o,y,p),nr(o,p),o}function Sf(o,l,d,p){var y=l.current,_=Gn(),C=Js(y);return d=kT(d),l.context===null?l.context=d:l.pendingContext=d,l=ls(_,C),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=Ks(y,l,C),o!==null&&(Qr(o,y,C,_),Zh(o,y,C)),C}function If(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function VT(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function _y(o,l){VT(o,l),(o=o.alternate)&&VT(o,l)}function uN(){return null}var MT=typeof reportError=="function"?reportError:function(o){console.error(o)};function wy(o){this._internalRoot=o}Cf.prototype.render=wy.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Sf(o,l,null,null)},Cf.prototype.unmount=wy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;ma(function(){Sf(null,o,null,null)}),l[rs]=null}};function Cf(o){this._internalRoot=o}Cf.prototype.unstable_scheduleHydration=function(o){if(o){var l=fc();o={blockedOn:null,target:o,priority:l};for(var d=0;d<fr.length&&l!==0&&l<fr[d].priority;d++);fr.splice(d,0,o),d===0&&vl(o)}};function Ey(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Pf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function OT(){}function cN(o,l,d,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var X=If(C);_.call(X)}}var C=NT(l,p,o,0,null,!1,!1,"",OT);return o._reactRootContainer=C,o[rs]=C.current,Cc(o.nodeType===8?o.parentNode:o),ma(),C}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var F=p;p=function(){var X=If($);F.call(X)}}var $=vy(o,0,!1,null,null,!1,!1,"",OT);return o._reactRootContainer=$,o[rs]=$.current,Cc(o.nodeType===8?o.parentNode:o),ma(function(){Sf(l,$,d,p)}),$}function bf(o,l,d,p,y){var _=d._reactRootContainer;if(_){var C=_;if(typeof y=="function"){var F=y;y=function(){var $=If(C);F.call($)}}Sf(l,C,o,y)}else C=cN(d,l,o,y,p);return If(C)}dc=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var d=Tt(l.pendingLanes);d!==0&&(cc(l,d|1),nr(l,Lt()),(vt&6)===0&&(Hl=Lt()+500,qs()))}break;case 13:ma(function(){var p=as(o,1);if(p!==null){var y=Gn();Qr(p,o,1,y)}}),_y(o,1)}},gl=function(o){if(o.tag===13){var l=as(o,134217728);if(l!==null){var d=Gn();Qr(l,o,134217728,d)}_y(o,134217728)}},hc=function(o){if(o.tag===13){var l=Js(o),d=as(o,l);if(d!==null){var p=Gn();Qr(d,o,l,p)}_y(o,l)}},fc=function(){return ft},pc=function(o,l){var d=ft;try{return ft=o,l()}finally{ft=d}},br=function(o,l,d){switch(l){case"input":if(ve(o,d),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==o&&p.form===o.form){var y=zh(p);if(!y)throw Error(t(90));Ds(p),ve(p,y)}}}break;case"textarea":gt(o,d);break;case"select":l=d.value,l!=null&&Ke(o,!!d.multiple,l,!1)}},ci=hy,Ns=ma;var dN={usingClientEntryPoint:!1,Events:[Ac,kl,zh,li,ui,hy]},$c={findFiberByHostInstance:aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hN={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ch(o),o===null?null:o.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||uN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Jo=Af.inject(hN),dr=Af}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN,rr.createPortal=function(o,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ey(l))throw Error(t(200));return lN(o,l,null,d)},rr.createRoot=function(o,l){if(!Ey(o))throw Error(t(299));var d=!1,p="",y=MT;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=vy(o,1,!1,null,null,d,!1,p,y),o[rs]=l.current,Cc(o.nodeType===8?o.parentNode:o),new wy(l)},rr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ch(l),o=o===null?null:o.stateNode,o},rr.flushSync=function(o){return ma(o)},rr.hydrate=function(o,l,d){if(!Pf(l))throw Error(t(200));return bf(null,o,l,!0,d)},rr.hydrateRoot=function(o,l,d){if(!Ey(o))throw Error(t(405));var p=d!=null&&d.hydratedSources||null,y=!1,_="",C=MT;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),l=NT(l,null,o,1,d??null,y,!1,_,C),o[rs]=l.current,Cc(o),p)for(o=0;o<p.length;o++)d=p[o],y=d._getVersion,y=y(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,y]:l.mutableSourceEagerHydrationData.push(d,y);return new Cf(l)},rr.render=function(o,l,d){if(!Pf(l))throw Error(t(200));return bf(null,o,l,!1,d)},rr.unmountComponentAtNode=function(o){if(!Pf(o))throw Error(t(40));return o._reactRootContainer?(ma(function(){bf(null,null,o,!1,function(){o._reactRootContainer=null,o[rs]=null})}),!0):!1},rr.unstable_batchedUpdates=hy,rr.unstable_renderSubtreeIntoContainer=function(o,l,d,p){if(!Pf(d))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return bf(o,l,d,!1,p)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var WT;function MP(){if(WT)return Iy.exports;WT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Iy.exports=wN(),Iy.exports}var HT;function EN(){if(HT)return xf;HT=1;var n=MP();return xf.createRoot=n.createRoot,xf.hydrateRoot=n.hydrateRoot,xf}var TN=EN();const SN=b_(TN),IN="modulepreload",CN=function(n){return"/"+n},qT={},$i=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");i=c(t.map(h=>{if(h=CN(h),h in qT)return;qT[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":IN,m||(v.as="script"),v.crossOrigin="",v.href=h,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((E,I)=>{v.addEventListener("load",E),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var R_=MP();const PN=b_(R_);function Cd(){return Cd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cd.apply(this,arguments)}var yo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(yo||(yo={}));const GT="popstate";function bN(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return mv("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:gp(i)}return xN(e,t,null,n)}function Yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function D_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AN(){return Math.random().toString(36).substr(2,8)}function KT(n,e){return{usr:n.state,key:n.key,idx:e}}function mv(n,e,t,r){return t===void 0&&(t=null),Cd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$u(e):e,{state:t,key:e&&e.key||r||AN()})}function gp(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $u(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function xN(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=yo.Pop,c=null,h=m();h==null&&(h=0,a.replaceState(Cd({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=yo.Pop;let P=m(),L=P==null?null:P-h;h=P,c&&c({action:u,location:b.location,delta:L})}function v(P,L){u=yo.Push;let D=mv(b.location,P,L);h=m()+1;let A=KT(D,h),j=b.createHref(D);try{a.pushState(A,"",j)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(j)}s&&c&&c({action:u,location:b.location,delta:1})}function E(P,L){u=yo.Replace;let D=mv(b.location,P,L);h=m();let A=KT(D,h),j=b.createHref(D);a.replaceState(A,"",j),s&&c&&c({action:u,location:b.location,delta:0})}function I(P){let L=i.location.origin!=="null"?i.location.origin:i.location.href,D=typeof P=="string"?P:gp(P);return D=D.replace(/ $/,"%20"),Yt(L,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,L)}let b={get action(){return u},get location(){return n(i,a)},listen(P){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(GT,g),c=P,()=>{i.removeEventListener(GT,g),c=null}},createHref(P){return e(i,P)},createURL:I,encodeLocation(P){let L=I(P);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:E,go(P){return a.go(P)}};return b}var QT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(QT||(QT={}));function RN(n,e,t){return t===void 0&&(t="/"),DN(n,e,t)}function DN(n,e,t,r){let i=typeof e=="string"?$u(e):e,s=_u(i.pathname||"/",t);if(s==null)return null;let a=OP(n);kN(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let h=zN(s);u=BN(a[c],h)}return u}function OP(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Yt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=_o([r,c.relativePath]),m=t.concat(c);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),OP(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:UN(h,s.index),routesMeta:m})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of LP(s.path))i(s,a,c)}),e}function LP(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=LP(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function kN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:jN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const NN=/^:[\w-]+$/,VN=3,MN=2,ON=1,LN=10,FN=-2,YT=n=>n==="*";function UN(n,e){let t=n.split("/"),r=t.length;return t.some(YT)&&(r+=FN),e&&(r+=MN),t.filter(i=>!YT(i)).reduce((i,s)=>i+(NN.test(s)?VN:s===""?ON:LN),r)}function jN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function BN(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=gv({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},m),v=c.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:_o([s,g.pathname]),pathnameBase:KN(_o([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=_o([s,g.pathnameBase]))}return a}function gv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=$N(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:v,isOptional:E}=m;if(v==="*"){let b=u[g]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const I=u[g];return E&&!I?h[v]=void 0:h[v]=(I||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function $N(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),D_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return D_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function _u(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const WN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HN=n=>WN.test(n);function qN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?$u(n):n,s;if(t)if(HN(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),D_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=XT(t.substring(1),"/"):s=XT(t,e)}else s=e;return{pathname:s,search:QN(r),hash:YN(i)}}function XT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function by(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function k_(n,e){let t=GN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function N_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=$u(n):(i=Cd({},n),Yt(!i.pathname||!i.pathname.includes("?"),by("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),by("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),by("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let c=qN(i,u),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||m)&&(c.pathname+="/"),c}const _o=n=>n.join("/").replace(/\/\/+/g,"/"),KN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),QN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,YN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function XN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const FP=["post","put","patch","delete"];new Set(FP);const JN=["get",...FP];new Set(JN);function Pd(){return Pd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pd.apply(this,arguments)}const dm=R.createContext(null),UP=R.createContext(null),Ps=R.createContext(null),hm=R.createContext(null),bs=R.createContext({outlet:null,matches:[],isDataRoute:!1}),jP=R.createContext(null);function ZN(n,e){let{relative:t}=e===void 0?{}:e;zu()||Yt(!1);let{basename:r,navigator:i}=R.useContext(Ps),{hash:s,pathname:a,search:u}=fm(n,{relative:t}),c=a;return r!=="/"&&(c=a==="/"?r:_o([r,a])),i.createHref({pathname:c,search:u,hash:s})}function zu(){return R.useContext(hm)!=null}function Fo(){return zu()||Yt(!1),R.useContext(hm).location}function BP(n){R.useContext(Ps).static||R.useLayoutEffect(n)}function V_(){let{isDataRoute:n}=R.useContext(bs);return n?hV():eV()}function eV(){zu()||Yt(!1);let n=R.useContext(dm),{basename:e,future:t,navigator:r}=R.useContext(Ps),{matches:i}=R.useContext(bs),{pathname:s}=Fo(),a=JSON.stringify(k_(i,t.v7_relativeSplatPath)),u=R.useRef(!1);return BP(()=>{u.current=!0}),R.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=N_(h,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:_o([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,s,n])}function xq(){let{matches:n}=R.useContext(bs),e=n[n.length-1];return e?e.params:{}}function fm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=R.useContext(Ps),{matches:i}=R.useContext(bs),{pathname:s}=Fo(),a=JSON.stringify(k_(i,r.v7_relativeSplatPath));return R.useMemo(()=>N_(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function tV(n,e){return nV(n,e)}function nV(n,e,t,r){zu()||Yt(!1);let{navigator:i}=R.useContext(Ps),{matches:s}=R.useContext(bs),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=Fo(),m;if(e){var g;let P=typeof e=="string"?$u(e):e;c==="/"||(g=P.pathname)!=null&&g.startsWith(c)||Yt(!1),m=P}else m=h;let v=m.pathname||"/",E=v;if(c!=="/"){let P=c.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(P.length).join("/")}let I=RN(n,{pathname:E}),b=aV(I&&I.map(P=>Object.assign({},P,{params:Object.assign({},u,P.params),pathname:_o([c,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:_o([c,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,t,r);return e&&b?R.createElement(hm.Provider,{value:{location:Pd({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:yo.Pop}},b):b}function rV(){let n=dV(),e=XN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,null)}const iV=R.createElement(rV,null);class sV extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(bs.Provider,{value:this.props.routeContext},R.createElement(jP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oV(n){let{routeContext:e,match:t,children:r}=n,i=R.useContext(dm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(bs.Provider,{value:e},r)}function aV(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||Yt(!1),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:v,errors:E}=t,I=g.route.loader&&v[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||I){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let E,I=!1,b=null,P=null;t&&(E=u&&g.route.id?u[g.route.id]:void 0,b=g.route.errorElement||iV,c&&(h<0&&v===0?(fV("route-fallback"),I=!0,P=null):h===v&&(I=!0,P=g.route.hydrateFallbackElement||null)));let L=e.concat(a.slice(0,v+1)),D=()=>{let A;return E?A=b:I?A=P:g.route.Component?A=R.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=m,R.createElement(oV,{match:g,routeContext:{outlet:m,matches:L,isDataRoute:t!=null},children:A})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?R.createElement(sV,{location:t.location,revalidation:t.revalidation,component:b,error:E,children:D(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):D()},null)}var $P=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})($P||{}),zP=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(zP||{});function lV(n){let e=R.useContext(dm);return e||Yt(!1),e}function uV(n){let e=R.useContext(UP);return e||Yt(!1),e}function cV(n){let e=R.useContext(bs);return e||Yt(!1),e}function WP(n){let e=cV(),t=e.matches[e.matches.length-1];return t.route.id||Yt(!1),t.route.id}function dV(){var n;let e=R.useContext(jP),t=uV(),r=WP();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function hV(){let{router:n}=lV($P.UseNavigateStable),e=WP(zP.UseNavigateStable),t=R.useRef(!1);return BP(()=>{t.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Pd({fromRouteId:e},s)))},[n,e])}const JT={};function fV(n,e,t){JT[n]||(JT[n]=!0)}function pV(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function yv(n){let{to:e,replace:t,state:r,relative:i}=n;zu()||Yt(!1);let{future:s,static:a}=R.useContext(Ps),{matches:u}=R.useContext(bs),{pathname:c}=Fo(),h=V_(),m=N_(e,k_(u,s.v7_relativeSplatPath),c,i==="path"),g=JSON.stringify(m);return R.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function ds(n){Yt(!1)}function mV(n){let{basename:e="/",children:t=null,location:r,navigationType:i=yo.Pop,navigator:s,static:a=!1,future:u}=n;zu()&&Yt(!1);let c=e.replace(/^\/*/,"/"),h=R.useMemo(()=>({basename:c,navigator:s,static:a,future:Pd({v7_relativeSplatPath:!1},u)}),[c,u,s,a]);typeof r=="string"&&(r=$u(r));let{pathname:m="/",search:g="",hash:v="",state:E=null,key:I="default"}=r,b=R.useMemo(()=>{let P=_u(m,c);return P==null?null:{location:{pathname:P,search:g,hash:v,state:E,key:I},navigationType:i}},[c,m,g,v,E,I,i]);return b==null?null:R.createElement(Ps.Provider,{value:h},R.createElement(hm.Provider,{children:t,value:b}))}function gV(n){let{children:e,location:t}=n;return tV(vv(e),t)}new Promise(()=>{});function vv(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){t.push.apply(t,vv(r.props.children,s));return}r.type!==ds&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=vv(r.props.children,s)),t.push(a)}),t}function yp(){return yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yp.apply(this,arguments)}function HP(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function yV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vV(n,e){return n.button===0&&(!e||e==="_self")&&!yV(n)}const _V=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],EV="6";try{window.__reactRouterVersion=EV}catch{}const TV=R.createContext({isTransitioning:!1}),SV="startTransition",ZT=x_[SV];function IV(n){let{basename:e,children:t,future:r,window:i}=n,s=R.useRef();s.current==null&&(s.current=bN({window:i,v5Compat:!0}));let a=s.current,[u,c]=R.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},m=R.useCallback(g=>{h&&ZT?ZT(()=>c(g)):c(g)},[c,h]);return R.useLayoutEffect(()=>a.listen(m),[a,m]),R.useEffect(()=>pV(r),[r]),R.createElement(mV,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const CV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bV=R.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:c,to:h,preventScrollReset:m,viewTransition:g}=e,v=HP(e,_V),{basename:E}=R.useContext(Ps),I,b=!1;if(typeof h=="string"&&PV.test(h)&&(I=h,CV))try{let A=new URL(window.location.href),j=h.startsWith("//")?new URL(A.protocol+h):new URL(h),H=_u(j.pathname,E);j.origin===A.origin&&H!=null?h=H+j.search+j.hash:b=!0}catch{}let P=ZN(h,{relative:i}),L=RV(h,{replace:a,state:u,target:c,preventScrollReset:m,relative:i,viewTransition:g});function D(A){r&&r(A),A.defaultPrevented||L(A)}return R.createElement("a",yp({},v,{href:I||P,onClick:b||s?r:D,ref:t,target:c}))}),AV=R.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:u,to:c,viewTransition:h,children:m}=e,g=HP(e,wV),v=fm(c,{relative:g.relative}),E=Fo(),I=R.useContext(UP),{navigator:b,basename:P}=R.useContext(Ps),L=I!=null&&DV(v)&&h===!0,D=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,A=E.pathname,j=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;i||(A=A.toLowerCase(),j=j?j.toLowerCase():null,D=D.toLowerCase()),j&&P&&(j=_u(j,P)||j);const H=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Y=A===D||!a&&A.startsWith(D)&&A.charAt(H)==="/",x=j!=null&&(j===D||!a&&j.startsWith(D)&&j.charAt(D.length)==="/"),S={isActive:Y,isPending:x,isTransitioning:L},k=Y?r:void 0,O;typeof s=="function"?O=s(S):O=[s,Y?"active":null,x?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(S):u;return R.createElement(bV,yp({},g,{"aria-current":k,className:O,ref:t,style:M,to:c,viewTransition:h}),typeof m=="function"?m(S):m)});var _v;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(_v||(_v={}));var eS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(eS||(eS={}));function xV(n){let e=R.useContext(dm);return e||Yt(!1),e}function RV(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,c=V_(),h=Fo(),m=fm(n,{relative:a});return R.useCallback(g=>{if(vV(g,t)){g.preventDefault();let v=r!==void 0?r:gp(h)===gp(m);c(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[h,c,m,r,i,t,n,s,a,u])}function DV(n,e){e===void 0&&(e={});let t=R.useContext(TV);t==null&&Yt(!1);let{basename:r}=xV(_v.useViewTransitionState),i=fm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=_u(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=_u(t.nextLocation.pathname,r)||t.nextLocation.pathname;return gv(i.pathname,a)!=null||gv(i.pathname,s)!=null}class kV extends pn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?G.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[G.jsx("h2",{children:"Se produjo un error"}),G.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(this.state.error?.stack||this.state.error)})]}):this.props.children}}const NV=()=>{};var tS={};const qP=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},VV=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},GP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let v=(u&15)<<2|h>>6,E=h&63;c||(E=64,a||(v=64)),r.push(t[m],t[g],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(qP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new MV;const v=s<<2|u>>4;if(r.push(v),h!==64){const E=u<<4&240|h>>2;if(r.push(E),g!==64){const I=h<<6&192|g;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OV=function(n){const e=qP(n);return GP.encodeByteArray(e,!0)},vp=function(n){return OV(n).replace(/\./g,"")},KP=function(n){try{return GP.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function QP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LV=()=>QP().__FIREBASE_DEFAULTS__,FV=()=>{if(typeof process>"u"||typeof tS>"u")return;const n=tS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&KP(n[1]);return e&&JSON.parse(e)},pm=()=>{try{return NV()||LV()||FV()||UV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},YP=n=>pm()?.emulatorHosts?.[n],XP=n=>{const e=YP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},JP=()=>pm()?.config,ZP=n=>pm()?.[`_${n}`];class jV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Uo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M_(n){return(await fetch(n,{credentials:"include"})).ok}function BV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vp(JSON.stringify(t)),vp(JSON.stringify(a)),""].join(".")}const ud={};function $V(){const n={prod:[],emulator:[]};for(const e of Object.keys(ud))ud[e]?n.emulator.push(e):n.prod.push(e);return n}function zV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nS=!1;function O_(n,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||ud[n]===e||ud[n]||nS)return;ud[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",s=$V().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{nS=!0,a()},v}function m(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=zV(r),E=t("text"),I=document.getElementById(E)||document.createElement("span"),b=t("learnmore"),P=document.getElementById(b)||document.createElement("a"),L=t("preprendIcon"),D=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const A=v.element;u(A),m(P,b);const j=h();c(D,L),A.append(D,I,P,j),document.body.appendChild(A)}s?(I.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function eb(){const n=pm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qV(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KV(){const n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tb(){return!eb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nb(){return!eb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function rb(){try{return typeof indexedDB=="object"}catch{return!1}}function QV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const YV="FirebaseError";class zi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=YV,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gd.prototype.create)}}class Gd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?XV(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new zi(i,u,r)}}function XV(n,e){return n.replace(JV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JV=/\{\$([^}]+)}/g;function ZV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ba(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(rS(s)&&rS(a)){if(!Ba(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function rS(n){return n!==null&&typeof n=="object"}function Kd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function rd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function eM(n,e){const t=new tM(n,e);return t.subscribe.bind(t)}class tM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ay),i.error===void 0&&(i.error=Ay),i.complete===void 0&&(i.complete=Ay);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ay(){}function Rt(n){return n&&n._delegate?n._delegate:n}class xo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ta="[DEFAULT]";let rM=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new jV;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sM(e))try{this.getOrInitializeService({instanceIdentifier:Ta})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ta){return this.instances.has(e)}getOptions(e=Ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ta){return this.component?this.component.multipleInstances?e:Ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function iM(n){return n===Ta?void 0:n}function sM(n){return n.instantiationMode==="EAGER"}class oM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const aM={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},lM=ut.INFO,uM={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},cM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=uM[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L_{constructor(e){this.name=e,this._logLevel=lM,this._logHandler=cM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const dM=(n,e)=>e.some(t=>n instanceof t);let iS,sS;function hM(){return iS||(iS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fM(){return sS||(sS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,wv=new WeakMap,sb=new WeakMap,xy=new WeakMap,F_=new WeakMap;function pM(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(wo(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&ib.set(t,n)}).catch(()=>{}),F_.set(e,n),e}function mM(n){if(wv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});wv.set(n,e)}let Ev={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gM(n){Ev=n(Ev)}function yM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ry(this),e,...t);return sb.set(r,e.sort?e.sort():[e]),wo(r)}:fM().includes(n)?function(...e){return n.apply(Ry(this),e),wo(ib.get(this))}:function(...e){return wo(n.apply(Ry(this),e))}}function vM(n){return typeof n=="function"?yM(n):(n instanceof IDBTransaction&&mM(n),dM(n,hM())?new Proxy(n,Ev):n)}function wo(n){if(n instanceof IDBRequest)return pM(n);if(xy.has(n))return xy.get(n);const e=vM(n);return e!==n&&(xy.set(n,e),F_.set(e,n)),e}const Ry=n=>F_.get(n);function _M(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=wo(a);return r&&a.addEventListener("upgradeneeded",c=>{r(wo(a.result),c.oldVersion,c.newVersion,wo(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const wM=["get","getKey","getAll","getAllKeys","count"],EM=["put","add","delete","clear"],Dy=new Map;function oS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dy.get(e))return Dy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=EM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wM.includes(t)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&c.done]))[0]};return Dy.set(e,s),s}gM(n=>({...n,get:(e,t,r)=>oS(e,t)||n.get(e,t,r),has:(e,t)=>!!oS(e,t)||n.has(e,t)}));class TM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function SM(n){return n.getComponent()?.type==="VERSION"}const Tv="@firebase/app",aS="0.14.6";const _s=new L_("@firebase/app"),IM="@firebase/app-compat",CM="@firebase/analytics-compat",PM="@firebase/analytics",bM="@firebase/app-check-compat",AM="@firebase/app-check",xM="@firebase/auth",RM="@firebase/auth-compat",DM="@firebase/database",kM="@firebase/data-connect",NM="@firebase/database-compat",VM="@firebase/functions",MM="@firebase/functions-compat",OM="@firebase/installations",LM="@firebase/installations-compat",FM="@firebase/messaging",UM="@firebase/messaging-compat",jM="@firebase/performance",BM="@firebase/performance-compat",$M="@firebase/remote-config",zM="@firebase/remote-config-compat",WM="@firebase/storage",HM="@firebase/storage-compat",qM="@firebase/firestore",GM="@firebase/ai",KM="@firebase/firestore-compat",QM="firebase",YM="12.6.0";const Sv="[DEFAULT]",XM={[Tv]:"fire-core",[IM]:"fire-core-compat",[PM]:"fire-analytics",[CM]:"fire-analytics-compat",[AM]:"fire-app-check",[bM]:"fire-app-check-compat",[xM]:"fire-auth",[RM]:"fire-auth-compat",[DM]:"fire-rtdb",[kM]:"fire-data-connect",[NM]:"fire-rtdb-compat",[VM]:"fire-fn",[MM]:"fire-fn-compat",[OM]:"fire-iid",[LM]:"fire-iid-compat",[FM]:"fire-fcm",[UM]:"fire-fcm-compat",[jM]:"fire-perf",[BM]:"fire-perf-compat",[$M]:"fire-rc",[zM]:"fire-rc-compat",[WM]:"fire-gcs",[HM]:"fire-gcs-compat",[qM]:"fire-fst",[KM]:"fire-fst-compat",[GM]:"fire-vertex","fire-js":"fire-js",[QM]:"fire-js-all"};const _p=new Map,JM=new Map,Iv=new Map;function lS(n,e){try{n.container.addComponent(e)}catch(t){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $a(n){const e=n.name;if(Iv.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;Iv.set(e,n);for(const t of _p.values())lS(t,n);for(const t of JM.values())lS(t,n);return!0}function mm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ir(n){return n==null?!1:n.settings!==void 0}const ZM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new Gd("app","Firebase",ZM);class eO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}const Wu=YM;function ob(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Sv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Eo.create("bad-app-name",{appName:String(i)});if(t||(t=JP()),!t)throw Eo.create("no-options");const s=_p.get(i);if(s){if(Ba(t,s.options)&&Ba(r,s.config))return s;throw Eo.create("duplicate-app",{appName:i})}const a=new oM(i);for(const c of Iv.values())a.addComponent(c);const u=new eO(t,r,a);return _p.set(i,u),u}function U_(n=Sv){const e=_p.get(n);if(!e&&n===Sv&&JP())return ob();if(!e)throw Eo.create("no-app",{appName:n});return e}function Vi(n,e,t){let r=XM[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(a.join(" "));return}$a(new xo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const tO="firebase-heartbeat-database",nO=1,bd="firebase-heartbeat-store";let ky=null;function ab(){return ky||(ky=_M(tO,nO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Eo.create("idb-open",{originalErrorMessage:n.message})})),ky}async function rO(n){try{const t=(await ab()).transaction(bd),r=await t.objectStore(bd).get(lb(n));return await t.done,r}catch(e){if(e instanceof zi)_s.warn(e.message);else{const t=Eo.create("idb-get",{originalErrorMessage:e?.message});_s.warn(t.message)}}}async function uS(n,e){try{const r=(await ab()).transaction(bd,"readwrite");await r.objectStore(bd).put(e,lb(n)),await r.done}catch(t){if(t instanceof zi)_s.warn(t.message);else{const r=Eo.create("idb-set",{originalErrorMessage:t?.message});_s.warn(r.message)}}}function lb(n){return`${n.name}!${n.options.appId}`}const iO=1024,sO=30;class oO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>sO){const i=uO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cS(),{heartbeatsToSend:t,unsentEntries:r}=aO(this._heartbeatsCache.heartbeats),i=vp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return _s.warn(e),""}}}function cS(){return new Date().toISOString().substring(0,10)}function aO(n,e=iO){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),dS(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class lO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rb()?QV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dS(n){return vp(JSON.stringify({version:2,heartbeats:n})).length}function uO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function cO(n){$a(new xo("platform-logger",e=>new TM(e),"PRIVATE")),$a(new xo("heartbeat",e=>new oO(e),"PRIVATE")),Vi(Tv,aS,n),Vi(Tv,aS,"esm2020"),Vi("fire-js","")}cO("");var dO="firebase",hO="12.7.0";Vi(dO,hO,"app");var hS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var To,ub;(function(){var n;function e(x,S){function k(){}k.prototype=S.prototype,x.F=S.prototype,x.prototype=new k,x.prototype.constructor=x,x.D=function(O,M,U){for(var V=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)V[ie-2]=arguments[ie];return S.prototype[M].apply(O,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,S,k){k||(k=0);const O=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)O[M]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(M=0;M<16;++M)O[M]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=x.g[0],k=x.g[1],M=x.g[2];let U=x.g[3],V;V=S+(U^k&(M^U))+O[0]+3614090360&4294967295,S=k+(V<<7&4294967295|V>>>25),V=U+(M^S&(k^M))+O[1]+3905402710&4294967295,U=S+(V<<12&4294967295|V>>>20),V=M+(k^U&(S^k))+O[2]+606105819&4294967295,M=U+(V<<17&4294967295|V>>>15),V=k+(S^M&(U^S))+O[3]+3250441966&4294967295,k=M+(V<<22&4294967295|V>>>10),V=S+(U^k&(M^U))+O[4]+4118548399&4294967295,S=k+(V<<7&4294967295|V>>>25),V=U+(M^S&(k^M))+O[5]+1200080426&4294967295,U=S+(V<<12&4294967295|V>>>20),V=M+(k^U&(S^k))+O[6]+2821735955&4294967295,M=U+(V<<17&4294967295|V>>>15),V=k+(S^M&(U^S))+O[7]+4249261313&4294967295,k=M+(V<<22&4294967295|V>>>10),V=S+(U^k&(M^U))+O[8]+1770035416&4294967295,S=k+(V<<7&4294967295|V>>>25),V=U+(M^S&(k^M))+O[9]+2336552879&4294967295,U=S+(V<<12&4294967295|V>>>20),V=M+(k^U&(S^k))+O[10]+4294925233&4294967295,M=U+(V<<17&4294967295|V>>>15),V=k+(S^M&(U^S))+O[11]+2304563134&4294967295,k=M+(V<<22&4294967295|V>>>10),V=S+(U^k&(M^U))+O[12]+1804603682&4294967295,S=k+(V<<7&4294967295|V>>>25),V=U+(M^S&(k^M))+O[13]+4254626195&4294967295,U=S+(V<<12&4294967295|V>>>20),V=M+(k^U&(S^k))+O[14]+2792965006&4294967295,M=U+(V<<17&4294967295|V>>>15),V=k+(S^M&(U^S))+O[15]+1236535329&4294967295,k=M+(V<<22&4294967295|V>>>10),V=S+(M^U&(k^M))+O[1]+4129170786&4294967295,S=k+(V<<5&4294967295|V>>>27),V=U+(k^M&(S^k))+O[6]+3225465664&4294967295,U=S+(V<<9&4294967295|V>>>23),V=M+(S^k&(U^S))+O[11]+643717713&4294967295,M=U+(V<<14&4294967295|V>>>18),V=k+(U^S&(M^U))+O[0]+3921069994&4294967295,k=M+(V<<20&4294967295|V>>>12),V=S+(M^U&(k^M))+O[5]+3593408605&4294967295,S=k+(V<<5&4294967295|V>>>27),V=U+(k^M&(S^k))+O[10]+38016083&4294967295,U=S+(V<<9&4294967295|V>>>23),V=M+(S^k&(U^S))+O[15]+3634488961&4294967295,M=U+(V<<14&4294967295|V>>>18),V=k+(U^S&(M^U))+O[4]+3889429448&4294967295,k=M+(V<<20&4294967295|V>>>12),V=S+(M^U&(k^M))+O[9]+568446438&4294967295,S=k+(V<<5&4294967295|V>>>27),V=U+(k^M&(S^k))+O[14]+3275163606&4294967295,U=S+(V<<9&4294967295|V>>>23),V=M+(S^k&(U^S))+O[3]+4107603335&4294967295,M=U+(V<<14&4294967295|V>>>18),V=k+(U^S&(M^U))+O[8]+1163531501&4294967295,k=M+(V<<20&4294967295|V>>>12),V=S+(M^U&(k^M))+O[13]+2850285829&4294967295,S=k+(V<<5&4294967295|V>>>27),V=U+(k^M&(S^k))+O[2]+4243563512&4294967295,U=S+(V<<9&4294967295|V>>>23),V=M+(S^k&(U^S))+O[7]+1735328473&4294967295,M=U+(V<<14&4294967295|V>>>18),V=k+(U^S&(M^U))+O[12]+2368359562&4294967295,k=M+(V<<20&4294967295|V>>>12),V=S+(k^M^U)+O[5]+4294588738&4294967295,S=k+(V<<4&4294967295|V>>>28),V=U+(S^k^M)+O[8]+2272392833&4294967295,U=S+(V<<11&4294967295|V>>>21),V=M+(U^S^k)+O[11]+1839030562&4294967295,M=U+(V<<16&4294967295|V>>>16),V=k+(M^U^S)+O[14]+4259657740&4294967295,k=M+(V<<23&4294967295|V>>>9),V=S+(k^M^U)+O[1]+2763975236&4294967295,S=k+(V<<4&4294967295|V>>>28),V=U+(S^k^M)+O[4]+1272893353&4294967295,U=S+(V<<11&4294967295|V>>>21),V=M+(U^S^k)+O[7]+4139469664&4294967295,M=U+(V<<16&4294967295|V>>>16),V=k+(M^U^S)+O[10]+3200236656&4294967295,k=M+(V<<23&4294967295|V>>>9),V=S+(k^M^U)+O[13]+681279174&4294967295,S=k+(V<<4&4294967295|V>>>28),V=U+(S^k^M)+O[0]+3936430074&4294967295,U=S+(V<<11&4294967295|V>>>21),V=M+(U^S^k)+O[3]+3572445317&4294967295,M=U+(V<<16&4294967295|V>>>16),V=k+(M^U^S)+O[6]+76029189&4294967295,k=M+(V<<23&4294967295|V>>>9),V=S+(k^M^U)+O[9]+3654602809&4294967295,S=k+(V<<4&4294967295|V>>>28),V=U+(S^k^M)+O[12]+3873151461&4294967295,U=S+(V<<11&4294967295|V>>>21),V=M+(U^S^k)+O[15]+530742520&4294967295,M=U+(V<<16&4294967295|V>>>16),V=k+(M^U^S)+O[2]+3299628645&4294967295,k=M+(V<<23&4294967295|V>>>9),V=S+(M^(k|~U))+O[0]+4096336452&4294967295,S=k+(V<<6&4294967295|V>>>26),V=U+(k^(S|~M))+O[7]+1126891415&4294967295,U=S+(V<<10&4294967295|V>>>22),V=M+(S^(U|~k))+O[14]+2878612391&4294967295,M=U+(V<<15&4294967295|V>>>17),V=k+(U^(M|~S))+O[5]+4237533241&4294967295,k=M+(V<<21&4294967295|V>>>11),V=S+(M^(k|~U))+O[12]+1700485571&4294967295,S=k+(V<<6&4294967295|V>>>26),V=U+(k^(S|~M))+O[3]+2399980690&4294967295,U=S+(V<<10&4294967295|V>>>22),V=M+(S^(U|~k))+O[10]+4293915773&4294967295,M=U+(V<<15&4294967295|V>>>17),V=k+(U^(M|~S))+O[1]+2240044497&4294967295,k=M+(V<<21&4294967295|V>>>11),V=S+(M^(k|~U))+O[8]+1873313359&4294967295,S=k+(V<<6&4294967295|V>>>26),V=U+(k^(S|~M))+O[15]+4264355552&4294967295,U=S+(V<<10&4294967295|V>>>22),V=M+(S^(U|~k))+O[6]+2734768916&4294967295,M=U+(V<<15&4294967295|V>>>17),V=k+(U^(M|~S))+O[13]+1309151649&4294967295,k=M+(V<<21&4294967295|V>>>11),V=S+(M^(k|~U))+O[4]+4149444226&4294967295,S=k+(V<<6&4294967295|V>>>26),V=U+(k^(S|~M))+O[11]+3174756917&4294967295,U=S+(V<<10&4294967295|V>>>22),V=M+(S^(U|~k))+O[2]+718787259&4294967295,M=U+(V<<15&4294967295|V>>>17),V=k+(U^(M|~S))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(M+(V<<21&4294967295|V>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+U&4294967295}r.prototype.v=function(x,S){S===void 0&&(S=x.length);const k=S-this.blockSize,O=this.C;let M=this.h,U=0;for(;U<S;){if(M==0)for(;U<=k;)i(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<S;)if(O[M++]=x.charCodeAt(U++),M==this.blockSize){i(this,O),M=0;break}}else for(;U<S;)if(O[M++]=x[U++],M==this.blockSize){i(this,O),M=0;break}}this.h=M,this.o+=S},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;S=this.o*8;for(var k=x.length-8;k<x.length;++k)x[k]=S&255,S/=256;for(this.v(x),x=Array(16),S=0,k=0;k<4;++k)for(let O=0;O<32;O+=8)x[S++]=this.g[k]>>>O&255;return x};function s(x,S){var k=u;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=S(x)}function a(x,S){this.h=S;const k=[];let O=!0;for(let M=x.length-1;M>=0;M--){const U=x[M]|0;O&&U==S||(k[M]=U,O=!1)}this.g=k}var u={};function c(x){return-128<=x&&x<128?s(x,function(S){return new a([S|0],S<0?-1:0)}):new a([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return g;if(x<0)return P(h(-x));const S=[];let k=1;for(let O=0;x>=k;O++)S[O]=x/k|0,k*=4294967296;return new a(S,0)}function m(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return P(m(x.substring(1),S));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(S,8));let O=g;for(let U=0;U<x.length;U+=8){var M=Math.min(8,x.length-U);const V=parseInt(x.substring(U,U+M),S);M<8?(M=h(Math.pow(S,M)),O=O.j(M).add(h(V))):(O=O.j(k),O=O.add(h(V)))}return O}var g=c(0),v=c(1),E=c(16777216);n=a.prototype,n.m=function(){if(b(this))return-P(this).m();let x=0,S=1;for(let k=0;k<this.g.length;k++){const O=this.i(k);x+=(O>=0?O:4294967296+O)*S,S*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(b(this))return"-"+P(this).toString(x);const S=h(Math.pow(x,6));var k=this;let O="";for(;;){const M=j(k,S).g;k=L(k,M.j(S));let U=((k.g.length>0?k.g[0]:k.h)>>>0).toString(x);if(k=M,I(k))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function I(x){if(x.h!=0)return!1;for(let S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function b(x){return x.h==-1}n.l=function(x){return x=L(this,x),b(x)?-1:I(x)?0:1};function P(x){const S=x.g.length,k=[];for(let O=0;O<S;O++)k[O]=~x.g[O];return new a(k,~x.h).add(v)}n.abs=function(){return b(this)?P(this):this},n.add=function(x){const S=Math.max(this.g.length,x.g.length),k=[];let O=0;for(let M=0;M<=S;M++){let U=O+(this.i(M)&65535)+(x.i(M)&65535),V=(U>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);O=V>>>16,U&=65535,V&=65535,k[M]=V<<16|U}return new a(k,k[k.length-1]&-2147483648?-1:0)};function L(x,S){return x.add(P(S))}n.j=function(x){if(I(this)||I(x))return g;if(b(this))return b(x)?P(this).j(P(x)):P(P(this).j(x));if(b(x))return P(this.j(P(x)));if(this.l(E)<0&&x.l(E)<0)return h(this.m()*x.m());const S=this.g.length+x.g.length,k=[];for(var O=0;O<2*S;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(let M=0;M<x.g.length;M++){const U=this.i(O)>>>16,V=this.i(O)&65535,ie=x.i(M)>>>16,Ie=x.i(M)&65535;k[2*O+2*M]+=V*Ie,D(k,2*O+2*M),k[2*O+2*M+1]+=U*Ie,D(k,2*O+2*M+1),k[2*O+2*M+1]+=V*ie,D(k,2*O+2*M+1),k[2*O+2*M+2]+=U*ie,D(k,2*O+2*M+2)}for(x=0;x<S;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=S;x<2*S;x++)k[x]=0;return new a(k,0)};function D(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function A(x,S){this.g=x,this.h=S}function j(x,S){if(I(S))throw Error("division by zero");if(I(x))return new A(g,g);if(b(x))return S=j(P(x),S),new A(P(S.g),P(S.h));if(b(S))return S=j(x,P(S)),new A(P(S.g),S.h);if(x.g.length>30){if(b(x)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var k=v,O=S;O.l(x)<=0;)k=H(k),O=H(O);var M=Y(k,1),U=Y(O,1);for(O=Y(O,2),k=Y(k,2);!I(O);){var V=U.add(O);V.l(x)<=0&&(M=M.add(k),U=V),O=Y(O,1),k=Y(k,1)}return S=L(x,M.j(S)),new A(M,S)}for(M=g;x.l(S)>=0;){for(k=Math.max(1,Math.floor(x.m()/S.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=h(k),V=U.j(S);b(V)||V.l(x)>0;)k-=O,U=h(k),V=U.j(S);I(U)&&(U=v),M=M.add(U),x=L(x,V)}return new A(M,x)}n.B=function(x){return j(this,x).h},n.and=function(x){const S=Math.max(this.g.length,x.g.length),k=[];for(let O=0;O<S;O++)k[O]=this.i(O)&x.i(O);return new a(k,this.h&x.h)},n.or=function(x){const S=Math.max(this.g.length,x.g.length),k=[];for(let O=0;O<S;O++)k[O]=this.i(O)|x.i(O);return new a(k,this.h|x.h)},n.xor=function(x){const S=Math.max(this.g.length,x.g.length),k=[];for(let O=0;O<S;O++)k[O]=this.i(O)^x.i(O);return new a(k,this.h^x.h)};function H(x){const S=x.g.length+1,k=[];for(let O=0;O<S;O++)k[O]=x.i(O)<<1|x.i(O-1)>>>31;return new a(k,x.h)}function Y(x,S){const k=S>>5;S%=32;const O=x.g.length-k,M=[];for(let U=0;U<O;U++)M[U]=S>0?x.i(U+k)>>>S|x.i(U+k+1)<<32-S:x.i(U+k);return new a(M,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ub=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,To=a}).apply(typeof hS<"u"?hS:typeof self<"u"?self:typeof window<"u"?window:{});var Rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cb,id,db,Yf,Cv,hb,fb,pb;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rf=="object"&&Rf];for(var w=0;w<f.length;++w){var T=f[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(f,w){if(w)e:{var T=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var K=f[N];if(!(K in T))break e;T=T[K]}f=f[f.length-1],N=T[f],w=w(N),w!=N&&w!=null&&e(T,f,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(w){var T=[],N;for(N in w)Object.prototype.hasOwnProperty.call(w,N)&&T.push([N,w[N]]);return T}});var s=s||{},a=this||self;function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function c(f,w,T){return f.call.apply(f.bind,arguments)}function h(f,w,T){return h=c,h.apply(null,arguments)}function m(f,w){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function g(f,w){function T(){}T.prototype=w.prototype,f.Z=w.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(N,K,Z){for(var ye=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ye[nt-2]=arguments[nt];return w.prototype[K].apply(N,ye)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const w=f.length;if(w>0){const T=Array(w);for(let N=0;N<w;N++)T[N]=f[N];return T}return[]}function I(f,w){for(let N=1;N<arguments.length;N++){const K=arguments[N];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=f.length||0;const Z=K.length||0;f.length=T+Z;for(let ye=0;ye<Z;ye++)f[T+ye]=K[ye]}else f.push(K)}}class b{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function P(f){a.setTimeout(()=>{throw f},0)}function L(){var f=x;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class D{constructor(){this.h=this.g=null}add(w,T){const N=A.get();N.set(w,T),this.h?this.h.next=N:this.g=N,this.h=N}}var A=new b(()=>new j,f=>f.reset());class j{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let H,Y=!1,x=new D,S=()=>{const f=Promise.resolve(void 0);H=()=>{f.then(k)}};function k(){for(var f;f=L();){try{f.h.call(f.g)}catch(T){P(T)}var w=A;w.j(f),w.h<100&&(w.h++,f.next=w.g,w.g=f)}Y=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};a.addEventListener("test",T,w),a.removeEventListener("test",T,w)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function ie(f,w){M.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,w)}g(ie,M),ie.prototype.init=function(f,w){const T=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget,w||(T=="mouseover"?w=f.fromElement:T=="mouseout"&&(w=f.toElement)),this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),Ce=0;function je(f,w,T,N,K){this.listener=f,this.proxy=null,this.src=w,this.type=T,this.capture=!!N,this.ha=K,this.key=++Ce,this.da=this.fa=!1}function se(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function _e(f,w,T){for(const N in f)w.call(T,f[N],N,f)}function ue(f,w){for(const T in f)w.call(void 0,f[T],T,f)}function B(f){const w={};for(const T in f)w[T]=f[T];return w}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(f,w){let T,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(T in N)f[T]=N[T];for(let Z=0;Z<ee.length;Z++)T=ee[Z],Object.prototype.hasOwnProperty.call(N,T)&&(f[T]=N[T])}}function Te(f){this.src=f,this.g={},this.h=0}Te.prototype.add=function(f,w,T,N,K){const Z=f.toString();f=this.g[Z],f||(f=this.g[Z]=[],this.h++);const ye=Me(f,w,N,K);return ye>-1?(w=f[ye],T||(w.fa=!1)):(w=new je(w,this.src,Z,!!N,K),w.fa=T,f.push(w)),w};function Ee(f,w){const T=w.type;if(T in f.g){var N=f.g[T],K=Array.prototype.indexOf.call(N,w,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(N,K,1),Z&&(se(w),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Me(f,w,T,N){for(let K=0;K<f.length;++K){const Z=f[K];if(!Z.da&&Z.listener==w&&Z.capture==!!T&&Z.ha==N)return K}return-1}var tt="closure_lm_"+(Math.random()*1e6|0),rt={};function at(f,w,T,N,K){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)at(f,w[Z],T,N,K);return null}return T=he(T),f&&f[Ie]?f.J(w,T,u(N)?!!N.capture:!1,K):kt(f,w,T,!1,N,K)}function kt(f,w,T,N,K,Z){if(!w)throw Error("Invalid event type");const ye=u(K)?!!K.capture:!!K;let nt=de(f);if(nt||(f[tt]=nt=new Te(f)),T=nt.add(w,T,N,ye,Z),T.proxy)return T;if(N=gn(),T.proxy=N,N.src=f,N.listener=T,f.addEventListener)U||(K=ye),K===void 0&&(K=!1),f.addEventListener(w.toString(),N,K);else if(f.attachEvent)f.attachEvent(J(w.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function gn(){function f(T){return w.call(f.src,f.listener,T)}const w=ne;return f}function Ds(f,w,T,N,K){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)Ds(f,w[Z],T,N,K);else N=u(N)?!!N.capture:!!N,T=he(T),f&&f[Ie]?(f=f.i,Z=String(w).toString(),Z in f.g&&(w=f.g[Z],T=Me(w,T,N,K),T>-1&&(se(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete f.g[Z],f.h--)))):f&&(f=de(f))&&(w=f.g[w.toString()],f=-1,w&&(f=Me(w,T,N,K)),(T=f>-1?w[f]:null)&&oi(T))}function oi(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[Ie])Ee(w.i,f);else{var T=f.type,N=f.proxy;w.removeEventListener?w.removeEventListener(T,N,f.capture):w.detachEvent?w.detachEvent(J(T),N):w.addListener&&w.removeListener&&w.removeListener(N),(T=de(w))?(Ee(T,f),T.h==0&&(T.src=null,w[tt]=null)):se(f)}}}function J(f){return f in rt?rt[f]:rt[f]="on"+f}function ne(f,w){if(f.da)f=!0;else{w=new ie(w,this);const T=f.listener,N=f.ha||f.src;f.fa&&oi(f),f=T.call(N,w)}return f}function de(f){return f=f[tt],f instanceof Te?f:null}var ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function he(f){return typeof f=="function"?f:(f[ve]||(f[ve]=function(w){return f.handleEvent(w)}),f[ve])}function pe(){O.call(this),this.i=new Te(this),this.M=this,this.G=null}g(pe,O),pe.prototype[Ie]=!0,pe.prototype.removeEventListener=function(f,w,T,N){Ds(this,f,w,T,N)};function Ae(f,w){var T,N=f.G;if(N)for(T=[];N;N=N.G)T.push(N);if(f=f.M,N=w.type||w,typeof w=="string")w=new M(w,f);else if(w instanceof M)w.target=w.target||f;else{var K=w;w=new M(N,f),we(w,K)}K=!0;let Z,ye;if(T)for(ye=T.length-1;ye>=0;ye--)Z=w.g=T[ye],K=Ke(Z,N,!0,w)&&K;if(Z=w.g=f,K=Ke(Z,N,!0,w)&&K,K=Ke(Z,N,!1,w)&&K,T)for(ye=0;ye<T.length;ye++)Z=w.g=T[ye],K=Ke(Z,N,!1,w)&&K}pe.prototype.N=function(){if(pe.Z.N.call(this),this.i){var f=this.i;for(const w in f.g){const T=f.g[w];for(let N=0;N<T.length;N++)se(T[N]);delete f.g[w],f.h--}}this.G=null},pe.prototype.J=function(f,w,T,N){return this.i.add(String(f),w,!1,T,N)},pe.prototype.K=function(f,w,T,N){return this.i.add(String(f),w,!0,T,N)};function Ke(f,w,T,N){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();let K=!0;for(let Z=0;Z<w.length;++Z){const ye=w[Z];if(ye&&!ye.da&&ye.capture==T){const nt=ye.listener,nn=ye.ha||ye.src;ye.fa&&Ee(f.i,ye),K=nt.call(nn,N)!==!1&&K}}return K&&!N.defaultPrevented}function Ue(f,w){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(f,w||0)}function Ge(f){f.g=Ue(()=>{f.g=null,f.i&&(f.i=!1,Ge(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class gt extends O{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(f){O.call(this),this.h=f,this.g={}}g(ot,O);var Ot=[];function ur(f){_e(f.g,function(w,T){this.g.hasOwnProperty(T)&&oi(w)},f),f.g={}}ot.prototype.N=function(){ot.Z.N.call(this),ur(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=a.JSON.stringify,qo=a.JSON.parse,qi=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function jr(){}function cl(){}var Pr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ks(){M.call(this,"d")}g(ks,M);function Go(){M.call(this,"c")}g(Go,M);var cr={},Br=null;function ai(){return Br=Br||new pe}cr.Ia="serverreachability";function Gi(f){M.call(this,cr.Ia,f)}g(Gi,M);function br(f){const w=ai();Ae(w,new Gi(w))}cr.STAT_EVENT="statevent";function Ar(f,w){M.call(this,cr.STAT_EVENT,f),this.stat=w}g(Ar,M);function $t(f){const w=ai();Ae(w,new Ar(w,f))}cr.Ja="timingevent";function Ko(f,w){M.call(this,cr.Ja,f),this.size=w}g(Ko,M);function li(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},w)}function ui(){this.g=!0}ui.prototype.ua=function(){this.g=!1};function ci(f,w,T,N,K,Z){f.info(function(){if(f.g)if(Z){var ye="",nt=Z.split("&");for(let Ct=0;Ct<nt.length;Ct++){var nn=nt[Ct].split("=");if(nn.length>1){const cn=nn[0];nn=nn[1];const gr=cn.split("_");ye=gr.length>=2&&gr[1]=="type"?ye+(cn+"="+nn+"&"):ye+(cn+"=redacted&")}}}else ye=null;else ye=Z;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+w+`
`+T+`
`+ye})}function Ns(f,w,T,N,K,Z,ye){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+w+`
`+T+`
`+Z+" "+ye})}function ht(f,w,T,N){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ki(f,T)+(N?" "+N:"")})}function dl(f,w){f.info(function(){return"TIMEOUT: "+w})}ui.prototype.info=function(){};function Ki(f,w){if(!f.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(f=0;f<Z.length;f++)if(Array.isArray(Z[f])){var T=Z[f];if(!(T.length<2)){var N=T[1];if(Array.isArray(N)&&!(N.length<1)){var K=N[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ye=1;ye<N.length;ye++)N[ye]=""}}}}return An(Z)}catch{return w}}var Vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ms={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wh;function Qi(){}g(Qi,jr),Qi.prototype.g=function(){return new XMLHttpRequest},wh=new Qi;function di(f){return encodeURIComponent(String(f))}function hl(f){var w=1;f=f.split(":");const T=[];for(;w>0&&f.length;)T.push(f.shift()),w--;return f.length&&T.push(f.join(":")),T}function xr(f,w,T,N){this.j=f,this.i=w,this.l=T,this.S=N||1,this.V=new ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Eh}function Eh(){this.i=null,this.g="",this.h=!1}var Th={},nc={};function $r(f,w,T){f.M=1,f.A=Xi(Rr(w)),f.u=T,f.R=!0,rc(f,null)}function rc(f,w){f.F=Date.now(),Qo(f),f.B=Rr(f.A);var T=f.B,N=f.S;Array.isArray(N)||(N=[String(N)]),fc(T.i,"t",N),f.C=0,T=f.j.L,f.h=new Eh,f.g=kh(f.j,T?w:null,!f.u),f.P>0&&(f.O=new gt(h(f.Y,f,f.g),f.P)),w=f.V,T=f.g,N=f.ba;var K="readystatechange";Array.isArray(K)||(K&&(Ot[0]=K.toString()),K=Ot);for(let Z=0;Z<K.length;Z++){const ye=at(T,K[Z],N||w.handleEvent,!1,w.h||w);if(!ye)break;w.g[ye.key]=ye}w=f.J?B(f.J):{},f.u?(f.v||(f.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,w)):(f.v="GET",f.g.ea(f.B,f.v,null,w)),br(),ci(f.i,f.v,f.B,f.l,f.S,f.u)}xr.prototype.ba=function(f){f=f.target;const w=this.O;w&&vi(f)==3?w.j():this.Y(f)},xr.prototype.Y=function(f){try{if(f==this.g)e:{const nt=vi(this.g),nn=this.g.ya(),Ct=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Rh(this.g)))){this.K||nt!=4||nn==7||(nn==8||Ct<=0?br(3):br(2)),fl(this);var w=this.g.ca();this.X=w;var T=Sh(this);if(this.o=w==200,Ns(this.i,this.v,this.B,this.l,this.S,nt,w),this.o){if(this.U&&!this.L){t:{if(this.g){var N,K=this.g;if((N=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(N)){var Z=N;break t}}Z=null}if(f=Z)ht(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lt(this,f);else{this.o=!1,this.m=3,$t(12),Yi(this),Yo(this);break e}}if(this.R){f=!0;let cn;for(;!this.K&&this.C<T.length;)if(cn=Ch(this,T),cn==nc){nt==4&&(this.m=4,$t(14),f=!1),ht(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==Th){this.m=4,$t(15),ht(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else ht(this.i,this.l,cn,null),Lt(this,cn);if(Ih(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||T.length!=0||this.h.h||(this.m=1,$t(16),f=!1),this.o=this.o&&f,!f)ht(this.i,this.l,T,"[Invalid Chunked Response]"),Yi(this),Yo(this);else if(T.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),sa(ye),ye.P=!0,$t(11))}}else ht(this.i,this.l,T,null),Lt(this,T);nt==4&&Yi(this),this.o&&!this.K&&(nt==4?Sl(this.j,this):(this.o=!1,Qo(this)))}else mc(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),Yi(this),Yo(this)}}}catch{}};function Sh(f){if(!Ih(f))return f.g.la();const w=Rh(f.g);if(w==="")return"";let T="";const N=w.length,K=vi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Yi(f),Yo(f),"";f.h.i=new a.TextDecoder}for(let Z=0;Z<N;Z++)f.h.h=!0,T+=f.h.i.decode(w[Z],{stream:!(K&&Z==N-1)});return w.length=0,f.h.g+=T,f.C=0,f.h.g}function Ih(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ch(f,w){var T=f.C,N=w.indexOf(`
`,T);return N==-1?nc:(T=Number(w.substring(T,N)),isNaN(T)?Th:(N+=1,N+T>w.length?nc:(w=w.slice(N,N+T),f.C=N+T,w)))}xr.prototype.cancel=function(){this.K=!0,Yi(this)};function Qo(f){f.T=Date.now()+f.H,ic(f,f.H)}function ic(f,w){if(f.D!=null)throw Error("WatchDog timer not null");f.D=li(h(f.aa,f),w)}function fl(f){f.D&&(a.clearTimeout(f.D),f.D=null)}xr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(dl(this.i,this.B),this.M!=2&&(br(),$t(17)),Yi(this),this.m=2,Yo(this)):ic(this,this.T-f)};function Yo(f){f.j.I==0||f.K||Sl(f.j,f)}function Yi(f){fl(f);var w=f.O;w&&typeof w.dispose=="function"&&w.dispose(),f.O=null,ur(f.V),f.g&&(w=f.g,f.g=null,w.abort(),w.dispose())}function Lt(f,w){try{var T=f.j;if(T.I!=0&&(T.g==f||oc(T.h,f))){if(!f.L&&oc(T.h,f)&&T.I==3){try{var N=T.Ba.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)Tl(T),pr(T);else break e;Ei(T),$t(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=li(h(T.Va,T),6e3));Xo(T.h)<=1&&T.ta&&(T.ta=void 0)}else mr(T,11)}else if((f.L||T.g==f)&&Tl(T),!V(w))for(K=T.Ba.g.parse(w),w=0;w<K.length;w++){let Ct=K[w];const cn=Ct[0];if(!(cn<=T.K))if(T.K=cn,Ct=Ct[1],T.I==2)if(Ct[0]=="c"){T.M=Ct[1],T.ba=Ct[2];const gr=Ct[3];gr!=null&&(T.ka=gr,T.j.info("VER="+T.ka));const ns=Ct[4];ns!=null&&(T.za=ns,T.j.info("SVER="+T.za));const Ti=Ct[5];Ti!=null&&typeof Ti=="number"&&Ti>0&&(N=1.5*Ti,T.O=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Si=f.g;if(Si){const Pl=Si.g?Si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pl){var Z=N.h;Z.g||Pl.indexOf("spdy")==-1&&Pl.indexOf("quic")==-1&&Pl.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ml(Z,Z.h),Z.h=null))}if(N.G){const vc=Si.g?Si.g.getResponseHeader("X-HTTP-Session-Id"):null;vc&&(N.wa=vc,Tt(N.J,N.G,vc))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),N=T;var ye=f;if(N.na=yc(N,N.L?N.ba:null,N.W),ye.L){Jo(N.h,ye);var nt=ye,nn=N.O;nn&&(nt.H=nn),nt.D&&(fl(nt),Qo(nt)),N.g=ye}else Vn(N);T.i.length>0&&ts(T)}else Ct[0]!="stop"&&Ct[0]!="close"||mr(T,7);else T.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?mr(T,7):wl(T):Ct[0]!="noop"&&T.l&&T.l.qa(Ct),T.A=0)}}br(4)}catch{}}var Zm=class{constructor(f,w){this.g=f,this.map=w}};function pl(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Xo(f){return f.h?1:f.g?f.g.size:0}function oc(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function ml(f,w){f.g?f.g.add(w):f.h=w}function Jo(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}pl.prototype.cancel=function(){if(this.i=dr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function dr(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const T of f.g.values())w=w.concat(T.G);return w}return E(f.i)}var Ph=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hr(f,w){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const N=f[T].indexOf("=");let K,Z=null;N>=0?(K=f[T].substring(0,N),Z=f[T].substring(N+1)):K=f[T],w(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function hi(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;f instanceof hi?(this.l=f.l,Zo(this,f.j),this.o=f.o,this.g=f.g,fi(this,f.u),this.h=f.h,Os(this,pc(f.i)),this.m=f.m):f&&(w=String(f).match(Ph))?(this.l=!1,Zo(this,w[1]||"",!0),this.o=ea(w[2]||""),this.g=ea(w[3]||"",!0),fi(this,w[4]),this.h=ea(w[5]||"",!0),Os(this,w[6]||"",!0),this.m=ea(w[7]||"")):(this.l=!1,this.i=new ft(null,this.l))}hi.prototype.toString=function(){const f=[];var w=this.j;w&&f.push(ta(w,lc,!0),":");var T=this.g;return(T||w=="file")&&(f.push("//"),(w=this.o)&&f.push(ta(w,lc,!0),"@"),f.push(di(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(ta(T,T.charAt(0)=="/"?na:uc,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",ta(T,cc)),f.join("")},hi.prototype.resolve=function(f){const w=Rr(this);let T=!!f.j;T?Zo(w,f.j):T=!!f.o,T?w.o=f.o:T=!!f.g,T?w.g=f.g:T=f.u!=null;var N=f.h;if(T)fi(w,f.u);else if(T=!!f.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var K=w.h.lastIndexOf("/");K!=-1&&(N=w.h.slice(0,K+1)+N)}if(K=N,K==".."||K==".")N="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){N=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let ye=0;ye<K.length;){const nt=K[ye++];nt=="."?N&&ye==K.length&&Z.push(""):nt==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&ye==K.length&&Z.push("")):(Z.push(nt),N=!0)}N=Z.join("/")}else N=K}return T?w.h=N:T=f.i.toString()!=="",T?Os(w,pc(f.i)):T=!!f.m,T&&(w.m=f.m),w};function Rr(f){return new hi(f)}function Zo(f,w,T){f.j=T?ea(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function fi(f,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);f.u=w}else f.u=null}function Os(f,w,T){w instanceof ft?(f.i=w,yl(f.i,f.l)):(T||(w=ta(w,eg)),f.i=new ft(w,f.l))}function Tt(f,w,T){f.i.set(w,T)}function Xi(f){return Tt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ea(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ta(f,w,T){return typeof f=="string"?(f=encodeURI(f).replace(w,ac),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ac(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var lc=/[#\/\?@]/g,uc=/[#\?:]/g,na=/[#\?]/g,eg=/[#\?@]/g,cc=/#/g;function ft(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function pi(f){f.g||(f.g=new Map,f.h=0,f.i&&hr(f.i,function(w,T){f.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=ft.prototype,n.add=function(f,w){pi(this),this.i=null,f=mi(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(w),this.h+=1,this};function dc(f,w){pi(f),w=mi(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function gl(f,w){return pi(f),w=mi(f,w),f.g.has(w)}n.forEach=function(f,w){pi(this),this.g.forEach(function(T,N){T.forEach(function(K){f.call(w,K,N,this)},this)},this)};function hc(f,w){pi(f);let T=[];if(typeof w=="string")gl(f,w)&&(T=T.concat(f.g.get(mi(f,w))));else for(f=Array.from(f.g.values()),w=0;w<f.length;w++)T=T.concat(f[w]);return T}n.set=function(f,w){return pi(this),this.i=null,f=mi(this,f),gl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=hc(this,f),f.length>0?String(f[0]):w):w};function fc(f,w,T){dc(f,w),T.length>0&&(f.i=null,f.g.set(mi(f,w),E(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(let N=0;N<w.length;N++){var T=w[N];const K=di(T);T=hc(this,T);for(let Z=0;Z<T.length;Z++){let ye=K;T[Z]!==""&&(ye+="="+di(T[Z])),f.push(ye)}}return this.i=f.join("&")};function pc(f){const w=new ft;return w.i=f.i,f.g&&(w.g=new Map(f.g),w.h=f.h),w}function mi(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function yl(f,w){w&&!f.j&&(pi(f),f.i=null,f.g.forEach(function(T,N){const K=N.toLowerCase();N!=K&&(dc(this,N),fc(this,K,T))},f)),f.j=w}function gi(f,w){const T=new ui;if(a.Image){const N=new Image;N.onload=m(xn,T,"TestLoadImage: loaded",!0,w,N),N.onerror=m(xn,T,"TestLoadImage: error",!1,w,N),N.onabort=m(xn,T,"TestLoadImage: abort",!1,w,N),N.ontimeout=m(xn,T,"TestLoadImage: timeout",!1,w,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else w(!1)}function yi(f,w){const T=new ui,N=new AbortController,K=setTimeout(()=>{N.abort(),xn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:N.signal}).then(Z=>{clearTimeout(K),Z.ok?xn(T,"TestPingServer: ok",!0,w):xn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),xn(T,"TestPingServer: error",!1,w)})}function xn(f,w,T,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(T)}catch{}}function ra(){this.g=new qi}function Ji(f){this.i=f.Sb||null,this.h=f.ab||!1}g(Ji,jr),Ji.prototype.g=function(){return new fr(this.i,this.h)};function fr(f,w){pe.call(this),this.H=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(fr,pe),n=fr.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=w,this.readyState=1,zr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(w.body=f),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bh(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function bh(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Ls(this):zr(this),this.readyState==3&&bh(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ls(this))},n.Na=function(f){this.g&&(this.response=f,Ls(this))},n.ga=function(){this.g&&Ls(this)};function Ls(f){f.readyState=4,f.l=null,f.j=null,f.B=null,zr(f)}n.setRequestHeader=function(f,w){this.A.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=w.next();return f.join(`\r
`)};function zr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ah(f){let w="";return _e(f,function(T,N){w+=N,w+=":",w+=T,w+=`\r
`}),w}function vl(f,w,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=Ah(T),typeof f=="string"?T!=null&&di(T):Tt(f,w,T))}function Dt(f){pe.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Dt,pe);var xh=/^https?$/i,tg=["POST","PUT"];n=Dt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,w,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wh.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(Z){Fs(this,Z);return}if(f=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)T.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())T.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(tg,w,void 0)>=0)||N||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ye]of T)this.g.setRequestHeader(Z,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(Z){Fs(this,Z)}};function Fs(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.o=5,Us(f),es(f)}function Us(f){f.A||(f.A=!0,Ae(f,"complete"),Ae(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Ae(this,"complete"),Ae(this,"abort"),es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),Dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zi(this):this.Xa())},n.Xa=function(){Zi(this)};function Zi(f){if(f.h&&typeof s<"u"){if(f.v&&vi(f)==4)setTimeout(f.Ca.bind(f),0);else if(Ae(f,"readystatechange"),vi(f)==4){f.h=!1;try{const Z=f.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var N;if(N=Z===0){let ye=String(f.D).match(Ph)[1]||null;!ye&&a.self&&a.self.location&&(ye=a.self.location.protocol.slice(0,-1)),N=!xh.test(ye?ye.toLowerCase():"")}T=N}if(T)Ae(f,"complete"),Ae(f,"success");else{f.o=6;try{var K=vi(f)>2?f.g.statusText:""}catch{K=""}f.l=K+" ["+f.ca()+"]",Us(f)}}finally{es(f)}}}}function es(f,w){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,w||Ae(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function vi(f){return f.g?f.g.readyState:0}n.ca=function(){try{return vi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),qo(w)}};function Rh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function mc(f){const w={};f=(f.g&&vi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(V(f[N]))continue;var T=hl(f[N]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=w[K]||[];w[K]=Z,Z.push(T)}ue(w,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _i(f,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||w}function _l(f){this.za=0,this.i=[],this.j=new ui,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_i("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_i("baseRetryDelayMs",5e3,f),this.Za=_i("retryDelaySeedMs",1e4,f),this.Ta=_i("forwardChannelMaxRetries",2,f),this.va=_i("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(f&&f.concurrentRequestLimit),this.Ba=new ra,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_l.prototype,n.ka=8,n.I=1,n.connect=function(f,w,T,N){$t(0),this.W=f,this.H=w||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.J=yc(this,null,this.W),ts(this)};function wl(f){if(El(f),f.I==3){var w=f.V++,T=Rr(f.J);if(Tt(T,"SID",f.M),Tt(T,"RID",w),Tt(T,"TYPE","terminate"),wi(f,T),w=new xr(f,f.j,w),w.M=2,w.A=Xi(Rr(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&a.Image&&(new Image().src=w.A,T=!0),T||(w.g=kh(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Qo(w)}oa(f)}function pr(f){f.g&&(sa(f),f.g.cancel(),f.g=null)}function El(f){pr(f),f.v&&(a.clearTimeout(f.v),f.v=null),Tl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function ts(f){if(!sc(f.h)&&!f.m){f.m=!0;var w=f.Ea;H||S(),Y||(H(),Y=!0),x.add(w,f),f.D=0}}function Dh(f,w){return Xo(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=w.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=li(h(f.Ea,f,w),Il(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const K=new xr(this,this.j,f);let Z=this.o;if(this.U&&(Z?(Z=B(Z),we(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=gc(this,K,w),T=Rr(this.J),Tt(T,"RID",f),Tt(T,"CVER",22),this.G&&Tt(T,"X-HTTP-Session-Id",this.G),wi(this,T),Z&&(this.R?w="headers="+di(Ah(Z))+"&"+w:this.u&&vl(T,this.u,Z)),ml(this.h,K),this.Ra&&Tt(T,"TYPE","init"),this.S?(Tt(T,"$req",w),Tt(T,"SID","null"),K.U=!0,$r(K,T,null)):$r(K,T,w),this.I=2}}else this.I==3&&(f?ia(this,f):this.i.length==0||sc(this.h)||ia(this))};function ia(f,w){var T;w?T=w.l:T=f.V++;const N=Rr(f.J);Tt(N,"SID",f.M),Tt(N,"RID",T),Tt(N,"AID",f.K),wi(f,N),f.u&&f.o&&vl(N,f.u,f.o),T=new xr(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),w&&(f.i=w.G.concat(f.i)),w=gc(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ml(f.h,T),$r(T,N,w)}function wi(f,w){f.H&&_e(f.H,function(T,N){Tt(w,N,T)}),f.l&&_e({},function(T,N){Tt(w,N,T)})}function gc(f,w,T){T=Math.min(f.i.length,T);const N=f.l?h(f.l.Ka,f.l,f):null;e:{var K=f.i;let nt=-1;for(;;){const nn=["count="+T];nt==-1?T>0?(nt=K[0].g,nn.push("ofs="+nt)):nt=0:nn.push("ofs="+nt);let Ct=!0;for(let cn=0;cn<T;cn++){var Z=K[cn].g;const gr=K[cn].map;if(Z-=nt,Z<0)nt=Math.max(0,K[cn].g-100),Ct=!1;else try{Z="req"+Z+"_"||"";try{var ye=gr instanceof Map?gr:Object.entries(gr);for(const[ns,Ti]of ye){let Si=Ti;u(Ti)&&(Si=An(Ti)),nn.push(Z+ns+"="+encodeURIComponent(Si))}}catch(ns){throw nn.push(Z+"type="+encodeURIComponent("_badmap")),ns}}catch{N&&N(gr)}}if(Ct){ye=nn.join("&");break e}}ye=void 0}return f=f.i.splice(0,T),w.G=f,ye}function Vn(f){if(!f.g&&!f.v){f.Y=1;var w=f.Da;H||S(),Y||(H(),Y=!0),x.add(w,f),f.A=0}}function Ei(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=li(h(f.Da,f),Il(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,js(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=li(h(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),pr(this),js(this))};function sa(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function js(f){f.g=new xr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var w=Rr(f.na);Tt(w,"RID","rpc"),Tt(w,"SID",f.M),Tt(w,"AID",f.K),Tt(w,"CI",f.F?"0":"1"),!f.F&&f.ia&&Tt(w,"TO",f.ia),Tt(w,"TYPE","xmlhttp"),wi(f,w),f.u&&f.o&&vl(w,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Xi(Rr(w)),T.u=null,T.R=!0,rc(T,f)}n.Va=function(){this.C!=null&&(this.C=null,pr(this),Ei(this),$t(19))};function Tl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Sl(f,w){var T=null;if(f.g==w){Tl(f),sa(f),f.g=null;var N=2}else if(oc(f.h,w))T=w.G,Jo(f.h,w),N=1;else return;if(f.I!=0){if(w.o)if(N==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var K=f.D;N=ai(),Ae(N,new Ko(N,T)),ts(f)}else Vn(f);else if(K=w.m,K==3||K==0&&w.X>0||!(N==1&&Dh(f,w)||N==2&&Ei(f)))switch(T&&T.length>0&&(w=f.h,w.i=w.i.concat(T)),K){case 1:mr(f,5);break;case 4:mr(f,10);break;case 3:mr(f,6);break;default:mr(f,2)}}}function Il(f,w){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*w}function mr(f,w){if(f.j.info("Error code "+w),w==2){var T=h(f.bb,f),N=f.Ua;const K=!N;N=new hi(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zo(N,"https"),Xi(N),K?gi(N.toString(),T):yi(N.toString(),T)}else $t(2);f.I=0,f.l&&f.l.pa(w),oa(f),El(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function oa(f){if(f.I=0,f.ja=[],f.l){const w=dr(f.h);(w.length!=0||f.i.length!=0)&&(I(f.ja,w),I(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function yc(f,w,T){var N=T instanceof hi?Rr(T):new hi(T);if(N.g!="")w&&(N.g=w+"."+N.g),fi(N,N.u);else{var K=a.location;N=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;const Z=new hi(null);N&&Zo(Z,N),w&&(Z.g=w),K&&fi(Z,K),T&&(Z.h=T),N=Z}return T=f.G,w=f.wa,T&&w&&Tt(N,T,w),Tt(N,"VER",f.ka),wi(f,N),N}function kh(f,w,T){if(w&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Aa&&!f.ma?new Dt(new Ji({ab:T})):new Dt(f.ma),w.Fa(f.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nh(){}n=Nh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Cl(){}Cl.prototype.g=function(f,w){return new Rn(f,w)};function Rn(f,w){pe.call(this),this.g=new _l(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(f?f["X-WebChannel-Client-Profile"]=w.sa:f={"X-WebChannel-Client-Profile":w.sa}),this.g.U=f,(f=w&&w.Qb)&&!V(f)&&(this.g.u=f),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.G=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Bs(this)}g(Rn,pe),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){wl(this.g)},Rn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=An(f),f=T);w.i.push(new Zm(w.Ya++,f)),w.I==3&&ts(w)},Rn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,Rn.Z.N.call(this)};function Vh(f){ks.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const T in w){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}g(Vh,ks);function Mh(){Go.call(this),this.status=1}g(Mh,Go);function Bs(f){this.g=f}g(Bs,Nh),Bs.prototype.ra=function(){Ae(this.g,"a")},Bs.prototype.qa=function(f){Ae(this.g,new Vh(f))},Bs.prototype.pa=function(f){Ae(this.g,new Mh)},Bs.prototype.oa=function(){Ae(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,pb=function(){return new Cl},fb=function(){return ai()},hb=cr,Cv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Yf=Vs,Ms.COMPLETE="complete",db=Ms,cl.EventType=Pr,Pr.OPEN="a",Pr.CLOSE="b",Pr.ERROR="c",Pr.MESSAGE="d",pe.prototype.listen=pe.prototype.J,id=cl,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,cb=Dt}).apply(typeof Rf<"u"?Rf:typeof self<"u"?self:typeof window<"u"?window:{});const fS="@firebase/firestore",pS="4.9.3";let bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Hu="12.7.0";const za=new L_("@firebase/firestore");function nu(){return za.logLevel}function ae(n,...e){if(za.logLevel<=ut.DEBUG){const t=e.map(j_);za.debug(`Firestore (${Hu}): ${n}`,...t)}}function sn(n,...e){if(za.logLevel<=ut.ERROR){const t=e.map(j_);za.error(`Firestore (${Hu}): ${n}`,...t)}}function Ro(n,...e){if(za.logLevel<=ut.WARN){const t=e.map(j_);za.warn(`Firestore (${Hu}): ${n}`,...t)}}function j_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,mb(n,r,t)}function mb(n,e,t){let r=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw sn(r),new Error(r)}function Fe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||mb(e,i,r)}function Ve(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ei{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class gb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class pO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mO{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ei,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const c=s;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},u=c=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>u(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ei)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new gb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class gO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _O(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class B_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_O(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function Pv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return Ny(i)===Ny(s)?Ze(i,s):Ny(i)?1:-1}return Ze(n.length,e.length)}const wO=55296,EO=57343;function Ny(n){const e=n.charCodeAt(0);return e>=wO&&e<=EO}function wu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function yb(n){return n+"\0"}const gS="__name__";class Ai{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Ai.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ze(e.length,t.length)}static compareSegments(e,t){const r=Ai.isNumericId(e),i=Ai.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Pv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return To.fromString(e.substring(4,e.length-2))}}class St extends Ai{construct(e,t,r){return new St(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const TO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Ai{construct(e,t,r){return new Gt(e,t,r)}static isValidIdentifier(e){return TO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gS}static keyField(){return new Gt([gS])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ge(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ge(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new ge(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(St.fromString(e))}static fromName(e){return new Se(St.fromString(e).popFirst(5))}static empty(){return new Se(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new St(e.slice()))}}function vb(n,e,t){if(!t)throw new ge(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SO(n,e,t,r){if(e===!0&&r===!0)throw new ge(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yS(n){if(!Se.isDocumentKey(n))throw new ge(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vS(n){if(Se.isDocumentKey(n))throw new ge(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _b(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function gm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gm(n);throw new ge(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IO(n,e){if(e<=0)throw new ge(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function mn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qd(n,e){if(!_b(n))throw new ge(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ge(te.INVALID_ARGUMENT,t);return!0}const _S=-62135596800,wS=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*wS);return new bt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_S)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wS}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qd(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_S;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:mn("string",bt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new bt(0,0))}static max(){return new Be(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Eu=-1;class wp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function bv(n){return n.fields.find((e=>e.kind===2))}function Sa(n){return n.fields.filter((e=>e.kind!==2))}wp.UNKNOWN_ID=-1;class Xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ad{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ad(0,Ir.min())}}function wb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(r===1e9?new bt(t+1,0):new bt(t,r));return new Ir(i,Se.empty(),e)}function Eb(n){return new Ir(n.readTime,n.key,Eu)}class Ir{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ir(Be.min(),Se.empty(),Eu)}static max(){return new Ir(Be.max(),Se.empty(),Eu)}}function $_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}const Tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jo(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==Tb)throw n;ae("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):W.reject(t)}static resolve(e){return new W(((t,r)=>{t(e)}))}static reject(e){return new W(((t,r)=>{r(e)}))}static waitFor(e){return new W(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(c=>r(c)))})),a=!0,s===i&&t()}))}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next((i=>i?W.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new W(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;t(e[h]).next((m=>{a[h]=m,++u,u===s&&r(a)}),(m=>i(m)))}}))}static doWhile(e,t){return new W(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const wr="SimpleDb";class ym{static open(e,t,r,i){try{return new ym(t,e.transaction(i,r))}catch(s){throw new cd(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ei,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new cd(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=z_(r.target.error);this.S.reject(new cd(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ae(wr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PO(t)}}class So{static delete(e){return ae(wr,"Removing database:",e),xa(QP().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!rb())return!1;if(So.F())return!0;const e=wn(),t=So.M(e),r=0<t&&t<10,i=Ib(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,So.M(wn())===12.2&&sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ae(wr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new cd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ge(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ge(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new cd(e,a))},i.onupgradeneeded=s=>{ae(wr,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{ae(wr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const u=ym.open(this.db,e,s?"readonly":"readwrite",r),c=i(u).next((h=>(u.C(),h))).catch((h=>(u.abort(h),W.reject(h)))).toPromise();return c.catch((()=>{})),await u.D,c}catch(u){const c=u,h=c.name!=="FirebaseError"&&a<3;if(ae(wr,"Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ib(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class CO{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return xa(this.U.delete())}}class cd extends ge{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bo(n){return n.name==="IndexedDbTransactionError"}class PO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ae(wr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ae(wr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xa(r)}add(e){return ae(wr,"ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ae(wr,"GET",this.store.name,e,t),t)))}delete(e){return ae(wr,"DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return ae(wr,"COUNT",this.store.name),xa(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new W(((a,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{a(c.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((u,c)=>{a.push(c)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){ae(wr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new W(((r,i)=>{t.onerror=s=>{const a=z_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((u=>{u?a.continue():r()})):r()}}))}H(e,t){const r=[];return new W(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const c=new CO(u),h=t(u.primaryKey,u.value,c);if(h instanceof W){const m=h.catch((g=>(c.done(),W.reject(g))));r.push(m)}c.isDone?i():c.G===null?u.continue():u.continue(c.G)}})).next((()=>W.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xa(n){return new W(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=z_(r.target.error);t(i)}}))}let ES=!1;function z_(n){const e=So.M(wn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ES||(ES=!0,setTimeout((()=>{throw r}),0)),r}}return n}const dd="IndexBackfiller";class bO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ae(dd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ae(dd,`Documents written: ${t}`)}catch(t){Bo(t)?ae(dd,"Ignoring IndexedDB error during index backfill: ",t):await jo(t)}await this.re(6e4)}))}}class AO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return W.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return ae(dd,`Processing collection: ${a}`),this.oe(e,a,i).next((u=>{i-=u,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((u=>(ae(dd,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=Eb(s);$_(a,r)>0&&(r=a)})),new Ir(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class sr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sr.ce=-1;const Oa=-1;function vm(n){return n==null}function xd(n){return n===0&&1/n==-1/0}function Cb(n){return typeof n=="number"&&Number.isInteger(n)&&!xd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ep="";function Wn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TS(e)),e=xO(n.get(t),e);return TS(e)}function xO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Ep:t+="";break;default:t+=s}}return t}function TS(n){return n+Ep+""}function ki(n){const e=n.length;if(Fe(e>=2,64408,{path:n}),e===2)return Fe(n.charAt(0)===Ep&&n.charAt(1)==="",56145,{path:n}),St.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Ep,s);switch((a<0||a>t)&&De(50515,{path:n}),n.charAt(a+1)){case"":const u=n.substring(s,a);let c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:De(61167,{path:n})}s=a+2}return new St(r)}const Ia="remoteDocuments",Yd="owner",Gl="owner",Rd="mutationQueues",RO="userId",Xr="mutations",SS="batchId",Na="userMutationsIndex",IS=["userId","batchId"];function Jf(n,e){return[n,Wn(e)]}function Pb(n,e,t){return[n,Wn(e),t]}const DO={},Tu="documentMutations",Tp="remoteDocumentsV14",kO=["prefixPath","collectionGroup","readTime","documentId"],Zf="documentKeyIndex",NO=["prefixPath","collectionGroup","documentId"],bb="collectionGroupIndex",VO=["collectionGroup","readTime","prefixPath","documentId"],Dd="remoteDocumentGlobal",Av="remoteDocumentGlobalKey",Su="targets",Ab="queryTargetsIndex",MO=["canonicalId","targetId"],Iu="targetDocuments",OO=["targetId","path"],W_="documentTargetsIndex",LO=["path","targetId"],Sp="targetGlobalKey",La="targetGlobal",kd="collectionParents",FO=["collectionId","parent"],Cu="clientMetadata",UO="clientId",_m="bundles",jO="bundleId",wm="namedQueries",BO="name",H_="indexConfiguration",$O="indexId",xv="collectionGroupIndex",zO="collectionGroup",hd="indexState",WO=["indexId","uid"],xb="sequenceNumberIndex",HO=["uid","sequenceNumber"],fd="indexEntries",qO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rb="documentKeyIndex",GO=["indexId","uid","orderedDocumentKey"],Em="documentOverlays",KO=["userId","collectionPath","documentId"],Rv="collectionPathOverlayIndex",QO=["userId","collectionPath","largestBatchId"],Db="collectionGroupOverlayIndex",YO=["userId","collectionGroup","largestBatchId"],q_="globals",XO="name",kb=[Rd,Xr,Tu,Ia,Su,Yd,La,Iu,Cu,Dd,kd,_m,wm],JO=[...kb,Em],Nb=[Rd,Xr,Tu,Tp,Su,Yd,La,Iu,Cu,Dd,kd,_m,wm,Em],Vb=Nb,G_=[...Vb,H_,hd,fd],ZO=G_,Mb=[...G_,q_],eL=Mb;class Dv extends Sb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function En(n,e){const t=Ve(n);return So.O(t.le,e)}function CS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ob(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=i??Nn.EMPTY,this.right=s??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Nn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Nn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PS(this.data.getIterator())}getIteratorFrom(e){return new PS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class PS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kl(n){return n.hasNext()?n.getNext():void 0}class or{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new or([])}unionWith(e){let t=new xt(Gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Lb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lb("Invalid base64 string: "+s):s}})(e);return new un(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const tL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Fe(!!n,39018),typeof n=="string"){let e=0;const t=tL.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Es(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}const Fb="server_timestamp",Ub="__type__",jb="__previous_value__",Bb="__local_write_time__";function K_(n){return(n?.mapValue?.fields||{})[Ub]?.stringValue===Fb}function Tm(n){const e=n.mapValue.fields[jb];return K_(e)?Tm(e):e}function Nd(n){const e=ws(n.mapValue.fields[Bb].timestampValue);return new bt(e.seconds,e.nanos)}class nL{constructor(e,t,r,i,s,a,u,c,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const Ip="(default)";class Wa{constructor(e,t){this.projectId=e,this.database=t||Ip}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database===Ip}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}const Q_="__type__",$b="__max__",vo={mapValue:{fields:{__type__:{stringValue:$b}}}},Y_="__vector__",Pu="value",ep={nullValue:"NULL_VALUE"};function Do(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?K_(n)?4:zb(n)?9007199254740991:Sm(n)?10:11:De(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=Do(n);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nd(n).isEqual(Nd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ws(i.timestampValue),u=ws(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Es(i.bytesValue).isEqual(Es(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Wt(i.geoPointValue.latitude)===Wt(s.geoPointValue.latitude)&&Wt(i.geoPointValue.longitude)===Wt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Wt(i.integerValue)===Wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Wt(i.doubleValue),u=Wt(s.doubleValue);return a===u?xd(a)===xd(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return wu(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(CS(a)!==CS(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Bi(a[c],u[c])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function Vd(n,e){return(n.values||[]).find((t=>Bi(t,e)))!==void 0}function ko(n,e){if(n===e)return 0;const t=Do(n),r=Do(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=Wt(s.integerValue||s.doubleValue),c=Wt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1})(n,e);case 3:return bS(n.timestampValue,e.timestampValue);case 4:return bS(Nd(n),Nd(e));case 5:return Pv(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=Es(s),c=Es(a);return u.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),c=a.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=Ze(u[h],c[h]);if(m!==0)return m}return Ze(u.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Ze(Wt(s.latitude),Wt(a.latitude));return u!==0?u:Ze(Wt(s.longitude),Wt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return AS(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},c=a.fields||{},h=u[Pu]?.arrayValue,m=c[Pu]?.arrayValue,g=Ze(h?.values?.length||0,m?.values?.length||0);return g!==0?g:AS(h,m)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===vo.mapValue&&a===vo.mapValue)return 0;if(s===vo.mapValue)return 1;if(a===vo.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=a.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const v=Pv(c[g],m[g]);if(v!==0)return v;const E=ko(u[c[g]],h[m[g]]);if(E!==0)return E}return Ze(c.length,m.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function bS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=ws(n),r=ws(e),i=Ze(t.seconds,r.seconds);return i!==0?i:Ze(t.nanos,r.nanos)}function AS(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ko(t[i],r[i]);if(s)return s}return Ze(t.length,r.length)}function bu(n){return kv(n)}function kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ws(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Es(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=kv(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${kv(t.fields[a])}`;return i+"}"})(n.mapValue):De(61005,{value:n})}function tp(n){switch(Do(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tm(n);return e?16+tp(e):16;case 5:return 2*n.stringValue.length;case 6:return Es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+tp(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return $o(r.fields,((s,a)=>{i+=s.length+tp(a)})),i})(n.mapValue);default:throw De(13486,{value:n})}}function Md(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Nv(n){return!!n&&"integerValue"in n}function Od(n){return!!n&&"arrayValue"in n}function xS(n){return!!n&&"nullValue"in n}function RS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function np(n){return!!n&&"mapValue"in n}function Sm(n){return(n?.mapValue?.fields||{})[Q_]?.stringValue===Y_}function pd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return $o(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=pd(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pd(n.arrayValue.values[t]);return e}return{...n}}function zb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$b}const Wb={mapValue:{fields:{[Q_]:{stringValue:Y_},[Pu]:{arrayValue:{}}}}};function rL(n){return"nullValue"in n?ep:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Md(Wa.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Sm(n)?Wb:{mapValue:{}}:De(35942,{value:n})}function iL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Md(Wa.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Wb:"mapValue"in n?Sm(n)?{mapValue:{}}:vo:De(61959,{value:n})}function DS(n,e){const t=ko(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kS(n,e){const t=ko(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!np(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pd(t)}setAll(e){let t=Gt.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=pd(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());np(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];np(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$o(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new $n(pd(this.value))}}function Hb(n){const e=[];return $o(n.fields,((t,r)=>{const i=new Gt([t]);if(np(r)){const s=Hb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new or(e)}class Jt{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Jt(e,0,Be.min(),Be.min(),Be.min(),$n.empty(),0)}static newFoundDocument(e,t,r,i){return new Jt(e,1,t,Be.min(),r,i,0)}static newNoDocument(e,t){return new Jt(e,2,t,Be.min(),Be.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Be.min(),Be.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Au{constructor(e,t){this.position=e,this.inclusive=t}}function NS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Se.comparator(Se.fromName(a.referenceValue),t.key):r=ko(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}class Cp{constructor(e,t="asc"){this.field=e,this.dir=t}}function sL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qb{}class dt extends qb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oL(e,t,r):t==="array-contains"?new uL(e,r):t==="in"?new Jb(e,r):t==="not-in"?new cL(e,r):t==="array-contains-any"?new dL(e,r):new dt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aL(e,r):new lL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ko(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends qb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new At(e,t)}matches(e){return xu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xu(n){return n.op==="and"}function Vv(n){return n.op==="or"}function X_(n){return Gb(n)&&xu(n)}function Gb(n){for(const e of n.filters)if(e instanceof At)return!1;return!0}function Mv(n){if(n instanceof dt)return n.field.canonicalString()+n.op.toString()+bu(n.value);if(X_(n))return n.filters.map((e=>Mv(e))).join(",");{const e=n.filters.map((t=>Mv(t))).join(",");return`${n.op}(${e})`}}function Kb(n,e){return n instanceof dt?(function(r,i){return i instanceof dt&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)})(n,e):n instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&Kb(a,i.filters[u])),!0):!1})(n,e):void De(19439)}function Qb(n,e){const t=n.filters.concat(e);return At.create(t,n.op)}function Yb(n){return n instanceof dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${bu(t.value)}`})(n):n instanceof At?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yb).join(" ,")+"}"})(n):"Filter"}class oL extends dt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class aL extends dt{constructor(e,t){super(e,"in",t),this.keys=Xb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lL extends dt{constructor(e,t){super(e,"not-in",t),this.keys=Xb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Xb(n,e){return(e.arrayValue?.values||[]).map((t=>Se.fromName(t.referenceValue)))}class uL extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Od(t)&&Vd(t.arrayValue,this.value)}}class Jb extends dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vd(this.value.arrayValue,t)}}class cL extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vd(this.value.arrayValue,t)}}class dL extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Od(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Vd(this.value.arrayValue,r)))}}class hL{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function Ov(n,e=null,t=[],r=[],i=null,s=null,a=null){return new hL(n,e,t,r,i,s,a)}function Ha(n){const e=Ve(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Mv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>bu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>bu(r))).join(",")),e.Te=t}return e.Te}function Xd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Kb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VS(n.startAt,e.startAt)&&VS(n.endAt,e.endAt)}function Pp(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bp(n,e){return n.filters.filter((t=>t instanceof dt&&t.field.isEqual(e)))}function MS(n,e,t){let r=ep,i=!0;for(const s of bp(n,e)){let a=ep,u=!0;switch(s.op){case"<":case"<=":a=rL(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=ep}DS({value:r,inclusive:i},{value:a,inclusive:u})<0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];DS({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function OS(n,e,t){let r=vo,i=!0;for(const s of bp(n,e)){let a=vo,u=!0;switch(s.op){case">=":case">":a=iL(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=vo}kS({value:r,inclusive:i},{value:a,inclusive:u})>0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];kS({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class Jd{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Zb(n,e,t,r,i,s,a,u){return new Jd(n,e,t,r,i,s,a,u)}function Im(n){return new Jd(n)}function LS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eA(n){return n.collectionGroup!==null}function md(n){const e=Ve(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new xt(Gt.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Cp(s,r))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new Cp(Gt.keyField(),r))}return e.Ie}function Sr(n){const e=Ve(n);return e.Ee||(e.Ee=fL(e,md(n))),e.Ee}function fL(n,e){if(n.limitType==="F")return Ov(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Cp(i.field,s)}));const t=n.endAt?new Au(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Au(n.startAt.position,n.startAt.inclusive):null;return Ov(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Lv(n,e){const t=n.filters.concat([e]);return new Jd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ap(n,e,t){return new Jd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cm(n,e){return Xd(Sr(n),Sr(e))&&n.limitType===e.limitType}function tA(n){return`${Ha(Sr(n))}|lt:${n.limitType}`}function ru(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Yb(i))).join(", ")}]`),vm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>bu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>bu(i))).join(",")),`Target(${r})`})(Sr(n))}; limitType=${n.limitType})`}function Zd(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of md(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,c){const h=NS(a,u,c);return a.inclusive?h<=0:h<0})(r.startAt,md(r),i)||r.endAt&&!(function(a,u,c){const h=NS(a,u,c);return a.inclusive?h>=0:h>0})(r.endAt,md(r),i))})(n,e)}function nA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rA(n){return(e,t)=>{let r=!1;for(const i of md(n)){const s=pL(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pL(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(s,a,u){const c=a.data.field(s),h=u.data.field(s);return c!==null&&h!==null?ko(c,h):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return Ob(this.inner)}size(){return this.innerSize}}const mL=new Vt(Se.comparator);function Tr(){return mL}const iA=new Vt(Se.comparator);function sd(...n){let e=iA;for(const t of n)e=e.insert(t.key,t);return e}function sA(n){let e=iA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ni(){return gd()}function oA(){return gd()}function gd(){return new As((n=>n.toString()),((n,e)=>n.isEqual(e)))}const gL=new Vt(Se.comparator),yL=new xt(Se.comparator);function it(...n){let e=yL;for(const t of n)e=e.add(t);return e}const vL=new xt(Ze);function J_(){return vL}function Z_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xd(e)?"-0":e}}function aA(n){return{integerValue:""+n}}function _L(n,e){return Cb(e)?aA(e):Z_(n,e)}class Pm{constructor(){this._=void 0}}function wL(n,e,t){return n instanceof Ld?(function(i,s){const a={fields:{[Ub]:{stringValue:Fb},[Bb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&K_(s)&&(s=Tm(s)),s&&(a.fields[jb]=s),{mapValue:a}})(t,e):n instanceof Ru?uA(n,e):n instanceof Du?cA(n,e):(function(i,s){const a=lA(i,s),u=FS(a)+FS(i.Ae);return Nv(a)&&Nv(i.Ae)?aA(u):Z_(i.serializer,u)})(n,e)}function EL(n,e,t){return n instanceof Ru?uA(n,e):n instanceof Du?cA(n,e):t}function lA(n,e){return n instanceof Fd?(function(r){return Nv(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Ld extends Pm{}class Ru extends Pm{constructor(e){super(),this.elements=e}}function uA(n,e){const t=dA(e);for(const r of n.elements)t.some((i=>Bi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Du extends Pm{constructor(e){super(),this.elements=e}}function cA(n,e){let t=dA(e);for(const r of n.elements)t=t.filter((i=>!Bi(i,r)));return{arrayValue:{values:t}}}class Fd extends Pm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function FS(n){return Wt(n.integerValue||n.doubleValue)}function dA(n){return Od(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class TL{constructor(e,t){this.field=e,this.transform=t}}function SL(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ru&&i instanceof Ru||r instanceof Du&&i instanceof Du?wu(r.elements,i.elements,Bi):r instanceof Fd&&i instanceof Fd?Bi(r.Ae,i.Ae):r instanceof Ld&&i instanceof Ld})(n.transform,e.transform)}class IL{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bm{}function hA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eh(n.key,_n.none()):new qu(n.key,n.data,_n.none());{const t=n.data,r=$n.empty();let i=new xt(Gt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new xs(n.key,r,new or(i.toArray()),_n.none())}}function CL(n,e,t){n instanceof qu?(function(i,s,a){const u=i.value.clone(),c=jS(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof xs?(function(i,s,a){if(!rp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=jS(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(fA(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function yd(n,e,t,r){return n instanceof qu?(function(s,a,u,c){if(!rp(s.precondition,a))return u;const h=s.value.clone(),m=BS(s.fieldTransforms,c,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof xs?(function(s,a,u,c){if(!rp(s.precondition,a))return u;const h=BS(s.fieldTransforms,c,a),m=a.data;return m.setAll(fA(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,u){return rp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function PL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=lA(r.transform,i||null);s!=null&&(t===null&&(t=$n.empty()),t.set(r.field,s))}return t||null}function US(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wu(r,i,((s,a)=>SL(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class qu extends bm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xs extends bm{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function jS(n,e,t){const r=new Map;Fe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,EL(a,u,t[i]))}return r}function BS(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,wL(s,a,e))}return r}class eh extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pA extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ew{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&CL(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oA();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const c=hA(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Be.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),it())}isEqual(e){return this.batchId===e.batchId&&wu(this.mutations,e.mutations,((t,r)=>US(t,r)))&&wu(this.baseMutations,e.baseMutations,((t,r)=>US(t,r)))}}class tw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return gL})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new tw(e,t,r,i)}}class nw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bL{constructor(e,t){this.count=e,this.unchangedNames=t}}var hn,yt;function AL(n){switch(n){case te.OK:return De(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function mA(n){if(n===void 0)return sn("GRPC error has no .code"),te.UNKNOWN;switch(n){case hn.OK:return te.OK;case hn.CANCELLED:return te.CANCELLED;case hn.UNKNOWN:return te.UNKNOWN;case hn.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case hn.INTERNAL:return te.INTERNAL;case hn.UNAVAILABLE:return te.UNAVAILABLE;case hn.UNAUTHENTICATED:return te.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case hn.NOT_FOUND:return te.NOT_FOUND;case hn.ALREADY_EXISTS:return te.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return te.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case hn.ABORTED:return te.ABORTED;case hn.OUT_OF_RANGE:return te.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return te.UNIMPLEMENTED;case hn.DATA_LOSS:return te.DATA_LOSS;default:return De(39323,{code:n})}}(yt=hn||(hn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function xL(){return new TextEncoder}const RL=new To([4294967295,4294967295],0);function $S(n){const e=xL().encode(n),t=new ub;return t.update(e),new Uint8Array(t.digest())}function zS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new To([t,r],0),new To([i,s],0)]}class rw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new od(`Invalid padding: ${t}`);if(r<0)throw new od(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new od(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new od(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=To.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(To.fromNumber(r)));return i.compare(RL)===1&&(i=new To([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$S(e),[r,i]=zS(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new rw(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=$S(e),[r,i]=zS(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class od extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class th{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,nh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new th(Be.min(),i,new Vt(Ze),Tr(),it())}}class nh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nh(r,t,it(),it(),it())}}class ip{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class gA{constructor(e,t){this.targetId=e,this.Ce=t}}class yA{constructor(e,t,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class WS{constructor(){this.ve=0,this.Fe=HS(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),t=it(),r=it();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:s})}})),new nh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=HS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class DL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tr(),this.Je=kf(),this.He=kf(),this.Ye=new Vt(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Pp(s))if(r===0){const a=new Se(s.path);this.et(t,a,Jt.newNoDocument(a,Be.min()))}else Fe(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),c=u?this.ct(u,e,a):1;if(c!==0){this.it(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=Es(r).toUint8Array()}catch(c){if(c instanceof Lb)return Ro("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new rw(a,i,s)}catch(c){return Ro(c instanceof od?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&Pp(u.target)){const c=new Se(u.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Jt.newNoDocument(c,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=it();this.He.forEach(((s,a)=>{let u=!0;a.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new th(e,t,this.Ye,this.je,r);return this.je=Tr(),this.Je=kf(),this.He=kf(),this.Ye=new Vt(Ze),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new WS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xt(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xt(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new WS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kf(){return new Vt(Se.comparator)}function HS(){return new Vt(Se.comparator)}const kL={asc:"ASCENDING",desc:"DESCENDING"},NL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VL={and:"AND",or:"OR"};class ML{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fv(n,e){return n.useProto3Json||vm(e)?e:{value:e}}function ku(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OL(n,e){return ku(n,e.toTimestamp())}function Yn(n){return Fe(!!n,49232),Be.fromTimestamp((function(t){const r=ws(t);return new bt(r.seconds,r.nanos)})(n))}function iw(n,e){return Uv(n,e).canonicalString()}function Uv(n,e){const t=(function(i){return new St(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _A(n){const e=St.fromString(n);return Fe(AA(e),10190,{key:e.toString()}),e}function xp(n,e){return iw(n.databaseId,e.path)}function Fa(n,e){const t=_A(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(TA(t))}function wA(n,e){return iw(n.databaseId,e)}function EA(n){const e=_A(n);return e.length===4?St.emptyPath():TA(e)}function jv(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TA(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qS(n,e,t){return{name:xp(n,e),fields:t.value.mapValue.fields}}function LL(n,e,t){const r=Fa(n,e.name),i=Yn(e.updateTime),s=e.createTime?Yn(e.createTime):Be.min(),a=new $n({mapValue:{fields:e.fields}}),u=Jt.newFoundDocument(r,i,s,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function FL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:De(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(Fe(m===void 0||typeof m=="string",58123),un.fromBase64String(m||"")):(Fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),un.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const m=h.code===void 0?te.UNKNOWN:mA(h.code);return new ge(m,h.message||"")})(a);t=new yA(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fa(n,r.document.name),s=Yn(r.document.updateTime),a=r.document.createTime?Yn(r.document.createTime):Be.min(),u=new $n({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(i,s,a,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new ip(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fa(n,r.document),s=r.readTime?Yn(r.readTime):Be.min(),a=Jt.newNoDocument(i,s),u=r.removedTargetIds||[];t=new ip([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fa(n,r.document),s=r.removedTargetIds||[];t=new ip([],s,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new bL(i,s),u=r.targetId;t=new gA(u,a)}}return t}function Rp(n,e){let t;if(e instanceof qu)t={update:qS(n,e.key,e.value)};else if(e instanceof eh)t={delete:xp(n,e.key)};else if(e instanceof xs)t={update:qS(n,e.key,e.data),updateMask:WL(e.fieldMask)};else{if(!(e instanceof pA))return De(16599,{Vt:e.type});t={verify:xp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof Ld)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ru)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Du)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw De(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:OL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:De(27497)})(n,e.precondition)),t}function Bv(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?_n.updateTime(Yn(s.updateTime)):s.exists!==void 0?_n.exists(s.exists):_n.none()})(e.currentDocument):_n.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,u){let c=null;if("setToServerValue"in u)Fe(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),c=new Ld;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];c=new Ru(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];c=new Du(m)}else"increment"in u?c=new Fd(a,u.increment):De(16584,{proto:u});const h=Gt.fromServerFormat(u.fieldPath);return new TL(h,c)})(n,i))):[];if(e.update){e.update.name;const i=Fa(n,e.update.name),s=new $n({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(c){const h=c.fieldPaths||[];return new or(h.map((m=>Gt.fromServerFormat(m))))})(e.updateMask);return new xs(i,s,a,t,r)}return new qu(i,s,t,r)}if(e.delete){const i=Fa(n,e.delete);return new eh(i,t)}if(e.verify){const i=Fa(n,e.verify);return new pA(i,t)}return De(1463,{proto:e})}function UL(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?Yn(i.updateTime):Yn(s);return a.isEqual(Be.min())&&(a=Yn(s)),new IL(a,i.transformResults||[])})(t,e)))):[]}function SA(n,e){return{documents:[wA(n,e.path)]}}function IA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wA(n,i);const s=(function(h){if(h.length!==0)return bA(At.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:iu(v.field),direction:BL(v.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=Fv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function CA(n){let e=EA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Fe(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const v=PA(g);return v instanceof At&&X_(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((v=>(function(I){return new Cp(su(I.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let v;return v=typeof g=="object"?g.value:g,vm(v)?null:v})(t.limit));let c=null;t.startAt&&(c=(function(g){const v=!!g.before,E=g.values||[];return new Au(E,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const v=!g.before,E=g.values||[];return new Au(E,v)})(t.endAt)),Zb(e,i,a,s,u,"F",c,h)}function jL(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=su(t.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=su(t.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=su(t.unaryFilter.field);return dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=su(t.unaryFilter.field);return dt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return dt.create(su(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return At.create(t.compositeFilter.filters.map((r=>PA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function BL(n){return kL[n]}function $L(n){return NL[n]}function zL(n){return VL[n]}function iu(n){return{fieldPath:n.canonicalString()}}function su(n){return Gt.fromServerFormat(n.fieldPath)}function bA(n){return n instanceof dt?(function(t){if(t.op==="=="){if(RS(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NAN"}};if(xS(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(RS(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NOT_NAN"}};if(xS(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iu(t.field),op:$L(t.op),value:t.value}}})(n):n instanceof At?(function(t){const r=t.getFilters().map((i=>bA(i)));return r.length===1?r[0]:{compositeFilter:{op:zL(t.op),filters:r}}})(n):De(54877,{filter:n})}function WL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class hs{constructor(e,t,r,i,s=Be.min(),a=Be.min(),u=un.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class xA{constructor(e){this.yt=e}}function HL(n,e){let t;if(e.document)t=LL(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=Ga(e.noDocument.readTime);t=Jt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return De(56709);{const r=Se.fromSegments(e.unknownDocument.path),i=Ga(e.unknownDocument.version);t=Jt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new bt(i[0],i[1]);return Be.fromTimestamp(s)})(e.readTime)),t}function GS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:xp(s,a.key),fields:a.data.value.mapValue.fields,updateTime:ku(s,a.version.toTimestamp()),createTime:ku(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qa(e.version)};else{if(!e.isUnknownDocument())return De(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:qa(e.version)}}return r}function Dp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ga(n){const e=new bt(n.seconds,n.nanoseconds);return Be.fromTimestamp(e)}function Ra(n,e){const t=(e.baseMutations||[]).map((s=>Bv(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Bv(n.yt,s))),i=bt.fromMillis(e.localWriteTimeMs);return new ew(e.batchId,i,t,r)}function ad(n){const e=Ga(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ga(n.lastLimboFreeSnapshotVersion):Be.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return Fe(a===1,1966,{count:a}),Sr(Im(EA(s.documents[0])))})(n.query):(function(s){return Sr(CA(s))})(n.query),new hs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,un.fromBase64String(n.resumeToken))}function RA(n,e){const t=qa(e.snapshotVersion),r=qa(e.lastLimboFreeSnapshotVersion);let i;i=Pp(e.target)?SA(n.yt,e.target):IA(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ha(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function DA(n){const e=CA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ap(e,e.limit,"L"):e}function Vy(n,e){return new nw(e.largestBatchId,Bv(n.yt,e.overlayMutation))}function KS(n,e){const t=e.path.lastSegment();return[n,Wn(e.path.popLast()),t]}function QS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:qa(r.readTime),documentKey:Wn(r.documentKey.path),largestBatchId:r.largestBatchId}}class qL{getBundleMetadata(e,t){return YS(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Ga(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return YS(e).put((function(i){return{bundleId:i.id,createTime:qa(Yn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return XS(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:DA(s.bundledQuery),readTime:Ga(s.readTime)}})(r)}))}saveNamedQuery(e,t){return XS(e).put((function(i){return{name:i.name,readTime:qa(Yn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function YS(n){return En(n,_m)}function XS(n){return En(n,wm)}class Am{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Am(e,r)}getOverlay(e,t){return Wc(e).get(KS(this.userId,t)).next((r=>r?Vy(this.serializer,r):null))}getOverlays(e,t){const r=Ni();return W.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const u=new nw(t,a);i.push(this.St(e,u))})),W.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(Wn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Wc(e).Z(Rv,u))})),W.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ni(),s=Wn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wc(e).J(Rv,a).next((u=>{for(const c of u){const h=Vy(this.serializer,c);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Ni();let a;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wc(e).ee({index:Db,range:u},((c,h,m)=>{const g=Vy(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):m.done()})).next((()=>s))}St(e,t){return Wc(e).put((function(i,s,a){const[u,c,h]=KS(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Rp(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Wc(n){return En(n,Em)}class GL{bt(e){return En(e,q_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?un.fromUint8Array(r):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Da{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Wt(e.integerValue));else if("doubleValue"in e){const r=Wt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),xd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ws(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Es(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?zb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Sm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):De(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=Pu,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Wt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Se.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Da.Kt=new Da;const Ql=255;function KL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function JS(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=KL(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class QL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=JS(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=JS(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Ql),this.sn(255)}_n(){this.an(Ql),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ql?(this.sn(Ql),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ql?(this.an(Ql),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YL{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class XL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hc{constructor(){this.cn=new QL,this.ln=new YL(this.cn),this.hn=new XL(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ka{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ka(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:sp(this.En),directionalValue:sp(this.dn),orderedDocumentKey:sp(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function no(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ZS(n.En,e.En),t!==0?t:(t=ZS(n.dn,e.dn),t!==0?t:Se.comparator(n.In,e.In)))}function ZS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function sp(n){return nb()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function eI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class tI{constructor(e){this.mn=new xt(((t,r)=>Gt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Fe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=bv(e);if(t!==void 0&&!this.wn(t))return!1;const r=Sa(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const c=r[s];if(!this.Sn(u,c)||!this.bn(this.fn[a++],c))return!1}++s}for(;s<r.length;++s){const u=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt(Gt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Xf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Xf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Xf(r.field,r.dir==="asc"?0:1)));return new wp(wp.UNKNOWN_ID,this.collectionId,t,Ad.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function kA(n){if(Fe(n instanceof dt||n instanceof At,20012),n instanceof dt){if(n instanceof Jb){const t=n.value.arrayValue?.values?.map((r=>dt.create(n.field,"==",r)))||[];return At.create(t,"or")}return n}const e=n.filters.map((t=>kA(t)));return At.create(e,n.op)}function JL(n){if(n.getFilters().length===0)return[];const e=Wv(kA(n));return Fe(NA(e),7391),$v(e)||zv(e)?[e]:e.getFilters()}function $v(n){return n instanceof dt}function zv(n){return n instanceof At&&X_(n)}function NA(n){return $v(n)||zv(n)||(function(t){if(t instanceof At&&Vv(t)){for(const r of t.getFilters())if(!$v(r)&&!zv(r))return!1;return!0}return!1})(n)}function Wv(n){if(Fe(n instanceof dt||n instanceof At,34018),n instanceof dt)return n;if(n.filters.length===1)return Wv(n.filters[0]);const e=n.filters.map((r=>Wv(r)));let t=At.create(e,n.op);return t=kp(t),NA(t)?t:(Fe(t instanceof At,64498),Fe(xu(t),40251),Fe(t.filters.length>1,57927),t.filters.reduce(((r,i)=>sw(r,i))))}function sw(n,e){let t;return Fe(n instanceof dt||n instanceof At,38388),Fe(e instanceof dt||e instanceof At,25473),t=n instanceof dt?e instanceof dt?(function(i,s){return At.create([i,s],"and")})(n,e):nI(n,e):e instanceof dt?nI(e,n):(function(i,s){if(Fe(i.filters.length>0&&s.filters.length>0,48005),xu(i)&&xu(s))return Qb(i,s.getFilters());const a=Vv(i)?i:s,u=Vv(i)?s:i,c=a.filters.map((h=>sw(h,u)));return At.create(c,"or")})(n,e),kp(t)}function nI(n,e){if(xu(e))return Qb(e,n.getFilters());{const t=e.filters.map((r=>sw(n,r)));return At.create(t,"or")}}function kp(n){if(Fe(n instanceof dt||n instanceof At,11850),n instanceof dt)return n;const e=n.getFilters();if(e.length===1)return kp(e[0]);if(Gb(n))return n;const t=e.map((i=>kp(i))),r=[];return t.forEach((i=>{i instanceof dt?r.push(i):i instanceof At&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:At.create(r,n.op)}class ZL{constructor(){this.Cn=new ow}addToCollectionParentIndex(e,t){return this.Cn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Ir.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class ow{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xt(St.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(St.comparator)).toArray()}}const rI="IndexedDbIndexManager",Nf=new Uint8Array(0);class e2{constructor(e,t){this.databaseId=t,this.vn=new ow,this.Fn=new As((r=>Ha(r)),((r,i)=>Xd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:Wn(i)};return iI(e).put(s)}return W.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[yb(t),""],!1,!0);return iI(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(ki(a.parent))}return r}))}addFieldIndex(e,t){const r=qc(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Xl(e);return s.next((u=>{a.put(QS(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=qc(e),i=Xl(e),s=Yl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=qc(e),r=Yl(e),i=Xl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return W.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new tI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Yl(e);let i=!0;const s=new Map;return W.forEach(this.Mn(t),(a=>this.xn(e,a).next((u=>{i&&(i=!!u),s.set(a,u)})))).next((()=>{if(i){let a=it();const u=[];return W.forEach(s,((c,h)=>{ae(rI,`Using index ${(function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map((j=>`${j.fieldPath}:${j.kind}`)).join(",")}`})(c)} to execute ${Ha(t)}`);const m=(function(A,j){const H=bv(j);if(H===void 0)return null;for(const Y of bp(A,H.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null})(h,c),g=(function(A,j){const H=new Map;for(const Y of Sa(j))for(const x of bp(A,Y.fieldPath))switch(x.op){case"==":case"in":H.set(Y.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return H.set(Y.fieldPath.canonicalString(),x.value),Array.from(H.values())}return null})(h,c),v=(function(A,j){const H=[];let Y=!0;for(const x of Sa(j)){const S=x.kind===0?MS(A,x.fieldPath,A.startAt):OS(A,x.fieldPath,A.startAt);H.push(S.value),Y&&(Y=S.inclusive)}return new Au(H,Y)})(h,c),E=(function(A,j){const H=[];let Y=!0;for(const x of Sa(j)){const S=x.kind===0?OS(A,x.fieldPath,A.endAt):MS(A,x.fieldPath,A.endAt);H.push(S.value),Y&&(Y=S.inclusive)}return new Au(H,Y)})(h,c),I=this.On(c,h,v),b=this.On(c,h,E),P=this.Nn(c,h,g),L=this.Bn(c.indexId,m,I,v.inclusive,b,E.inclusive,P);return W.forEach(L,(D=>r.Y(D,t.limit).next((A=>{A.forEach((j=>{const H=Se.fromSegments(j.documentKey);a.has(H)||(a=a.add(H),u.push(H))}))}))))})).next((()=>u))}return W.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=JL(At.create(e.filters,"and")).map((r=>Ov(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,u){const c=(t!=null?t.length:1)*Math.max(r.length,s.length),h=c/(t!=null?t.length:1),m=[];for(let g=0;g<c;++g){const v=t?this.Ln(t[g/h]):Nf,E=this.kn(e,v,r[g%h],i),I=this.qn(e,v,s[g%h],a),b=u.map((P=>this.kn(e,v,P,!0)));m.push(...this.createRange(E,I,b))}return m}kn(e,t,r,i){const s=new ka(e,Se.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new ka(e,Se.empty(),t,r);return i?s.An():s}xn(e,t){const r=new tI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const u of s)r.yn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return W.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(c){let h=new xt(Gt.comparator),m=!1;for(const g of c.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:h=h.add(v.field));for(const g of c.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Hc;for(const i of Sa(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);Da.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Hc;return Da.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Hc;return Da.Kt.Dt(Md(this.databaseId,t),r.Pn((function(s){const a=Sa(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Hc);let s=0;for(const a of Sa(e)){const u=r[s++];for(const c of i)if(this.Un(t,a.fieldPath)&&Od(u))i=this.Kn(i,a,u);else{const h=c.Pn(a.kind);Da.Kt.Dt(u,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const u of i){const c=new Hc;c.seed(u.un()),Da.Kt.Dt(a,c.Pn(t.kind)),s.push(c)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof dt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=qc(e),i=Xl(e);return(t?r.J(xv,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return W.forEach(s,(u=>i.get([u.indexId,this.uid]).next((c=>{a.push((function(m,g){const v=g?new Ad(g.sequenceNumber,new Ir(Ga(g.readTime),new Se(ki(g.documentKey)),g.largestBatchId)):Ad.empty(),E=m.fields.map((([I,b])=>new Xf(Gt.fromServerFormat(I),b)));return new wp(m.indexId,m.collectionGroup,E,v)})(u,c))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ze(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=qc(e),s=Xl(e);return this.Gn(e).next((a=>i.J(xv,IDBKeyRange.bound(t,t)).next((u=>W.forEach(u,(c=>s.put(QS(c.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?W.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),W.forEach(u,(c=>this.zn(e,i,c).next((h=>{const m=this.jn(s,c);return h.isEqual(m)?W.resolve():this.Jn(e,s,c,h,m)})))))))}))}Hn(e,t,r,i){return Yl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Yl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Yl(e);let s=new xt(no);return i.ee({index:Rb,range:IDBKeyRange.only([r.indexId,this.uid,sp(this.$n(r,t))])},((a,u)=>{s=s.add(new ka(r.indexId,t,eI(u.arrayValue),eI(u.directionalValue)))})).next((()=>s))}jn(e,t){let r=new xt(no);const i=this.Qn(t,e);if(i==null)return r;const s=bv(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Od(a))for(const u of a.arrayValue.values||[])r=r.add(new ka(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new ka(t.indexId,e.key,Nf,i));return r}Jn(e,t,r,i,s){ae(rI,"Updating index entries for document '%s'",t.key);const a=[];return(function(c,h,m,g,v){const E=c.getIterator(),I=h.getIterator();let b=Kl(E),P=Kl(I);for(;b||P;){let L=!1,D=!1;if(b&&P){const A=m(b,P);A<0?D=!0:A>0&&(L=!0)}else b!=null?D=!0:L=!0;L?(g(P),P=Kl(I)):D?(v(b),b=Kl(E)):(b=Kl(E),P=Kl(I))}})(i,s,no,(u=>{a.push(this.Hn(e,t,r,u))}),(u=>{a.push(this.Yn(e,t,r,u))})),W.waitFor(a)}Gn(e){let t=1;return Xl(e).ee({index:xb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,u)=>no(a,u))).filter(((a,u,c)=>!u||no(a,c[u-1])!==0));const i=[];i.push(e);for(const a of r){const u=no(a,e),c=no(a,t);if(u===0)i[0]=e.An();else if(u>0&&c<0)i.push(a),i.push(a.An());else if(c>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const u=i[a].Vn(this.uid,Nf,Se.empty()),c=i[a+1].Vn(this.uid,Nf,Se.empty());s.push(IDBKeyRange.bound(u,c))}return s}Zn(e,t){return no(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sI)}getMinOffset(e,t){return W.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||De(44426))))).next(sI)}}function iI(n){return En(n,kd)}function Yl(n){return En(n,fd)}function qc(n){return En(n,H_)}function Xl(n){return En(n,hd)}function sI(n){Fe(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ir(e.readTime,e.documentKey,t)}const oI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function MA(n,e,t){const r=n.store(Xr),i=n.store(Tu),s=[],a=IDBKeyRange.only(t.batchId);let u=0;const c=r.ee({range:a},((m,g,v)=>(u++,v.delete())));s.push(c.next((()=>{Fe(u===1,47070,{batchId:t.batchId})})));const h=[];for(const m of t.mutations){const g=Pb(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return W.waitFor(s).next((()=>h))}function Np(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw De(14731);e=n.noDocument}return JSON.stringify(e).length}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(VA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);class xm{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Fe(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new xm(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ro(e).ee({index:Na,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=ou(e),a=ro(e);return a.add({}).next((u=>{Fe(typeof u=="number",49019);const c=new ew(u,t,r,i),h=(function(E,I,b){const P=b.baseMutations.map((D=>Rp(E.yt,D))),L=b.mutations.map((D=>Rp(E.yt,D)));return{userId:I,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:P,mutations:L}})(this.serializer,this.userId,c),m=[];let g=new xt(((v,E)=>Ze(v.canonicalString(),E.canonicalString())));for(const v of i){const E=Pb(this.userId,v.key.path,u);g=g.add(v.key.path.popLast()),m.push(a.put(h)),m.push(s.put(E,DO))}return g.forEach((v=>{m.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=c.keys()})),W.waitFor(m).next((()=>c))}))}lookupMutationBatch(e,t){return ro(e).get(t).next((r=>r?(Fe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ra(this.serializer,r)):null))}er(e,t){return this.Xn[t]?W.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ro(e).ee({index:Na,range:i},((a,u,c)=>{u.userId===this.userId&&(Fe(u.batchId>=r,47524,{tr:r}),s=Ra(this.serializer,u)),c.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Oa;return ro(e).ee({index:Na,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Oa],[this.userId,Number.POSITIVE_INFINITY]);return ro(e).J(Na,t).next((r=>r.map((i=>Ra(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ou(e).ee({range:i},((a,u,c)=>{const[h,m,g]=a,v=ki(m);if(h===this.userId&&t.path.isEqual(v))return ro(e).get(g).next((E=>{if(!E)throw De(61480,{nr:a,batchId:g});Fe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:g}),s.push(Ra(this.serializer,E))}));c.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(Ze);const i=[];return t.forEach((s=>{const a=Jf(this.userId,s.path),u=IDBKeyRange.lowerBound(a),c=ou(e).ee({range:u},((h,m,g)=>{const[v,E,I]=h,b=ki(E);v===this.userId&&s.path.isEqual(b)?r=r.add(I):g.done()}));i.push(c)})),W.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Jf(this.userId,r),a=IDBKeyRange.lowerBound(s);let u=new xt(Ze);return ou(e).ee({range:a},((c,h,m)=>{const[g,v,E]=c,I=ki(v);g===this.userId&&r.isPrefixOf(I)?I.length===i&&(u=u.add(E)):m.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(ro(e).get(s).next((a=>{if(a===null)throw De(35274,{batchId:s});Fe(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(Ra(this.serializer,a))})))})),W.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return MA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),W.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return ou(e).ee({range:r},((s,a,u)=>{if(s[0]===this.userId){const c=ki(s[1]);i.push(c)}else u.done()})).next((()=>{Fe(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return OA(e,this.userId,t)}_r(e){return LA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Oa,lastStreamToken:""}))}}function OA(n,e,t){const r=Jf(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return ou(n).ee({range:s,X:!0},((u,c,h)=>{const[m,g,v]=u;m===e&&g===i&&(a=!0),h.done()})).next((()=>a))}function ro(n){return En(n,Xr)}function ou(n){return En(n,Tu)}function LA(n){return En(n,Rd)}class Ka{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ka(0)}static cr(){return new Ka(-1)}}class t2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ka(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Be.fromTimestamp(new bt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Jl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Fe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Jl(e).ee(((a,u)=>{const c=ad(u);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))})).next((()=>W.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Jl(e).ee(((r,i)=>{const s=ad(i);t(s)}))}lr(e){return aI(e).get(Sp).next((t=>(Fe(t!==null,2888),t)))}hr(e,t){return aI(e).put(Sp,t)}Pr(e,t){return Jl(e).put(RA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ha(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Jl(e).ee({range:i,index:Ab},((a,u,c)=>{const h=ad(u);Xd(t,h.target)&&(s=h,c.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=co(e);return t.forEach((a=>{const u=Wn(a.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,a))})),W.waitFor(i)}removeMatchingKeys(e,t,r){const i=co(e);return W.forEach(t,(s=>{const a=Wn(s.path);return W.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=co(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=co(e);let s=it();return i.ee({range:r,X:!0},((a,u,c)=>{const h=ki(a[1]),m=new Se(h);s=s.add(m)})).next((()=>s))}containsKey(e,t){const r=Wn(t.path),i=IDBKeyRange.bound([r],[yb(r)],!1,!0);let s=0;return co(e).ee({index:W_,X:!0,range:i},(([a,u],c,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}At(e,t){return Jl(e).get(t).next((r=>r?ad(r):null))}}function Jl(n){return En(n,Su)}function aI(n){return En(n,La)}function co(n){return En(n,Iu)}const lI="LruGarbageCollector",n2=1048576;function uI([n,e],[t,r]){const i=Ze(n,t);return i===0?Ze(e,r):i}class r2{constructor(e){this.Ir=e,this.buffer=new xt(uI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(lI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?ae(lI,"Ignoring IndexedDB error during garbage collection: ",t):await jo(t)}await this.Vr(3e5)}))}}class i2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return W.resolve(sr.ce);const r=new r2(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(oI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),nu()<=ut.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function UA(n,e){return new i2(n,e)}class s2{constructor(e,t){this.db=e,this.garbageCollector=UA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return Vf(e,r)}removeReference(e,t,r){return Vf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Vf(e,t)}br(e,t){return(function(i,s){let a=!1;return LA(i).te((u=>OA(i,u,s).next((c=>(c&&(a=!0),W.resolve(!c)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,u)=>{if(u<=t){const c=this.br(e,a).next((h=>{if(!h)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Be.min()),co(e).delete((function(g){return[0,Wn(g.path)]})(a)))))}));i.push(c)}})).next((()=>W.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Vf(e,t)}Sr(e,t){const r=co(e);let i,s=sr.ce;return r.ee({index:W_},(([a,u],{path:c,sequenceNumber:h})=>{a===0?(s!==sr.ce&&t(new Se(ki(i)),s),s=h,i=c):s=sr.ce})).next((()=>{s!==sr.ce&&t(new Se(ki(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vf(n,e){return co(n).put((function(r,i){return{targetId:0,path:Wn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class jA{constructor(){this.changes=new As((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _a(e).put(r)}removeEntry(e,t,r){return _a(e).delete((function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Dp(a),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Jt.newInvalidDocument(t);return _a(e).ee({index:Zf,range:IDBKeyRange.only(Gc(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Jt.newInvalidDocument(t)};return _a(e).ee({index:Zf,range:IDBKeyRange.only(Gc(t))},((i,s)=>{r={document:this.Cr(t,s),size:Np(s)}})).next((()=>r))}getEntries(e,t){let r=Tr();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Tr(),i=new Vt(Se.comparator);return this.Fr(e,t,((s,a)=>{const u=this.Cr(s,a);r=r.insert(s,u),i=i.insert(s,Np(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return W.resolve();let i=new xt(hI);t.forEach((c=>i=i.add(c)));const s=IDBKeyRange.bound(Gc(i.first()),Gc(i.last())),a=i.getIterator();let u=a.getNext();return _a(e).ee({index:Zf,range:s},((c,h,m)=>{const g=Se.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&hI(u,g)<0;)r(u,null),u=a.getNext();u&&u.isEqual(g)&&(r(u,h),u=a.hasNext()?a.getNext():null),u?m.j(Gc(u)):m.done()})).next((()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),Dp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _a(e).J(IDBKeyRange.bound(u,c,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let m=Tr();for(const g of h){const v=this.Cr(Se.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Zd(t,v)||i.has(v.key))&&(m=m.insert(v.key,v))}return m}))}getAllFromCollectionGroup(e,t,r,i){let s=Tr();const a=dI(t,r),u=dI(t,Ir.max());return _a(e).ee({index:bb,range:IDBKeyRange.bound(a,u,!0)},((c,h,m)=>{const g=this.Cr(Se.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()})).next((()=>s))}newChangeBuffer(e){return new a2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return cI(e).get(Av).next((t=>(Fe(!!t,20021),t)))}Dr(e,t){return cI(e).put(Av,t)}Cr(e,t){if(t){const r=HL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Be.min())))return r}return Jt.newInvalidDocument(e)}}function BA(n){return new o2(n)}class a2 extends jA{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new As((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new xt(((s,a)=>Ze(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),a.isValidDocument()){const c=GS(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=Np(c);r+=h-u.size,t.push(this.Nr.addEntry(e,s,c))}else if(r-=u.size,this.trackRemovals){const c=GS(this.Nr.serializer,a.convertToNoDocument(Be.min()));t.push(this.Nr.addEntry(e,s,c))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function cI(n){return En(n,Dd)}function _a(n){return En(n,Tp)}function Gc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dI(n,e){const t=e.documentKey.path.toArray();return[n,Dp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function hI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Ze(t[s],r[s]),i)return i;return i=Ze(t.length,r.length),i||(i=Ze(t[t.length-2],r[r.length-2]),i||Ze(t[t.length-1],r[r.length-1]))}class l2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $A{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&yd(r.mutation,i,or.empty(),bt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,it()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=it()){const i=Ni();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=sd();return s.forEach(((u,c)=>{a=a.insert(u,c.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Ni();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,it())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=Tr();const a=gd(),u=(function(){return gd()})();return t.forEach(((c,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof xs)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),yd(m.mutation,h,m.mutation.getFieldMask(),bt.now())):a.set(h.key,or.empty())})),this.recalculateAndSaveOverlays(e,s).next((c=>(c.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>u.set(h,new l2(m,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=gd();let i=new Vt(((a,u)=>a-u)),s=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((c=>{const h=t.get(c);if(h===null)return;let m=r.get(c)||or.empty();m=u.applyToLocalView(h,m),r.set(c,m);const g=(i.get(u.batchId)||it()).add(c);i=i.insert(u.batchId,g)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,g=oA();m.forEach((v=>{if(!s.has(v)){const E=hA(t.get(v),r.get(v));E!==null&&g.set(v,E),s=s.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return W.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(Ni());let u=Eu,c=s;return a.next((h=>W.forEach(h,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?W.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{c=c.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,c,h,it()))).next((m=>({batchId:u,changes:sA(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((r=>{let i=sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=sd();return this.indexManager.getCollectionParents(e,s).next((u=>W.forEach(u,(c=>{const h=(function(g,v){return new Jd(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{a=a.insert(g,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((c,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Jt.newInvalidDocument(m)))}));let u=sd();return a.forEach(((c,h)=>{const m=s.get(c);m!==void 0&&yd(m.mutation,h,or.empty(),bt.now()),Zd(t,h)&&(u=u.insert(c,h))})),u}))}}class u2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return W.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Yn(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:DA(i.bundledQuery),readTime:Yn(i.readTime)}})(t)),W.resolve()}}class c2{constructor(){this.overlays=new Vt(Se.comparator),this.qr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ni();return W.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),W.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const i=Ni(),s=t.length+1,a=new Se(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Vt(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=Ni(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Ni(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return W.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new nw(t,r));let s=this.qr.get(t);s===void 0&&(s=it(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class d2{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}class aw{constructor(){this.Qr=new xt(Pn.$r),this.Ur=new xt(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Pn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Se(new St([])),r=new Pn(t,e),i=new Pn(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new St([])),r=new Pn(t,e),i=new Pn(t,e+1);let s=it();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new Pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}class h2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Pn.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ew(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Zr=this.Zr.add(new Pn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return W.resolve(a)}lookupMutationBatch(e,t){return W.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Oa:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pn(t,0),i=new Pn(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const u=this.Xr(a.Yr);s.push(u)})),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(Ze);return t.forEach((i=>{const s=new Pn(i,0),a=new Pn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(u=>{r=r.add(u.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const a=new Pn(new Se(s),0);let u=new xt(Ze);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.Yr)),!0)}),a),W.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Fe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(t.mutations,(i=>{const s=new Pn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Pn(t,0),i=this.Zr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class f2{constructor(e){this.ri=e,this.docs=(function(){return new Vt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let r=Tr();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jt.newInvalidDocument(i))})),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Tr();const a=t.path,u=new Se(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||$_(Eb(m),r)<=0||(i.has(m.key)||Zd(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return W.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new p2(this)}getSize(e){return W.resolve(this.size)}}class p2 extends jA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),W.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class m2{constructor(e){this.persistence=e,this.si=new As((t=>Ha(t)),Xd),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.oi=0,this._i=new aw,this.targetCount=0,this.ai=Ka.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),W.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Pr(t),W.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),W.waitFor(s).next((()=>i))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this._i.containsKey(t))}}class lw{constructor(e,t){this.ui={},this.overlays={},this.ci=new sr(0),this.li=!1,this.li=!0,this.hi=new d2,this.referenceDelegate=e(this),this.Pi=new m2(this),this.indexManager=new ZL,this.remoteDocumentCache=(function(i){return new f2(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new xA(t),this.Ii=new u2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new c2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new h2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ae("MemoryPersistence","Starting transaction:",e);const i=new g2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class g2 extends Sb{constructor(e){super(),this.currentSequenceNumber=e}}class Rm{constructor(e){this.persistence=e,this.Ri=new aw,this.Vi=null}static mi(e){return new Rm(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const i=Se.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vp{constructor(e,t){this.persistence=e,this.pi=new As((r=>Wn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=UA(this,t)}static mi(e,t){return new Vp(e,t)}Ei(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return W.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?W.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((u=>{u||(r++,s.removeEntry(a,Be.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tp(e.data.value)),t}br(e,t,r){return W.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class y2{constructor(e){this.serializer=e}k(e,t,r,i){const s=new ym("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(Yd)})(e),(function(c){c.createObjectStore(Rd,{keyPath:RO}),c.createObjectStore(Xr,{keyPath:SS,autoIncrement:!0}).createIndex(Na,IS,{unique:!0}),c.createObjectStore(Tu)})(e),fI(e),(function(c){c.createObjectStore(Ia)})(e));let a=W.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Iu),c.deleteObjectStore(Su),c.deleteObjectStore(La)})(e),fI(e)),a=a.next((()=>(function(c){const h=c.store(La),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return h.put(Sp,m)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(c,h){return h.store(Xr).J().next((g=>{c.deleteObjectStore(Xr),c.createObjectStore(Xr,{keyPath:SS,autoIncrement:!0}).createIndex(Na,IS,{unique:!0});const v=h.store(Xr),E=g.map((I=>v.put(I)));return W.waitFor(E)}))})(e,s)))),a=a.next((()=>{(function(c){c.createObjectStore(Cu,{keyPath:UO})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(c){c.createObjectStore(Dd)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(c){c.createObjectStore(_m,{keyPath:jO})})(e),(function(c){c.createObjectStore(wm,{keyPath:BO})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(c){const h=c.createObjectStore(Em,{keyPath:KO});h.createIndex(Rv,QO,{unique:!1}),h.createIndex(Db,YO,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(c){const h=c.createObjectStore(Tp,{keyPath:kO});h.createIndex(Zf,NO),h.createIndex(bb,VO)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Ia)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(c){c.createObjectStore(H_,{keyPath:$O,autoIncrement:!0}).createIndex(xv,zO,{unique:!1}),c.createObjectStore(hd,{keyPath:WO}).createIndex(xb,HO,{unique:!1}),c.createObjectStore(fd,{keyPath:qO}).createIndex(Rb,GO,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(hd).clear()})).next((()=>{t.objectStore(fd).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(c){c.createObjectStore(q_,{keyPath:XO})})(e)}))),r<18&&i>=18&&nb()&&(a=a.next((()=>{t.objectStore(hd).clear()})).next((()=>{t.objectStore(fd).clear()}))),a}wi(e){let t=0;return e.store(Ia).ee(((r,i)=>{t+=Np(i)})).next((()=>{const r={byteSize:t};return e.store(Dd).put(Av,r)}))}yi(e){const t=e.store(Rd),r=e.store(Xr);return t.J().next((i=>W.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,Oa],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Na,a).next((u=>W.forEach(u,(c=>{Fe(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const h=Ra(this.serializer,c);return MA(e,s.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(Iu),r=e.store(Ia);return e.store(La).get(Sp).next((i=>{const s=[];return r.ee(((a,u)=>{const c=new St(a),h=(function(g){return[0,Wn(g)]})(c);s.push(t.get(h).next((m=>m?W.resolve():(g=>t.put({targetId:0,path:Wn(g),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>W.waitFor(s)))}))}bi(e,t){e.createObjectStore(kd,{keyPath:FO});const r=t.store(kd),i=new ow,s=a=>{if(i.add(a)){const u=a.lastSegment(),c=a.popLast();return r.put({collectionId:u,parent:Wn(c)})}};return t.store(Ia).ee({X:!0},((a,u)=>{const c=new St(a);return s(c.popLast())})).next((()=>t.store(Tu).ee({X:!0},(([a,u,c],h)=>{const m=ki(u);return s(m.popLast())}))))}Di(e){const t=e.store(Su);return t.ee(((r,i)=>{const s=ad(i),a=RA(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Ia),i=[];return r.ee(((s,a)=>{const u=t.store(Tp),c=(function(g){return g.document?new Se(St.fromString(g.document.name).popFirst(5)):g.noDocument?Se.fromSegments(g.noDocument.path):g.unknownDocument?Se.fromSegments(g.unknownDocument.path):De(36783)})(a).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(h))})).next((()=>W.waitFor(i)))}Fi(e,t){const r=t.store(Xr),i=BA(this.serializer),s=new lw(Rm.mi,this.serializer.yt);return r.J().next((a=>{const u=new Map;return a.forEach((c=>{let h=u.get(c.userId)??it();Ra(this.serializer,c).keys().forEach((m=>h=h.add(m))),u.set(c.userId,h)})),W.forEach(u,((c,h)=>{const m=new bn(h),g=Am.wt(this.serializer,m),v=s.getIndexManager(m),E=xm.wt(m,this.serializer,v,s.referenceDelegate);return new $A(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new Dv(t,sr.ce),c).next()}))}))}}function fI(n){n.createObjectStore(Iu,{keyPath:OO}).createIndex(W_,LO,{unique:!0}),n.createObjectStore(Su,{keyPath:"targetId"}).createIndex(Ab,MO,{unique:!0}),n.createObjectStore(La)}const io="IndexedDbPersistence",My=18e5,Oy=5e3,Ly="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",v2="main";class uw{constructor(e,t,r,i,s,a,u,c,h,m,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=u,this.xi=h,this.Oi=m,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!uw.v())throw new ge(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s2(this,i),this.$i=t+v2,this.serializer=new xA(c),this.Ui=new So(this.$i,this.Ni,new y2(this.serializer)),this.hi=new GL,this.Pi=new t2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=BA(this.serializer),this.Ii=new qL,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&sn(io,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(te.FAILED_PRECONDITION,Ly);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new sr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Mf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Bo(e))return ae(io,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae(io,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Kc(e).get(Gl).next((t=>W.resolve(this.es(t))))}ts(e){return Mf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,My)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=En(t,Cu);return r.J().next((i=>{const s=this.ss(i,My),a=i.filter((u=>s.indexOf(u)===-1));return W.forEach(a,(u=>r.delete(u.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?W.resolve(!0):Kc(e).get(Gl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Oy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ge(te.FAILED_PRECONDITION,Ly);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mf(e).J().next((r=>this.ss(r,Oy).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||a&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ae(io,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Yd,Cu],(e=>{const t=new Dv(e,sr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Mf(e).J().next((t=>this.ss(t,My).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return xm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new e2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Am.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ae(io,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(c){return c===18?eL:c===17?Mb:c===16?ZO:c===15?G_:c===14?Vb:c===13?Nb:c===12?JO:c===11?kb:void De(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(u=>(a=new Dv(u,this.ci?this.ci.next():sr.ce),t==="readwrite-primary"?this.Hi(a).next((c=>!!c||this.Yi(a))).next((c=>{if(!c)throw sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ge(te.FAILED_PRECONDITION,Tb);return r(a)})).next((c=>this.Xi(a).next((()=>c)))):this.Is(a).next((()=>r(a)))))).then((u=>(a.raiseOnCommittedEvent(),u)))}Is(e){return Kc(e).get(Gl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Oy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(te.FAILED_PRECONDITION,Ly)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kc(e).put(Gl,t)}static v(){return So.v()}Zi(e){const t=Kc(e);return t.get(Gl).next((r=>this.es(r)?(ae(io,"Releasing primary lease."),t.delete(Gl)):W.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(sn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;tb()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ae(io,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return sn(io,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){sn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kc(n){return En(n,Yd)}function Mf(n){return En(n,Cu)}function zA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class cw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=it(),i=it();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cw(e,t.fromCache,r,i)}}class _2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tb()?8:Ib(wn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new _2;return this.Ss(e,t,a).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(nu()<=ut.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ru(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(nu()<=ut.DEBUG&&ae("QueryEngine","Query:",ru(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(nu()<=ut.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ru(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):W.resolve())}ys(e,t){if(LS(t))return W.resolve(null);let r=Sr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Ap(t,null,"F"),r=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=it(...s);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((c=>{const h=this.Ds(t,u);return this.Cs(t,h,a,c.readTime)?this.ys(e,Ap(t,null,"F")):this.vs(e,h,t,c)}))))})))))}ws(e,t,r,i){return LS(t)||i.isEqual(Be.min())?W.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?W.resolve(null):(nu()<=ut.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ru(t)),this.vs(e,a,t,wb(i,Eu)).next((u=>u)))}))}Ds(e,t){let r=new xt(rA(e));return t.forEach(((i,s)=>{Zd(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return nu()<=ut.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ru(t)),this.ps.getDocumentsMatchingQuery(e,t,Ir.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const dw="LocalStore",w2=3e8;class E2{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vt(Ze),this.xs=new As((s=>Ha(s)),Xd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $A(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function HA(n,e,t,r){return new E2(n,e,t,r)}async function qA(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let c=it();for(const h of i){a.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return t.localDocuments.getDocuments(r,c).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function T2(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,c,h,m){const g=h.batch,v=g.keys();let E=W.resolve();return v.forEach((I=>{E=E.next((()=>m.getEntry(c,I))).next((b=>{const P=h.docVersions.get(I);Fe(P!==null,48541),b.version.compareTo(P)<0&&(g.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),m.addEntry(b)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(c,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let c=it();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function GA(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function S2(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;u.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let E=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(un.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,r)),i=i.insert(g,E),(function(b,P,L){return b.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=w2?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,E,m)&&u.push(t.Pi.updateTargetData(s,E))}));let c=Tr(),h=it();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(I2(s,a,e.documentUpdates).next((m=>{c=m.ks,h=m.qs}))),!r.isEqual(Be.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return W.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,c,h))).next((()=>c))})).then((s=>(t.Ms=i,s)))}function I2(n,e,t){let r=it(),i=it();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Tr();return t.forEach(((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Be.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):ae(dw,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)})),{ks:a,qs:i}}))}function C2(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Oa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Mp(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,W.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new hs(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Nu(n,e,t){const r=Ve(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Bo(a))throw a;ae(dw,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Hv(n,e,t){const r=Ve(n);let i=Be.min(),s=it();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,h,m){const g=Ve(c),v=g.xs.get(m);return v!==void 0?W.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,m)})(r,a,Sr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,u.targetId).next((c=>{s=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Be.min(),t?s:it()))).next((u=>(YA(r,nA(e),u),{documents:u,Qs:s})))))}function KA(n,e){const t=Ve(n),r=Ve(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function QA(n,e){const t=Ve(n),r=t.Os.get(e)||Be.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,wb(r,Eu),Number.MAX_SAFE_INTEGER))).then((i=>(YA(t,e,i),i)))}function YA(n,e,t){let r=n.Os.get(e)||Be.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}const XA="firestore_clients";function pI(n,e){return`${XA}_${n}_${e}`}const JA="firestore_mutations";function mI(n,e,t){let r=`${JA}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const ZA="firestore_targets";function Fy(n,e){return`${ZA}_${n}_${e}`}const xi="SharedClientState";class Op{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ge(i.error.code,i.error.message))),a?new Op(e,t,i.state,s):(sn(xi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ge(r.error.code,r.error.message))),s?new vd(e,r.state,i):(sn(xi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=J_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=Cb(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Lp(e,s):(sn(xi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class hw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new hw(t.clientId,t.onlineState):(sn(xi,`Failed to parse online state: ${e}`),null)}}class qv{constructor(){this.activeTargetIds=J_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uy{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Vt(Ze),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=pI(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new qv),this.ro=new RegExp(`^${XA}_${a}_([^_]*)$`),this.io=new RegExp(`^${JA}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ZA}_${a}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(pI(this.persistenceKey,r));if(i){const s=Lp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Fy(this.persistenceKey,e));if(i){const s=vd.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ae(xi,"READ",e,t),t}setItem(e,t){ae(xi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ae(xi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ae(xi,"EVENT",t.key,t.newValue),t.key===this.eo)return void sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=sr.ce;if(s!=null)try{const u=JSON.parse(s);Fe(typeof u=="number",30636,{So:s}),a=u}catch(u){sn(xi,"Failed to read sequence number from WebStorage",u)}return a})(t.newValue);r!==sr.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new Op(this.currentUser,e,t,r),s=mI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=mI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=Fy(this.persistenceKey,e),s=new vd(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Lp.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Op.Ws(new bn(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return vd.Ws(i,t)}uo(e){return hw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ae(xi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],u=[];return s.forEach((c=>{i.has(c)||a.push(c)})),i.forEach((c=>{s.has(c)||u.push(c)})),this.syncEngine.Fo(a,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=J_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class ex{constructor(){this.Mo=new qv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class P2{Oo(e){}shutdown(){}}const gI="ConnectivityMonitor";class yI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(gI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(gI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Of=null;function Gv(){return Of===null?Of=(function(){return 268435456+Math.round(2147483648*Math.random())})():Of++,"0x"+Of.toString(16)}const jy="RestConnection",b2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ip?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=Gv(),u=this.zo(e,t.toUriEncodedString());ae(jy,`Sending RPC '${e}' ${a}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:h}=new URL(u),m=Uo(h);return this.Jo(e,u,c,r,m).then((g=>(ae(jy,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw Ro(jy,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=b2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class x2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Un="WebChannelConnection";class R2 extends A2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=Gv();return new Promise(((u,c)=>{const h=new cb;h.setWithCredentials(!0),h.listenOnce(db.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Yf.NO_ERROR:const g=h.getResponseJson();ae(Un,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Yf.TIMEOUT:ae(Un,`RPC '${e}' ${a} timed out`),c(new ge(te.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const v=h.getStatus();if(ae(Un,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E?.error;if(I&&I.status&&I.message){const b=(function(L){const D=L.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(D)>=0?D:te.UNKNOWN})(I.status);c(new ge(b,I.message))}else c(new ge(te.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ge(te.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ae(Un,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);ae(Un,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=Gv(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=pb(),u=fb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const m=s.join("");ae(Un,`Creating RPC '${e}' stream ${i}: ${m}`,c);const g=a.createWebChannel(m,c);this.I_(g);let v=!1,E=!1;const I=new x2({Yo:P=>{E?ae(Un,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(ae(Un,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),ae(Un,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},Zo:()=>g.close()}),b=(P,L,D)=>{P.listen(L,(A=>{try{D(A)}catch(j){setTimeout((()=>{throw j}),0)}}))};return b(g,id.EventType.OPEN,(()=>{E||(ae(Un,`RPC '${e}' stream ${i} transport opened.`),I.o_())})),b(g,id.EventType.CLOSE,(()=>{E||(E=!0,ae(Un,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(g))})),b(g,id.EventType.ERROR,(P=>{E||(E=!0,Ro(Un,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),I.a_(new ge(te.UNAVAILABLE,"The operation could not be completed")))})),b(g,id.EventType.MESSAGE,(P=>{if(!E){const L=P.data[0];Fe(!!L,16349);const D=L,A=D?.error||D[0]?.error;if(A){ae(Un,`RPC '${e}' stream ${i} received error:`,A);const j=A.status;let H=(function(S){const k=hn[S];if(k!==void 0)return mA(k)})(j),Y=A.message;H===void 0&&(H=te.INTERNAL,Y="Unknown error status: "+j+" with message "+A.message),E=!0,I.a_(new ge(H,Y)),g.close()}else ae(Un,`RPC '${e}' stream ${i} received:`,L),I.u_(L)}})),b(u,hb.STAT_EVENT,(P=>{P.stat===Cv.PROXY?ae(Un,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Cv.NOPROXY&&ae(Un,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function tx(){return typeof window<"u"?window:null}function op(){return typeof document<"u"?document:null}function Dm(n){return new ML(n,!0)}class nx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const vI="PersistentStream";class rx{constructor(e,t,r,i,s,a,u,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(vI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ae(vI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class D2 extends rx{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=FL(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Be.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Be.min():a.readTime?Yn(a.readTime):Be.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=jv(this.serializer),t.addTarget=(function(s,a){let u;const c=a.target;if(u=Pp(c)?{documents:SA(s,c)}:{query:IA(s,c).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=vA(s,a.resumeToken);const h=Fv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(Be.min())>0){u.readTime=ku(s,a.snapshotVersion.toTimestamp());const h=Fv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=jL(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=jv(this.serializer),t.removeTarget=e,this.q_(t)}}class k2 extends rx{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=UL(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=jv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Rp(this.serializer,r)))};this.q_(t)}}class N2{}class V2 extends N2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,Uv(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(te.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,Uv(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(te.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class M2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sn(t),this.aa=!1):ae("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qa="RemoteStore";class O2{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{il(this)&&(ae(Qa,"Restarting streams for network reachability change."),await(async function(c){const h=Ve(c);h.Ea.add(4),await rh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await km(h)})(this))}))})),this.Ra=new M2(r,i)}}async function km(n){if(il(n))for(const e of n.da)await e(!0)}async function rh(n){for(const e of n.da)await e(!1)}function Nm(n,e){const t=Ve(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),mw(t)?pw(t):Ku(t).O_()&&fw(t,e))}function Vu(n,e){const t=Ve(n),r=Ku(t);t.Ia.delete(e),r.O_()&&ix(t,e),t.Ia.size===0&&(r.O_()?r.L_():il(t)&&t.Ra.set("Unknown"))}function fw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ku(n).Y_(e)}function ix(n,e){n.Va.Ue(e),Ku(n).Z_(e)}function pw(n){n.Va=new DL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ku(n).start(),n.Ra.ua()}function mw(n){return il(n)&&!Ku(n).x_()&&n.Ia.size>0}function il(n){return Ve(n).Ea.size===0}function sx(n){n.Va=void 0}async function L2(n){n.Ra.set("Online")}async function F2(n){n.Ia.forEach(((e,t)=>{fw(n,e)}))}async function U2(n,e){sx(n),mw(n)?(n.Ra.ha(e),pw(n)):n.Ra.set("Unknown")}async function j2(n,e,t){if(n.Ra.set("Online"),e instanceof yA&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){ae(Qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fp(n,r)}else if(e instanceof ip?n.Va.Ze(e):e instanceof gA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Be.min()))try{const r=await GA(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.Va.Tt(a);return u.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(c.resumeToken,a))}})),u.targetMismatches.forEach(((c,h)=>{const m=s.Ia.get(c);if(!m)return;s.Ia.set(c,m.withResumeToken(un.EMPTY_BYTE_STRING,m.snapshotVersion)),ix(s,c);const g=new hs(m.target,c,h,m.sequenceNumber);fw(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ae(Qa,"Failed to raise snapshot:",r),await Fp(n,r)}}async function Fp(n,e,t){if(!Bo(e))throw e;n.Ea.add(1),await rh(n),n.Ra.set("Offline"),t||(t=()=>GA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ae(Qa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await km(n)}))}function ox(n,e){return e().catch((t=>Fp(n,t,e)))}async function Gu(n){const e=Ve(n),t=No(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Oa;for(;B2(e);)try{const i=await C2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,$2(e,i)}catch(i){await Fp(e,i)}ax(e)&&lx(e)}function B2(n){return il(n)&&n.Ta.length<10}function $2(n,e){n.Ta.push(e);const t=No(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ax(n){return il(n)&&!No(n).x_()&&n.Ta.length>0}function lx(n){No(n).start()}async function z2(n){No(n).ra()}async function W2(n){const e=No(n);for(const t of n.Ta)e.ea(t.mutations)}async function H2(n,e,t){const r=n.Ta.shift(),i=tw.from(r,e,t);await ox(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Gu(n)}async function q2(n,e){e&&No(n).X_&&await(async function(r,i){if((function(a){return AL(a)&&a!==te.ABORTED})(i.code)){const s=r.Ta.shift();No(r).B_(),await ox(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Gu(r)}})(n,e),ax(n)&&lx(n)}async function _I(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),ae(Qa,"RemoteStore received new credentials");const r=il(t);t.Ea.add(3),await rh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await km(t)}async function Kv(n,e){const t=Ve(n);e?(t.Ea.delete(2),await km(t)):e||(t.Ea.add(2),await rh(t),t.Ra.set("Unknown"))}function Ku(n){return n.ma||(n.ma=(function(t,r,i){const s=Ve(t);return s.sa(),new D2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:L2.bind(null,n),t_:F2.bind(null,n),r_:U2.bind(null,n),H_:j2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),mw(n)?pw(n):n.Ra.set("Unknown")):(await n.ma.stop(),sx(n))}))),n.ma}function No(n){return n.fa||(n.fa=(function(t,r,i){const s=Ve(t);return s.sa(),new k2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:z2.bind(null,n),r_:q2.bind(null,n),ta:W2.bind(null,n),na:H2.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Gu(n)):(await n.fa.stop(),n.Ta.length>0&&(ae(Qa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class gw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new gw(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(n,e){if(sn("AsyncQueue",`${e}: ${n}`),Bo(n))return new ge(te.UNAVAILABLE,`${e}: ${n}`);throw n}class fu{static emptySet(e){return new fu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=sd(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class wI{constructor(){this.ga=new Vt(Se.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Mu{constructor(e,t,r,i,s,a,u,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new Mu(e,t,fu.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class G2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class K2{constructor(){this.queries=EI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ve(t),s=i.queries;i.queries=EI(),s.forEach(((a,u)=>{for(const c of u.Sa)c.onError(r)}))})(this,new ge(te.ABORTED,"Firestore shutting down"))}}function EI(){return new As((n=>tA(n)),Cm)}async function ux(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new G2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=Vm(a,`Initialization of query '${ru(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&yw(t)}async function cx(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Q2(n,e){const t=Ve(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Sa)u.Fa(i)&&(r=!0);a.wa=i}}r&&yw(t)}function Y2(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function yw(n){n.Ca.forEach((e=>{e.next()}))}var Qv,TI;(TI=Qv||(Qv={})).Ma="default",TI.Cache="cache";class dx{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qv.Cache}}class hx{constructor(e){this.key=e}}class fx{constructor(e){this.key=e}}class X2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=it(),this.mutatedKeys=it(),this.eu=rA(e),this.tu=new fu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new wI,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),E=Zd(this.query,g)?g:null,I=!!v&&this.mutatedKeys.has(v.key),b=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;v&&E?v.data.isEqual(E.data)?I!==b&&(r.track({type:3,doc:E}),P=!0):this.su(v,E)||(r.track({type:2,doc:E}),P=!0,(c&&this.eu(E,c)>0||h&&this.eu(E,h)<0)&&(u=!0)):!v&&E?(r.track({type:0,doc:E}),P=!0):v&&!E&&(r.track({type:1,doc:v}),P=!0,(c||h)&&(u=!0)),P&&(E?(a=a.add(E),s=b?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,g)=>(function(E,I){const b=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:P})}};return b(E)-b(I)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new Mu(this.query,e.tu,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=it(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new fx(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new hx(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=it();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qu="SyncEngine";class J2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Z2{constructor(e){this.key=e,this.hu=!1}}class eF{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new As((u=>tA(u)),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Se.comparator),this.Au=new Map,this.Ru=new aw,this.Vu={},this.mu=new Map,this.fu=Ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tF(n,e,t=!0){const r=Mm(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await px(r,e,t,!0),i}async function nF(n,e){const t=Mm(n);await px(t,e,!0,!1)}async function px(n,e,t,r){const i=await Mp(n.localStore,Sr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await vw(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Nm(n.remoteStore,i),u}async function vw(n,e,t,r,i){n.pu=(g,v,E)=>(async function(b,P,L,D){let A=P.view.ru(L);A.Cs&&(A=await Hv(b.localStore,P.query,!1).then((({documents:x})=>P.view.ru(x,A))));const j=D&&D.targetChanges.get(P.targetId),H=D&&D.targetMismatches.get(P.targetId)!=null,Y=P.view.applyChanges(A,b.isPrimaryClient,j,H);return Yv(b,P.targetId,Y.au),Y.snapshot})(n,g,v,E);const s=await Hv(n.localStore,e,!0),a=new X2(e,s.Qs),u=a.ru(s.documents),c=nh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,c);Yv(n,t,h.au);const m=new J2(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function rF(n,e,t){const r=Ve(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Cm(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Vu(r.remoteStore,i.targetId),Ou(r,i.targetId)})).catch(jo)):(Ou(r,i.targetId),await Nu(r.localStore,i.targetId,!0))}async function iF(n,e){const t=Ve(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vu(t.remoteStore,r.targetId))}async function sF(n,e,t){const r=Tw(n);try{const i=await(function(a,u){const c=Ve(a),h=bt.now(),m=u.reduce(((E,I)=>E.add(I.key)),it());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let I=Tr(),b=it();return c.Ns.getEntries(E,m).next((P=>{I=P,I.forEach(((L,D)=>{D.isValidDocument()||(b=b.add(L))}))})).next((()=>c.localDocuments.getOverlayedDocuments(E,I))).next((P=>{g=P;const L=[];for(const D of u){const A=PL(D,g.get(D.key).overlayedDocument);A!=null&&L.push(new xs(D.key,A,Hb(A.value.mapValue),_n.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,L,u)})).next((P=>{v=P;const L=P.applyToLocalDocumentSet(g,b);return c.documentOverlayCache.saveOverlays(E,P.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:sA(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new Vt(Ze)),h=h.insert(u,c),a.Vu[a.currentUser.toKey()]=h})(r,i.batchId,t),await zo(r,i.changes),await Gu(r.remoteStore)}catch(i){const s=Vm(i,"Failed to persist write");t.reject(s)}}async function mx(n,e){const t=Ve(n);try{const r=await S2(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Fe(a.hu,14607):i.removedDocuments.size>0&&(Fe(a.hu,42227),a.hu=!1))})),await zo(t,r,e)}catch(r){await jo(r)}}function SI(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const c=Ve(a);c.onlineState=u;let h=!1;c.queries.forEach(((m,g)=>{for(const v of g.Sa)v.va(u)&&(h=!0)})),h&&yw(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oF(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Vt(Se.comparator);a=a.insert(s,Jt.newNoDocument(s,Be.min()));const u=it().add(s),c=new th(Be.min(),new Map,new Vt(Ze),a,u);await mx(r,c),r.du=r.du.remove(s),r.Au.delete(e),Ew(r)}else await Nu(r.localStore,e,!1).then((()=>Ou(r,e,t))).catch(jo)}async function aF(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=await T2(t.localStore,e);ww(t,r,null),_w(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await zo(t,i)}catch(i){await jo(i)}}async function lF(n,e,t){const r=Ve(n);try{const i=await(function(a,u){const c=Ve(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next((g=>(Fe(g!==null,37113),m=g.keys(),c.mutationQueue.removeMutationBatch(h,g)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>c.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);ww(r,e,t),_w(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await zo(r,i)}catch(i){await jo(i)}}function _w(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ww(n,e,t){const r=Ve(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ou(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||gx(n,r)}))}function gx(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Vu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ew(n))}function Yv(n,e,t){for(const r of t)r instanceof hx?(n.Ru.addReference(r.key,e),uF(n,r)):r instanceof fx?(ae(Qu,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||gx(n,r.key)):De(19791,{wu:r})}function uF(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ae(Qu,"New document in limbo: "+t),n.Eu.add(r),Ew(n))}function Ew(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(St.fromString(e)),r=n.fu.next();n.Au.set(r,new Z2(t)),n.du=n.du.insert(t,r),Nm(n.remoteStore,new hs(Sr(Im(t.path)),r,"TargetPurposeLimboResolution",sr.ce))}}async function zo(n,e,t){const r=Ve(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,c)=>{a.push(r.pu(c,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=cw.As(c.targetId,h);s.push(m)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(c,h){const m=Ve(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>W.forEach(h,(v=>W.forEach(v.Es,(E=>m.persistence.referenceDelegate.addReference(g,v.targetId,E))).next((()=>W.forEach(v.ds,(E=>m.persistence.referenceDelegate.removeReference(g,v.targetId,E)))))))))}catch(g){if(!Bo(g))throw g;ae(dw,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const E=m.Ms.get(v),I=E.snapshotVersion,b=E.withLastLimboFreeSnapshotVersion(I);m.Ms=m.Ms.insert(v,b)}}})(r.localStore,s))}async function cF(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){ae(Qu,"User change. New user:",e.toKey());const r=await qA(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((c=>{c.reject(new ge(te.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(t,r.Ls)}}function dF(n,e){const t=Ve(n),r=t.Au.get(e);if(r&&r.hu)return it().add(r.key);{let i=it();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}async function hF(n,e){const t=Ve(n),r=await Hv(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Yv(t,e.targetId,i.au),i}async function fF(n,e){const t=Ve(n);return QA(t.localStore,e).then((r=>zo(t,r)))}async function pF(n,e,t,r){const i=Ve(n),s=await(function(u,c){const h=Ve(u),m=Ve(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>m.er(g,c).next((v=>v?h.localDocuments.getDocuments(g,v):W.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await Gu(i.remoteStore):t==="acknowledged"||t==="rejected"?(ww(i,e,r||null),_w(i,e),(function(u,c){Ve(Ve(u).mutationQueue).ir(c)})(i.localStore,e)):De(6720,"Unknown batchState",{Su:t}),await zo(i,s)):ae(Qu,"Cannot apply mutation batch with id: "+e)}async function mF(n,e){const t=Ve(n);if(Mm(t),Tw(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await II(t,r.toArray());t.gu=!0,await Kv(t.remoteStore,!0);for(const s of i)Nm(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(Ou(t,a),Nu(t.localStore,a,!0)))),Vu(t.remoteStore,a)})),await i,await II(t,r),(function(a){const u=Ve(a);u.Au.forEach(((c,h)=>{Vu(u.remoteStore,h)})),u.Ru.Jr(),u.Au=new Map,u.du=new Vt(Se.comparator)})(t),t.gu=!1,await Kv(t.remoteStore,!1)}}async function II(n,e,t){const r=Ve(n),i=[],s=[];for(const a of e){let u;const c=r.Iu.get(a);if(c&&c.length!==0){u=await Mp(r.localStore,Sr(c[0]));for(const h of c){const m=r.Tu.get(h),g=await hF(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await KA(r.localStore,a);u=await Mp(r.localStore,h),await vw(r,yx(h),a,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(s),i}function yx(n){return Zb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gF(n){return(function(t){return Ve(Ve(t).persistence).Ts()})(Ve(n).localStore)}async function yF(n,e,t,r){const i=Ve(n);if(i.gu)return void ae(Qu,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await QA(i.localStore,nA(s[0])),u=th.createSynthesizedRemoteEventForCurrentChange(e,t==="current",un.EMPTY_BYTE_STRING);await zo(i,a,u);break}case"rejected":await Nu(i.localStore,e,!0),Ou(i,e,r);break;default:De(64155,t)}}async function vF(n,e,t){const r=Mm(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ae(Qu,"Adding an already active target "+i);continue}const s=await KA(r.localStore,i),a=await Mp(r.localStore,s);await vw(r,yx(s),a.targetId,!1,a.resumeToken),Nm(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await Nu(r.localStore,i,!1).then((()=>{Vu(r.remoteStore,i),Ou(r,i)})).catch(jo)}}function Mm(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oF.bind(null,e),e.Pu.H_=Q2.bind(null,e.eventManager),e.Pu.yu=Y2.bind(null,e.eventManager),e}function Tw(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lF.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return HA(this.persistence,new WA,e.initialUser,this.serializer)}Cu(e){return new lw(Rm.mi,this.serializer)}Du(e){return new ex}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class _F extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Fe(this.persistence.referenceDelegate instanceof Vp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new lw((r=>Vp.mi(r,t)),this.serializer)}}class vx extends Ud{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Tw(this.xu.syncEngine),await Gu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return HA(this.persistence,new WA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new FA(r,e.asyncQueue,t)}Mu(e,t){const r=new AO(t,this.persistence);return new bO(e.asyncQueue,r)}Cu(e){const t=zA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new uw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tx(),op(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ex}}class wF extends vx{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Uy&&(this.sharedClientState.syncEngine={Co:pF.bind(null,t),vo:yF.bind(null,t),Fo:vF.bind(null,t),Ts:gF.bind(null,t),Do:fF.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await mF(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=tx();if(!Uy.v(t))throw new ge(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cF.bind(null,this.syncEngine),await Kv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K2})()}createDatastore(e){const t=Dm(e.databaseInfo.databaseId),r=(function(s){return new R2(s)})(e.databaseInfo);return(function(s,a,u,c){return new V2(s,a,u,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new O2(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>SI(this.syncEngine,t,0)),(function(){return yI.v()?new yI:new P2})())}createSyncEngine(e,t){return(function(i,s,a,u,c,h,m){const g=new eF(i,s,a,u,c,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ve(t);ae(Qa,"RemoteStore shutting down."),r.Ea.add(5),await rh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jd.provider={build:()=>new jd};class _x{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Vo="FirestoreClient";class EF{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bn.UNAUTHENTICATED,this.clientId=B_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ae(Vo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ae(Vo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Vm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function By(n,e){n.asyncQueue.verifyOperationInProgress(),ae(Vo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await qA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function CI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wx(n);ae(Vo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>_I(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>_I(e.remoteStore,i))),n._onlineComponents=e}async function wx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae(Vo,"Using user provided OfflineComponentProvider");try{await By(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await By(n,new Ud)}}else ae(Vo,"Using default OfflineComponentProvider"),await By(n,new _F(void 0));return n._offlineComponents}async function Ex(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae(Vo,"Using user provided OnlineComponentProvider"),await CI(n,n._uninitializedComponentsProvider._online)):(ae(Vo,"Using default OnlineComponentProvider"),await CI(n,new jd))),n._onlineComponents}function TF(n){return wx(n).then((e=>e.localStore))}function SF(n){return Ex(n).then((e=>e.syncEngine))}async function Tx(n){const e=await Ex(n),t=e.eventManager;return t.onListen=tF.bind(null,e.syncEngine),t.onUnlisten=rF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iF.bind(null,e.syncEngine),t}function IF(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const u=await(function(h,m){const g=Ve(h);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,m)))})(i,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ge(te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=Vm(u,`Failed to get document '${s} from cache`);a.reject(c)}})(await TF(n),e,t))),t.promise}function CF(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,c,h){const m=new _x({next:v=>{m.Nu(),a.enqueueAndForget((()=>cx(s,g)));const E=v.docs.has(u);!E&&v.fromCache?h.reject(new ge(te.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?h.reject(new ge(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new dx(Im(u.path),m,{includeMetadataChanges:!0,qa:!0});return ux(s,g)})(await Tx(n),n.asyncQueue,e,t,r))),r.promise}function PF(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,c,h){const m=new _x({next:v=>{m.Nu(),a.enqueueAndForget((()=>cx(s,g))),v.fromCache&&c.source==="server"?h.reject(new ge(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new dx(u,m,{includeMetadataChanges:!0,qa:!0});return ux(s,g)})(await Tx(n),n.asyncQueue,e,t,r))),r.promise}function Sx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const PI=new Map;const Ix="firestore.googleapis.com",bI=!0;class AI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ix,this.ssl=bI}else this.host=e.host,this.ssl=e.ssl??bI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n2)throw new ge(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sx(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Om{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fO;switch(r.type){case"firstParty":return new yO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=PI.get(t);r&&(ae("ComponentProvider","Removing Datastore"),PI.delete(t),r.terminate())})(this),Promise.resolve()}}function bF(n,e,t,r={}){n=Xn(n,Om);const i=Uo(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(M_(`https://${u}`),O_("Firestore",!0)),s.host!==Ix&&s.host!==u&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:u,ssl:i,emulatorOptions:r};if(!Ba(c,a)&&(n._setSettings(c),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=bn.MOCK_USER;else{h=BV(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ge(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new bn(g)}n._authCredentials=new pO(new gb(h,m))}}class sl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class Zt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qd(t,Zt._jsonSchema))return new Zt(e,r||null,new Se(St.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:mn("string",Zt._jsonSchemaVersion),referencePath:mn("string")};class Io extends sl{constructor(e,t,r){super(e,t,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Se(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function ze(n,e,...t){if(n=Rt(n),vb("collection","path",e),n instanceof Om){const r=St.fromString(e,...t);return vS(r),new Io(n,null,r)}{if(!(n instanceof Zt||n instanceof Io))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return vS(r),new Io(n.firestore,null,r)}}function We(n,e,...t){if(n=Rt(n),arguments.length===1&&(e=B_.newId()),vb("doc","path",e),n instanceof Om){const r=St.fromString(e,...t);return yS(r),new Zt(n,null,new Se(r))}{if(!(n instanceof Zt||n instanceof Io))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return yS(r),new Zt(n.firestore,n instanceof Io?n.converter:null,new Se(r))}}const xI="AsyncQueue";class RI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nx(this,"async_queue_retry"),this._c=()=>{const r=op();r&&ae(xI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ei;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;ae(xI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,sn("INTERNAL UNHANDLED ERROR: ",DI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=gw.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:DI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function DI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Wi extends Om{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new RI,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RI(e),this._firestoreClient=void 0,await e}}}function AF(n,e){const t=typeof n=="object"?n:U_(),r=typeof n=="string"?n:Ip,i=mm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XP("firestore");s&&bF(i,...s)}return i}function ih(n){if(n._terminated)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cx(n),n._firestoreClient}function Cx(n){const e=n._freezeSettings(),t=(function(i,s,a,u){return new nL(i,s,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Sx(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new EF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function xF(n,e){Ro("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Px(n,jd.provider,{build:r=>new vx(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function RF(n){Ro("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Px(n,jd.provider,{build:t=>new wF(t,e.cacheSizeBytes)})}function Px(n,e,t){if((n=Xn(n,Wi))._firestoreClient||n._terminated)throw new ge(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ge(te.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Cx(n)}class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(un.fromBase64String(e))}catch(t){throw new ge(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ur(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qd(e,Ur._jsonSchema))return Ur.fromBase64String(e.bytes)}}Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:mn("string",Ur._jsonSchemaVersion),bytes:mn("string")};class sh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sw{constructor(e){this._methodName=e}}class Mi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mi._jsonSchemaVersion}}static fromJSON(e){if(Qd(e,Mi._jsonSchema))return new Mi(e.latitude,e.longitude)}}Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:mn("string",Mi._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};class Oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qd(e,Oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Oi(e.vectorValues);throw new ge(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oi._jsonSchemaVersion="firestore/vectorValue/1.0",Oi._jsonSchema={type:mn("string",Oi._jsonSchemaVersion),vectorValues:mn("object")};const DF=/^__.*__$/;class kF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}class bx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ax(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Iw{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Iw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Up(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ax(this.Ac)&&DF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Dm(e)}Cc(e,t,r,i=!1){return new Iw({Ac:e,methodName:t,Dc:r,path:Gt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oh(n){const e=n._freezeSettings(),t=Dm(n._databaseId);return new NF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cw(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Pw("Data must be an object, but it was:",a,r);const u=Dx(r,a);let c,h;if(s.merge)c=new or(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const v=Xv(e,g,t);if(!a.contains(v))throw new ge(te.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Nx(m,v)||m.push(v)}c=new or(m),h=a.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,h=a.fieldTransforms;return new kF(new $n(u),c,h)}class ah extends Sw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}function xx(n,e,t,r){const i=n.Cc(1,e,t);Pw("Data must be an object, but it was:",i,r);const s=[],a=$n.empty();$o(r,((c,h)=>{const m=bw(e,c,t);h=Rt(h);const g=i.yc(m);if(h instanceof ah)s.push(m);else{const v=lh(h,g);v!=null&&(s.push(m),a.set(m,v))}}));const u=new or(s);return new bx(a,u,i.fieldTransforms)}function Rx(n,e,t,r,i,s){const a=n.Cc(1,e,t),u=[Xv(e,r,t)],c=[i];if(s.length%2!=0)throw new ge(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)u.push(Xv(e,s[v])),c.push(s[v+1]);const h=[],m=$n.empty();for(let v=u.length-1;v>=0;--v)if(!Nx(h,u[v])){const E=u[v];let I=c[v];I=Rt(I);const b=a.yc(E);if(I instanceof ah)h.push(E);else{const P=lh(I,b);P!=null&&(h.push(E),m.set(E,P))}}const g=new or(h);return new bx(m,g,a.fieldTransforms)}function VF(n,e,t,r=!1){return lh(t,n.Cc(r?4:3,e))}function lh(n,e){if(kx(n=Rt(n)))return Pw("Unsupported field value:",e,n),Dx(n,e);if(n instanceof Sw)return(function(r,i){if(!Ax(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let c=lh(u,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _L(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=bt.fromDate(r);return{timestampValue:ku(i.serializer,s)}}if(r instanceof bt){const s=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ku(i.serializer,s)}}if(r instanceof Mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ur)return{bytesValue:vA(i.serializer,r._byteString)};if(r instanceof Zt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Oi)return(function(a,u){return{mapValue:{fields:{[Q_]:{stringValue:Y_},[Pu]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Z_(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${gm(r)}`)})(n,e)}function Dx(n,e){const t={};return Ob(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(n,((r,i)=>{const s=lh(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function kx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof Mi||n instanceof Ur||n instanceof Zt||n instanceof Sw||n instanceof Oi)}function Pw(n,e,t){if(!kx(t)||!_b(t)){const r=gm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Xv(n,e,t){if((e=Rt(e))instanceof sh)return e._internalPath;if(typeof e=="string")return bw(n,e);throw Up("Field path arguments must be of type string or ",n,!1,void 0,t)}const MF=new RegExp("[~\\*/\\[\\]]");function bw(n,e,t){if(e.search(MF)>=0)throw Up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sh(...e.split("."))._internalPath}catch{throw Up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Up(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new ge(te.INVALID_ARGUMENT,u+n+c)}function Nx(n,e){return n.some((t=>t.isEqual(e)))}class Vx{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Aw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OF extends Vx{data(){return super.data()}}function Aw(n,e){return typeof e=="string"?bw(n,e):e instanceof sh?e._internalPath:e._delegate._internalPath}function LF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xw{}class Mx extends xw{}function Rw(n,e,...t){let r=[];e instanceof xw&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((c=>c instanceof kw)).length,u=s.filter((c=>c instanceof Lm)).length;if(a>1||a>0&&u>0)throw new ge(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Lm extends Mx{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Lm(e,t,r)}_apply(e){const t=this._parse(e);return Ox(e._query,t),new sl(e.firestore,e.converter,Lv(e._query,t))}_parse(e){const t=oh(e.firestore);return(function(s,a,u,c,h,m,g){let v;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ge(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){NI(g,m);const I=[];for(const b of g)I.push(kI(c,s,b));v={arrayValue:{values:I}}}else v=kI(c,s,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||NI(g,m),v=VF(u,a,g,m==="in"||m==="not-in");return dt.create(h,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Dw(n,e,t){const r=e,i=Aw("where",n);return Lm._create(i,r,t)}class kw extends xw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:At.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const u=s.getFlattenedFilters();for(const c of u)Ox(a,c),a=Lv(a,c)})(e._query,t),new sl(e.firestore,e.converter,Lv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nw extends Mx{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Nw(e,t,r)}_apply(e){return new sl(e.firestore,e.converter,Ap(e._query,this._limit,this._limitType))}}function Vw(n){return IO("limit",n),Nw._create("limit",n,"F")}function kI(n,e,t){if(typeof(t=Rt(t))=="string"){if(t==="")throw new ge(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eA(e)&&t.indexOf("/")!==-1)throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(St.fromString(t));if(!Se.isDocumentKey(r))throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Md(n,new Se(r))}if(t instanceof Zt)return Md(n,t._key);throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gm(t)}.`)}function NI(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ox(n,e){const t=(function(i,s){for(const a of i)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FF{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $o(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[Pu].arrayValue?.values?.map((r=>Wt(r.doubleValue)));return new Oi(t)}convertGeoPoint(e){return new Mi(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nd(e));default:return null}}convertTimestamp(e){const t=ws(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=St.fromString(e);Fe(AA(r),9688,{name:e});const i=new Wa(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||sn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Mw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Co extends Vx{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Aw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Co._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Co._jsonSchemaVersion="firestore/documentSnapshot/1.0",Co._jsonSchema={type:mn("string",Co._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class ap extends Co{data(e={}){return super.data(e)}}class pu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ap(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const c=new ap(i._firestore,i._userDataWriter,u.doc.key,u.doc,new au(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const c=new ap(i._firestore,i._userDataWriter,u.doc.key,u.doc,new au(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:UF(u.type),doc:c,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}function ti(n){n=Xn(n,Zt);const e=Xn(n.firestore,Wi);return CF(ih(e),n._key).then((t=>BF(e,n,t)))}pu._jsonSchemaVersion="firestore/querySnapshot/1.0",pu._jsonSchema={type:mn("string",pu._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};class Ow extends FF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function jF(n){n=Xn(n,Zt);const e=Xn(n.firestore,Wi),t=ih(e),r=new Ow(e);return IF(t,n._key).then((i=>new Co(e,r,n._key,i,new au(i!==null&&i.hasLocalMutations,!0),n.converter)))}function et(n){n=Xn(n,sl);const e=Xn(n.firestore,Wi),t=ih(e),r=new Ow(e);return LF(n._query),PF(t,n._query).then((i=>new pu(e,r,n,i)))}function fs(n,e,t){n=Xn(n,Zt);const r=Xn(n.firestore,Wi),i=Mw(n.converter,e,t);return ch(r,[Cw(oh(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_n.none())])}function zn(n,e,t,...r){n=Xn(n,Zt);const i=Xn(n.firestore,Wi),s=oh(i);let a;return a=typeof(e=Rt(e))=="string"||e instanceof sh?Rx(s,"updateDoc",n._key,e,t,r):xx(s,"updateDoc",n._key,e),ch(i,[a.toMutation(n._key,_n.exists(!0))])}function Ya(n){return ch(Xn(n.firestore,Wi),[new eh(n._key,_n.none())])}function uh(n,e){const t=Xn(n.firestore,Wi),r=We(n),i=Mw(n.converter,e);return ch(t,[Cw(oh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then((()=>r))}function ch(n,e){return(function(r,i){const s=new ei;return r.asyncQueue.enqueueAndForget((async()=>sF(await SF(r),i,s))),s.promise})(ih(n),e)}function BF(n,e,t){const r=t.docs.get(e._key),i=new Ow(n);return new Co(n,i,e._key,r,new au(t.hasPendingWrites,t.fromCache),e.converter)}class $F{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=oh(e)}set(e,t,r){this._verifyNotCommitted();const i=$y(e,this._firestore),s=Mw(i.converter,t,r),a=Cw(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,_n.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=$y(e,this._firestore);let a;return a=typeof(t=Rt(t))=="string"||t instanceof sh?Rx(this._dataReader,"WriteBatch.update",s._key,t,r,i):xx(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$y(e,this._firestore);return this._mutations=this._mutations.concat(new eh(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $y(n,e){if((n=Rt(n)).firestore!==e)throw new ge(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function zF(){return new ah("deleteField")}function ni(n){return ih(n=Xn(n,Wi)),new $F(n,(e=>ch(n,e)))}(function(e,t=!0){(function(i){Hu=i})(Wu),$a(new xo("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new Wi(new mO(r.getProvider("auth-internal")),new vO(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(h.options.projectId,m)})(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),Vi(fS,pS,e),Vi(fS,pS,"esm2020")})();function Lx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WF=Lx,Fx=new Gd("auth","Firebase",Lx());const jp=new L_("@firebase/auth");function HF(n,...e){jp.logLevel<=ut.WARN&&jp.warn(`Auth (${Wu}): ${n}`,...e)}function lp(n,...e){jp.logLevel<=ut.ERROR&&jp.error(`Auth (${Wu}): ${n}`,...e)}function ri(n,...e){throw Lw(n,...e)}function Li(n,...e){return Lw(n,...e)}function Ux(n,e,t){const r={...WF(),[e]:t};return new Gd("auth","Firebase",r).create(e,{appName:n.name})}function Fi(n){return Ux(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Fx.create(n,...e)}function $e(n,e,...t){if(!n)throw Lw(e,...t)}function ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lp(e),new Error(e)}function Ts(n,e){n||ps(e)}function Jv(){return typeof self<"u"&&self.location?.href||""}function qF(){return VI()==="http:"||VI()==="https:"}function VI(){return typeof self<"u"&&self.location?.protocol||null}function GF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qF()||qV()||"connection"in navigator)?navigator.onLine:!0}function KF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class dh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ts(t>e,"Short delay should be less than long delay!"),this.isMobile=WV()||GV()}get(){return GF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fw(n,e){Ts(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class jx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const YF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XF=new dh(3e4,6e4);function Rs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function si(n,e,t,r,i={}){return Bx(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=Kd({key:n.config.apiKey,...a}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:c,...s};return HV()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Uo(n.emulatorConfig.host)&&(h.credentials="include"),jx.fetch()(await $x(n,n.config.apiHost,t,u),h)})}async function Bx(n,e,t){n._canInitEmulator=!1;const r={...QF,...e};try{const i=new ZF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Lf(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Lf(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Lf(n,"user-disabled",a);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ux(n,m,h);ri(n,m)}}catch(i){if(i instanceof zi)throw i;ri(n,"network-request-failed",{message:String(i)})}}async function hh(n,e,t,r,i={}){const s=await si(n,e,t,r,i);return"mfaPendingCredential"in s&&ri(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function $x(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?Fw(n.config,i):`${n.config.apiScheme}://${i}`;return YF.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function JF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Li(this.auth,"network-request-failed")),XF.get())})}}function Lf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Li(n,e,r);return i.customData._tokenResponse=t,i}function MI(n){return n!==void 0&&n.enterprise!==void 0}class eU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tU(n,e){return si(n,"GET","/v2/recaptchaConfig",Rs(n,e))}async function nU(n,e){return si(n,"POST","/v1/accounts:delete",e)}async function Bp(n,e){return si(n,"POST","/v1/accounts:lookup",e)}function _d(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rU(n,e=!1){const t=Rt(n),r=await t.getIdToken(e),i=Uw(r);$e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:_d(zy(i.auth_time)),issuedAtTime:_d(zy(i.iat)),expirationTime:_d(zy(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function zy(n){return Number(n)*1e3}function Uw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lp("JWT malformed, contained fewer than 3 sections"),null;try{const i=KP(t);return i?JSON.parse(i):(lp("Failed to decode base64 JWT payload"),null)}catch(i){return lp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function OI(n){const e=Uw(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Xa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof zi&&iU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class sU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_d(this.lastLoginAt),this.creationTime=_d(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $p(n){const e=n.auth,t=await n.getIdToken(),r=await Xa(n,Bp(e,{idToken:t}));$e(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?zx(i.providerUserInfo):[],a=aU(n.providerData,s),u=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!a?.length,h=u?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Zv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function oU(n){const e=Rt(n);await $p(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function lU(n,e){const t=await Bx(n,{},async()=>{const r=Kd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await $x(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return n.emulatorConfig&&Uo(n.emulatorConfig.host)&&(c.credentials="include"),jx.fetch()(a,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uU(n,e){return si(n,"POST","/v2/accounts:revokeToken",Rs(n,e))}class mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=OI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await lU(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new mu;return r&&($e(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&($e(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&($e(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mu,this.toJSON())}_performRefresh(){return ps("not implemented")}}function so(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Jr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new sU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rU(this,e)}reload(){return oU(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $p(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await Xa(this,nU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,c=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:E,providerData:I,stsTokenManager:b}=t;$e(g&&b,e,"internal-error");const P=mu.fromJSON(this.name,b);$e(typeof g=="string",e,"internal-error"),so(r,e.name),so(i,e.name),$e(typeof v=="boolean",e,"internal-error"),$e(typeof E=="boolean",e,"internal-error"),so(s,e.name),so(a,e.name),so(u,e.name),so(c,e.name),so(h,e.name),so(m,e.name);const L=new Jr({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:P,createdAt:h,lastLoginAt:m});return I&&Array.isArray(I)&&(L.providerData=I.map(D=>({...D}))),c&&(L._redirectEventId=c),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new mu;i.updateFromServerResponse(t);const s=new Jr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $p(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$e(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new mu;u.updateFromIdToken(r);const c=new Jr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,h),c}}const LI=new Map;function ms(n){Ts(n instanceof Function,"Expected a class definition");let e=LI.get(n);return e?(Ts(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,LI.set(n,e),e)}class Wx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Wx.type="NONE";const FI=Wx;function up(n,e,t){return`firebase:${n}:${e}:${t}`}class gu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=up(this.userKey,i.apiKey,s),this.fullPersistenceKey=up("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bp(this.auth,{idToken:e}).catch(()=>{});return t?Jr._fromGetAccountInfoResponse(this.auth,t,e):null}return Jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new gu(ms(FI),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||ms(FI);const a=up(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const v=await Bp(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Jr._fromGetAccountInfoResponse(e,v,m)}else g=Jr._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new gu(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new gu(s,e,r))}}function UI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yx(e))return"Blackberry";if(Xx(e))return"Webos";if(qx(e))return"Safari";if((e.includes("chrome/")||Gx(e))&&!e.includes("edge/"))return"Chrome";if(Qx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Hx(n=wn()){return/firefox\//i.test(n)}function qx(n=wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gx(n=wn()){return/crios\//i.test(n)}function Kx(n=wn()){return/iemobile/i.test(n)}function Qx(n=wn()){return/android/i.test(n)}function Yx(n=wn()){return/blackberry/i.test(n)}function Xx(n=wn()){return/webos/i.test(n)}function jw(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cU(n=wn()){return jw(n)&&!!window.navigator?.standalone}function dU(){return KV()&&document.documentMode===10}function Jx(n=wn()){return jw(n)||Qx(n)||Xx(n)||Yx(n)||/windows phone/i.test(n)||Kx(n)}function Zx(n,e=[]){let t;switch(n){case"Browser":t=UI(wn());break;case"Worker":t=`${UI(wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wu}/${r}`}class hU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function fU(n,e={}){return si(n,"GET","/v2/passwordPolicy",Rs(n,e))}const pU=6;class mU{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??pU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class gU{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jI(this),this.idTokenSubscription=new jI(this),this.beforeStateQueue=new hU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ms(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bp(this,{idToken:e}),r=await Jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ir(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $p(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Fi(this));const t=e?Rt(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fU(this),t=new mU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await uU(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ms(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await gu.create(this,[ms(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&HF(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Wo(n){return Rt(n)}class jI{constructor(e){this.auth=e,this.observer=null,this.addObserver=eM(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yU(n){Fm=n}function eR(n){return Fm.loadJS(n)}function vU(){return Fm.recaptchaEnterpriseScript}function _U(){return Fm.gapiScript}function wU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class EU{constructor(){this.enterprise=new TU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const SU="recaptcha-enterprise",tR="NO_RECAPTCHA";class IU{constructor(e){this.type=SU,this.auth=Wo(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{tU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new eU(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;MI(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(tR)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EU().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&MI(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=vU();c.length!==0&&(c+=u),eR(c).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function BI(n,e,t,r=!1,i=!1){const s=new IU(n);let a;if(i)a=tR;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function zp(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await BI(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await BI(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function CU(n,e){const t=mm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ba(s,e??{}))return i;ri(i,"already-initialized")}return t.initialize({options:e})}function PU(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ms);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function bU(n,e,t){const r=Wo(n);$e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=nR(e),{host:a,port:u}=AU(e),c=u===null?"":`:${u}`,h={url:`${s}//${a}${c}/`},m=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$e(Ba(h,r.config.emulator)&&Ba(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Uo(a)?(M_(`${s}//${a}${c}`),O_("Auth",!0)):xU()}function nR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AU(n){const e=nR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$I(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:$I(a)}}}function $I(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Bw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function RU(n,e){return si(n,"POST","/v1/accounts:update",e)}async function DU(n,e){return si(n,"POST","/v1/accounts:signUp",e)}async function kU(n,e){return hh(n,"POST","/v1/accounts:signInWithPassword",Rs(n,e))}async function rR(n,e){return si(n,"POST","/v1/accounts:sendOobCode",Rs(n,e))}async function NU(n,e){return rR(n,e)}async function VU(n,e){return rR(n,e)}async function MU(n,e){return hh(n,"POST","/v1/accounts:signInWithEmailLink",Rs(n,e))}async function OU(n,e){return hh(n,"POST","/v1/accounts:signInWithEmailLink",Rs(n,e))}class Bd extends Bw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Bd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Bd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zp(e,t,"signInWithPassword",kU);case"emailLink":return MU(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zp(e,r,"signUpPassword",DU);case"emailLink":return OU(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yu(n,e){return hh(n,"POST","/v1/accounts:signInWithIdp",Rs(n,e))}const LU="http://localhost";class Ja extends Bw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Ja(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return yu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yu(e,t)}buildRequest(){const e={requestUri:LU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Kd(t)}return e}}function FU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UU(n){const e=nd(rd(n)).link,t=e?nd(rd(e)).deep_link_id:null,r=nd(rd(n)).deep_link_id;return(r?nd(rd(r)).link:null)||r||t||e||n}class $w{constructor(e){const t=nd(rd(e)),r=t.apiKey??null,i=t.oobCode??null,s=FU(t.mode??null);$e(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=UU(e);try{return new $w(t)}catch{return null}}}class Yu{constructor(){this.providerId=Yu.PROVIDER_ID}static credential(e,t){return Bd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=$w.parseLink(t);return $e(r,"argument-error"),Bd._fromEmailAndCode(e,r.code,r.tenantId)}}Yu.PROVIDER_ID="password";Yu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fh extends iR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ho extends fh{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ho.credential(e.oauthAccessToken)}catch{return null}}}ho.FACEBOOK_SIGN_IN_METHOD="facebook.com";ho.PROVIDER_ID="facebook.com";class fo extends fh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ja._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fo.credential(t,r)}catch{return null}}}fo.GOOGLE_SIGN_IN_METHOD="google.com";fo.PROVIDER_ID="google.com";class po extends fh{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.GITHUB_SIGN_IN_METHOD="github.com";po.PROVIDER_ID="github.com";class mo extends fh{constructor(){super("twitter.com")}static credential(e,t){return Ja._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return mo.credential(t,r)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";async function jU(n,e){return hh(n,"POST","/v1/accounts:signUp",Rs(n,e))}class Za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Jr._fromIdTokenResponse(e,r,i),a=zI(r);return new Za({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=zI(r);return new Za({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function zI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Wp extends zi{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Wp(e,t,r,i)}}function sR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wp._fromErrorAndOperation(n,s,e,r):s})}async function BU(n,e,t=!1){const r=await Xa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Za._forOperation(n,"link",r)}async function $U(n,e,t=!1){const{auth:r}=n;if(ir(r.app))return Promise.reject(Fi(r));const i="reauthenticate";try{const s=await Xa(n,sR(r,i,e,n),t);$e(s.idToken,r,"internal-error");const a=Uw(s.idToken);$e(a,r,"internal-error");const{sub:u}=a;return $e(n.uid===u,r,"user-mismatch"),Za._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),s}}async function oR(n,e,t=!1){if(ir(n.app))return Promise.reject(Fi(n));const r="signIn",i=await sR(n,r,e),s=await Za._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function zU(n,e){return oR(Wo(n),e)}function WU(n,e,t){$e(t.url?.length>0,n,"invalid-continue-uri"),$e(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),$e(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&($e(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&($e(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function aR(n){const e=Wo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HU(n,e,t){const r=Wo(n);await zp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",VU)}async function qU(n,e,t){if(ir(n.app))return Promise.reject(Fi(n));const r=Wo(n),a=await zp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&aR(n),c}),u=await Za._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function GU(n,e,t){return ir(n.app)?Promise.reject(Fi(n)):zU(Rt(n),Yu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aR(n),r})}async function KU(n,e){const t=Rt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&WU(t.auth,i,e);const{email:s}=await NU(t.auth,i);s!==n.email&&await n.reload()}async function QU(n,e){return si(n,"POST","/v1/accounts:update",e)}async function YU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Rt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Xa(r,QU(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function XU(n,e){const t=Rt(n);return ir(t.auth.app)?Promise.reject(Fi(t.auth)):lR(t,e,null)}function JU(n,e){return lR(Rt(n),null,e)}async function lR(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await Xa(n,RU(r,s));await n._updateTokensIfNecessary(a,!0)}function WI(n,e){return Rt(n).setPersistence(e)}function ZU(n,e,t,r){return Rt(n).onIdTokenChanged(e,t,r)}function e4(n,e,t){return Rt(n).beforeAuthStateChanged(e,t)}function t4(n,e,t,r){return Rt(n).onAuthStateChanged(e,t,r)}function HI(n){return Rt(n).signOut()}async function n4(n){return Rt(n).delete()}const Hp="__sak";class uR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hp,"1"),this.storage.removeItem(Hp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const r4=1e3,i4=10;class cR extends uR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);dU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,i4):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},r4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cR.type="LOCAL";const dR=cR;class hR extends uR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hR.type="SESSION";const fR=hR;function s4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Um(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),c=await s4(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Um.receivers=[];function zw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class o4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const h=zw("",20);i.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(v.data.response);break;default:clearTimeout(m),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Ui(){return window}function a4(n){Ui().location.href=n}function pR(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function l4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u4(){return navigator?.serviceWorker?.controller||null}function c4(){return pR()?self:null}const mR="firebaseLocalStorageDb",d4=1,qp="firebaseLocalStorage",gR="fbase_key";class ph{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jm(n,e){return n.transaction([qp],e?"readwrite":"readonly").objectStore(qp)}function h4(){const n=indexedDB.deleteDatabase(mR);return new ph(n).toPromise()}function e_(){const n=indexedDB.open(mR,d4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(qp,{keyPath:gR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(qp)?e(r):(r.close(),await h4(),e(await e_()))})})}async function qI(n,e,t){const r=jm(n,!0).put({[gR]:e,value:t});return new ph(r).toPromise()}async function f4(n,e){const t=jm(n,!1).get(e),r=await new ph(t).toPromise();return r===void 0?null:r.value}function GI(n,e){const t=jm(n,!0).delete(e);return new ph(t).toPromise()}const p4=800,m4=3;class yR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>m4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Um._getInstance(c4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await l4(),!this.activeServiceWorker)return;this.sender=new o4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await e_();return await qI(e,Hp,"1"),await GI(e,Hp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>f4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=jm(i,!1).getAll();return new ph(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yR.type="LOCAL";const vR=yR;new dh(3e4,6e4);function g4(n,e){return e?ms(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Ww extends Bw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function y4(n){return oR(n.auth,new Ww(n),n.bypassAuthState)}function v4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),$U(t,new Ww(n),n.bypassAuthState)}async function _4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),BU(t,new Ww(n),n.bypassAuthState)}class _R{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y4;case"linkViaPopup":case"linkViaRedirect":return _4;case"reauthViaPopup":case"reauthViaRedirect":return v4;default:ri(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const w4=new dh(2e3,1e4);class lu extends _R{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,lu.currentPopupAction&&lu.currentPopupAction.cancel(),lu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=zw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w4.get())};e()}}lu.currentPopupAction=null;const E4="pendingRedirect",cp=new Map;class T4 extends _R{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=cp.get(this.auth._key());if(!e){try{const r=await S4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}cp.set(this.auth._key(),e)}return this.bypassAuthState||cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S4(n,e){const t=P4(e),r=C4(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function I4(n,e){cp.set(n._key(),e)}function C4(n){return ms(n._redirectPersistence)}function P4(n){return up(E4,n.config.apiKey,n.name)}async function b4(n,e,t=!1){if(ir(n.app))return Promise.reject(Fi(n));const r=Wo(n),i=g4(r,e),a=await new T4(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const A4=600*1e3;class x4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!R4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wR(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Li(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A4&&this.cachedEventUids.clear(),this.cachedEventUids.has(KI(e))}saveEventToCache(e){this.cachedEventUids.add(KI(e)),this.lastProcessedEventTime=Date.now()}}function KI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function R4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wR(n);default:return!1}}async function D4(n,e={}){return si(n,"GET","/v1/projects",e)}const k4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N4=/^https?/;async function V4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await D4(n);for(const t of e)try{if(M4(t))return}catch{}ri(n,"unauthorized-domain")}function M4(n){const e=Jv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!N4.test(t))return!1;if(k4.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const O4=new dh(3e4,6e4);function QI(){const n=Ui().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function L4(n){return new Promise((e,t)=>{function r(){QI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QI(),t(Li(n,"network-request-failed"))},timeout:O4.get()})}if(Ui().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ui().gapi?.load)r();else{const i=wU("iframefcb");return Ui()[i]=()=>{gapi.load?r():t(Li(n,"network-request-failed"))},eR(`${_U()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw dp=null,e})}let dp=null;function F4(n){return dp=dp||L4(n),dp}const U4=new dh(5e3,15e3),j4="__/auth/iframe",B4="emulator/auth/iframe",$4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W4(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Fw(e,B4):`https://${n.config.authDomain}/${j4}`,r={apiKey:e.apiKey,appName:n.name,v:Wu},i=z4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Kd(r).slice(1)}`}async function H4(n){const e=await F4(n),t=Ui().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:W4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Li(n,"network-request-failed"),u=Ui().setTimeout(()=>{s(a)},U4.get());function c(){Ui().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}const q4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,K4=600,Q4="_blank",Y4="http://localhost";class YI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X4(n,e,t,r=G4,i=K4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c={...q4,width:r.toString(),height:i.toString(),top:s,left:a},h=wn().toLowerCase();t&&(u=Gx(h)?Q4:t),Hx(h)&&(e=e||Y4,c.scrollbars="yes");const m=Object.entries(c).reduce((v,[E,I])=>`${v}${E}=${I},`,"");if(cU(h)&&u!=="_self")return J4(e||"",u),new YI(null);const g=window.open(e||"",u,m);$e(g,n,"popup-blocked");try{g.focus()}catch{}return new YI(g)}function J4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Z4="__/auth/handler",ej="emulator/auth/handler",tj=encodeURIComponent("fac");async function XI(n,e,t,r,i,s){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wu,eventId:i};if(e instanceof iR){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",ZV(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof fh){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await n._getAppCheckToken(),h=c?`#${tj}=${encodeURIComponent(c)}`:"";return`${nj(n)}?${Kd(u).slice(1)}${h}`}function nj({config:n}){return n.emulator?Fw(n,ej):`https://${n.authDomain}/${Z4}`}const Wy="webStorageSupport";class rj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fR,this._completeRedirectFn=b4,this._overrideRedirectResult=I4}async _openPopup(e,t,r,i){Ts(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await XI(e,t,r,Jv(),i);return X4(e,s,zw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await XI(e,t,r,Jv(),i);return a4(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ts(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await H4(e),r=new x4(e);return t.register("authEvent",i=>($e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wy,{type:Wy},i=>{const s=i?.[0]?.[Wy];s!==void 0&&t(!!s),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jx()||qx()||jw()}}const ij=rj;var JI="@firebase/auth",ZI="1.12.0";class sj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aj(n){$a(new xo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;$e(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zx(n)},h=new gU(r,i,s,c);return PU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$a(new xo("auth-internal",e=>{const t=Wo(e.getProvider("auth").getImmediate());return(r=>new sj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(JI,ZI,oj(n)),Vi(JI,ZI,"esm2020")}const lj=300,uj=ZP("authIdTokenMaxAge")||lj;let eC=null;const cj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>uj)return;const i=t?.token;eC!==i&&(eC=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dj(n=U_()){const e=mm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=CU(n,{popupRedirectResolver:ij,persistence:[vR,dR,fR]}),r=ZP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=cj(s.toString());e4(t,a,()=>a(t.currentUser)),ZU(t,u=>a(u))}}const i=YP("auth");return i&&bU(t,`http://${i}`),t}function hj(){return document.getElementsByTagName("head")?.[0]??document}yU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Li("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",hj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aj("Browser");const fj={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},ER=ob(fj),re=AF(ER),Cn=dj(ER),pj=async()=>{try{await WI(Cn,vR)}catch(n){console.warn("IndexedDB persistence unavailable, falling back to local storage.",n);try{await WI(Cn,dR)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}},TR=typeof window<"u"?pj():Promise.resolve();typeof window<"u"&&(RF(re).catch(n=>{n.code==="failed-precondition"?xF(re).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):n.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",n):console.error("Unexpected error enabling multi-tab persistence for Firestore.",n)}),TR.catch(n=>{console.error("Unexpected error configuring Firebase Auth persistence.",n)}));const mj=1;let Hy=0;function gj(){return Hy=(Hy+1)%Number.MAX_VALUE,Hy.toString()}const Kn={state:{toasts:[]},listeners:[],getState:()=>Kn.state,setState:n=>{typeof n=="function"?Kn.state=n(Kn.state):Kn.state={...Kn.state,...n},Kn.listeners.forEach(e=>e(Kn.state))},subscribe:n=>(Kn.listeners.push(n),()=>{Kn.listeners=Kn.listeners.filter(e=>e!==n)})},yj=({...n})=>{const e=gj(),t=i=>Kn.setState(s=>({...s,toasts:s.toasts.map(a=>a.id===e?{...a,...i}:a)})),r=()=>Kn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return Kn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:r},...i.toasts].slice(0,mj)})),{id:e,dismiss:r,update:t}};function Hw(){const[n,e]=R.useState(Kn.getState());return R.useEffect(()=>Kn.subscribe(r=>{e(r)}),[]),R.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:yj,toasts:n.toasts}}const vj=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"){if(n===1)return!0;if(n===0)return!1}if(typeof n=="string"){const e=n.trim().toLowerCase();if(e==="true")return!0;if(e==="false")return!1}return null},SR=R.createContext(null),Ff="rnf_storage_persist_requested_v1",_j=()=>window.matchMedia?.("(display-mode: standalone)")?.matches||navigator.standalone===!0,tC=async n=>{if(typeof navigator>"u"||!navigator?.storage?.persist)return;const e=`rnf_storage_persist_attempted_${n}_v1`;try{if(sessionStorage.getItem(e)==="1")return;sessionStorage.setItem(e,"1")}catch{}let t=!1;if(navigator.storage.persisted)try{if(await navigator.storage.persisted()){t=!0;try{localStorage.setItem(Ff,"1")}catch{}return}}catch{}try{localStorage.getItem(Ff)==="1"&&localStorage.removeItem(Ff)}catch{}try{if(t=!!await navigator.storage.persist(),t)try{localStorage.setItem(Ff,"1")}catch{}}catch{t=!1}t===!1&&console.info("[storage:persist]",{phase:n,granted:t,origin:window.location.origin,standalone:_j()})},wj=new Set(["estandar"]),nC=n=>n==="conservador"?"estandar":wj.has(n)?n:null,t_=()=>({calculators:{cpm:!0,t8:!0},postpartum:!1,combineMode:"estandar"}),qy=({current:n,incoming:e,legacyCombineMode:t})=>{const r=t_(),i={calculators:{...r.calculators},postpartum:r.postpartum,combineMode:r.combineMode};let s=!1;const a=u=>{if(!u||typeof u!="object")return;Object.keys(i.calculators).forEach(m=>{typeof u?.calculators?.[m]=="boolean"&&(i.calculators[m]=u.calculators[m])});const c=vj(u.postpartum);c!==null&&(i.postpartum=c);const h=nC(u.combineMode);h&&(i.combineMode=h,s=!0)};if(a(n),a(e),!s){const u=nC(t);u&&(i.combineMode=u)}return i},Ej=({children:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState(null),{toast:u}=Hw();R.useEffect(()=>{let L=null,D=!1;return(async()=>{try{await TR}catch{}try{await tC("boot")}catch{}D||(L=t4(Cn,async j=>{if(j){t({id:j.uid,uid:j.uid,email:j.email,displayName:j.displayName,photoURL:j.photoURL});try{await tC("postlogin")}catch{}const H=We(re,`users/${j.uid}/preferences`,"display"),Y={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:t_()};try{try{const S=await jF(H);if(S.exists()){const{combineMode:k,fertilityStartConfig:O,...M}=S.data(),U=qy({current:Y.fertilityStartConfig,incoming:O,legacyCombineMode:k});a({...Y,...M,fertilityStartConfig:U})}}catch{}const x=await ti(H);if(x.exists()){const{combineMode:S,fertilityStartConfig:k,...O}=x.data(),M=qy({current:Y.fertilityStartConfig,incoming:k,legacyCombineMode:S});a({...Y,...O,fertilityStartConfig:M})}else a(Y)}catch(x){console.error("Failed to load preferences",x),a(Y)}}else t(null),a(null);i(!1)}))})(),()=>{D=!0,L&&L()}},[]);const c=async(L,D)=>{try{await GU(Cn,L,D)}catch(A){throw u({title:"Error al iniciar sesin",description:A.message,variant:"destructive"}),A}},h=async(L,D)=>{try{const{user:A}=await qU(Cn,L,D),j={url:`${window.location.origin}/auth`};await KU(A,j),await HI(Cn)}catch(A){throw u({title:"Error al registrarse",description:A.message,variant:"destructive"}),A}},m=async L=>{try{await HU(Cn,L)}catch(D){throw u({title:"Error al restablecer contrasea",description:D.message,variant:"destructive"}),D}},g=async()=>{try{await HI(Cn),t(null),a(null)}catch(L){throw u({title:"Error al cerrar sesin",description:L.message,variant:"destructive"}),L}},v=async L=>{if(Cn.currentUser)try{await XU(Cn.currentUser,L),t(D=>D&&{...D,email:L})}catch(D){throw u({title:"Error al actualizar correo",description:D.message,variant:"destructive"}),D}},E=async L=>{if(Cn.currentUser)try{await JU(Cn.currentUser,L)}catch(D){throw u({title:"Error al actualizar contrasea",description:D.message,variant:"destructive"}),D}},I=async(L={})=>{if(!Cn.currentUser)return;const D=We(re,`users/${Cn.currentUser.uid}/preferences`,"display"),{combineMode:A,fertilityStartConfig:j,...H}=L??{},Y=j&&typeof j=="object"||A!==void 0,x=Y?qy({current:s?.fertilityStartConfig,incoming:j,legacyCombineMode:A}):s?.fertilityStartConfig,S={...H};Y&&x&&(S.fertilityStartConfig=x,S.combineMode=zF());try{await fs(D,S,{merge:!0}),a(k=>{const M={...k??{theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:t_()},...H};return Y&&x&&(M.fertilityStartConfig=x),M})}catch(k){throw console.error("Failed to save preferences",k),u({title:"Error al guardar preferencias",description:k.message,variant:"destructive"}),k}},b=async L=>{if(Cn.currentUser)try{await YU(Cn.currentUser,L),t(D=>D&&{...D,...L})}catch(D){throw u({title:"Error al actualizar perfil",description:D.message,variant:"destructive"}),D}},P=async()=>{if(Cn.currentUser)try{await n4(Cn.currentUser),t(null),a(null)}catch(L){throw u({title:"Error al eliminar cuenta",description:L.message,variant:"destructive"}),L}};return G.jsx(SR.Provider,{value:{user:e,login:c,register:h,logout:g,resetPassword:m,updateEmail:v,updatePassword:E,preferences:s,savePreferences:I,updateProfile:b,deleteAccount:P,loadingAuth:r},children:n})},Bm=()=>R.useContext(SR);function Ss(n){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(n)}function Hn(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Mt(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function en(n){Mt(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||Ss(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ii(n,e){Mt(2,arguments);var t=en(n),r=Hn(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function Tj(n,e){Mt(2,arguments);var t=en(n).getTime(),r=Hn(e);return new Date(t+r)}var Sj={};function Xu(){return Sj}function Gp(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function Xe(n){Mt(1,arguments);var e=en(n);return e.setHours(0,0,0,0),e}var Ij=864e5;function Cj(n,e){Mt(2,arguments);var t=Xe(n),r=Xe(e),i=t.getTime()-Gp(t),s=r.getTime()-Gp(r);return Math.round((i-s)/Ij)}function IR(n,e){Mt(2,arguments);var t=en(n),r=en(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var qw=6e4,Gw=36e5,Pj=1e3;function bj(n){return Mt(1,arguments),n instanceof Date||Ss(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function ct(n){if(Mt(1,arguments),!bj(n)&&typeof n!="number")return!1;var e=en(n);return!isNaN(Number(e))}function rC(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Aj(n,e){Mt(2,arguments);var t=en(n),r=en(e),i=rC(t,r),s=Math.abs(Cj(t,r));t.setDate(t.getDate()-i*s);var a=+(rC(t,r)===-i),u=i*(s-a);return u===0?0:u}function CR(n,e){Mt(2,arguments);var t=Hn(e);return Tj(n,-t)}var xj=864e5;function Rj(n){Mt(1,arguments);var e=en(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/xj)+1}function Lu(n){Mt(1,arguments);var e=1,t=en(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function PR(n){Mt(1,arguments);var e=en(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=Lu(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=Lu(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Dj(n){Mt(1,arguments);var e=PR(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=Lu(t);return r}var kj=6048e5;function bR(n){Mt(1,arguments);var e=en(n),t=Lu(e).getTime()-Dj(e).getTime();return Math.round(t/kj)+1}function el(n,e){var t,r,i,s,a,u,c,h;Mt(1,arguments);var m=Xu(),g=Hn((t=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&r!==void 0?r:(c=m.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=en(n),E=v.getUTCDay(),I=(E<g?7:0)+E-g;return v.setUTCDate(v.getUTCDate()-I),v.setUTCHours(0,0,0,0),v}function Kw(n,e){var t,r,i,s,a,u,c,h;Mt(1,arguments);var m=en(n),g=m.getUTCFullYear(),v=Xu(),E=Hn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:v.firstWeekContainsDate)!==null&&r!==void 0?r:(c=v.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=new Date(0);I.setUTCFullYear(g+1,0,E),I.setUTCHours(0,0,0,0);var b=el(I,e),P=new Date(0);P.setUTCFullYear(g,0,E),P.setUTCHours(0,0,0,0);var L=el(P,e);return m.getTime()>=b.getTime()?g+1:m.getTime()>=L.getTime()?g:g-1}function Nj(n,e){var t,r,i,s,a,u,c,h;Mt(1,arguments);var m=Xu(),g=Hn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(c=m.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),v=Kw(n,e),E=new Date(0);E.setUTCFullYear(v,0,g),E.setUTCHours(0,0,0,0);var I=el(E,e);return I}var Vj=6048e5;function AR(n,e){Mt(1,arguments);var t=en(n),r=el(t,e).getTime()-Nj(t,e).getTime();return Math.round(r/Vj)+1}function Pt(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var oo={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Pt(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):Pt(r+1,2)},d:function(e,t){return Pt(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return Pt(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Pt(e.getUTCHours(),t.length)},m:function(e,t){return Pt(e.getUTCMinutes(),t.length)},s:function(e,t){return Pt(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return Pt(s,t.length)}},Zl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mj={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return oo.y(e,t)},Y:function(e,t,r,i){var s=Kw(e,i),a=s>0?s:1-s;if(t==="YY"){var u=a%100;return Pt(u,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Pt(a,t.length)},R:function(e,t){var r=PR(e);return Pt(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return Pt(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Pt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Pt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return oo.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return Pt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=AR(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):Pt(s,t.length)},I:function(e,t,r){var i=bR(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):Pt(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):oo.d(e,t)},D:function(e,t,r){var i=Rj(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Pt(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Pt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Pt(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return Pt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=Zl.noon:i===0?s=Zl.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=Zl.evening:i>=12?s=Zl.afternoon:i>=4?s=Zl.morning:s=Zl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return oo.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):oo.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Pt(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):Pt(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):oo.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):oo.s(e,t)},S:function(e,t){return oo.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return sC(a);case"XXXX":case"XX":return Ca(a);default:return Ca(a,":")}},x:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return sC(a);case"xxxx":case"xx":return Ca(a);default:return Ca(a,":")}},O:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+iC(a,":");default:return"GMT"+Ca(a,":")}},z:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+iC(a,":");default:return"GMT"+Ca(a,":")}},t:function(e,t,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return Pt(a,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,a=s.getTime();return Pt(a,t.length)}};function iC(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+Pt(s,2)}function sC(n,e){if(n%60===0){var t=n>0?"-":"+";return t+Pt(Math.abs(n)/60,2)}return Ca(n,e)}function Ca(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=Pt(Math.floor(i/60),2),a=Pt(i%60,2);return r+s+t+a}var oC=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},xR=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Oj=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return oC(e,t);var a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",oC(i,t)).replace("{{time}}",xR(s,t))},n_={p:xR,P:Oj},Lj=["D","DD"],Fj=["YY","YYYY"];function RR(n){return Lj.indexOf(n)!==-1}function DR(n){return Fj.indexOf(n)!==-1}function Kp(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Uj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jj=function(e,t,r){var i,s=Uj[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Gy(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var Bj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$j={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wj={date:Gy({formats:Bj,defaultWidth:"full"}),time:Gy({formats:$j,defaultWidth:"full"}),dateTime:Gy({formats:zj,defaultWidth:"full"})},Hj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qj=function(e,t,r,i){return Hj[e]};function Qc(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var u=n.defaultWidth,c=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[u]}var h=n.argumentCallback?n.argumentCallback(e):e;return i[h]}}var Gj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zj=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},eB={ordinalNumber:Zj,era:Qc({values:Gj,defaultWidth:"wide"}),quarter:Qc({values:Kj,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qc({values:Qj,defaultWidth:"wide"}),day:Qc({values:Yj,defaultWidth:"wide"}),dayPeriod:Qc({values:Xj,defaultWidth:"wide",formattingValues:Jj,defaultFormattingWidth:"wide"})};function Yc(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(u)?nB(u,function(g){return g.test(a)}):tB(u,function(g){return g.test(a)}),h;h=n.valueCallback?n.valueCallback(c):c,h=t.valueCallback?t.valueCallback(h):h;var m=e.slice(a.length);return{value:h,rest:m}}}function tB(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function nB(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function rB(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var u=e.slice(i.length);return{value:a,rest:u}}}var iB=/^(\d+)(th|st|nd|rd)?/i,sB=/\d+/i,oB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aB={any:[/^b/i,/^(a|c)/i]},lB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uB={any:[/1/i,/2/i,/3/i,/4/i]},cB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gB={ordinalNumber:rB({matchPattern:iB,parsePattern:sB,valueCallback:function(e){return parseInt(e,10)}}),era:Yc({matchPatterns:oB,defaultMatchWidth:"wide",parsePatterns:aB,defaultParseWidth:"any"}),quarter:Yc({matchPatterns:lB,defaultMatchWidth:"wide",parsePatterns:uB,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Yc({matchPatterns:cB,defaultMatchWidth:"wide",parsePatterns:dB,defaultParseWidth:"any"}),day:Yc({matchPatterns:hB,defaultMatchWidth:"wide",parsePatterns:fB,defaultParseWidth:"any"}),dayPeriod:Yc({matchPatterns:pB,defaultMatchWidth:"any",parsePatterns:mB,defaultParseWidth:"any"})},kR={code:"en-US",formatDistance:jj,formatLong:Wj,formatRelative:qj,localize:eB,match:gB,options:{weekStartsOn:0,firstWeekContainsDate:1}},yB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_B=/^'([^]*?)'?$/,wB=/''/g,EB=/[a-zA-Z]/;function Ye(n,e,t){var r,i,s,a,u,c,h,m,g,v,E,I,b,P,L,D,A,j;Mt(2,arguments);var H=String(e),Y=Xu(),x=(r=(i=t?.locale)!==null&&i!==void 0?i:Y.locale)!==null&&r!==void 0?r:kR,S=Hn((s=(a=(u=(c=t?.firstWeekContainsDate)!==null&&c!==void 0?c:t==null||(h=t.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:Y.firstWeekContainsDate)!==null&&a!==void 0?a:(g=Y.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=Hn((E=(I=(b=(P=t?.weekStartsOn)!==null&&P!==void 0?P:t==null||(L=t.locale)===null||L===void 0||(D=L.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&b!==void 0?b:Y.weekStartsOn)!==null&&I!==void 0?I:(A=Y.locale)===null||A===void 0||(j=A.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&E!==void 0?E:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var O=en(n);if(!ct(O))throw new RangeError("Invalid time value");var M=Gp(O),U=CR(O,M),V={firstWeekContainsDate:S,weekStartsOn:k,locale:x,_originalDate:O},ie=H.match(vB).map(function(Ie){var Ce=Ie[0];if(Ce==="p"||Ce==="P"){var je=n_[Ce];return je(Ie,x.formatLong)}return Ie}).join("").match(yB).map(function(Ie){if(Ie==="''")return"'";var Ce=Ie[0];if(Ce==="'")return TB(Ie);var je=Mj[Ce];if(je)return!(t!=null&&t.useAdditionalWeekYearTokens)&&DR(Ie)&&Kp(Ie,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&RR(Ie)&&Kp(Ie,e,String(n)),je(U,Ie,x.localize,V);if(Ce.match(EB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ce+"`");return Ie}).join("");return ie}function TB(n){var e=n.match(_B);return e?e[1].replace(wB,"'"):n}function SB(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function aC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function IB(n,e){if(n){if(typeof n=="string")return aC(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?aC(n,e):void 0}}function lC(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=IB(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}function xe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r_(n,e){return r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},r_(n,e)}function _t(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&r_(n,e)}function Qp(n){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qp(n)}function NR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NR=function(){return!!n})()}function CB(n,e){if(e&&(Ss(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe(n)}function wt(n){var e=NR();return function(){var t,r=Qp(n);if(e){var i=Qp(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return CB(this,t)}}function pt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function PB(n,e){if(Ss(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ss(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VR(n){var e=PB(n,"string");return Ss(e)=="symbol"?e:e+""}function bB(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,VR(r.key),r)}}function mt(n,e,t){return e&&bB(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Pe(n,e,t){return(e=VR(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var AB=10,MR=(function(){function n(){pt(this,n),Pe(this,"priority",void 0),Pe(this,"subPriority",0)}return mt(n,[{key:"validate",value:function(t,r){return!0}}]),n})(),xB=(function(n){_t(t,n);var e=wt(t);function t(r,i,s,a,u){var c;return pt(this,t),c=e.call(this),c.value=r,c.validateValue=i,c.setValue=s,c.priority=a,u&&(c.subPriority=u),c}return mt(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,a){return this.setValue(i,s,this.value,a)}}]),t})(MR),RB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",AB),Pe(xe(r),"subPriority",-1),r}return mt(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}}]),t})(MR),It=(function(){function n(){pt(this,n),Pe(this,"incompatibleTokens",void 0),Pe(this,"priority",void 0),Pe(this,"subPriority",void 0)}return mt(n,[{key:"run",value:function(t,r,i,s){var a=this.parse(t,r,i,s);return a?{setter:new xB(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n})(),DB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",140),Pe(xe(r),"incompatibleTokens",["R","u","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"});case"GGGGG":return a.era(i,{width:"narrow"});default:return a.era(i,{width:"wide"})||a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,a){return s.era=a,i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(It),an={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ri={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ln(n,e){return n&&{value:e(n.value),rest:n.rest}}function Kt(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Di(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*Gw+s*qw+a*Pj),rest:e.slice(t[0].length)}}function OR(n){return Kt(an.anyDigitsSigned,n)}function tn(n,e){switch(n){case 1:return Kt(an.singleDigit,e);case 2:return Kt(an.twoDigits,e);case 3:return Kt(an.threeDigits,e);case 4:return Kt(an.fourDigits,e);default:return Kt(new RegExp("^\\d{1,"+n+"}"),e)}}function Yp(n,e){switch(n){case 1:return Kt(an.singleDigitSigned,e);case 2:return Kt(an.twoDigitsSigned,e);case 3:return Kt(an.threeDigitsSigned,e);case 4:return Kt(an.fourDigitsSigned,e);default:return Kt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Qw(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function LR(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,a=Math.floor(s/100)*100,u=n>=s%100;i=n+a-(u?100:0)}return t?i:1-i}function FR(n){return n%400===0||n%4===0&&n%100!==0}var kB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",130),Pe(xe(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="yy"}};switch(s){case"y":return ln(tn(4,i),u);case"yo":return ln(a.ordinalNumber(i,{unit:"year"}),u);default:return ln(tn(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a){var u=i.getUTCFullYear();if(a.isTwoDigitYear){var c=LR(a.year,u);return i.setUTCFullYear(c,0,1),i.setUTCHours(0,0,0,0),i}var h=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(h,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(It),NB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",130),Pe(xe(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return ln(tn(4,i),u);case"Yo":return ln(a.ordinalNumber(i,{unit:"year"}),u);default:return ln(tn(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a,u){var c=Kw(i,u);if(a.isTwoDigitYear){var h=LR(a.year,c);return i.setUTCFullYear(h,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),el(i,u)}var m=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(m,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),el(i,u)}}]),t})(It),VB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",130),Pe(xe(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s){return Yp(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,a){var u=new Date(0);return u.setUTCFullYear(a,0,4),u.setUTCHours(0,0,0,0),Lu(u)}}]),t})(It),MB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",130),Pe(xe(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s){return Yp(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,a){return i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(It),OB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",120),Pe(xe(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"Q":case"QQ":return tn(s.length,i);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});default:return a.quarter(i,{width:"wide",context:"formatting"})||a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(It),LB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",120),Pe(xe(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"q":case"qq":return tn(s.length,i);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});default:return a.quarter(i,{width:"wide",context:"standalone"})||a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(It),FB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Pe(xe(r),"priority",110),r}return mt(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"M":return ln(Kt(an.month,i),u);case"MM":return ln(tn(2,i),u);case"Mo":return ln(a.ordinalNumber(i,{unit:"month"}),u);case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});default:return a.month(i,{width:"wide",context:"formatting"})||a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(It),UB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",110),Pe(xe(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"L":return ln(Kt(an.month,i),u);case"LL":return ln(tn(2,i),u);case"Lo":return ln(a.ordinalNumber(i,{unit:"month"}),u);case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});default:return a.month(i,{width:"wide",context:"standalone"})||a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(It);function jB(n,e,t){Mt(2,arguments);var r=en(n),i=Hn(e),s=AR(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var BB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",100),Pe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"w":return Kt(an.week,i);case"wo":return a.ordinalNumber(i,{unit:"week"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a,u){return el(jB(i,a,u),u)}}]),t})(It);function $B(n,e){Mt(2,arguments);var t=en(n),r=Hn(e),i=bR(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var zB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",100),Pe(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"I":return Kt(an.week,i);case"Io":return a.ordinalNumber(i,{unit:"week"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a){return Lu($B(i,a))}}]),t})(It),WB=[31,28,31,30,31,30,31,31,30,31,30,31],HB=[31,29,31,30,31,30,31,31,30,31,30,31],qB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",90),Pe(xe(r),"subPriority",1),Pe(xe(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"d":return Kt(an.date,i);case"do":return a.ordinalNumber(i,{unit:"date"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=FR(a),c=i.getUTCMonth();return u?s>=1&&s<=HB[c]:s>=1&&s<=WB[c]}},{key:"set",value:function(i,s,a){return i.setUTCDate(a),i.setUTCHours(0,0,0,0),i}}]),t})(It),GB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",90),Pe(xe(r),"subpriority",1),Pe(xe(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"D":case"DD":return Kt(an.dayOfYear,i);case"Do":return a.ordinalNumber(i,{unit:"date"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=FR(a);return u?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,a){return i.setUTCMonth(0,a),i.setUTCHours(0,0,0,0),i}}]),t})(It);function Yw(n,e,t){var r,i,s,a,u,c,h,m;Mt(2,arguments);var g=Xu(),v=Hn((r=(i=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(u=t.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&s!==void 0?s:g.weekStartsOn)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&r!==void 0?r:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var E=en(n),I=Hn(e),b=E.getUTCDay(),P=I%7,L=(P+7)%7,D=(L<v?7:0)+I-b;return E.setUTCDate(E.getUTCDate()+D),E}var KB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",90),Pe(xe(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Yw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(It),QB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",90),Pe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a,u){var c=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"e":case"ee":return ln(tn(s.length,i),c);case"eo":return ln(a.ordinalNumber(i,{unit:"day"}),c);case"eee":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Yw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(It),YB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",90),Pe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a,u){var c=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"c":case"cc":return ln(tn(s.length,i),c);case"co":return ln(a.ordinalNumber(i,{unit:"day"}),c);case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});default:return a.day(i,{width:"wide",context:"standalone"})||a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=Yw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(It);function XB(n,e){Mt(2,arguments);var t=Hn(e);t%7===0&&(t=t-7);var r=1,i=en(n),s=i.getUTCDay(),a=t%7,u=(a+7)%7,c=(u<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+c),i}var JB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",90),Pe(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h===0?7:h};switch(s){case"i":case"ii":return tn(s.length,i);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return ln(a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiii":return ln(a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiiii":return ln(a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);default:return ln(a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,a){return i=XB(i,a),i.setUTCHours(0,0,0,0),i}}]),t})(It),ZB=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",80),Pe(xe(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Qw(a),0,0,0),i}}]),t})(It),e3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",80),Pe(xe(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Qw(a),0,0,0),i}}]),t})(It),t3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",80),Pe(xe(r),"incompatibleTokens",["a","b","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(Qw(a),0,0,0),i}}]),t})(It),n3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",70),Pe(xe(r),"incompatibleTokens",["H","K","k","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"h":return Kt(an.hour12h,i);case"ho":return a.ordinalNumber(i,{unit:"hour"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):!u&&a===12?i.setUTCHours(0,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(It),r3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",70),Pe(xe(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"H":return Kt(an.hour23h,i);case"Ho":return a.ordinalNumber(i,{unit:"hour"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,a){return i.setUTCHours(a,0,0,0),i}}]),t})(It),i3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",70),Pe(xe(r),"incompatibleTokens",["h","H","k","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"K":return Kt(an.hour11h,i);case"Ko":return a.ordinalNumber(i,{unit:"hour"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(It),s3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",70),Pe(xe(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"k":return Kt(an.hour24h,i);case"ko":return a.ordinalNumber(i,{unit:"hour"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,a){var u=a<=24?a%24:a;return i.setUTCHours(u,0,0,0),i}}]),t})(It),o3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",60),Pe(xe(r),"incompatibleTokens",["t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"m":return Kt(an.minute,i);case"mo":return a.ordinalNumber(i,{unit:"minute"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCMinutes(a,0,0),i}}]),t})(It),a3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",50),Pe(xe(r),"incompatibleTokens",["t","T"]),r}return mt(t,[{key:"parse",value:function(i,s,a){switch(s){case"s":return Kt(an.second,i);case"so":return a.ordinalNumber(i,{unit:"second"});default:return tn(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCSeconds(a,0),i}}]),t})(It),l3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",30),Pe(xe(r),"incompatibleTokens",["t","T"]),r}return mt(t,[{key:"parse",value:function(i,s){var a=function(c){return Math.floor(c*Math.pow(10,-s.length+3))};return ln(tn(s.length,i),a)}},{key:"set",value:function(i,s,a){return i.setUTCMilliseconds(a),i}}]),t})(It),u3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",10),Pe(xe(r),"incompatibleTokens",["t","T","x"]),r}return mt(t,[{key:"parse",value:function(i,s){switch(s){case"X":return Di(Ri.basicOptionalMinutes,i);case"XX":return Di(Ri.basic,i);case"XXXX":return Di(Ri.basicOptionalSeconds,i);case"XXXXX":return Di(Ri.extendedOptionalSeconds,i);default:return Di(Ri.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(It),c3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",10),Pe(xe(r),"incompatibleTokens",["t","T","X"]),r}return mt(t,[{key:"parse",value:function(i,s){switch(s){case"x":return Di(Ri.basicOptionalMinutes,i);case"xx":return Di(Ri.basic,i);case"xxxx":return Di(Ri.basicOptionalSeconds,i);case"xxxxx":return Di(Ri.extendedOptionalSeconds,i);default:return Di(Ri.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(It),d3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",40),Pe(xe(r),"incompatibleTokens","*"),r}return mt(t,[{key:"parse",value:function(i){return OR(i)}},{key:"set",value:function(i,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t})(It),h3=(function(n){_t(t,n);var e=wt(t);function t(){var r;pt(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Pe(xe(r),"priority",20),Pe(xe(r),"incompatibleTokens","*"),r}return mt(t,[{key:"parse",value:function(i){return OR(i)}},{key:"set",value:function(i,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t})(It),f3={G:new DB,y:new kB,Y:new NB,R:new VB,u:new MB,Q:new OB,q:new LB,M:new FB,L:new UB,w:new BB,I:new zB,d:new qB,D:new GB,E:new KB,e:new QB,c:new YB,i:new JB,a:new ZB,b:new e3,B:new t3,h:new n3,H:new r3,K:new i3,k:new s3,m:new o3,s:new a3,S:new l3,X:new u3,x:new c3,t:new d3,T:new h3},p3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,m3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g3=/^'([^]*?)'?$/,y3=/''/g,v3=/\S/,_3=/[a-zA-Z]/;function w3(n,e,t,r){var i,s,a,u,c,h,m,g,v,E,I,b,P,L;Mt(3,arguments);var D=String(n),A=String(e),j=Xu(),H=(i=(s=void 0)!==null&&s!==void 0?s:j.locale)!==null&&i!==void 0?i:kR;if(!H.match)throw new RangeError("locale must contain match property");var Y=Hn((a=(u=(c=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&c!==void 0?c:j.firstWeekContainsDate)!==null&&u!==void 0?u:(m=j.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(Y>=1&&Y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=Hn((v=(E=(I=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&I!==void 0?I:j.weekStartsOn)!==null&&E!==void 0?E:(P=j.locale)===null||P===void 0||(L=P.options)===null||L===void 0?void 0:L.weekStartsOn)!==null&&v!==void 0?v:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(A==="")return D===""?en(t):new Date(NaN);var S={firstWeekContainsDate:Y,weekStartsOn:x,locale:H},k=[new RB],O=A.match(m3).map(function(Te){var Ee=Te[0];if(Ee in n_){var Me=n_[Ee];return Me(Te,H.formatLong)}return Te}).join("").match(p3),M=[],U=lC(O),V;try{var ie=function(){var Ee=V.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&DR(Ee)&&Kp(Ee,A,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&RR(Ee)&&Kp(Ee,A,n);var Me=Ee[0],tt=f3[Me];if(tt){var rt=tt.incompatibleTokens;if(Array.isArray(rt)){var at=M.find(function(gn){return rt.includes(gn.token)||gn.token===Me});if(at)throw new RangeError("The format string mustn't contain `".concat(at.fullToken,"` and `").concat(Ee,"` at the same time"))}else if(tt.incompatibleTokens==="*"&&M.length>0)throw new RangeError("The format string mustn't contain `".concat(Ee,"` and any other token at the same time"));M.push({token:Me,fullToken:Ee});var kt=tt.run(D,Ee,H.match,S);if(!kt)return{v:new Date(NaN)};k.push(kt.setter),D=kt.rest}else{if(Me.match(_3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Me+"`");if(Ee==="''"?Ee="'":Me==="'"&&(Ee=E3(Ee)),D.indexOf(Ee)===0)D=D.slice(Ee.length);else return{v:new Date(NaN)}}};for(U.s();!(V=U.n()).done;){var Ie=ie();if(Ss(Ie)==="object")return Ie.v}}catch(Te){U.e(Te)}finally{U.f()}if(D.length>0&&v3.test(D))return new Date(NaN);var Ce=k.map(function(Te){return Te.priority}).sort(function(Te,Ee){return Ee-Te}).filter(function(Te,Ee,Me){return Me.indexOf(Te)===Ee}).map(function(Te){return k.filter(function(Ee){return Ee.priority===Te}).sort(function(Ee,Me){return Me.subPriority-Ee.subPriority})}).map(function(Te){return Te[0]}),je=en(t);if(isNaN(je.getTime()))return new Date(NaN);var se=CR(je,Gp(je)),_e={},ue=lC(Ce),B;try{for(ue.s();!(B=ue.n()).done;){var ee=B.value;if(!ee.validate(se,S))return new Date(NaN);var we=ee.set(se,_e,S);Array.isArray(we)?(se=we[0],SB(_e,we[1])):se=we}}catch(Te){ue.e(Te)}finally{ue.f()}return se}function E3(n){return n.match(g3)[1].replace(y3,"'")}function ce(n,e){var t;Mt(1,arguments);var r=Hn((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=C3(n),s;if(i.date){var a=P3(i.date,r);s=b3(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var u=s.getTime(),c=0,h;if(i.time&&(c=A3(i.time),isNaN(c)))return new Date(NaN);if(i.timezone){if(h=x3(i.timezone),isNaN(h))return new Date(NaN)}else{var m=new Date(u+c),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(u+c+h)}var Uf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},T3=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S3=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,I3=/^([+-])(\d{2})(?::?(\d{2}))?$/;function C3(n){var e={},t=n.split(Uf.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Uf.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Uf.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=Uf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function P3(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function b3(n,e){if(e===null)return new Date(NaN);var t=n.match(T3);if(!t)return new Date(NaN);var r=!!t[4],i=Xc(t[1]),s=Xc(t[2])-1,a=Xc(t[3]),u=Xc(t[4]),c=Xc(t[5])-1;if(r)return V3(e,u,c)?R3(e,u,c):new Date(NaN);var h=new Date(0);return!k3(e,s,a)||!N3(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}function Xc(n){return n?parseInt(n):1}function A3(n){var e=n.match(S3);if(!e)return NaN;var t=Ky(e[1]),r=Ky(e[2]),i=Ky(e[3]);return M3(t,r,i)?t*Gw+r*qw+i*1e3:NaN}function Ky(n){return n&&parseFloat(n.replace(",","."))||0}function x3(n){if(n==="Z")return 0;var e=n.match(I3);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return O3(r,i)?t*(r*Gw+i*qw):NaN}function R3(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var D3=[31,null,31,30,31,30,31,31,30,31,30,31];function UR(n){return n%400===0||n%4===0&&n%100!==0}function k3(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(D3[e]||(UR(n)?29:28))}function N3(n,e){return e>=1&&e<=(UR(n)?366:365)}function V3(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function M3(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function O3(n,e){return e>=0&&e<=59}const L3=typeof import.meta<"u"&&!1,Xp=n=>n instanceof Date?n.toISOString():Array.isArray(n)?n.map(e=>Xp(e)):n&&typeof n=="object"?Object.entries(n).reduce((e,[t,r])=>(r!==void 0&&(e[t]=Xp(r)),e),{}):n;class jR extends Error{constructor(e,t,r,i,s,a){super(r),this.name="AppError",this.code=e,this.title=t,this.details=i?Xp(i):void 0,this.action=s?Xp(s):void 0,a!==void 0&&(this.cause=a)}toJSON(){return{code:this.code,title:this.title,message:this.message,details:this.details,action:this.action}}}const Ne=(n,e,t,r,i,s)=>new jR(n,e,t,r,i,s),jf=n=>{if(n instanceof jR)return n.toJSON();if(n instanceof Error){const e=L3&&n.message?{debugMessage:n.message}:void 0;return Ne("unknown","No se pudo completar la operacin","Ha ocurrido un error inesperado. Intntalo de nuevo en unos minutos.",e,{label:"Reintentar"}).toJSON()}return Ne("unknown","No se pudo completar la operacin","Ha ocurrido un error inesperado. Intntalo de nuevo en unos minutos.",void 0,{label:"Reintentar"}).toJSON()},F3=(n,e)=>{if(!n||!e)return{startDate:n,endDate:e};const t=Xe(ce(n)),r=Xe(ce(e));return!ct(t)||!ct(r)?{startDate:n,endDate:e}:r<t?{startDate:n,endDate:n}:{startDate:n,endDate:e}},uC=(n,e)=>{const t=F3(n,e);return t.endDate?`${t.startDate} a ${t.endDate}`:`${t.startDate} en adelante`},Ju=(n,e,t)=>{const r=uC(n?.startDate,n?.endDate);return`El rango ${uC(e,t)} se cruza con el ciclo ${r}. Cambia la fecha para que los ciclos no se superpongan.`},Zu=(n,e)=>{if(!n||!e)return 0;const t=Xe(ce(n)),r=Xe(ce(e));return Aj(t,r)+1},go=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},U3=n=>n?.iso_date&&ct(ce(n.iso_date))?Ye(ce(n.iso_date),"yyyy-MM-dd"):typeof n?.timestamp=="string"&&ct(ce(n.timestamp))?Ye(ce(n.timestamp),"yyyy-MM-dd"):null,j3=(n,e=null)=>({temperature_chart:go(n?.temperature_chart),temperature_raw:go(n?.temperature_raw),temperature_corrected:go(n?.temperature_corrected),use_corrected:!!n?.use_corrected,timestamp:n?.timestamp??null,mucus_sensation:n?.mucus_sensation??null,mucus_appearance:n?.mucus_appearance??null,fertility_symbol:n?.fertility_symbol??null,observations:n?.observations??null,had_relations:!!(n?.had_relations??n?.hadRelations??!1),ignored:!!n?.ignored,peak_marker:n?.peak_marker??null,measurementsCount:e}),eu=({cycleStartIso:n,cycleEndIso:e,entries:t})=>{const r=[],i=new Map,s=Array.isArray(t)?t:[];for(const c of s){const h=U3(c),m=c?.id??null,g=j3(c);if(!h){r.push({entryId:m,isoDateResolved:null,reason:"invalid-date",entryPreview:g});continue}i.has(h)||i.set(h,[]),i.get(h).push({entryId:m,preview:g}),n&&h<n?r.push({entryId:m,isoDateResolved:h,reason:"before-cycle-start",entryPreview:g}):e&&h>e&&r.push({entryId:m,isoDateResolved:h,reason:"after-cycle-end",entryPreview:g})}const a=[...i.entries()].filter(([,c])=>c.length>1).map(([c,h])=>({isoDate:c,entries:h})),u=a.reduce((c,h)=>c+h.entries.length,0);return{outOfRange:r,duplicates:a,hasIssues:r.length>0||a.length>0,summary:{outOfRangeCount:r.length,duplicateDaysCount:a.length,duplicateEntriesCount:u}}},hp=(n,e)=>!n||!Array.isArray(n)||!e?[]:[...n].sort((r,i)=>{const s=r.timestamp?ce(r.timestamp):r.iso_date?ce(r.iso_date):0,a=i.timestamp?ce(i.timestamp):i.iso_date?ce(i.iso_date):0;return IR(s,a)}).map(r=>{const i=go(r.temperature_raw),s=go(r.temperature_corrected),a=Array.isArray(r.measurements)?r.measurements:[],u=h=>{if(!h)return null;const m=go(h.temperature),g=go(h.temperature_corrected);return h.use_corrected&&g!==null?g:m!==null?m:g!==null?g:null};let c=go(r.temperature_chart);if(c==null&&a.length){const m=a.find(g=>g&&g.selected&&u(g)!==null)||a.find(g=>u(g)!==null);m&&(c=u(m))}return c==null&&(r.use_corrected&&s!==null?c=s:i!==null?c=i:s!==null&&(c=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?Ye(ce(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?Ye(ce(r.timestamp),"dd/MM"):r.iso_date?Ye(ce(r.iso_date),"dd/MM"):"N/A",cycleDay:Zu(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:a,temperature_chart:c,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),B3=async n=>{const e=ze(re,`users/${n}/cycles`),t=await et(e);if(t.empty)return null;const r=t.docs.map(c=>({id:c.id,...c.data()})).filter(c=>c.end_date===null||c.end_date===void 0).sort((c,h)=>(h.start_date||"").localeCompare(c.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=ze(re,`users/${n}/cycles/${i.id}/entries`),u=(await et(s)).docs.map(c=>({id:c.id,...c.data()}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},$3=async(n,e)=>{const t=ze(re,`users/${n}/cycles`),i=(await et(t)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.end_date!==null&&a.end_date!==void 0||e&&a.start_date&&a.start_date<e).sort((a,u)=>(u.start_date||"").localeCompare(a.start_date||""));return await Promise.all(i.map(async a=>{const u=ze(re,`users/${n}/cycles/${a.id}/entries`),h=(await et(u)).docs.map(m=>({id:m.id,...m.data()}));return{id:a.id,startDate:a.start_date,endDate:a.end_date,needsCompletion:!a.end_date,ignoredForAutoCalculations:!!a.ignored_auto_calculations,data:h}}))},z3=async(n,e)=>{const t=We(re,`users/${n}/cycles/${e}`),r=await ti(t);if(!r.exists())return null;const i=r.data(),s=ze(re,`users/${n}/cycles/${e}/entries`),u=(await et(s)).docs.map(c=>({id:c.id,...c.data()}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},W3=async(n,e)=>{const t=ze(re,`users/${n}/cycles`),r=await et(t),i=ce(e),s=r.docs.find(u=>{const c=u.data(),h=c.start_date?ce(c.start_date):null,m=c.end_date?ce(c.end_date):null;if(!h||!i)return!1;const g=m??new Date("9999-12-31");return i>=h&&i<=g});if(s){const u={id:s.id,startDate:s.data().start_date,endDate:s.data().end_date};throw Ne("cycle-overlap","Las fechas se superponen",Ju(u,e,null),{conflictCycle:u,proposedStart:e,proposedEnd:null},{label:"Cambiar fecha",hint:"Elige una fecha de inicio que no pise otro ciclo."})}return{id:(await uh(ze(re,`users/${n}/cycles`),{user_id:n,start_date:e,ignored_auto_calculations:!1,end_date:null})).id,start_date:e}},Is=n=>{if(n.iso_date&&ct(ce(n.iso_date)))return Ye(ce(n.iso_date),"yyyy-MM-dd");if(typeof n.timestamp=="string"&&ct(ce(n.timestamp)))return Ye(ce(n.timestamp),"yyyy-MM-dd");throw Ne("split-invalid-entry","Hay una fecha invlida en un registro","No se pudo mover un registro porque su fecha no tiene un formato vlido. Usa yyyy-MM-dd o una fecha ISO completa.",{entryDate:n?.iso_date??n?.timestamp??null},{label:"Revisar fecha",hint:"Corrige la fecha del registro y vuelve a intentarlo."})},$m=n=>n.map(e=>{const t=e.data(),r=t?.start_date,i=typeof r=="string"?Xe(ce(r)):null;return{id:e.id,data:t,start:i}}).filter(({start:e})=>e&&ct(e)).sort((e,t)=>IR(e.start,t.start)).map(({id:e,data:t})=>({id:e,data:t})),cC=n=>typeof n=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(n),BR=(n,e)=>{if(!cC(n)||!cC(e))throw Ne("cycle-range-invalid","Formato de fecha invlido","Las fechas deben tener formato yyyy-MM-dd.",{startIso:n??null,endIso:e??null},{label:"Revisar fechas"});const t=Xe(ce(n)),r=Xe(ce(e));if(!ct(t)||!ct(r)||r<t)throw Ne("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior a la fecha de inicio.",{startIso:n,endIso:e},{label:"Revisar fechas"})},zm=async n=>(await et(ze(re,`users/${n}/cycles`))).docs.map(t=>({id:t.id,startDate:t.data()?.start_date??null,endDate:t.data()?.end_date??null,data:t.data()})).filter(t=>t.startDate).sort((t,r)=>t.startDate.localeCompare(r.startDate)),H3="9999-12-31",dC=n=>Ye(ii(Xe(ce(n)),-1),"yyyy-MM-dd"),hC=n=>Ye(ii(Xe(ce(n)),1),"yyyy-MM-dd"),wd={DELETE:"delete",MERGE_PREV:"merge-prev",MERGE_NEXT:"merge-next"},$R=(n,e,t)=>{const r=[],i=[];for(const a of n){const u=a.startDate,c=a.endDate??H3;if(!(u<=t&&c>=e))continue;r.push({id:a.id,startDate:a.startDate,endDate:a.endDate??null});const m=e<=u&&t>=c&&a.endDate!==null,g=u<e&&c>t,v=e<=u&&t<c;if(m){i.push({action:"delete",cycleId:a.id,startDate:a.startDate,endDate:a.endDate??null});continue}if(g){i.push({action:"split",cycleId:a.id,startDate:a.startDate,endDate:a.endDate??null,leftEndDate:dC(e),rightStartDate:hC(t),rightEndDate:a.endDate??null});continue}if(v){i.push({action:"trimStart",cycleId:a.id,startDate:a.startDate,endDate:a.endDate??null,newStartDate:hC(t)});continue}i.push({action:"trimEnd",cycleId:a.id,startDate:a.startDate,endDate:a.endDate??null,newEndDate:dC(e)})}const s={trimStartCount:i.filter(a=>a.action==="trimStart").length,trimEndCount:i.filter(a=>a.action==="trimEnd").length,deleteCount:i.filter(a=>a.action==="delete").length,splitCount:i.filter(a=>a.action==="split").length,estimateMovedEntries:0};return{overlaps:r,plan:i,summary:s}},q3=async({userId:n,cycleId:e,startIso:t,endIso:r})=>(await et(ze(re,`users/${n}/cycles/${e}/entries`))).docs.reduce((s,a)=>{try{const u=Is(a.data());return u>=t&&u<=r?s+1:s}catch{return s}},0),$d=async({userId:n,cycleId:e,predicate:t})=>(await et(ze(re,`users/${n}/cycles/${e}/entries`))).docs.reduce((i,s)=>{try{const a=Is(s.data());return t(a,s.data())?i+1:i}catch{return i}},0),Zr=({affectedCycles:n=[],adjustedCyclesPreview:e=[],impactSummary:t={}})=>({affectedCycles:n,adjustedCyclesPreview:e,impactSummary:{trimmedCycles:t.trimmedCycles??0,deletedCycles:t.deletedCycles??0,movedEntries:t.movedEntries??0}}),Jp=n=>n?.type==="delete"||n?.deleted===!0,G3=n=>(n?.impactSummary?.trimmedCycles??0)>0||(n?.impactSummary?.deletedCycles??0)>0||(n?.impactSummary?.movedEntries??0)>0,K3=async({userId:n,proposedStartIso:e,proposedEndIso:t})=>{if(!n)return{overlaps:[],plan:[],summary:{trimStartCount:0,trimEndCount:0,deleteCount:0,splitCount:0,estimateMovedEntries:0}};BR(e,t);const r=await zm(n),i=$R(r,e,t);let s=0;for(const a of i.plan)s+=await q3({userId:n,cycleId:a.cycleId,startIso:e,endIso:t});return{...i,summary:{...i.summary,estimateMovedEntries:s}}},ec=(n,e)=>{const t=n.findIndex(r=>r.id===e);return t===-1?{previous:null,current:null,next:null,nextNext:null}:{previous:t>0?n[t-1]:null,current:n[t],next:t<n.length-1?n[t+1]:null,nextNext:t<n.length-2?n[t+2]:null}},tl=async({userId:n,fromCycleId:e,toCycleId:t,shouldMoveIsoDate:r,toCycleStartIso:i})=>{if(!n||!e||!t||!i)throw Ne("split-invalid-entry","Faltan datos para mover registros","No se pudieron mover los registros porque faltan datos necesarios. Revisa la fecha y vuelve a intentarlo.",{userId:n??null,fromCycleId:e??null,toCycleId:t??null,toCycleStartIso:i??null},{label:"Revisar fecha"});const s=ze(re,`users/${n}/cycles/${e}/entries`),u=(await et(s)).docs.map(A=>{const j=A.data(),H=Is(j);return{id:A.id,ref:A.ref,data:j,isoDate:H}}).filter(A=>r(A.isoDate));if(!u.length)return{movedEntries:0};const c=ze(re,`users/${n}/cycles/${t}/entries`),h=await et(c),m=new Map;for(const A of h.docs){let j=null;try{j=Is(A.data())}catch{continue}if(m.has(j))throw Ne("split-date-conflict","Hay fechas duplicadas",`Ya existen entradas duplicadas para el da ${j} en el ciclo destino.`,{conflictDate:j},{label:"Eliminar/combinar entradas duplicadas"});m.set(j,{id:A.id,ref:A.ref,data:A.data()})}let g=ni(re),v=0;const E=async()=>{v>=400&&(await g.commit(),g=ni(re),v=0)},I=async(A,j)=>{await E(),g.set(A,j),v+=1},b=async(A,j)=>{await E(),g.update(A,j),v+=1},P=async A=>{await E(),g.delete(A),v+=1},L=A=>A==null||typeof A=="string"&&A.trim()==="",D=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const A of u){const j=m.get(A.isoDate),H=Zu(A.isoDate,i),Y=We(re,`users/${n}/cycles/${e}/entries_by_iso/${A.isoDate}`),x=We(re,`users/${n}/cycles/${t}/entries_by_iso/${A.isoDate}`);if(j){const M={cycle_day:H};for(const ie of D){const Ie=j.data?.[ie],Ce=A.data?.[ie];L(Ie)&&!L(Ce)&&(M[ie]=Ce)}await b(j.ref,M),await I(x,{entryId:j.id});const U=ze(re,`users/${n}/cycles/${e}/entries/${A.id}/measurements`),V=await et(U);for(const ie of V.docs){const Ie=We(ze(re,`users/${n}/cycles/${t}/entries/${j.id}/measurements`));await I(Ie,ie.data()),await P(ie.ref)}await P(A.ref),await P(Y);continue}const S=We(re,`users/${n}/cycles/${t}/entries/${A.id}`);await I(S,{...A.data,cycle_day:H}),await I(x,{entryId:A.id});const k=ze(re,`users/${n}/cycles/${e}/entries/${A.id}/measurements`),O=await et(k);for(const M of O.docs){const U=We(re,`users/${n}/cycles/${t}/entries/${A.id}/measurements/${M.id}`);await I(U,M.data()),await P(M.ref)}await P(A.ref),await P(Y)}return v>0&&await g.commit(),{movedEntries:u.length}},Ua=async(n,e,t)=>{if(!n||!e||!t)return;const r=ze(re,`users/${n}/cycles/${e}/entries`),i=await et(r);let s=ni(re),a=0;const u=async()=>{a>=400&&(await s.commit(),s=ni(re),a=0)},c=async(h,m)=>{await u(),s.update(h,m),a+=1};for(const h of i.docs){const m=h.data();let g=null;try{g=Is(m)}catch{continue}const v=Zu(g,t);await c(h.ref,{cycle_day:v})}a>0&&await s.commit()},zR=async(n,e,t,r)=>{if(!n||!e||!t||!r)throw Ne("split-invalid-entry","Faltan datos para dividir el ciclo","No se pudo dividir el ciclo porque faltan datos requeridos. Revisa la fecha elegida e intntalo de nuevo.",{userId:n??null,previousCycleId:e??null,newCycleId:t??null,startDate:r??null},{label:"Revisar fecha"});const i=ce(r);if(!ct(i))throw Ne("split-invalid-date","La fecha de inicio no es vlida","La fecha ingresada para iniciar el nuevo ciclo no tiene un formato vlido. Usa yyyy-MM-dd o ISO.",{startDate:r},{label:"Revisar fecha"});const s=ze(re,`users/${n}/cycles/${e}/entries`),u=(await et(s)).docs.map(A=>{const j=A.data(),H=Is(j);return{id:A.id,ref:A.ref,data:j,isoDate:H}}).filter(A=>ce(A.isoDate)>=i);if(!u.length)return{movedEntries:0};const c=ze(re,`users/${n}/cycles/${t}/entries`),h=await et(c),m=new Map;for(const A of h.docs){const j=A.data();let H=null;try{H=Is(j)}catch{continue}if(m.has(H))throw Ne("split-date-conflict","Hay fechas duplicadas",`Ya existen entradas duplicadas para el da ${H} en el ciclo destino.`,{conflictDate:H},{label:"Eliminar/combinar entradas duplicadas"});m.set(H,{id:A.id,ref:A.ref,data:j})}let g=ni(re),v=0;const E=async()=>{v>=400&&(await g.commit(),g=ni(re),v=0)},I=async(A,j)=>{await E(),g.set(A,j),v+=1},b=async(A,j)=>{await E(),g.update(A,j),v+=1},P=async A=>{await E(),g.delete(A),v+=1},L=A=>A==null||typeof A=="string"&&A.trim()==="",D=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker","timestamp"];for(const A of u){const j=m.get(A.isoDate),H=Zu(A.isoDate,r),Y=We(re,`users/${n}/cycles/${e}/entries_by_iso/${A.isoDate}`),x=We(re,`users/${n}/cycles/${t}/entries_by_iso/${A.isoDate}`);if(j){const M={cycle_day:H};for(const ie of D){const Ie=j.data?.[ie],Ce=A.data?.[ie];L(Ie)&&!L(Ce)&&(M[ie]=Ce)}await b(j.ref,M),await I(x,{entryId:j.id});const U=ze(re,`users/${n}/cycles/${e}/entries/${A.id}/measurements`),V=await et(U);for(const ie of V.docs){const Ie=We(ze(re,`users/${n}/cycles/${t}/entries/${j.id}/measurements`));await I(Ie,ie.data()),await P(ie.ref)}await P(A.ref),await P(Y);continue}const S=We(re,`users/${n}/cycles/${t}/entries/${A.id}`);await I(S,{...A.data,cycle_day:H}),await I(x,{entryId:A.id});const k=ze(re,`users/${n}/cycles/${e}/entries/${A.id}/measurements`),O=await et(k);for(const M of O.docs){const U=We(re,`users/${n}/cycles/${t}/entries/${A.id}/measurements/${M.id}`);await I(U,M.data()),await P(M.ref)}await P(A.ref),await P(Y)}return v>0&&await g.commit(),{movedEntries:u.length}},Q3=async({userId:n,startIso:e,endIso:t})=>{if(!n)return null;BR(e,t);const r=await zm(n),i=$R(r,e,t),s=We(ze(re,`users/${n}/cycles`));await fs(s,{user_id:n,start_date:e,end_date:t,ignored_auto_calculations:!1});let a=0;const u=[],c=async E=>{const I=await tl({userId:n,fromCycleId:E,toCycleId:s.id,shouldMoveIsoDate:b=>b>=e&&b<=t,toCycleStartIso:e});a+=I?.movedEntries??0},h=i.plan.filter(E=>E.action==="split");for(const E of h){await c(E.cycleId);const I=We(re,`users/${n}/cycles/${E.cycleId}`);await zn(I,{end_date:E.leftEndDate});const b=We(ze(re,`users/${n}/cycles`));await fs(b,{user_id:n,start_date:E.rightStartDate,end_date:E.rightEndDate,ignored_auto_calculations:!1});const P=await tl({userId:n,fromCycleId:E.cycleId,toCycleId:b.id,shouldMoveIsoDate:L=>L>=E.rightStartDate,toCycleStartIso:E.rightStartDate});a+=P?.movedEntries??0,await Ua(n,b.id,E.rightStartDate),u.push({id:E.cycleId,oldStart:E.startDate,newStart:E.startDate,oldEnd:E.endDate,newEnd:E.leftEndDate}),u.push({id:b.id,oldStart:null,newStart:E.rightStartDate,oldEnd:null,newEnd:E.rightEndDate})}const m=i.plan.filter(E=>E.action==="trimStart");for(const E of m){await c(E.cycleId);const I=We(re,`users/${n}/cycles/${E.cycleId}`);await zn(I,{start_date:E.newStartDate}),await Ua(n,E.cycleId,E.newStartDate),u.push({id:E.cycleId,oldStart:E.startDate,newStart:E.newStartDate,oldEnd:E.endDate,newEnd:E.endDate})}const g=i.plan.filter(E=>E.action==="trimEnd");for(const E of g){await c(E.cycleId);const I=We(re,`users/${n}/cycles/${E.cycleId}`);await zn(I,{end_date:E.newEndDate}),u.push({id:E.cycleId,oldStart:E.startDate,newStart:E.startDate,oldEnd:E.endDate,newEnd:E.newEndDate})}const v=i.plan.filter(E=>E.action==="delete");for(const E of v)await c(E.cycleId),await bo(n,E.cycleId),u.push({id:E.cycleId,oldStart:E.startDate,newStart:null,oldEnd:E.endDate,newEnd:null});return await Ua(n,s.id,e),{newCycleId:s.id,movedEntriesCount:a,overlaps:i.overlaps,plan:i.plan,summary:{...i.summary,estimateMovedEntries:a},changedCycles:u}},Y3=async(n,e,t)=>{if(!n||!t)throw Ne("cycle-range-invalid","Faltan datos del ciclo","No se puede iniciar un ciclo nuevo sin la fecha de inicio.",{userId:n??null,startDate:t??null},{label:"Cambiar fecha"});const r=ce(t);if(!ct(r))throw Ne("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela e intntalo de nuevo.",{startDate:t},{label:"Cambiar fecha"});const i=ze(re,`users/${n}/cycles`),a=(await et(i)).docs.find(c=>{if(c.id===e)return!1;const h=c.data(),m=h.start_date?ce(h.start_date):null,g=h.end_date?ce(h.end_date):null;if(!m)return!1;const v=g??new Date("9999-12-31");return r>=m&&r<=v});if(a){const c={id:a.id,startDate:a.data().start_date,endDate:a.data().end_date};throw Ne("cycle-overlap","Las fechas se superponen",Ju(c,t,null),{conflictCycle:c,proposedStart:t,proposedEnd:null},{label:"Cambiar fecha",hint:"Elige una fecha de inicio fuera del rango en conflicto."})}const u=We(ze(re,`users/${n}/cycles`));if(await fs(u,{user_id:n,start_date:t,ignored_auto_calculations:!1,end_date:null}),e){await zR(n,e,u.id,t);const c=We(re,`users/${n}/cycles/${e}`),h=Ye(ii(Xe(r),-1),"yyyy-MM-dd");await zn(c,{end_date:h})}return{id:u.id,start_date:t}},X3=async({userId:n,startDate:e,previousCycleId:t})=>{if(!n||!e)throw Ne("cycle-range-invalid","Faltan datos del ciclo","No se puede iniciar un ciclo nuevo sin la fecha de inicio.",{userId:n??null,startDate:e??null},{label:"Cambiar fecha"});const r=ce(e);if(!ct(r))throw Ne("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela e intntalo de nuevo.",{startDate:e},{label:"Cambiar fecha"});const i=await et(ze(re,`users/${n}/cycles`)),s=i.docs.find(m=>{if(m.id===t)return!1;const g=m.data(),v=g.start_date?ce(g.start_date):null,E=g.end_date?ce(g.end_date):null;if(!v)return!1;const I=E??new Date("9999-12-31");return r>=v&&r<=I});if(s){const m={id:s.id,startDate:s.data().start_date,endDate:s.data().end_date};throw Ne("cycle-overlap","Las fechas se superponen",Ju(m,e,null),{conflictCycle:m,proposedStart:e,proposedEnd:null},{label:"Cambiar fecha",hint:"Elige una fecha de inicio fuera del rango en conflicto."})}if(!t)return Zr({});const a=i.docs.find(m=>m.id===t);if(!a?.exists())return Zr({});const u=a.data(),c=await $d({userId:n,cycleId:t,predicate:m=>m>=e}),h=Ye(ii(Xe(r),-1),"yyyy-MM-dd");return Zr({affectedCycles:[{cycleId:t,startDate:u.start_date,endDate:u.end_date??null}],adjustedCyclesPreview:[{cycleId:t,type:"trim",startDate:u.start_date,endDate:h},{cycleId:"new-cycle-preview",type:"new",startDate:e,endDate:null}],impactSummary:{trimmedCycles:1,deletedCycles:0,movedEntries:c}})},J3=async(n,e,t,r)=>{if(!n||!e||!t)throw Ne("invalid-iso-date-upsert","Faltan datos para guardar el registro","No se pudo guardar porque faltan datos del ciclo o de la fecha.",{userId:n??null,cycleId:e??null,isoDate:t??null},{label:"Reintentar"});const i=String(t);if(!/^\d{4}-\d{2}-\d{2}$/.test(i))throw Ne("invalid-iso-date-upsert","La fecha del registro no es vlida","No se pudo guardar porque la fecha del da no tiene formato yyyy-MM-dd.",{userId:n,cycleId:e,isoDate:i},{label:"Revisar fecha"});const s=ze(re,`users/${n}/cycles/${e}/entries`),a=We(re,`users/${n}/cycles/${e}/entries_by_iso/${i}`),u=We(re,`users/${n}/cycles/${e}`),c=await ti(u);if(!c.exists())throw Ne("unknown","No se encontr el ciclo","No se pudo guardar el registro porque el ciclo ya no existe.",{userId:n,cycleId:e},{label:"Actualizar pantalla"});const h=c.data(),m=h?.start_date??null,g=h?.end_date??null;if(m&&i<m||g&&i>g)throw Ne("entry-out-of-range","Fecha fuera del ciclo",`El da ${i} est fuera del rango del ciclo (${m} - ${g||"abierto"}).`,{userId:n,cycleId:e,isoDate:i,start:m,end:g},{label:"Revisar",hint:"Abre la herramienta de reparacin para mover o eliminar el registro."});const v={timestamp:r.timestamp??new Date().toISOString(),iso_date:i,temperature_raw:r.temperature_raw??null,temperature_corrected:r.temperature_corrected??null,use_corrected:!!r.use_corrected,temperature_chart:r.temperature_chart??null,mucus_sensation:r.mucus_sensation??null,mucus_appearance:r.mucus_appearance??null,fertility_symbol:r.fertility_symbol??null,observations:r.observations??null,had_relations:!!(r.had_relations??r.hadRelations??!1),ignored:!!(r.ignored??!1),peak_marker:r.peak_marker??null},E=await ti(a);if(E.exists()){const b=E.data()?.entryId;if(!b)throw Ne("duplicate-iso-date","ndice diario invlido",`El ndice para ${i} no tiene entryId y no se puede continuar.`,{userId:n,cycleId:e,isoDate:i,indexDocId:E.id},{label:"Revisar datos duplicados"});const P=We(s,b),L=ni(re);L.set(P,v,{merge:!0}),L.set(a,{entryId:b},{merge:!0}),await L.commit();var I={id:b}}else{const b=Rw(s,Dw("iso_date","==",i),Vw(2)),P=await et(b);if(P.size>1){const H=P.docs.map(Y=>Y.id);throw Ne("duplicate-iso-date","Hay registros duplicados para el mismo da",`Encontramos ms de un registro para ${i}. Corrige los duplicados antes de guardar.`,{userId:n,cycleId:e,isoDate:i,duplicateEntryIds:H},{label:"Revisar duplicados"})}const L=P.size===1?P.docs[0].ref:We(s,i),D=P.size===1?P.docs[0].id:i,A=ni(re);A.set(L,v,{merge:!0}),A.set(a,{entryId:D},{merge:!0}),await A.commit();var I={id:D}}if(Array.isArray(r.measurements)&&(r.measurements.length>=2||r.measurements.length===0)){const b=ze(re,`users/${n}/cycles/${e}/entries/${I.id}/measurements`),P=await et(b);if(await Po(P.docs.map(L=>L.ref)),r.measurements.length>=2)for(const L of r.measurements)await uh(b,L)}return I},Qy=async(n,e,t,r)=>{const i=We(re,`users/${n}/cycles/${e}/entries/${t}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],a={};for(const u of s)Object.prototype.hasOwnProperty.call(r,u)&&(a[u]=r[u]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(a.timestamp=r.timestamp),Object.keys(a).length===0)return{id:t};if(await zn(i,a),Array.isArray(r.measurements)&&(r.measurements.length>=2||r.measurements.length===0)){const u=ze(re,`users/${n}/cycles/${e}/entries/${t}/measurements`),c=await et(u);if(await Promise.all(c.docs.map(h=>Ya(h.ref))),r.measurements.length>=2)for(const h of r.measurements)await uh(u,h)}return{id:t}},Z3=async(n,e,t)=>{try{const r=ze(re,`users/${n}/cycles/${e}/entries/${t}/measurements`);return(await et(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error fetching measurements for entry",t,r),[]}},Po=async(n,e=400)=>{if(!(!Array.isArray(n)||n.length===0))for(let t=0;t<n.length;t+=e){const r=n.slice(t,t+e),i=ni(re);r.forEach(s=>i.delete(s)),await i.commit()}},e$=async({userId:n,cycleId:e,entryId:t,measurementRefs:r=null,batchLimit:i=450})=>{const s=Array.isArray(r)?r:(await et(ze(re,`users/${n}/cycles/${e}/entries/${t}/measurements`))).docs.map(u=>u.ref);await Po(s,i);const a=We(re,`users/${n}/cycles/${e}/entries/${t}`);await Ya(a)},i_=async(n,e,t)=>{const r=We(re,`users/${n}/cycles/${e}/entries/${t}`),i=await ti(r),s=ze(re,`users/${n}/cycles/${e}/entries/${t}/measurements`),u=(await et(s)).docs.map(h=>h.ref);await Po(u);const c=(()=>{if(!i.exists())return null;const h=i.data();return typeof h?.iso_date=="string"&&h.iso_date?h.iso_date:typeof h?.timestamp=="string"&&ct(ce(h.timestamp))?Ye(ce(h.timestamp),"yyyy-MM-dd"):null})();if(c){const h=We(re,`users/${n}/cycles/${e}/entries_by_iso/${c}`),m=await ti(h);m.exists()&&m.data()?.entryId===t&&await Ya(h)}else{const h=ze(re,`users/${n}/cycles/${e}/entries_by_iso`),m=await et(Rw(h,Dw("entryId","==",t),Vw(10)));await Po(m.docs.map(g=>g.ref))}await Ya(r)},t$=async(n,e,t)=>i_(n,e,t),n$=async({userId:n,cycleId:e,isoDate:t,winnerEntryId:r,loserEntryIds:i,moveMeasurements:s=!0})=>{if(!n||!e||!t||!r||!Array.isArray(i))throw Ne("duplicate-resolution-invalid-input","Faltan datos para resolver duplicados","No se pudo resolver el duplicado porque faltan datos.",{userId:n,cycleId:e,isoDate:t,winnerEntryId:r,loserEntryIds:i});const a=ze(re,`users/${n}/cycles/${e}/entries/${r}/measurements`);for(const c of i){const h=ze(re,`users/${n}/cycles/${e}/entries/${c}/measurements`),m=await et(h);if(s)for(const g of m.docs)await uh(a,g.data());await e$({userId:n,cycleId:e,entryId:c,measurementRefs:m.docs.map(g=>g.ref),batchLimit:450})}const u=We(re,`users/${n}/cycles/${e}/entries_by_iso/${t}`);return await fs(u,{entryId:r},{merge:!0}),{winnerEntryId:r,removedEntries:i.length}},r$=async({userId:n,fromCycleId:e,toCycleId:t,entryId:r,isoDate:i,strategy:s="upsert-by-iso"})=>{if(!n||!e||!t||!r||!i)throw Ne("move-entry-invalid-input","Faltan datos para mover el registro","No se pudo mover el registro porque faltan datos obligatorios.",{userId:n,fromCycleId:e,toCycleId:t,entryId:r,isoDate:i,strategy:s});const a=We(re,`users/${n}/cycles/${e}/entries/${r}`),u=await ti(a);if(!u.exists())throw Ne("move-entry-not-found","Registro no encontrado","El registro que intentas mover ya no existe.",{userId:n,fromCycleId:e,entryId:r});const c=u.data(),h=We(re,`users/${n}/cycles/${t}`),m=await ti(h);if(!m.exists())throw Ne("move-entry-invalid-target","Ciclo destino no encontrado","El ciclo destino no existe.");const g=m.data(),v=Zu(i,g?.start_date),E=ze(re,`users/${n}/cycles/${t}/entries`),I=await et(Rw(E,Dw("iso_date","==",i),Vw(2)));if(I.size>1)throw Ne("duplicate-iso-date","Hay registros duplicados en el ciclo destino",`El ciclo destino ya tiene duplicados para ${i}. Resulvelos antes de mover este registro.`,{toCycleId:t,isoDate:i});const b=ze(re,`users/${n}/cycles/${e}/entries/${r}/measurements`),P=await et(b);let L=r;if(s==="upsert-by-iso"&&I.size===1){const D=I.docs[0].ref;L=I.docs[0].id,await fs(D,{...c,cycle_day:v,iso_date:i},{merge:!0});const A=ze(re,`users/${n}/cycles/${t}/entries/${L}/measurements`);for(const j of P.docs)await uh(A,j.data())}else{const D=We(re,`users/${n}/cycles/${t}/entries/${r}`);await fs(D,{...c,cycle_day:v,iso_date:i},{merge:!0});for(const A of P.docs){const j=We(re,`users/${n}/cycles/${t}/entries/${r}/measurements/${A.id}`);await fs(j,A.data(),{merge:!0})}}return await Po(P.docs.map(D=>D.ref)),await Ya(a),await Ya(We(re,`users/${n}/cycles/${e}/entries_by_iso/${i}`)),await fs(We(re,`users/${n}/cycles/${t}/entries_by_iso/${i}`),{entryId:L},{merge:!0}),{destinationEntryId:L}},Yy=async(n,e,t,r,i=!1)=>{const s=We(re,`users/${e}/cycles/${n}`),a=await ti(s);if(!a.exists())throw Ne("unknown","No se encontr el ciclo","No pudimos actualizar las fechas porque el ciclo ya no existe.",{cycleId:n,userId:e},{label:"Actualizar pantalla"});const u=a.data(),c=t??u.start_date,h=r!==void 0?r:u.end_date,m=c?ce(c):null,g=h?ce(h):null;if(m&&g&&g<m)throw Ne("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior a la fecha de inicio. Corrige la fecha final.",{startDate:c,endDate:h,invalidField:"endDate"},{label:"Cambiar fecha"});const v=ze(re,`users/${e}/cycles`),I=(await et(v)).docs.find(L=>{if(L.id===n)return!1;const D=L.data(),A=D.start_date?ce(D.start_date):null,j=D.end_date?ce(D.end_date):null;if(!A)return!1;const H=j??new Date("9999-12-31"),Y=g??new Date("9999-12-31");return m<=H&&A<=Y}),b=I?{id:I.id,startDate:I.data().start_date,endDate:I.data().end_date}:null;if(i)return{overlap:b};if(I)throw Ne("cycle-overlap","Las fechas se superponen",Ju(b,c,h),{conflictCycle:b,proposedStart:c,proposedEnd:h},{label:"Cambiar fecha"});const P={};t!==void 0&&(P.start_date=t),r!==void 0&&(P.end_date=r),await zn(s,P)},i$=async(n,e,t)=>{const r=We(re,`users/${n}/cycles/${e}`);await zn(r,{ignored_auto_calculations:t})},s$=async(n,e,t,r)=>{if(!t)return{changedCycles:[],movedEntriesCount:0,notes:[]};const i=Xe(ce(t));if(!ct(i))throw Ne("cycle-range-invalid","La fecha de fin no es vlida","La fecha de fin no tiene un formato vlido. Corrgela para continuar.",{endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const s=ze(re,`users/${n}/cycles`),a=await et(s),u=$m(a.docs),{current:c,next:h}=ec(u,e);if(!c||!h)return{changedCycles:[],movedEntriesCount:0,notes:[]};const m={changedCycles:[],movedEntriesCount:0,notes:[]},g=r||c.data.start_date||null,v=g?Xe(ce(g)):null;if(v&&i<v)throw Ne("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior al inicio del ciclo actual. Corrige la fecha final.",{startDate:g||c.data.start_date||null,endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const E=Xe(ii(i,1)),I=Ye(E,"yyyy-MM-dd"),b=Xe(ce(h.data.start_date));if(E<b){const D=await zR(n,e,h.id,I);m.movedEntriesCount+=D?.movedEntries??0,m.notes.push("Se parti el ciclo actual para extender el siguiente.");const A=We(re,`users/${n}/cycles/${h.id}`);return await zn(A,{start_date:I}),await Ua(n,h.id,I),m.changedCycles.push({id:h.id,oldStart:h.data.start_date,newStart:I,oldEnd:h.data.end_date??null,newEnd:h.data.end_date??null}),m}const P=u.findIndex(D=>D.id===e),L=P>=0?u.slice(P+1):[];for(const D of L){const A=D?.data?.start_date;if(!A)continue;const j=Xe(ce(A));if(!ct(j)||j>i)break;const H=await tl({userId:n,fromCycleId:D.id,toCycleId:e,shouldMoveIsoDate:U=>Xe(ce(U))<E,toCycleStartIso:g||c.data.start_date});m.movedEntriesCount+=H?.movedEntries??0;const Y=D.data.end_date??null,x=Y?Xe(ce(Y)):null,S=x&&ct(x)&&x>=j?x:j;if(Y!=null&&S<=i){await bo(n,D.id),m.changedCycles.push({id:D.id,oldStart:D.data.start_date,newStart:null,oldEnd:D.data.end_date??null,newEnd:null}),m.notes.push("Se absorbi y elimin un ciclo posterior cubierto por completo.");continue}const M=We(re,`users/${n}/cycles/${D.id}`);await zn(M,{start_date:I}),await Ua(n,D.id,I),m.changedCycles.push({id:D.id,oldStart:D.data.start_date,newStart:I,oldEnd:D.data.end_date??null,newEnd:D.data.end_date??null}),m.notes.push("Se recort el inicio del siguiente ciclo no cubierto completamente.");break}return m},o$=async({userId:n,cycleId:e,newEndDate:t,currentCycleStartDate:r})=>{if(!t)return Zr({});const i=Xe(ce(t));if(!ct(i))throw Ne("cycle-range-invalid","La fecha de fin no es vlida","La fecha de fin no tiene un formato vlido. Corrgela para continuar.",{endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const s=await et(ze(re,`users/${n}/cycles`)),a=$m(s.docs),{current:u,next:c}=ec(a,e);if(!u||!c)return Zr({});const m=r??u.data.start_date??null,g=m?Xe(ce(m)):null;if(g&&i<g)throw Ne("cycle-range-invalid","Rango de fechas invlido","La fecha de fin no puede ser anterior al inicio del ciclo actual. Corrige la fecha final.",{startDate:m,endDate:t,invalidField:"endDate"},{label:"Cambiar fecha"});const v=Ye(ii(i,1),"yyyy-MM-dd");Xe(ce(c.data.start_date));const E=[],I=[];let b=0;if(v<c.data.start_date)return b+=await $d({userId:n,cycleId:e,predicate:D=>D>=v}),E.push({cycleId:c.id,startDate:c.data.start_date,endDate:c.data.end_date??null}),I.push({cycleId:c.id,type:"trim",startDate:v,endDate:c.data.end_date??null}),Zr({affectedCycles:E,adjustedCyclesPreview:I,impactSummary:{trimmedCycles:1,deletedCycles:0,movedEntries:b}});const P=a.findIndex(D=>D.id===e),L=P>=0?a.slice(P+1):[];for(const D of L){const A=D?.data?.start_date;if(!A)continue;const j=Xe(ce(A));if(!ct(j)||j>i)break;b+=await $d({userId:n,cycleId:D.id,predicate:O=>O<v}),E.push({cycleId:D.id,startDate:D.data.start_date,endDate:D.data.end_date??null});const H=D.data.end_date??null,Y=H?Xe(ce(H)):null,x=Y&&ct(Y)&&Y>=j?Y:j;if(H!=null&&x<=i){I.push({cycleId:D.id,type:"delete",startDate:D.data.start_date,endDate:D.data.end_date??null});continue}I.push({cycleId:D.id,type:"trim",startDate:v,endDate:D.data.end_date??null});break}return Zr({affectedCycles:E,adjustedCyclesPreview:I,impactSummary:{trimmedCycles:I.filter(D=>!Jp(D)).length,deletedCycles:I.filter(D=>Jp(D)).length,movedEntries:b}})},a$=async(n,e,t)=>{if(!t)return{changedCycles:[],movedEntriesCount:0,notes:[]};const r=Xe(ce(t));if(!ct(r))throw Ne("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela para continuar.",{startDate:t,invalidField:"startDate"},{label:"Cambiar fecha"});const i=ze(re,`users/${n}/cycles`),s=await et(i),a=$m(s.docs),{previous:u,current:c,next:h}=ec(a,e);if(!c)return{changedCycles:[],movedEntriesCount:0,notes:[]};const m={changedCycles:[],movedEntriesCount:0,notes:[]},g=c.data.start_date,v=g?Xe(ce(g)):null,E=c.data.end_date?Xe(ce(c.data.end_date)):null;if(h?.data?.start_date){const L=Xe(ce(h.data.start_date));if(r>=L){const D={id:h.id,startDate:h.data.start_date,endDate:h.data.end_date};throw Ne("cycle-overlap","Las fechas se superponen",Ju(D,Ye(r,"yyyy-MM-dd"),c.data.end_date??null),{conflictCycle:D,proposedStart:Ye(r,"yyyy-MM-dd"),proposedEnd:c.data.end_date??null},{label:"Cambiar fecha"})}}if(E&&r>E)throw Ne("cycle-range-invalid","Rango de fechas invlido","La fecha de inicio no puede ser posterior a la fecha de fin del ciclo. Corrige la fecha de inicio.",{startDate:Ye(r,"yyyy-MM-dd"),endDate:c.data.end_date,invalidField:"startDate"},{label:"Cambiar fecha"});const I=Ye(r,"yyyy-MM-dd"),b=Ye(ii(r,-1),"yyyy-MM-dd");if(u&&v&&r>v){const L=We(re,`users/${n}/cycles/${u.id}`);await zn(L,{end_date:b}),m.changedCycles.push({id:u.id,oldStart:u.data.start_date,newStart:u.data.start_date,oldEnd:u.data.end_date??null,newEnd:b});const D=await tl({userId:n,fromCycleId:e,toCycleId:u.id,shouldMoveIsoDate:A=>Xe(ce(A))<r,toCycleStartIso:u.data.start_date});m.movedEntriesCount+=D?.movedEntries??0,m.notes.push("Se movieron registros desde el ciclo editado al ciclo previo.")}else if(v&&r<v){const L=a.findIndex(A=>A.id===e),D=L>0?a.slice(0,L).reverse():[];for(const A of D){const j=A?.data?.start_date;if(!j)continue;const H=Xe(ce(j));if(!ct(H))continue;const Y=A.data.end_date??j,x=Xe(ce(Y));if(!ct(x)||x<r)break;const S=await tl({userId:n,fromCycleId:A.id,toCycleId:e,shouldMoveIsoDate:O=>Xe(ce(O))>=r,toCycleStartIso:I});if(m.movedEntriesCount+=S?.movedEntries??0,r<=H){await bo(n,A.id),m.changedCycles.push({id:A.id,oldStart:A.data.start_date,newStart:null,oldEnd:A.data.end_date??null,newEnd:null}),m.notes.push("Se absorbi y elimin un ciclo previo cubierto por completo.");continue}const k=We(re,`users/${n}/cycles/${A.id}`);await zn(k,{end_date:b}),m.changedCycles.push({id:A.id,oldStart:A.data.start_date,newStart:A.data.start_date,oldEnd:A.data.end_date??null,newEnd:b}),m.notes.push("Se recort el fin de un ciclo previo no cubierto completamente.");break}}const P=We(re,`users/${n}/cycles/${e}`);return await zn(P,{start_date:I}),await Ua(n,e,I),m.changedCycles.push({id:e,oldStart:c.data.start_date,newStart:I,oldEnd:c.data.end_date??null,newEnd:c.data.end_date??null}),m},l$=async({userId:n,cycleId:e,newStartDate:t})=>{if(!t)return Zr({});const r=Xe(ce(t));if(!ct(r))throw Ne("cycle-range-invalid","La fecha de inicio no es vlida","La fecha de inicio no tiene un formato vlido. Corrgela para continuar.",{startDate:t,invalidField:"startDate"},{label:"Cambiar fecha"});const i=await et(ze(re,`users/${n}/cycles`)),s=$m(i.docs),{previous:a,current:u,next:c}=ec(s,e);if(!u)return Zr({});const h=u.data.end_date?Xe(ce(u.data.end_date)):null;if(c?.data?.start_date){const b=Xe(ce(c.data.start_date));if(r>=b){const P={id:c.id,startDate:c.data.start_date,endDate:c.data.end_date};throw Ne("cycle-overlap","Las fechas se superponen",Ju(P,Ye(r,"yyyy-MM-dd"),u.data.end_date??null),{conflictCycle:P,proposedStart:Ye(r,"yyyy-MM-dd"),proposedEnd:u.data.end_date??null},{label:"Cambiar fecha"})}}if(h&&r>h)throw Ne("cycle-range-invalid","Rango de fechas invlido","La fecha de inicio no puede ser posterior a la fecha de fin del ciclo. Corrige la fecha de inicio.",{startDate:Ye(r,"yyyy-MM-dd"),endDate:u.data.end_date,invalidField:"startDate"},{label:"Cambiar fecha"});const m=[{cycleId:u.id,startDate:u.data.start_date,endDate:u.data.end_date??null}],g=[{cycleId:u.id,type:"trim",startDate:Ye(r,"yyyy-MM-dd"),endDate:u.data.end_date??null}];let v=0;const E=u.data.start_date,I=Ye(r,"yyyy-MM-dd");if(a&&E&&I>E){const b=Ye(ii(r,-1),"yyyy-MM-dd");m.unshift({cycleId:a.id,startDate:a.data.start_date,endDate:a.data.end_date??null}),g.unshift({cycleId:a.id,type:"trim",startDate:a.data.start_date,endDate:b}),v+=await $d({userId:n,cycleId:e,predicate:P=>P>=E&&P<I})}else if(E&&I<E){const b=Ye(ii(r,-1),"yyyy-MM-dd"),P=s.findIndex(D=>D.id===e),L=P>0?s.slice(0,P).reverse():[];for(const D of L){const A=D?.data?.start_date;if(!A)continue;const j=Xe(ce(A));if(!ct(j))continue;const H=D.data.end_date??A,Y=Xe(ce(H));if(!ct(Y)||Y<r)break;if(m.unshift({cycleId:D.id,startDate:D.data.start_date,endDate:D.data.end_date??null}),v+=await $d({userId:n,cycleId:D.id,predicate:x=>x>=I}),r<=j){g.unshift({cycleId:D.id,type:"delete",startDate:D.data.start_date,endDate:D.data.end_date??null});continue}g.unshift({cycleId:D.id,type:"trim",startDate:D.data.start_date,endDate:b});break}}return Zr({affectedCycles:m,adjustedCyclesPreview:g,impactSummary:{trimmedCycles:g.filter(b=>!Jp(b)).length,deletedCycles:g.filter(b=>Jp(b)).length,movedEntries:v}})},bo=async(n,e)=>{const t=ze(re,`users/${n}/cycles/${e}/entries`),r=await et(t),i=ze(re,`users/${n}/cycles/${e}/entries_by_iso`),s=await et(i),a=[];for(const u of r.docs){const c=ze(re,`users/${n}/cycles/${e}/entries/${u.id}/measurements`);(await et(c)).docs.forEach(m=>{a.push(m.ref)})}await Po(a),await Po(r.docs.map(u=>u.ref)),await Po(s.docs.map(u=>u.ref)),await Ya(We(re,`users/${n}/cycles/${e}`))},WR=async({userId:n,cycleId:e,strategy:t})=>{if(!n||!e||!Object.values(wd).includes(t))throw Ne("delete-archived-cycle-invalid","Faltan datos para eliminar el ciclo","No se puede continuar porque faltan datos o la opcin elegida no es vlida.",{userId:n??null,cycleId:e??null,strategy:t??null},{label:"Reintentar"});const r=await zm(n),{previous:i,current:s,next:a}=ec(r,e);if(!s)throw Ne("cycle-not-found","No se encontr el ciclo","El ciclo que intentas eliminar ya no existe.",{cycleId:e},{label:"Actualizar pantalla"});if(s.endDate===null||s.endDate===void 0)throw Ne("delete-archived-cycle-only","Este ciclo no est archivado","Solo puedes usar esta accin en ciclos archivados.",{cycleId:e,endDate:s.endDate??null},{label:"Volver al ciclo actual"});const c=(await et(ze(re,`users/${n}/cycles/${e}/entries`))).size,h=[{cycleId:s.id,startDate:s.startDate,endDate:s.endDate??null}],m=[{cycleId:s.id,type:"delete",startDate:s.startDate,endDate:s.endDate??null}];if(t===wd.MERGE_PREV){if(!i)throw Ne("delete-archived-cycle-missing-neighbor","No hay ciclo anterior","No se puede fusionar porque este ciclo no tiene un ciclo anterior.",{cycleId:e,strategy:t},{label:"Elegir otra opcin"});const g=s.endDate===null?null:i.endDate?[i.endDate,s.endDate].sort().at(-1):s.endDate;h.unshift({cycleId:i.id,startDate:i.startDate,endDate:i.endDate??null}),m.unshift({cycleId:i.id,type:"trim",startDate:i.startDate,endDate:g})}if(t===wd.MERGE_NEXT){if(!a)throw Ne("delete-archived-cycle-missing-neighbor","No hay ciclo siguiente","No se puede fusionar porque este ciclo no tiene un ciclo siguiente.",{cycleId:e,strategy:t},{label:"Elegir otra opcin"});const g=[a.startDate,s.startDate].sort()[0];h.push({cycleId:a.id,startDate:a.startDate,endDate:a.endDate??null}),m.push({cycleId:a.id,type:"trim",startDate:g,endDate:a.endDate??null})}return{strategy:t,affectedCycles:h,adjustedCyclesPreview:m,impactSummary:{trimmedCycles:m.filter(g=>g.type==="trim").length,deletedCycles:1,movedEntries:c}}},u$=async({userId:n,cycleId:e,strategy:t})=>{const r=await WR({userId:n,cycleId:e,strategy:t});if(t===wd.DELETE)return await bo(n,e),r;const i=await zm(n),{previous:s,current:a,next:u}=ec(i,e);if(!a)throw Ne("cycle-not-found","No se encontr el ciclo","El ciclo que intentas eliminar ya no existe.",{cycleId:e},{label:"Actualizar pantalla"});if(t===wd.MERGE_PREV){if(!s)throw Ne("delete-archived-cycle-missing-neighbor","No hay ciclo anterior","No se puede fusionar porque este ciclo no tiene un ciclo anterior.",{cycleId:e,strategy:t},{label:"Elegir otra opcin"});const g=We(re,`users/${n}/cycles/${s.id}`),v=s.endDate??null,E=a.endDate===null?null:s.endDate?[s.endDate,a.endDate].sort().at(-1):a.endDate;await zn(g,{end_date:E});try{await tl({userId:n,fromCycleId:e,toCycleId:s.id,shouldMoveIsoDate:()=>!0,toCycleStartIso:s.startDate})}catch(I){throw await zn(g,{end_date:v}),I}return await bo(n,e),r}if(!u)throw Ne("delete-archived-cycle-missing-neighbor","No hay ciclo siguiente","No se puede fusionar porque este ciclo no tiene un ciclo siguiente.",{cycleId:e,strategy:t},{label:"Elegir otra opcin"});const c=We(re,`users/${n}/cycles/${u.id}`),h=u.startDate,m=[u.startDate,a.startDate].sort()[0];await zn(c,{start_date:m});try{await tl({userId:n,fromCycleId:e,toCycleId:u.id,shouldMoveIsoDate:()=>!0,toCycleStartIso:m}),await Ua(n,u.id,m)}catch(g){throw await zn(c,{start_date:h}),g}return await bo(n,e),r},c$=async(n,e)=>{if(!n||!e)throw Ne("undo-not-current","No se puede deshacer este ciclo","Faltan datos para deshacer el ciclo actual. Vuelve a abrir el ciclo e intntalo otra vez.",{userId:n??null,currentCycleId:e??null},{label:"Volver al ciclo actual"});const t=We(re,`users/${n}/cycles/${e}`),r=await ti(t);if(!r.exists())throw Ne("undo-not-current","No se encontr el ciclo actual","No pudimos deshacer el ciclo porque ya no existe.",{currentCycleId:e},{label:"Actualizar pantalla"});const i=r.data();if(i.end_date!==null&&i.end_date!==void 0)throw Ne("undo-not-current","Solo puedes deshacer el ciclo actual","Este ciclo ya est cerrado. Para deshacer, abre el ciclo actual.",{currentCycleId:e,endDate:i.end_date},{label:"Volver al ciclo actual"});if(!i.start_date||!ct(ce(i.start_date)))throw Ne("undo-not-current","No se puede deshacer el ciclo","La fecha de inicio del ciclo actual no es vlida. Corrige la fecha del ciclo actual.",{currentCycleId:e,startDate:i.start_date??null},{label:"Cambiar fecha"});const s=await et(ze(re,`users/${n}/cycles`)),a=Ye(ii(ce(i.start_date),-1),"yyyy-MM-dd"),u=s.docs.filter(S=>S.id!==e).map(S=>({id:S.id,...S.data()})).filter(S=>S.end_date===a).sort((S,k)=>(k.start_date||"").localeCompare(S.start_date||""));if(!u.length)throw Ne("no-previous-cycle","No hay un ciclo anterior para recuperar","No encontramos un ciclo previo que termine justo antes del ciclo actual. Revisa las fechas de tus ciclos.",{currentCycleId:e,expectedPreviousEndDate:a},{label:"Revisar fechas de ciclos"});const c=u[0];if(!c.start_date||!ct(ce(c.start_date)))throw Ne("no-previous-cycle","El ciclo anterior tiene una fecha invlida","No se puede deshacer porque el ciclo anterior tiene una fecha de inicio no vlida.",{previousCycleId:c.id,previousStartDate:c.start_date??null},{label:"Cambiar fecha"});const h=S=>{if(S.iso_date&&ct(ce(S.iso_date)))return Ye(ce(S.iso_date),"yyyy-MM-dd");if(typeof S.timestamp=="string"&&ct(ce(S.timestamp)))return Ye(ce(S.timestamp),"yyyy-MM-dd");throw Ne("split-invalid-entry","Hay una fecha invlida en un registro","No se pudo deshacer porque un registro tiene una fecha invlida. Usa yyyy-MM-dd o ISO.",{entryDate:S?.iso_date??S?.timestamp??null},{label:"Revisar fecha"})},m=S=>{try{return S.iso_date&&ct(ce(S.iso_date))?Ye(ce(S.iso_date),"yyyy-MM-dd"):typeof S.timestamp=="string"&&ct(ce(S.timestamp))?Ye(ce(S.timestamp),"yyyy-MM-dd"):null}catch{return null}},g=ze(re,`users/${n}/cycles/${c.id}/entries`),v=await et(g),E=new Set;v.docs.forEach(S=>{const k=m(S.data());k&&E.add(k)});const I=ze(re,`users/${n}/cycles/${e}/entries`),P=(await et(I)).docs.map(S=>{const k=S.data(),O=h(k);if(E.has(O))throw Ne("undo-date-conflict","Hay conflicto de fechas al deshacer",`Ya existe una entrada para el da ${O} en el ciclo anterior.`,{conflictDate:O,previousCycleId:c.id},{label:"Eliminar/combinar entradas duplicadas"});return E.add(O),{ref:S.ref,id:S.id,data:k,isoDate:O}});let L=ni(re),D=0;const A=async()=>{D>=400&&(await L.commit(),L=ni(re),D=0)},j=async(S,k)=>{await A(),L.set(S,k),D+=1},H=async S=>{await A(),L.delete(S),D+=1},Y=async(S,k)=>{await A(),L.update(S,k),D+=1};for(const S of P){const k=We(re,`users/${n}/cycles/${c.id}/entries/${S.id}`),O=Zu(S.isoDate,c.start_date);await j(k,{...S.data,cycle_day:O});const M=We(re,`users/${n}/cycles/${c.id}/entries_by_iso/${S.isoDate}`);await j(M,{entryId:S.id});const U=We(re,`users/${n}/cycles/${e}/entries_by_iso/${S.isoDate}`);await H(U);const V=ze(re,`users/${n}/cycles/${e}/entries/${S.id}/measurements`),ie=await et(V);for(const Ie of ie.docs){const Ce=We(re,`users/${n}/cycles/${c.id}/entries/${S.id}/measurements/${Ie.id}`);await j(Ce,Ie.data()),await H(Ie.ref)}await H(S.ref)}const x=We(re,`users/${n}/cycles/${c.id}`);await Y(x,{end_date:null}),await H(t),D>0&&await L.commit()},d$=async({userId:n,currentCycleId:e})=>{if(!n||!e)throw Ne("undo-not-current","No se puede deshacer este ciclo","Faltan datos para deshacer el ciclo actual. Vuelve a abrir el ciclo e intntalo otra vez.",{userId:n??null,currentCycleId:e??null},{label:"Volver al ciclo actual"});const t=We(re,`users/${n}/cycles/${e}`),r=await ti(t);if(!r.exists())throw Ne("undo-not-current","No se encontr el ciclo actual","No pudimos deshacer el ciclo porque ya no existe.",{currentCycleId:e},{label:"Actualizar pantalla"});const i=r.data();if(i.end_date!==null&&i.end_date!==void 0)throw Ne("undo-not-current","Solo puedes deshacer el ciclo actual","Este ciclo ya est cerrado. Para deshacer, abre el ciclo actual.",{currentCycleId:e,endDate:i.end_date},{label:"Volver al ciclo actual"});if(!i.start_date||!ct(ce(i.start_date)))throw Ne("undo-not-current","No se puede deshacer el ciclo","La fecha de inicio del ciclo actual no es vlida. Corrige la fecha del ciclo actual.",{currentCycleId:e,startDate:i.start_date??null},{label:"Cambiar fecha"});const s=await et(ze(re,`users/${n}/cycles`)),a=Ye(ii(ce(i.start_date),-1),"yyyy-MM-dd"),u=s.docs.filter(v=>v.id!==e).map(v=>({id:v.id,...v.data()})).filter(v=>v.end_date===a).sort((v,E)=>(E.start_date||"").localeCompare(v.start_date||""));if(!u.length)throw Ne("no-previous-cycle","No hay un ciclo anterior para recuperar","No encontramos un ciclo previo que termine justo antes del ciclo actual. Revisa las fechas de tus ciclos.",{currentCycleId:e,expectedPreviousEndDate:a},{label:"Revisar fechas de ciclos"});const c=u[0];if(!c.start_date||!ct(ce(c.start_date)))throw Ne("no-previous-cycle","El ciclo anterior tiene una fecha invlida","No se puede deshacer porque el ciclo anterior tiene una fecha de inicio no vlida.",{previousCycleId:c.id,previousStartDate:c.start_date??null},{label:"Cambiar fecha"});const h=await et(ze(re,`users/${n}/cycles/${c.id}/entries`)),m=new Set;h.docs.forEach(v=>{const E=v.data();try{const I=Is(E);I&&m.add(I)}catch{}});const g=await et(ze(re,`users/${n}/cycles/${e}/entries`));for(const v of g.docs){const E=v.data(),I=Is(E);if(m.has(I))throw Ne("undo-date-conflict","Hay conflicto de fechas al deshacer",`Ya existe una entrada para el da ${I} en el ciclo anterior.`,{conflictDate:I,previousCycleId:c.id},{label:"Eliminar/combinar entradas duplicadas"});m.add(I)}return Zr({affectedCycles:[{cycleId:c.id,startDate:c.start_date,endDate:c.end_date??null},{cycleId:e,startDate:i.start_date,endDate:i.end_date??null}],adjustedCyclesPreview:[{cycleId:c.id,type:"trim",startDate:c.start_date,endDate:null},{cycleId:e,type:"delete",startDate:i.start_date,endDate:i.end_date??null}],impactSummary:{trimmedCycles:1,deletedCycles:1,movedEntries:g.size}})},Xy=n=>G3(n),h$="RNFApp",f$=1,Zp="cycleData",Xw="cycle-data:",Jw=()=>typeof indexedDB<"u",Zw=()=>typeof localStorage<"u",p$=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),m$=()=>new Promise((n,e)=>{const t=indexedDB.open(h$,f$);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(Zp)||r.createObjectStore(Zp)},t.onsuccess=()=>{n(t.result)},t.onerror=()=>{e(t.error)}}),eE=async(n,e)=>{const t=await m$();return new Promise((r,i)=>{const s=t.transaction(Zp,n),a=s.objectStore(Zp),u=e(a);s.oncomplete=()=>{t.close(),r(u?.result)},s.onerror=()=>{t.close(),i(s.error??u?.error)}})},fC=async n=>{if(!n)return null;if(Jw())try{return await eE("readonly",t=>t.get(n))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(Zw())try{const e=localStorage.getItem(`${Xw}${n}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},g$=async(n,e)=>{if(!n)return;const t=p$(e);if(Jw())try{await eE("readwrite",r=>r.put(t,n));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(Zw())try{localStorage.setItem(`${Xw}${n}`,JSON.stringify(t))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},y$=async n=>{if(n){if(Jw())try{await eE("readwrite",e=>e.delete(n))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(Zw())try{localStorage.removeItem(`${Xw}${n}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}};const v$="type.googleapis.com/google.protobuf.Int64Value",_$="type.googleapis.com/google.protobuf.UInt64Value";function HR(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function em(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>em(e));if(typeof n=="function"||typeof n=="object")return HR(n,e=>em(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Fu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case v$:case _$:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Fu(e)):typeof n=="function"||typeof n=="object"?HR(n,e=>Fu(e)):n}const tE="functions";const pC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ar extends zi{constructor(e,t,r){super(`${tE}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,ar.prototype)}}function w$(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function tm(n,e){let t=w$(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!pC[a])return new ar("internal","internal");t=pC[a],r=a}const u=s.message;typeof u=="string"&&(r=u),i=s.details,i!==void 0&&(i=Fu(i))}}catch{}return t==="ok"?null:new ar(t,r,i)}class E${constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const s_="us-central1",T$=/^data: (.*?)(?:\n|$)/;function S$(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new ar("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class I${constructor(e,t,r,i,s=s_,a=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new E$(e,t,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=s_}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function C$(n,e,t){const r=Uo(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(M_(n.emulatorOrigin+"/backends"),O_("Functions",!0))}function P$(n,e,t){const r=i=>A$(n,e,i,{});return r.stream=(i,s)=>R$(n,e,i,s),r}function qR(n){return n.emulatorOrigin&&Uo(n.emulatorOrigin)?"include":void 0}async function b$(n,e,t,r,i){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:qR(i)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function GR(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function A$(n,e,t,r){const i=n._url(e);return x$(n,i,t,r)}async function x$(n,e,t,r){t=em(t);const i={data:t},s=await GR(n,r),a=r.timeout||7e4,u=S$(a),c=await Promise.race([b$(e,i,s,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!c)throw new ar("cancelled","Firebase Functions instance was deleted.");const h=tm(c.status,c.json);if(h)throw h;if(!c.json)throw new ar("internal","Response is not valid JSON object.");let m=c.json.data;if(typeof m>"u"&&(m=c.json.result),typeof m>"u")throw new ar("internal","Response is missing data field.");return{data:Fu(m)}}function R$(n,e,t,r){const i=n._url(e);return D$(n,i,t,r||{})}async function D$(n,e,t,r){t=em(t);const i={data:t},s=await GR(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r?.signal,credentials:qR(n)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const I=new ar("cancelled","Request was cancelled.");return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}const E=tm(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let u,c;const h=new Promise((v,E)=>{u=v,c=E});r?.signal?.addEventListener("abort",()=>{const v=new ar("cancelled","Request was cancelled.");c(v)});const m=a.body.getReader(),g=k$(m,u,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:E,done:I}=await v.read();return{value:E,done:I}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:h}}function k$(n,e,t,r){const i=(a,u)=>{const c=a.match(T$);if(!c)return;const h=c[1];try{const m=JSON.parse(h);if("result"in m){e(Fu(m.result));return}if("message"in m){u.enqueue(Fu(m.message));return}if("error"in m){const g=tm(0,m);u.error(g),t(g);return}}catch(m){if(m instanceof ar){u.error(m),t(m);return}}},s=new TextDecoder;return new ReadableStream({start(a){let u="";return c();async function c(){if(r?.aborted){const h=new ar("cancelled","Request was cancelled");return a.error(h),t(h),Promise.resolve()}try{const{value:h,done:m}=await n.read();if(m){u.trim()&&i(u.trim(),a),a.close();return}if(r?.aborted){const v=new ar("cancelled","Request was cancelled");a.error(v),t(v),await n.cancel();return}u+=s.decode(h,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&i(v.trim(),a);return c()}catch(h){const m=h instanceof ar?h:tm(0,null);a.error(m),t(m)}}},cancel(){return n.cancel()}})}const mC="@firebase/functions",gC="0.13.1";const N$="auth-internal",V$="app-check-internal",M$="messaging-internal";function O$(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider(N$),a=t.getProvider(M$),u=t.getProvider(V$);return new I$(i,s,a,u,r)};$a(new xo(tE,e,"PUBLIC").setMultipleInstances(!0)),Vi(mC,gC,n),Vi(mC,gC,"esm2020")}function L$(n=U_(),e=s_){const r=mm(Rt(n),tE).getImmediate({identifier:e}),i=XP("functions");return i&&F$(r,...i),r}function F$(n,e,t){C$(Rt(n),e,t)}function U$(n,e,t){return P$(Rt(n),e)}O$();const j$=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=r,t.setPlatform=i,t},B$=n=>n.CapacitorPlatforms=j$(n),KR=B$(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});KR.addPlatform;KR.setPlatform;var Uu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Uu||(Uu={}));class Jy extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const $$=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},z$=n=>{var e,t,r,i,s;const a=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},c=u.Plugins=u.Plugins||{},h=n.CapacitorPlatforms,m=()=>a!==null?a.name:$$(n),g=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||m,v=()=>g()!=="web",E=((t=h?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||v,I=x=>{const S=j.get(x);return!!(S?.platforms.has(g())||L(x))},b=((r=h?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||I,P=x=>{var S;return(S=u.PluginHeaders)===null||S===void 0?void 0:S.find(k=>k.name===x)},L=((i=h?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||P,D=x=>n.console.error(x),A=(x,S,k)=>Promise.reject(`${k} does not have an implementation of "${S}".`),j=new Map,H=(x,S={})=>{const k=j.get(x);if(k)return console.warn(`Capacitor plugin "${x}" already registered. Cannot register plugins twice.`),k.proxy;const O=g(),M=L(x);let U;const V=async()=>(!U&&O in S?U=typeof S[O]=="function"?U=await S[O]():U=S[O]:a!==null&&!U&&"web"in S&&(U=typeof S.web=="function"?U=await S.web():U=S.web),U),ie=(ue,B)=>{var ee,we;if(M){const Te=M?.methods.find(Ee=>B===Ee.name);if(Te)return Te.rtype==="promise"?Ee=>u.nativePromise(x,B.toString(),Ee):(Ee,Me)=>u.nativeCallback(x,B.toString(),Ee,Me);if(ue)return(ee=ue[B])===null||ee===void 0?void 0:ee.bind(ue)}else{if(ue)return(we=ue[B])===null||we===void 0?void 0:we.bind(ue);throw new Jy(`"${x}" plugin is not implemented on ${O}`,Uu.Unimplemented)}},Ie=ue=>{let B;const ee=(...we)=>{const Te=V().then(Ee=>{const Me=ie(Ee,ue);if(Me){const tt=Me(...we);return B=tt?.remove,tt}else throw new Jy(`"${x}.${ue}()" is not implemented on ${O}`,Uu.Unimplemented)});return ue==="addListener"&&(Te.remove=async()=>B()),Te};return ee.toString=()=>`${ue.toString()}() { [capacitor code] }`,Object.defineProperty(ee,"name",{value:ue,writable:!1,configurable:!1}),ee},Ce=Ie("addListener"),je=Ie("removeListener"),se=(ue,B)=>{const ee=Ce({eventName:ue},B),we=async()=>{const Ee=await ee;je({eventName:ue,callbackId:Ee},B)},Te=new Promise(Ee=>ee.then(()=>Ee({remove:we})));return Te.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await we()},Te},_e=new Proxy({},{get(ue,B){switch(B){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?se:Ce;case"removeListener":return je;default:return Ie(B)}}});return c[x]=_e,j.set(x,{name:x,proxy:_e,platforms:new Set([...Object.keys(S),...M?[O]:[]])}),_e},Y=((s=h?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||H;return u.convertFileSrc||(u.convertFileSrc=x=>x),u.getPlatform=g,u.handleError=D,u.isNativePlatform=E,u.isPluginAvailable=b,u.pluginMethodNoop=A,u.registerPlugin=Y,u.Exception=Jy,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},W$=n=>n.Capacitor=z$(n),Mo=W$(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),QR=Mo.registerPlugin;Mo.Plugins;class YR{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Mo.Exception(e,Uu.Unimplemented)}unavailable(e="not available"){return new Mo.Exception(e,Uu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const yC=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),vC=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class H$ extends YR{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=vC(i).trim(),s=vC(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=yC(e.key),r=yC(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}QR("CapacitorCookies",{web:()=>new H$});const q$=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),G$=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=n[e[a]],i),{})},K$=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[s,a]=i;let u,c;return Array.isArray(a)?(c="",a.forEach(h=>{u=e?encodeURIComponent(h):h,c+=`${s}=${u}&`}),c.slice(0,-1)):(u=e?encodeURIComponent(a):a,c=`${s}=${u}`),`${r}&${c}`},"").substr(1):null,Q$=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=G$(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.data||{}))s.set(a,u);t.body=s.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,c)=>{s.append(c,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Y$ extends YR{async request(e){const t=Q$(e,e.webFetchExtra),r=K$(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let c,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),c=await q$(h);break;case"json":c=await s.json();break;default:c=await s.text()}const m={};return s.headers.forEach((g,v)=>{m[v]=g}),{data:c,headers:m,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}QR("CapacitorHttp",{web:()=>new Y$});const X$=n=>{if(!n)return null;const e=n.unit,t=Number(n.value);return Number.isFinite(t)?e==="fahrenheit"?(t-32)/1.8:t:null},fp=["BasalBodyTemperature"],J$=["BasalBodyTemperature","READ_BASAL_BODY_TEMPERATURE","android.permission.health.READ_BASAL_BODY_TEMPERATURE"],_C=n=>String(n||"").toLowerCase().replace(/^android\.permission\.health\./,"").replace(/^read_/,"").replace(/[^a-z0-9]/g,""),Z$=n=>{try{const e=new WeakSet;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r},2)}catch{try{return String(n)}catch{return"[Unstringifiable]"}}},e6=(n,e)=>{const t=e&&typeof e=="object"?Object.keys(e):[];console.warn(`${n} keys=${t.join(",")}
${Z$(e)}`)},nE=n=>typeof n=="string"?n:n?.availability??n?.value??n?.status,o_=n=>{if(n?.allPermissionsGranted===!0)return!0;const e=n?.permissionResults,t=n?.permissions?.read??n?.readPermissions??e?.read??(Array.isArray(e)?e:null)??n?.read,r=J$.map(_C),i=a=>r.includes(_C(a));if(n===!0||n?.hasAllPermissions===!0)return!0;const s=n?.grantedPermissions??n?.permissionsGranted;return Array.isArray(s)&&s.every(a=>typeof a=="string")?s.some(i):Array.isArray(t)&&t.every(a=>typeof a=="string")?t.some(i):Array.isArray(t)&&t.every(a=>typeof a=="boolean")?t.every(Boolean):Array.isArray(t)&&t.every(a=>a&&typeof a=="object")?t.some(a=>{const u=a.permission??a.name??a.type??a.recordType??a.value,c=a.granted??a.allowed??a.isGranted??a.status;return i(u)&&!!c}):t&&typeof t=="object"?Object.entries(t).some(([a,u])=>{const c=typeof u=="boolean"?u:!!(u?.granted??u?.allowed??u?.value??u?.status);return i(a)&&c}):(e6("[HealthConnect] Unexpected permission response shape",n),!1)};async function t6(){if(!Mo.isNativePlatform())return{isAvailable:!1,hasPermissions:!1,availability:"NotNative"};const{HealthConnect:n}=await $i(async()=>{const{HealthConnect:i}=await import("./index-B2Q404OL.js");return{HealthConnect:i}},[]),e=await n.checkAvailability(),t=nE(e);if(t!=="Available")return{isAvailable:!1,hasPermissions:!1,availability:t};const r=await n.checkHealthPermissions({read:fp,write:[]});return{isAvailable:!0,hasPermissions:o_(r),availability:t}}async function n6(){const{HealthConnect:n}=await $i(async()=>{const{HealthConnect:s}=await import("./index-B2Q404OL.js");return{HealthConnect:s}},[]),e=await n.checkAvailability(),t=nE(e);if(t!=="Available")throw new Error(`HEALTH_CONNECT_${t||"Unknown"}`);const r=await n.checkHealthPermissions({read:fp,write:[]});if(o_(r))return!0;await n.requestHealthPermissions({read:fp,write:[]});const i=await n.checkHealthPermissions({read:fp,write:[]});return o_(i)}async function r6({startDate:n}){if(!Mo.isNativePlatform())throw new Error("HEALTH_CONNECT_ONLY_IN_APP");const{HealthConnect:e}=await $i(async()=>{const{HealthConnect:m}=await import("./index-B2Q404OL.js");return{HealthConnect:m}},[]),t=await e.checkAvailability(),r=nE(t);if(r!=="Available")throw new Error(`HEALTH_CONNECT_${r||"Unknown"}`);if(!await n6())throw new Error("HEALTH_CONNECT_PERMISSION_DENIED");const s=ce(n);if(!n||Number.isNaN(s?.getTime?.()))throw new Error("HEALTH_CONNECT_INVALID_START_DATE");const a=Xe(s),u=new Date;return((await e.readRecords({type:"BasalBodyTemperature",timeRangeFilter:{type:"between",startTime:a,endTime:u},ascendingOrder:!0,pageSize:500}))?.records||[]).map(m=>{const g=X$(m.temperature);if(g==null)return null;const v=new Date(m.time);return{externalId:m?.metadata?.id||null,dataOrigin:m?.metadata?.dataOrigin||null,timestampMs:v.getTime(),timestamp:Ye(v,"yyyy-MM-dd'T'HH:mm:ssXXX"),localDate:Ye(v,"yyyy-MM-dd"),time:Ye(v,"HH:mm"),temperatureC:Number(g.toFixed(2))}}).filter(Boolean)}const XR=R.createContext(null),wa={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1,issues:{outOfRange:[],duplicates:[],hasIssues:!1,summary:{outOfRangeCount:0,duplicateDaysCount:0,duplicateEntriesCount:0}}},Zy=(n,e)=>{if(!e)return n;const t=Xe(ce(e));return n.filter(r=>ce(r.isoDate)<=t)},ev=(n,e)=>{if(!e)return n;const t=Xe(ce(e));return n.filter(r=>ce(r.isoDate)>=t)},Bf=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},i6=n=>{if(!n)return!1;const e=n.temperature,t=n.temperature_corrected,r=e==null?"":String(e).trim(),i=t==null?"":String(t).trim();return r!==""||i!==""},wC=n=>n?typeof n=="string"?Ye(Xe(ce(n)),"yyyy-MM-dd"):typeof n.toDate=="function"?Ye(Xe(n.toDate()),"yyyy-MM-dd"):Ye(Xe(new Date(n)),"yyyy-MM-dd"):null,tv=(n,e)=>{const t=wC(n),r=wC(e);return t&&r&&ce(r)<ce(t)?{startDate:r,endDate:t}:{startDate:t,endDate:r}},s6=({payload:n,entryId:e,isoDate:t,cycleStartDate:r,existingEntry:i})=>{const s={id:e,iso_date:t,timestamp:n.timestamp,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation??null,mucus_appearance:n.mucus_appearance??null,fertility_symbol:n.fertility_symbol??null,observations:n.observations??null,had_relations:n.had_relations??!1,ignored:n.ignored??!1,peak_marker:n.peak_marker??null,measurements:n.measurements??(Array.isArray(i?.measurements)?i.measurements:[])},a=r?hp([s],r):[];return a.length?{...i,...a[0],measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}:{...i,...s,isoDate:t,measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}},o6=n=>[...n].sort((e,t)=>{const r=e.timestamp?ce(e.timestamp):e.isoDate?ce(e.isoDate):0,i=t.timestamp?ce(t.timestamp):t.isoDate?ce(t.isoDate):0;return r>i?1:r<i?-1:0}),a6=({children:n})=>{const{user:e}=Bm(),{toast:t}=Hw(),[r,i]=R.useState(wa),[s,a]=R.useState([]),[u,c]=R.useState(!0),[h,m]=R.useState({open:!1,cycleId:null}),g=R.useRef(!1),v=R.useRef(null),E=R.useCallback(()=>{i(wa),a([]),c(!1),g.current=!1},[]),I=R.useCallback(async({silent:J=!1}={})=>{if(!e?.uid){const he=v.current;v.current=null,he&&y$(he).catch(pe=>console.error("Failed to clear cached cycle data on sign-out.",pe)),E();return}v.current=e.uid;let ne=!1;if(!g.current)try{const he=await fC(e.uid);he&&(i(he.currentCycle??wa),a(he.archivedCycles??[]),g.current=!0,ne=!0,J||c(!1))}catch(he){console.error("Failed to hydrate cycle data from cache.",he)}const de=!J&&!ne&&!g.current;if(de&&c(!0),typeof navigator<"u"&&navigator.onLine===!1&&(ne||g.current)){J||c(!1);return}try{const he=await B3(e.uid);let pe=wa;if(he){const{startDate:Ue,endDate:Ge}=tv(he.startDate,he.endDate),gt=hp(he.data,Ue),ot=ev(gt,Ue),Ot=Zy(ot,Ge);pe={...he,startDate:Ue,endDate:Ge,data:Ot,issues:eu({cycleStartIso:Ue,cycleEndIso:Ge,entries:he.data})}}const Ke=(await $3(e.uid,he?he.startDate:null)).map(Ue=>{const{startDate:Ge,endDate:gt}=tv(Ue.startDate,Ue.endDate),ot=hp(Ue.data||[],Ge),Ot=ev(ot,Ge),ur=Zy(Ot,gt);return{...Ue,startDate:Ge??Ye(Xe(new Date),"yyyy-MM-dd"),endDate:gt,needsCompletion:Ue.needsCompletion,data:ur,issues:eu({cycleStartIso:Ge,cycleEndIso:gt,entries:Ue.data||[]})}});i(pe),a(Ke),await g$(e.uid,{currentCycle:pe,archivedCycles:Ke}),g.current=!0}catch(he){if(console.error("Error in loadCycleData:",he),he.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!ne)try{const pe=await fC(e.uid);pe?(i(pe.currentCycle??wa),a(pe.archivedCycles??[]),g.current=!0):(i(wa),a([]),g.current=!1)}catch(pe){console.error("Failed to recover cycle data from cache after error.",pe),i(wa),a([]),g.current=!1}}finally{de&&c(!1)}},[e,E]);R.useEffect(()=>{if(!e?.uid){E();return}I().catch(J=>console.error("Initial cycle data load failed:",J))},[e?.uid,I,E]);const b=R.useCallback((J,ne,de,ve,{remove:he=!1}={})=>{const pe=Ae=>{if(!Ae||Ae.id!==J)return Ae;const Ke=Array.isArray(Ae.data)?Ae.data:[];if(he){const ot=Ke.filter(Ot=>Ot.id!==ne);return{...Ae,data:ot,issues:eu({cycleStartIso:Ae.startDate,cycleEndIso:Ae.endDate,entries:ot})}}const Ue=Ke.find(ot=>ot.id===ne)||null,Ge=s6({payload:de,entryId:ne,isoDate:ve,cycleStartDate:Ae.startDate,existingEntry:Ue}),gt=Ue?Ke.map(ot=>ot.id===ne?Ge:ot):o6([...Ke,Ge]);return{...Ae,data:gt,issues:eu({cycleStartIso:Ae.startDate,cycleEndIso:Ae.endDate,entries:gt})}};i(Ae=>pe(Ae)),a(Ae=>Ae.map(Ke=>pe(Ke)))},[]),P=R.useCallback((J,ne,de)=>{const ve=he=>{if(!he||he.id!==J)return he;const Ae=(Array.isArray(he.data)?he.data:[]).map(Ke=>Ke.id===ne?{...Ke,measurements:de,measurementsLoaded:!0}:Ke);return{...he,data:Ae}};i(he=>ve(he)),a(he=>he.map(pe=>ve(pe)))},[]),L=R.useCallback((J,ne)=>{const de=new Set(Array.isArray(ne)?ne.filter(Boolean):[]);if(!J||de.size===0)return;const ve=he=>{if(!he||he.id!==J)return he;const Ae=(Array.isArray(he.data)?he.data:[]).filter(Ke=>!de.has(Ke.id));return{...he,data:Ae,issues:eu({cycleStartIso:he.startDate,cycleEndIso:he.endDate,entries:Ae})}};i(he=>ve(he)),a(he=>he.map(pe=>ve(pe)))},[]),D=R.useCallback(async(J,ne,de=null)=>{const ve=de??r.id;if(!e?.uid||!ve)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");c(!0);try{const he=ve===r.id?r:s.find(ht=>ht.id===ve);let pe=ne;!pe&&he&&(pe=he.data.find(ht=>ht.isoDate===J.isoDate)),pe&&String(pe.id).startsWith("placeholder-")&&(pe=null);const Ae=he?.data?.find(ht=>ht?.peak_marker==="peak")||null;J.peak_marker==="peak"&&Ae&&Ae.id!==pe?.id&&await Qy(e.uid,ve,Ae.id,{peak_marker:null});const Ke=Array.isArray(J.measurements)?J.measurements:[],Ue=Ke.filter(i6),Ge=Ue.find(ht=>ht?.selected)||Ue[0]||null,gt=Ke.find(ht=>ht?.time&&String(ht.time).trim()!=="")||Ge,ot=(()=>{if(gt?.time&&String(gt.time).trim()!=="")return gt.time;if(pe?.timestamp)try{return Ye(ce(pe.timestamp),"HH:mm")}catch{return Ye(new Date,"HH:mm")}return Ye(new Date,"HH:mm")})(),Ot=w3(`${J.isoDate} ${ot}`,"yyyy-MM-dd HH:mm",new Date),ur=Bf(Ge?.temperature),An=Bf(Ge?.temperature_corrected),qo=!!Ge?.use_corrected&&An!==null,qi=qo?An:ur,jr=Object.prototype.hasOwnProperty.call(J,"peak_marker"),cl=Ue.some(ht=>{if(!ht)return!1;const dl=Bf(ht.temperature),Ki=Bf(ht.temperature_corrected);return dl!==null||Ki!==null}),Pr=ht=>ht==null?"":String(ht).trim(),ks=Pr(J.mucusSensation??J.mucus_sensation??""),Go=Pr(J.mucusAppearance??J.mucus_appearance??""),cr=Pr(J.observations??""),Br=J.fertility_symbol??J.fertilitySymbol??null,ai=Br!=null&&Br!==""&&Br!=="none",Gi=!!(J.had_relations??J.hadRelations??!1),br=J.peak_marker==="peak",Ar=!cl&&ks===""&&Go===""&&!ai&&cr===""&&!Gi&&!br,$t=!!pe?.measurementsLoaded&&Array.isArray(pe?.measurements)&&pe.measurements.length>=2,Ko=Ue.length>=2,li=$t&&Ue.length<2,ui=Array.isArray(J.measurements)?Ko?Ue:li?[]:void 0:void 0,ci={cycle_id:ve,user_id:e.uid,timestamp:Ye(Ot,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:ui,mucus_sensation:J.mucusSensation||null,mucus_appearance:J.mucusAppearance||null,fertility_symbol:J.fertility_symbol==="none"?null:J.fertility_symbol,observations:J.observations||null,had_relations:Gi,ignored:pe?J.ignored??pe.ignored:J.ignored||!1,peak_marker:jr?J.peak_marker??null:pe?.peak_marker??null,temperature_raw:ur,temperature_corrected:An,use_corrected:qo,temperature_chart:qi};let Ns=pe?.id??null;if(pe){const ht=jr&&pe?.peak_marker==="peak"&&!br;Ar&&ht?(await i_(e.uid,ve,pe.id),b(ve,pe.id,ci,J.isoDate,{remove:!0})):(await Qy(e.uid,ve,pe.id,ci),b(ve,pe.id,ci,J.isoDate))}else{if(Ar)return;Ns=(await J3(e.uid,ve,J.isoDate,ci))?.id??null,Ns&&b(ve,Ns,ci,J.isoDate)}I({silent:!0}).catch(ht=>console.error("Background cycle data refresh failed after save:",ht))}catch(he){throw console.error("Error adding/updating data point:",he),he}finally{c(!1)}},[e,r,s,I,b]),A=R.useCallback(async(J,ne)=>{if(!e?.uid||!J||!ne)return[];const de=await Z3(e.uid,J,ne);return P(J,ne,de),de},[e,P]),j=R.useCallback(async(J,ne=null)=>{const de=ne??r.id;if(!(!e?.uid||!de)){c(!0);try{await i_(e.uid,de,J),await I({silent:!0})}catch(ve){throw console.error("Error deleting record:",ve),ve}finally{c(!1)}}},[e,r.id,I]),H=R.useCallback(async(J,ne)=>{if(!e?.uid)return;const de=J===r.id,ve=de?r:s.find(Ke=>Ke.id===J);if(!ve)throw new Error("Cycle not found for toggling ignore state.");const he=ve.data?.find(Ke=>Ke.id===ne);if(!he)throw new Error("Record not found for toggling ignore state.");const pe=!he.ignored,Ae=Ke=>{de?i(Ue=>Ue.id!==J?Ue:{...Ue,data:Ue.data.map(Ge=>Ge.id===ne?{...Ge,ignored:Ke}:Ge)}):a(Ue=>Ue.map(Ge=>Ge.id!==J?Ge:{...Ge,data:(Ge.data||[]).map(gt=>gt.id===ne?{...gt,ignored:Ke}:gt)}))};try{Ae(pe),await Qy(e.uid,J,ne,{ignored:pe}),I({silent:!0}).catch(Ke=>console.error("Background cycle data refresh failed after toggling ignore state:",Ke))}catch(Ke){throw console.error("Error toggling ignore state:",Ke),Ae(!pe),Ke}},[e,r,s,I]),Y=R.useCallback(async(J,ne)=>{if(!e?.uid||!J)return;const de=r,ve=s,he=pe=>!pe||pe.id!==J||pe.ignoredForAutoCalculations===ne?pe:{...pe,ignoredForAutoCalculations:ne};i(pe=>he(pe)),a(pe=>pe.map(Ae=>he(Ae)));try{await i$(e.uid,J,ne),I({silent:!0}).catch(pe=>console.error("Background cycle data refresh failed after updating ignore configuration:",pe))}catch(pe){throw console.error("Error updating cycle ignore configuration:",pe),i(de),a(ve),t({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),pe}},[e,r,s,I,t]),x=R.useCallback(async J=>{if(e?.uid){c(!0);try{const ne=Xe(J?ce(J):new Date);if(r.id&&J){const he=Xe(ce(r.startDate));if(ne<=he){t({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),c(!1);return}}const de=Ye(ne,"yyyy-MM-dd"),ve=await Y3(e.uid,r.id,de);i({id:ve.id,startDate:ve.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await I({silent:!0})}catch(ne){console.error("Error starting new cycle:",ne);const de=he=>{try{return Ye(ce(he),"dd/MM/yyyy")}catch{return he}},ve=(()=>{if(ne?.code==="cycle-overlap"){const he=ne?.conflictCycle;if(!he)return"Las fechas coinciden con otro ciclo.";const pe=he.startDate?de(he.startDate):"sin fecha de inicio",Ae=he.endDate?de(he.endDate):"en curso";return`Las fechas coinciden con el ciclo del ${pe} al ${Ae}.`}return ne?.code==="split-date-conflict"?`No se pudo dividir el ciclo porque el ciclo nuevo ya tiene ms de un registro en ${ne?.conflictDate?de(ne.conflictDate):"esa fecha"}. Esto suele venir de datos duplicados (por ejemplo, creados desde otra sesin o por un estado inconsistente).`:ne?.code==="split-invalid-entry"?"No se pudo dividir el ciclo porque hay registros con fecha invlida en el ciclo anterior.":ne?.code==="split-invalid-date"?"La fecha elegida para iniciar el ciclo no es vlida.":"No se pudo iniciar el nuevo ciclo."})();throw t({title:"Error",description:ve,variant:"destructive"}),ne}finally{c(!1)}}},[e,r,I,t]),S=R.useCallback(J=>{if(!J)return"Las fechas coinciden con otro ciclo.";const{startDate:ne,endDate:de}=J,ve=Ae=>{if(!Ae)return null;try{return Ye(ce(Ae),"dd/MM/yyyy")}catch(Ke){return console.error("Failed to format overlap date",Ke),Ae}},he=ve(ne)??"sin fecha de inicio",pe=de?ve(de):"en curso";return`Las fechas coinciden con el ciclo del ${he} al ${pe}.`},[]),k=R.useCallback((J,ne)=>{const de=J?.conflictCycle??J?.details?.conflictCycle;return J?.code==="cycle-overlap"?S(de):typeof J?.message=="string"&&J.message.trim()?J.message:ne},[S]),O=R.useCallback(async(J,ne)=>e?.uid?K3({userId:e.uid,proposedStartIso:J,proposedEndIso:ne}):{overlaps:[],plan:[],summary:{trimStartCount:0,trimEndCount:0,deleteCount:0,splitCount:0,estimateMovedEntries:0}},[e]),M=R.useCallback(async(J,ne)=>{if(!e?.uid)return null;c(!0);try{const de=await Q3({userId:e.uid,startIso:J,endIso:ne});return await I({silent:!0}),de}catch(de){console.error("Error inserting cycle range:",de);const ve=jf(de);throw t({title:ve?.title||"Error",description:ve?.message||"No se pudo insertar el ciclo.",variant:"destructive"}),de}finally{c(!1)}},[e,I,t]),U=R.useCallback(async(J,ne)=>{if(e?.uid){if(!ne){t({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}c(!0);try{const de=await W3(e.uid,J);try{await Yy(de.id,e.uid,void 0,ne)}catch(ve){try{await bo(e.uid,de.id)}catch(he){console.error("Failed to clean up cycle after overlap error:",he)}throw ve}await I({silent:!0})}catch(de){console.error("Error adding archived cycle:",de);const ve=k(de,"No se pudo crear el ciclo.");throw t({title:"Error",description:ve,variant:"destructive"}),de}finally{c(!1)}}},[e,I,t,k]),V=R.useCallback(async J=>{if(e?.uid){c(!0);try{await bo(e.uid,J),await I({silent:!0})}catch(ne){throw console.error("Error deleting cycle:",ne),t({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),ne}finally{c(!1)}}},[e,I,t]),ie=R.useCallback(async(J,ne)=>!e?.uid||!J||!ne?null:WR({userId:e.uid,cycleId:J,strategy:ne}),[e]),Ie=R.useCallback(async(J,ne)=>{if(!e?.uid||!J||!ne)return null;c(!0);try{const de=await u$({userId:e.uid,cycleId:J,strategy:ne});return await I({silent:!0}),de}catch(de){console.error("Error deleting archived cycle with strategy:",de);const ve=jf(de);throw t({title:ve?.title||"Error",description:ve?.message||"No se pudo eliminar/fusionar el ciclo.",variant:"destructive"}),de}finally{c(!1)}},[e,I,t]),Ce=R.useCallback(async J=>{if(!(!e?.uid||!J)){c(!0);try{await c$(e.uid,J),await I({silent:!0})}catch(ne){console.error("Error undoing current cycle:",ne);const de=(()=>{switch(ne.code){case"no-previous-cycle":return"No hay un ciclo previo compatible para deshacer.";case"undo-not-current":return"Solo se puede deshacer el ciclo actual.";case"undo-invalid-entry":return"Hay registros con fecha invlida en el ciclo actual.";case"undo-date-conflict":if(typeof ne?.conflictDate=="string")try{const ve=ce(ne.conflictDate);if(ct(ve))return`El da ${Ye(ve,"dd/MM")} tiene un registro en el ciclo anterior.`}catch{}return"El ciclo anterior ya tiene registros en una de las fechas.";default:return"No se pudo deshacer el ciclo."}})();throw t({title:"Error",description:de,variant:"destructive"}),ne}finally{c(!1)}}},[e,I,t]),je=R.useCallback(async(J,ne,de)=>{if(!e?.uid)return null;try{return(await Yy(J,e.uid,ne,de,!0)).overlap}catch(ve){return console.error("Error checking cycle overlap:",ve),null}},[e]),se=R.useCallback(async(J,ne,de)=>{if(!e?.uid||!J)return null;const ve=r?.id===J?r:s.find(Ge=>Ge.id===J),he=ve?.startDate??null,pe=ve?.endDate??null,Ae=ne!==void 0&&ne!==he,Ke=de!==void 0&&de!==pe,Ue={affectedCycles:[],adjustedCyclesPreview:[],impactSummary:{trimmedCycles:0,deletedCycles:0,movedEntries:0}};if(Ae&&ne){const Ge=await l$({userId:e.uid,cycleId:J,newStartDate:ne});Ue.affectedCycles.push(...Ge?.affectedCycles||[]),Ue.adjustedCyclesPreview.push(...Ge?.adjustedCyclesPreview||[]),Ue.impactSummary.trimmedCycles+=Ge?.impactSummary?.trimmedCycles||0,Ue.impactSummary.deletedCycles+=Ge?.impactSummary?.deletedCycles||0,Ue.impactSummary.movedEntries+=Ge?.impactSummary?.movedEntries||0}if(Ke&&de){const Ge=Ae?ne:he,gt=await o$({userId:e.uid,cycleId:J,newEndDate:de,currentCycleStartDate:Ge});Ue.affectedCycles.push(...gt?.affectedCycles||[]),Ue.adjustedCyclesPreview.push(...gt?.adjustedCyclesPreview||[]),Ue.impactSummary.trimmedCycles+=gt?.impactSummary?.trimmedCycles||0,Ue.impactSummary.deletedCycles+=gt?.impactSummary?.deletedCycles||0,Ue.impactSummary.movedEntries+=gt?.impactSummary?.movedEntries||0}return Xy(Ue)?Ue:null},[e,r,s]),_e=R.useCallback(async(J,ne)=>{if(!e?.uid)return null;const de=await X3({userId:e.uid,startDate:J,previousCycleId:ne});return Xy(de)?de:null},[e]),ue=R.useCallback(async J=>{if(!e?.uid||!J)return null;const ne=await d$({userId:e.uid,currentCycleId:J});return Xy(ne)?ne:null},[e]),B=R.useCallback(async(J,ne,de)=>{if(!e?.uid)return;const ve=r?.id===J?r:s.find(Ue=>Ue.id===J),he=ve?.startDate??null,pe=ve?.endDate??null,Ae=ne!==void 0&&ne!==he,Ke=de!==void 0&&de!==pe;c(!0);try{const Ue=[];if(Ae&&ne){const ot=await a$(e.uid,J,ne);ot&&Ue.push(ot)}if(Ke&&de){const ot=Ae?ne:he,Ot=await s$(e.uid,J,de,ot);Ot&&Ue.push(Ot)}(Ae||Ke)&&await Yy(J,e.uid,Ae?ne:void 0,Ke?de:void 0),await I({silent:!0});const Ge=Ue.reduce((ot,Ot)=>({movedEntriesCount:ot.movedEntriesCount+(Ot?.movedEntriesCount||0),changedCycles:[...ot.changedCycles,...Ot?.changedCycles||[]]}),{movedEntriesCount:0,changedCycles:[]}),gt=ot=>{if(!ot)return"";try{const Ot=ce(ot);return ct(Ot)?Ye(Ot,"dd/MM/yyyy"):ot}catch{return ot}};if(Ge.changedCycles.length||Ge.movedEntriesCount){const ot=Ge.changedCycles.map(An=>`${gt(An.oldStart)} - ${gt(An.oldEnd)}  ${gt(An.newStart)} - ${gt(An.newEnd)}`).join("; "),Ot=`Se movieron ${Ge.movedEntriesCount} registros.`,ur=Ge.changedCycles.length?`Ciclos ajustados: ${ot}. ${Ot}`:Ot;t({title:"Fechas guardadas correctamente",description:ur,duration:9e3})}return Ge}catch(Ue){console.error("Error updating cycle dates:",Ue);const Ge=jf(Ue),gt=Ge?.message||k(Ue,"No se pudieron actualizar las fechas.");throw t({title:Ge?.title||"Error",description:gt,variant:"destructive"}),Ue}finally{c(!1)}},[e,r,s,I,t,k]),ee=R.useCallback((J,ne)=>B(J,ne,void 0),[B]),we=R.useCallback((J,ne,de)=>B(J,de,ne),[B]),Te=R.useCallback(async J=>{if(!e?.uid)return null;c(!0);try{const ne=await z3(e.uid,J);if(!ne)return null;const{startDate:de,endDate:ve}=tv(ne.startDate,ne.endDate),he=hp(ne.data||[],de),pe=ev(he,de),Ae=Zy(pe,ve);return{...ne,startDate:de??Ye(Xe(new Date),"yyyy-MM-dd"),endDate:ve,data:Ae,issues:eu({cycleStartIso:de,cycleEndIso:ve,entries:ne.data||[]})}}catch(ne){return console.error("Error fetching cycle by ID:",ne),null}finally{c(!1)}},[e]),Ee=R.useCallback(({silent:J=!0}={})=>I({silent:J}),[I]),Me=R.useCallback(async()=>{if(!e?.uid)throw new Error("NO_USER");if(!r?.id||!r?.startDate)throw new Error("NO_CURRENT_CYCLE");c(!0);try{const J=await r6({startDate:r.startDate});if(!J.length){t({title:"Sin registros",description:"No se encontraron temperaturas en Health Connect."});return}const ne=L$(),he=(await U$(ne,"syncBasalBodyTemperature")({cycleId:r.id,items:J}))?.data;return t({title:"Sincronizacin hecha",description:`Nuevos: ${he?.createdMeasurements??0}  Ya estaban: ${he?.skippedMeasurements??0}  Rechazados: ${he?.rejected??0}`}),await I({silent:!0}),he}catch(J){console.error(J);const de=(ve=>typeof ve=="string"?ve:ve?.message??JSON.stringify(ve))(J);return de.includes("HEALTH_CONNECT_NotInstalled")||de.includes("HEALTH_CONNECT_NotSupported")?(t({title:"Health Connect no disponible",description:"Instala Health Connect para poder sincronizar tus registros.",variant:"destructive"}),null):de.includes("HEALTH_CONNECT_ONLY_IN_APP")?(t({title:"Solo en la app Android",description:"La sincronizacin est disponible nicamente en la app Android.",variant:"destructive"}),null):de.includes("HEALTH_CONNECT_PERMISSION_DENIED")?(t({title:"Permisos requeridos",description:"Debes conceder permisos de Health Connect para sincronizar.",variant:"destructive"}),null):de.includes("HEALTH_CONNECT_INVALID_START_DATE")?(t({title:"Fecha de inicio invlida",description:"No se pudo leer la fecha de inicio del ciclo actual.",variant:"destructive"}),null):(t({title:"Error al sincronizar",description:de,variant:"destructive"}),null)}finally{c(!1)}},[e,r,I,t]),tt=R.useCallback((J=null)=>{m({open:!0,cycleId:J??r?.id??null})},[r?.id]),rt=R.useCallback(()=>{m(J=>({...J,open:!1}))},[]),at=R.useCallback(async({cycleId:J,isoDate:ne,winnerEntryId:de,loserEntryIds:ve,moveMeasurements:he})=>{e?.uid&&(await n$({userId:e.uid,cycleId:J,isoDate:ne,winnerEntryId:de,loserEntryIds:ve,moveMeasurements:he}),L(J,ve),he&&await I({silent:!0}))},[e,L,I]),kt=R.useCallback(async({fromCycleId:J,toCycleId:ne,entryId:de,isoDate:ve})=>{e?.uid&&(await r$({userId:e.uid,fromCycleId:J,toCycleId:ne,entryId:de,isoDate:ve,strategy:"upsert-by-iso"}),L(J,[de]),await I({silent:!0}))},[e,I,L]),gn=R.useCallback(async({cycleId:J,entryId:ne})=>{e?.uid&&(await t$(e.uid,J,ne),L(J,[ne]))},[e,L]),Ds=R.useCallback(J=>jf(J),[]),oi={currentCycle:r,archivedCycles:s,syncHealthConnectTemperatures:Me,addOrUpdateDataPoint:D,deleteRecord:j,startNewCycle:x,updateCycleDates:B,forceUpdateCycleStart:ee,forceShiftNextCycleStart:we,checkCycleOverlap:je,previewUpdateCycleDates:se,isLoading:u,getCycleById:Te,refreshData:Ee,toggleIgnoreRecord:H,setCycleIgnoreForAutoCalculations:Y,addArchivedCycle:U,previewInsertCycleRange:O,insertCycleRange:M,deleteCycle:V,previewDeleteCycle:ie,deleteArchivedCycleWithStrategy:Ie,getMeasurementsForEntry:A,undoCurrentCycle:Ce,previewStartNewCycle:_e,previewUndoCurrentCycle:ue,repairDialogState:h,openDataRepairDialog:tt,closeDataRepairDialog:rt,resolveDuplicateIssue:at,moveOutOfRangeEntry:kt,deleteIssueEntry:gn,getPublicError:Ds};return G.jsx(XR.Provider,{value:oi,children:n})},Nq=()=>{const n=R.useContext(XR);if(!n)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return n},JR=R.createContext(null),l6=({children:n})=>{const[e,t]=R.useState(!1),[r,i]=R.useState(!1),[s,a]=R.useState(!1),u=Mo.isNativePlatform()&&Mo.getPlatform()==="android",c=R.useCallback(async()=>{if(!u)return t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"NotAndroid"};a(!0);try{const h=await t6();return t(!!h.isAvailable),i(!!h.hasPermissions),h}catch(h){return console.error("Error al comprobar Health Connect",h),t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"Error"}}finally{a(!1)}},[u]);return R.useEffect(()=>{c()},[c]),G.jsx(JR.Provider,{value:{isAvailable:e,hasPermissions:r,refreshPermissions:c,isChecking:s,isAndroidApp:u},children:n})},Vq=()=>{const n=R.useContext(JR);if(!n)throw new Error("useHealthConnect must be used within a HealthConnectProvider");return n},a_=({children:n})=>G.jsxs("div",{className:"relative h-app overflow-hidden app-background",children:[G.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[G.jsx("div",{className:"wave wave--left-1"}),G.jsx("div",{className:"wave wave--left-2"}),G.jsx("div",{className:"wave wave--left-3"}),G.jsx("div",{className:"wave wave--right-1"}),G.jsx("div",{className:"wave wave--right-2"}),G.jsx("div",{className:"wave wave--right-3"})]}),G.jsx("div",{className:"pointer-events-none absolute inset-0",children:G.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),G.jsx("div",{className:"relative z-10 flex h-app flex-col",children:n})]});class u6 extends pn.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}reset=()=>{this.setState({error:null})};componentDidCatch(e,t){console.error("RouteErrorBoundary caught an error",e,t)}render(){const{error:e}=this.state,{FallbackComponent:t,children:r}=this.props;return e?G.jsx(t,{error:e,resetErrorBoundary:this.reset}):r}}var c6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d6=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tc=(n,e)=>{const t=R.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...c},h)=>R.createElement("svg",{ref:h,...c6,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${d6(n)}`,...c},[...e.map(([m,g])=>R.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},h6=tc("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),f6=tc("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),p6=tc("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),m6=tc("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),g6=tc("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),y6=tc("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v6=()=>{const n=Fo(),e=[{to:"/records",label:"Mis registros",icon:p6},{to:"/chart",label:"Grfica",icon:f6},{to:"/",label:"Ciclo actual",icon:m6},{to:"/archived-cycles",label:"Mis ciclos",icon:h6,isActive:t=>t.startsWith("/archived-cycles")||t.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:g6}];return G.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:G.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:t,label:r,icon:i,isActive:s})=>G.jsx("li",{className:"flex",children:G.jsx(AV,{to:t,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:a})=>{const c=(s?s(n.pathname):!1)||a;return G.jsxs(G.Fragment,{children:[G.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${c?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),G.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:G.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${c?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),G.jsx("span",{className:"sr-only",children:r})]})}})},t))})})},Pa=({children:n,hideBottomNav:e=!1})=>{const t=e?"relative z-10 flex-1 w-full overflow-y-auto":"relative z-10 flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return G.jsxs("div",{className:"relative flex min-h-app flex-col overflow-hidden",children:[G.jsx("main",{className:t,children:n}),!e&&G.jsx(v6,{})]})};function ZR(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=ZR(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function e1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=ZR(n))&&(r&&(r+=" "),r+=e);return r}function _6(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=t1(e))&&(r&&(r+=" "),r+=t);return r}function t1(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=t1(n[r]))&&(t&&(t+=" "),t+=e);return t}var rE="-";function w6(n){var e=T6(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(u){var c=u.split(rE);return c[0]===""&&c.length!==1&&c.shift(),n1(c,e)||E6(u)}function a(u,c){var h=t[u]||[];return c&&i[u]?[].concat(h,i[u]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function n1(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?n1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(rE);return e.validators.find(function(a){var u=a.validator;return u(s)})?.classGroupId}}var EC=/^\[(.+)\]$/;function E6(n){if(EC.test(n)){var e=EC.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function T6(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=I6(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],u=s[1];l_(u,r,a,e)}),r}function l_(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:TC(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(S6(i)){l_(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var u=a[0],c=a[1];l_(c,TC(e,u),t,r)})})}function TC(n,e){var t=n;return e.split(rE).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function S6(n){return n.isThemeGetter}function I6(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var c=u[0],h=u[1];return[e+c,h]})):a});return[r,s]}):n}function C6(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return i(a,u),u},set:function(a,u){t.has(a)?t.set(a,u):i(a,u)}}}var r1="!";function P6(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var u=[],c=0,h=0,m,g=0;g<a.length;g++){var v=a[g];if(c===0){if(v===r&&(t||a.slice(g,g+i)===e)){u.push(a.slice(h,g)),h=g+i;continue}if(v==="/"){m=g;continue}}v==="["?c++:v==="]"&&c--}var E=u.length===0?a:a.substring(h),I=E.startsWith(r1),b=I?E.substring(1):E,P=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:I,baseClassName:b,maybePostfixModifierPosition:P}}}function b6(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function A6(n){return{cache:C6(n.cacheSize),splitModifiers:P6(n),...w6(n)}}var x6=/\s+/;function R6(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(x6).map(function(a){var u=t(a),c=u.modifiers,h=u.hasImportantModifier,m=u.baseClassName,g=u.maybePostfixModifierPosition,v=r(g?m.substring(0,g):m),E=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(m),!v)return{isTailwindClass:!1,originalClassName:a};E=!1}var I=b6(c).join(":"),b=h?I+r1:I;return{isTailwindClass:!0,modifierId:b,classGroupId:v,originalClassName:a,hasPostfixModifier:E}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,c=a.classGroupId,h=a.hasPostfixModifier,m=u+c;return s.has(m)?!1:(s.add(m),i(c,h).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function D6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=u;function u(h){var m=e[0],g=e.slice(1),v=g.reduce(function(E,I){return I(E)},m());return r=A6(v),i=r.cache.get,s=r.cache.set,a=c,c(h)}function c(h){var m=i(h);if(m)return m;var g=R6(h,r);return s(h,g),g}return function(){return a(_6.apply(null,arguments))}}function jt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var i1=/^\[(?:([a-z-]+):)?(.+)\]$/i,k6=/^\d+\/\d+$/,N6=new Set(["px","full","screen"]),V6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,O6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Yr(n){return Va(n)||N6.has(n)||k6.test(n)||u_(n)}function u_(n){return ol(n,"length",$6)}function L6(n){return ol(n,"size",s1)}function F6(n){return ol(n,"position",s1)}function U6(n){return ol(n,"url",z6)}function $f(n){return ol(n,"number",Va)}function Va(n){return!Number.isNaN(Number(n))}function j6(n){return n.endsWith("%")&&Va(n.slice(0,-1))}function Jc(n){return SC(n)||ol(n,"number",SC)}function lt(n){return i1.test(n)}function Zc(){return!0}function ao(n){return V6.test(n)}function B6(n){return ol(n,"",W6)}function ol(n,e,t){var r=i1.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function $6(n){return M6.test(n)}function s1(){return!1}function z6(n){return n.startsWith("url(")}function SC(n){return Number.isInteger(Number(n))}function W6(n){return O6.test(n)}function H6(){var n=jt("colors"),e=jt("spacing"),t=jt("blur"),r=jt("brightness"),i=jt("borderColor"),s=jt("borderRadius"),a=jt("borderSpacing"),u=jt("borderWidth"),c=jt("contrast"),h=jt("grayscale"),m=jt("hueRotate"),g=jt("invert"),v=jt("gap"),E=jt("gradientColorStops"),I=jt("gradientColorStopPositions"),b=jt("inset"),P=jt("margin"),L=jt("opacity"),D=jt("padding"),A=jt("saturate"),j=jt("scale"),H=jt("sepia"),Y=jt("skew"),x=jt("space"),S=jt("translate"),k=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},M=function(){return["auto",lt,e]},U=function(){return[lt,e]},V=function(){return["",Yr]},ie=function(){return["auto",Va,lt]},Ie=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Ce=function(){return["solid","dashed","dotted","double","none"]},je=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},se=function(){return["start","end","center","between","around","evenly","stretch"]},_e=function(){return["","0",lt]},ue=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},B=function(){return[Va,$f]},ee=function(){return[Va,lt]};return{cacheSize:500,theme:{colors:[Zc],spacing:[Yr],blur:["none","",ao,lt],brightness:B(),borderColor:[n],borderRadius:["none","","full",ao,lt],borderSpacing:U(),borderWidth:V(),contrast:B(),grayscale:_e(),hueRotate:ee(),invert:_e(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[j6,u_],inset:M(),margin:M(),opacity:B(),padding:U(),saturate:B(),scale:B(),sepia:_e(),skew:ee(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",lt]}],container:["container"],columns:[{columns:[ao]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Ie(),[lt])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jc]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",lt]}],grow:[{grow:_e()}],shrink:[{shrink:_e()}],order:[{order:["first","last","none",Jc]}],"grid-cols":[{"grid-cols":[Zc]}],"col-start-end":[{col:["auto",{span:["full",Jc]},lt]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Zc]}],"row-start-end":[{row:["auto",{span:[Jc]},lt]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",lt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(se())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(se(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(se(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[D]}],px:[{px:[D]}],py:[{py:[D]}],ps:[{ps:[D]}],pe:[{pe:[D]}],pt:[{pt:[D]}],pr:[{pr:[D]}],pb:[{pb:[D]}],pl:[{pl:[D]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",lt,e]}],"min-w":[{"min-w":["min","max","fit",lt,Yr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ao]},ao,lt]}],h:[{h:[lt,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",lt,Yr]}],"max-h":[{"max-h":[lt,e,"min","max","fit"]}],"font-size":[{text:["base",ao,u_]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$f]}],"font-family":[{font:[Zc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",lt]}],"line-clamp":[{"line-clamp":["none",Va,$f]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",lt,Yr]}],"list-image":[{"list-image":["none",lt]}],"list-style-type":[{list:["none","disc","decimal",lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[L]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[L]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Ce(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Yr]}],"underline-offset":[{"underline-offset":["auto",lt,Yr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[L]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Ie(),[F6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",L6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},U6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[L]}],"border-style":[{border:[].concat(Ce(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[L]}],"divide-style":[{divide:Ce()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(Ce())}],"outline-offset":[{"outline-offset":[lt,Yr]}],"outline-w":[{outline:[Yr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[L]}],"ring-offset-w":[{"ring-offset":[Yr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ao,B6]}],"shadow-color":[{shadow:[Zc]}],opacity:[{opacity:[L]}],"mix-blend":[{"mix-blend":je()}],"bg-blend":[{"bg-blend":je()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ao,lt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[A]}],sepia:[{sepia:[H]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[L]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",lt]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",lt]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Jc,lt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[Y]}],"skew-y":[{"skew-y":[Y]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",lt]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Yr,$f]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var q6=D6(H6);function al(...n){return q6(e1(n))}function IC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Wm(...n){return e=>{let t=!1;const r=n.map(i=>{const s=IC(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():IC(n[i],null)}}}}function nl(...n){return R.useCallback(Wm(...n),n)}var G6=Symbol.for("react.lazy"),nm=x_[" use ".trim().toString()];function K6(n){return typeof n=="object"&&n!==null&&"then"in n}function o1(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===G6&&"_payload"in n&&K6(n._payload)}function Q6(n){const e=X6(n),t=R.forwardRef((r,i)=>{let{children:s,...a}=r;o1(s)&&typeof nm=="function"&&(s=nm(s._payload));const u=R.Children.toArray(s),c=u.find(Z6);if(c){const h=c.props.children,m=u.map(g=>g===c?R.Children.count(h)>1?R.Children.only(null):R.isValidElement(h)?h.props.children:null:g);return G.jsx(e,{...a,ref:i,children:R.isValidElement(h)?R.cloneElement(h,void 0,m):null})}return G.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var Y6=Q6("Slot");function X6(n){const e=R.forwardRef((t,r)=>{let{children:i,...s}=t;if(o1(i)&&typeof nm=="function"&&(i=nm(i._payload)),R.isValidElement(i)){const a=t5(i),u=e5(s,i.props);return i.type!==R.Fragment&&(u.ref=r?Wm(r,a):a),R.cloneElement(i,u)}return R.Children.count(i)>1?R.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var J6=Symbol("radix.slottable");function Z6(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===J6}function e5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const c=s(...u);return i(...u),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function t5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const CC=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,PC=e1,a1=(n,e)=>t=>{var r;if(e?.variants==null)return PC(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const m=t?.[h],g=s?.[h];if(m===null)return null;const v=CC(m)||CC(g);return i[h][v]}),u=t&&Object.entries(t).reduce((h,m)=>{let[g,v]=m;return v===void 0||(h[g]=v),h},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:g,className:v,...E}=m;return Object.entries(E).every(I=>{let[b,P]=I;return Array.isArray(P)?P.includes({...s,...u}[b]):{...s,...u}[b]===P})?[...h,g,v]:h},[]);return PC(n,a,c,t?.class,t?.className)},n5=a1("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),vu=pn.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?Y6:"button";return G.jsx(a,{className:al(n5({variant:e,size:t,className:n})),ref:s,...i})});vu.displayName="Button";const r5=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i,l1=({error:n,resetErrorBoundary:e})=>{const t=V_(),{user:r}=Bm(),i=typeof navigator<"u"&&navigator.onLine===!1,s=n?.message?n.message:String(n),a=r5.test(s),u=i&&a?"Pantalla no disponible sin conexin":"No se pudo cargar la pantalla",c=i&&a?"Esta pantalla no est disponible sin conexin porque no se haba cargado antes.":"Ocurri un error al cargar esta pantalla. Puedes volver atrs, ir al inicio o reintentar.",h=()=>{e(),t(-1)},m=()=>{e(),t("/")},g=G.jsx("div",{className:"flex min-h-app flex-col items-center justify-center px-6 py-10 text-center",children:G.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white/85 p-6 shadow-lg backdrop-blur-md",children:[G.jsx("h1",{className:"text-2xl font-semibold text-fertiliapp-fuerte",children:u}),G.jsx("p",{className:"text-sm text-gray-600",children:c}),G.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[G.jsx(vu,{type:"button",onClick:h,children:"Volver"}),G.jsx(vu,{type:"button",variant:"secondary",onClick:m,children:"Ir a inicio"}),G.jsx(vu,{type:"button",variant:"outline",onClick:()=>window.location.reload(),children:"Reintentar"})]}),!i&&G.jsxs("details",{className:"text-left text-xs text-gray-500",children:[G.jsx("summary",{className:"cursor-pointer font-medium text-gray-600",children:"Detalles tcnicos"}),G.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words rounded-2xl bg-gray-100 p-3 text-[0.7rem] text-gray-600",children:s})]})]})});return r?G.jsx(Pa,{children:g}):G.jsx(a_,{children:g})},bC=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i;function i5({children:n}){const[e,t]=R.useState(null);return R.useEffect(()=>{const r=s=>{const a=s?.reason?.message??String(s?.reason);bC.test(a)&&(s?.preventDefault?.(),t(s?.reason instanceof Error?s.reason:new Error(a)))},i=s=>{const a=s?.message??String(s?.error?.message??s?.error??"");bC.test(a)&&(s?.preventDefault?.(),t(s?.error instanceof Error?s.error:new Error(a)))};return window.addEventListener("unhandledrejection",r),window.addEventListener("error",i),()=>{window.removeEventListener("unhandledrejection",r),window.removeEventListener("error",i)}},[]),e?G.jsx(l1,{error:e,resetErrorBoundary:()=>t(null)}):n}function Er(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function Mq(n,e){const t=R.createContext(e),r=s=>{const{children:a,...u}=s,c=R.useMemo(()=>u,Object.values(u));return G.jsx(t.Provider,{value:c,children:a})};r.displayName=n+"Provider";function i(s){const a=R.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function u1(n,e=[]){let t=[];function r(s,a){const u=R.createContext(a),c=t.length;t=[...t,a];const h=g=>{const{scope:v,children:E,...I}=g,b=v?.[n]?.[c]||u,P=R.useMemo(()=>I,Object.values(I));return G.jsx(b.Provider,{value:P,children:E})};h.displayName=s+"Provider";function m(g,v){const E=v?.[n]?.[c]||u,I=R.useContext(E);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const i=()=>{const s=t.map(a=>R.createContext(a));return function(u){const c=u?.[n]||s;return R.useMemo(()=>({[`__scope${n}`]:{...u,[n]:c}}),[u,c])}};return i.scopeName=n,[r,s5(i,...e)]}function s5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((u,{useScope:c,scopeName:h})=>{const g=c(s)[`__scope${h}`];return{...u,...g}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function AC(n){const e=o5(n),t=R.forwardRef((r,i)=>{const{children:s,...a}=r,u=R.Children.toArray(s),c=u.find(l5);if(c){const h=c.props.children,m=u.map(g=>g===c?R.Children.count(h)>1?R.Children.only(null):R.isValidElement(h)?h.props.children:null:g);return G.jsx(e,{...a,ref:i,children:R.isValidElement(h)?R.cloneElement(h,void 0,m):null})}return G.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function o5(n){const e=R.forwardRef((t,r)=>{const{children:i,...s}=t;if(R.isValidElement(i)){const a=c5(i),u=u5(s,i.props);return i.type!==R.Fragment&&(u.ref=r?Wm(r,a):a),R.cloneElement(i,u)}return R.Children.count(i)>1?R.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var a5=Symbol("radix.slottable");function l5(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===a5}function u5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const c=s(...u);return i(...u),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function c5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function d5(n){const e=n+"CollectionProvider",[t,r]=u1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:P,children:L}=b,D=pn.useRef(null),A=pn.useRef(new Map).current;return G.jsx(i,{scope:P,itemMap:A,collectionRef:D,children:L})};a.displayName=e;const u=n+"CollectionSlot",c=AC(u),h=pn.forwardRef((b,P)=>{const{scope:L,children:D}=b,A=s(u,L),j=nl(P,A.collectionRef);return G.jsx(c,{ref:j,children:D})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=AC(m),E=pn.forwardRef((b,P)=>{const{scope:L,children:D,...A}=b,j=pn.useRef(null),H=nl(P,j),Y=s(m,L);return pn.useEffect(()=>(Y.itemMap.set(j,{ref:j,...A}),()=>{Y.itemMap.delete(j)})),G.jsx(v,{[g]:"",ref:H,children:D})});E.displayName=m;function I(b){const P=s(n+"CollectionConsumer",b);return pn.useCallback(()=>{const D=P.collectionRef.current;if(!D)return[];const A=Array.from(D.querySelectorAll(`[${g}]`));return Array.from(P.itemMap.values()).sort((Y,x)=>A.indexOf(Y.ref.current)-A.indexOf(x.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:a,Slot:h,ItemSlot:E},I,r]}function h5(n){const e=f5(n),t=R.forwardRef((r,i)=>{const{children:s,...a}=r,u=R.Children.toArray(s),c=u.find(m5);if(c){const h=c.props.children,m=u.map(g=>g===c?R.Children.count(h)>1?R.Children.only(null):R.isValidElement(h)?h.props.children:null:g);return G.jsx(e,{...a,ref:i,children:R.isValidElement(h)?R.cloneElement(h,void 0,m):null})}return G.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function f5(n){const e=R.forwardRef((t,r)=>{const{children:i,...s}=t;if(R.isValidElement(i)){const a=y5(i),u=g5(s,i.props);return i.type!==R.Fragment&&(u.ref=r?Wm(r,a):a),R.cloneElement(i,u)}return R.Children.count(i)>1?R.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var p5=Symbol("radix.slottable");function m5(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===p5}function g5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const c=s(...u);return i(...u),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function y5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var v5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Hi=v5.reduce((n,e)=>{const t=h5(`Primitive.${e}`),r=R.forwardRef((i,s)=>{const{asChild:a,...u}=i,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),G.jsx(c,{...u,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function c1(n,e){n&&R_.flushSync(()=>n.dispatchEvent(e))}function rl(n){const e=R.useRef(n);return R.useEffect(()=>{e.current=n}),R.useMemo(()=>(...t)=>e.current?.(...t),[])}function _5(n,e=globalThis?.document){const t=rl(n);R.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var w5="DismissableLayer",c_="dismissableLayer.update",E5="dismissableLayer.pointerDownOutside",T5="dismissableLayer.focusOutside",xC,d1=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),h1=R.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:u,...c}=n,h=R.useContext(d1),[m,g]=R.useState(null),v=m?.ownerDocument??globalThis?.document,[,E]=R.useState({}),I=nl(e,x=>g(x)),b=Array.from(h.layers),[P]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),L=b.indexOf(P),D=m?b.indexOf(m):-1,A=h.layersWithOutsidePointerEventsDisabled.size>0,j=D>=L,H=I5(x=>{const S=x.target,k=[...h.branches].some(O=>O.contains(S));!j||k||(i?.(x),a?.(x),x.defaultPrevented||u?.())},v),Y=C5(x=>{const S=x.target;[...h.branches].some(O=>O.contains(S))||(s?.(x),a?.(x),x.defaultPrevented||u?.())},v);return _5(x=>{D===h.layers.size-1&&(r?.(x),!x.defaultPrevented&&u&&(x.preventDefault(),u()))},v),R.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(xC=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),RC(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=xC)}},[m,v,t,h]),R.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),RC())},[m,h]),R.useEffect(()=>{const x=()=>E({});return document.addEventListener(c_,x),()=>document.removeEventListener(c_,x)},[]),G.jsx(Hi.div,{...c,ref:I,style:{pointerEvents:A?j?"auto":"none":void 0,...n.style},onFocusCapture:Er(n.onFocusCapture,Y.onFocusCapture),onBlurCapture:Er(n.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:Er(n.onPointerDownCapture,H.onPointerDownCapture)})});h1.displayName=w5;var S5="DismissableLayerBranch",f1=R.forwardRef((n,e)=>{const t=R.useContext(d1),r=R.useRef(null),i=nl(e,r);return R.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),G.jsx(Hi.div,{...n,ref:i})});f1.displayName=S5;function I5(n,e=globalThis?.document){const t=rl(n),r=R.useRef(!1),i=R.useRef(()=>{});return R.useEffect(()=>{const s=u=>{if(u.target&&!r.current){let c=function(){p1(E5,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function C5(n,e=globalThis?.document){const t=rl(n),r=R.useRef(!1);return R.useEffect(()=>{const i=s=>{s.target&&!r.current&&p1(T5,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function RC(){const n=new CustomEvent(c_);document.dispatchEvent(n)}function p1(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?c1(i,s):i.dispatchEvent(s)}var P5=h1,b5=f1,zd=globalThis?.document?R.useLayoutEffect:()=>{},A5="Portal",m1=R.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=R.useState(!1);zd(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?PN.createPortal(G.jsx(Hi.div,{...r,ref:e}),a):null});m1.displayName=A5;function x5(n,e){return R.useReducer((t,r)=>e[t][r]??t,n)}var g1=n=>{const{present:e,children:t}=n,r=R5(e),i=typeof t=="function"?t({present:r.isPresent}):R.Children.only(t),s=nl(r.ref,D5(i));return typeof t=="function"||r.isPresent?R.cloneElement(i,{ref:s}):null};g1.displayName="Presence";function R5(n){const[e,t]=R.useState(),r=R.useRef(null),i=R.useRef(n),s=R.useRef("none"),a=n?"mounted":"unmounted",[u,c]=x5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const h=zf(r.current);s.current=u==="mounted"?h:"none"},[u]),zd(()=>{const h=r.current,m=i.current;if(m!==n){const v=s.current,E=zf(h);n?c("MOUNT"):E==="none"||h?.display==="none"?c("UNMOUNT"):c(m&&v!==E?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),zd(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=E=>{const b=zf(r.current).includes(CSS.escape(E.animationName));if(E.target===e&&b&&(c("ANIMATION_END"),!i.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},v=E=>{E.target===e&&(s.current=zf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:R.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function zf(n){return n?.animationName||"none"}function D5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var k5=x_[" useInsertionEffect ".trim().toString()]||zd;function N5({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=V5({defaultProp:e,onChange:t}),u=n!==void 0,c=u?n:i;{const m=R.useRef(n!==void 0);R.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=R.useCallback(m=>{if(u){const g=M5(m)?m(n):m;g!==n&&a.current?.(g)}else s(m)},[u,n,s,a]);return[c,h]}function V5({defaultProp:n,onChange:e}){const[t,r]=R.useState(n),i=R.useRef(t),s=R.useRef(e);return k5(()=>{s.current=e},[e]),R.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function M5(n){return typeof n=="function"}var O5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),L5="VisuallyHidden",iE=R.forwardRef((n,e)=>G.jsx(Hi.span,{...n,ref:e,style:{...O5,...n.style}}));iE.displayName=L5;var sE="ToastProvider",[oE,F5,U5]=d5("Toast"),[y1]=u1("Toast",[U5]),[j5,Hm]=y1(sE),v1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=n,[u,c]=R.useState(null),[h,m]=R.useState(0),g=R.useRef(!1),v=R.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${sE}\`. Expected non-empty \`string\`.`),G.jsx(oE.Provider,{scope:e,children:G.jsx(j5,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:u,onViewportChange:c,onToastAdd:R.useCallback(()=>m(E=>E+1),[]),onToastRemove:R.useCallback(()=>m(E=>E-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:v,children:a})})};v1.displayName=sE;var _1="ToastViewport",B5=["F8"],d_="toast.viewportPause",h_="toast.viewportResume",w1=R.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=B5,label:i="Notifications ({hotkey})",...s}=n,a=Hm(_1,t),u=F5(t),c=R.useRef(null),h=R.useRef(null),m=R.useRef(null),g=R.useRef(null),v=nl(e,g,a.onViewportChange),E=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=a.toastCount>0;R.useEffect(()=>{const P=L=>{r.length!==0&&r.every(A=>L[A]||L.code===A)&&g.current?.focus()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]),R.useEffect(()=>{const P=c.current,L=g.current;if(I&&P&&L){const D=()=>{if(!a.isClosePausedRef.current){const Y=new CustomEvent(d_);L.dispatchEvent(Y),a.isClosePausedRef.current=!0}},A=()=>{if(a.isClosePausedRef.current){const Y=new CustomEvent(h_);L.dispatchEvent(Y),a.isClosePausedRef.current=!1}},j=Y=>{!P.contains(Y.relatedTarget)&&A()},H=()=>{P.contains(document.activeElement)||A()};return P.addEventListener("focusin",D),P.addEventListener("focusout",j),P.addEventListener("pointermove",D),P.addEventListener("pointerleave",H),window.addEventListener("blur",D),window.addEventListener("focus",A),()=>{P.removeEventListener("focusin",D),P.removeEventListener("focusout",j),P.removeEventListener("pointermove",D),P.removeEventListener("pointerleave",H),window.removeEventListener("blur",D),window.removeEventListener("focus",A)}}},[I,a.isClosePausedRef]);const b=R.useCallback(({tabbingDirection:P})=>{const D=u().map(A=>{const j=A.ref.current,H=[j,...e9(j)];return P==="forwards"?H:H.reverse()});return(P==="forwards"?D.reverse():D).flat()},[u]);return R.useEffect(()=>{const P=g.current;if(P){const L=D=>{const A=D.altKey||D.ctrlKey||D.metaKey;if(D.key==="Tab"&&!A){const H=document.activeElement,Y=D.shiftKey;if(D.target===P&&Y){h.current?.focus();return}const k=b({tabbingDirection:Y?"backwards":"forwards"}),O=k.findIndex(M=>M===H);nv(k.slice(O+1))?D.preventDefault():Y?h.current?.focus():m.current?.focus()}};return P.addEventListener("keydown",L),()=>P.removeEventListener("keydown",L)}},[u,b]),G.jsxs(b5,{ref:c,role:"region","aria-label":i.replace("{hotkey}",E),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&G.jsx(f_,{ref:h,onFocusFromOutsideViewport:()=>{const P=b({tabbingDirection:"forwards"});nv(P)}}),G.jsx(oE.Slot,{scope:t,children:G.jsx(Hi.ol,{tabIndex:-1,...s,ref:v})}),I&&G.jsx(f_,{ref:m,onFocusFromOutsideViewport:()=>{const P=b({tabbingDirection:"backwards"});nv(P)}})]})});w1.displayName=_1;var E1="ToastFocusProxy",f_=R.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Hm(E1,t);return G.jsx(iE,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const u=a.relatedTarget;!s.viewport?.contains(u)&&r()}})});f_.displayName=E1;var mh="Toast",$5="toast.swipeStart",z5="toast.swipeMove",W5="toast.swipeCancel",H5="toast.swipeEnd",T1=R.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...a}=n,[u,c]=N5({prop:r,defaultProp:i??!0,onChange:s,caller:mh});return G.jsx(g1,{present:t||u,children:G.jsx(K5,{open:u,...a,ref:e,onClose:()=>c(!1),onPause:rl(n.onPause),onResume:rl(n.onResume),onSwipeStart:Er(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Er(n.onSwipeMove,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:Er(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Er(n.onSwipeEnd,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),c(!1)})})})});T1.displayName=mh;var[q5,G5]=y1(mh,{onClose(){}}),K5=R.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:u,onPause:c,onResume:h,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:E,...I}=n,b=Hm(mh,t),[P,L]=R.useState(null),D=nl(e,ie=>L(ie)),A=R.useRef(null),j=R.useRef(null),H=i||b.duration,Y=R.useRef(0),x=R.useRef(H),S=R.useRef(0),{onToastAdd:k,onToastRemove:O}=b,M=rl(()=>{P?.contains(document.activeElement)&&b.viewport?.focus(),a()}),U=R.useCallback(ie=>{!ie||ie===1/0||(window.clearTimeout(S.current),Y.current=new Date().getTime(),S.current=window.setTimeout(M,ie))},[M]);R.useEffect(()=>{const ie=b.viewport;if(ie){const Ie=()=>{U(x.current),h?.()},Ce=()=>{const je=new Date().getTime()-Y.current;x.current=x.current-je,window.clearTimeout(S.current),c?.()};return ie.addEventListener(d_,Ce),ie.addEventListener(h_,Ie),()=>{ie.removeEventListener(d_,Ce),ie.removeEventListener(h_,Ie)}}},[b.viewport,H,c,h,U]),R.useEffect(()=>{s&&!b.isClosePausedRef.current&&U(H)},[s,H,b.isClosePausedRef,U]),R.useEffect(()=>(k(),()=>O()),[k,O]);const V=R.useMemo(()=>P?x1(P):null,[P]);return b.viewport?G.jsxs(G.Fragment,{children:[V&&G.jsx(Q5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:V}),G.jsx(q5,{scope:t,onClose:M,children:R_.createPortal(G.jsx(oE.ItemSlot,{scope:t,children:G.jsx(P5,{asChild:!0,onEscapeKeyDown:Er(u,()=>{b.isFocusedToastEscapeKeyDownRef.current||M(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:G.jsx(Hi.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":b.swipeDirection,...I,ref:D,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Er(n.onKeyDown,ie=>{ie.key==="Escape"&&(u?.(ie.nativeEvent),ie.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Er(n.onPointerDown,ie=>{ie.button===0&&(A.current={x:ie.clientX,y:ie.clientY})}),onPointerMove:Er(n.onPointerMove,ie=>{if(!A.current)return;const Ie=ie.clientX-A.current.x,Ce=ie.clientY-A.current.y,je=!!j.current,se=["left","right"].includes(b.swipeDirection),_e=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,ue=se?_e(0,Ie):0,B=se?0:_e(0,Ce),ee=ie.pointerType==="touch"?10:2,we={x:ue,y:B},Te={originalEvent:ie,delta:we};je?(j.current=we,Wf(z5,g,Te,{discrete:!1})):DC(we,b.swipeDirection,ee)?(j.current=we,Wf($5,m,Te,{discrete:!1}),ie.target.setPointerCapture(ie.pointerId)):(Math.abs(Ie)>ee||Math.abs(Ce)>ee)&&(A.current=null)}),onPointerUp:Er(n.onPointerUp,ie=>{const Ie=j.current,Ce=ie.target;if(Ce.hasPointerCapture(ie.pointerId)&&Ce.releasePointerCapture(ie.pointerId),j.current=null,A.current=null,Ie){const je=ie.currentTarget,se={originalEvent:ie,delta:Ie};DC(Ie,b.swipeDirection,b.swipeThreshold)?Wf(H5,E,se,{discrete:!0}):Wf(W5,v,se,{discrete:!0}),je.addEventListener("click",_e=>_e.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),Q5=n=>{const{__scopeToast:e,children:t,...r}=n,i=Hm(mh,e),[s,a]=R.useState(!1),[u,c]=R.useState(!1);return J5(()=>a(!0)),R.useEffect(()=>{const h=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:G.jsx(m1,{asChild:!0,children:G.jsx(iE,{...r,children:s&&G.jsxs(G.Fragment,{children:[i.label," ",t]})})})},Y5="ToastTitle",S1=R.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return G.jsx(Hi.div,{...r,ref:e})});S1.displayName=Y5;var X5="ToastDescription",I1=R.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return G.jsx(Hi.div,{...r,ref:e})});I1.displayName=X5;var C1="ToastAction",P1=R.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?G.jsx(A1,{altText:t,asChild:!0,children:G.jsx(aE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${C1}\`. Expected non-empty \`string\`.`),null)});P1.displayName=C1;var b1="ToastClose",aE=R.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=G5(b1,t);return G.jsx(A1,{asChild:!0,children:G.jsx(Hi.button,{type:"button",...r,ref:e,onClick:Er(n.onClick,i.onClose)})})});aE.displayName=b1;var A1=R.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return G.jsx(Hi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function x1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Z5(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...x1(r))}}),e}function Wf(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?c1(i,s):i.dispatchEvent(s)}var DC=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function J5(n=()=>{}){const e=rl(n);zd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Z5(n){return n.nodeType===n.ELEMENT_NODE}function e9(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function nv(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var t9=v1,R1=w1,D1=T1,k1=S1,N1=I1,V1=P1,M1=aE;const n9=t9,O1=pn.forwardRef(({className:n,...e},t)=>G.jsx(R1,{ref:t,className:al("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));O1.displayName=R1.displayName;const r9=a1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),L1=pn.forwardRef(({className:n,variant:e,...t},r)=>G.jsx(D1,{ref:r,className:al(r9({variant:e}),n),...t}));L1.displayName=D1.displayName;const i9=pn.forwardRef(({className:n,...e},t)=>G.jsx(V1,{ref:t,className:al("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));i9.displayName=V1.displayName;const F1=pn.forwardRef(({className:n,...e},t)=>G.jsx(M1,{ref:t,className:al("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:G.jsx(y6,{className:"h-4 w-4"})}));F1.displayName=M1.displayName;const U1=pn.forwardRef(({className:n,...e},t)=>G.jsx(k1,{ref:t,className:al("text-sm font-semibold",n),...e}));U1.displayName=k1.displayName;const j1=pn.forwardRef(({className:n,...e},t)=>G.jsx(N1,{ref:t,className:al("text-sm opacity-90",n),...e}));j1.displayName=N1.displayName;function s9(){const{toasts:n}=Hw();return G.jsxs(n9,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>G.jsxs(L1,{...s,children:[G.jsxs("div",{className:"grid gap-1",children:[t&&G.jsx(U1,{children:t}),r&&G.jsx(j1,{children:r})]}),i,G.jsx(F1,{})]},e)),G.jsx(O1,{})]})}const B1=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),qm=R.createContext({}),lE=R.createContext(null),Gm=typeof document<"u",o9=Gm?R.useLayoutEffect:R.useEffect,$1=R.createContext({strict:!1}),uE=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a9="framerAppearId",z1="data-"+uE(a9);function l9(n,e,t,r){const{visualElement:i}=R.useContext(qm),s=R.useContext($1),a=R.useContext(lE),u=R.useContext(B1).reducedMotion,c=R.useRef();r=r||s.renderer,!c.current&&r&&(c.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=c.current;R.useInsertionEffect(()=>{h&&h.update(t,a)});const m=R.useRef(!!(t[z1]&&!window.HandoffComplete));return o9(()=>{h&&(h.render(),m.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(h.updateFeatures(),!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),h}function uu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function u9(n,e,t){return R.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):uu(t)&&(t.current=r))},[e])}function Wd(n){return typeof n=="string"||Array.isArray(n)}function Km(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const cE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dE=["initial",...cE];function Qm(n){return Km(n.animate)||dE.some(e=>Wd(n[e]))}function W1(n){return!!(Qm(n)||n.variants)}function c9(n,e){if(Qm(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Wd(t)?t:void 0,animate:Wd(r)?r:void 0}}return n.inherit!==!1?e:{}}function d9(n){const{initial:e,animate:t}=c9(n,R.useContext(qm));return R.useMemo(()=>({initial:e,animate:t}),[kC(e),kC(t)])}function kC(n){return Array.isArray(n)?n.join(" "):n}const NC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hd={};for(const n in NC)Hd[n]={isEnabled:e=>NC[n].some(t=>!!e[t])};function h9(n){for(const e in n)Hd[e]={...Hd[e],...n[e]}}const H1=R.createContext({}),q1=R.createContext({}),f9=Symbol.for("motionComponentSymbol");function p9({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&h9(n);function s(u,c){let h;const m={...R.useContext(B1),...u,layoutId:m9(u)},{isStatic:g}=m,v=d9(u),E=r(u,g);if(!g&&Gm){v.visualElement=l9(i,E,m,e);const I=R.useContext(q1),b=R.useContext($1).strict;v.visualElement&&(h=v.visualElement.loadFeatures(m,b,n,I))}return R.createElement(qm.Provider,{value:v},h&&v.visualElement?R.createElement(h,{visualElement:v.visualElement,...m}):null,t(i,u,u9(E,v.visualElement,c),E,g,v.visualElement))}const a=R.forwardRef(s);return a[f9]=i,a}function m9({layoutId:n}){const e=R.useContext(H1).id;return e&&n!==void 0?e+"-"+n:n}function g9(n){function e(r,i={}){return p9(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const y9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hE(n){return typeof n!="string"||n.includes("-")?!1:!!(y9.indexOf(n)>-1||/[A-Z]/.test(n))}const rm={};function v9(n){Object.assign(rm,n)}const gh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ll=new Set(gh);function G1(n,{layout:e,layoutId:t}){return ll.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!rm[n]||n==="opacity")}const lr=n=>!!(n&&n.getVelocity),_9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w9=gh.length;function E9(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<w9;a++){const u=gh[a];if(n[u]!==void 0){const c=_9[u]||u;s+=`${c}(${n[u]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const K1=n=>e=>typeof e=="string"&&e.startsWith(n),Q1=K1("--"),p_=K1("var(--"),T9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,S9=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Oo=(n,e,t)=>Math.min(Math.max(t,n),e),ul={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ed={...ul,transform:n=>Oo(0,1,n)},Hf={...ul,default:1},Td=n=>Math.round(n*1e5)/1e5,Ym=/(-)?([\d]*\.?[\d])+/g,Y1=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,I9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function yh(n){return typeof n=="string"}const vh=n=>({test:e=>yh(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),lo=vh("deg"),ji=vh("%"),Qe=vh("px"),C9=vh("vh"),P9=vh("vw"),VC={...ji,parse:n=>ji.parse(n)/100,transform:n=>ji.transform(n*100)},MC={...ul,transform:Math.round},X1={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,size:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,rotate:lo,rotateX:lo,rotateY:lo,rotateZ:lo,scale:Hf,scaleX:Hf,scaleY:Hf,scaleZ:Hf,skew:lo,skewX:lo,skewY:lo,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:Ed,originX:VC,originY:VC,originZ:Qe,zIndex:MC,fillOpacity:Ed,strokeOpacity:Ed,numOctaves:MC};function fE(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:u}=n;let c=!1,h=!1,m=!0;for(const g in e){const v=e[g];if(Q1(g)){s[g]=v;continue}const E=X1[g],I=S9(v,E);if(ll.has(g)){if(c=!0,a[g]=I,!m)continue;v!==(E.default||0)&&(m=!1)}else g.startsWith("origin")?(h=!0,u[g]=I):i[g]=I}if(e.transform||(c||r?i.transform=E9(n.transform,t,m,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:E=0}=u;i.transformOrigin=`${g} ${v} ${E}`}}const pE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function J1(n,e,t){for(const r in e)!lr(e[r])&&!G1(r,t)&&(n[r]=e[r])}function b9({transformTemplate:n},e,t){return R.useMemo(()=>{const r=pE();return fE(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function A9(n,e,t){const r=n.style||{},i={};return J1(i,r,n),Object.assign(i,b9(n,e,t)),n.transformValues?n.transformValues(i):i}function x9(n,e,t){const r={},i=A9(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const R9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function im(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||R9.has(n)}let Z1=n=>!im(n);function D9(n){n&&(Z1=e=>e.startsWith("on")?!im(e):n(e))}try{D9(require("@emotion/is-prop-valid").default)}catch{}function k9(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(Z1(i)||t===!0&&im(i)||!e&&!im(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function OC(n,e,t){return typeof n=="string"?n:Qe.transform(e+t*n)}function N9(n,e,t){const r=OC(e,n.x,n.width),i=OC(t,n.y,n.height);return`${r} ${i}`}const V9={offset:"stroke-dashoffset",array:"stroke-dasharray"},M9={offset:"strokeDashoffset",array:"strokeDasharray"};function O9(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?V9:M9;n[s.offset]=Qe.transform(-r);const a=Qe.transform(e),u=Qe.transform(t);n[s.array]=`${a} ${u}`}function mE(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:c=0,...h},m,g,v){if(fE(n,h,m,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:I,dimensions:b}=n;E.transform&&(b&&(I.transform=E.transform),delete E.transform),b&&(i!==void 0||s!==void 0||I.transform)&&(I.transformOrigin=N9(b,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),a!==void 0&&O9(E,a,u,c,!1)}const eD=()=>({...pE(),attrs:{}}),gE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function L9(n,e,t,r){const i=R.useMemo(()=>{const s=eD();return mE(s,e,{enableHardwareAcceleration:!1},gE(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};J1(s,n.style,n),i.style={...s,...i.style}}return i}function F9(n=!1){return(t,r,i,{latestValues:s},a)=>{const c=(hE(t)?L9:x9)(r,s,a,t),m={...k9(r,typeof t=="string",n),...c,ref:i},{children:g}=r,v=R.useMemo(()=>lr(g)?g.get():g,[g]);return R.createElement(t,{...m,children:v})}}function tD(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const nD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rD(n,e,t,r){tD(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(nD.has(i)?i:uE(i),e.attrs[i])}function yE(n,e){const{style:t}=n,r={};for(const i in t)(lr(t[i])||e.style&&lr(e.style[i])||G1(i,n))&&(r[i]=t[i]);return r}function iD(n,e){const t=yE(n,e);for(const r in n)if(lr(n[r])||lr(e[r])){const i=gh.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function vE(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function U9(n){const e=R.useRef(null);return e.current===null&&(e.current=n()),e.current}const sm=n=>Array.isArray(n),j9=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),B9=n=>sm(n)?n[n.length-1]||0:n;function pp(n){const e=lr(n)?n.get():n;return j9(e)?e.toValue():e}function $9({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:z9(r,i,s,n),renderState:e()};return t&&(a.mount=u=>t(r,u,a)),a}const sD=n=>(e,t)=>{const r=R.useContext(qm),i=R.useContext(lE),s=()=>$9(n,e,r,i);return t?s():U9(s)};function z9(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=pp(s[v]);let{initial:a,animate:u}=n;const c=Qm(n),h=W1(n);e&&h&&!c&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Km(g)&&(Array.isArray(g)?g:[g]).forEach(E=>{const I=vE(n,E);if(!I)return;const{transitionEnd:b,transition:P,...L}=I;for(const D in L){let A=L[D];if(Array.isArray(A)){const j=m?A.length-1:0;A=A[j]}A!==null&&(i[D]=A)}for(const D in b)i[D]=b[D]}),i}const on=n=>n;class LC{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function W9(n){let e=new LC,t=new LC,r=0,i=!1,s=!1;const a=new WeakSet,u={schedule:(c,h=!1,m=!1)=>{const g=m&&i,v=g?e:t;return h&&a.add(c),v.add(c)&&g&&i&&(r=e.order.length),c},cancel:c=>{t.remove(c),a.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const m=e.order[h];m(c),a.has(m)&&(u.schedule(m),n())}i=!1,s&&(s=!1,u.process(c))}};return u}const qf=["prepare","read","update","preRender","render","postRender"],H9=40;function q9(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=qf.reduce((g,v)=>(g[v]=W9(()=>t=!0),g),{}),a=g=>s[g].process(i),u=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,H9),1),i.timestamp=g,i.isProcessing=!0,qf.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(u))},c=()=>{t=!0,r=!0,i.isProcessing||n(u)};return{schedule:qf.reduce((g,v)=>{const E=s[v];return g[v]=(I,b=!1,P=!1)=>(t||c(),E.schedule(I,b,P)),g},{}),cancel:g=>qf.forEach(v=>s[v].cancel(g)),state:i,steps:s}}const{schedule:Bt,cancel:Cs,state:jn,steps:rv}=q9(typeof requestAnimationFrame<"u"?requestAnimationFrame:on,!0),G9={useVisualState:sD({scrapeMotionValuesFromProps:iD,createRenderState:eD,onMount:(n,e,{renderState:t,latestValues:r})=>{Bt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Bt.render(()=>{mE(t,r,{enableHardwareAcceleration:!1},gE(e.tagName),n.transformTemplate),rD(e,t)})}})},K9={useVisualState:sD({scrapeMotionValuesFromProps:yE,createRenderState:pE})};function Q9(n,{forwardMotionProps:e=!1},t,r){return{...hE(n)?G9:K9,preloadedFeatures:t,useRender:F9(e),createVisualElement:r,Component:n}}function gs(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const oD=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Xm(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const Y9=n=>e=>oD(e)&&n(e,Xm(e));function ys(n,e,t,r){return gs(n,e,Y9(t),r)}const X9=(n,e)=>t=>e(n(t)),Ao=(...n)=>n.reduce(X9);function aD(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const FC=aD("dragHorizontal"),UC=aD("dragVertical");function lD(n){let e=!1;if(n==="y")e=UC();else if(n==="x")e=FC();else{const t=FC(),r=UC();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function uD(){const n=lD(!0);return n?(n(),!1):!0}class Ho{constructor(e){this.isMounted=!1,this.node=e}update(){}}function jC(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||uD())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&Bt.update(()=>u[r](s,a))};return ys(n.current,t,i,{passive:!n.getProps()[r]})}class J9 extends Ho{mount(){this.unmount=Ao(jC(this.node,!0),jC(this.node,!1))}unmount(){}}class Z9 extends Ho{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ao(gs(this.node.current,"focus",()=>this.onFocus()),gs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const cD=(n,e)=>e?n===e?!0:cD(n,e.parentElement):!1;function iv(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Xm(t))}class ez extends Ho{constructor(){super(...arguments),this.removeStartListeners=on,this.removeEndListeners=on,this.removeAccessibleListeners=on,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=ys(window,"pointerup",(u,c)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Bt.update(()=>{!g&&!cD(this.node.current,u.target)?m&&m(u,c):h&&h(u,c)})},{passive:!(r.onTap||r.onPointerUp)}),a=ys(window,"pointercancel",(u,c)=>this.cancelPress(u,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ao(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||iv("up",(c,h)=>{const{onTap:m}=this.node.getProps();m&&Bt.update(()=>m(c,h))})};this.removeEndListeners(),this.removeEndListeners=gs(this.node.current,"keyup",a),iv("down",(u,c)=>{this.startPress(u,c)})},t=gs(this.node.current,"keydown",e),r=()=>{this.isPressing&&iv("cancel",(s,a)=>this.cancelPress(s,a))},i=gs(this.node.current,"blur",r);this.removeAccessibleListeners=Ao(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Bt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!uD()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Bt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=ys(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=gs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ao(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const m_=new WeakMap,sv=new WeakMap,tz=n=>{const e=m_.get(n.target);e&&e(n)},nz=n=>{n.forEach(tz)};function rz({root:n,...e}){const t=n||document;sv.has(t)||sv.set(t,{});const r=sv.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(nz,{root:n,...e})),r[i]}function iz(n,e,t){const r=rz(e);return m_.set(n,t),r.observe(n),()=>{m_.delete(n),r.unobserve(n)}}const sz={some:0,all:1};class oz extends Ho{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:sz[i]},u=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(c)};return iz(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(az(e,t))&&this.startObserver()}unmount(){}}function az({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const lz={inView:{Feature:oz},tap:{Feature:ez},focus:{Feature:Z9},hover:{Feature:J9}};function dD(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function uz(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function cz(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Jm(n,e,t){const r=n.getProps();return vE(r,e,t!==void 0?t:r.custom,uz(n),cz(n))}let _E=on;const ja=n=>n*1e3,vs=n=>n/1e3,dz={current:!1},hD=n=>Array.isArray(n)&&typeof n[0]=="number";function fD(n){return!!(!n||typeof n=="string"&&pD[n]||hD(n)||Array.isArray(n)&&n.every(fD))}const ld=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,pD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ld([0,.65,.55,1]),circOut:ld([.55,0,1,.45]),backIn:ld([.31,.01,.66,-.59]),backOut:ld([.33,1.53,.69,.99])};function mD(n){if(n)return hD(n)?ld(n):Array.isArray(n)?n.map(mD):pD[n]}function hz(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:u,times:c}={}){const h={[e]:t};c&&(h.offset=c);const m=mD(u);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function fz(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const gD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,pz=1e-7,mz=12;function gz(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=gD(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>pz&&++u<mz);return a}function _h(n,e,t,r){if(n===e&&t===r)return on;const i=s=>gz(s,0,1,n,t);return s=>s===0||s===1?s:gD(i(s),e,r)}const yz=_h(.42,0,1,1),vz=_h(0,0,.58,1),yD=_h(.42,0,.58,1),_z=n=>Array.isArray(n)&&typeof n[0]!="number",vD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,_D=n=>e=>1-n(1-e),wE=n=>1-Math.sin(Math.acos(n)),wD=_D(wE),wz=vD(wE),ED=_h(.33,1.53,.69,.99),EE=_D(ED),Ez=vD(EE),Tz=n=>(n*=2)<1?.5*EE(n):.5*(2-Math.pow(2,-10*(n-1))),Sz={linear:on,easeIn:yz,easeInOut:yD,easeOut:vz,circIn:wE,circInOut:wz,circOut:wD,backIn:EE,backInOut:Ez,backOut:ED,anticipate:Tz},BC=n=>{if(Array.isArray(n)){_E(n.length===4);const[e,t,r,i]=n;return _h(e,t,r,i)}else if(typeof n=="string")return Sz[n];return n},TE=(n,e)=>t=>!!(yh(t)&&I9.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),TD=(n,e,t)=>r=>{if(!yh(r))return r;const[i,s,a,u]=r.match(Ym);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},Iz=n=>Oo(0,255,n),ov={...ul,transform:n=>Math.round(Iz(n))},Ma={test:TE("rgb","red"),parse:TD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ov.transform(n)+", "+ov.transform(e)+", "+ov.transform(t)+", "+Td(Ed.transform(r))+")"};function Cz(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const g_={test:TE("#"),parse:Cz,transform:Ma.transform},cu={test:TE("hsl","hue"),parse:TD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ji.transform(Td(e))+", "+ji.transform(Td(t))+", "+Td(Ed.transform(r))+")"},Qn={test:n=>Ma.test(n)||g_.test(n)||cu.test(n),parse:n=>Ma.test(n)?Ma.parse(n):cu.test(n)?cu.parse(n):g_.parse(n),transform:n=>yh(n)?n:n.hasOwnProperty("red")?Ma.transform(n):cu.transform(n)},Qt=(n,e,t)=>-t*n+t*e+n;function av(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Pz({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,c=2*t-u;i=av(c,u,n+1/3),s=av(c,u,n),a=av(c,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const lv=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},bz=[g_,Ma,cu],Az=n=>bz.find(e=>e.test(n));function $C(n){const e=Az(n);let t=e.parse(n);return e===cu&&(t=Pz(t)),t}const SD=(n,e)=>{const t=$C(n),r=$C(e),i={...t};return s=>(i.red=lv(t.red,r.red,s),i.green=lv(t.green,r.green,s),i.blue=lv(t.blue,r.blue,s),i.alpha=Qt(t.alpha,r.alpha,s),Ma.transform(i))};function xz(n){var e,t;return isNaN(n)&&yh(n)&&(((e=n.match(Ym))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Y1))===null||t===void 0?void 0:t.length)||0)>0}const ID={regex:T9,countKey:"Vars",token:"${v}",parse:on},CD={regex:Y1,countKey:"Colors",token:"${c}",parse:Qn.parse},PD={regex:Ym,countKey:"Numbers",token:"${n}",parse:ul.parse};function uv(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function om(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&uv(t,ID),uv(t,CD),uv(t,PD),t}function bD(n){return om(n).values}function AD(n){const{values:e,numColors:t,numVars:r,tokenised:i}=om(n),s=e.length;return a=>{let u=i;for(let c=0;c<s;c++)c<r?u=u.replace(ID.token,a[c]):c<r+t?u=u.replace(CD.token,Qn.transform(a[c])):u=u.replace(PD.token,Td(a[c]));return u}}const Rz=n=>typeof n=="number"?0:n;function Dz(n){const e=bD(n);return AD(n)(e.map(Rz))}const Lo={test:xz,parse:bD,createTransformer:AD,getAnimatableNone:Dz},xD=(n,e)=>t=>`${t>0?e:n}`;function RD(n,e){return typeof n=="number"?t=>Qt(n,e,t):Qn.test(n)?SD(n,e):n.startsWith("var(")?xD(n,e):kD(n,e)}const DD=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>RD(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},kz=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=RD(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},kD=(n,e)=>{const t=Lo.createTransformer(e),r=om(n),i=om(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ao(DD(r.values,i.values),t):xD(n,e)},qd=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},zC=(n,e)=>t=>Qt(n,e,t);function Nz(n){return typeof n=="number"?zC:typeof n=="string"?Qn.test(n)?SD:kD:Array.isArray(n)?DD:typeof n=="object"?kz:zC}function Vz(n,e,t){const r=[],i=t||Nz(n[0]),s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const c=Array.isArray(e)?e[a]||on:e;u=Ao(c,u)}r.push(u)}return r}function ND(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(_E(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=Vz(e,r,i),u=a.length,c=h=>{let m=0;if(u>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const g=qd(n[m],n[m+1],h);return a[m](g)};return t?h=>c(Oo(n[0],n[s-1],h)):c}function Mz(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=qd(0,e,r);n.push(Qt(t,1,i))}}function Oz(n){const e=[0];return Mz(e,n.length-1),e}function Lz(n,e){return n.map(t=>t*e)}function Fz(n,e){return n.map(()=>e||yD).splice(0,n.length-1)}function am({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=_z(r)?r.map(BC):BC(r),s={done:!1,value:e[0]},a=Lz(t&&t.length===e.length?t:Oz(e),n),u=ND(a,e,{ease:Array.isArray(i)?i:Fz(e,i)});return{calculatedDuration:n,next:c=>(s.value=u(c),s.done=c>=n,s)}}function VD(n,e){return e?n*(1e3/e):0}const Uz=5;function MD(n,e,t){const r=Math.max(e-Uz,0);return VD(t-n(r),e-r)}const cv=.001,jz=.01,Bz=10,$z=.05,zz=1;function Wz({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=Oo($z,zz,a),n=Oo(jz,Bz,vs(n)),a<1?(i=h=>{const m=h*a,g=m*n,v=m-t,E=y_(h,a),I=Math.exp(-g);return cv-v/E*I},s=h=>{const g=h*a*n,v=g*t+t,E=Math.pow(a,2)*Math.pow(h,2)*n,I=Math.exp(-g),b=y_(Math.pow(h,2),a);return(-i(h)+cv>0?-1:1)*((v-E)*I)/b}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-cv+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,c=qz(i,s,u);if(n=ja(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const Hz=12;function qz(n,e,t){let r=t;for(let i=1;i<Hz;i++)r=r-n(r)/e(r);return r}function y_(n,e){return n*Math.sqrt(1-e*e)}const Gz=["duration","bounce"],Kz=["stiffness","damping","mass"];function WC(n,e){return e.some(t=>n[t]!==void 0)}function Qz(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!WC(n,Kz)&&WC(n,Gz)){const t=Wz(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function OD({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:u,damping:c,mass:h,duration:m,velocity:g,isResolvedFromDuration:v}=Qz({...r,velocity:-vs(r.velocity||0)}),E=g||0,I=c/(2*Math.sqrt(u*h)),b=s-i,P=vs(Math.sqrt(u/h)),L=Math.abs(b)<5;t||(t=L?.01:2),e||(e=L?.005:.5);let D;if(I<1){const A=y_(P,I);D=j=>{const H=Math.exp(-I*P*j);return s-H*((E+I*P*b)/A*Math.sin(A*j)+b*Math.cos(A*j))}}else if(I===1)D=A=>s-Math.exp(-P*A)*(b+(E+P*b)*A);else{const A=P*Math.sqrt(I*I-1);D=j=>{const H=Math.exp(-I*P*j),Y=Math.min(A*j,300);return s-H*((E+I*P*b)*Math.sinh(Y)+A*b*Math.cosh(Y))/A}}return{calculatedDuration:v&&m||null,next:A=>{const j=D(A);if(v)a.done=A>=m;else{let H=E;A!==0&&(I<1?H=MD(D,A,j):H=0);const Y=Math.abs(H)<=t,x=Math.abs(s-j)<=e;a.done=Y&&x}return a.value=a.done?s:j,a}}}function HC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:c,restDelta:h=.5,restSpeed:m}){const g=n[0],v={done:!1,value:g},E=S=>u!==void 0&&S<u||c!==void 0&&S>c,I=S=>u===void 0?c:c===void 0||Math.abs(u-S)<Math.abs(c-S)?u:c;let b=t*e;const P=g+b,L=a===void 0?P:a(P);L!==P&&(b=L-g);const D=S=>-b*Math.exp(-S/r),A=S=>L+D(S),j=S=>{const k=D(S),O=A(S);v.done=Math.abs(k)<=h,v.value=v.done?L:O};let H,Y;const x=S=>{E(v.value)&&(H=S,Y=OD({keyframes:[v.value,I(v.value)],velocity:MD(A,S,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return x(0),{calculatedDuration:null,next:S=>{let k=!1;return!Y&&H===void 0&&(k=!0,j(S),x(S)),H!==void 0&&S>H?Y.next(S-H):(!k&&j(S),v)}}}const Yz=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Bt.update(e,!0),stop:()=>Cs(e),now:()=>jn.isProcessing?jn.timestamp:performance.now()}},qC=2e4;function GC(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<qC;)e+=t,r=n.next(e);return e>=qC?1/0:e}const Xz={decay:HC,inertia:HC,tween:am,keyframes:am,spring:OD};function lm({autoplay:n=!0,delay:e=0,driver:t=Yz,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",onPlay:c,onStop:h,onComplete:m,onUpdate:g,...v}){let E=1,I=!1,b,P;const L=()=>{P=new Promise(B=>{b=B})};L();let D;const A=Xz[i]||am;let j;A!==am&&typeof r[0]!="number"&&(j=ND([0,100],r,{clamp:!1}),r=[0,100]);const H=A({...v,keyframes:r});let Y;u==="mirror"&&(Y=A({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let x="idle",S=null,k=null,O=null;H.calculatedDuration===null&&s&&(H.calculatedDuration=GC(H));const{calculatedDuration:M}=H;let U=1/0,V=1/0;M!==null&&(U=M+a,V=U*(s+1)-a);let ie=0;const Ie=B=>{if(k===null)return;E>0&&(k=Math.min(k,B)),E<0&&(k=Math.min(B-V/E,k)),S!==null?ie=S:ie=Math.round(B-k)*E;const ee=ie-e*(E>=0?1:-1),we=E>=0?ee<0:ee>V;ie=Math.max(ee,0),x==="finished"&&S===null&&(ie=V);let Te=ie,Ee=H;if(s){const at=Math.min(ie,V)/U;let kt=Math.floor(at),gn=at%1;!gn&&at>=1&&(gn=1),gn===1&&kt--,kt=Math.min(kt,s+1),kt%2&&(u==="reverse"?(gn=1-gn,a&&(gn-=a/U)):u==="mirror"&&(Ee=Y)),Te=Oo(0,1,gn)*U}const Me=we?{done:!1,value:r[0]}:Ee.next(Te);j&&(Me.value=j(Me.value));let{done:tt}=Me;!we&&M!==null&&(tt=E>=0?ie>=V:ie<=0);const rt=S===null&&(x==="finished"||x==="running"&&tt);return g&&g(Me.value),rt&&se(),Me},Ce=()=>{D&&D.stop(),D=void 0},je=()=>{x="idle",Ce(),b(),L(),k=O=null},se=()=>{x="finished",m&&m(),Ce(),b()},_e=()=>{if(I)return;D||(D=t(Ie));const B=D.now();c&&c(),S!==null?k=B-S:(!k||x==="finished")&&(k=B),x==="finished"&&L(),O=k,S=null,x="running",D.start()};n&&_e();const ue={then(B,ee){return P.then(B,ee)},get time(){return vs(ie)},set time(B){B=ja(B),ie=B,S!==null||!D||E===0?S=B:k=D.now()-B/E},get duration(){const B=H.calculatedDuration===null?GC(H):H.calculatedDuration;return vs(B)},get speed(){return E},set speed(B){B===E||!D||(E=B,ue.time=vs(ie))},get state(){return x},play:_e,pause:()=>{x="paused",S=ie},stop:()=>{I=!0,x!=="idle"&&(x="idle",h&&h(),je())},cancel:()=>{O!==null&&Ie(O),je()},complete:()=>{x="finished"},sample:B=>(k=0,Ie(B))};return ue}function Jz(n){let e;return()=>(e===void 0&&(e=n()),e)}const Zz=Jz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eW=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gf=10,tW=2e4,nW=(n,e)=>e.type==="spring"||n==="backgroundColor"||!fD(e.ease);function rW(n,e,{onUpdate:t,onComplete:r,...i}){if(!(Zz()&&eW.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,c,h=!1;const m=()=>{c=new Promise(A=>{u=A})};m();let{keyframes:g,duration:v=300,ease:E,times:I}=i;if(nW(e,i)){const A=lm({...i,repeat:0,delay:0});let j={done:!1,value:g[0]};const H=[];let Y=0;for(;!j.done&&Y<tW;)j=A.sample(Y),H.push(j.value),Y+=Gf;I=void 0,g=H,v=Y-Gf,E="linear"}const b=hz(n.owner.current,e,g,{...i,duration:v,ease:E,times:I}),P=()=>{h=!1,b.cancel()},L=()=>{h=!0,Bt.update(P),u(),m()};return b.onfinish=()=>{h||(n.set(fz(g,i)),r&&r(),L())},{then(A,j){return c.then(A,j)},attachTimeline(A){return b.timeline=A,b.onfinish=null,on},get time(){return vs(b.currentTime||0)},set time(A){b.currentTime=ja(A)},get speed(){return b.playbackRate},set speed(A){b.playbackRate=A},get duration(){return vs(v)},play:()=>{a||(b.play(),Cs(P))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:A}=b;if(A){const j=lm({...i,autoplay:!1});n.setWithVelocity(j.sample(A-Gf).value,j.sample(A).value,Gf)}L()},complete:()=>{h||b.finish()},cancel:L}}function iW({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:on,pause:on,stop:on,then:s=>(s(),Promise.resolve()),cancel:on,complete:on});return e?lm({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const sW={type:"spring",stiffness:500,damping:25,restSpeed:10},oW=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),aW={type:"keyframes",duration:.8},lW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uW=(n,{keyframes:e})=>e.length>2?aW:ll.has(n)?n.startsWith("scale")?oW(e[1]):sW:lW,v_=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Lo.test(e)||e==="0")&&!e.startsWith("url(")),cW=new Set(["brightness","contrast","saturate","opacity"]);function dW(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Ym)||[];if(!r)return n;const i=t.replace(r,"");let s=cW.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const hW=/([a-z-]*)\(.*?\)/g,__={...Lo,getAnimatableNone:n=>{const e=n.match(hW);return e?e.map(dW).join(" "):n}},fW={...X1,color:Qn,backgroundColor:Qn,outlineColor:Qn,fill:Qn,stroke:Qn,borderColor:Qn,borderTopColor:Qn,borderRightColor:Qn,borderBottomColor:Qn,borderLeftColor:Qn,filter:__,WebkitFilter:__},SE=n=>fW[n];function LD(n,e){let t=SE(n);return t!==__&&(t=Lo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const FD=n=>/^0[^.\s]+$/.test(n);function pW(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||FD(n)}function mW(n,e,t,r){const i=v_(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let u;const c=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),pW(s[h])&&c.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(u=s[h]);if(i&&c.length&&u)for(let h=0;h<c.length;h++){const m=c[h];s[m]=LD(e,u)}return s}function gW({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:c,elapsed:h,...m}){return!!Object.keys(m).length}function IE(n,e){return n[e]||n.default||n}const yW={skipAnimations:!1},CE=(n,e,t,r={})=>i=>{const s=IE(r,n)||{},a=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ja(a);const c=mW(e,n,t,s),h=c[0],m=c[c.length-1],g=v_(n,h),v=v_(n,m);let E={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:I=>{e.set(I),s.onUpdate&&s.onUpdate(I)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(gW(s)||(E={...E,...uW(n,E)}),E.duration&&(E.duration=ja(E.duration)),E.repeatDelay&&(E.repeatDelay=ja(E.repeatDelay)),!g||!v||dz.current||s.type===!1||yW.skipAnimations)return iW(E);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const I=rW(e,n,E);if(I)return I}return lm(E)};function um(n){return!!(lr(n)&&n.add)}const UD=n=>/^\-?\d*\.?\d+$/.test(n);function PE(n,e){n.indexOf(e)===-1&&n.push(e)}function bE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class AE{constructor(){this.subscriptions=[]}add(e){return PE(this.subscriptions,e),()=>bE(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vW=n=>!isNaN(parseFloat(n));class _W{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=jn;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Bt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Bt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=vW(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new AE);const r=this.events[e].add(t);return e==="change"?()=>{r(),Bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?VD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ju(n,e){return new _W(n,e)}const jD=n=>e=>e.test(n),wW={test:n=>n==="auto",parse:n=>n},BD=[ul,Qe,ji,lo,P9,C9,wW],ed=n=>BD.find(jD(n)),EW=[...BD,Qn,Lo],TW=n=>EW.find(jD(n));function SW(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ju(t))}function IW(n,e){const t=Jm(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const u=B9(s[a]);SW(n,a,u)}}function CW(n,e,t){var r,i;const s=Object.keys(e).filter(u=>!n.hasValue(u)),a=s.length;if(a)for(let u=0;u<a;u++){const c=s[u],h=e[c];let m=null;Array.isArray(h)&&(m=h[0]),m===null&&(m=(i=(r=t[c])!==null&&r!==void 0?r:n.readValue(c))!==null&&i!==void 0?i:e[c]),m!=null&&(typeof m=="string"&&(UD(m)||FD(m))?m=parseFloat(m):!TW(m)&&Lo.test(h)&&(m=LD(c,h)),n.addValue(c,ju(m,{owner:n})),t[c]===void 0&&(t[c]=m),m!==null&&n.setBaseTarget(c,m))}}function PW(n,e){return e?(e[n]||e.default||e).from:void 0}function bW(n,e,t){const r={};for(const i in n){const s=PW(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function AW({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function xW(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function $D(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=n.makeTargetAnimatable(e);const c=n.getValue("willChange");r&&(s=r);const h=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in u){const v=n.getValue(g),E=u[g];if(!v||E===void 0||m&&AW(m,g))continue;const I={delay:t,elapsed:0,...IE(s||{},g)};if(window.HandoffAppearAnimations){const L=n.getProps()[z1];if(L){const D=window.HandoffAppearAnimations(L,g,v,Bt);D!==null&&(I.elapsed=D,I.isHandoff=!0)}}let b=!I.isHandoff&&!xW(v,E);if(I.type==="spring"&&(v.getVelocity()||I.velocity)&&(b=!1),v.animation&&(b=!1),b)continue;v.start(CE(g,v,E,n.shouldReduceMotion&&ll.has(g)?{type:!1}:I));const P=v.animation;um(c)&&(c.add(g),P.then(()=>c.remove(g))),h.push(P)}return a&&Promise.all(h).then(()=>{a&&IW(n,a)}),h}function w_(n,e,t={}){const r=Jm(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all($D(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return RW(n,e,h+c,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[c,h]=u==="beforeChildren"?[s,a]:[a,s];return c().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function RW(n,e,t=0,r=0,i=1,s){const a=[],u=(n.variantChildren.size-1)*r,c=i===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(DW).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(w_(h,e,{...s,delay:t+c(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function DW(n,e){return n.sortNodePosition(e)}function kW(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>w_(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=w_(n,e,t);else{const i=typeof e=="function"?Jm(n,e,t.custom):e;r=Promise.all($D(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const NW=[...cE].reverse(),VW=cE.length;function MW(n){return e=>Promise.all(e.map(({animation:t,options:r})=>kW(n,t,r)))}function OW(n){let e=MW(n);const t=FW();let r=!0;const i=(c,h)=>{const m=Jm(n,h);if(m){const{transition:g,transitionEnd:v,...E}=m;c={...c,...E,...v}}return c};function s(c){e=c(n)}function a(c,h){const m=n.getProps(),g=n.getVariantContext(!0)||{},v=[],E=new Set;let I={},b=1/0;for(let L=0;L<VW;L++){const D=NW[L],A=t[D],j=m[D]!==void 0?m[D]:g[D],H=Wd(j),Y=D===h?A.isActive:null;Y===!1&&(b=L);let x=j===g[D]&&j!==m[D]&&H;if(x&&r&&n.manuallyAnimateOnMount&&(x=!1),A.protectedKeys={...I},!A.isActive&&Y===null||!j&&!A.prevProp||Km(j)||typeof j=="boolean")continue;let k=LW(A.prevProp,j)||D===h&&A.isActive&&!x&&H||L>b&&H,O=!1;const M=Array.isArray(j)?j:[j];let U=M.reduce(i,{});Y===!1&&(U={});const{prevResolvedValues:V={}}=A,ie={...V,...U},Ie=Ce=>{k=!0,E.has(Ce)&&(O=!0,E.delete(Ce)),A.needsAnimating[Ce]=!0};for(const Ce in ie){const je=U[Ce],se=V[Ce];if(I.hasOwnProperty(Ce))continue;let _e=!1;sm(je)&&sm(se)?_e=!dD(je,se):_e=je!==se,_e?je!==void 0?Ie(Ce):E.add(Ce):je!==void 0&&E.has(Ce)?Ie(Ce):A.protectedKeys[Ce]=!0}A.prevProp=j,A.prevResolvedValues=U,A.isActive&&(I={...I,...U}),r&&n.blockInitialAnimation&&(k=!1),k&&(!x||O)&&v.push(...M.map(Ce=>({animation:Ce,options:{type:D,...c}})))}if(E.size){const L={};E.forEach(D=>{const A=n.getBaseTarget(D);A!==void 0&&(L[D]=A)}),v.push({animation:L})}let P=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(v):Promise.resolve()}function u(c,h,m){var g;if(t[c].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(E=>{var I;return(I=E.animationState)===null||I===void 0?void 0:I.setActive(c,h)}),t[c].isActive=h;const v=a(m,c);for(const E in t)t[E].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t}}function LW(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!dD(e,n):!1}function Ea(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FW(){return{animate:Ea(!0),whileInView:Ea(),whileHover:Ea(),whileTap:Ea(),whileDrag:Ea(),whileFocus:Ea(),exit:Ea()}}class UW extends Ho{constructor(e){super(e),e.animationState||(e.animationState=OW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Km(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let jW=0;class BW extends Ho{constructor(){super(...arguments),this.id=jW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $W={animation:{Feature:UW},exit:{Feature:BW}},KC=(n,e)=>Math.abs(n-e);function zW(n,e){const t=KC(n.x,e.x),r=KC(n.y,e.y);return Math.sqrt(t**2+r**2)}class zD{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=hv(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,E=zW(g.offset,{x:0,y:0})>=3;if(!v&&!E)return;const{point:I}=g,{timestamp:b}=jn;this.history.push({...I,timestamp:b});const{onStart:P,onMove:L}=this.handlers;v||(P&&P(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=dv(v,this.transformPagePoint),Bt.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:E,onSessionEnd:I,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=hv(g.type==="pointercancel"?this.lastMoveEventInfo:dv(v,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,P),I&&I(g,P)},!oD(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=Xm(e),u=dv(a,this.transformPagePoint),{point:c}=u,{timestamp:h}=jn;this.history=[{...c,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,hv(u,this.history)),this.removeListeners=Ao(ys(this.contextWindow,"pointermove",this.handlePointerMove),ys(this.contextWindow,"pointerup",this.handlePointerUp),ys(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cs(this.updatePoint)}}function dv(n,e){return e?{point:e(n.point)}:n}function QC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function hv({point:n},e){return{point:n,delta:QC(n,WD(e)),offset:QC(n,WW(e)),velocity:HW(e,.1)}}function WW(n){return n[0]}function WD(n){return n[n.length-1]}function HW(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=WD(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>ja(e)));)t--;if(!r)return{x:0,y:0};const s=vs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Cr(n){return n.max-n.min}function E_(n,e=0,t=.01){return Math.abs(n-e)<=t}function YC(n,e,t,r=.5){n.origin=r,n.originPoint=Qt(e.min,e.max,n.origin),n.scale=Cr(t)/Cr(e),(E_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Qt(t.min,t.max,n.origin)-n.originPoint,(E_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Sd(n,e,t,r){YC(n.x,e.x,t.x,r?r.originX:void 0),YC(n.y,e.y,t.y,r?r.originY:void 0)}function XC(n,e,t){n.min=t.min+e.min,n.max=n.min+Cr(e)}function qW(n,e,t){XC(n.x,e.x,t.x),XC(n.y,e.y,t.y)}function JC(n,e,t){n.min=e.min-t.min,n.max=n.min+Cr(e)}function Id(n,e,t){JC(n.x,e.x,t.x),JC(n.y,e.y,t.y)}function GW(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Qt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Qt(t,n,r.max):Math.min(n,t)),n}function ZC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function KW(n,{top:e,left:t,bottom:r,right:i}){return{x:ZC(n.x,t,i),y:ZC(n.y,e,r)}}function eP(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function QW(n,e){return{x:eP(n.x,e.x),y:eP(n.y,e.y)}}function YW(n,e){let t=.5;const r=Cr(n),i=Cr(e);return i>r?t=qd(e.min,e.max-r,n.min):r>i&&(t=qd(n.min,n.max-i,e.min)),Oo(0,1,t)}function XW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const T_=.35;function JW(n=T_){return n===!1?n=0:n===!0&&(n=T_),{x:tP(n,"left","right"),y:tP(n,"top","bottom")}}function tP(n,e,t){return{min:nP(n,e),max:nP(n,t)}}function nP(n,e){return typeof n=="number"?n:n[e]||0}const rP=()=>({translate:0,scale:1,origin:0,originPoint:0}),du=()=>({x:rP(),y:rP()}),iP=()=>({min:0,max:0}),fn=()=>({x:iP(),y:iP()});function Fr(n){return[n("x"),n("y")]}function HD({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function ZW({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function eH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function fv(n){return n===void 0||n===1}function S_({scale:n,scaleX:e,scaleY:t}){return!fv(n)||!fv(e)||!fv(t)}function ba(n){return S_(n)||qD(n)||n.z||n.rotate||n.rotateX||n.rotateY}function qD(n){return sP(n.x)||sP(n.y)}function sP(n){return n&&n!=="0%"}function cm(n,e,t){const r=n-t,i=e*r;return t+i}function oP(n,e,t,r,i){return i!==void 0&&(n=cm(n,i,r)),cm(n,t,r)+e}function I_(n,e=0,t=1,r,i){n.min=oP(n.min,e,t,r,i),n.max=oP(n.max,e,t,r,i)}function GD(n,{x:e,y:t}){I_(n.x,e.translate,e.scale,e.originPoint),I_(n.y,t.translate,t.scale,t.originPoint)}function tH(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&hu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,GD(n,a)),r&&ba(s.latestValues)&&hu(n,s.latestValues))}e.x=aP(e.x),e.y=aP(e.y)}function aP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function uo(n,e){n.min=n.min+e,n.max=n.max+e}function lP(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=Qt(n.min,n.max,s);I_(n,e[t],e[r],a,e.scale)}const nH=["x","scaleX","originX"],rH=["y","scaleY","originY"];function hu(n,e){lP(n.x,e,nH),lP(n.y,e,rH)}function KD(n,e){return HD(eH(n.getBoundingClientRect(),e))}function iH(n,e,t){const r=KD(n,t),{scroll:i}=e;return i&&(uo(r.x,i.offset.x),uo(r.y,i.offset.y)),r}const QD=({current:n})=>n?n.ownerDocument.defaultView:null,sH=new WeakMap;class oH{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Xm(m,"page").point)},s=(m,g)=>{const{drag:v,dragPropagation:E,onDragStart:I}=this.getProps();if(v&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=lD(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fr(P=>{let L=this.getAxisMotionValue(P).get()||0;if(ji.test(L)){const{projection:D}=this.visualElement;if(D&&D.layout){const A=D.layout.layoutBox[P];A&&(L=Cr(A)*(parseFloat(L)/100))}}this.originPoint[P]=L}),I&&Bt.update(()=>I(m,g),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:E,onDirectionLock:I,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:P}=g;if(E&&this.currentDirection===null){this.currentDirection=aH(P),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",g.point,P),this.updateAxis("y",g.point,P),this.visualElement.render(),b&&b(m,g)},u=(m,g)=>this.stop(m,g),c=()=>Fr(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new zD(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:QD(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Bt.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Kf(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=GW(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&uu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=KW(i.layoutBox,t):this.constraints=!1,this.elastic=JW(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Fr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=XW(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!uu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=iH(r,i.root,this.visualElement.getTransformPagePoint());let a=QW(i.layout.layoutBox,s);if(t){const u=t(ZW(a));this.hasMutatedConstraints=!!u,u&&(a=HD(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},h=Fr(m=>{if(!Kf(m,t,this.currentDirection))return;let g=c&&c[m]||{};a&&(g={min:0,max:0});const v=i?200:1e6,E=i?40:1e7,I={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,I)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(CE(e,r,0,t))}stopAnimation(){Fr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Fr(t=>{const{drag:r}=this.getProps();if(!Kf(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t];s.set(e[t]-Qt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!uu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Fr(a=>{const u=this.getAxisMotionValue(a);if(u){const c=u.get();i[a]=YW({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Fr(a=>{if(!Kf(a,e,null))return;const u=this.getAxisMotionValue(a),{min:c,max:h}=this.constraints[a];u.set(Qt(c,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;sH.set(this.visualElement,this);const e=this.visualElement.current,t=ys(e,"pointerdown",c=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();uu(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=gs(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Fr(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=c[m].translate,g.set(g.get()+c[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=T_,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function Kf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function aH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class lH extends Ho{constructor(e){super(e),this.removeGroupControls=on,this.removeListeners=on,this.controls=new oH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||on}unmount(){this.removeGroupControls(),this.removeListeners()}}const uP=n=>(e,t)=>{n&&Bt.update(()=>n(e,t))};class uH extends Ho{constructor(){super(...arguments),this.removePointerDownListener=on}onPointerDown(e){this.session=new zD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:uP(e),onStart:uP(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Bt.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=ys(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function cH(){const n=R.useContext(lE);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=R.useId();return R.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const mp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const td={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Qe.test(n))n=parseFloat(n);else return n;const t=cP(n,e.target.x),r=cP(n,e.target.y);return`${t}% ${r}%`}},dH={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Lo.parse(n);if(i.length>5)return r;const s=Lo.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,c=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=c;const h=Qt(u,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class hH extends pn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;v9(fH),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Bt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function YD(n){const[e,t]=cH(),r=R.useContext(H1);return pn.createElement(hH,{...n,layoutGroup:r,switchLayoutGroup:R.useContext(q1),isPresent:e,safeToRemove:t})}const fH={borderRadius:{...td,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:td,borderTopRightRadius:td,borderBottomLeftRadius:td,borderBottomRightRadius:td,boxShadow:dH},XD=["TopLeft","TopRight","BottomLeft","BottomRight"],pH=XD.length,dP=n=>typeof n=="string"?parseFloat(n):n,hP=n=>typeof n=="number"||Qe.test(n);function mH(n,e,t,r,i,s){i?(n.opacity=Qt(0,t.opacity!==void 0?t.opacity:1,gH(r)),n.opacityExit=Qt(e.opacity!==void 0?e.opacity:1,0,yH(r))):s&&(n.opacity=Qt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<pH;a++){const u=`border${XD[a]}Radius`;let c=fP(e,u),h=fP(t,u);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||hP(c)===hP(h)?(n[u]=Math.max(Qt(dP(c),dP(h),r),0),(ji.test(h)||ji.test(c))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=Qt(e.rotate||0,t.rotate||0,r))}function fP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const gH=JD(0,.5,wD),yH=JD(.5,.95,on);function JD(n,e,t){return r=>r<n?0:r>e?1:t(qd(n,e,r))}function pP(n,e){n.min=e.min,n.max=e.max}function Lr(n,e){pP(n.x,e.x),pP(n.y,e.y)}function mP(n,e,t,r,i){return n-=e,n=cm(n,1/t,r),i!==void 0&&(n=cm(n,1/i,r)),n}function vH(n,e=0,t=1,r=.5,i,s=n,a=n){if(ji.test(e)&&(e=parseFloat(e),e=Qt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Qt(s.min,s.max,r);n===s&&(u-=e),n.min=mP(n.min,e,t,u,i),n.max=mP(n.max,e,t,u,i)}function gP(n,e,[t,r,i],s,a){vH(n,e[t],e[r],e[i],e.scale,s,a)}const _H=["x","scaleX","originX"],wH=["y","scaleY","originY"];function yP(n,e,t,r){gP(n.x,e,_H,t?t.x:void 0,r?r.x:void 0),gP(n.y,e,wH,t?t.y:void 0,r?r.y:void 0)}function vP(n){return n.translate===0&&n.scale===1}function ZD(n){return vP(n.x)&&vP(n.y)}function EH(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function ek(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function _P(n){return Cr(n.x)/Cr(n.y)}class TH{constructor(){this.members=[]}add(e){PE(this.members,e),e.scheduleRender()}remove(e){if(bE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wP(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:h,rotateY:m}=t;c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const SH=(n,e)=>n.depth-e.depth;class IH{constructor(){this.children=[],this.isDirty=!1}add(e){PE(this.children,e),this.isDirty=!0}remove(e){bE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SH),this.isDirty=!1,this.children.forEach(e)}}function CH(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Cs(r),n(s-e))};return Bt.read(r,!0),()=>Cs(r)}function PH(n){window.MotionDebug&&window.MotionDebug.record(n)}function bH(n){return n instanceof SVGElement&&n.tagName!=="svg"}function AH(n,e,t){const r=lr(n)?n:ju(n);return r.start(CE("",r,e,t)),r.animation}const EP=["","X","Y","Z"],xH={visibility:"hidden"},TP=1e3;let RH=0;const Aa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function tk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=RH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Aa.totalNodes=Aa.resolvedTargetDeltas=Aa.recalculatedProjection=0,this.nodes.forEach(NH),this.nodes.forEach(FH),this.nodes.forEach(UH),this.nodes.forEach(VH),PH(Aa)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new IH)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new AE),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const c=this.eventHandlers.get(a);c&&c.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=bH(a),this.instance=a;const{layoutId:c,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||c)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=CH(v,250),mp.hasAnimatedSinceResize&&(mp.hasAnimatedSinceResize=!1,this.nodes.forEach(IP))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:E,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||WH,{onLayoutAnimationStart:P,onLayoutAnimationComplete:L}=m.getProps(),D=!this.targetLayout||!ek(this.targetLayout,I)||E,A=!v&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||v&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,A);const j={...IE(b,"layout"),onPlay:P,onComplete:L};(m.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else v||IP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jH),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SP);return}this.isUpdating||this.nodes.forEach(OH),this.isUpdating=!1,this.nodes.forEach(LH),this.nodes.forEach(DH),this.nodes.forEach(kH),this.clearAllSnapshots();const u=performance.now();jn.delta=Oo(0,1e3/60,u-jn.timestamp),jn.timestamp=u,jn.isProcessing=!0,rv.update.process(jn),rv.preRender.process(jn),rv.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(MH),this.sharedNodes.forEach(BH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!ZD(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||ba(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return a&&(c=this.removeTransform(c)),HH(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return fn();const u=a.measureViewportBox(),{scroll:c}=this.root;return c&&(uo(u.x,c.offset.x),uo(u.y,c.offset.y)),u}removeElementScroll(a){const u=fn();Lr(u,a);for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:m,options:g}=h;if(h!==this.root&&m&&g.layoutScroll){if(m.isRoot){Lr(u,a);const{scroll:v}=this.root;v&&(uo(u.x,-v.offset.x),uo(u.y,-v.offset.y))}uo(u.x,m.offset.x),uo(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const c=fn();Lr(c,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&hu(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ba(m.latestValues)&&hu(c,m.latestValues)}return ba(this.latestValues)&&hu(c,this.latestValues),c}removeTransform(a){const u=fn();Lr(u,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!ba(h.latestValues))continue;S_(h.latestValues)&&h.updateSnapshot();const m=fn(),g=h.measurePageBox();Lr(m,g),yP(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ba(this.latestValues)&&yP(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=jn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),Id(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),GD(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),Id(this.relativeTargetOrigin,this.target,E.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Aa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||S_(this.parent.latestValues)||qD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Lr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,E=this.treeScale.y;tH(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:I}=u;if(!I){this.projectionTransform&&(this.projectionDelta=du(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=du(),this.projectionDeltaWithTransform=du());const b=this.projectionTransform;Sd(this.projectionDelta,this.layoutCorrected,I,this.latestValues),this.projectionTransform=wP(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==v||this.treeScale.y!==E)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I)),Aa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const c=this.snapshot,h=c?c.latestValues:{},m={...this.latestValues},g=du();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=fn(),E=c?c.source:void 0,I=this.layout?this.layout.source:void 0,b=E!==I,P=this.getStack(),L=!P||P.members.length<=1,D=!!(b&&!L&&this.options.crossfade===!0&&!this.path.some(zH));this.animationProgress=0;let A;this.mixTargetDelta=j=>{const H=j/1e3;CP(g.x,a.x,H),CP(g.y,a.y,H),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Id(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$H(this.relativeTarget,this.relativeTargetOrigin,v,H),A&&EH(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=fn()),Lr(A,this.relativeTarget)),b&&(this.animationValues=m,mH(m,h,this.latestValues,H,D,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Bt.update(()=>{mp.hasAnimatedSinceResize=!0,this.currentAnimation=AH(0,TP,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:c,layout:h,latestValues:m}=a;if(!(!u||!c||!h)){if(this!==a&&this.layout&&h&&nk(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||fn();const g=Cr(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+g;const v=Cr(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+v}Lr(u,c),hu(u,m),Sd(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new TH),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(u=!0),!u)return;const h={};for(let m=0;m<EP.length;m++){const g="rotate"+EP[m];c[g]&&(h[g]=c[g],a.setStaticValue(g,0))}a.render();for(const m in h)a.setStaticValue(m,h[m]);a.scheduleRender()}getProjectionStyles(a){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xH;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=pp(a?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=pp(a?.pointerEvents)||""),this.hasProjected&&!ba(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=wP(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:E,y:I}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${I.origin*100}% 0`,g.animationValues?h.opacity=g===this?(c=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in rm){if(v[b]===void 0)continue;const{correct:P,applyTo:L}=rm[b],D=h.transform==="none"?v[b]:P(v[b],g);if(L){const A=L.length;for(let j=0;j<A;j++)h[L[j]]=D}else h[b]=D}return this.options.layoutId&&(h.pointerEvents=g===this?pp(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(SP),this.root.sharedNodes.clear()}}}function DH(n){n.updateLayout()}function kH(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Fr(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],E=Cr(v);v.min=r[g].min,v.max=v.min+E}):nk(s,t.layoutBox,r)&&Fr(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],E=Cr(r[g]);v.max=v.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+E)});const u=du();Sd(u,r,t.layoutBox);const c=du();a?Sd(c,n.applyTransform(i,!0),t.measuredBox):Sd(c,r,t.layoutBox);const h=!ZD(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:E}=g;if(v&&E){const I=fn();Id(I,t.layoutBox,v.layoutBox);const b=fn();Id(b,r,E.layoutBox),ek(I,b)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=I,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function NH(n){Aa.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function VH(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function MH(n){n.clearSnapshot()}function SP(n){n.clearMeasurements()}function OH(n){n.isLayoutDirty=!1}function LH(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function IP(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function FH(n){n.resolveTargetDelta()}function UH(n){n.calcProjection()}function jH(n){n.resetRotation()}function BH(n){n.removeLeadSnapshot()}function CP(n,e,t){n.translate=Qt(e.translate,0,t),n.scale=Qt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function PP(n,e,t,r){n.min=Qt(e.min,t.min,r),n.max=Qt(e.max,t.max,r)}function $H(n,e,t,r){PP(n.x,e.x,t.x,r),PP(n.y,e.y,t.y,r)}function zH(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const WH={duration:.45,ease:[.4,0,.1,1]},bP=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),AP=bP("applewebkit/")&&!bP("chrome/")?Math.round:on;function xP(n){n.min=AP(n.min),n.max=AP(n.max)}function HH(n){xP(n.x),xP(n.y)}function nk(n,e,t){return n==="position"||n==="preserve-aspect"&&!E_(_P(e),_P(t),.2)}const qH=tk({attachResizeListener:(n,e)=>gs(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pv={current:void 0},rk=tk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!pv.current){const n=new qH({});n.mount(window),n.setOptions({layoutScroll:!0}),pv.current=n}return pv.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),GH={pan:{Feature:uH},drag:{Feature:lH,ProjectionNode:rk,MeasureLayout:YD}},KH=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function QH(n){const e=KH.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function C_(n,e,t=1){const[r,i]=QH(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return UD(a)?parseFloat(a):a}else return p_(i)?C_(i,e,t+1):i}function YH(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!p_(s))return;const a=C_(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!p_(s))continue;const a=C_(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const XH=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ik=n=>XH.has(n),JH=n=>Object.keys(n).some(ik),RP=n=>n===ul||n===Qe,DP=(n,e)=>parseFloat(n.split(", ")[e]),kP=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return DP(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?DP(s[1],n):0}},ZH=new Set(["x","y","z"]),eq=gh.filter(n=>!ZH.has(n));function tq(n){const e=[];return eq.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Bu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:kP(4,13),y:kP(5,14)};Bu.translateX=Bu.x;Bu.translateY=Bu.y;const nq=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,u={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{u[h]=Bu[h](r,s)}),e.render();const c=e.measureViewportBox();return t.forEach(h=>{const m=e.getValue(h);m&&m.jump(u[h]),n[h]=Bu[h](c,s)}),n},rq=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(ik);let s=[],a=!1;const u=[];if(i.forEach(c=>{const h=n.getValue(c);if(!n.hasValue(c))return;let m=t[c],g=ed(m);const v=e[c];let E;if(sm(v)){const I=v.length,b=v[0]===null?1:0;m=v[b],g=ed(m);for(let P=b;P<I&&v[P]!==null;P++)E?_E(ed(v[P])===E):E=ed(v[P])}else E=ed(v);if(g!==E)if(RP(g)&&RP(E)){const I=h.get();typeof I=="string"&&h.set(parseFloat(I)),typeof v=="string"?e[c]=parseFloat(v):Array.isArray(v)&&E===Qe&&(e[c]=v.map(parseFloat))}else g?.transform&&E?.transform&&(m===0||v===0)?m===0?h.set(E.transform(m)):e[c]=g.transform(v):(a||(s=tq(n),a=!0),u.push(c),r[c]=r[c]!==void 0?r[c]:e[c],h.jump(v))}),u.length){const c=u.indexOf("height")>=0?window.pageYOffset:null,h=nq(e,n,u);return s.length&&s.forEach(([m,g])=>{n.getValue(m).set(g)}),n.render(),Gm&&c!==null&&window.scrollTo({top:c}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function iq(n,e,t,r){return JH(e)?rq(n,e,t,r):{target:e,transitionEnd:r}}const sq=(n,e,t,r)=>{const i=YH(n,e,r);return e=i.target,r=i.transitionEnd,iq(n,e,t,r)},P_={current:null},sk={current:!1};function oq(){if(sk.current=!0,!!Gm)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>P_.current=n.matches;n.addListener(e),e()}else P_.current=!1}function aq(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(lr(s))n.addValue(i,s),um(r)&&r.add(i);else if(lr(a))n.addValue(i,ju(s,{owner:n})),um(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const u=n.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,ju(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const NP=new WeakMap,ok=Object.keys(Hd),lq=ok.length,VP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],uq=dE.length;class cq{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Bt.render(this.render,!1,!0);const{latestValues:u,renderState:c}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=Qm(t),this.isVariantNode=W1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{});for(const g in m){const v=m[g];u[g]!==void 0&&lr(v)&&(v.set(u[g],!1),um(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,NP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),sk.current||oq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:P_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){NP.delete(this.current),this.projection&&this.projection.unmount(),Cs(this.notifyUpdate),Cs(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=ll.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Bt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,u;for(let c=0;c<lq;c++){const h=ok[c],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:E}=Hd[h];v&&(a=v),m(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),E&&(u=E))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:h,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:E}=t;this.projection.setOptions({layoutId:c,layout:h,alwaysMeasureLayout:!!m||g&&uu(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:E})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<VP.length;r++){const i=VP[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=aq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<uq;r++){const i=dE[r],s=this.props[i];(Wd(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=ju(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=vE(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!lr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new AE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class ak extends cq{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=bW(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){CW(this,r,a);const u=sq(this,r,a,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function dq(n){return window.getComputedStyle(n)}class hq extends ak{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ll.has(t)){const r=SE(t);return r&&r.default||0}else{const r=dq(e),i=(Q1(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return KD(e,t)}build(e,t,r,i){fE(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return yE(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){tD(e,t,r,i)}}class fq extends ak{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ll.has(t)){const r=SE(t);return r&&r.default||0}return t=nD.has(t)?t:uE(t),e.getAttribute(t)}measureInstanceViewportBox(){return fn()}scrapeMotionValuesFromProps(e,t){return iD(e,t)}build(e,t,r,i){mE(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){rD(e,t,r,i)}mount(e){this.isSVGTag=gE(e.tagName),super.mount(e)}}const pq=(n,e)=>hE(n)?new fq(e,{enableHardwareAcceleration:!1}):new hq(e,{enableHardwareAcceleration:!0}),mq={layout:{ProjectionNode:rk,MeasureLayout:YD}},gq={...$W,...lz,...GH,...mq},Qf=g9((n,e)=>Q9(n,e,gq,pq));function yq(){const[n,e]=R.useState(!1),[t,r]=R.useState(null);R.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let a,u;const c=h=>{h&&h.addEventListener("statechange",()=>{h.state==="installed"&&navigator.serviceWorker.controller&&(r(h),e(!0))})};return navigator.serviceWorker.ready.then(h=>{a=h,h.waiting&&(r(h.waiting),e(!0)),u=()=>{c(h.installing)},h.addEventListener("updatefound",u)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),a&&u&&a.removeEventListener("updatefound",u)}},[]);const i=()=>{t&&t.postMessage({type:"SKIP_WAITING"}),e(!1)};return n?G.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:G.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[G.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),G.jsxs("div",{className:"flex items-center justify-end gap-2",children:[G.jsx(vu,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),G.jsx(vu,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}function vq(){return R.useEffect(()=>{const n=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${e}px`)};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),null}const _q=R.lazy(()=>$i(()=>import("./AuthPage-C5Iee6s8.js"),__vite__mapDeps([0,1,2,3]))),wq=R.lazy(()=>$i(()=>import("./DashboardPage-oDnSWUBf.js"),__vite__mapDeps([4,5,6,7,8,9,10,1,11,12,3,13]))),Eq=R.lazy(()=>$i(()=>import("./ArchivedCyclesPage-D0vFe0-0.js"),__vite__mapDeps([14,8,15,7,6,9]))),Tq=R.lazy(()=>$i(()=>import("./CycleDetailPage-MoYBqsWD.js"),__vite__mapDeps([16,9,8,6,7,15,17,5,10,1,11,12,3,18]))),Sq=R.lazy(()=>$i(()=>import("./SettingsPage-DYzmoz43.js"),__vite__mapDeps([19,1,11,8,2]))),Iq=R.lazy(()=>$i(()=>import("./ChartPage-BBb8zx7B.js"),__vite__mapDeps([20,21,11,8,7,13,12,10,1,6,3,18]))),Cq=R.lazy(()=>$i(()=>import("./RecordsPage-BpP3kG0n.js"),__vite__mapDeps([17,5,6,7,8,9,10,1,11,12,3,15])));function tu({children:n}){const{user:e}=Bm();return e?n:G.jsx(yv,{to:"/auth",replace:!0})}function Pq(){const{user:n,loadingAuth:e}=Bm(),t=Fo();if(e)return G.jsx(a_,{children:G.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[G.jsx(Qf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),G.jsx(Qf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const r=n?G.jsx(Pa,{children:G.jsx("div",{className:"flex min-h-app items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):G.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[G.jsx(Qf.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),G.jsx(Qf.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return G.jsx(a_,{children:G.jsx(R.Suspense,{fallback:r,children:G.jsx(i5,{children:G.jsx(u6,{FallbackComponent:l1,children:G.jsxs(gV,{children:[G.jsx(ds,{path:"/auth",element:n?G.jsx(yv,{to:"/",replace:!0}):G.jsx(_q,{})}),G.jsx(ds,{path:"/",element:G.jsx(tu,{children:G.jsx(Pa,{children:G.jsx(wq,{})})})}),G.jsx(ds,{path:"/chart/:cycleId?",element:G.jsx(tu,{children:G.jsx(Iq,{})})}),G.jsx(ds,{path:"/records",element:G.jsx(tu,{children:G.jsx(Pa,{children:G.jsx(Cq,{})})})}),G.jsx(ds,{path:"/archived-cycles",element:G.jsx(tu,{children:G.jsx(Pa,{children:G.jsx(Eq,{})})})}),G.jsx(ds,{path:"/settings",element:G.jsx(tu,{children:G.jsx(Pa,{children:G.jsx(Sq,{})})})}),G.jsx(ds,{path:"/cycle/:cycleId",element:G.jsx(tu,{children:G.jsx(Pa,{children:G.jsx(Tq,{})})})}),G.jsx(ds,{path:"*",element:G.jsx(yv,{to:n?"/":"/auth",replace:!0})})]})},t.pathname)})})})}function bq(){return G.jsxs(IV,{basename:"/",children:[G.jsx(vq,{}),G.jsx(yq,{}),G.jsxs(Ej,{children:[G.jsx(a6,{children:G.jsx(l6,{children:G.jsx(kV,{children:G.jsx(Pq,{})})})}),G.jsx(s9,{})]})]})}if(typeof window<"u"){const{hostname:n}=window.location;if(n.endsWith(".firebaseapp.com")){const e=new URL(window.location.href);e.hostname=n.replace(".firebaseapp.com",".web.app"),window.location.replace(e.toString())}}SN.createRoot(document.getElementById("root")).render(G.jsx(pn.StrictMode,{children:G.jsx(bq,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=new URL("sw.js","/");navigator.serviceWorker.register(n).catch(e=>{console.error("Service worker registration failed:",e)})});export{Tj as $,h6 as A,vu as B,p6 as C,hp as D,nl as E,u1 as F,g1 as G,Er as H,rl as I,zd as J,al as K,bV as L,Vq as M,n6 as N,R_ as O,Hi as P,Fo as Q,pn as R,vj as S,i9 as T,g6 as U,Pa as V,m6 as W,y6 as X,n5 as Y,Mt as Z,$i as _,V_ as a,Hn as a0,o9 as a1,Bt as a2,U9 as a3,lE as a4,H1 as a5,w3 as a6,en as a7,Xu as a8,Gp as a9,kR as aa,bj as ab,Wm as ac,N5 as ad,m1 as ae,h1 as af,d5 as ag,O5 as ah,Q6 as ai,a1 as aj,x_ as ak,Mq as al,Nq as am,YR as an,TN as ao,Gy as ap,Qc as aq,Yc as ar,rB as as,Aq as at,b_ as au,Pe as av,Hw as b,tc as c,We as d,re as e,ce as f,ct as g,sk as h,oq as i,G as j,Ye as k,ii as l,Qf as m,Aj as n,Xe as o,P_ as p,Cj as q,R as r,fs as s,f6 as t,Bm as u,xq as v,wd as w,QR as x,IB as y,Ss as z};
