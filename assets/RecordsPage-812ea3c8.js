import{c as N,b as C,r as s,j as e,m as u,B as S}from"./index-7fea14b0.js";import{R as E,D as R}from"./DeletionDialog-453a823d.js";import{D as F}from"./DataEntryForm-ad843356.js";import{a as P,f as T,p as L}from"./useCycleData-321f2a4b.js";import{D as M,a as O}from"./dialog-5eeab027.js";import{P as z}from"./plus-ffaa469b.js";import"./badge-e8164852.js";import"./eye-f4dacf7c.js";import"./input-eebcb0c4.js";import"./label-b7675640.js";import"./eye-off-ec261603.js";const I=N("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),X=()=>{const{currentCycle:a,addOrUpdateDataPoint:g,deleteRecord:y,isLoading:h}=P(),{toast:m}=C(),[f,r]=s.useState(!1),[c,i]=s.useState(null),[o,d]=s.useState(null),[n,l]=s.useState(!1),x=s.useCallback(()=>{r(!1),i(null)},[]),b=t=>{i(t),r(!0)},v=t=>{const p=a.data.find(k=>k.id===t);d(p)},j=s.useCallback(t=>{i(t)},[]),D=async t=>{l(!0);try{await g(t,c),r(!1),i(null)}catch{m({title:"Error",description:"No se pudo guardar el registro",variant:"destructive"})}finally{l(!1)}},w=async()=>{if(o){l(!0);try{await y(o.id),d(null)}catch{m({title:"Error",description:"No se pudo eliminar el registro",variant:"destructive"})}finally{l(!1)}}};return h?e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 flex items-center justify-center",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsx("p",{className:"text-center text-slate-600 text-lg",children:"Cargando..."})]}):a!=null&&a.id?e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 relative z-10",children:[e.jsxs(u.div,{className:"flex flex-col sm:flex-row justify-between items-center mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-700 mb-4 sm:mb-0 flex items-center",children:[e.jsx(I,{className:"mr-3 h-8 w-8 text-pink-500"}),"Mis Registros"]}),e.jsxs(S,{type:"button",onClick:()=>{i(null),r(!0)},className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white shadow-lg",disabled:n,style:{filter:"drop-shadow(0 6px 12px rgba(236, 72, 153, 0.3))"},children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"AÃ±adir registro"]})]}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(E,{records:a.data,onEdit:b,onDelete:v,isProcessing:n})})]}),e.jsx(M,{open:f,onOpenChange:t=>{t?r(!0):x()},children:e.jsx(O,{hideClose:!0,className:"bg-white border-pink-100 text-gray-800 w-[90vw] sm:w-auto max-w-md sm:max-w-lg md:max-w-xl max-h-[85vh] overflow-y-auto p-4 sm:p-6 rounded-2xl",children:e.jsx(F,{onSubmit:D,onCancel:x,initialData:c,cycleStartDate:a.startDate,cycleEndDate:a.endDate,isProcessing:n,isEditing:!!c,cycleData:a.data,onDateSelect:j})})}),e.jsx(R,{isOpen:!!o,onClose:()=>d(null),onConfirm:w,recordDate:o?T(L(o.isoDate),"dd/MM/yyyy"):"",isProcessing:n})]}):e.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 flex items-center justify-center",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"radial-gradient(65% 55% at 50% 32%, rgba(244,114,182,0.18) 0%, rgba(244,114,182,0.12) 35%, rgba(244,114,182,0.06) 60%, rgba(244,114,182,0) 100%)"}}),e.jsx("p",{className:"text-center text-slate-600 text-lg",children:"No hay ciclo activo."})]})};export{X as default};
