import{c as I,j as e,m as p,r as S,p as d,f as v,C as L,B as m}from"./index-52f58b78.js";import{e as B,B as h,u as R}from"./badge-9df465b8.js";import{c as A,T as F,b as O,a as q,C as z,P as H,F as y}from"./computePeakStatuses-d276643a.js";import{E as $}from"./eye-038575bd.js";import{T as Y}from"./trash-2-f191a093.js";import{D as Z,a as G,b as J,c as K,d as Q,e as U}from"./useCycleData-de3e222e.js";const V=I("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),te=({records:t,onEdit:r,onDelete:x,isProcessing:i})=>{if(!t||t.length===0)return e.jsx(p.div,{className:"text-center py-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-md rounded-3xl p-8 border border-pink-200/50 shadow-lg mx-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full flex items-center justify-center",children:e.jsx($,{className:"w-8 h-8 text-pink-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-2",children:"No hay registros"}),e.jsx("p",{className:"text-slate-500",children:"Añade tu primer registro para comenzar."})]})});const w=s=>y.find(n=>n.value===s)||y[0],k=S.useMemo(()=>A(t),[t]),_={P:"Día pico",1:"Post pico 1",2:"Post pico 2",3:"Post pico 3"},D=[...t].sort((s,n)=>d(n.isoDate)-d(s.isoDate));return e.jsx(p.div,{className:"space-y-3",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"show",children:D.map((s,n)=>{var N;const o=w(s.fertility_symbol),a=((N=s.measurements)==null?void 0:N.find(l=>l.selected))||(s.temperature_chart||s.temperature_raw?{temperature:s.temperature_chart??s.temperature_raw,temperature_corrected:s.temperature_corrected??null,time:s.timestamp?v(d(s.timestamp),"HH:mm"):null,use_corrected:s.use_corrected??!1}:null),u=(a==null?void 0:a.use_corrected)??s.use_corrected??!1,c=(a==null?void 0:a.temperature_corrected)??s.temperature_corrected??null,C=(a==null?void 0:a.temperature)??s.temperature_chart??s.temperature_raw??null,b=u&&c!==null?c:C??c,g=b!==null,T=b,P=u&&c!==null,j=k[s.isoDate],f=j&&_[j]||null;return e.jsx(p.div,{className:"bg-white/80 backdrop-blur-md border border-pink-200/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:bg-white/90 rounded-xl",variants:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}},children:e.jsxs("div",{className:"p-3 shadow-md",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-5 h-5 text-pink-500 flex-shrink-0"}),e.jsx("span",{className:"font-semibold text-slate-700 text-lg",children:v(d(s.isoDate),"dd/MM/yyyy",{locale:B})}),e.jsxs("span",{className:"text-md text-pink-500",children:["Día ",s.cycleDay]}),f&&e.jsx(h,{className:"ml-2 bg-rose-100 text-rose-600 border border-rose-200",children:f})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[o.label!=="Sin símbolo"&&e.jsx("span",{className:"text-xs text-slate-600",children:o.label}),e.jsx("div",{className:`w-6 h-6 rounded-full border ${o.color} ${o.pattern?"pattern-bg":""} flex-shrink-0`,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-slate-800",children:[e.jsxs("div",{className:"flex items-center space-x-1 bg-gradient-to-r from-amber-200 to-orange-200 border border-amber-300/50 p-2 rounded-xl",children:[e.jsx(F,{className:"w-3 h-3 text-rose-400"}),e.jsx("span",{className:"font-medium",children:g?`${T}°C`:""}),P&&e.jsx("span",{className:"w-1 h-1 rounded-full bg-amber-500 shadow-[0_0_4px_rgba(245,158,11,0.65)]",title:"Temperatura corregida"}),g&&s.ignored&&e.jsx(h,{variant:"secondary",className:"text-xs py-0 px-1 bg-orange-200 text-slate-700",children:"Ignorada"})]}),e.jsx("div",{className:"flex items-center space-x-1 bg-slate-200 border border-gray-300/50 p-2 rounded-xl",children:(a==null?void 0:a.time)&&e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-3 h-3 text-gray-600"}),e.jsx("span",{children:a.time})]})})]}),Array.isArray(s.measurements)&&s.measurements.length>1&&e.jsx("div",{className:"mt-2 text-xs text-slate-600 space-y-1",children:s.measurements.map((l,E)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:l.time}),e.jsx("span",{children:l.temperature}),l.selected&&e.jsx(h,{className:"ml-1",variant:"secondary",children:"Principal"})]},E))}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-100 to-indigo-100 border border-blue-500/50 p-2 rounded-xl",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(q,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"font-semibold text-blue-800 truncate",children:s.mucus_sensation||s.mucusSensation||""})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-emerald-100 to-teal-100 border border-emerald-500/50 p-2 rounded-xl",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(z,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"font-semibold text-green-800 truncate",children:s.mucus_appearance||s.mucusAppearance||""})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-[1fr_auto] gap-2 items-start text-xs text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-violet-100 to-purple-100 border border-violet-500/50 p-2 rounded-xl",children:[e.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-violet-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(H,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"font-semibold text-violet-800 truncate",children:s.observations||""})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(m,{type:"button",onClick:()=>r(s),variant:"outline",size:"sm",className:"h-8 w-8 p-0 border-pink-300 text-pink-600 hover:bg-pink-50 hover:border-pink-400",disabled:i,children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(m,{type:"button",onClick:()=>x(s.id),variant:"outline",size:"sm",className:"h-8 w-8 p-0 border-rose-300 text-rose-600 hover:bg-rose-800 hover:border-rose-800",disabled:i,children:e.jsx(Y,{className:"h-3 w-3"})})]})]})]})},s.id)})})},re=({isOpen:t,onClose:r,onConfirm:x,recordDate:i})=>(R(t,r),e.jsx(Z,{open:t,onOpenChange:r,children:e.jsxs(G,{className:"bg-slate-800 border-slate-700 text-slate-50",children:[e.jsxs(J,{children:[e.jsx(K,{children:"Confirmar Eliminación"}),e.jsxs(Q,{className:"text-slate-400",children:["¿Estás seguro de que quieres eliminar el registro del ",i,"? Esta acción no se puede deshacer."]})]}),e.jsxs(U,{className:"sm:justify-end",children:[e.jsx(m,{variant:"outline",onClick:r,className:"border-slate-600 hover:bg-slate-700",children:"Cancelar"}),e.jsx(m,{variant:"destructive",onClick:x,children:"Eliminar"})]})]})}));export{re as D,te as R};
