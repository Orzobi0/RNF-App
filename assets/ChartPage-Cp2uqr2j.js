import{c as on,m as ze,j as e,R as wn,r as c,l as dt,f as ct,K as ln,n as In,g as Lt,k as $t,M as Cn,q as jn,N as Sn,u as vn,O as cn,Q as Tt,B as St,L as zt,X as kn}from"./index-1Lm-G_PV.js";import{a as Mn,g as Nn,i as Rn,C as Ht}from"./computePeakStatuses-P7Htr2a9.js";import{i as Ln,D as Dn}from"./DataEntryForm-DyT-Zmik.js";import{u as An,C as En,a as On,b as Pn,c as Tn}from"./useFertilityChart-BSJtXLp4.js";import{u as $n,D as Fn,a as Bn}from"./useCycleData-O3LOYKfm.js";import{L as _n}from"./label-EI0mLLM6.js";import{A as Wn}from"./arrow-left-DCfQQHUA.js";import{E as Gn,a as zn}from"./eye-BO0jdhTY.js";import"./input-Dw-8uckr.js";import"./badge-BIiH4rlp.js";const Hn=on("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Un=on("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yn=({padding:s,chartWidth:i,chartHeight:g,tempMin:h,tempMax:P,tempRange:p,getY:q,getX:U,allDataPoints:S=[],visibleRange:w=null,responsiveFontSize:G,isFullScreen:te,showLeftLabels:Z=!1,reduceMotion:Y=!1,isScrolling:R=!1,graphBottomY:Q,chartAreaHeight:u,rowsZoneHeight:z})=>{const A={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},ne=[];if(p>0){const _=p<=2.5?.1:.5;for(let ye=h;ye<=P+1e-9;ye+=_)ne.push(parseFloat(ye.toFixed(1)))}else for(let _=35.8;_<=37.2+1e-9;_+=.1)ne.push(parseFloat(_.toFixed(1)));const y=S.length,E=y>60||R,ue=Y||E?"g":ze.g,se=Number.isInteger(w?.startIndex)?w.startIndex:0,le=Number.isInteger(w?.endIndex)?w.endIndex:Math.max(y-1,0),f=y?Math.max(0,Math.min(y-1,se)):0,fe=y?Math.max(f,Math.min(y-1,le)):-1;return e.jsxs(e.Fragment,{children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"bgGradientChart",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#fffbfc"}),e.jsx("stop",{offset:"50%",stopColor:"#fff5f7"}),e.jsx("stop",{offset:"100%",stopColor:"#fff1f3"})]}),e.jsxs("linearGradient",{id:"dataZoneGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#fff7fb"}),e.jsx("stop",{offset:"50%",stopColor:"#ffe4f0"}),e.jsx("stop",{offset:"100%",stopColor:"#fff7fb"})]}),e.jsxs("linearGradient",{id:"tempLineGradientChart",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f472b6"}),e.jsx("stop",{offset:"30%",stopColor:"#ec4899"}),e.jsx("stop",{offset:"70%",stopColor:"#db2777"}),e.jsx("stop",{offset:"100%",stopColor:"#be185d"})]}),e.jsxs("filter",{id:"softShadow",children:[e.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),e.jsx("feOffset",{dx:"0",dy:"1",result:"offsetblur"}),e.jsx("feComponentTransfer",{children:e.jsx("feFuncA",{type:"linear",slope:"0.2"})}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"pointGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsx("filter",{id:"textShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:e.jsx("feDropShadow",{dx:"0",dy:"1",stdDeviation:"1",floodColor:"rgba(255, 255, 255, 0.8)"})}),e.jsxs("pattern",{id:"spotting-pattern-chart",patternUnits:"userSpaceOnUse",width:"6",height:"6",children:[e.jsx("rect",{width:"6",height:"6",fill:"#ef4444"}),e.jsx("circle",{cx:"3",cy:"3",r:"1.5",fill:"rgba(255,255,255,0.85)"})]})]}),e.jsx("rect",{x:s.left,y:s.top,width:i-s.left-s.right,height:u,fill:"url(#bgGradientChart)",opacity:2,rx:12,style:{filter:"drop-shadow(0 4px 12px rgba(244, 114, 182, 0.1))"}}),e.jsx("rect",{x:s.left,y:s.top,width:i-s.left-s.right,height:u,fill:"white",stroke:"url(#tempLineGradientChart)",strokeWidth:"1",strokeOpacity:"0.2",rx:"12",style:{filter:"url(#softShadow)"}}),e.jsx("rect",{x:s.left,y:Q,width:i-s.left-s.right,height:z,fill:"url(#dataZoneGradient)",rx:"8",style:{filter:"drop-shadow(0 -1px 2px rgba(244, 114, 182, 0.05))"}}),ne.map((_,ye)=>{const Ie=q(_),x=_.toFixed(1).endsWith(".0")||_.toFixed(1).endsWith(".5"),he=x?_.toFixed(1):`.${_.toFixed(1).split(".")[1]}`;return e.jsxs(ue,{...Y||E?{}:{variants:A},children:[e.jsx("line",{x1:s.left,y1:Ie,x2:i-s.right,y2:Ie,stroke:x?"#f9a8d4":"#fce7f3",strokeWidth:x?1.5:1,opacity:x?.5:.3,strokeDasharray:x?"0":"4,4",style:{filter:x&&!E?"drop-shadow(0 1px 3px rgba(244, 114, 182, 0.15))":"none",opacity:x?1:.7}}),Z&&e.jsx("text",{x:s.left-G(1),y:Ie+G(.35),textAnchor:"end",fontSize:G(x?1.1:1),fontWeight:x?"700":"600",fill:x?"#be185d":"#db2777",opacity:x?.9:.7,style:{filter:E?"none":"url(#textShadow)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:he}),e.jsx("text",{x:i-s.right+G(1),y:Ie+G(.35),textAnchor:"start",fontSize:G(x?1.1:1),fontWeight:x?"700":"600",fill:x?"#be185d":"#db2777",opacity:x?.9:.7,style:{filter:E?"none":"url(#textShadow)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:he})]},`temp-tick-${ye}`)}),y>0&&Array.from({length:fe-f+1},(_,ye)=>{const Ie=f+ye,x=U(Ie);return e.jsx("line",{x1:x,y1:s.top,x2:x,y2:Q,stroke:"#fce7f3",strokeWidth:"1",opacity:"0.6",style:{filter:E?"none":"drop-shadow(0 0 1px rgba(244, 114, 182, 0.05))"}},`day-grid-${Ie}`)}),e.jsx("rect",{x:s.left,y:s.top,width:i-s.left-s.right,height:u,fill:"none",stroke:"url(#tempLineGradientChart)",strokeWidth:"2",strokeOpacity:"0.4",rx:"12"}),e.jsx("rect",{x:s.left+1,y:s.top+1,width:i-s.left-s.right-2,height:u-2,fill:"none",stroke:"white",strokeWidth:"0.5",rx:"11",opacity:"0.9"}),Z&&e.jsx(ue,{...Y||E?{}:{variants:A},children:e.jsx("text",{x:s.left+G(1.2),y:s.top+G(1.5),textAnchor:"middle",fontSize:G(1.4),fontWeight:"800",fill:"#be185d",style:{filter:E?"none":"url(#textShadow)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:"°C"})})]})},Vn=({data:s,allDataPoints:i,getX:g,getY:h,baselineY:P,temperatureField:p="temperature",reduceMotion:q=!1})=>{if(!s||s.length<2)return null;let U="",S=null;const w=[];if(i.forEach((Z,Y)=>{const R=s.find(Q=>Q.id===Z.id);if(R&&R[p]!==null&&R[p]!==void 0&&!R.ignored){const Q=g(Y),u=h(R[p]);w.push({x:Q,y:u}),S!==null&&Y===S+1?U+=` L ${Q} ${u}`:U+=`${U?" ":""}M ${Q} ${u}`,S=Y}}),w.length<2)return null;const G=U.includes("L"),te=w.length>1?w.map(({x:Z,y:Y},R)=>`${R===0?"M":"L"} ${Z} ${Y}`).join(" "):"";return e.jsxs(e.Fragment,{children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"tempLineGradientChart",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f472b6"}),e.jsx("stop",{offset:"30%",stopColor:"#ec4899"}),e.jsx("stop",{offset:"70%",stopColor:"#db2777"}),e.jsx("stop",{offset:"100%",stopColor:"#be185d"})]}),e.jsx("filter",{id:"lineShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodColor:"rgba(244, 114, 182, 0.4)"})})]}),G&&(q?e.jsx("path",{d:U,fill:"none",stroke:"url(#tempLineGradientChartGlow)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:.4,style:{filter:"url(#lineGlow)"}}):e.jsx(ze.path,{d:U,fill:"none",stroke:"url(#tempLineGradientChartGlow)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:.4,style:{filter:"url(#lineGlow)"},initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.4},transition:{duration:.8,ease:"easeInOut",delay:.2}})),te&&(q?e.jsx("path",{d:te,fill:"none",stroke:"#d587b1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",opacity:.65}):e.jsx(ze.path,{d:te,fill:"none",stroke:"#d587b1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",opacity:.65,initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.65},transition:{duration:.8,ease:"easeInOut"}})),G&&(q?e.jsx("path",{d:U,fill:"none",stroke:"url(#tempLineGradientChart)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"url(#lineShadow)"}}):e.jsx(ze.path,{d:U,fill:"none",stroke:"url(#tempLineGradientChart)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"url(#lineShadow)"},initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:1,ease:"easeInOut",delay:.4}}))]})},en="var(--color-sensacion-fuerte)",tn="var(--color-apariencia-fuerte)",nn="var(--color-observaciones-fuerte)",Ut="#be123c",qn="rgba(148, 163, 184, 0.35)",Xn="rgba(226, 232, 240, 0.6)",Kn="rgba(148, 163, 184, 0.5)",sn="✖",Yt="#7f1d1d",Vt="#ec4899",Jn="drop-shadow(0 2px 4px rgba(244, 114, 182, 0.35))",Zn="#be185d",Qn="#2563eb",es="#be185d",ts="rgba(244, 114, 182, 0.35)",ns=s=>{if(!s)return"";const[i,g]=s.split("/");return`${parseInt(i,10)}/${parseInt(g,10)}`},Kt='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',ss=()=>{if(typeof document>"u")return(g,h)=>{const P=/(\d+(?:\.\d+)?)px/.exec(h||""),p=P?Number(P[1]):12;return g.length*p*.6};const i=document.createElement("canvas").getContext("2d");return i?(g,h)=>(i.font=h,i.measureText(g).width):(g,h)=>{const P=/(\d+(?:\.\d+)?)px/.exec(h||""),p=P?Number(P[1]):12;return g.length*p*.6}},as=(s,i,g)=>`${i} ${s}px ${g}`,an=(s="",{maxWidth:i,maxLines:g=2,fontSize:h,fontWeight:P=700,fontFamily:p=Kt,fallback:q="–",measureTextWidth:U})=>{if(!s)return[q,...Array.from({length:Math.max(0,g-1)},()=>"")];const S=as(h,P,p),w=u=>U(u,S),G=String(s).trim(),te=/\s/.test(G),Z=te?G.split(/\s+/):Array.from(G),Y=te?" ":"",R=[],Q=u=>{const z=Array.from(u);let A="";for(;z.length;){const ne=A+z[0];if(w(ne)<=i||!A){if(A=ne,z.shift(),w(A)>i&&A.length>1){z.unshift(...Array.from(A.slice(1))),A=A[0];break}}else break}return[A,z.join("")]};for(;Z.length&&R.length<g;){let u="";for(;Z.length;){const z=Z[0],A=u?`${u}${Y}${z}`:z;if(w(A)<=i){u=A,Z.shift();continue}if(!u)if(te){const[ne,y]=Q(z);u=ne,y?Z[0]=y:Z.shift()}else{const[ne,y]=Q(z);u=ne,y?Z[0]=y:Z.shift()}break}R.push(u),!u&&Z.length&&R.push(Z.shift())}if(Z.length&&R.length){const u=R.length-1;let z=R[u]||"";for(;z&&w(`${z}…`)>i;)z=z.slice(0,-1);R[u]=z?`${z}…`:"…"}for(;R.length<g;)R.push("");return R};function qt(s="",i,g="–"){return s?s.split(/\s+/).slice(0,i).join(" "):g}const rs=({data:s,getX:i,getY:g,isFullScreen:h,orientation:P,responsiveFontSize:p,onPointInteraction:q,clearActivePoint:U,activePoint:S,visibleRange:w=null,padding:G,chartHeight:te,chartWidth:Z,temperatureField:Y="temperature_chart",textRowHeight:R,compact:Q=!1,reduceMotion:u=!1,isScrolling:z=!1,showInterpretation:A=!1,ovulationDetails:ne=null,firstHighIndex:y=null,baselineIndices:ke=[],graphBottomLift:E=0,graphBottomY:ue,rowsZoneHeight:se,showRelationsRow:le=!1})=>{const f={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},fe={hidden:{opacity:0,scale:.3},visible:{opacity:1,scale:1,transition:{duration:.6,ease:[.34,1.56,.64,1],type:"spring",stiffness:120,damping:12}}},_=ue,ye=h?9:7.5,Ie=h?1:.75,x=le?ye+(h?2:1.5):null,he=ye+Ie,Be=Math.max(1,Math.floor(se/he)),X=Math.max(R,Be),kt=_+X*1,Dt=_+X*2,Re=_+X*3,Ke=_+X*(h?5:4.5),Je=_+X*(h?7:6),Mt=_+X*(h?9:7.5),ut=le?Mt+X*(h?2:1.5):null,me=Array.isArray(s)?s.length:0,L=me>60||z,st=u||L?"g":ze.g,Ze=Z-G.left-G.right,_e=X*(h?2:1.5),Ce=Math.min(Math.max(_e*.46,14),12),Qe=Number.isInteger(w?.startIndex)?w.startIndex:0,Pe=Number.isInteger(w?.endIndex)?w.endIndex:Math.max(me-1,0),We=me?Math.max(0,Math.min(me-1,Qe)):0,ae=me?Math.max(We,Math.min(me-1,Pe)):-1,Nt=c.useMemo(()=>dt(new Date),[]),Le=c.useMemo(()=>ss(),[]),He=c.useRef(new Map),De=me>0?Ze/me:Ze,be=2,pe=Math.min(12,Math.max(4,De*.12)),re=Math.max(0,De-pe*2),Se=p(.95),Te=p(.9),$e=p(.9),Me=p(.9),at=p(.8),ft=p(.8),ht=p(.8),pt=c.useMemo(()=>{if(!A)return new Map;const v=Array.isArray(ne?.highSequenceIndices)?ne.highSequenceIndices:[],d=oe=>{const V=s?.[oe],T=V?.calcTemperature!=null?V.calcTemperature:V?.displayTemperature,xe=V?.ignoredForCalc!=null?V.ignoredForCalc:V?.ignored;return V&&Number.isFinite(T)&&!xe},m=new Map;return v.forEach((oe,V)=>{const T=Number(oe);Number.isInteger(T)&&T>=0&&T<me&&!m.has(T)&&d(T)&&m.set(T,V+1)}),m},[A,ne,me,s]),rt=c.useMemo(()=>{if(!A)return new Map;const v=Array.isArray(ke)?ke:[];if(!v.length)return new Map;const d=new Set,m=[],oe=$=>{const D=s?.[$],k=D?.calcTemperature!=null?D.calcTemperature:D?.displayTemperature,Ve=D?.ignoredForCalc!=null?D.ignoredForCalc:D?.ignored;return D&&Number.isFinite(k)&&!Ve},V=$=>{for(let D=$;D>=0;D-=1)if(oe(D))return D;return null},T=$=>{const D=Number($);Number.isInteger(D)&&D>=0&&D<me&&!d.has(D)&&oe(D)&&(d.add(D),m.push(D))};if(v.forEach($=>{T($)}),y!=null){const $=Number(y);if(Number.isInteger($)){const D=V($-1);D!=null&&T(D)}}if(!m.length)return new Map;const xe=[...m].sort(($,D)=>$-D),je=new Map;let tt=1;for(let $=xe.length-1;$>=0&&!(tt>6);$-=1)je.set(xe[$],tt),tt+=1;return je},[A,ke,me,y,s]),Rt=L?"none":"drop-shadow(0 1px 2px rgba(255, 255, 255, 0.9))",Ge=L?"none":"drop-shadow(0 1px 1px rgba(255, 255, 255, 0.8))",Ue=L?"none":"drop-shadow(0 1px 2px rgba(255, 255, 255, 0.9))",yt=L?"none":Jn,Ne=L?"none":"drop-shadow(0 2px 4px rgba(244, 114, 182, 0.25))",At=L?"none":"drop-shadow(0 1px 3px rgba(37, 99, 235, 0.45))",et=L?"none":"drop-shadow(0 2px 4px rgba(37, 99, 235, 0.3))",ot=c.useCallback((v,d,m,oe)=>{const V=an(v,{maxWidth:re,maxLines:3,fontSize:m,fontWeight:700,fontFamily:Kt,fallback:d,measureTextWidth:Le});return V[2]?{lines:an(v,{maxWidth:re,maxLines:3,fontSize:oe,fontWeight:700,fontFamily:Kt,fallback:d,measureTextWidth:Le}),fontSize:oe}:{lines:V,fontSize:m}},[re,Le]);c.useEffect(()=>{He.current.clear()},[me,re,Te,$e,Me]);const Ye=c.useCallback((v,d,m,oe,V)=>{const T=He.current.get(v);if(T)return T;const xe=ot(d,m,oe,V);return He.current.set(v,xe),xe},[ot]),bt=c.useMemo(()=>!me||ae<We?[]:Array.from({length:ae-We+1},(v,d)=>We+d),[ae,We,me]);return e.jsxs(e.Fragment,{children:[e.jsxs("defs",{children:[e.jsx("filter",{id:"rowShadowChart",x:"-10%",y:"-10%",width:"120%",height:"120%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"4",floodColor:"rgba(244, 114, 182, 0.2)"})}),e.jsxs("pattern",{id:"spotting-pattern-chart",patternUnits:"userSpaceOnUse",width:"6",height:"6",children:[e.jsx("rect",{width:"6",height:"6",fill:"#fb7185"}),e.jsx("circle",{cx:"3",cy:"3",r:"1.5",fill:"rgba(255,255,255,0.85)"})]}),e.jsxs("filter",{id:"pointGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("radialGradient",{id:"tempPointGradientChart",cx:"30%",cy:"30%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FDF2F8"}),e.jsx("stop",{offset:"50%",stopColor:"#F9A8D4"}),e.jsx("stop",{offset:"85%",stopColor:"#EC4899"}),e.jsx("stop",{offset:"100%",stopColor:"#DB2777"})]}),e.jsxs("radialGradient",{id:"tempPointIgnoredGradient",cx:"30%",cy:"30%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFFFFF"}),e.jsx("stop",{offset:"80%",stopColor:"#F8FAFC"}),e.jsx("stop",{offset:"100%",stopColor:"#E2E8F0"})]}),e.jsxs("radialGradient",{id:"ovulationPointGradient",cx:"30%",cy:"30%",children:[e.jsx("stop",{offset:"0%",stopColor:"#dbeafe"}),e.jsx("stop",{offset:"50%",stopColor:"#93c5fd"}),e.jsx("stop",{offset:"85%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"100%",stopColor:"#2563eb"})]})]}),h&&P!=="portrait"&&e.jsx(st,{...u||L?{}:{variants:f},children:[{label:"Fecha",row:1,color:h?"#374151":"#6B7280"},{label:"Día",row:2,color:h?"#374151":"#6B7280"},{label:"Símbolo",row:3,color:h?"#374151":"#6B7280"},{label:"Sens.",row:h?5:4.5,color:en},{label:"Apar.",row:h?7:6,color:tn},{label:"Observ.",row:h?9:7.5,color:nn},...le&&x!=null?[{label:"RS",row:x,color:Ut}]:[]].map(({label:v,row:d,color:m})=>e.jsx("text",{x:G.left-p(.5),y:_+X*d,textAnchor:"end",fontSize:p(1.05),fontWeight:"700",fill:m,style:{filter:Rt,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:v},v))}),bt.map(v=>{const d=s[v];if(!d)return null;const m=i(v),oe=d[Y]!=null?g(d[Y]):_,V=d.temperature_raw,T=d.temperature_corrected,xe=d.use_corrected&&V!=null&&T!=null&&Math.abs(T-V)>.01,je=xe?g(V):null,tt="#60666f",$=d[Y]!=null,D=d.use_corrected&&T!=null&&d[Y]===T,k=d.ignored||d.use_corrected&&!D,Ve=!!(d.had_relations??d.hadRelations);$||d.mucus_sensation||d.mucus_appearance||d.fertility_symbol;const wt=String(d.id||"").startsWith("placeholder-"),mt=ne?.peakDayIndex,Fe=A&&mt!=null&&!k&&$&&v===mt,qe=Mn(d.fertility_symbol),xt=Nn(qe.value),Et=qe.pattern==="spotting-pattern"?"url(#spotting-pattern-chart)":xt.main,It=xt.border==="none"?"none":xt.border||ts,it=xt.border==="none"?0:qe.value==="white"?1.6:1,lt=d.isoDate?Rn(dt(ct(d.isoDate)),dt(new Date)):!1,ce=p(h?1.8:2),Xe=Re-ce*.75+ce/2+2,ge=d.peakStatus?String(d.peakStatus).toUpperCase():null,Ae=ge==="P"||ge==="X",gt=ge&&!Ae,t=Ae?sn:ge||"–",o=Ae||["1","2","3"].includes(ge),a=!wt&&qe.value!=="none",r=!!d.isoDate&&!lt?{pointerEvents:"all",style:{cursor:"pointer"},onClick:jt=>q(d,v,jt)}:{},C=(d.isoDate?Ln(ct(d.isoDate),Nt):!1)?es:tt,O=pt.has(v),ie=O?pt.get(v):null,F=rt.has(v),W=F?rt.get(v):null,J=p(h?.75:1.2),M=Math.max(.5,J*.18),I=oe-J*(h?2.6:1.8),b=oe+J*(h?1.9:1.6),j=h?qt(d.mucus_sensation,be,lt?"":"–"):d.mucus_sensation,N=h?qt(d.mucus_appearance,be,lt?"":"–"):d.mucus_appearance,B=h?qt(d.observations,be,""):d.observations,H=`${d.isoDate||d.id||v}`,de=Ye(`${H}-sens-${re}-${Te}-${at}-${j??""}`,j,lt?"":"–",Te,at),we=Ye(`${H}-apar-${re}-${$e}-${ft}-${N??""}`,N,lt?"":"–",$e,ft),ve=Ye(`${H}-obs-${re}-${Me}-${ht}-${B??""}`,B,"",Me,ht),[ee,Ee,Oe]=de.lines,[Pt,nt,Ct]=we.lines,[Zt,Ft,Bt]=ve.lines,dn=de.fontSize,un=we.fontSize,fn=ve.fontSize,_t=(jt,Gt,bn)=>Math.max(1,[jt,Gt,bn].filter(Qt=>Qt&&String(Qt).trim()!=="").length),hn=_t(ee,Ee,Oe),pn=_t(Pt,nt,Ct),mn=_t(Zt,Ft,Bt),Wt=(jt,Gt)=>jt-(Gt-1)*Se/2,xn=Wt(Ke,hn),gn=Wt(Je,pn),yn=Wt(Mt,mn);return e.jsxs(st,{...u||L?{}:{variants:f},...r,children:[$&&e.jsxs(st,{...u||L?{}:{variants:fe},children:[xe&&je!==null&&e.jsxs("g",{pointerEvents:"none",children:[e.jsx("line",{x1:m,y1:je,x2:m,y2:oe,stroke:qn,strokeWidth:1,strokeDasharray:"4 4"}),e.jsx("circle",{cx:m,cy:je,r:3,fill:Xn,stroke:Kn,strokeWidth:1}),e.jsx("circle",{cx:m,cy:je,r:1,fill:"rgba(255, 255, 255, 0.6)"})]}),e.jsx("circle",{cx:m,cy:oe,r:Fe?3.5:2.8,fill:k?"url(#tempPointIgnoredGradient)":Fe?"url(#ovulationPointGradient)":"url(#tempPointGradientChart)",stroke:d.use_corrected&&D?"#941616":k?"#94A3B8":Fe?"#1d4ed8":"#E91E63",sstrokeWidth:k?1.5:Fe?2.2:2,style:{filter:Fe?et:Ne,cursor:"pointer"},pointerEvents:"all",onClick:jt=>q(d,v,jt)}),!k&&e.jsx("circle",{cx:m,cy:oe,r:Fe?1.2:.9,fill:Fe?"rgba(239, 246, 255, 0.95)":"rgba(255, 255, 255, 0.9)",style:{filter:Fe?At:Ge}}),A&&$&&!k&&O&&e.jsx("g",{pointerEvents:"none",children:e.jsx("text",{x:m,y:I,textAnchor:"middle",fontSize:J,fontWeight:"900",fill:Zn,strokeWidth:M,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',paintOrder:"stroke",filter:Ge},children:ie})}),A&&$&&!k&&F&&e.jsx("g",{pointerEvents:"none",children:e.jsx("text",{x:m,y:b,textAnchor:"middle",fontSize:J,fontWeight:"800",fill:Qn,stroke:"#ffffff",strokeWidth:M,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',paintOrder:"stroke",filter:Ge},children:W})})]}),e.jsx("text",{x:m,y:kt,textAnchor:"middle",fontSize:p(1.05),fontWeight:"900",fill:C,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',filter:Ge},children:ns(d.date)}),e.jsx("text",{x:m,y:Dt,textAnchor:"middle",fontSize:p(1),fontWeight:"900",fill:C,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',filter:Ge},children:d.cycleDay}),a?e.jsxs("g",{children:[e.jsx("rect",{x:m-ce/2+1,y:Re-ce*.75+1,width:ce,height:ce,fill:"rgba(0, 0, 0, 0.1)",rx:ce*.3,opacity:.5}),e.jsx("rect",{x:m-ce/2-4,y:Re-ce*.75,width:ce*1.4,height:ce,fill:Et,stroke:It,strokeWidth:it,rx:ce*.2,style:{filter:Ne}}),ge&&e.jsx("g",{pointerEvents:"none",children:Ae?e.jsx("text",{x:m,y:Xe,textAnchor:"middle",fontSize:p(1.35),fontWeight:"900",fill:Vt,stroke:"#fff",strokeWidth:1.5,paintOrder:"stroke",style:{filter:yt},children:sn}):e.jsx("text",{x:m,y:Xe,textAnchor:"middle",fontSize:p(ge?1.1:1),fontWeight:"800",fill:Yt,style:{filter:Ue},children:ge})})]}):e.jsxs("g",{children:[o&&e.jsx("rect",{x:m-ce/2-4,y:Re-ce*.75,width:ce*1.4,height:ce,fill:"transparent",stroke:Ae?Vt:Yt,strokeWidth:1,rx:ce*.2}),e.jsx("text",{x:m,y:Xe,textAnchor:"middle",fontSize:p(Ae?1.35:gt?1.1:1),fill:Ae?Vt:gt?Yt:tt,fontWeight:Ae?"900":gt?"800":"500",style:{filter:Ae?yt:gt?Ue:Ge},children:t})]}),!Q&&e.jsxs("text",{x:m,y:xn,textAnchor:"middle",fontSize:dn,fontWeight:"700",fill:en,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',filter:Ue},children:[e.jsx("tspan",{x:m,dy:0,children:ee}),Ee&&e.jsx("tspan",{x:m,dy:Se,children:Ee}),Oe&&e.jsx("tspan",{x:m,dy:Se,children:Oe})]}),!Q&&e.jsxs("text",{x:m,y:gn,textAnchor:"middle",fontSize:un,fontWeight:"700",fill:tn,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',filter:Ue},children:[e.jsx("tspan",{x:m,dy:0,children:Pt}),nt&&e.jsx("tspan",{x:m,dy:Se,children:nt}),Ct&&e.jsx("tspan",{x:m,dy:Se,children:Ct})]}),!Q&&e.jsxs("text",{x:m,y:yn,textAnchor:"middle",fontSize:fn,fontWeight:"700",fill:nn,style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',filter:Ue},children:[e.jsx("tspan",{x:m,dy:0,children:Zt}),Ft&&e.jsx("tspan",{x:m,dy:Se,children:Ft}),Bt&&e.jsx("tspan",{x:m,dy:Se,children:Bt})]}),le&&ut!=null&&Ve&&e.jsx("g",{transform:`translate(${m-Ce/2}, ${ut-Ce/2})`,role:"img","aria-label":`Relación registrada el ${d.isoDate||`día ${v+1}`}`,children:e.jsx(ln,{width:Ce,height:Ce,color:Ut,fill:Ut})})]},`pt-${v}-${d.isoDate||d.timestamp}`)})]})},os=(s,i)=>{if(s.data!==i.data||s.getX!==i.getX||s.getY!==i.getY||s.isFullScreen!==i.isFullScreen||s.orientation!==i.orientation||s.responsiveFontSize!==i.responsiveFontSize||s.onPointInteraction!==i.onPointInteraction||s.clearActivePoint!==i.clearActivePoint||s.chartHeight!==i.chartHeight||s.chartWidth!==i.chartWidth||s.temperatureField!==i.temperatureField||s.textRowHeight!==i.textRowHeight||s.compact!==i.compact||s.reduceMotion!==i.reduceMotion||s.isScrolling!==i.isScrolling||s.showInterpretation!==i.showInterpretation||s.ovulationDetails!==i.ovulationDetails||s.firstHighIndex!==i.firstHighIndex||s.baselineIndices!==i.baselineIndices||s.graphBottomLift!==i.graphBottomLift||s.graphBottomY!==i.graphBottomY||s.rowsZoneHeight!==i.rowsZoneHeight||s.showRelationsRow!==i.showRelationsRow)return!1;const g=s.visibleRange,h=i.visibleRange;if(g?.startIndex!==h?.startIndex||g?.endIndex!==h?.endIndex)return!1;const P=s.padding,p=i.padding;return!(P!==p&&(!P||!p||P.left!==p.left||P.right!==p.right||P.top!==p.top||P.bottom!==p.bottom))},is=wn.memo(rs,os),ls="var(--color-sensacion-fuerte)",cs="var(--color-apariencia-fuerte)",ds="var(--color-observaciones-fuerte)",us=({padding:s,chartHeight:i,tempMin:g,tempMax:h,tempRange:P,getY:p,responsiveFontSize:q,textRowHeight:U,isFullScreen:S,graphBottomY:w,rowsZoneHeight:G,showRelationsRow:te=!1})=>{const Z={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},Y=[];if(P>0){const E=P<=2.5?.1:.5;for(let ue=g;ue<=h+1e-9;ue+=E)Y.push(parseFloat(ue.toFixed(1)))}else for(let E=35.8;E<=37.2+1e-9;E+=.1)Y.push(parseFloat(E.toFixed(1)));const R=w,Q=S?9:7.5,u=S?1:.75,z=te?Q+(S?2:1.5):null,A=Q+u,ne=Math.max(1,Math.floor(G/A)),y=Math.max(U,ne),ke=c.useMemo(()=>{const E=[{label:"Fecha",row:1,color:"#374151",icon:null},{label:"Día",row:2,color:"#374151",icon:null},{label:"Símbolo",row:3,color:"#374151",icon:null},{label:"Sens.",row:S?5:4.5,color:ls,icon:{type:"text",value:"◊"}},{label:"Apar.",row:S?7:6,color:cs,icon:{type:"text",value:"○"}},{label:"Obs.",row:S?9:7.5,color:ds,icon:{type:"text",value:"✦"}}];return te&&z!=null&&E.push({label:"RS",row:z,color:"#f44336",icon:{type:"heart"}}),E},[S,z,te]);return e.jsxs("svg",{width:s.left,height:i,className:"font-sans pointer-events-none",children:[e.jsx("defs",{children:e.jsx("filter",{id:"textShadowLegend",x:"-50%",y:"-50%",width:"200%",height:"200%",children:e.jsx("feDropShadow",{dx:"0",dy:"1",stdDeviation:"1",floodColor:"rgba(255, 255, 255, 0.9)"})})}),Y.map((E,ue)=>{const se=p(E),le=E.toFixed(1).endsWith(".0")||E.toFixed(1).endsWith(".5"),f=le?E.toFixed(1):`.${E.toFixed(1).split(".")[1]}`;return e.jsx(ze.g,{variants:Z,children:e.jsx("text",{x:s.left-q(1.2),y:se+q(.35),textAnchor:"end",fontSize:q(le?1.15:1),fontWeight:le?"800":"700",fill:le?"#be185d":"#db2777",opacity:le?1:.85,style:{filter:"url(#textShadowLegend)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:f})},`temp-tick-fixed-${ue}`)}),e.jsx(ze.g,{variants:Z,children:ke.map(({label:E,row:ue,color:se,icon:le})=>{const f=s.left-q(2.8),fe=R+y*ue,_=q(.95);return e.jsxs("g",{children:[le?.type==="text"&&e.jsx("text",{x:f,y:fe,textAnchor:"middle",fontSize:q(.8),fontWeight:"600",fill:se,opacity:.7,style:{filter:"url(#textShadowLegend)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:le.value}),le?.type==="heart"&&e.jsx("g",{transform:`translate(${f-_/2}, ${fe-_/2})`,opacity:.7,children:e.jsx(ln,{width:_,height:_,color:se,fill:se,"aria-hidden":"true"})}),e.jsx("text",{x:s.left-q(.8),y:R+y*ue,textAnchor:"end",fontSize:q(1.05),fontWeight:"800",fill:se,style:{filter:"url(#textShadowLegend)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:E})]},E)})})]})},fs=({data:s,isFullScreen:i,orientation:g,onToggleIgnore:h,onEdit:P,onTogglePeak:p,cycleId:q,initialScrollIndex:U=0,visibleDays:S=5,showInterpretation:w=!1,reduceMotion:G=!1,forceLandscape:te=!1,currentPeakIsoDate:Z=null,showRelationsRow:Y=!1,fertilityStartConfig:R=null,fertilityCalculatorCycles:Q=[],fertilityCalculatorCandidates:u=null,onShowPhaseInfo:z=null,isArchivedCycle:A=!1,cycleEndDate:ne=null})=>{const{chartRef:y,tooltipRef:ke,dimensions:E,activePoint:ue,activeIndex:se,tooltipPosition:le,allDataPoints:f,validDataForLine:fe,tempMin:_,tempMax:ye,tempRange:Ie,padding:x,textRowHeight:he,getY:Be,getX:X,handlePointInteraction:kt,handleToggleIgnore:Dt,responsiveFontSize:Re,clearActivePoint:Ke,baselineTemp:Je,baselineStartIndex:Mt,baselineIndices:ut,firstHighIndex:me,ovulationDetails:K,fertilityStart:L,hasAnyObservation:st,graphBottomInset:Ze,todayIndex:_e}=An(s,i,g,h,q,S,te,R,Q,u,Y),Ce=c.useRef(null);if(!Ce.current){const n=Math.random().toString(36).slice(2,10);Ce.current=`fertility-chart-${q??"default"}-${n}`}const Qe=Ce.current,Pe=c.useCallback((n,r)=>{const l=n>=20?1:2,C=Math.ceil(n*l),O=Math.min(C,24);return Math.max(O,12)},[]),We=c.useMemo(()=>{const n=f.length;if(!n)return{startIndex:0,endIndex:-1};const r=Pe(S,n),l=Math.max(0,Math.floor(U)-r),C=Math.min(n-1,Math.floor(U)+S+r);return{startIndex:l,endIndex:C}},[f.length,Pe,U,S]),[ae,Nt]=c.useState(We),Le=c.useRef(null),[He,De]=c.useState(!1),be=c.useRef(null);if(!f||f.length===0)return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-slate-400 font-medium",children:"No hay datos para mostrar en el gráfico"})]});const pe=E.width,re=E.contentHeight??E.height,Se=E.scrollableContentHeight??re,Te=re-x.bottom-(Ze||0),$e=Math.max(re-Te,0),Me=Je!=null?Be(Je):null,at=!!K?.confirmed,ft=Je!=null&&at,ht=X(0),pt=f.length>0?X(f.length-1):pe-x.right,rt=at?"#F59E0B":"#94A3B8",Rt=at?"6 4":"4 4",Ge=at?1:.7,Ue=3,yt=pe===0,Ne=se!=null?X(se):null,At=se!=null?se>0?X(se-1):Ne:null,et=se!=null?se<f.length-1?X(se+1):Ne:null,ot=Math.max((pe-x.left-x.right)/Math.max(f.length,1),0),Ye=se!=null?Math.max((et!=null&&At!=null?et-At:0)||ot,ot,0):0,bt=c.useMemo(()=>{const n=new Map;return fe.forEach(r=>{r&&r.id!=null&&n.set(r.id,r)}),n},[fe]),v=c.useMemo(()=>Number.isInteger(L?.fertileStartFinalIndex)?L.fertileStartFinalIndex:null,[L]),d=Math.max(re-x.top-x.bottom-(Ze||0),0),m=c.useCallback(n=>!Number.isFinite(n)||!f.length||n<=0?x.left:X(n),[f,X,x.left]),oe=c.useCallback(n=>!Number.isFinite(n)||!f.length||n>=f.length-1?pe-x.right:X(n+1),[f,pe,X,x.right]),V=c.useCallback((n,r,{inclusiveEnd:l=!0}={})=>{if(!Number.isFinite(n)||!Number.isFinite(r)||f.length===0)return null;const C=b=>Math.max(0,Math.min(f.length-1,Math.floor(b))),O=b=>Math.max(0,Math.min(f.length-1,Math.floor(b))),ie=b=>Math.max(0,Math.min(f.length,Math.floor(b))),F=C(n),W=l?O(r):ie(r),J=F<=0?x.left:m(F);let M;l?M=W>=f.length-1?pe-x.right:oe(W):W<=0?M=x.left:W>=f.length?M=pe-x.right:M=m(W);const I=Math.max(M-J,0);return I<=0?null:{x:J,width:I}},[f,pe,m,oe,x.left,x.right]),T=f.length>0?f.length-1:null,xe=c.useMemo(()=>{if(!A||!ne||T==null)return null;const n=typeof ne=="string"?ne:null;if(!n)return null;const r=f.findIndex(l=>l?.isoDate===n);if(r>=0)return Math.min(r,T);for(let l=f.length-1;l>=0;l-=1){const C=f[l]?.isoDate;if(typeof C=="string"&&C<=n)return Math.min(l,T)}return null},[A,ne,f,T]),je=c.useMemo(()=>T==null?null:A?Number.isInteger(xe)?Math.min(xe,T):T:Number.isInteger(_e)?Math.min(_e,T):T,[xe,A,_e,T]),tt=c.useMemo(()=>A?Number.isInteger(xe)?xe:Number.isInteger(je)?je:null:Number.isInteger(_e)?_e:null,[xe,A,je,_e]),$=d>0?x.top+d*.5:null,D=$!=null?Math.max(Te-$,0):0,k=c.useMemo(()=>{if(!w||!st)return null;const n=L?.debug,r=Number.isInteger(n?.mucusInfertileStartIndex)?n.mucusInfertileStartIndex:null,l=Number.isInteger(L?.fertileWindow?.temperatureInfertileStartIndex)?L.fertileWindow.temperatureInfertileStartIndex:null,C=[r,l].filter(nt=>Number.isInteger(nt)).sort((nt,Ct)=>nt-Ct)[0],O=Number.isInteger(C)?C:Number.isInteger(n?.postOvulatoryStartIndex)?n.postOvulatoryStartIndex:null,ie=Number.isInteger(r)&&Number.isInteger(l)?Math.max(r,l):null,F=Number.isInteger(ie)?ie:Number.isInteger(n?.absoluteStartIndex)?n.absoluteStartIndex:null,W={confirmed:!!K?.confirmed,rule:K?.rule??null,baselineTemp:K?.baselineTemp??null,baselineIndices:Array.isArray(K?.baselineIndices)?K.baselineIndices:[],firstHighIndex:Number.isInteger(K?.firstHighIndex)?K.firstHighIndex:null,highSequenceIndices:Array.isArray(K?.highSequenceIndices)?K.highSequenceIndices:[],confirmationIndex:Number.isInteger(K?.confirmationIndex)?K.confirmationIndex:null,startIndex:l},J={peakDayIndex:Number.isInteger(K?.peakDayIndex)?K.peakDayIndex:null,thirdDayIndex:Number.isInteger(K?.thirdDayIndex)?K.thirdDayIndex:null,startIndex:r},M=l!=null,I=r!=null;if(!M&&!I)return null;const b=Number.isInteger(O)?O:null;if(b==null)return null;let j="pending",N="",B="Infertilidad postovulatoria",H="Fase postovulatoria: se ha cumplido un criterio de cierre; falta el segundo para confirmar la infertilidad absoluta.";const de="Infertilidad absoluta",we="Fase postovulatoria alcanzada (se ha confirmado día pico y subida de temperatura).",ve="Confirmación completa: doble criterio (día pico + temperatura).";let ee=B,Ee=H,Oe=N,Pt="pending";return M&&I?(j="absolute",B=de,H=ve,N=we,Number.isInteger(l)&&(!Number.isInteger(r)||l<=r)?(W.rule,Oe=`Temperatura confirmada el ${W.confirmationIndex!=null?`D${W.confirmationIndex+1}`:"—"}. A la espera de determinación del día pico.`,Ee=Oe,ee="Infertilidad estimada por temperatura"):(Oe=`Alcanzado ${J.thirdDayIndex!=null?"3° día postpico":"4º día postpico"} tras alcanzar día pico el ${J.peakDayIndex+1} del ciclo`,Ee=Oe,ee="Infertilidad estimada por moco")):M?(W.rule,N=`Temperatura confirmada el ${W.confirmationIndex!=null?`D${W.confirmationIndex+1}`:"—"}. A la espera de determinación del día pico.`,H=N,B="Infertilidad estimada por temperatura",Oe=N,Ee=H,ee=B):(N=`Alcanzado ${J.thirdDayIndex!=null?"3° día postpico":"4º día postpico"} tras seleccionar día pico el ${J.peakDayIndex+1} del ciclo`,H=N,B="Infertilidad estimada por moco",Oe=N,Ee=H,ee=B),{phase:"postOvulatory",status:j,startIndex:b,absoluteStartIndex:F,estimated:{status:Pt,label:ee,tooltip:Ee,message:Oe},absolute:{label:de,tooltip:ve,message:we},reasons:{type:"post",status:j,mucus:J,temperature:W},message:N,label:B,tooltip:H}},[w,st,K,L]),Ve=c.useMemo(()=>{if(!w||d<=0||$==null||D<=0||f.length===0)return[];const n=[],r=f.length-1,l=Number.isInteger(je)&&je>=0?Math.min(je,r):r,C=(I,b)=>{if(!k)return;const j=k.startIndex,N=Number.isInteger(k.absoluteStartIndex)?k.absoluteStartIndex:null,B=k.estimated??k,H=k.absolute??k,de=N??j,we=k.status==="absolute"?r:Math.min(r,b);if(N!=null&&N>j){const ve=Math.min(N-1,b),ee=V(j,ve);ee&&I.push({key:"post-pending",phase:"postOvulatory",status:B.status??"pending",bounds:ee,startIndex:j,endIndex:ve,displayLabel:B.label,tooltip:B.tooltip,message:B.message,reasons:k.reasons})}if(de<=we){const ve=V(de,we);ve&&I.push({key:"post-absolute",phase:"postOvulatory",status:N!=null?"absolute":k.status,bounds:ve,startIndex:de,endIndex:we,displayLabel:N!=null?H.label:k.label,tooltip:N!=null?H.tooltip:k.tooltip,message:N!=null?H.message:k.message,reasons:k.reasons})}},O=Number.isInteger(v),ie=Number.isFinite(k?.startIndex);if(!O&&!ie){const I=Math.min(l,r);if(I<0)return n;const b=V(0,I);return b&&n.push({key:"relative-default",phase:"relativeInfertile",status:"default",bounds:b,startIndex:0,endIndex:I,displayLabel:"Relativamente infértil",tooltip:"Relativamente infértil (preovulatoria: sin día fértil por CPM/T-8 ni signos de moco fértil)",message:"Relativamente infértil",reasons:{type:"relative",fertileStartFinalIndex:null,aggregate:L?.aggregate??null,bipScore:L?.debug?.bipScore??null}}),n}if(!O&&ie){const I=k.startIndex,b=Math.min(I-1,l);if(b>=0){const j=V(0,b);j&&n.push({key:"no-fertile-window",phase:"nodata",status:"no-fertile-window",bounds:j,startIndex:0,endIndex:b,displayLabel:"Sin ventana fértil identificable",tooltip:"Sin ventana fértil identificable",message:"Sin ventana fértil identificable",reasons:{type:"nofertile",status:"no-fertile-window",message:"No se ha identificado un inicio fértil claro en este ciclo (ni por moco, ni por calculadora, ni por marcador explícito)."}})}return Number.isFinite(k.startIndex)&&k.startIndex<=r&&C(n,l),n}if(O&&v>0){const I=Math.min(v-1,l);if(I>=0){const b=V(0,I);b&&n.push({key:"relative",phase:"relativeInfertile",status:"default",bounds:b,startIndex:0,endIndex:I,displayLabel:"Relativamente infértil",tooltip:"Relativamente infértil (fase relativamente infértil preovulatoria)",message:"Relativamente infértil",reasons:{type:"relative",fertileStartFinalIndex:v,aggregate:L?.aggregate??null,bipScore:L?.debug?.bipScore??null}})}}const F=O?Math.max(v,0):0,W=k?.startIndex,J=Number.isFinite(W)&&W!=null?Math.min(W-1,r):r,M=Math.min(J,l);if(M>=F){const I=V(F,M);if(I){const b=Number.isInteger(L?.debug?.explicitStartDay)?L.debug.explicitStartDay:null,j=L?.aggregate?.usedCandidates??[],N=j.some(de=>de?.kind==="profile"),B=j.some(de=>de?.kind==="calculator");let H=null;O&&b!=null&&b===v?H="marker":N?H="profiles":B&&(H="calculator"),n.push({key:"fertile",phase:"fertile",status:"default",bounds:I,startIndex:F,endIndex:M,displayLabel:"Fértil",tooltip:"Fértil",message:"Fértil",reasons:{type:"fertile",startIndex:F,endIndex:M,source:H,details:L?.debug??null,notes:L?.aggregate?.notes??[],statusSummary:L?.currentAssessment??null,dailyAssessments:L?.dailyAssessments??[],window:L?.fertileWindow??null,aggregate:L?.aggregate??null}})}}return k&&Number.isFinite(k.startIndex)&&k.startIndex<=r&&C(n,l),n},[w,d,$,D,f.length,v,L,k,st,V,je]),wt=`${Qe}-phase-relative-gradient`,mt=`${Qe}-phase-fertile-gradient`,Fe=`${Qe}-phase-post-pending-gradient`,qe=`${Qe}-phase-post-absolute-gradient`,xt=n=>n.phase==="relativeInfertile"?"#065F46":n.phase==="fertile"?"#9D174D":n.phase==="postOvulatory"?n.status==="pending"?"#075985":"#1E3A8A":n.phase==="nodata"?"#475569":"hsl(var(--foreground))",Et="0 1px 1px var(--phase-text-shadow, rgba(15, 23, 42, 0.2))",It=c.useMemo(()=>{if(!w||!K?.confirmed)return null;const n=Array.isArray(K?.highSequenceIndices)?K.highSequenceIndices:[];if(n.length<2)return null;const r=n.map(l=>{if(l==null||l<0||l>=f.length)return null;const C=f[l],O=bt.get(C?.id);return!O||!Number.isFinite(O.displayTemperature)?null:{x:X(l),y:Be(O.displayTemperature)}}).filter(Boolean);return r.length<2?null:r.map(({x:l,y:C},O)=>`${O===0?"M":"L"} ${l} ${C}`).join(" ")},[w,K,f,bt,X,Be]),[it,lt]=c.useState({w:typeof window<"u"?window.innerWidth:0,h:typeof window<"u"?window.innerHeight:0}),ce=it.w<it.h;c.useEffect(()=>{const n=()=>lt({w:window.innerWidth,h:window.innerHeight});return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]);const Xe=c.useCallback((n=0)=>{const r=y.current;if(!r)return;const l=f.length;if(!l){Nt({startIndex:0,endIndex:-1});return}const C=r.clientWidth||1,ie=C/Math.max(S,1)||1,F=Pe(S,l),W=Math.floor(n/ie),J=Math.floor((n+C)/ie);let M=W-F,I=J+F;M=Math.max(0,M),I=Math.min(l-1,I),Nt(b=>b.startIndex===M&&b.endIndex===I?b:{startIndex:M,endIndex:I})},[f.length,Pe,S]);c.useEffect(()=>{if(!y.current)return;const n=y.current.clientWidth/S;y.current.scrollLeft=Math.max(0,n*U),Xe(y.current.scrollLeft)},[U,S,E.width,g,Xe]),c.useEffect(()=>{const n=y.current;if(!n)return;const r=()=>{De(!0),be.current&&window.clearTimeout(be.current),be.current=window.setTimeout(()=>De(!1),140),!Le.current&&(Le.current=window.requestAnimationFrame(()=>{Le.current=null,Xe(n.scrollLeft)}))};return n.addEventListener("scroll",r,{passive:!0}),Xe(n.scrollLeft),()=>{n.removeEventListener("scroll",r),be.current&&window.clearTimeout(be.current),Le.current&&(window.cancelAnimationFrame(Le.current),Le.current=null)}},[Xe]);const ge=i&&te&&ce,Ae=te?"landscape":g,gt=ge,t="w-full h-full bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100",o=i?`${t} h-full ${gt?"overflow-y-auto overflow-x-auto":"overflow-x-auto overflow-y-auto"}`:`${t} overflow-x-auto overflow-y-visible border border-pink-100/50`,a=!i||Ae==="portrait";return e.jsx(ze.div,{className:"relative w-full h-full",initial:!1,children:e.jsxs(ze.div,{ref:y,className:`relative p-0 ${i?"":"rounded-2xl"} ${o}`,style:{touchAction:"auto",boxShadow:i?"inset 0 1px 3px rgba(244, 114, 182, 0.1)":"0 8px 32px rgba(244, 114, 182, 0.12), 0 2px 8px rgba(244, 114, 182, 0.08)",...ge?{position:"absolute",top:"50%",left:"50%",width:`${it.h}px`,height:`${it.w}px`,transform:"translate(-50%, -50%) rotate(90deg)",transformOrigin:"center center"}:{}},initial:!1,children:[yt&&e.jsx("div",{className:"flex items-center justify-center w-full h-full text-slate-400",children:"Cargando..."}),e.jsx("div",{className:"inline-block",style:{width:pe,height:re},children:e.jsx("div",{className:"relative h-full overflow-y-auto",style:{height:re,maxHeight:Se},children:e.jsxs("div",{className:"relative",style:{width:pe,height:Se},children:[a&&e.jsx("div",{className:"absolute left-0 top-0 h-full bg-transparent pointer-events-none z-10",style:{width:x.left},children:e.jsx(us,{padding:x,chartHeight:Se,tempMin:_,tempMax:ye,tempRange:Ie,getY:Be,responsiveFontSize:Re,textRowHeight:he,isFullScreen:i,graphBottomY:Te,rowsZoneHeight:$e,showRelationsRow:Y})}),e.jsxs(ze.svg,{width:pe,height:Se,className:"font-sans flex-shrink-0",viewBox:`0 0 ${pe} ${Se}`,preserveAspectRatio:"xMidYMid meet",initial:!1,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"tempLineGradientChart",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#F472B6"}),e.jsx("stop",{offset:"50%",stopColor:"#EC4899"}),e.jsx("stop",{offset:"100%",stopColor:"#E91E63"})]}),e.jsxs("linearGradient",{id:"tempAreaGradientChart",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(244, 114, 182, 0.18)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(244, 114, 182, 0.02)"})]}),e.jsxs("linearGradient",{id:wt,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--phase-rel)",stopOpacity:"0"}),e.jsx("stop",{offset:"100%",stopColor:"var(--phase-rel)",stopOpacity:"var(--phase-rel-stop, 0.28)"})]}),e.jsxs("linearGradient",{id:mt,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--phase-fertile)",stopOpacity:"0"}),e.jsx("stop",{offset:"100%",stopColor:"var(--phase-fertile)",stopOpacity:"var(--phase-fertile-stop, 0.27)"})]}),e.jsxs("linearGradient",{id:Fe,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--phase-post)",stopOpacity:"0"}),e.jsx("stop",{offset:"100%",stopColor:"var(--phase-post)",stopOpacity:"var(--phase-post-stop, 0.45)"})]}),e.jsxs("linearGradient",{id:qe,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--phase-post-abs)",stopOpacity:"0"}),e.jsx("stop",{offset:"100%",stopColor:"var(--phase-post-abs)",stopOpacity:"var(--phase-post-abs-stop, 0.7)"})]}),e.jsxs("pattern",{id:"spotting-pattern-chart",patternUnits:"userSpaceOnUse",width:"6",height:"6",children:[e.jsx("rect",{width:"6",height:"6",fill:"#ef4444"}),e.jsx("circle",{cx:"3",cy:"3",r:"1.5",fill:"rgba(255,255,255,0.85)"})]}),e.jsxs("filter",{id:"chartShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"baselineGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{width:"100%",height:"100%",fill:"transparent"}),e.jsx(Yn,{padding:x,chartWidth:pe,chartHeight:re,tempMin:_,tempMax:ye,tempRange:Ie,getY:Be,getX:X,allDataPoints:f,visibleRange:ae,responsiveFontSize:Re,isFullScreen:i,showLeftLabels:!a,reduceMotion:G,isScrolling:He,graphBottomY:Te,chartAreaHeight:Math.max(re-x.top-x.bottom-(Ze||0),0),rowsZoneHeight:$e}),w&&Ve.length>0&&$!=null&&D>0&&e.jsx("g",{children:Ve.map(n=>{const r=$,l=D,O=n.phase==="postOvulatory"?n.status==="pending"?`url(#${Fe})`:`url(#${qe})`:n.phase==="relativeInfertile"?`url(#${wt})`:n.phase==="fertile"?`url(#${mt})`:n.phase==="nodata"?"rgba(203, 213, 225, 0.2)":`url(#${mt})`,ie=i?14:13,F=Math.max(Re(1.1),ie),W=n.bounds.width<120,J=Math.max(n.bounds.width-16,0),M=Math.max(F*.58,1),I=Math.max(1,Math.floor(J/M)),b=n.tooltip??n.displayLabel??n.message??"";let j=n.displayLabel??n.message??"";if(W&&j.length>I){const ee=Math.max(I-1,1);j=`${j.slice(0,ee).trimEnd()}${j.length>ee?"…":""}`}const N=W?n.bounds.x+8:n.bounds.x+n.bounds.width/2,B=W?"start":"middle",H=r+l/2,de=xt(n),we=ee=>{typeof ee?.stopPropagation=="function"&&ee.stopPropagation(),typeof z=="function"&&z({phase:n.phase,status:n.status,reasons:n.reasons,message:n.message,startIndex:n.startIndex,endIndex:n.endIndex,limitIndex:tt,label:n.displayLabel??n.message??null})},ve=ee=>{(ee.key==="Enter"||ee.key===" ")&&(ee.preventDefault(),we(ee))};return e.jsxs("g",{children:[e.jsx("rect",{x:n.bounds.x,y:r,width:n.bounds.width,height:l,fill:O,pointerEvents:"none"}),e.jsxs("text",{x:N,y:H,fill:de,fontSize:F,fontWeight:600,dominantBaseline:"middle",textAnchor:B,role:"button","aria-label":b,tabIndex:0,onClick:we,onKeyDown:ve,style:{cursor:"pointer",userSelect:"none",lineHeight:1.2,textShadow:Et},pointerEvents:"auto",children:[e.jsx("title",{children:b}),j]})]},n.key)})}),w&&ft&&Me!==null&&(G?e.jsx("line",{x1:ht,y1:Me,x2:pt,y2:Me,stroke:rt,strokeWidth:Ue,strokeDasharray:Rt,opacity:Ge}):e.jsx(ze.path,{d:`M ${ht} ${Me} L ${pt} ${Me}`,stroke:rt,strokeWidth:Ue,strokeDasharray:Rt,opacity:Ge,initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:Ge},transition:{duration:4,ease:"easeInOut",delay:.5}})),e.jsx(Vn,{data:fe,allDataPoints:f,getX:X,getY:Be,baselineY:Te,temperatureField:"displayTemperature",reduceMotion:G}),It&&e.jsx("g",{pointerEvents:"none",children:e.jsx("path",{d:It,fill:"none",stroke:"#cc0e93",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",opacity:.9})}),se!==null&&Ne!==null&&Ye>0&&e.jsx("g",{pointerEvents:"none",children:(()=>{const n=Te,r=Math.max(3,Math.min(14,Ye*.4)),l=Math.max(r*2,he*.85);return e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:Ne,y1:0,x2:Ne,y2:n,stroke:"rgba(235, 171, 204,0.15)",strokeWidth:r}),e.jsx("line",{x1:Ne,y1:n,x2:Ne,y2:re,stroke:"rgba(235, 171, 204,0.15)",strokeWidth:l})]})})()}),e.jsx(is,{data:f,getX:X,getY:Be,isFullScreen:i,orientation:Ae,responsiveFontSize:Re,onPointInteraction:kt,clearActivePoint:Ke,activePoint:ue,visibleRange:ae,padding:x,chartHeight:re,chartWidth:pe,temperatureField:"displayTemperature",textRowHeight:he,graphBottomY:Te,rowsZoneHeight:$e,compact:!1,reduceMotion:G,isScrolling:He,showInterpretation:w,ovulationDetails:K,baselineStartIndex:Mt,firstHighIndex:me,baselineIndices:ut,graphBottomLift:Ze,showRelationsRow:Y})]})]})})}),ue&&e.jsx(ze.div,{ref:ke,initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},transition:{duration:.12,ease:"easeOut"},children:e.jsx(En,{point:ue,position:le,chartWidth:pe,chartHeight:re,onToggleIgnore:Dt,onEdit:P,onClose:Ke,onTogglePeak:p,currentPeakIsoDate:Z})})]})})};function hs(s,i){if(!s||!i)return[];const g=typeof s=="string"?ct(s):s;return[...Array(i)].map((h,P)=>{const p=In(g,P),q=Lt(p,"yyyy-MM-dd"),U=Lt(p,"dd/MM"),S=$t(dt(p),dt(g))+1;return{date:U,isoDate:q,cycleDay:S,temperature:null,mucusSensation:null,mucusAppearance:null,had_relations:!1,hadRelations:!1,id:`placeholder-${q}`,ignored:!1,peak_marker:null}})}const ps=({isOpen:s,onClose:i,children:g,ariaLabel:h,containerClassName:P="",backdropClassName:p="bg-black/40"})=>{if(c.useEffect(()=>{if(!s)return;const S=te=>{te.key==="Escape"&&typeof i=="function"&&i()};document.addEventListener("keydown",S);const{body:w}=document,G=w.style.overflow;return w.style.overflow="hidden",()=>{document.removeEventListener("keydown",S),w.style.overflow=G}},[s,i]),!s||typeof document>"u")return null;const q=()=>{typeof i=="function"&&i()},U=S=>{S.stopPropagation()};return Cn.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 py-8",children:[e.jsx("div",{className:`absolute inset-0 ${p}`,onClick:q,"aria-hidden":"true"}),e.jsx("div",{role:"dialog","aria-modal":"true","aria-label":h??void 0,className:`relative z-[101] w-full max-w-md overflow-hidden rounded-3xl bg-white shadow-2xl shadow-rose-200/50 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-200 ${P}`,onClick:U,children:g})]}),document.body)},Xt="fertility-chart-settings",Ot=s=>s?String(s).toUpperCase().replace(/-/g,""):"",ms=s=>{const i=Ot(s);return i==="T8"?"T-8":i==="CPM"?"CPM":s??""},xs=s=>s==="conservador"?"estandar":s==="estandar"?s:null,Jt=()=>({calculators:{cpm:!0,t8:!0},postpartum:!1,combineMode:"estandar"}),rn={showRelationsRow:!0,fertilityStartConfig:Jt()},gs=[{key:"cpm",label:"CPM"},{key:"t8",label:"T-8"}],vt=s=>{const i=Jt(),g={calculators:{...i.calculators},postpartum:i.postpartum,combineMode:i.combineMode};if(s&&typeof s=="object"){Object.keys(g.calculators).forEach(p=>{typeof s?.calculators?.[p]=="boolean"&&(g.calculators[p]=s.calculators[p])});const h=xs(s.combineMode);h&&(g.combineMode=h);const P=cn(s.postpartum);P!==null&&(g.postpartum=P)}return g},Ns=()=>{const{cycleId:s}=jn(),i=Sn(),{currentCycle:g,archivedCycles:h,isLoading:P,addOrUpdateDataPoint:p,toggleIgnoreRecord:q,getCycleById:U}=$n(),[S,w]=c.useState(null),[G,te]=c.useState(!1),[Z,Y]=c.useState(!1),R=!s||s===g.id,Q=R?null:h.find(t=>t.id===s);c.useEffect(()=>{if(R){w(null),te(!1),Y(!1);return}if(Q){w(null),te(!1),Y(!1);return}let t=!0;return te(!0),U(s).then(o=>{t&&(o?(w(o),Y(!1)):(w(null),Y(!0)))}).catch(()=>{t&&(w(null),Y(!0))}).finally(()=>{t&&te(!1)}),()=>{t=!1}},[R,Q,U,s]);const u=R?g:Q||S,z=!R&&!Q,A=!R&&u?.id,ne=R?P&&!g?.id:G||P&&!Q&&!S,{preferences:y,savePreferences:ke}=vn(),E=y?.manualCpm,ue=y?.manualCpmBase,se=y?.manualT8,le=y?.manualT8Base,f=["auto","manual","none"].includes(y?.cpmMode)?y.cpmMode:"auto",fe=["auto","manual","none"].includes(y?.t8Mode)?y.t8Mode:"auto",_=c.useMemo(()=>{if(!A||!u?.startDate)return"";const t=n=>{if(!n)return null;try{return Lt(ct(n),"dd/MM/yyyy")}catch(r){return console.error("Error formatting cycle date",r),n}},o=t(u.startDate),a=t(u.endDate)??"Sin fecha de fin";return o?`Ciclo ${o} - ${a}`:""},[A,u?.startDate,u?.endDate]),ye=c.useMemo(()=>{const t=[];return Array.isArray(h)&&h.length>0&&t.push(...h),g?.id&&t.push(g),u?.id&&!t.some(o=>o?.id===u.id)&&t.push(u),t},[h,g,u]),[Ie,x]=c.useState(typeof window<"u"&&window.innerWidth>window.innerHeight?"landscape":"portrait"),[he,Be]=c.useState(!1),[X,kt]=c.useState(!1),[Dt,Re]=c.useState(!1),[Ke,Je]=c.useState(null),[Mt,ut]=c.useState(null),[me,K]=c.useState(!1),[L,st]=c.useState(!1),[Ze,_e]=c.useState(!1),[Ce,Qe]=c.useState(null),[Pe,We]=c.useState(()=>{const t={showRelationsRow:rn.showRelationsRow,fertilityStartConfig:vt(rn.fertilityStartConfig)};if(typeof window>"u")return t;try{const o=window.localStorage.getItem(Xt);if(o){const a=JSON.parse(o),n={...t,...a};typeof a?.showRelationsRow=="boolean"?n.showRelationsRow=a.showRelationsRow:a?.showRelationsRow!=null&&(n.showRelationsRow=!!a.showRelationsRow),n.fertilityStartConfig=vt(a?.fertilityStartConfig);const r=cn(a?.fertilityStartConfig?.postpartum);if(a?.fertilityStartConfig?.postpartum!=null&&r===null)try{window.localStorage.setItem(Xt,JSON.stringify({...a,fertilityStartConfig:n.fertilityStartConfig}))}catch(l){console.warn("No se pudieron limpiar los ajustes del gráfico.",l)}return n}}catch(o){console.warn("No se pudieron cargar los ajustes del gráfico.",o)}return t});c.useEffect(()=>{y&&We(t=>{const o=vt(t.fertilityStartConfig),a=vt(y.fertilityStartConfig);let n=!1;return typeof y.showRelationsRow=="boolean"&&t.showRelationsRow!==y.showRelationsRow&&(n=!0),o.combineMode!==a.combineMode&&(n=!0),o.postpartum!==a.postpartum&&(n=!0),Object.keys(o.calculators??{}).some(r=>o.calculators?.[r]!==a.calculators?.[r])&&(n=!0),n?{...t,showRelationsRow:typeof y.showRelationsRow=="boolean"?y.showRelationsRow:t.showRelationsRow,fertilityStartConfig:a}:t})},[y]);const ae=c.useMemo(()=>vt(Pe.fertilityStartConfig),[Pe.fertilityStartConfig]),Nt=c.useMemo(()=>({...ae,calculators:{...ae.calculators,cpm:ae.calculators.cpm&&f!=="none",t8:ae.calculators.t8&&fe!=="none"}}),[ae,f,fe]);c.useEffect(()=>{if(!(typeof window>"u"))try{const t={...Pe,fertilityStartConfig:ae};window.localStorage.setItem(Xt,JSON.stringify(t))}catch(t){console.warn("No se pudieron guardar los ajustes del gráfico.",t)}},[Pe,ae]);const Le=c.useRef(!1),He=c.useRef(0),De=c.useRef(null),be=c.useRef(null),pe=!!(Ke&&String(Ke.id||"").startsWith("placeholder-"));if(c.useEffect(()=>{if(typeof document>"u")return;const t=document.body,o=document.documentElement;if(he){De.current===null&&(De.current=t.style.overflow),be.current===null&&(be.current=o.style.overflow),t.style.overflow="hidden",o.style.overflow="hidden";return}return De.current!==null&&(t.style.overflow=De.current,De.current=null),be.current!==null&&(o.style.overflow=be.current,be.current=null),()=>{De.current!==null&&(t.style.overflow=De.current,De.current=null),be.current!==null&&(o.style.overflow=be.current,be.current=null)}},[he]),c.useLayoutEffect(()=>{window.dispatchEvent(new Event("resize"))},[Ie,he]),c.useEffect(()=>{if(typeof window>"u")return;const t=()=>{if(X)return;const o=window.innerWidth>window.innerHeight?"landscape":"portrait";x(a=>a===o?a:o),window.dispatchEvent(new Event("resize"))};return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),t(),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[X]),ne)return e.jsx(Tt,{children:e.jsx("div",{className:"flex h-full flex-col items-center justify-center space-y-4 bg-gradient-to-br from-rose-100 via-pink-100 to-rose-100 px-4 py-8 text-center text-fertiliapp-fuerte",children:e.jsx("p",{children:"Cargando…"})})});if(!u?.id)return s&&Z?e.jsx(Tt,{children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 px-4 py-8 text-center text-fertiliapp-fuerte",children:[e.jsx("p",{children:"No se encontró el ciclo solicitado."}),e.jsx(St,{asChild:!0,className:"bg-fertiliapp-fuerte rounded-3xl text-white shadow",children:e.jsx(zt,{to:"/archived-cycles",children:"Volver a Mis Ciclos"})})]})}):e.jsx(Tt,{children:e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 px-4 py-8 text-center text-fertiliapp-fuerte",children:[e.jsx("p",{children:"No hay ciclo activo."}),e.jsx(St,{asChild:!0,className:"bg-fertiliapp-fuerte rounded-3xl text-white shadow",children:e.jsx(zt,{to:"/records",children:"Ir a Mis Registros"})})]})});const re=28,Se=10,Te=25,$e=ct(u.startDate),Me=u.data||[],at=c.useMemo(()=>(Array.isArray(Me)?Me.find(o=>o?.peak_marker==="peak"):null)?.isoDate||null,[Me]),ft=Me.reduce((t,o)=>{const a=ct(o.isoDate);return a>t?a:t},$e),ht=dt(new Date),pt=!R,rt=pt&&u?.endDate?dt(ct(u.endDate)):null,Rt=pt?rt??ft:ft>ht?ft:ht,Ge=$t(dt(Rt),$e),Ue=Math.max(re,Ge+1),yt=rt?$t(rt,$e)+1:null,Ne=yt?Math.min(Ue,yt):Ue,et=hs($e,Ne).map(t=>{const o=Me.find(a=>a.isoDate===t.isoDate);return o?{...o,date:t.date}:t}),ot=X?"landscape":Ie,Ye=he?ot==="portrait"?Se:Te:ot==="portrait"?Se:re;let bt=0;if(ot!=="landscape"){const t=$t(new Date,dt($e)),o=Math.min(Math.max(t,0),Ne-1);let a=Math.min(Ne,o+1);o<Ye-1&&(a=Math.min(Ne,Ye)),bt=Math.max(0,a-Ye)}const v={backgroundColor:"#fff7fb",backgroundImage:`
      radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.18) 0, transparent 55%),
      radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.16) 0, transparent 55%),
      radial-gradient(130% 130% at 0% 100%, rgba(251,113,133,0.08) 0, transparent 60%),
      radial-gradient(140% 140% at 100% 100%, rgba(255,255,255,0.9) 0, rgba(255,247,250,0.3) 40%, transparent 70%)
    `},d="calc(var(--app-vh, 1vh) * 100)",m="var(--bottom-nav-safe)",oe=he?{...v,height:d,maxHeight:d,paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"}:{...v,height:`calc(${d} - ${m})`,maxHeight:`calc(${d} - ${m})`,paddingTop:"env(safe-area-inset-top)"},V=(t,o=null)=>{Je(t),ut(o??null),Re(!0)},T=async(t,o)=>{try{if(await q(t,o),z){const a=await U(t);a&&w(a)}}catch(a){console.error("Error toggling ignore state:",a)}},xe=t=>{const o=t===!0;We(a=>({...a,showRelationsRow:o})),typeof ke=="function"&&ke({showRelationsRow:o}).catch(a=>{console.error("Failed to persist relations row preference",a)})},je=(t,o)=>{let a=null;We(n=>{const r=vt(n.fertilityStartConfig),l=o===!0;return r.calculators?.[t]===l?n:(a={...r,calculators:{...r.calculators,[t]:l}},{...n,fertilityStartConfig:a})}),a&&typeof ke=="function"&&ke({fertilityStartConfig:a}).catch(n=>{console.error("Failed to persist calculator preference",n)})},tt=t=>{let o=null;We(a=>{const n=vt(a.fertilityStartConfig),r=t===!0;if(n.postpartum===r)return a;const C={...n.calculators??Jt().calculators,cpm:!r,t8:!r};return o={...n,postpartum:r,calculators:C},{...a,fertilityStartConfig:o}}),o&&typeof ke=="function"&&ke({fertilityStartConfig:o}).catch(a=>{console.error("Failed to persist postpartum preference",a)})},$=i?.state?.fertilityCalculatorCandidates,D=u?.fertilityCalculatorCandidates,k=c.useMemo(()=>{const t=[Array.isArray($)?$:null,Array.isArray(D)?D:null].find(o=>Array.isArray(o)&&o.length>0);return t?t.map(o=>{if(!o)return null;const{source:a,day:n,reason:r}=o;if(a!=="CPM"&&a!=="T8")return null;const l=Number(n);return Number.isFinite(l)?{source:a,day:l,reason:typeof r=="string"?r:""}:null}).filter(Boolean):null},[$,D]),Ve=c.useMemo(()=>{const t=On(ye),o=Pn(ye,Tn),a=[];return f==="auto"&&t&&a.push(t),fe==="auto"&&o&&a.push(o),a},[ye,f,fe]),wt=c.useMemo(()=>{const t=[],o=(a,n,r,l)=>{if(a!=="manual")return;const C=Number(r);if(!Number.isFinite(C)||C<=0)return;const O=Number(l),ie=Number.isFinite(O)&&O>0,F=ie?Number.isInteger(O)?`${O}`:`${Number(O.toFixed(2))}`:null,W=ie?n==="CPM"?`ciclo base: ${F} días`:`base ${ms(n)}: ${F}`:null,J=W?`Manual desde dashboard (${W})`:"Manual desde dashboard";t.push({source:n,day:Math.max(1,C),reason:J,kind:"calculator",isManual:!0,manualBase:ie?O:null})};return o(f,"CPM",E,ue),o(fe,"T8",se,le),t},[f,E,ue,se,le,fe]),mt=c.useMemo(()=>{const t=new Map;(Array.isArray(k)?k:[]).forEach(r=>{const l=Ot(r?.source);l&&t.set(l,r)});const o=new Map;wt.forEach(r=>{const l=Ot(r?.source);l&&o.set(l,r)});const a=f==="manual"?o.get("CPM")??t.get("CPM")??null:f==="auto"?Ve.find(r=>Ot(r?.source)==="CPM")??null:null,n=fe==="manual"?o.get("T8")??t.get("T8")??null:fe==="auto"?Ve.find(r=>Ot(r?.source)==="T8")??null:null;return[a,n].filter(Boolean)},[Ve,f,wt,k,fe]),Fe=async(t,o=!0)=>{if(!u?.id||!t?.isoDate)return;const a=r=>{if(r==null||r==="")return null;const l=parseFloat(String(r).replace(",","."));return Number.isFinite(l)?l:null},n=o??!(t.peak_marker==="peak"||t.peakStatus==="P");K(!0);try{const r=t.timestamp?Lt(ct(t.timestamp),"HH:mm"):Lt(new Date,"HH:mm");let l=Array.isArray(t.measurements)&&t.measurements.length>0?t.measurements:[{temperature:t.temperature_chart??t.temperature_raw??null,temperature_corrected:t.temperature_corrected??null,time:r,time_corrected:t.time_corrected??r,selected:!0,use_corrected:t.use_corrected??!1}];l.length===0&&(l=[{temperature:null,temperature_corrected:null,time:r,time_corrected:r,selected:!0,use_corrected:!1}]);const C=l.map((F,W)=>{const J=F.time||r,M=F.time_corrected||J;return{temperature:a(F.temperature??F.temperature_raw),time:J,selected:W===0?!0:!!F.selected,temperature_corrected:a(F.temperature_corrected),time_corrected:M,use_corrected:!!F.use_corrected}});C.some(F=>F.selected)||(C[0].selected=!0);const O={isoDate:t.isoDate,measurements:C,mucusSensation:t.mucus_sensation??t.mucusSensation??"",mucusAppearance:t.mucus_appearance??t.mucusAppearance??"",fertility_symbol:t.fertility_symbol??"none",observations:t.observations??"",had_relations:t.had_relations??t.hadRelations??!1,ignored:t.ignored??!1,peak_marker:n?"peak":null},ie=t?.id&&!String(t.id).startsWith("placeholder-")?t:null;await p(O,ie,u.id)}catch(r){console.error("Error toggling peak marker:",r)}finally{K(!1)}},qe=c.useCallback(()=>{Re(!1),Je(null),ut(null)},[]),xt=async(t,{keepFormOpen:o=!1}={})=>{if(u?.id){K(!0),o&&(He.current=Date.now()+500);try{if(await p(t,Ke,u.id),z){const a=await U(u.id);a&&w(a)}o||(Re(!1),Je(null),ut(null))}finally{K(!1)}}},Et=t=>{Je(t)},It=()=>{st(t=>!t)},it=c.useCallback(()=>{Qe(null)},[]),lt=t=>{if(t.preventDefault(),Le.current){Le.current=!1;return}It()},ce=t=>{t.pointerType==="touch"&&(t.preventDefault(),Le.current=!0,It())},Xe=c.useCallback(t=>{if(t){Re(!0);return}Date.now()<He.current||qe()},[qe]),ge=c.useCallback(t=>{if(!Number.isInteger(t)||t<0||t>=et.length)return"—";const o=et[t],a=o?.isoDate??o?.date;if(!a)return"—";try{const n=typeof a=="string"?ct(a):a;return Lt(n,"dd/MM")}catch(n){return console.error("Error formatting date from index",n),"—"}},[et]),Ae=c.useCallback((t={})=>{if(!t)return;const o=t.phase??null,a=t.reasons??{},n=a?.aggregate??null,r=Array.isArray(n?.usedCandidates)?n.usedCandidates:[],l=a?.window??a?.fertileWindow??null,C=Number.isInteger(a?.startIndex)?a.startIndex:Number.isInteger(a?.fertileStartFinalIndex)?a.fertileStartFinalIndex:null,O=!!ae?.postpartum,ie=!O&&!!(ae?.calculators?.cpm||ae?.calculators?.t8),F=j=>(j?.source??j?.originalSource??"").toString().toUpperCase(),W=()=>{const j=Number.isInteger(C)?C+1:null;return j?{candidate:r.find(B=>Number.isFinite(B?.day)&&Math.round(B.day)===j)??r[0]??null,dayNumber:j}:{candidate:null,dayNumber:null}},J=()=>{const{candidate:j}=W(),N=F(j);if(N==="CPM")return"alcanzar valor CPM";if(N==="T8"||N==="T-8")return"alcanzar valor T-8";if(a?.source==="marker"||a?.details?.explicitStartDay!=null)return"marcador";const B=(j?.reason??"").toUpperCase(),H=B.includes("S")||B.includes("BIP");return!B&&!N?null:H?"cambio en la sensación":"presencia de moco"};let M="",I="",b=null;if(o==="relativeInfertile"){M="Relativamente infértil";const j=Number.isInteger(t?.limitIndex)?t.limitIndex:Number.isInteger(t?.endIndex)?t.endIndex:Number.isInteger(t?.todayIndex)?t.todayIndex:null,N=Number.isInteger(C)&&Number.isInteger(j)&&C<=j,B=J(),H=ge(C);N?(I=`Fin de fase por ${B??"—"}.`,b=H!=="—"?`Inicio fértil: ${H}.`:null):ie?I="A la espera de cálculo (CPM/T-8) o signos de moco/sensación.":I="A la espera de signos de moco/sensación."}else if(o==="fertile"){M="Fase fértil";const j=J()??"—",B=ge(C)??"—",H=Number.isFinite(l?.endIndex),de=Number.isInteger(l?.mucusInfertileStartIndex),we=Number.isInteger(l?.temperatureInfertileStartIndex);I=`Iniciada el ${B} por ${j}.`,H?de&&we?b="Finalizada por doble criterio.":de?b="Finalizada por día pico.":we&&(b="Finalizada por temperatura."):b="A la espera de cierre por día pico y/o confirmación de temperatura."}else if(o==="postOvulatory"){const j=(t?.displayLabel??t?.label??"").toLowerCase(),N=t?.status??a?.status??null,B=ge(Number.isInteger(a?.temperature?.confirmationIndex)?a.temperature.confirmationIndex:Number.isInteger(a?.temperature?.startIndex)?a.temperature.startIndex:l?.temperatureInfertileStartIndex),H=ge(a?.mucus?.peakDayIndex),de=ge(Number.isInteger(a?.mucus?.infertileStartIndex)?a.mucus.infertileStartIndex:t?.startIndex),we=ge(t?.startIndex);if(N==="absolute"||t?.displayLabel==="Infertilidad absoluta")M="Infertilidad postovulatoria confirmada",I=`Comienza el ${we}.`,b=`Confirmada por temperatura (${B}) y 3.º/4.º día postpico (${de}).`;else if(j.includes("moco")){M="Infertilidad post-pico";const ve=Number.isInteger(a?.mucus?.infertileStartIndex)?a.mucus.infertileStartIndex:Number.isInteger(t?.startIndex)?t.startIndex:null,ee=Number.isInteger(a?.mucus?.peakDayIndex)?a.mucus.peakDayIndex:null;let Ee="día postpico";if(Number.isInteger(ve)&&Number.isInteger(ee)){const Oe=ve-ee;Oe===3?Ee="3.º día postpico":Oe===4&&(Ee="4.º día postpico")}I=`Alcanzada el ${we} por ${Ee}. Día pico: ${H}.`,b="A la espera de confirmación por temperatura."}else j.includes("temperatura")?(M="Infertilidad postovulatoria por temperatura",I=`Temperatura confirmada el ${B}.`,b="A la espera de determinación del día pico."):(M="Fase postovulatoria",I="Interpretación postovulatoria disponible.",b=N==="pending"?"Pendiente completar el segundo criterio.":null)}else if(o==="nodata")(a?.status??t?.status??null)==="no-fertile-window"?(M="Sin ventana fértil identificable",I="No se ha identificado un inicio fértil claro en este ciclo (ni por moco, ni por calculadora, ni por marcador explícito)."):(M="Sin datos suficientes",I="Añade registros de sensación, moco o temperatura para interpretar el ciclo.");else if(t?.message)M=t.message;else return;M&&Qe({title:M,message:I,description:b,postpartumActive:O})},[ae,ge,et.length,Qe]),gt=()=>{if(!he){Be(!0),kt(!0);return}kt(!1);const t=typeof window<"u"&&window.innerWidth>window.innerHeight?"landscape":"portrait";x(t),Be(!1)};return e.jsx(Tt,{hideBottomNav:he,children:e.jsxs("div",{className:he?"fixed inset-0 z-50 h-app w-[100vw] overflow-y-auto overflow-x-hidden":"relative w-full h-full overflow-y-auto overflow-x-hidden",style:oe,children:[A&&!he&&e.jsx(St,{asChild:!0,variant:"ghost",className:"absolute top-4 left-4 z-10 bg-white/20 text-slate-700 hover:brightness-95",children:e.jsxs(zt,{to:`/cycle/${u.id}`,className:"flex items-center gap-1",children:[e.jsx(Wn,{className:"h-4 w-4"}),_&&e.jsx("span",{className:"ml-1 text-xs font-semibold text-slate-700 sm:text-sm",children:_})]})}),e.jsx(St,{onClick:()=>_e(t=>!t),variant:"ghost",size:"icon",className:"absolute top-16 right-4 z-10 p-2 rounded-full bg-white/20 shadow-lg shadow-secundario text-secundario border hover:brightness-95","aria-label":"Ajustes",children:e.jsx(Un,{className:"h-4 w-4"})}),e.jsx(St,{onClick:lt,onPointerUp:ce,variant:"ghost",size:"icon",className:`absolute top-4 right-20 z-10 p-2 rounded-full transition-colors ${L?"bg-fertiliapp-fuerte text-white shadow-lg shadow-fertiliapp-fuerte/50 border-fertiliapp-fuerte/70":"bg-white/20 text-fertiliapp-fuerte border border-fertiliapp-fuerte hover:brightness-95 shadow-md"}`,children:L?e.jsx(Gn,{className:"h-4 w-4"}):e.jsx(zn,{className:"h-4 w-4"})}),e.jsx(St,{onClick:gt,className:"absolute top-4 right-4 z-10 bg-white/20 rounded-full text-slate-600 hover:bg-pink-50/80 shadow-md border border-slate-400/50 backdrop-blur-sm","aria-label":he?"Salir de pantalla completa":"Rotar gráfico",children:e.jsx(Hn,{className:"w-4 h-4"})}),e.jsx(fs,{data:et,isFullScreen:he,orientation:Ie,onToggleIgnore:T,onEdit:V,onTogglePeak:Fe,cycleId:u.id,initialScrollIndex:bt,visibleDays:Ye,showInterpretation:L,reduceMotion:!0,forceLandscape:X||Ie==="landscape",currentPeakIsoDate:at,showRelationsRow:Pe.showRelationsRow,fertilityStartConfig:Nt,fertilityCalculatorCycles:ye,fertilityCalculatorCandidates:mt,onShowPhaseInfo:Ae,isArchivedCycle:!R,cycleEndDate:u?.endDate??null}),Ze&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/30",onClick:()=>_e(!1),"aria-hidden":"true"}),e.jsx("div",{className:`fixed top-0 right-0 z-50 h-app w-72 sm:w-80 transform transition-transform duration-300 ease-in-out ${Ze?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex h-full flex-col gap-6 border-xl rounded-xl border-rose-100/60 bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-titulo",children:"Ajustes del gráfico"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Personaliza la visualización del gráfico"})]}),e.jsx(St,{variant:"ghost",size:"icon",className:"h-8 w-8 text-slate-400 hover:text-slate-600",onClick:()=>_e(!1),"aria-label":"Cerrar ajustes del gráfico",children:"×"})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-1",children:[e.jsxs("div",{className:"rounded-2xl border border-pink-100/70 bg-pink-50/40 p-4 flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"max-w-xs",children:[e.jsx(_n,{htmlFor:"toggle-relations-row",className:"text-sm font-semibold text-slate-700",children:"Mostrar fila RS"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Añade una fila dedicada a las relaciones sexuales debajo de la gráfica."})]}),e.jsx(Ht,{id:"toggle-relations-row",checked:Pe.showRelationsRow,onCheckedChange:xe,className:"mt-1"})]}),e.jsx("div",{className:"rounded-2xl border border-red-100/70 bg-red-50/40 p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 pt-1",children:[e.jsx("div",{className:"max-w-[65%]",children:e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Modo postparto"})}),e.jsx(Ht,{checked:!!ae.postpartum,onCheckedChange:tt,className:"mt-1"})]})}),e.jsxs("div",{className:"rounded-2xl border border-amber-100/70 bg-amber-50/40 p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Calculadoras complementarias"}),e.jsx("p",{className:"text-xs text-slate-500",children:"CPM y T-8 se combinan con los perfiles activos, salvo que actives el modo posparto."})]}),ae.postpartum&&e.jsx("p",{className:"text-xs font-medium text-rose-500",children:"El modo posparto está activo: CPM y T-8 se omiten del cálculo final."}),e.jsx("div",{className:"space-y-2",children:gs.map(t=>e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-sm text-slate-700",children:t.label}),e.jsx(Ht,{checked:!!ae.calculators?.[t.key],disabled:!!ae.postpartum,onCheckedChange:o=>je(t.key,o)})]},t.key))})]})]})]})}),e.jsx(ps,{isOpen:!!Ce,onClose:it,ariaLabel:"Detalle de interpretación del ciclo",containerClassName:"p-6",children:Ce&&e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-fertiliapp-fuerte",children:Ce.title}),Ce.postpartumActive&&e.jsx("span",{className:"rounded-full border border-rose-200 bg-rose-50 px-3 py-1 text-[11px] font-semibold text-rose-600",children:"Modo postparto"})]}),e.jsx("button",{type:"button",onClick:it,className:"rounded-full p-1 text-slate-400 transition hover:bg-slate-100 hover:text-slate-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-200","aria-label":"Cerrar detalle de interpretación",children:e.jsx(kn,{className:"h-5 w-5"})})]}),Ce.message&&e.jsx("p",{className:"text-sm leading-relaxed text-slate-700",children:Ce.message}),Ce.description&&e.jsx("p",{className:"text-sm leading-relaxed text-slate-500",children:Ce.description})]})}),e.jsx(Fn,{open:Dt,onOpenChange:Xe,children:e.jsx(Bn,{hideClose:!0,className:"bg-transparent border-none p-0 text-gray-800 w-[90vw] sm:w-auto max-w-md sm:max-w-lg md:max-w-xl max-h-[85vh] overflow-y-auto",onInteractOutside:t=>{Date.now()<He.current&&t.preventDefault()},onPointerDownOutside:t=>{Date.now()<He.current&&t.preventDefault()},children:e.jsx(Dn,{onSubmit:xt,onCancel:qe,initialData:Ke,cycleStartDate:u.startDate,cycleEndDate:u.endDate,isProcessing:me,isEditing:!!Ke&&!pe,cycleData:u.data,onDateSelect:Et,initialSectionKey:Mt})})})]})})};export{Ns as default};
