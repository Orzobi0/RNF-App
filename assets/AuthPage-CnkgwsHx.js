import{c as d,r,u as q,a as O,b as A,j as e,m as v,B as x}from"./index-C041RoKp.js";import{I as u}from"./input-D9upNPQ0.js";import{L as m}from"./label-DmhTYPl7.js";import{I as B}from"./InstallPrompt-DuMtRlGW.js";import{E as b,a as w}from"./eye-fkTjB7nE.js";const j=d("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),D=d("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),H=d("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),K=d("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),z=()=>{const[a,p]=r.useState(!0),[i,N]=r.useState(""),[l,h]=r.useState(""),[f,y]=r.useState(""),[n,k]=r.useState(!1),[o,C]=r.useState(!1),{login:P,register:I,resetPassword:S}=q(),E=O(),{toast:s}=A(),[g,c]=r.useState(!1),L=!1,F=async t=>{t.preventDefault(),c(!0);try{if(a)await P(i,l),s({title:"Inicio de sesión exitoso",description:"Bienvenida de nuevo."}),E("/");else{if(l!==f){s({title:"Error de registro",description:"Las contraseñas no coinciden.",variant:"destructive"}),c(!1);return}await I(i,l),s({title:"Verificación requerida",description:"Hemos enviado un correo de verificación. Revisa tu bandeja de entrada para activar tu cuenta."}),p(!0),h(""),y("")}c(!1)}catch(M){s({title:a?"Error al iniciar sesión":"Error al registrarse",description:M.message,variant:"destructive"}),c(!1)}},R=async()=>{if(!i){s({title:"Correo requerido",description:"Introduce tu correo para restablecer la contraseña.",variant:"destructive"});return}try{await S(i),s({title:"Correo enviado",description:"Revisa tu bandeja para restablecer la contraseña."})}catch(t){s({title:"Error",description:t.message,variant:"destructive"})}};return e.jsxs("div",{className:"relative flex h-app flex-col items-center justify-center p-4",children:[e.jsxs(v.div,{className:"w-full max-w-md bg-white/80 backdrop-blur-md shadow-xl rounded-3xl p-8 sm:p-10",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(v.h1,{className:"text-3xl sm:text-4xl font-bold bg-clip-text text-transparent bg-fertiliapp py-2 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},children:"FertiliApp"}),e.jsx("p",{className:"text-gray-600 text-lg",children:a?"Inicia sesión para continuar":"Crea tu cuenta"})]}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"email",className:"flex items-center text-gray-700 text-lg",children:[e.jsx(H,{className:"mr-2 h-5 w-5 text-fertiliapp-fuerte"})," Correo Electrónico"]}),e.jsx(u,{id:"email",type:"email",value:i,onChange:t=>N(t.target.value),placeholder:"tu@email.com",required:!0,className:"bg-gray-50 border-gray-200 text-gray-800 placeholder-gray-400 rounded-3xl focus:ring-fertiliapp-fuerte focus:border-fertiliapp-fuerte text-base py-3 px-4"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"password",className:"flex items-center text-gray-700 text-lg",children:[e.jsx(j,{className:"mr-2 h-5 w-5 text-fertiliapp-fuerte"})," Contraseña"]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"password",type:n?"text":"password",value:l,onChange:t=>h(t.target.value),placeholder:"••••••••",required:!0,className:"bg-gray-50 border-gray-200 text-gray-800 placeholder-gray-400 rounded-3xl focus:ring-fertiliapp-fuerte focus:border-fertiliapp-fuerte text-base py-3 px-4 pr-10"}),e.jsx("button",{type:"button",onClick:()=>k(!n),className:"absolute inset-y-0 right-3 flex items-center text-gray-500","aria-label":n?"Ocultar contraseña":"Mostrar contraseña",children:n?e.jsx(b,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})})]})]}),a&&e.jsx("div",{className:"text-right",children:e.jsx(x,{variant:"link",type:"button",onClick:R,className:"text-pink-600 hover:text-pink-500 text-sm",children:"¿Olvidaste tu contraseña?"})}),!a&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"confirmPassword",className:"flex items-center text-gray-700 text-lg",children:[e.jsx(j,{className:"mr-2 h-5 w-5 text-fertiliapp-fuerte"})," Confirmar Contraseña"]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{id:"confirmPassword",type:o?"text":"password",value:f,onChange:t=>y(t.target.value),placeholder:"••••••••",required:!0,className:"bg-gray-50 border-gray-200 text-gray-800 placeholder-gray-400 focus:ring-fertiliapp-fuerte focus:border-fertiliapp-fuerte text-base py-3 px-4 pr-10"}),e.jsx("button",{type:"button",onClick:()=>C(!o),className:"absolute inset-y-0 right-3 flex items-center text-gray-500","aria-label":o?"Ocultar contraseña":"Mostrar contraseña",children:o?e.jsx(b,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})})]})]}),e.jsx(x,{type:"submit",disabled:g,className:"w-full bg-fertiliapp-fuerte hover:brithness-95 text-white font-semibold py-3 text-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center",children:g?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):a?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-5 w-5"})," Iniciar Sesión"]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"mr-2 h-5 w-5"})," Registrarse"]})})]}),e.jsx(B,{className:"mt-6",buttonClassName:"w-full bg-fertiliapp-fuerte hover:brightness-95",forceVisible:L}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(x,{variant:"link",onClick:()=>p(!a),className:"text-pink-600 hover:text-pink-500 text-base",children:a?"¿No tienes cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"})})]}),e.jsx("footer",{className:"w-full max-w-md mt-12 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," FertiliApp. Todos los derechos reservados."]})})]})};export{z as default};
