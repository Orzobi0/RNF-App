const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthPage-CUbkr3hY.js","assets/input-Dw-8uckr.js","assets/label-EI0mLLM6.js","assets/InstallPrompt-Euz9pvEE.js","assets/eye-BO0jdhTY.js","assets/DashboardPage-BDNTuhm0.js","assets/PostpartumExitDialog-CEK8JgwJ.js","assets/OverlapWarningDialog-BV8YTdug.js","assets/useCycleData-O3LOYKfm.js","assets/badge-BIiH4rlp.js","assets/DataEntryForm-DyT-Zmik.js","assets/computePeakStatuses-P7Htr2a9.js","assets/useFertilityChart-BSJtXLp4.js","assets/ArchivedCyclesPage-NGcgQkXK.js","assets/DeletionDialog-Cv8FnlL5.js","assets/CycleDetailPage-DgsvXMVG.js","assets/RecordsPage-BS9mtmw8.js","assets/arrow-left-DCfQQHUA.js","assets/SettingsPage-EqYCCQx3.js","assets/ChartPage-Cp2uqr2j.js"])))=>i.map(i=>d[i]);
function TD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var gH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jg={exports:{}},Sc={},Zg={exports:{}},We={};var rE;function ED(){if(rE)return We;rE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,R={};function C(D,H,oe){this.props=D,this.context=H,this.refs=R,this.updater=oe||E}C.prototype.isReactComponent={},C.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=C.prototype;function O(D,H,oe){this.props=D,this.context=H,this.refs=R,this.updater=oe||E}var F=O.prototype=new j;F.constructor=O,x(F,C.prototype),F.isPureReactComponent=!0;var z=Array.isArray,ne=Object.prototype.hasOwnProperty,Z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(D,H,oe){var ae,ue={},ve=null,Re=null;if(H!=null)for(ae in H.ref!==void 0&&(Re=H.ref),H.key!==void 0&&(ve=""+H.key),H)ne.call(H,ae)&&!P.hasOwnProperty(ae)&&(ue[ae]=H[ae]);var Ue=arguments.length-2;if(Ue===1)ue.children=oe;else if(1<Ue){for(var $e=Array(Ue),ct=0;ct<Ue;ct++)$e[ct]=arguments[ct+2];ue.children=$e}if(D&&D.defaultProps)for(ae in Ue=D.defaultProps,Ue)ue[ae]===void 0&&(ue[ae]=Ue[ae]);return{$$typeof:n,type:D,key:ve,ref:Re,props:ue,_owner:Z.current}}function k(D,H){return{$$typeof:n,type:D.type,key:H,ref:D.ref,props:D.props,_owner:D._owner}}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function M(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return H[oe]})}var U=/\/+/g;function N(D,H){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):H.toString(36)}function fe(D,H,oe,ae,ue){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var Re=!1;if(D===null)Re=!0;else switch(ve){case"string":case"number":Re=!0;break;case"object":switch(D.$$typeof){case n:case e:Re=!0}}if(Re)return Re=D,ue=ue(Re),D=ae===""?"."+N(Re,0):ae,z(ue)?(oe="",D!=null&&(oe=D.replace(U,"$&/")+"/"),fe(ue,H,oe,"",function(ct){return ct})):ue!=null&&(L(ue)&&(ue=k(ue,oe+(!ue.key||Re&&Re.key===ue.key?"":(""+ue.key).replace(U,"$&/")+"/")+D)),H.push(ue)),1;if(Re=0,ae=ae===""?".":ae+":",z(D))for(var Ue=0;Ue<D.length;Ue++){ve=D[Ue];var $e=ae+N(ve,Ue);Re+=fe(ve,H,oe,$e,ue)}else if($e=w(D),typeof $e=="function")for(D=$e.call(D),Ue=0;!(ve=D.next()).done;)ve=ve.value,$e=ae+N(ve,Ue++),Re+=fe(ve,H,oe,$e,ue);else if(ve==="object")throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Re}function Pe(D,H,oe){if(D==null)return D;var ae=[],ue=0;return fe(D,ae,"","",function(ve){return H.call(oe,ve,ue++)}),ae}function J(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var ie={current:null},Y={transition:null},re={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:Y,ReactCurrentOwner:Z};function K(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:Pe,forEach:function(D,H,oe){Pe(D,function(){H.apply(this,arguments)},oe)},count:function(D){var H=0;return Pe(D,function(){H++}),H},toArray:function(D){return Pe(D,function(H){return H})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},We.Component=C,We.Fragment=t,We.Profiler=i,We.PureComponent=O,We.StrictMode=r,We.Suspense=d,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,We.act=K,We.cloneElement=function(D,H,oe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ae=x({},D.props),ue=D.key,ve=D.ref,Re=D._owner;if(H!=null){if(H.ref!==void 0&&(ve=H.ref,Re=Z.current),H.key!==void 0&&(ue=""+H.key),D.type&&D.type.defaultProps)var Ue=D.type.defaultProps;for($e in H)ne.call(H,$e)&&!P.hasOwnProperty($e)&&(ae[$e]=H[$e]===void 0&&Ue!==void 0?Ue[$e]:H[$e])}var $e=arguments.length-2;if($e===1)ae.children=oe;else if(1<$e){Ue=Array($e);for(var ct=0;ct<$e;ct++)Ue[ct]=arguments[ct+2];ae.children=Ue}return{$$typeof:n,type:D.type,key:ue,ref:ve,props:ae,_owner:Re}},We.createContext=function(D){return D={$$typeof:a,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:s,_context:D},D.Consumer=D},We.createElement=S,We.createFactory=function(D){var H=S.bind(null,D);return H.type=D,H},We.createRef=function(){return{current:null}},We.forwardRef=function(D){return{$$typeof:u,render:D}},We.isValidElement=L,We.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:J}},We.memo=function(D,H){return{$$typeof:h,type:D,compare:H===void 0?null:H}},We.startTransition=function(D){var H=Y.transition;Y.transition={};try{D()}finally{Y.transition=H}},We.unstable_act=K,We.useCallback=function(D,H){return ie.current.useCallback(D,H)},We.useContext=function(D){return ie.current.useContext(D)},We.useDebugValue=function(){},We.useDeferredValue=function(D){return ie.current.useDeferredValue(D)},We.useEffect=function(D,H){return ie.current.useEffect(D,H)},We.useId=function(){return ie.current.useId()},We.useImperativeHandle=function(D,H,oe){return ie.current.useImperativeHandle(D,H,oe)},We.useInsertionEffect=function(D,H){return ie.current.useInsertionEffect(D,H)},We.useLayoutEffect=function(D,H){return ie.current.useLayoutEffect(D,H)},We.useMemo=function(D,H){return ie.current.useMemo(D,H)},We.useReducer=function(D,H,oe){return ie.current.useReducer(D,H,oe)},We.useRef=function(D){return ie.current.useRef(D)},We.useState=function(D){return ie.current.useState(D)},We.useSyncExternalStore=function(D,H,oe){return ie.current.useSyncExternalStore(D,H,oe)},We.useTransition=function(){return ie.current.useTransition()},We.version="18.3.1",We}var iE;function Zv(){return iE||(iE=1,Zg.exports=ED()),Zg.exports}var sE;function ID(){if(sE)return Sc;sE=1;var n=Zv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,h){var m,g={},w=null,E=null;h!==void 0&&(w=""+h),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(E=d.ref);for(m in d)r.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:w,ref:E,props:g,_owner:i.current}}return Sc.Fragment=t,Sc.jsx=a,Sc.jsxs=a,Sc}var oE;function SD(){return oE||(oE=1,Jg.exports=ID()),Jg.exports}var G=SD(),b=Zv();const Jt=Jv(b),e_=TD({__proto__:null,default:Jt},[b]);var sf={},ey={exports:{}},zn={},ty={exports:{}},ny={};var aE;function PD(){return aE||(aE=1,(function(n){function e(Y,re){var K=Y.length;Y.push(re);e:for(;0<K;){var D=K-1>>>1,H=Y[D];if(0<i(H,re))Y[D]=re,Y[K]=H,K=D;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var re=Y[0],K=Y.pop();if(K!==re){Y[0]=K;e:for(var D=0,H=Y.length,oe=H>>>1;D<oe;){var ae=2*(D+1)-1,ue=Y[ae],ve=ae+1,Re=Y[ve];if(0>i(ue,K))ve<H&&0>i(Re,ue)?(Y[D]=Re,Y[ve]=K,D=ve):(Y[D]=ue,Y[ae]=K,D=ae);else if(ve<H&&0>i(Re,K))Y[D]=Re,Y[ve]=K,D=ve;else break e}}return re}function i(Y,re){var K=Y.sortIndex-re.sortIndex;return K!==0?K:Y.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],h=[],m=1,g=null,w=3,E=!1,x=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(Y){for(var re=t(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=Y)r(h),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(h)}}function z(Y){if(R=!1,F(Y),!x)if(t(d)!==null)x=!0,J(ne);else{var re=t(h);re!==null&&ie(z,re.startTime-Y)}}function ne(Y,re){x=!1,R&&(R=!1,j(S),S=-1),E=!0;var K=w;try{for(F(re),g=t(d);g!==null&&(!(g.expirationTime>re)||Y&&!M());){var D=g.callback;if(typeof D=="function"){g.callback=null,w=g.priorityLevel;var H=D(g.expirationTime<=re);re=n.unstable_now(),typeof H=="function"?g.callback=H:g===t(d)&&r(d),F(re)}else r(d);g=t(d)}if(g!==null)var oe=!0;else{var ae=t(h);ae!==null&&ie(z,ae.startTime-re),oe=!1}return oe}finally{g=null,w=K,E=!1}}var Z=!1,P=null,S=-1,k=5,L=-1;function M(){return!(n.unstable_now()-L<k)}function U(){if(P!==null){var Y=n.unstable_now();L=Y;var re=!0;try{re=P(!0,Y)}finally{re?N():(Z=!1,P=null)}}else Z=!1}var N;if(typeof O=="function")N=function(){O(U)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Pe=fe.port2;fe.port1.onmessage=U,N=function(){Pe.postMessage(null)}}else N=function(){C(U,0)};function J(Y){P=Y,Z||(Z=!0,N())}function ie(Y,re){S=C(function(){Y(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){x||E||(x=!0,J(ne))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var K=w;w=re;try{return Y()}finally{w=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=w;w=Y;try{return re()}finally{w=K}},n.unstable_scheduleCallback=function(Y,re,K){var D=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?D+K:D):K=D,Y){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=K+H,Y={id:m++,callback:re,priorityLevel:Y,startTime:K,expirationTime:H,sortIndex:-1},K>D?(Y.sortIndex=K,e(h,Y),t(d)===null&&Y===t(h)&&(R?(j(S),S=-1):R=!0,ie(z,K-D))):(Y.sortIndex=H,e(d,Y),x||E||(x=!0,J(ne))),Y},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Y){var re=w;return function(){var K=w;w=re;try{return Y.apply(this,arguments)}finally{w=K}}}})(ny)),ny}var lE;function CD(){return lE||(lE=1,ty.exports=PD()),ty.exports}var uE;function AD(){if(uE)return zn;uE=1;var n=Zv(),e=CD();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function w(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function E(o,l,c,p){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function x(o,l,c,p){if(l===null||typeof l>"u"||E(o,l,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function R(o,l,c,p,y,v,I){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=o,this.type=l,this.sanitizeURL=v,this.removeEmptyString=I}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new R(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];C[l]=new R(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new R(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new R(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new R(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new R(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new R(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new R(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new R(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function O(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(j,O);C[l]=new R(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(j,O);C[l]=new R(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(j,O);C[l]=new R(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new R(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new R(o,1,!1,o.toLowerCase(),null,!0,!0)});function F(o,l,c,p){var y=C.hasOwnProperty(l)?C[l]:null;(y!==null?y.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,c,y,p)&&(c=null),p||y===null?w(l)&&(c===null?o.removeAttribute(l):o.setAttribute(l,""+c)):y.mustUseProperty?o[y.propertyName]=c===null?y.type===3?!1:"":c:(l=y.attributeName,p=y.attributeNamespace,c===null?o.removeAttribute(l):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?o.setAttributeNS(p,l,c):o.setAttribute(l,c))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),Z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),Y=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var K=Object.assign,D;function H(o){if(D===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);D=l&&l[1]||""}return`
`+D+o}var oe=!1;function ae(o,l){if(!o||oe)return"";oe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ee){var p=ee}Reflect.construct(o,[],l)}else{try{l.call()}catch(ee){p=ee}o.call(l.prototype)}else{try{throw Error()}catch(ee){p=ee}o()}}catch(ee){if(ee&&p&&typeof ee.stack=="string"){for(var y=ee.stack.split(`
`),v=p.stack.split(`
`),I=y.length-1,V=v.length-1;1<=I&&0<=V&&y[I]!==v[V];)V--;for(;1<=I&&0<=V;I--,V--)if(y[I]!==v[V]){if(I!==1||V!==1)do if(I--,V--,0>V||y[I]!==v[V]){var B=`
`+y[I].replace(" at new "," at ");return o.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",o.displayName)),B}while(1<=I&&0<=V);break}}}finally{oe=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?H(o):""}function ue(o){switch(o.tag){case 5:return H(o.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return o=ae(o.type,!1),o;case 11:return o=ae(o.type.render,!1),o;case 1:return o=ae(o.type,!0),o;default:return""}}function ve(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case P:return"Fragment";case Z:return"Portal";case k:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case fe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case M:return(o.displayName||"Context")+".Consumer";case L:return(o._context.displayName||"Context")+".Provider";case U:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Pe:return l=o.displayName||null,l!==null?l:ve(o.type)||"Memo";case J:l=o._payload,o=o._init;try{return ve(o(l))}catch{}}return null}function Re(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(l);case 8:return l===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ue(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function $e(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ct(o){var l=$e(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),p=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return y.call(this)},set:function(I){p=""+I,v.call(this,I)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(I){p=""+I},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Gt(o){o._valueTracker||(o._valueTracker=ct(o))}function ss(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),p="";return o&&(p=$e(o)?o.checked?"true":"false":o.value),o=p,o!==c?(l.setValue(o),!0):!1}function Er(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function os(o,l){var c=l.checked;return K({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function as(o,l){var c=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;c=Ue(l.value!=null?l.value:c),o._wrapperState={initialChecked:p,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ls(o,l){l=l.checked,l!=null&&F(o,"checked",l,!1)}function Ti(o,l){ls(o,l);var c=Ue(l.value),p=l.type;if(c!=null)p==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?yt(o,l.type,c):l.hasOwnProperty("defaultValue")&&yt(o,l.type,Ue(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function bo(o,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,c||l===o.value||(o.value=l),o.defaultValue=l}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function yt(o,l,c){(l!=="number"||Er(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var Pt=Array.isArray;function Mn(o,l,c,p){if(o=o.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=l.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&p&&(o[c].defaultSelected=!0)}else{for(c=""+Ue(c),l=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}l!==null||o[y].disabled||(l=o[y])}l!==null&&(l.selected=!0)}}function us(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function cs(o,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if(Pt(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}o._wrapperState={initialValue:Ue(c)}}function $a(o,l){var c=Ue(l.value),p=Ue(l.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),l.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),p!=null&&(o.defaultValue=""+p)}function Fr(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function xo(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ds(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?xo(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ln,hs=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,p,y){MSApp.execUnsafeLocalFunction(function(){return o(l,c,p,y)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ln.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function tt(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},za=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(o){za.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Ur[l]=Ur[o]})});function fs(o,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||Ur.hasOwnProperty(o)&&Ur[o]?(""+l).trim():l+"px"}function Wa(o,l){o=o.style;for(var c in l)if(l.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=fs(c,l[c],p);c==="float"&&(c="cssFloat"),p?o.setProperty(c,y):o[c]=y}}var Ou=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ir(o,l){if(l){if(Ou[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ha(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function qa(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ei=null,Ii=null,Dt=null;function Mu(o){if(o=uc(o)){if(typeof Ei!="function")throw Error(t(280));var l=o.stateNode;l&&(l=_h(l),Ei(o.stateNode,o.type,l))}}function ms(o){Ii?Dt?Dt.push(o):Dt=[o]:Ii=o}function gs(){if(Ii){var o=Ii,l=Dt;if(Dt=Ii=null,Mu(o),l)for(o=0;o<l.length;o++)Mu(l[o])}}function Gd(o,l){return o(l)}function Kd(){}var jr=!1;function Qd(o,l,c){if(jr)return o(l,c);jr=!0;try{return Gd(o,l,c)}finally{jr=!1,(Ii!==null||Dt!==null)&&(Kd(),gs())}}function Ro(o,l){var c=o.stateNode;if(c===null)return null;var p=_h(c);if(p===null)return null;c=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var ys=!1;if(u)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){ys=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{ys=!1}function Yd(o,l,c,p,y,v,I,V,B){var ee=Array.prototype.slice.call(arguments,3);try{l.apply(c,ee)}catch(de){this.onError(de)}}var Si=!1,Br=null,Ga=!1,dr=null,Xd={onError:function(o){Si=!0,Br=o}};function Jd(o,l,c,p,y,v,I,V,B){Si=!1,Br=null,Yd.apply(Xd,arguments)}function Lu(o,l,c,p,y,v,I,V,B){if(Jd.apply(this,arguments),Si){if(Si){var ee=Br;Si=!1,Br=null}else throw Error(t(198));Ga||(Ga=!0,dr=ee)}}function Sr(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function Fu(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Zd(o){if(Sr(o)!==o)throw Error(t(188))}function eh(o){var l=o.alternate;if(!l){if(l=Sr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var c=o,p=l;;){var y=c.return;if(y===null)break;var v=y.alternate;if(v===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===c)return Zd(y),o;if(v===p)return Zd(y),l;v=v.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=v;else{for(var I=!1,V=y.child;V;){if(V===c){I=!0,c=y,p=v;break}if(V===p){I=!0,p=y,c=v;break}V=V.sibling}if(!I){for(V=v.child;V;){if(V===c){I=!0,c=v,p=y;break}if(V===p){I=!0,p=v,c=y;break}V=V.sibling}if(!I)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:l}function th(o){return o=eh(o),o!==null?ko(o):null}function ko(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=ko(o);if(l!==null)return l;o=o.sibling}return null}var Uu=e.unstable_scheduleCallback,Ka=e.unstable_cancelCallback,Do=e.unstable_shouldYield,Pi=e.unstable_requestPaint,vt=e.unstable_now,xm=e.unstable_getCurrentPriorityLevel,Qa=e.unstable_ImmediatePriority,ju=e.unstable_UserBlockingPriority,No=e.unstable_NormalPriority,Bu=e.unstable_LowPriority,Ya=e.unstable_IdlePriority,Vo=null,Yn=null;function nh(o){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Vo,o,void 0,(o.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Oo,$r=Math.log,hr=Math.LN2;function Oo(o){return o>>>=0,o===0?32:31-($r(o)/hr|0)|0}var zr=64,_s=4194304;function rt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ci(o,l){var c=o.pendingLanes;if(c===0)return 0;var p=0,y=o.suspendedLanes,v=o.pingedLanes,I=c&268435455;if(I!==0){var V=I&~y;V!==0?p=rt(V):(v&=I,v!==0&&(p=rt(v)))}else I=c&~y,I!==0?p=rt(I):v!==0&&(p=rt(v));if(p===0)return 0;if(l!==0&&l!==p&&(l&y)===0&&(y=p&-p,v=l&-l,y>=v||y===16&&(v&4194240)!==0))return l;if((p&4)!==0&&(p|=c&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=p;0<l;)c=31-Xn(l),y=1<<c,p|=o[c],l&=~y;return p}function Mo(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lo(o,l){for(var c=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes;0<v;){var I=31-Xn(v),V=1<<I,B=y[I];B===-1?((V&c)===0||(V&p)!==0)&&(y[I]=Mo(V,l)):B<=l&&(o.expiredLanes|=V),v&=~V}}function $u(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function zu(){var o=zr;return zr<<=1,(zr&4194240)===0&&(zr=64),o}function Wu(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function Fo(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Xn(l),o[l]=c}function Rm(o,l){var c=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<c;){var y=31-Xn(c),v=1<<y;l[y]=0,p[y]=-1,o[y]=-1,c&=~v}}function Hu(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var p=31-Xn(c),y=1<<p;y&l|o[p]&l&&(o[p]|=l),c&=~y}}var Ge=0;function Wr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var qu,Xa,Gu,Ku,Qu,Hr=!1,Ja=[],qr=null,Gr=null,dn=null,Uo=new Map,Ai=new Map,Jn=[],rh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ws(o,l){switch(o){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Uo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(l.pointerId)}}function Pr(o,l,c,p,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:l,domEventName:c,eventSystemFlags:p,nativeEvent:v,targetContainers:[y]},l!==null&&(l=uc(l),l!==null&&Xa(l)),o):(o.eventSystemFlags|=p,l=o.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),o)}function ih(o,l,c,p,y){switch(l){case"focusin":return qr=Pr(qr,o,l,c,p,y),!0;case"dragenter":return Gr=Pr(Gr,o,l,c,p,y),!0;case"mouseover":return dn=Pr(dn,o,l,c,p,y),!0;case"pointerover":var v=y.pointerId;return Uo.set(v,Pr(Uo.get(v)||null,o,l,c,p,y)),!0;case"gotpointercapture":return v=y.pointerId,Ai.set(v,Pr(Ai.get(v)||null,o,l,c,p,y)),!0}return!1}function Za(o){var l=zo(o.target);if(l!==null){var c=Sr(l);if(c!==null){if(l=c.tag,l===13){if(l=Fu(c),l!==null){o.blockedOn=l,Qu(o.priority,function(){Gu(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ht(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=el(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var p=new c.constructor(c.type,c);ps=p,c.target.dispatchEvent(p),ps=null}else return l=uc(c),l!==null&&Xa(l),o.blockedOn=c,!1;l.shift()}return!0}function sh(o,l,c){ht(o)&&c.delete(l)}function km(){Hr=!1,qr!==null&&ht(qr)&&(qr=null),Gr!==null&&ht(Gr)&&(Gr=null),dn!==null&&ht(dn)&&(dn=null),Uo.forEach(sh),Ai.forEach(sh)}function Ts(o,l){o.blockedOn===l&&(o.blockedOn=null,Hr||(Hr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,km)))}function Es(o){function l(y){return Ts(y,o)}if(0<Ja.length){Ts(Ja[0],o);for(var c=1;c<Ja.length;c++){var p=Ja[c];p.blockedOn===o&&(p.blockedOn=null)}}for(qr!==null&&Ts(qr,o),Gr!==null&&Ts(Gr,o),dn!==null&&Ts(dn,o),Uo.forEach(l),Ai.forEach(l),c=0;c<Jn.length;c++)p=Jn[c],p.blockedOn===o&&(p.blockedOn=null);for(;0<Jn.length&&(c=Jn[0],c.blockedOn===null);)Za(c),c.blockedOn===null&&Jn.shift()}var bi=z.ReactCurrentBatchConfig,xi=!0;function Kr(o,l,c,p){var y=Ge,v=bi.transition;bi.transition=null;try{Ge=1,Yu(o,l,c,p)}finally{Ge=y,bi.transition=v}}function oh(o,l,c,p){var y=Ge,v=bi.transition;bi.transition=null;try{Ge=4,Yu(o,l,c,p)}finally{Ge=y,bi.transition=v}}function Yu(o,l,c,p){if(xi){var y=el(o,l,c,p);if(y===null)$m(o,l,p,Qr,c),ws(o,p);else if(ih(y,o,l,c,p))p.stopPropagation();else if(ws(o,p),l&4&&-1<rh.indexOf(o)){for(;y!==null;){var v=uc(y);if(v!==null&&qu(v),v=el(o,l,c,p),v===null&&$m(o,l,p,Qr,c),v===y)break;y=v}y!==null&&p.stopPropagation()}else $m(o,l,p,null,c)}}var Qr=null;function el(o,l,c,p){if(Qr=null,o=qa(p),o=zo(o),o!==null)if(l=Sr(o),l===null)o=null;else if(c=l.tag,c===13){if(o=Fu(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Qr=o,null}function tl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xm()){case Qa:return 1;case ju:return 4;case No:case Bu:return 16;case Ya:return 536870912;default:return 16}default:return 16}}var Zn=null,nl=null,Ri=null;function ah(){if(Ri)return Ri;var o,l=nl,c=l.length,p,y="value"in Zn?Zn.value:Zn.textContent,v=y.length;for(o=0;o<c&&l[o]===y[o];o++);var I=c-o;for(p=1;p<=I&&l[c-p]===y[v-p];p++);return Ri=y.slice(o,1<p?1-p:void 0)}function jo(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Yr(){return!0}function Xu(){return!1}function vn(o){function l(c,p,y,v,I){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=v,this.target=I,this.currentTarget=null;for(var V in o)o.hasOwnProperty(V)&&(c=o[V],this[V]=c?c(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Yr:Xu,this.isPropagationStopped=Xu,this}return K(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),l}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=vn(Xr),Is=K({},Xr,{view:0,detail:0}),rl=vn(Is),il,sl,er,$o=K({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:je,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==er&&(er&&o.type==="mousemove"?(il=o.screenX-er.screenX,sl=o.screenY-er.screenY):sl=il=0,er=o),il)},movementY:function(o){return"movementY"in o?o.movementY:sl}}),Ju=vn($o),lh=K({},$o,{dataTransfer:0}),uh=vn(lh),ol=K({},Is,{relatedTarget:0}),hn=vn(ol),ch=K({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),dh=vn(ch),Ss=K({},Xr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),f=vn(Ss),_=K({},Xr,{data:0}),T=vn(_),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},te={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=te[o])?!!l[o]:!1}function je(){return me}var Ut=K({},Is,{key:function(o){if(o.key){var l=A[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=jo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Q[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:je,charCode:function(o){return o.type==="keypress"?jo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?jo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ot=vn(Ut),Kt=K({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tr=vn(Kt),ki=K({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:je}),Jr=vn(ki),Zr=K({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),al=vn(Zr),Zu=K({},$o,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),mk=vn(Zu),gk=[9,13,27,32],Dm=u&&"CompositionEvent"in window,ec=null;u&&"documentMode"in document&&(ec=document.documentMode);var yk=u&&"TextEvent"in window&&!ec,Qw=u&&(!Dm||ec&&8<ec&&11>=ec),Yw=" ",Xw=!1;function Jw(o,l){switch(o){case"keyup":return gk.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ll=!1;function vk(o,l){switch(o){case"compositionend":return Zw(l);case"keypress":return l.which!==32?null:(Xw=!0,Yw);case"textInput":return o=l.data,o===Yw&&Xw?null:o;default:return null}}function _k(o,l){if(ll)return o==="compositionend"||!Dm&&Jw(o,l)?(o=ah(),Ri=nl=Zn=null,ll=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Qw&&l.locale!=="ko"?null:l.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!wk[o.type]:l==="textarea"}function t0(o,l,c,p){ms(p),l=gh(l,"onChange"),0<l.length&&(c=new Bo("onChange","change",null,c,p),o.push({event:c,listeners:l}))}var tc=null,nc=null;function Tk(o){_0(o,0)}function hh(o){var l=fl(o);if(ss(l))return o}function Ek(o,l){if(o==="change")return l}var n0=!1;if(u){var Nm;if(u){var Vm="oninput"in document;if(!Vm){var r0=document.createElement("div");r0.setAttribute("oninput","return;"),Vm=typeof r0.oninput=="function"}Nm=Vm}else Nm=!1;n0=Nm&&(!document.documentMode||9<document.documentMode)}function i0(){tc&&(tc.detachEvent("onpropertychange",s0),nc=tc=null)}function s0(o){if(o.propertyName==="value"&&hh(nc)){var l=[];t0(l,nc,o,qa(o)),Qd(Tk,l)}}function Ik(o,l,c){o==="focusin"?(i0(),tc=l,nc=c,tc.attachEvent("onpropertychange",s0)):o==="focusout"&&i0()}function Sk(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return hh(nc)}function Pk(o,l){if(o==="click")return hh(l)}function Ck(o,l){if(o==="input"||o==="change")return hh(l)}function Ak(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Cr=typeof Object.is=="function"?Object.is:Ak;function rc(o,l){if(Cr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(l,y)||!Cr(o[y],l[y]))return!1}return!0}function o0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function a0(o,l){var c=o0(o);o=0;for(var p;c;){if(c.nodeType===3){if(p=o+c.textContent.length,o<=l&&p>=l)return{node:c,offset:l-o};o=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=o0(c)}}function l0(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?l0(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function u0(){for(var o=window,l=Er();l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=Er(o.document)}return l}function Om(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function bk(o){var l=u0(),c=o.focusedElem,p=o.selectionRange;if(l!==c&&c&&c.ownerDocument&&l0(c.ownerDocument.documentElement,c)){if(p!==null&&Om(c)){if(l=p.start,o=p.end,o===void 0&&(o=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(o,c.value.length);else if(o=(l=c.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var y=c.textContent.length,v=Math.min(p.start,y);p=p.end===void 0?v:Math.min(p.end,y),!o.extend&&v>p&&(y=p,p=v,v=y),y=a0(c,v);var I=a0(c,p);y&&I&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==I.node||o.focusOffset!==I.offset)&&(l=l.createRange(),l.setStart(y.node,y.offset),o.removeAllRanges(),v>p?(o.addRange(l),o.extend(I.node,I.offset)):(l.setEnd(I.node,I.offset),o.addRange(l)))}}for(l=[],o=c;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)o=l[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var xk=u&&"documentMode"in document&&11>=document.documentMode,ul=null,Mm=null,ic=null,Lm=!1;function c0(o,l,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Lm||ul==null||ul!==Er(p)||(p=ul,"selectionStart"in p&&Om(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ic&&rc(ic,p)||(ic=p,p=gh(Mm,"onSelect"),0<p.length&&(l=new Bo("onSelect","select",null,l,c),o.push({event:l,listeners:p}),l.target=ul)))}function fh(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var cl={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},Fm={},d0={};u&&(d0=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function ph(o){if(Fm[o])return Fm[o];if(!cl[o])return o;var l=cl[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in d0)return Fm[o]=l[c];return o}var h0=ph("animationend"),f0=ph("animationiteration"),p0=ph("animationstart"),m0=ph("transitionend"),g0=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(o,l){g0.set(o,l),s(l,[o])}for(var Um=0;Um<y0.length;Um++){var jm=y0[Um],Rk=jm.toLowerCase(),kk=jm[0].toUpperCase()+jm.slice(1);Ps(Rk,"on"+kk)}Ps(h0,"onAnimationEnd"),Ps(f0,"onAnimationIteration"),Ps(p0,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(m0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("cancel close invalid load scroll toggle".split(" ").concat(sc));function v0(o,l,c){var p=o.type||"unknown-event";o.currentTarget=c,Lu(p,l,void 0,o),o.currentTarget=null}function _0(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var p=o[c],y=p.event;p=p.listeners;e:{var v=void 0;if(l)for(var I=p.length-1;0<=I;I--){var V=p[I],B=V.instance,ee=V.currentTarget;if(V=V.listener,B!==v&&y.isPropagationStopped())break e;v0(y,V,ee),v=B}else for(I=0;I<p.length;I++){if(V=p[I],B=V.instance,ee=V.currentTarget,V=V.listener,B!==v&&y.isPropagationStopped())break e;v0(y,V,ee),v=B}}}if(Ga)throw o=dr,Ga=!1,dr=null,o}function _t(o,l){var c=l[Km];c===void 0&&(c=l[Km]=new Set);var p=o+"__bubble";c.has(p)||(w0(l,o,2,!1),c.add(p))}function Bm(o,l,c){var p=0;l&&(p|=4),w0(c,o,p,l)}var mh="_reactListening"+Math.random().toString(36).slice(2);function oc(o){if(!o[mh]){o[mh]=!0,r.forEach(function(c){c!=="selectionchange"&&(Dk.has(c)||Bm(c,!1,o),Bm(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[mh]||(l[mh]=!0,Bm("selectionchange",!1,l))}}function w0(o,l,c,p){switch(tl(l)){case 1:var y=Kr;break;case 4:y=oh;break;default:y=Yu}c=y.bind(null,l,c,o),y=void 0,!ys||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(l,c,{capture:!0,passive:y}):o.addEventListener(l,c,!0):y!==void 0?o.addEventListener(l,c,{passive:y}):o.addEventListener(l,c,!1)}function $m(o,l,c,p,y){var v=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var V=p.stateNode.containerInfo;if(V===y||V.nodeType===8&&V.parentNode===y)break;if(I===4)for(I=p.return;I!==null;){var B=I.tag;if((B===3||B===4)&&(B=I.stateNode.containerInfo,B===y||B.nodeType===8&&B.parentNode===y))return;I=I.return}for(;V!==null;){if(I=zo(V),I===null)return;if(B=I.tag,B===5||B===6){p=v=I;continue e}V=V.parentNode}}p=p.return}Qd(function(){var ee=v,de=qa(c),he=[];e:{var le=g0.get(o);if(le!==void 0){var we=Bo,Se=o;switch(o){case"keypress":if(jo(c)===0)break e;case"keydown":case"keyup":we=ot;break;case"focusin":Se="focus",we=hn;break;case"focusout":Se="blur",we=hn;break;case"beforeblur":case"afterblur":we=hn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Jr;break;case h0:case f0:case p0:we=dh;break;case m0:we=al;break;case"scroll":we=rl;break;case"wheel":we=mk;break;case"copy":case"cut":case"paste":we=f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=tr}var Ae=(l&4)!==0,jt=!Ae&&o==="scroll",q=Ae?le!==null?le+"Capture":null:le;Ae=[];for(var $=ee,X;$!==null;){X=$;var pe=X.stateNode;if(X.tag===5&&pe!==null&&(X=pe,q!==null&&(pe=Ro($,q),pe!=null&&Ae.push(ac($,pe,X)))),jt)break;$=$.return}0<Ae.length&&(le=new we(le,Se,null,c,de),he.push({event:le,listeners:Ae}))}}if((l&7)===0){e:{if(le=o==="mouseover"||o==="pointerover",we=o==="mouseout"||o==="pointerout",le&&c!==ps&&(Se=c.relatedTarget||c.fromElement)&&(zo(Se)||Se[Di]))break e;if((we||le)&&(le=de.window===de?de:(le=de.ownerDocument)?le.defaultView||le.parentWindow:window,we?(Se=c.relatedTarget||c.toElement,we=ee,Se=Se?zo(Se):null,Se!==null&&(jt=Sr(Se),Se!==jt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(we=null,Se=ee),we!==Se)){if(Ae=Ju,pe="onMouseLeave",q="onMouseEnter",$="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=tr,pe="onPointerLeave",q="onPointerEnter",$="pointer"),jt=we==null?le:fl(we),X=Se==null?le:fl(Se),le=new Ae(pe,$+"leave",we,c,de),le.target=jt,le.relatedTarget=X,pe=null,zo(de)===ee&&(Ae=new Ae(q,$+"enter",Se,c,de),Ae.target=X,Ae.relatedTarget=jt,pe=Ae),jt=pe,we&&Se)t:{for(Ae=we,q=Se,$=0,X=Ae;X;X=dl(X))$++;for(X=0,pe=q;pe;pe=dl(pe))X++;for(;0<$-X;)Ae=dl(Ae),$--;for(;0<X-$;)q=dl(q),X--;for(;$--;){if(Ae===q||q!==null&&Ae===q.alternate)break t;Ae=dl(Ae),q=dl(q)}Ae=null}else Ae=null;we!==null&&T0(he,le,we,Ae,!1),Se!==null&&jt!==null&&T0(he,jt,Se,Ae,!0)}}e:{if(le=ee?fl(ee):window,we=le.nodeName&&le.nodeName.toLowerCase(),we==="select"||we==="input"&&le.type==="file")var be=Ek;else if(e0(le))if(n0)be=Ck;else{be=Sk;var Ne=Ik}else(we=le.nodeName)&&we.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(be=Pk);if(be&&(be=be(o,ee))){t0(he,be,c,de);break e}Ne&&Ne(o,le,ee),o==="focusout"&&(Ne=le._wrapperState)&&Ne.controlled&&le.type==="number"&&yt(le,"number",le.value)}switch(Ne=ee?fl(ee):window,o){case"focusin":(e0(Ne)||Ne.contentEditable==="true")&&(ul=Ne,Mm=ee,ic=null);break;case"focusout":ic=Mm=ul=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,c0(he,c,de);break;case"selectionchange":if(xk)break;case"keydown":case"keyup":c0(he,c,de)}var Ve;if(Dm)e:{switch(o){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ll?Jw(o,c)&&(Le="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Le="onCompositionStart");Le&&(Qw&&c.locale!=="ko"&&(ll||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ll&&(Ve=ah()):(Zn=de,nl="value"in Zn?Zn.value:Zn.textContent,ll=!0)),Ne=gh(ee,Le),0<Ne.length&&(Le=new T(Le,o,null,c,de),he.push({event:Le,listeners:Ne}),Ve?Le.data=Ve:(Ve=Zw(c),Ve!==null&&(Le.data=Ve)))),(Ve=yk?vk(o,c):_k(o,c))&&(ee=gh(ee,"onBeforeInput"),0<ee.length&&(de=new T("onBeforeInput","beforeinput",null,c,de),he.push({event:de,listeners:ee}),de.data=Ve))}_0(he,l)})}function ac(o,l,c){return{instance:o,listener:l,currentTarget:c}}function gh(o,l){for(var c=l+"Capture",p=[];o!==null;){var y=o,v=y.stateNode;y.tag===5&&v!==null&&(y=v,v=Ro(o,c),v!=null&&p.unshift(ac(o,v,y)),v=Ro(o,l),v!=null&&p.push(ac(o,v,y))),o=o.return}return p}function dl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function T0(o,l,c,p,y){for(var v=l._reactName,I=[];c!==null&&c!==p;){var V=c,B=V.alternate,ee=V.stateNode;if(B!==null&&B===p)break;V.tag===5&&ee!==null&&(V=ee,y?(B=Ro(c,v),B!=null&&I.unshift(ac(c,B,V))):y||(B=Ro(c,v),B!=null&&I.push(ac(c,B,V)))),c=c.return}I.length!==0&&o.push({event:l,listeners:I})}var Nk=/\r\n?/g,Vk=/\u0000|\uFFFD/g;function E0(o){return(typeof o=="string"?o:""+o).replace(Nk,`
`).replace(Vk,"")}function yh(o,l,c){if(l=E0(l),E0(o)!==l&&c)throw Error(t(425))}function vh(){}var zm=null,Wm=null;function Hm(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,Ok=typeof clearTimeout=="function"?clearTimeout:void 0,I0=typeof Promise=="function"?Promise:void 0,Mk=typeof queueMicrotask=="function"?queueMicrotask:typeof I0<"u"?function(o){return I0.resolve(null).then(o).catch(Lk)}:qm;function Lk(o){setTimeout(function(){throw o})}function Gm(o,l){var c=l,p=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){o.removeChild(y),Es(l);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);Es(l)}function Cs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function S0(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}var hl=Math.random().toString(36).slice(2),ei="__reactFiber$"+hl,lc="__reactProps$"+hl,Di="__reactContainer$"+hl,Km="__reactEvents$"+hl,Fk="__reactListeners$"+hl,Uk="__reactHandles$"+hl;function zo(o){var l=o[ei];if(l)return l;for(var c=o.parentNode;c;){if(l=c[Di]||c[ei]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=S0(o);o!==null;){if(c=o[ei])return c;o=S0(o)}return l}o=c,c=o.parentNode}return null}function uc(o){return o=o[ei]||o[Di],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function fl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function _h(o){return o[lc]||null}var Qm=[],pl=-1;function As(o){return{current:o}}function wt(o){0>pl||(o.current=Qm[pl],Qm[pl]=null,pl--)}function ft(o,l){pl++,Qm[pl]=o.current,o.current=l}var bs={},_n=As(bs),Fn=As(!1),Wo=bs;function ml(o,l){var c=o.type.contextTypes;if(!c)return bs;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var y={},v;for(v in c)y[v]=l[v];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=y),y}function Un(o){return o=o.childContextTypes,o!=null}function wh(){wt(Fn),wt(_n)}function P0(o,l,c){if(_n.current!==bs)throw Error(t(168));ft(_n,l),ft(Fn,c)}function C0(o,l,c){var p=o.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in l))throw Error(t(108,Re(o)||"Unknown",y));return K({},c,p)}function Th(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||bs,Wo=_n.current,ft(_n,o),ft(Fn,Fn.current),!0}function A0(o,l,c){var p=o.stateNode;if(!p)throw Error(t(169));c?(o=C0(o,l,Wo),p.__reactInternalMemoizedMergedChildContext=o,wt(Fn),wt(_n),ft(_n,o)):wt(Fn),ft(Fn,c)}var Ni=null,Eh=!1,Ym=!1;function b0(o){Ni===null?Ni=[o]:Ni.push(o)}function jk(o){Eh=!0,b0(o)}function xs(){if(!Ym&&Ni!==null){Ym=!0;var o=0,l=Ge;try{var c=Ni;for(Ge=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}Ni=null,Eh=!1}catch(y){throw Ni!==null&&(Ni=Ni.slice(o+1)),Uu(Qa,xs),y}finally{Ge=l,Ym=!1}}return null}var gl=[],yl=0,Ih=null,Sh=0,fr=[],pr=0,Ho=null,Vi=1,Oi="";function qo(o,l){gl[yl++]=Sh,gl[yl++]=Ih,Ih=o,Sh=l}function x0(o,l,c){fr[pr++]=Vi,fr[pr++]=Oi,fr[pr++]=Ho,Ho=o;var p=Vi;o=Oi;var y=32-Xn(p)-1;p&=~(1<<y),c+=1;var v=32-Xn(l)+y;if(30<v){var I=y-y%5;v=(p&(1<<I)-1).toString(32),p>>=I,y-=I,Vi=1<<32-Xn(l)+y|c<<y|p,Oi=v+o}else Vi=1<<v|c<<y|p,Oi=o}function Xm(o){o.return!==null&&(qo(o,1),x0(o,1,0))}function Jm(o){for(;o===Ih;)Ih=gl[--yl],gl[yl]=null,Sh=gl[--yl],gl[yl]=null;for(;o===Ho;)Ho=fr[--pr],fr[pr]=null,Oi=fr[--pr],fr[pr]=null,Vi=fr[--pr],fr[pr]=null}var nr=null,rr=null,It=!1,Ar=null;function R0(o,l){var c=vr(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,l=o.deletions,l===null?(o.deletions=[c],o.flags|=16):l.push(c)}function k0(o,l){switch(o.tag){case 5:var c=o.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,nr=o,rr=Cs(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,nr=o,rr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Ho!==null?{id:Vi,overflow:Oi}:null,o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=vr(18,null,null,0),c.stateNode=l,c.return=o,o.child=c,nr=o,rr=null,!0):!1;default:return!1}}function Zm(o){return(o.mode&1)!==0&&(o.flags&128)===0}function eg(o){if(It){var l=rr;if(l){var c=l;if(!k0(o,l)){if(Zm(o))throw Error(t(418));l=Cs(c.nextSibling);var p=nr;l&&k0(o,l)?R0(p,c):(o.flags=o.flags&-4097|2,It=!1,nr=o)}}else{if(Zm(o))throw Error(t(418));o.flags=o.flags&-4097|2,It=!1,nr=o}}}function D0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;nr=o}function Ph(o){if(o!==nr)return!1;if(!It)return D0(o),It=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Hm(o.type,o.memoizedProps)),l&&(l=rr)){if(Zm(o))throw N0(),Error(t(418));for(;l;)R0(o,l),l=Cs(l.nextSibling)}if(D0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(l===0){rr=Cs(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}o=o.nextSibling}rr=null}}else rr=nr?Cs(o.stateNode.nextSibling):null;return!0}function N0(){for(var o=rr;o;)o=Cs(o.nextSibling)}function vl(){rr=nr=null,It=!1}function tg(o){Ar===null?Ar=[o]:Ar.push(o)}var Bk=z.ReactCurrentBatchConfig;function cc(o,l,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,o));var y=p,v=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===v?l.ref:(l=function(I){var V=y.refs;I===null?delete V[v]:V[v]=I},l._stringRef=v,l)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function Ch(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function V0(o){var l=o._init;return l(o._payload)}function O0(o){function l(q,$){if(o){var X=q.deletions;X===null?(q.deletions=[$],q.flags|=16):X.push($)}}function c(q,$){if(!o)return null;for(;$!==null;)l(q,$),$=$.sibling;return null}function p(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function y(q,$){return q=Ls(q,$),q.index=0,q.sibling=null,q}function v(q,$,X){return q.index=X,o?(X=q.alternate,X!==null?(X=X.index,X<$?(q.flags|=2,$):X):(q.flags|=2,$)):(q.flags|=1048576,$)}function I(q){return o&&q.alternate===null&&(q.flags|=2),q}function V(q,$,X,pe){return $===null||$.tag!==6?($=qg(X,q.mode,pe),$.return=q,$):($=y($,X),$.return=q,$)}function B(q,$,X,pe){var be=X.type;return be===P?de(q,$,X.props.children,pe,X.key):$!==null&&($.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===J&&V0(be)===$.type)?(pe=y($,X.props),pe.ref=cc(q,$,X),pe.return=q,pe):(pe=Yh(X.type,X.key,X.props,null,q.mode,pe),pe.ref=cc(q,$,X),pe.return=q,pe)}function ee(q,$,X,pe){return $===null||$.tag!==4||$.stateNode.containerInfo!==X.containerInfo||$.stateNode.implementation!==X.implementation?($=Gg(X,q.mode,pe),$.return=q,$):($=y($,X.children||[]),$.return=q,$)}function de(q,$,X,pe,be){return $===null||$.tag!==7?($=ea(X,q.mode,pe,be),$.return=q,$):($=y($,X),$.return=q,$)}function he(q,$,X){if(typeof $=="string"&&$!==""||typeof $=="number")return $=qg(""+$,q.mode,X),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case ne:return X=Yh($.type,$.key,$.props,null,q.mode,X),X.ref=cc(q,null,$),X.return=q,X;case Z:return $=Gg($,q.mode,X),$.return=q,$;case J:var pe=$._init;return he(q,pe($._payload),X)}if(Pt($)||re($))return $=ea($,q.mode,X,null),$.return=q,$;Ch(q,$)}return null}function le(q,$,X,pe){var be=$!==null?$.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return be!==null?null:V(q,$,""+X,pe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case ne:return X.key===be?B(q,$,X,pe):null;case Z:return X.key===be?ee(q,$,X,pe):null;case J:return be=X._init,le(q,$,be(X._payload),pe)}if(Pt(X)||re(X))return be!==null?null:de(q,$,X,pe,null);Ch(q,X)}return null}function we(q,$,X,pe,be){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return q=q.get(X)||null,V($,q,""+pe,be);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case ne:return q=q.get(pe.key===null?X:pe.key)||null,B($,q,pe,be);case Z:return q=q.get(pe.key===null?X:pe.key)||null,ee($,q,pe,be);case J:var Ne=pe._init;return we(q,$,X,Ne(pe._payload),be)}if(Pt(pe)||re(pe))return q=q.get(X)||null,de($,q,pe,be,null);Ch($,pe)}return null}function Se(q,$,X,pe){for(var be=null,Ne=null,Ve=$,Le=$=0,an=null;Ve!==null&&Le<X.length;Le++){Ve.index>Le?(an=Ve,Ve=null):an=Ve.sibling;var nt=le(q,Ve,X[Le],pe);if(nt===null){Ve===null&&(Ve=an);break}o&&Ve&&nt.alternate===null&&l(q,Ve),$=v(nt,$,Le),Ne===null?be=nt:Ne.sibling=nt,Ne=nt,Ve=an}if(Le===X.length)return c(q,Ve),It&&qo(q,Le),be;if(Ve===null){for(;Le<X.length;Le++)Ve=he(q,X[Le],pe),Ve!==null&&($=v(Ve,$,Le),Ne===null?be=Ve:Ne.sibling=Ve,Ne=Ve);return It&&qo(q,Le),be}for(Ve=p(q,Ve);Le<X.length;Le++)an=we(Ve,q,Le,X[Le],pe),an!==null&&(o&&an.alternate!==null&&Ve.delete(an.key===null?Le:an.key),$=v(an,$,Le),Ne===null?be=an:Ne.sibling=an,Ne=an);return o&&Ve.forEach(function(Fs){return l(q,Fs)}),It&&qo(q,Le),be}function Ae(q,$,X,pe){var be=re(X);if(typeof be!="function")throw Error(t(150));if(X=be.call(X),X==null)throw Error(t(151));for(var Ne=be=null,Ve=$,Le=$=0,an=null,nt=X.next();Ve!==null&&!nt.done;Le++,nt=X.next()){Ve.index>Le?(an=Ve,Ve=null):an=Ve.sibling;var Fs=le(q,Ve,nt.value,pe);if(Fs===null){Ve===null&&(Ve=an);break}o&&Ve&&Fs.alternate===null&&l(q,Ve),$=v(Fs,$,Le),Ne===null?be=Fs:Ne.sibling=Fs,Ne=Fs,Ve=an}if(nt.done)return c(q,Ve),It&&qo(q,Le),be;if(Ve===null){for(;!nt.done;Le++,nt=X.next())nt=he(q,nt.value,pe),nt!==null&&($=v(nt,$,Le),Ne===null?be=nt:Ne.sibling=nt,Ne=nt);return It&&qo(q,Le),be}for(Ve=p(q,Ve);!nt.done;Le++,nt=X.next())nt=we(Ve,q,Le,nt.value,pe),nt!==null&&(o&&nt.alternate!==null&&Ve.delete(nt.key===null?Le:nt.key),$=v(nt,$,Le),Ne===null?be=nt:Ne.sibling=nt,Ne=nt);return o&&Ve.forEach(function(wD){return l(q,wD)}),It&&qo(q,Le),be}function jt(q,$,X,pe){if(typeof X=="object"&&X!==null&&X.type===P&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case ne:e:{for(var be=X.key,Ne=$;Ne!==null;){if(Ne.key===be){if(be=X.type,be===P){if(Ne.tag===7){c(q,Ne.sibling),$=y(Ne,X.props.children),$.return=q,q=$;break e}}else if(Ne.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===J&&V0(be)===Ne.type){c(q,Ne.sibling),$=y(Ne,X.props),$.ref=cc(q,Ne,X),$.return=q,q=$;break e}c(q,Ne);break}else l(q,Ne);Ne=Ne.sibling}X.type===P?($=ea(X.props.children,q.mode,pe,X.key),$.return=q,q=$):(pe=Yh(X.type,X.key,X.props,null,q.mode,pe),pe.ref=cc(q,$,X),pe.return=q,q=pe)}return I(q);case Z:e:{for(Ne=X.key;$!==null;){if($.key===Ne)if($.tag===4&&$.stateNode.containerInfo===X.containerInfo&&$.stateNode.implementation===X.implementation){c(q,$.sibling),$=y($,X.children||[]),$.return=q,q=$;break e}else{c(q,$);break}else l(q,$);$=$.sibling}$=Gg(X,q.mode,pe),$.return=q,q=$}return I(q);case J:return Ne=X._init,jt(q,$,Ne(X._payload),pe)}if(Pt(X))return Se(q,$,X,pe);if(re(X))return Ae(q,$,X,pe);Ch(q,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,$!==null&&$.tag===6?(c(q,$.sibling),$=y($,X),$.return=q,q=$):(c(q,$),$=qg(X,q.mode,pe),$.return=q,q=$),I(q)):c(q,$)}return jt}var _l=O0(!0),M0=O0(!1),Ah=As(null),bh=null,wl=null,ng=null;function rg(){ng=wl=bh=null}function ig(o){var l=Ah.current;wt(Ah),o._currentValue=l}function sg(o,l,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),o===c)break;o=o.return}}function Tl(o,l){bh=o,ng=wl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(jn=!0),o.firstContext=null)}function mr(o){var l=o._currentValue;if(ng!==o)if(o={context:o,memoizedValue:l,next:null},wl===null){if(bh===null)throw Error(t(308));wl=o,bh.dependencies={lanes:0,firstContext:o}}else wl=wl.next=o;return l}var Go=null;function og(o){Go===null?Go=[o]:Go.push(o)}function L0(o,l,c,p){var y=l.interleaved;return y===null?(c.next=c,og(l)):(c.next=y.next,y.next=c),l.interleaved=c,Mi(o,p)}function Mi(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,c=o.alternate,c!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var Rs=!1;function ag(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F0(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Li(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function ks(o,l,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Je&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,Mi(o,c)}return y=p.interleaved,y===null?(l.next=l,og(p)):(l.next=y.next,y.next=l),p.interleaved=l,Mi(o,c)}function xh(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Hu(o,c)}}function U0(o,l){var c=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var I={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?y=v=I:v=v.next=I,c=c.next}while(c!==null);v===null?y=v=l:v=v.next=l}else y=v=l;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:p.shared,effects:p.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function Rh(o,l,c,p){var y=o.updateQueue;Rs=!1;var v=y.firstBaseUpdate,I=y.lastBaseUpdate,V=y.shared.pending;if(V!==null){y.shared.pending=null;var B=V,ee=B.next;B.next=null,I===null?v=ee:I.next=ee,I=B;var de=o.alternate;de!==null&&(de=de.updateQueue,V=de.lastBaseUpdate,V!==I&&(V===null?de.firstBaseUpdate=ee:V.next=ee,de.lastBaseUpdate=B))}if(v!==null){var he=y.baseState;I=0,de=ee=B=null,V=v;do{var le=V.lane,we=V.eventTime;if((p&le)===le){de!==null&&(de=de.next={eventTime:we,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var Se=o,Ae=V;switch(le=l,we=c,Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){he=Se.call(we,he,le);break e}he=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,le=typeof Se=="function"?Se.call(we,he,le):Se,le==null)break e;he=K({},he,le);break e;case 2:Rs=!0}}V.callback!==null&&V.lane!==0&&(o.flags|=64,le=y.effects,le===null?y.effects=[V]:le.push(V))}else we={eventTime:we,lane:le,tag:V.tag,payload:V.payload,callback:V.callback,next:null},de===null?(ee=de=we,B=he):de=de.next=we,I|=le;if(V=V.next,V===null){if(V=y.shared.pending,V===null)break;le=V,V=le.next,le.next=null,y.lastBaseUpdate=le,y.shared.pending=null}}while(!0);if(de===null&&(B=he),y.baseState=B,y.firstBaseUpdate=ee,y.lastBaseUpdate=de,l=y.shared.interleaved,l!==null){y=l;do I|=y.lane,y=y.next;while(y!==l)}else v===null&&(y.shared.lanes=0);Yo|=I,o.lanes=I,o.memoizedState=he}}function j0(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var p=o[l],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var dc={},ti=As(dc),hc=As(dc),fc=As(dc);function Ko(o){if(o===dc)throw Error(t(174));return o}function lg(o,l){switch(ft(fc,l),ft(hc,o),ft(ti,dc),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ds(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ds(l,o)}wt(ti),ft(ti,l)}function El(){wt(ti),wt(hc),wt(fc)}function B0(o){Ko(fc.current);var l=Ko(ti.current),c=ds(l,o.type);l!==c&&(ft(hc,o),ft(ti,c))}function ug(o){hc.current===o&&(wt(ti),wt(hc))}var Ct=As(0);function kh(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var cg=[];function dg(){for(var o=0;o<cg.length;o++)cg[o]._workInProgressVersionPrimary=null;cg.length=0}var Dh=z.ReactCurrentDispatcher,hg=z.ReactCurrentBatchConfig,Qo=0,At=null,en=null,sn=null,Nh=!1,pc=!1,mc=0,$k=0;function wn(){throw Error(t(321))}function fg(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!Cr(o[c],l[c]))return!1;return!0}function pg(o,l,c,p,y,v){if(Qo=v,At=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Dh.current=o===null||o.memoizedState===null?qk:Gk,o=c(p,y),pc){v=0;do{if(pc=!1,mc=0,25<=v)throw Error(t(301));v+=1,sn=en=null,l.updateQueue=null,Dh.current=Kk,o=c(p,y)}while(pc)}if(Dh.current=Mh,l=en!==null&&en.next!==null,Qo=0,sn=en=At=null,Nh=!1,l)throw Error(t(300));return o}function mg(){var o=mc!==0;return mc=0,o}function ni(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?At.memoizedState=sn=o:sn=sn.next=o,sn}function gr(){if(en===null){var o=At.alternate;o=o!==null?o.memoizedState:null}else o=en.next;var l=sn===null?At.memoizedState:sn.next;if(l!==null)sn=l,en=o;else{if(o===null)throw Error(t(310));en=o,o={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},sn===null?At.memoizedState=sn=o:sn=sn.next=o}return sn}function gc(o,l){return typeof l=="function"?l(o):l}function gg(o){var l=gr(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=en,y=p.baseQueue,v=c.pending;if(v!==null){if(y!==null){var I=y.next;y.next=v.next,v.next=I}p.baseQueue=y=v,c.pending=null}if(y!==null){v=y.next,p=p.baseState;var V=I=null,B=null,ee=v;do{var de=ee.lane;if((Qo&de)===de)B!==null&&(B=B.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),p=ee.hasEagerState?ee.eagerState:o(p,ee.action);else{var he={lane:de,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};B===null?(V=B=he,I=p):B=B.next=he,At.lanes|=de,Yo|=de}ee=ee.next}while(ee!==null&&ee!==v);B===null?I=p:B.next=V,Cr(p,l.memoizedState)||(jn=!0),l.memoizedState=p,l.baseState=I,l.baseQueue=B,c.lastRenderedState=p}if(o=c.interleaved,o!==null){y=o;do v=y.lane,At.lanes|=v,Yo|=v,y=y.next;while(y!==o)}else y===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function yg(o){var l=gr(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=c.dispatch,y=c.pending,v=l.memoizedState;if(y!==null){c.pending=null;var I=y=y.next;do v=o(v,I.action),I=I.next;while(I!==y);Cr(v,l.memoizedState)||(jn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),c.lastRenderedState=v}return[v,p]}function $0(){}function z0(o,l){var c=At,p=gr(),y=l(),v=!Cr(p.memoizedState,y);if(v&&(p.memoizedState=y,jn=!0),p=p.queue,vg(q0.bind(null,c,p,o),[o]),p.getSnapshot!==l||v||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,yc(9,H0.bind(null,c,p,y,l),void 0,null),on===null)throw Error(t(349));(Qo&30)!==0||W0(c,l,y)}return y}function W0(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=At.updateQueue,l===null?(l={lastEffect:null,stores:null},At.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function H0(o,l,c,p){l.value=c,l.getSnapshot=p,G0(l)&&K0(o)}function q0(o,l,c){return c(function(){G0(l)&&K0(o)})}function G0(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!Cr(o,c)}catch{return!0}}function K0(o){var l=Mi(o,1);l!==null&&kr(l,o,1,-1)}function Q0(o){var l=ni();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gc,lastRenderedState:o},l.queue=o,o=o.dispatch=Hk.bind(null,At,o),[l.memoizedState,o]}function yc(o,l,c,p){return o={tag:o,create:l,destroy:c,deps:p,next:null},l=At.updateQueue,l===null?(l={lastEffect:null,stores:null},At.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect,c===null?l.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,l.lastEffect=o)),o}function Y0(){return gr().memoizedState}function Vh(o,l,c,p){var y=ni();At.flags|=o,y.memoizedState=yc(1|l,c,void 0,p===void 0?null:p)}function Oh(o,l,c,p){var y=gr();p=p===void 0?null:p;var v=void 0;if(en!==null){var I=en.memoizedState;if(v=I.destroy,p!==null&&fg(p,I.deps)){y.memoizedState=yc(l,c,v,p);return}}At.flags|=o,y.memoizedState=yc(1|l,c,v,p)}function X0(o,l){return Vh(8390656,8,o,l)}function vg(o,l){return Oh(2048,8,o,l)}function J0(o,l){return Oh(4,2,o,l)}function Z0(o,l){return Oh(4,4,o,l)}function eT(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function tT(o,l,c){return c=c!=null?c.concat([o]):null,Oh(4,4,eT.bind(null,l,o),c)}function _g(){}function nT(o,l){var c=gr();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&fg(l,p[1])?p[0]:(c.memoizedState=[o,l],o)}function rT(o,l){var c=gr();l=l===void 0?null:l;var p=c.memoizedState;return p!==null&&l!==null&&fg(l,p[1])?p[0]:(o=o(),c.memoizedState=[o,l],o)}function iT(o,l,c){return(Qo&21)===0?(o.baseState&&(o.baseState=!1,jn=!0),o.memoizedState=c):(Cr(c,l)||(c=zu(),At.lanes|=c,Yo|=c,o.baseState=!0),l)}function zk(o,l){var c=Ge;Ge=c!==0&&4>c?c:4,o(!0);var p=hg.transition;hg.transition={};try{o(!1),l()}finally{Ge=c,hg.transition=p}}function sT(){return gr().memoizedState}function Wk(o,l,c){var p=Os(o);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},oT(o))aT(l,c);else if(c=L0(o,l,c,p),c!==null){var y=kn();kr(c,o,p,y),lT(c,l,p)}}function Hk(o,l,c){var p=Os(o),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(oT(o))aT(l,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var I=l.lastRenderedState,V=v(I,c);if(y.hasEagerState=!0,y.eagerState=V,Cr(V,I)){var B=l.interleaved;B===null?(y.next=y,og(l)):(y.next=B.next,B.next=y),l.interleaved=y;return}}catch{}c=L0(o,l,y,p),c!==null&&(y=kn(),kr(c,o,p,y),lT(c,l,p))}}function oT(o){var l=o.alternate;return o===At||l!==null&&l===At}function aT(o,l){pc=Nh=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function lT(o,l,c){if((c&4194240)!==0){var p=l.lanes;p&=o.pendingLanes,c|=p,l.lanes=c,Hu(o,c)}}var Mh={readContext:mr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},qk={readContext:mr,useCallback:function(o,l){return ni().memoizedState=[o,l===void 0?null:l],o},useContext:mr,useEffect:X0,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,Vh(4194308,4,eT.bind(null,l,o),c)},useLayoutEffect:function(o,l){return Vh(4194308,4,o,l)},useInsertionEffect:function(o,l){return Vh(4,2,o,l)},useMemo:function(o,l){var c=ni();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var p=ni();return l=c!==void 0?c(l):l,p.memoizedState=p.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},p.queue=o,o=o.dispatch=Wk.bind(null,At,o),[p.memoizedState,o]},useRef:function(o){var l=ni();return o={current:o},l.memoizedState=o},useState:Q0,useDebugValue:_g,useDeferredValue:function(o){return ni().memoizedState=o},useTransition:function(){var o=Q0(!1),l=o[0];return o=zk.bind(null,o[1]),ni().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var p=At,y=ni();if(It){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),on===null)throw Error(t(349));(Qo&30)!==0||W0(p,l,c)}y.memoizedState=c;var v={value:c,getSnapshot:l};return y.queue=v,X0(q0.bind(null,p,v,o),[o]),p.flags|=2048,yc(9,H0.bind(null,p,v,c,l),void 0,null),c},useId:function(){var o=ni(),l=on.identifierPrefix;if(It){var c=Oi,p=Vi;c=(p&~(1<<32-Xn(p)-1)).toString(32)+c,l=":"+l+"R"+c,c=mc++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=$k++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},Gk={readContext:mr,useCallback:nT,useContext:mr,useEffect:vg,useImperativeHandle:tT,useInsertionEffect:J0,useLayoutEffect:Z0,useMemo:rT,useReducer:gg,useRef:Y0,useState:function(){return gg(gc)},useDebugValue:_g,useDeferredValue:function(o){var l=gr();return iT(l,en.memoizedState,o)},useTransition:function(){var o=gg(gc)[0],l=gr().memoizedState;return[o,l]},useMutableSource:$0,useSyncExternalStore:z0,useId:sT,unstable_isNewReconciler:!1},Kk={readContext:mr,useCallback:nT,useContext:mr,useEffect:vg,useImperativeHandle:tT,useInsertionEffect:J0,useLayoutEffect:Z0,useMemo:rT,useReducer:yg,useRef:Y0,useState:function(){return yg(gc)},useDebugValue:_g,useDeferredValue:function(o){var l=gr();return en===null?l.memoizedState=o:iT(l,en.memoizedState,o)},useTransition:function(){var o=yg(gc)[0],l=gr().memoizedState;return[o,l]},useMutableSource:$0,useSyncExternalStore:z0,useId:sT,unstable_isNewReconciler:!1};function br(o,l){if(o&&o.defaultProps){l=K({},l),o=o.defaultProps;for(var c in o)l[c]===void 0&&(l[c]=o[c]);return l}return l}function wg(o,l,c,p){l=o.memoizedState,c=c(p,l),c=c==null?l:K({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Lh={isMounted:function(o){return(o=o._reactInternals)?Sr(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var p=kn(),y=Os(o),v=Li(p,y);v.payload=l,c!=null&&(v.callback=c),l=ks(o,v,y),l!==null&&(kr(l,o,y,p),xh(l,o,y))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var p=kn(),y=Os(o),v=Li(p,y);v.tag=1,v.payload=l,c!=null&&(v.callback=c),l=ks(o,v,y),l!==null&&(kr(l,o,y,p),xh(l,o,y))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=kn(),p=Os(o),y=Li(c,p);y.tag=2,l!=null&&(y.callback=l),l=ks(o,y,p),l!==null&&(kr(l,o,p,c),xh(l,o,p))}};function uT(o,l,c,p,y,v,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,v,I):l.prototype&&l.prototype.isPureReactComponent?!rc(c,p)||!rc(y,v):!0}function cT(o,l,c){var p=!1,y=bs,v=l.contextType;return typeof v=="object"&&v!==null?v=mr(v):(y=Un(l)?Wo:_n.current,p=l.contextTypes,v=(p=p!=null)?ml(o,y):bs),l=new l(c,v),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Lh,o.stateNode=l,l._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=v),l}function dT(o,l,c,p){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==o&&Lh.enqueueReplaceState(l,l.state,null)}function Tg(o,l,c,p){var y=o.stateNode;y.props=c,y.state=o.memoizedState,y.refs={},ag(o);var v=l.contextType;typeof v=="object"&&v!==null?y.context=mr(v):(v=Un(l)?Wo:_n.current,y.context=ml(o,v)),y.state=o.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(wg(o,l,v,c),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(l=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),l!==y.state&&Lh.enqueueReplaceState(y,y.state,null),Rh(o,c,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Il(o,l){try{var c="",p=l;do c+=ue(p),p=p.return;while(p);var y=c}catch(v){y=`
Error generating stack: `+v.message+`
`+v.stack}return{value:o,source:l,stack:y,digest:null}}function Eg(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function Ig(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function hT(o,l,c){c=Li(-1,c),c.tag=3,c.payload={element:null};var p=l.value;return c.callback=function(){Wh||(Wh=!0,Fg=p),Ig(o,l)},c}function fT(o,l,c){c=Li(-1,c),c.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=l.value;c.payload=function(){return p(y)},c.callback=function(){Ig(o,l)}}var v=o.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){Ig(o,l),typeof p!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var I=l.stack;this.componentDidCatch(l.value,{componentStack:I!==null?I:""})}),c}function pT(o,l,c){var p=o.pingCache;if(p===null){p=o.pingCache=new Qk;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(c)||(y.add(c),o=uD.bind(null,o,l,c),l.then(o,o))}function mT(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function gT(o,l,c,p,y){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=Li(-1,1),l.tag=2,ks(c,l,1))),c.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var Yk=z.ReactCurrentOwner,jn=!1;function Rn(o,l,c,p){l.child=o===null?M0(l,null,c,p):_l(l,o.child,c,p)}function yT(o,l,c,p,y){c=c.render;var v=l.ref;return Tl(l,y),p=pg(o,l,c,p,v,y),c=mg(),o!==null&&!jn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Fi(o,l,y)):(It&&c&&Xm(l),l.flags|=1,Rn(o,l,p,y),l.child)}function vT(o,l,c,p,y){if(o===null){var v=c.type;return typeof v=="function"&&!Hg(v)&&v.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=v,_T(o,l,v,p,y)):(o=Yh(c.type,null,p,l,l.mode,y),o.ref=l.ref,o.return=l,l.child=o)}if(v=o.child,(o.lanes&y)===0){var I=v.memoizedProps;if(c=c.compare,c=c!==null?c:rc,c(I,p)&&o.ref===l.ref)return Fi(o,l,y)}return l.flags|=1,o=Ls(v,p),o.ref=l.ref,o.return=l,l.child=o}function _T(o,l,c,p,y){if(o!==null){var v=o.memoizedProps;if(rc(v,p)&&o.ref===l.ref)if(jn=!1,l.pendingProps=p=v,(o.lanes&y)!==0)(o.flags&131072)!==0&&(jn=!0);else return l.lanes=o.lanes,Fi(o,l,y)}return Sg(o,l,c,p,y)}function wT(o,l,c){var p=l.pendingProps,y=p.children,v=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Pl,ir),ir|=c;else{if((c&1073741824)===0)return o=v!==null?v.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,ft(Pl,ir),ir|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:c,ft(Pl,ir),ir|=p}else v!==null?(p=v.baseLanes|c,l.memoizedState=null):p=c,ft(Pl,ir),ir|=p;return Rn(o,l,y,c),l.child}function TT(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function Sg(o,l,c,p,y){var v=Un(c)?Wo:_n.current;return v=ml(l,v),Tl(l,y),c=pg(o,l,c,p,v,y),p=mg(),o!==null&&!jn?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~y,Fi(o,l,y)):(It&&p&&Xm(l),l.flags|=1,Rn(o,l,c,y),l.child)}function ET(o,l,c,p,y){if(Un(c)){var v=!0;Th(l)}else v=!1;if(Tl(l,y),l.stateNode===null)Uh(o,l),cT(l,c,p),Tg(l,c,p,y),p=!0;else if(o===null){var I=l.stateNode,V=l.memoizedProps;I.props=V;var B=I.context,ee=c.contextType;typeof ee=="object"&&ee!==null?ee=mr(ee):(ee=Un(c)?Wo:_n.current,ee=ml(l,ee));var de=c.getDerivedStateFromProps,he=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function";he||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==p||B!==ee)&&dT(l,I,p,ee),Rs=!1;var le=l.memoizedState;I.state=le,Rh(l,p,I,y),B=l.memoizedState,V!==p||le!==B||Fn.current||Rs?(typeof de=="function"&&(wg(l,c,de,p),B=l.memoizedState),(V=Rs||uT(l,c,V,p,le,B,ee))?(he||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(l.flags|=4194308)):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=B),I.props=p,I.state=B,I.context=ee,p=V):(typeof I.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{I=l.stateNode,F0(o,l),V=l.memoizedProps,ee=l.type===l.elementType?V:br(l.type,V),I.props=ee,he=l.pendingProps,le=I.context,B=c.contextType,typeof B=="object"&&B!==null?B=mr(B):(B=Un(c)?Wo:_n.current,B=ml(l,B));var we=c.getDerivedStateFromProps;(de=typeof we=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==he||le!==B)&&dT(l,I,p,B),Rs=!1,le=l.memoizedState,I.state=le,Rh(l,p,I,y);var Se=l.memoizedState;V!==he||le!==Se||Fn.current||Rs?(typeof we=="function"&&(wg(l,c,we,p),Se=l.memoizedState),(ee=Rs||uT(l,c,ee,p,le,Se,B)||!1)?(de||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(p,Se,B),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(p,Se,B)),typeof I.componentDidUpdate=="function"&&(l.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof I.componentDidUpdate!="function"||V===o.memoizedProps&&le===o.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&le===o.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Se),I.props=p,I.state=Se,I.context=B,p=ee):(typeof I.componentDidUpdate!="function"||V===o.memoizedProps&&le===o.memoizedState||(l.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&le===o.memoizedState||(l.flags|=1024),p=!1)}return Pg(o,l,c,p,v,y)}function Pg(o,l,c,p,y,v){TT(o,l);var I=(l.flags&128)!==0;if(!p&&!I)return y&&A0(l,c,!1),Fi(o,l,v);p=l.stateNode,Yk.current=l;var V=I&&typeof c.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,o!==null&&I?(l.child=_l(l,o.child,null,v),l.child=_l(l,null,V,v)):Rn(o,l,V,v),l.memoizedState=p.state,y&&A0(l,c,!0),l.child}function IT(o){var l=o.stateNode;l.pendingContext?P0(o,l.pendingContext,l.pendingContext!==l.context):l.context&&P0(o,l.context,!1),lg(o,l.containerInfo)}function ST(o,l,c,p,y){return vl(),tg(y),l.flags|=256,Rn(o,l,c,p),l.child}var Cg={dehydrated:null,treeContext:null,retryLane:0};function Ag(o){return{baseLanes:o,cachePool:null,transitions:null}}function PT(o,l,c){var p=l.pendingProps,y=Ct.current,v=!1,I=(l.flags&128)!==0,V;if((V=I)||(V=o!==null&&o.memoizedState===null?!1:(y&2)!==0),V?(v=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),ft(Ct,y&1),o===null)return eg(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(I=p.children,o=p.fallback,v?(p=l.mode,v=l.child,I={mode:"hidden",children:I},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=I):v=Xh(I,p,0,null),o=ea(o,p,c,null),v.return=l,o.return=l,v.sibling=o,l.child=v,l.child.memoizedState=Ag(c),l.memoizedState=Cg,o):bg(l,I));if(y=o.memoizedState,y!==null&&(V=y.dehydrated,V!==null))return Xk(o,l,I,p,V,y,c);if(v){v=p.fallback,I=l.mode,y=o.child,V=y.sibling;var B={mode:"hidden",children:p.children};return(I&1)===0&&l.child!==y?(p=l.child,p.childLanes=0,p.pendingProps=B,l.deletions=null):(p=Ls(y,B),p.subtreeFlags=y.subtreeFlags&14680064),V!==null?v=Ls(V,v):(v=ea(v,I,c,null),v.flags|=2),v.return=l,p.return=l,p.sibling=v,l.child=p,p=v,v=l.child,I=o.child.memoizedState,I=I===null?Ag(c):{baseLanes:I.baseLanes|c,cachePool:null,transitions:I.transitions},v.memoizedState=I,v.childLanes=o.childLanes&~c,l.memoizedState=Cg,p}return v=o.child,o=v.sibling,p=Ls(v,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=c),p.return=l,p.sibling=null,o!==null&&(c=l.deletions,c===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=p,l.memoizedState=null,p}function bg(o,l){return l=Xh({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Fh(o,l,c,p){return p!==null&&tg(p),_l(l,o.child,null,c),o=bg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Xk(o,l,c,p,y,v,I){if(c)return l.flags&256?(l.flags&=-257,p=Eg(Error(t(422))),Fh(o,l,I,p)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(v=p.fallback,y=l.mode,p=Xh({mode:"visible",children:p.children},y,0,null),v=ea(v,y,I,null),v.flags|=2,p.return=l,v.return=l,p.sibling=v,l.child=p,(l.mode&1)!==0&&_l(l,o.child,null,I),l.child.memoizedState=Ag(I),l.memoizedState=Cg,v);if((l.mode&1)===0)return Fh(o,l,I,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var V=p.dgst;return p=V,v=Error(t(419)),p=Eg(v,p,void 0),Fh(o,l,I,p)}if(V=(I&o.childLanes)!==0,jn||V){if(p=on,p!==null){switch(I&-I){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|I))!==0?0:y,y!==0&&y!==v.retryLane&&(v.retryLane=y,Mi(o,y),kr(p,o,y,-1))}return Wg(),p=Eg(Error(t(421))),Fh(o,l,I,p)}return y.data==="$?"?(l.flags|=128,l.child=o.child,l=cD.bind(null,o),y._reactRetry=l,null):(o=v.treeContext,rr=Cs(y.nextSibling),nr=l,It=!0,Ar=null,o!==null&&(fr[pr++]=Vi,fr[pr++]=Oi,fr[pr++]=Ho,Vi=o.id,Oi=o.overflow,Ho=l),l=bg(l,p.children),l.flags|=4096,l)}function CT(o,l,c){o.lanes|=l;var p=o.alternate;p!==null&&(p.lanes|=l),sg(o.return,l,c)}function xg(o,l,c,p,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=c,v.tailMode=y)}function AT(o,l,c){var p=l.pendingProps,y=p.revealOrder,v=p.tail;if(Rn(o,l,p.children,c),p=Ct.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&CT(o,c,l);else if(o.tag===19)CT(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(ft(Ct,p),(l.mode&1)===0)l.memoizedState=null;else switch(y){case"forwards":for(c=l.child,y=null;c!==null;)o=c.alternate,o!==null&&kh(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),xg(l,!1,y,c,v);break;case"backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(o=y.alternate,o!==null&&kh(o)===null){l.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}xg(l,!0,c,null,v);break;case"together":xg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Uh(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Fi(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),Yo|=l.lanes,(c&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,c=Ls(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=Ls(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function Jk(o,l,c){switch(l.tag){case 3:IT(l),vl();break;case 5:B0(l);break;case 1:Un(l.type)&&Th(l);break;case 4:lg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,y=l.memoizedProps.value;ft(Ah,p._currentValue),p._currentValue=y;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(ft(Ct,Ct.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?PT(o,l,c):(ft(Ct,Ct.current&1),o=Fi(o,l,c),o!==null?o.sibling:null);ft(Ct,Ct.current&1);break;case 19:if(p=(c&l.childLanes)!==0,(o.flags&128)!==0){if(p)return AT(o,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ft(Ct,Ct.current),p)break;return null;case 22:case 23:return l.lanes=0,wT(o,l,c)}return Fi(o,l,c)}var bT,Rg,xT,RT;bT=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Rg=function(){},xT=function(o,l,c,p){var y=o.memoizedProps;if(y!==p){o=l.stateNode,Ko(ti.current);var v=null;switch(c){case"input":y=os(o,y),p=os(o,p),v=[];break;case"select":y=K({},y,{value:void 0}),p=K({},p,{value:void 0}),v=[];break;case"textarea":y=us(o,y),p=us(o,p),v=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=vh)}Ir(c,p);var I;c=null;for(ee in y)if(!p.hasOwnProperty(ee)&&y.hasOwnProperty(ee)&&y[ee]!=null)if(ee==="style"){var V=y[ee];for(I in V)V.hasOwnProperty(I)&&(c||(c={}),c[I]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(i.hasOwnProperty(ee)?v||(v=[]):(v=v||[]).push(ee,null));for(ee in p){var B=p[ee];if(V=y?.[ee],p.hasOwnProperty(ee)&&B!==V&&(B!=null||V!=null))if(ee==="style")if(V){for(I in V)!V.hasOwnProperty(I)||B&&B.hasOwnProperty(I)||(c||(c={}),c[I]="");for(I in B)B.hasOwnProperty(I)&&V[I]!==B[I]&&(c||(c={}),c[I]=B[I])}else c||(v||(v=[]),v.push(ee,c)),c=B;else ee==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,V=V?V.__html:void 0,B!=null&&V!==B&&(v=v||[]).push(ee,B)):ee==="children"?typeof B!="string"&&typeof B!="number"||(v=v||[]).push(ee,""+B):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(i.hasOwnProperty(ee)?(B!=null&&ee==="onScroll"&&_t("scroll",o),v||V===B||(v=[])):(v=v||[]).push(ee,B))}c&&(v=v||[]).push("style",c);var ee=v;(l.updateQueue=ee)&&(l.flags|=4)}},RT=function(o,l,c,p){c!==p&&(l.flags|=4)};function vc(o,l){if(!It)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Tn(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(l)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=c,l}function Zk(o,l,c){var p=l.pendingProps;switch(Jm(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(l),null;case 1:return Un(l.type)&&wh(),Tn(l),null;case 3:return p=l.stateNode,El(),wt(Fn),wt(_n),dg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Ph(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ar!==null&&(Bg(Ar),Ar=null))),Rg(o,l),Tn(l),null;case 5:ug(l);var y=Ko(fc.current);if(c=l.type,o!==null&&l.stateNode!=null)xT(o,l,c,p,y),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(t(166));return Tn(l),null}if(o=Ko(ti.current),Ph(l)){p=l.stateNode,c=l.type;var v=l.memoizedProps;switch(p[ei]=l,p[lc]=v,o=(l.mode&1)!==0,c){case"dialog":_t("cancel",p),_t("close",p);break;case"iframe":case"object":case"embed":_t("load",p);break;case"video":case"audio":for(y=0;y<sc.length;y++)_t(sc[y],p);break;case"source":_t("error",p);break;case"img":case"image":case"link":_t("error",p),_t("load",p);break;case"details":_t("toggle",p);break;case"input":as(p,v),_t("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},_t("invalid",p);break;case"textarea":cs(p,v),_t("invalid",p)}Ir(c,v),y=null;for(var I in v)if(v.hasOwnProperty(I)){var V=v[I];I==="children"?typeof V=="string"?p.textContent!==V&&(v.suppressHydrationWarning!==!0&&yh(p.textContent,V,o),y=["children",V]):typeof V=="number"&&p.textContent!==""+V&&(v.suppressHydrationWarning!==!0&&yh(p.textContent,V,o),y=["children",""+V]):i.hasOwnProperty(I)&&V!=null&&I==="onScroll"&&_t("scroll",p)}switch(c){case"input":Gt(p),bo(p,v,!0);break;case"textarea":Gt(p),Fr(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=vh)}p=y,l.updateQueue=p,p!==null&&(l.flags|=4)}else{I=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=xo(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=I.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=I.createElement(c,{is:p.is}):(o=I.createElement(c),c==="select"&&(I=o,p.multiple?I.multiple=!0:p.size&&(I.size=p.size))):o=I.createElementNS(o,c),o[ei]=l,o[lc]=p,bT(o,l,!1,!1),l.stateNode=o;e:{switch(I=Ha(c,p),c){case"dialog":_t("cancel",o),_t("close",o),y=p;break;case"iframe":case"object":case"embed":_t("load",o),y=p;break;case"video":case"audio":for(y=0;y<sc.length;y++)_t(sc[y],o);y=p;break;case"source":_t("error",o),y=p;break;case"img":case"image":case"link":_t("error",o),_t("load",o),y=p;break;case"details":_t("toggle",o),y=p;break;case"input":as(o,p),y=os(o,p),_t("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=K({},p,{value:void 0}),_t("invalid",o);break;case"textarea":cs(o,p),y=us(o,p),_t("invalid",o);break;default:y=p}Ir(c,y),V=y;for(v in V)if(V.hasOwnProperty(v)){var B=V[v];v==="style"?Wa(o,B):v==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&hs(o,B)):v==="children"?typeof B=="string"?(c!=="textarea"||B!=="")&&tt(o,B):typeof B=="number"&&tt(o,""+B):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?B!=null&&v==="onScroll"&&_t("scroll",o):B!=null&&F(o,v,B,I))}switch(c){case"input":Gt(o),bo(o,p,!1);break;case"textarea":Gt(o),Fr(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Ue(p.value));break;case"select":o.multiple=!!p.multiple,v=p.value,v!=null?Mn(o,!!p.multiple,v,!1):p.defaultValue!=null&&Mn(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=vh)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Tn(l),null;case 6:if(o&&l.stateNode!=null)RT(o,l,o.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(t(166));if(c=Ko(fc.current),Ko(ti.current),Ph(l)){if(p=l.stateNode,c=l.memoizedProps,p[ei]=l,(v=p.nodeValue!==c)&&(o=nr,o!==null))switch(o.tag){case 3:yh(p.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&yh(p.nodeValue,c,(o.mode&1)!==0)}v&&(l.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[ei]=l,l.stateNode=p}return Tn(l),null;case 13:if(wt(Ct),p=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(It&&rr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)N0(),vl(),l.flags|=98560,v=!1;else if(v=Ph(l),p!==null&&p.dehydrated!==null){if(o===null){if(!v)throw Error(t(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[ei]=l}else vl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Tn(l),v=!1}else Ar!==null&&(Bg(Ar),Ar=null),v=!0;if(!v)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Ct.current&1)!==0?tn===0&&(tn=3):Wg())),l.updateQueue!==null&&(l.flags|=4),Tn(l),null);case 4:return El(),Rg(o,l),o===null&&oc(l.stateNode.containerInfo),Tn(l),null;case 10:return ig(l.type._context),Tn(l),null;case 17:return Un(l.type)&&wh(),Tn(l),null;case 19:if(wt(Ct),v=l.memoizedState,v===null)return Tn(l),null;if(p=(l.flags&128)!==0,I=v.rendering,I===null)if(p)vc(v,!1);else{if(tn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(I=kh(o),I!==null){for(l.flags|=128,vc(v,!1),p=I.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=c,c=l.child;c!==null;)v=c,o=p,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=o,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,o=I.dependencies,v.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return ft(Ct,Ct.current&1|2),l.child}o=o.sibling}v.tail!==null&&vt()>Cl&&(l.flags|=128,p=!0,vc(v,!1),l.lanes=4194304)}else{if(!p)if(o=kh(I),o!==null){if(l.flags|=128,p=!0,c=o.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),vc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!It)return Tn(l),null}else 2*vt()-v.renderingStartTime>Cl&&c!==1073741824&&(l.flags|=128,p=!0,vc(v,!1),l.lanes=4194304);v.isBackwards?(I.sibling=l.child,l.child=I):(c=v.last,c!==null?c.sibling=I:l.child=I,v.last=I)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=vt(),l.sibling=null,c=Ct.current,ft(Ct,p?c&1|2:c&1),l):(Tn(l),null);case 22:case 23:return zg(),p=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(ir&1073741824)!==0&&(Tn(l),l.subtreeFlags&6&&(l.flags|=8192)):Tn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function eD(o,l){switch(Jm(l),l.tag){case 1:return Un(l.type)&&wh(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return El(),wt(Fn),wt(_n),dg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return ug(l),null;case 13:if(wt(Ct),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));vl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return wt(Ct),null;case 4:return El(),null;case 10:return ig(l.type._context),null;case 22:case 23:return zg(),null;case 24:return null;default:return null}}var jh=!1,En=!1,tD=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Sl(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Nt(o,l,p)}else c.current=null}function kg(o,l,c){try{c()}catch(p){Nt(o,l,p)}}var kT=!1;function nD(o,l){if(zm=xi,o=u0(),Om(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var I=0,V=-1,B=-1,ee=0,de=0,he=o,le=null;t:for(;;){for(var we;he!==c||y!==0&&he.nodeType!==3||(V=I+y),he!==v||p!==0&&he.nodeType!==3||(B=I+p),he.nodeType===3&&(I+=he.nodeValue.length),(we=he.firstChild)!==null;)le=he,he=we;for(;;){if(he===o)break t;if(le===c&&++ee===y&&(V=I),le===v&&++de===p&&(B=I),(we=he.nextSibling)!==null)break;he=le,le=he.parentNode}he=we}c=V===-1||B===-1?null:{start:V,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Wm={focusedElem:o,selectionRange:c},xi=!1,Ee=l;Ee!==null;)if(l=Ee,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ee=o;else for(;Ee!==null;){l=Ee;try{var Se=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ae=Se.memoizedProps,jt=Se.memoizedState,q=l.stateNode,$=q.getSnapshotBeforeUpdate(l.elementType===l.type?Ae:br(l.type,Ae),jt);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var X=l.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){Nt(l,l.return,pe)}if(o=l.sibling,o!==null){o.return=l.return,Ee=o;break}Ee=l.return}return Se=kT,kT=!1,Se}function _c(o,l,c){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var v=y.destroy;y.destroy=void 0,v!==void 0&&kg(l,c,v)}y=y.next}while(y!==p)}}function Bh(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==l)}}function Dg(o){var l=o.ref;if(l!==null){var c=o.stateNode;o.tag,o=c,typeof l=="function"?l(o):l.current=o}}function DT(o){var l=o.alternate;l!==null&&(o.alternate=null,DT(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ei],delete l[lc],delete l[Km],delete l[Fk],delete l[Uk])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function NT(o){return o.tag===5||o.tag===3||o.tag===4}function VT(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||NT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ng(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=vh));else if(p!==4&&(o=o.child,o!==null))for(Ng(o,l,c),o=o.sibling;o!==null;)Ng(o,l,c),o=o.sibling}function Vg(o,l,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(Vg(o,l,c),o=o.sibling;o!==null;)Vg(o,l,c),o=o.sibling}var fn=null,xr=!1;function Ds(o,l,c){for(c=c.child;c!==null;)OT(o,l,c),c=c.sibling}function OT(o,l,c){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Vo,c)}catch{}switch(c.tag){case 5:En||Sl(c,l);case 6:var p=fn,y=xr;fn=null,Ds(o,l,c),fn=p,xr=y,fn!==null&&(xr?(o=fn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):fn.removeChild(c.stateNode));break;case 18:fn!==null&&(xr?(o=fn,c=c.stateNode,o.nodeType===8?Gm(o.parentNode,c):o.nodeType===1&&Gm(o,c),Es(o)):Gm(fn,c.stateNode));break;case 4:p=fn,y=xr,fn=c.stateNode.containerInfo,xr=!0,Ds(o,l,c),fn=p,xr=y;break;case 0:case 11:case 14:case 15:if(!En&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var v=y,I=v.destroy;v=v.tag,I!==void 0&&((v&2)!==0||(v&4)!==0)&&kg(c,l,I),y=y.next}while(y!==p)}Ds(o,l,c);break;case 1:if(!En&&(Sl(c,l),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(V){Nt(c,l,V)}Ds(o,l,c);break;case 21:Ds(o,l,c);break;case 22:c.mode&1?(En=(p=En)||c.memoizedState!==null,Ds(o,l,c),En=p):Ds(o,l,c);break;default:Ds(o,l,c)}}function MT(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new tD),l.forEach(function(p){var y=dD.bind(null,o,p);c.has(p)||(c.add(p),p.then(y,y))})}}function Rr(o,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var v=o,I=l,V=I;e:for(;V!==null;){switch(V.tag){case 5:fn=V.stateNode,xr=!1;break e;case 3:fn=V.stateNode.containerInfo,xr=!0;break e;case 4:fn=V.stateNode.containerInfo,xr=!0;break e}V=V.return}if(fn===null)throw Error(t(160));OT(v,I,y),fn=null,xr=!1;var B=y.alternate;B!==null&&(B.return=null),y.return=null}catch(ee){Nt(y,l,ee)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)LT(l,o),l=l.sibling}function LT(o,l){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Rr(l,o),ri(o),p&4){try{_c(3,o,o.return),Bh(3,o)}catch(Ae){Nt(o,o.return,Ae)}try{_c(5,o,o.return)}catch(Ae){Nt(o,o.return,Ae)}}break;case 1:Rr(l,o),ri(o),p&512&&c!==null&&Sl(c,c.return);break;case 5:if(Rr(l,o),ri(o),p&512&&c!==null&&Sl(c,c.return),o.flags&32){var y=o.stateNode;try{tt(y,"")}catch(Ae){Nt(o,o.return,Ae)}}if(p&4&&(y=o.stateNode,y!=null)){var v=o.memoizedProps,I=c!==null?c.memoizedProps:v,V=o.type,B=o.updateQueue;if(o.updateQueue=null,B!==null)try{V==="input"&&v.type==="radio"&&v.name!=null&&ls(y,v),Ha(V,I);var ee=Ha(V,v);for(I=0;I<B.length;I+=2){var de=B[I],he=B[I+1];de==="style"?Wa(y,he):de==="dangerouslySetInnerHTML"?hs(y,he):de==="children"?tt(y,he):F(y,de,he,ee)}switch(V){case"input":Ti(y,v);break;case"textarea":$a(y,v);break;case"select":var le=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!v.multiple;var we=v.value;we!=null?Mn(y,!!v.multiple,we,!1):le!==!!v.multiple&&(v.defaultValue!=null?Mn(y,!!v.multiple,v.defaultValue,!0):Mn(y,!!v.multiple,v.multiple?[]:"",!1))}y[lc]=v}catch(Ae){Nt(o,o.return,Ae)}}break;case 6:if(Rr(l,o),ri(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,v=o.memoizedProps;try{y.nodeValue=v}catch(Ae){Nt(o,o.return,Ae)}}break;case 3:if(Rr(l,o),ri(o),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Es(l.containerInfo)}catch(Ae){Nt(o,o.return,Ae)}break;case 4:Rr(l,o),ri(o);break;case 13:Rr(l,o),ri(o),y=o.child,y.flags&8192&&(v=y.memoizedState!==null,y.stateNode.isHidden=v,!v||y.alternate!==null&&y.alternate.memoizedState!==null||(Lg=vt())),p&4&&MT(o);break;case 22:if(de=c!==null&&c.memoizedState!==null,o.mode&1?(En=(ee=En)||de,Rr(l,o),En=ee):Rr(l,o),ri(o),p&8192){if(ee=o.memoizedState!==null,(o.stateNode.isHidden=ee)&&!de&&(o.mode&1)!==0)for(Ee=o,de=o.child;de!==null;){for(he=Ee=de;Ee!==null;){switch(le=Ee,we=le.child,le.tag){case 0:case 11:case 14:case 15:_c(4,le,le.return);break;case 1:Sl(le,le.return);var Se=le.stateNode;if(typeof Se.componentWillUnmount=="function"){p=le,c=le.return;try{l=p,Se.props=l.memoizedProps,Se.state=l.memoizedState,Se.componentWillUnmount()}catch(Ae){Nt(p,c,Ae)}}break;case 5:Sl(le,le.return);break;case 22:if(le.memoizedState!==null){jT(he);continue}}we!==null?(we.return=le,Ee=we):jT(he)}de=de.sibling}e:for(de=null,he=o;;){if(he.tag===5){if(de===null){de=he;try{y=he.stateNode,ee?(v=y.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(V=he.stateNode,B=he.memoizedProps.style,I=B!=null&&B.hasOwnProperty("display")?B.display:null,V.style.display=fs("display",I))}catch(Ae){Nt(o,o.return,Ae)}}}else if(he.tag===6){if(de===null)try{he.stateNode.nodeValue=ee?"":he.memoizedProps}catch(Ae){Nt(o,o.return,Ae)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===o)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===o)break e;for(;he.sibling===null;){if(he.return===null||he.return===o)break e;de===he&&(de=null),he=he.return}de===he&&(de=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Rr(l,o),ri(o),p&4&&MT(o);break;case 21:break;default:Rr(l,o),ri(o)}}function ri(o){var l=o.flags;if(l&2){try{e:{for(var c=o.return;c!==null;){if(NT(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(tt(y,""),p.flags&=-33);var v=VT(o);Vg(o,v,y);break;case 3:case 4:var I=p.stateNode.containerInfo,V=VT(o);Ng(o,V,I);break;default:throw Error(t(161))}}catch(B){Nt(o,o.return,B)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function rD(o,l,c){Ee=o,FT(o)}function FT(o,l,c){for(var p=(o.mode&1)!==0;Ee!==null;){var y=Ee,v=y.child;if(y.tag===22&&p){var I=y.memoizedState!==null||jh;if(!I){var V=y.alternate,B=V!==null&&V.memoizedState!==null||En;V=jh;var ee=En;if(jh=I,(En=B)&&!ee)for(Ee=y;Ee!==null;)I=Ee,B=I.child,I.tag===22&&I.memoizedState!==null?BT(y):B!==null?(B.return=I,Ee=B):BT(y);for(;v!==null;)Ee=v,FT(v),v=v.sibling;Ee=y,jh=V,En=ee}UT(o)}else(y.subtreeFlags&8772)!==0&&v!==null?(v.return=y,Ee=v):UT(o)}}function UT(o){for(;Ee!==null;){var l=Ee;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:En||Bh(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!En)if(c===null)p.componentDidMount();else{var y=l.elementType===l.type?c.memoizedProps:br(l.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=l.updateQueue;v!==null&&j0(l,v,p);break;case 3:var I=l.updateQueue;if(I!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}j0(l,I,c)}break;case 5:var V=l.stateNode;if(c===null&&l.flags&4){c=V;var B=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&c.focus();break;case"img":B.src&&(c.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ee=l.alternate;if(ee!==null){var de=ee.memoizedState;if(de!==null){var he=de.dehydrated;he!==null&&Es(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}En||l.flags&512&&Dg(l)}catch(le){Nt(l,l.return,le)}}if(l===o){Ee=null;break}if(c=l.sibling,c!==null){c.return=l.return,Ee=c;break}Ee=l.return}}function jT(o){for(;Ee!==null;){var l=Ee;if(l===o){Ee=null;break}var c=l.sibling;if(c!==null){c.return=l.return,Ee=c;break}Ee=l.return}}function BT(o){for(;Ee!==null;){var l=Ee;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{Bh(4,l)}catch(B){Nt(l,c,B)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var y=l.return;try{p.componentDidMount()}catch(B){Nt(l,y,B)}}var v=l.return;try{Dg(l)}catch(B){Nt(l,v,B)}break;case 5:var I=l.return;try{Dg(l)}catch(B){Nt(l,I,B)}}}catch(B){Nt(l,l.return,B)}if(l===o){Ee=null;break}var V=l.sibling;if(V!==null){V.return=l.return,Ee=V;break}Ee=l.return}}var iD=Math.ceil,$h=z.ReactCurrentDispatcher,Og=z.ReactCurrentOwner,yr=z.ReactCurrentBatchConfig,Je=0,on=null,Qt=null,pn=0,ir=0,Pl=As(0),tn=0,wc=null,Yo=0,zh=0,Mg=0,Tc=null,Bn=null,Lg=0,Cl=1/0,Ui=null,Wh=!1,Fg=null,Ns=null,Hh=!1,Vs=null,qh=0,Ec=0,Ug=null,Gh=-1,Kh=0;function kn(){return(Je&6)!==0?vt():Gh!==-1?Gh:Gh=vt()}function Os(o){return(o.mode&1)===0?1:(Je&2)!==0&&pn!==0?pn&-pn:Bk.transition!==null?(Kh===0&&(Kh=zu()),Kh):(o=Ge,o!==0||(o=window.event,o=o===void 0?16:tl(o.type)),o)}function kr(o,l,c,p){if(50<Ec)throw Ec=0,Ug=null,Error(t(185));Fo(o,c,p),((Je&2)===0||o!==on)&&(o===on&&((Je&2)===0&&(zh|=c),tn===4&&Ms(o,pn)),$n(o,p),c===1&&Je===0&&(l.mode&1)===0&&(Cl=vt()+500,Eh&&xs()))}function $n(o,l){var c=o.callbackNode;Lo(o,l);var p=Ci(o,o===on?pn:0);if(p===0)c!==null&&Ka(c),o.callbackNode=null,o.callbackPriority=0;else if(l=p&-p,o.callbackPriority!==l){if(c!=null&&Ka(c),l===1)o.tag===0?jk(zT.bind(null,o)):b0(zT.bind(null,o)),Mk(function(){(Je&6)===0&&xs()}),c=null;else{switch(Wr(p)){case 1:c=Qa;break;case 4:c=ju;break;case 16:c=No;break;case 536870912:c=Ya;break;default:c=No}c=XT(c,$T.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function $T(o,l){if(Gh=-1,Kh=0,(Je&6)!==0)throw Error(t(327));var c=o.callbackNode;if(Al()&&o.callbackNode!==c)return null;var p=Ci(o,o===on?pn:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||l)l=Qh(o,p);else{l=p;var y=Je;Je|=2;var v=HT();(on!==o||pn!==l)&&(Ui=null,Cl=vt()+500,Jo(o,l));do try{aD();break}catch(V){WT(o,V)}while(!0);rg(),$h.current=v,Je=y,Qt!==null?l=0:(on=null,pn=0,l=tn)}if(l!==0){if(l===2&&(y=$u(o),y!==0&&(p=y,l=jg(o,y))),l===1)throw c=wc,Jo(o,0),Ms(o,p),$n(o,vt()),c;if(l===6)Ms(o,p);else{if(y=o.current.alternate,(p&30)===0&&!sD(y)&&(l=Qh(o,p),l===2&&(v=$u(o),v!==0&&(p=v,l=jg(o,v))),l===1))throw c=wc,Jo(o,0),Ms(o,p),$n(o,vt()),c;switch(o.finishedWork=y,o.finishedLanes=p,l){case 0:case 1:throw Error(t(345));case 2:Zo(o,Bn,Ui);break;case 3:if(Ms(o,p),(p&130023424)===p&&(l=Lg+500-vt(),10<l)){if(Ci(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){kn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=qm(Zo.bind(null,o,Bn,Ui),l);break}Zo(o,Bn,Ui);break;case 4:if(Ms(o,p),(p&4194240)===p)break;for(l=o.eventTimes,y=-1;0<p;){var I=31-Xn(p);v=1<<I,I=l[I],I>y&&(y=I),p&=~v}if(p=y,p=vt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*iD(p/1960))-p,10<p){o.timeoutHandle=qm(Zo.bind(null,o,Bn,Ui),p);break}Zo(o,Bn,Ui);break;case 5:Zo(o,Bn,Ui);break;default:throw Error(t(329))}}}return $n(o,vt()),o.callbackNode===c?$T.bind(null,o):null}function jg(o,l){var c=Tc;return o.current.memoizedState.isDehydrated&&(Jo(o,l).flags|=256),o=Qh(o,l),o!==2&&(l=Bn,Bn=c,l!==null&&Bg(l)),o}function Bg(o){Bn===null?Bn=o:Bn.push.apply(Bn,o)}function sD(o){for(var l=o;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],v=y.getSnapshot;y=y.value;try{if(!Cr(v(),y))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ms(o,l){for(l&=~Mg,l&=~zh,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-Xn(l),p=1<<c;o[c]=-1,l&=~p}}function zT(o){if((Je&6)!==0)throw Error(t(327));Al();var l=Ci(o,0);if((l&1)===0)return $n(o,vt()),null;var c=Qh(o,l);if(o.tag!==0&&c===2){var p=$u(o);p!==0&&(l=p,c=jg(o,p))}if(c===1)throw c=wc,Jo(o,0),Ms(o,l),$n(o,vt()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Zo(o,Bn,Ui),$n(o,vt()),null}function $g(o,l){var c=Je;Je|=1;try{return o(l)}finally{Je=c,Je===0&&(Cl=vt()+500,Eh&&xs())}}function Xo(o){Vs!==null&&Vs.tag===0&&(Je&6)===0&&Al();var l=Je;Je|=1;var c=yr.transition,p=Ge;try{if(yr.transition=null,Ge=1,o)return o()}finally{Ge=p,yr.transition=c,Je=l,(Je&6)===0&&xs()}}function zg(){ir=Pl.current,wt(Pl)}function Jo(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,Ok(c)),Qt!==null)for(c=Qt.return;c!==null;){var p=c;switch(Jm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&wh();break;case 3:El(),wt(Fn),wt(_n),dg();break;case 5:ug(p);break;case 4:El();break;case 13:wt(Ct);break;case 19:wt(Ct);break;case 10:ig(p.type._context);break;case 22:case 23:zg()}c=c.return}if(on=o,Qt=o=Ls(o.current,null),pn=ir=l,tn=0,wc=null,Mg=zh=Yo=0,Bn=Tc=null,Go!==null){for(l=0;l<Go.length;l++)if(c=Go[l],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,v=c.pending;if(v!==null){var I=v.next;v.next=y,p.next=I}c.pending=p}Go=null}return o}function WT(o,l){do{var c=Qt;try{if(rg(),Dh.current=Mh,Nh){for(var p=At.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Nh=!1}if(Qo=0,sn=en=At=null,pc=!1,mc=0,Og.current=null,c===null||c.return===null){tn=1,wc=l,Qt=null;break}e:{var v=o,I=c.return,V=c,B=l;if(l=pn,V.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var ee=B,de=V,he=de.tag;if((de.mode&1)===0&&(he===0||he===11||he===15)){var le=de.alternate;le?(de.updateQueue=le.updateQueue,de.memoizedState=le.memoizedState,de.lanes=le.lanes):(de.updateQueue=null,de.memoizedState=null)}var we=mT(I);if(we!==null){we.flags&=-257,gT(we,I,V,v,l),we.mode&1&&pT(v,ee,l),l=we,B=ee;var Se=l.updateQueue;if(Se===null){var Ae=new Set;Ae.add(B),l.updateQueue=Ae}else Se.add(B);break e}else{if((l&1)===0){pT(v,ee,l),Wg();break e}B=Error(t(426))}}else if(It&&V.mode&1){var jt=mT(I);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),gT(jt,I,V,v,l),tg(Il(B,V));break e}}v=B=Il(B,V),tn!==4&&(tn=2),Tc===null?Tc=[v]:Tc.push(v),v=I;do{switch(v.tag){case 3:v.flags|=65536,l&=-l,v.lanes|=l;var q=hT(v,B,l);U0(v,q);break e;case 1:V=B;var $=v.type,X=v.stateNode;if((v.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Ns===null||!Ns.has(X)))){v.flags|=65536,l&=-l,v.lanes|=l;var pe=fT(v,V,l);U0(v,pe);break e}}v=v.return}while(v!==null)}GT(c)}catch(be){l=be,Qt===c&&c!==null&&(Qt=c=c.return);continue}break}while(!0)}function HT(){var o=$h.current;return $h.current=Mh,o===null?Mh:o}function Wg(){(tn===0||tn===3||tn===2)&&(tn=4),on===null||(Yo&268435455)===0&&(zh&268435455)===0||Ms(on,pn)}function Qh(o,l){var c=Je;Je|=2;var p=HT();(on!==o||pn!==l)&&(Ui=null,Jo(o,l));do try{oD();break}catch(y){WT(o,y)}while(!0);if(rg(),Je=c,$h.current=p,Qt!==null)throw Error(t(261));return on=null,pn=0,tn}function oD(){for(;Qt!==null;)qT(Qt)}function aD(){for(;Qt!==null&&!Do();)qT(Qt)}function qT(o){var l=YT(o.alternate,o,ir);o.memoizedProps=o.pendingProps,l===null?GT(o):Qt=l,Og.current=null}function GT(o){var l=o;do{var c=l.alternate;if(o=l.return,(l.flags&32768)===0){if(c=Zk(c,l,ir),c!==null){Qt=c;return}}else{if(c=eD(c,l),c!==null){c.flags&=32767,Qt=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{tn=6,Qt=null;return}}if(l=l.sibling,l!==null){Qt=l;return}Qt=l=o}while(l!==null);tn===0&&(tn=5)}function Zo(o,l,c){var p=Ge,y=yr.transition;try{yr.transition=null,Ge=1,lD(o,l,c,p)}finally{yr.transition=y,Ge=p}return null}function lD(o,l,c,p){do Al();while(Vs!==null);if((Je&6)!==0)throw Error(t(327));c=o.finishedWork;var y=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var v=c.lanes|c.childLanes;if(Rm(o,v),o===on&&(Qt=on=null,pn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Hh||(Hh=!0,XT(No,function(){return Al(),null})),v=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||v){v=yr.transition,yr.transition=null;var I=Ge;Ge=1;var V=Je;Je|=4,Og.current=null,nD(o,c),LT(c,o),bk(Wm),xi=!!zm,Wm=zm=null,o.current=c,rD(c),Pi(),Je=V,Ge=I,yr.transition=v}else o.current=c;if(Hh&&(Hh=!1,Vs=o,qh=y),v=o.pendingLanes,v===0&&(Ns=null),nh(c.stateNode),$n(o,vt()),l!==null)for(p=o.onRecoverableError,c=0;c<l.length;c++)y=l[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(Wh)throw Wh=!1,o=Fg,Fg=null,o;return(qh&1)!==0&&o.tag!==0&&Al(),v=o.pendingLanes,(v&1)!==0?o===Ug?Ec++:(Ec=0,Ug=o):Ec=0,xs(),null}function Al(){if(Vs!==null){var o=Wr(qh),l=yr.transition,c=Ge;try{if(yr.transition=null,Ge=16>o?16:o,Vs===null)var p=!1;else{if(o=Vs,Vs=null,qh=0,(Je&6)!==0)throw Error(t(331));var y=Je;for(Je|=4,Ee=o.current;Ee!==null;){var v=Ee,I=v.child;if((Ee.flags&16)!==0){var V=v.deletions;if(V!==null){for(var B=0;B<V.length;B++){var ee=V[B];for(Ee=ee;Ee!==null;){var de=Ee;switch(de.tag){case 0:case 11:case 15:_c(8,de,v)}var he=de.child;if(he!==null)he.return=de,Ee=he;else for(;Ee!==null;){de=Ee;var le=de.sibling,we=de.return;if(DT(de),de===ee){Ee=null;break}if(le!==null){le.return=we,Ee=le;break}Ee=we}}}var Se=v.alternate;if(Se!==null){var Ae=Se.child;if(Ae!==null){Se.child=null;do{var jt=Ae.sibling;Ae.sibling=null,Ae=jt}while(Ae!==null)}}Ee=v}}if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,Ee=I;else e:for(;Ee!==null;){if(v=Ee,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:_c(9,v,v.return)}var q=v.sibling;if(q!==null){q.return=v.return,Ee=q;break e}Ee=v.return}}var $=o.current;for(Ee=$;Ee!==null;){I=Ee;var X=I.child;if((I.subtreeFlags&2064)!==0&&X!==null)X.return=I,Ee=X;else e:for(I=$;Ee!==null;){if(V=Ee,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Bh(9,V)}}catch(be){Nt(V,V.return,be)}if(V===I){Ee=null;break e}var pe=V.sibling;if(pe!==null){pe.return=V.return,Ee=pe;break e}Ee=V.return}}if(Je=y,xs(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Vo,o)}catch{}p=!0}return p}finally{Ge=c,yr.transition=l}}return!1}function KT(o,l,c){l=Il(c,l),l=hT(o,l,1),o=ks(o,l,1),l=kn(),o!==null&&(Fo(o,1,l),$n(o,l))}function Nt(o,l,c){if(o.tag===3)KT(o,o,c);else for(;l!==null;){if(l.tag===3){KT(l,o,c);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ns===null||!Ns.has(p))){o=Il(c,o),o=fT(l,o,1),l=ks(l,o,1),o=kn(),l!==null&&(Fo(l,1,o),$n(l,o));break}}l=l.return}}function uD(o,l,c){var p=o.pingCache;p!==null&&p.delete(l),l=kn(),o.pingedLanes|=o.suspendedLanes&c,on===o&&(pn&c)===c&&(tn===4||tn===3&&(pn&130023424)===pn&&500>vt()-Lg?Jo(o,0):Mg|=c),$n(o,l)}function QT(o,l){l===0&&((o.mode&1)===0?l=1:(l=_s,_s<<=1,(_s&130023424)===0&&(_s=4194304)));var c=kn();o=Mi(o,l),o!==null&&(Fo(o,l,c),$n(o,c))}function cD(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),QT(o,c)}function dD(o,l){var c=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(l),QT(o,c)}var YT;YT=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||Fn.current)jn=!0;else{if((o.lanes&c)===0&&(l.flags&128)===0)return jn=!1,Jk(o,l,c);jn=(o.flags&131072)!==0}else jn=!1,It&&(l.flags&1048576)!==0&&x0(l,Sh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Uh(o,l),o=l.pendingProps;var y=ml(l,_n.current);Tl(l,c),y=pg(null,l,p,o,y,c);var v=mg();return l.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Un(p)?(v=!0,Th(l)):v=!1,l.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,ag(l),y.updater=Lh,l.stateNode=y,y._reactInternals=l,Tg(l,p,o,c),l=Pg(null,l,p,!0,v,c)):(l.tag=0,It&&v&&Xm(l),Rn(null,l,y,c),l=l.child),l;case 16:p=l.elementType;e:{switch(Uh(o,l),o=l.pendingProps,y=p._init,p=y(p._payload),l.type=p,y=l.tag=fD(p),o=br(p,o),y){case 0:l=Sg(null,l,p,o,c);break e;case 1:l=ET(null,l,p,o,c);break e;case 11:l=yT(null,l,p,o,c);break e;case 14:l=vT(null,l,p,br(p.type,o),c);break e}throw Error(t(306,p,""))}return l;case 0:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),Sg(o,l,p,y,c);case 1:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),ET(o,l,p,y,c);case 3:e:{if(IT(l),o===null)throw Error(t(387));p=l.pendingProps,v=l.memoizedState,y=v.element,F0(o,l),Rh(l,p,null,c);var I=l.memoizedState;if(p=I.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){y=Il(Error(t(423)),l),l=ST(o,l,p,c,y);break e}else if(p!==y){y=Il(Error(t(424)),l),l=ST(o,l,p,c,y);break e}else for(rr=Cs(l.stateNode.containerInfo.firstChild),nr=l,It=!0,Ar=null,c=M0(l,null,p,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(vl(),p===y){l=Fi(o,l,c);break e}Rn(o,l,p,c)}l=l.child}return l;case 5:return B0(l),o===null&&eg(l),p=l.type,y=l.pendingProps,v=o!==null?o.memoizedProps:null,I=y.children,Hm(p,y)?I=null:v!==null&&Hm(p,v)&&(l.flags|=32),TT(o,l),Rn(o,l,I,c),l.child;case 6:return o===null&&eg(l),null;case 13:return PT(o,l,c);case 4:return lg(l,l.stateNode.containerInfo),p=l.pendingProps,o===null?l.child=_l(l,null,p,c):Rn(o,l,p,c),l.child;case 11:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),yT(o,l,p,y,c);case 7:return Rn(o,l,l.pendingProps,c),l.child;case 8:return Rn(o,l,l.pendingProps.children,c),l.child;case 12:return Rn(o,l,l.pendingProps.children,c),l.child;case 10:e:{if(p=l.type._context,y=l.pendingProps,v=l.memoizedProps,I=y.value,ft(Ah,p._currentValue),p._currentValue=I,v!==null)if(Cr(v.value,I)){if(v.children===y.children&&!Fn.current){l=Fi(o,l,c);break e}}else for(v=l.child,v!==null&&(v.return=l);v!==null;){var V=v.dependencies;if(V!==null){I=v.child;for(var B=V.firstContext;B!==null;){if(B.context===p){if(v.tag===1){B=Li(-1,c&-c),B.tag=2;var ee=v.updateQueue;if(ee!==null){ee=ee.shared;var de=ee.pending;de===null?B.next=B:(B.next=de.next,de.next=B),ee.pending=B}}v.lanes|=c,B=v.alternate,B!==null&&(B.lanes|=c),sg(v.return,c,l),V.lanes|=c;break}B=B.next}}else if(v.tag===10)I=v.type===l.type?null:v.child;else if(v.tag===18){if(I=v.return,I===null)throw Error(t(341));I.lanes|=c,V=I.alternate,V!==null&&(V.lanes|=c),sg(I,c,l),I=v.sibling}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===l){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}Rn(o,l,y.children,c),l=l.child}return l;case 9:return y=l.type,p=l.pendingProps.children,Tl(l,c),y=mr(y),p=p(y),l.flags|=1,Rn(o,l,p,c),l.child;case 14:return p=l.type,y=br(p,l.pendingProps),y=br(p.type,y),vT(o,l,p,y,c);case 15:return _T(o,l,l.type,l.pendingProps,c);case 17:return p=l.type,y=l.pendingProps,y=l.elementType===p?y:br(p,y),Uh(o,l),l.tag=1,Un(p)?(o=!0,Th(l)):o=!1,Tl(l,c),cT(l,p,y),Tg(l,p,y,c),Pg(null,l,p,!0,o,c);case 19:return AT(o,l,c);case 22:return wT(o,l,c)}throw Error(t(156,l.tag))};function XT(o,l){return Uu(o,l)}function hD(o,l,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(o,l,c,p){return new hD(o,l,c,p)}function Hg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function fD(o){if(typeof o=="function")return Hg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===Pe)return 14}return 2}function Ls(o,l){var c=o.alternate;return c===null?(c=vr(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function Yh(o,l,c,p,y,v){var I=2;if(p=o,typeof o=="function")Hg(o)&&(I=1);else if(typeof o=="string")I=5;else e:switch(o){case P:return ea(c.children,y,v,l);case S:I=8,y|=8;break;case k:return o=vr(12,c,l,y|2),o.elementType=k,o.lanes=v,o;case N:return o=vr(13,c,l,y),o.elementType=N,o.lanes=v,o;case fe:return o=vr(19,c,l,y),o.elementType=fe,o.lanes=v,o;case ie:return Xh(c,y,v,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:I=10;break e;case M:I=9;break e;case U:I=11;break e;case Pe:I=14;break e;case J:I=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=vr(I,c,l,y),l.elementType=o,l.type=p,l.lanes=v,l}function ea(o,l,c,p){return o=vr(7,o,p,l),o.lanes=c,o}function Xh(o,l,c,p){return o=vr(22,o,p,l),o.elementType=ie,o.lanes=c,o.stateNode={isHidden:!1},o}function qg(o,l,c){return o=vr(6,o,null,l),o.lanes=c,o}function Gg(o,l,c){return l=vr(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function pD(o,l,c,p,y){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Kg(o,l,c,p,y,v,I,V,B){return o=new pD(o,l,c,V,B),l===1?(l=1,v===!0&&(l|=8)):l=0,v=vr(3,null,null,l),o.current=v,v.stateNode=o,v.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},ag(v),o}function mD(o,l,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:p==null?null:""+p,children:o,containerInfo:l,implementation:c}}function JT(o){if(!o)return bs;o=o._reactInternals;e:{if(Sr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Un(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Un(c))return C0(o,c,l)}return l}function ZT(o,l,c,p,y,v,I,V,B){return o=Kg(c,p,!0,o,y,v,I,V,B),o.context=JT(null),c=o.current,p=kn(),y=Os(c),v=Li(p,y),v.callback=l??null,ks(c,v,y),o.current.lanes=y,Fo(o,y,p),$n(o,p),o}function Jh(o,l,c,p){var y=l.current,v=kn(),I=Os(y);return c=JT(c),l.context===null?l.context=c:l.pendingContext=c,l=Li(v,I),l.payload={element:o},p=p===void 0?null:p,p!==null&&(l.callback=p),o=ks(y,l,I),o!==null&&(kr(o,y,I,v),xh(o,y,I)),I}function Zh(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function eE(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function Qg(o,l){eE(o,l),(o=o.alternate)&&eE(o,l)}function gD(){return null}var tE=typeof reportError=="function"?reportError:function(o){console.error(o)};function Yg(o){this._internalRoot=o}ef.prototype.render=Yg.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));Jh(o,l,null,null)},ef.prototype.unmount=Yg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Xo(function(){Jh(null,o,null,null)}),l[Di]=null}};function ef(o){this._internalRoot=o}ef.prototype.unstable_scheduleHydration=function(o){if(o){var l=Ku();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Jn.length&&l!==0&&l<Jn[c].priority;c++);Jn.splice(c,0,o),c===0&&Za(o)}};function Xg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function tf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function nE(){}function yD(o,l,c,p,y){if(y){if(typeof p=="function"){var v=p;p=function(){var ee=Zh(I);v.call(ee)}}var I=ZT(l,p,o,0,null,!1,!1,"",nE);return o._reactRootContainer=I,o[Di]=I.current,oc(o.nodeType===8?o.parentNode:o),Xo(),I}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var V=p;p=function(){var ee=Zh(B);V.call(ee)}}var B=Kg(o,0,!1,null,null,!1,!1,"",nE);return o._reactRootContainer=B,o[Di]=B.current,oc(o.nodeType===8?o.parentNode:o),Xo(function(){Jh(l,B,c,p)}),B}function nf(o,l,c,p,y){var v=c._reactRootContainer;if(v){var I=v;if(typeof y=="function"){var V=y;y=function(){var B=Zh(I);V.call(B)}}Jh(l,I,o,y)}else I=yD(c,l,o,y,p);return Zh(I)}qu=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=rt(l.pendingLanes);c!==0&&(Hu(l,c|1),$n(l,vt()),(Je&6)===0&&(Cl=vt()+500,xs()))}break;case 13:Xo(function(){var p=Mi(o,1);if(p!==null){var y=kn();kr(p,o,1,y)}}),Qg(o,1)}},Xa=function(o){if(o.tag===13){var l=Mi(o,134217728);if(l!==null){var c=kn();kr(l,o,134217728,c)}Qg(o,134217728)}},Gu=function(o){if(o.tag===13){var l=Os(o),c=Mi(o,l);if(c!==null){var p=kn();kr(c,o,l,p)}Qg(o,l)}},Ku=function(){return Ge},Qu=function(o,l){var c=Ge;try{return Ge=o,l()}finally{Ge=c}},Ei=function(o,l,c){switch(l){case"input":if(Ti(o,c),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var p=c[l];if(p!==o&&p.form===o.form){var y=_h(p);if(!y)throw Error(t(90));ss(p),Ti(p,y)}}}break;case"textarea":$a(o,c);break;case"select":l=c.value,l!=null&&Mn(o,!!c.multiple,l,!1)}},Gd=$g,Kd=Xo;var vD={usingClientEntryPoint:!1,Events:[uc,fl,_h,ms,gs,$g]},Ic={findFiberByHostInstance:zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_D={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=th(o),o===null?null:o.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||gD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{Vo=rf.inject(_D),Yn=rf}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vD,zn.createPortal=function(o,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xg(l))throw Error(t(200));return mD(o,l,null,c)},zn.createRoot=function(o,l){if(!Xg(o))throw Error(t(299));var c=!1,p="",y=tE;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),l=Kg(o,1,!1,null,null,c,!1,p,y),o[Di]=l.current,oc(o.nodeType===8?o.parentNode:o),new Yg(l)},zn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=th(l),o=o===null?null:o.stateNode,o},zn.flushSync=function(o){return Xo(o)},zn.hydrate=function(o,l,c){if(!tf(l))throw Error(t(200));return nf(null,o,l,!0,c)},zn.hydrateRoot=function(o,l,c){if(!Xg(o))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,v="",I=tE;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(I=c.onRecoverableError)),l=ZT(l,null,o,1,c??null,y,!1,v,I),o[Di]=l.current,oc(o),p)for(o=0;o<p.length;o++)c=p[o],y=c._getVersion,y=y(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,y]:l.mutableSourceEagerHydrationData.push(c,y);return new ef(l)},zn.render=function(o,l,c){if(!tf(l))throw Error(t(200));return nf(null,o,l,!1,c)},zn.unmountComponentAtNode=function(o){if(!tf(o))throw Error(t(40));return o._reactRootContainer?(Xo(function(){nf(null,null,o,!1,function(){o._reactRootContainer=null,o[Di]=null})}),!0):!1},zn.unstable_batchedUpdates=$g,zn.unstable_renderSubtreeIntoContainer=function(o,l,c,p){if(!tf(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return nf(o,l,c,!1,p)},zn.version="18.3.1-next-f1338f8080-20240426",zn}var cE;function YP(){if(cE)return ey.exports;cE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ey.exports=AD(),ey.exports}var dE;function bD(){if(dE)return sf;dE=1;var n=YP();return sf.createRoot=n.createRoot,sf.hydrateRoot=n.hydrateRoot,sf}var xD=bD();const RD=Jv(xD),kD="modulepreload",DD=function(n){return"/"+n},hE={},vi=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=DD(h),h in hE)return;hE[h]=!0;const m=h.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":kD,m||(w.as="script"),w.crossOrigin="",w.href=h,u&&w.setAttribute("nonce",u),document.head.appendChild(w),m)return new Promise((E,x)=>{w.addEventListener("load",E),w.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var t_=YP();const ND=Jv(t_);function ad(){return ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ad.apply(this,arguments)}var Js;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Js||(Js={}));const fE="popstate";function VD(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return By("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Wf(i)}return MD(e,t,null,n)}function kt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function n_(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OD(){return Math.random().toString(36).substr(2,8)}function pE(n,e){return{usr:n.state,key:n.key,idx:e}}function By(n,e,t,r){return t===void 0&&(t=null),ad({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Su(e):e,{state:t,key:e&&e.key||r||OD()})}function Wf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Su(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function MD(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=Js.Pop,d=null,h=m();h==null&&(h=0,a.replaceState(ad({},a.state,{idx:h}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Js.Pop;let C=m(),j=C==null?null:C-h;h=C,d&&d({action:u,location:R.location,delta:j})}function w(C,j){u=Js.Push;let O=By(R.location,C,j);h=m()+1;let F=pE(O,h),z=R.createHref(O);try{a.pushState(F,"",z)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;i.location.assign(z)}s&&d&&d({action:u,location:R.location,delta:1})}function E(C,j){u=Js.Replace;let O=By(R.location,C,j);h=m();let F=pE(O,h),z=R.createHref(O);a.replaceState(F,"",z),s&&d&&d({action:u,location:R.location,delta:0})}function x(C){let j=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof C=="string"?C:Wf(C);return O=O.replace(/ $/,"%20"),kt(j,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,j)}let R={get action(){return u},get location(){return n(i,a)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(fE,g),d=C,()=>{i.removeEventListener(fE,g),d=null}},createHref(C){return e(i,C)},createURL:x,encodeLocation(C){let j=x(C);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:w,replace:E,go(C){return a.go(C)}};return R}var mE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(mE||(mE={}));function LD(n,e,t){return t===void 0&&(t="/"),FD(n,e,t)}function FD(n,e,t,r){let i=typeof e=="string"?Su(e):e,s=tu(i.pathname||"/",t);if(s==null)return null;let a=XP(n);UD(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=YD(s);u=KD(a[d],h)}return u}function XP(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(kt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=eo([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),XP(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:qD(h,s.index),routesMeta:m})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let d of JP(s.path))i(s,a,d)}),e}function JP(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=JP(r.join("/")),u=[];return u.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...a),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function UD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:GD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const jD=/^:[\w-]+$/,BD=3,$D=2,zD=1,WD=10,HD=-2,gE=n=>n==="*";function qD(n,e){let t=n.split("/"),r=t.length;return t.some(gE)&&(r+=HD),e&&(r+=$D),t.filter(i=>!gE(i)).reduce((i,s)=>i+(jD.test(s)?BD:s===""?zD:WD),r)}function GD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function KD(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=$y({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),w=d.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:eo([s,g.pathname]),pathnameBase:tN(eo([s,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(s=eo([s,g.pathnameBase]))}return a}function $y(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=QD(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,m,g)=>{let{paramName:w,isOptional:E}=m;if(w==="*"){let R=u[g]||"";a=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const x=u[g];return E&&!x?h[w]=void 0:h[w]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function QD(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),n_(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function YD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return n_(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function tu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const XD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JD=n=>XD.test(n);function ZD(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Su(n):n,s;if(t)if(JD(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),n_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=yE(t.substring(1),"/"):s=yE(t,e)}else s=e;return{pathname:s,search:nN(r),hash:rN(i)}}function yE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ry(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function r_(n,e){let t=eN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function i_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Su(n):(i=ad({},n),kt(!i.pathname||!i.pathname.includes("?"),ry("?","pathname","search",i)),kt(!i.pathname||!i.pathname.includes("#"),ry("#","pathname","hash",i)),kt(!i.search||!i.search.includes("#"),ry("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),g-=1;i.pathname=w.join("/")}u=g>=0?e[g]:"/"}let d=ZD(i,u),h=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const eo=n=>n.join("/").replace(/\/\/+/g,"/"),tN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,rN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function iN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ZP=["post","put","patch","delete"];new Set(ZP);const sN=["get",...ZP];new Set(sN);function ld(){return ld=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ld.apply(this,arguments)}const Lp=b.createContext(null),eC=b.createContext(null),Zi=b.createContext(null),Fp=b.createContext(null),es=b.createContext({outlet:null,matches:[],isDataRoute:!1}),tC=b.createContext(null);function oN(n,e){let{relative:t}=e===void 0?{}:e;Pu()||kt(!1);let{basename:r,navigator:i}=b.useContext(Zi),{hash:s,pathname:a,search:u}=Up(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:eo([r,a])),i.createHref({pathname:d,search:u,hash:s})}function Pu(){return b.useContext(Fp)!=null}function wo(){return Pu()||kt(!1),b.useContext(Fp).location}function nC(n){b.useContext(Zi).static||b.useLayoutEffect(n)}function s_(){let{isDataRoute:n}=b.useContext(es);return n?_N():aN()}function aN(){Pu()||kt(!1);let n=b.useContext(Lp),{basename:e,future:t,navigator:r}=b.useContext(Zi),{matches:i}=b.useContext(es),{pathname:s}=wo(),a=JSON.stringify(r_(i,t.v7_relativeSplatPath)),u=b.useRef(!1);return nC(()=>{u.current=!0}),b.useCallback(function(h,m){if(m===void 0&&(m={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let g=i_(h,JSON.parse(a),s,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:eo([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,s,n])}function yH(){let{matches:n}=b.useContext(es),e=n[n.length-1];return e?e.params:{}}function Up(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=b.useContext(Zi),{matches:i}=b.useContext(es),{pathname:s}=wo(),a=JSON.stringify(r_(i,r.v7_relativeSplatPath));return b.useMemo(()=>i_(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function lN(n,e){return uN(n,e)}function uN(n,e,t,r){Pu()||kt(!1);let{navigator:i}=b.useContext(Zi),{matches:s}=b.useContext(es),a=s[s.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=wo(),m;if(e){var g;let C=typeof e=="string"?Su(e):e;d==="/"||(g=C.pathname)!=null&&g.startsWith(d)||kt(!1),m=C}else m=h;let w=m.pathname||"/",E=w;if(d!=="/"){let C=d.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=LD(n,{pathname:E}),R=pN(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:eo([d,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:eo([d,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,t,r);return e&&R?b.createElement(Fp.Provider,{value:{location:ld({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Js.Pop}},R):R}function cN(){let n=vN(),e=iN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:i},t):null,null)}const dN=b.createElement(cN,null);class hN extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(es.Provider,{value:this.props.routeContext},b.createElement(tC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fN(n){let{routeContext:e,match:t,children:r}=n,i=b.useContext(Lp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(es.Provider,{value:e},r)}function pN(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||kt(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:w,errors:E}=t,x=g.route.loader&&w[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||x){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,g,w)=>{let E,x=!1,R=null,C=null;t&&(E=u&&g.route.id?u[g.route.id]:void 0,R=g.route.errorElement||dN,d&&(h<0&&w===0?(wN("route-fallback"),x=!0,C=null):h===w&&(x=!0,C=g.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,w+1)),O=()=>{let F;return E?F=R:x?F=C:g.route.Component?F=b.createElement(g.route.Component,null):g.route.element?F=g.route.element:F=m,b.createElement(fN,{match:g,routeContext:{outlet:m,matches:j,isDataRoute:t!=null},children:F})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?b.createElement(hN,{location:t.location,revalidation:t.revalidation,component:R,error:E,children:O(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):O()},null)}var rC=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(rC||{}),iC=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(iC||{});function mN(n){let e=b.useContext(Lp);return e||kt(!1),e}function gN(n){let e=b.useContext(eC);return e||kt(!1),e}function yN(n){let e=b.useContext(es);return e||kt(!1),e}function sC(n){let e=yN(),t=e.matches[e.matches.length-1];return t.route.id||kt(!1),t.route.id}function vN(){var n;let e=b.useContext(tC),t=gN(),r=sC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function _N(){let{router:n}=mN(rC.UseNavigateStable),e=sC(iC.UseNavigateStable),t=b.useRef(!1);return nC(()=>{t.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ld({fromRouteId:e},s)))},[n,e])}const vE={};function wN(n,e,t){vE[n]||(vE[n]=!0)}function TN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function zy(n){let{to:e,replace:t,state:r,relative:i}=n;Pu()||kt(!1);let{future:s,static:a}=b.useContext(Zi),{matches:u}=b.useContext(es),{pathname:d}=wo(),h=s_(),m=i_(e,r_(u,s.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(m);return b.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function ji(n){kt(!1)}function EN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Js.Pop,navigator:s,static:a=!1,future:u}=n;Pu()&&kt(!1);let d=e.replace(/^\/*/,"/"),h=b.useMemo(()=>({basename:d,navigator:s,static:a,future:ld({v7_relativeSplatPath:!1},u)}),[d,u,s,a]);typeof r=="string"&&(r=Su(r));let{pathname:m="/",search:g="",hash:w="",state:E=null,key:x="default"}=r,R=b.useMemo(()=>{let C=tu(m,d);return C==null?null:{location:{pathname:C,search:g,hash:w,state:E,key:x},navigationType:i}},[d,m,g,w,E,x,i]);return R==null?null:b.createElement(Zi.Provider,{value:h},b.createElement(Fp.Provider,{children:t,value:R}))}function IN(n){let{children:e,location:t}=n;return lN(Wy(e),t)}new Promise(()=>{});function Wy(n,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(n,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){t.push.apply(t,Wy(r.props.children,s));return}r.type!==ji&&kt(!1),!r.props.index||!r.props.children||kt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Wy(r.props.children,s)),t.push(a)}),t}function Hf(){return Hf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hf.apply(this,arguments)}function oC(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function SN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PN(n,e){return n.button===0&&(!e||e==="_self")&&!SN(n)}const CN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],bN="6";try{window.__reactRouterVersion=bN}catch{}const xN=b.createContext({isTransitioning:!1}),RN="startTransition",_E=e_[RN];function kN(n){let{basename:e,children:t,future:r,window:i}=n,s=b.useRef();s.current==null&&(s.current=VD({window:i,v5Compat:!0}));let a=s.current,[u,d]=b.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},m=b.useCallback(g=>{h&&_E?_E(()=>d(g)):d(g)},[d,h]);return b.useLayoutEffect(()=>a.listen(m),[a,m]),b.useEffect(()=>TN(r),[r]),b.createElement(EN,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const DN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VN=b.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g}=e,w=oC(e,CN),{basename:E}=b.useContext(Zi),x,R=!1;if(typeof h=="string"&&NN.test(h)&&(x=h,DN))try{let F=new URL(window.location.href),z=h.startsWith("//")?new URL(F.protocol+h):new URL(h),ne=tu(z.pathname,E);z.origin===F.origin&&ne!=null?h=ne+z.search+z.hash:R=!0}catch{}let C=oN(h,{relative:i}),j=LN(h,{replace:a,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function O(F){r&&r(F),F.defaultPrevented||j(F)}return b.createElement("a",Hf({},w,{href:x||C,onClick:R||s?r:O,ref:t,target:d}))}),ON=b.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:u,to:d,viewTransition:h,children:m}=e,g=oC(e,AN),w=Up(d,{relative:g.relative}),E=wo(),x=b.useContext(eC),{navigator:R,basename:C}=b.useContext(Zi),j=x!=null&&FN(w)&&h===!0,O=R.encodeLocation?R.encodeLocation(w).pathname:w.pathname,F=E.pathname,z=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(F=F.toLowerCase(),z=z?z.toLowerCase():null,O=O.toLowerCase()),z&&C&&(z=tu(z,C)||z);const ne=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let Z=F===O||!a&&F.startsWith(O)&&F.charAt(ne)==="/",P=z!=null&&(z===O||!a&&z.startsWith(O)&&z.charAt(O.length)==="/"),S={isActive:Z,isPending:P,isTransitioning:j},k=Z?r:void 0,L;typeof s=="function"?L=s(S):L=[s,Z?"active":null,P?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(S):u;return b.createElement(VN,Hf({},g,{"aria-current":k,className:L,ref:t,style:M,to:d,viewTransition:h}),typeof m=="function"?m(S):m)});var Hy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Hy||(Hy={}));var wE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wE||(wE={}));function MN(n){let e=b.useContext(Lp);return e||kt(!1),e}function LN(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,d=s_(),h=wo(),m=Up(n,{relative:a});return b.useCallback(g=>{if(PN(g,t)){g.preventDefault();let w=r!==void 0?r:Wf(h)===Wf(m);d(n,{replace:w,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[h,d,m,r,i,t,n,s,a,u])}function FN(n,e){e===void 0&&(e={});let t=b.useContext(xN);t==null&&kt(!1);let{basename:r}=MN(Hy.useViewTransitionState),i=Up(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=tu(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=tu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return $y(i.pathname,a)!=null||$y(i.pathname,s)!=null}class UN extends Jt.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?G.jsxs("div",{style:{padding:16,fontFamily:"system-ui"},children:[G.jsx("h2",{children:"Se produjo un error"}),G.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:String(this.state.error?.stack||this.state.error)})]}):this.props.children}}const jN=()=>{};var TE={};const aC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},lC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let w=(u&15)<<2|h>>6,E=h&63;d||(E=64,a||(w=64)),r.push(t[m],t[g],t[w],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new $N;const w=s<<2|u>>4;if(r.push(w),h!==64){const E=u<<4&240|h>>2;if(r.push(E),g!==64){const x=h<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $N extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zN=function(n){const e=aC(n);return lC.encodeByteArray(e,!0)},qf=function(n){return zN(n).replace(/\./g,"")},uC=function(n){try{return lC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const WN=()=>cC().__FIREBASE_DEFAULTS__,HN=()=>{if(typeof process>"u"||typeof TE>"u")return;const n=TE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&uC(n[1]);return e&&JSON.parse(e)},jp=()=>{try{return jN()||WN()||HN()||qN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dC=n=>jp()?.emulatorHosts?.[n],hC=n=>{const e=dC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},fC=()=>jp()?.config,pC=n=>jp()?.[`_${n}`];class GN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function To(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o_(n){return(await fetch(n,{credentials:"include"})).ok}function KN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qf(JSON.stringify(t)),qf(JSON.stringify(a)),""].join(".")}const qc={};function QN(){const n={prod:[],emulator:[]};for(const e of Object.keys(qc))qc[e]?n.emulator.push(e):n.prod.push(e);return n}function YN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let EE=!1;function a_(n,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||qc[n]===e||qc[n]||EE)return;qc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",s=QN().prod.length>0;function a(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,E){w.setAttribute("width","24"),w.setAttribute("id",E),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{EE=!0,a()},w}function m(w,E){w.setAttribute("id",E),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function g(){const w=YN(r),E=t("text"),x=document.getElementById(E)||document.createElement("span"),R=t("learnmore"),C=document.getElementById(R)||document.createElement("a"),j=t("preprendIcon"),O=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const F=w.element;u(F),m(C,R);const z=h();d(O,j),F.append(O,x,C,z),document.body.appendChild(F)}s?(x.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function mC(){const n=jp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tV(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gC(){return!mC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yC(){return!mC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function vC(){try{return typeof indexedDB=="object"}catch{return!1}}function nV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const rV="FirebaseError";class _i extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=rV,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bd.prototype.create)}}class bd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?iV(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new _i(i,u,r)}}function iV(n,e){return n.replace(sV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sV=/\{\$([^}]+)}/g;function oV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ea(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(IE(s)&&IE(a)){if(!Ea(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function IE(n){return n!==null&&typeof n=="object"}function xd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function jc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aV(n,e){const t=new lV(n,e);return t.subscribe.bind(t)}class lV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");uV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=iy),i.error===void 0&&(i.error=iy),i.complete===void 0&&(i.complete=iy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function iy(){}function pt(n){return n&&n._delegate?n._delegate:n}class lo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ia="[DEFAULT]";let cV=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new GN;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hV(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dV(n){return n===ia?void 0:n}function hV(n){return n.instantiationMode==="EAGER"}class fV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const pV={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},mV=qe.INFO,gV={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},yV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=gV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class l_{constructor(e){this.name=e,this._logLevel=mV,this._logHandler=yV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const vV=(n,e)=>e.some(t=>n instanceof t);let SE,PE;function _V(){return SE||(SE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wV(){return PE||(PE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _C=new WeakMap,qy=new WeakMap,wC=new WeakMap,sy=new WeakMap,u_=new WeakMap;function TV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(to(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&_C.set(t,n)}).catch(()=>{}),u_.set(e,n),e}function EV(n){if(qy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});qy.set(n,e)}let Gy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return to(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IV(n){Gy=n(Gy)}function SV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(oy(this),e,...t);return wC.set(r,e.sort?e.sort():[e]),to(r)}:wV().includes(n)?function(...e){return n.apply(oy(this),e),to(_C.get(this))}:function(...e){return to(n.apply(oy(this),e))}}function PV(n){return typeof n=="function"?SV(n):(n instanceof IDBTransaction&&EV(n),vV(n,_V())?new Proxy(n,Gy):n)}function to(n){if(n instanceof IDBRequest)return TV(n);if(sy.has(n))return sy.get(n);const e=PV(n);return e!==n&&(sy.set(n,e),u_.set(e,n)),e}const oy=n=>u_.get(n);function CV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),u=to(a);return r&&a.addEventListener("upgradeneeded",d=>{r(to(a.result),d.oldVersion,d.newVersion,to(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const AV=["get","getKey","getAll","getAllKeys","count"],bV=["put","add","delete","clear"],ay=new Map;function CE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ay.get(e))return ay.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=bV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AV.includes(t)))return;const s=async function(a,...u){const d=this.transaction(a,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&d.done]))[0]};return ay.set(e,s),s}IV(n=>({...n,get:(e,t,r)=>CE(e,t)||n.get(e,t,r),has:(e,t)=>!!CE(e,t)||n.has(e,t)}));class xV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function RV(n){return n.getComponent()?.type==="VERSION"}const Ky="@firebase/app",AE="0.14.6";const Gi=new l_("@firebase/app"),kV="@firebase/app-compat",DV="@firebase/analytics-compat",NV="@firebase/analytics",VV="@firebase/app-check-compat",OV="@firebase/app-check",MV="@firebase/auth",LV="@firebase/auth-compat",FV="@firebase/database",UV="@firebase/data-connect",jV="@firebase/database-compat",BV="@firebase/functions",$V="@firebase/functions-compat",zV="@firebase/installations",WV="@firebase/installations-compat",HV="@firebase/messaging",qV="@firebase/messaging-compat",GV="@firebase/performance",KV="@firebase/performance-compat",QV="@firebase/remote-config",YV="@firebase/remote-config-compat",XV="@firebase/storage",JV="@firebase/storage-compat",ZV="@firebase/firestore",eO="@firebase/ai",tO="@firebase/firestore-compat",nO="firebase",rO="12.6.0";const Qy="[DEFAULT]",iO={[Ky]:"fire-core",[kV]:"fire-core-compat",[NV]:"fire-analytics",[DV]:"fire-analytics-compat",[OV]:"fire-app-check",[VV]:"fire-app-check-compat",[MV]:"fire-auth",[LV]:"fire-auth-compat",[FV]:"fire-rtdb",[UV]:"fire-data-connect",[jV]:"fire-rtdb-compat",[BV]:"fire-fn",[$V]:"fire-fn-compat",[zV]:"fire-iid",[WV]:"fire-iid-compat",[HV]:"fire-fcm",[qV]:"fire-fcm-compat",[GV]:"fire-perf",[KV]:"fire-perf-compat",[QV]:"fire-rc",[YV]:"fire-rc-compat",[XV]:"fire-gcs",[JV]:"fire-gcs-compat",[ZV]:"fire-fst",[tO]:"fire-fst-compat",[eO]:"fire-vertex","fire-js":"fire-js",[nO]:"fire-js-all"};const Gf=new Map,sO=new Map,Yy=new Map;function bE(n,e){try{n.container.addComponent(e)}catch(t){Gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ia(n){const e=n.name;if(Yy.has(e))return Gi.debug(`There were multiple attempts to register component ${e}.`),!1;Yy.set(e,n);for(const t of Gf.values())bE(t,n);for(const t of sO.values())bE(t,n);return!0}function Bp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}const oO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new bd("app","Firebase",oO);class aO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}const Cu=rO;function TC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Qy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw no.create("bad-app-name",{appName:String(i)});if(t||(t=fC()),!t)throw no.create("no-options");const s=Gf.get(i);if(s){if(Ea(t,s.options)&&Ea(r,s.config))return s;throw no.create("duplicate-app",{appName:i})}const a=new fV(i);for(const d of Yy.values())a.addComponent(d);const u=new aO(t,r,a);return Gf.set(i,u),u}function c_(n=Qy){const e=Gf.get(n);if(!e&&n===Qy&&fC())return TC();if(!e)throw no.create("no-app",{appName:n});return e}function ci(n,e,t){let r=iO[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gi.warn(a.join(" "));return}Ia(new lo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const lO="firebase-heartbeat-database",uO=1,ud="firebase-heartbeat-store";let ly=null;function EC(){return ly||(ly=CV(lO,uO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ud)}catch(t){console.warn(t)}}}}).catch(n=>{throw no.create("idb-open",{originalErrorMessage:n.message})})),ly}async function cO(n){try{const t=(await EC()).transaction(ud),r=await t.objectStore(ud).get(IC(n));return await t.done,r}catch(e){if(e instanceof _i)Gi.warn(e.message);else{const t=no.create("idb-get",{originalErrorMessage:e?.message});Gi.warn(t.message)}}}async function xE(n,e){try{const r=(await EC()).transaction(ud,"readwrite");await r.objectStore(ud).put(e,IC(n)),await r.done}catch(t){if(t instanceof _i)Gi.warn(t.message);else{const r=no.create("idb-set",{originalErrorMessage:t?.message});Gi.warn(r.message)}}}function IC(n){return`${n.name}!${n.options.appId}`}const dO=1024,hO=30;class fO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=RE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>hO){const i=gO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=RE(),{heartbeatsToSend:t,unsentEntries:r}=pO(this._heartbeatsCache.heartbeats),i=qf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Gi.warn(e),""}}}function RE(){return new Date().toISOString().substring(0,10)}function pO(n,e=dO){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),kE(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class mO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vC()?nV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kE(n){return qf(JSON.stringify({version:2,heartbeats:n})).length}function gO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function yO(n){Ia(new lo("platform-logger",e=>new xV(e),"PRIVATE")),Ia(new lo("heartbeat",e=>new fO(e),"PRIVATE")),ci(Ky,AE,n),ci(Ky,AE,"esm2020"),ci("fire-js","")}yO("");var vO="firebase",_O="12.7.0";ci(vO,_O,"app");var DE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ro,SC;(function(){var n;function e(P,S){function k(){}k.prototype=S.prototype,P.F=S.prototype,P.prototype=new k,P.prototype.constructor=P,P.D=function(L,M,U){for(var N=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)N[fe-2]=arguments[fe];return S.prototype[M].apply(L,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,S,k){k||(k=0);const L=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)L[M]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(M=0;M<16;++M)L[M]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=P.g[0],k=P.g[1],M=P.g[2];let U=P.g[3],N;N=S+(U^k&(M^U))+L[0]+3614090360&4294967295,S=k+(N<<7&4294967295|N>>>25),N=U+(M^S&(k^M))+L[1]+3905402710&4294967295,U=S+(N<<12&4294967295|N>>>20),N=M+(k^U&(S^k))+L[2]+606105819&4294967295,M=U+(N<<17&4294967295|N>>>15),N=k+(S^M&(U^S))+L[3]+3250441966&4294967295,k=M+(N<<22&4294967295|N>>>10),N=S+(U^k&(M^U))+L[4]+4118548399&4294967295,S=k+(N<<7&4294967295|N>>>25),N=U+(M^S&(k^M))+L[5]+1200080426&4294967295,U=S+(N<<12&4294967295|N>>>20),N=M+(k^U&(S^k))+L[6]+2821735955&4294967295,M=U+(N<<17&4294967295|N>>>15),N=k+(S^M&(U^S))+L[7]+4249261313&4294967295,k=M+(N<<22&4294967295|N>>>10),N=S+(U^k&(M^U))+L[8]+1770035416&4294967295,S=k+(N<<7&4294967295|N>>>25),N=U+(M^S&(k^M))+L[9]+2336552879&4294967295,U=S+(N<<12&4294967295|N>>>20),N=M+(k^U&(S^k))+L[10]+4294925233&4294967295,M=U+(N<<17&4294967295|N>>>15),N=k+(S^M&(U^S))+L[11]+2304563134&4294967295,k=M+(N<<22&4294967295|N>>>10),N=S+(U^k&(M^U))+L[12]+1804603682&4294967295,S=k+(N<<7&4294967295|N>>>25),N=U+(M^S&(k^M))+L[13]+4254626195&4294967295,U=S+(N<<12&4294967295|N>>>20),N=M+(k^U&(S^k))+L[14]+2792965006&4294967295,M=U+(N<<17&4294967295|N>>>15),N=k+(S^M&(U^S))+L[15]+1236535329&4294967295,k=M+(N<<22&4294967295|N>>>10),N=S+(M^U&(k^M))+L[1]+4129170786&4294967295,S=k+(N<<5&4294967295|N>>>27),N=U+(k^M&(S^k))+L[6]+3225465664&4294967295,U=S+(N<<9&4294967295|N>>>23),N=M+(S^k&(U^S))+L[11]+643717713&4294967295,M=U+(N<<14&4294967295|N>>>18),N=k+(U^S&(M^U))+L[0]+3921069994&4294967295,k=M+(N<<20&4294967295|N>>>12),N=S+(M^U&(k^M))+L[5]+3593408605&4294967295,S=k+(N<<5&4294967295|N>>>27),N=U+(k^M&(S^k))+L[10]+38016083&4294967295,U=S+(N<<9&4294967295|N>>>23),N=M+(S^k&(U^S))+L[15]+3634488961&4294967295,M=U+(N<<14&4294967295|N>>>18),N=k+(U^S&(M^U))+L[4]+3889429448&4294967295,k=M+(N<<20&4294967295|N>>>12),N=S+(M^U&(k^M))+L[9]+568446438&4294967295,S=k+(N<<5&4294967295|N>>>27),N=U+(k^M&(S^k))+L[14]+3275163606&4294967295,U=S+(N<<9&4294967295|N>>>23),N=M+(S^k&(U^S))+L[3]+4107603335&4294967295,M=U+(N<<14&4294967295|N>>>18),N=k+(U^S&(M^U))+L[8]+1163531501&4294967295,k=M+(N<<20&4294967295|N>>>12),N=S+(M^U&(k^M))+L[13]+2850285829&4294967295,S=k+(N<<5&4294967295|N>>>27),N=U+(k^M&(S^k))+L[2]+4243563512&4294967295,U=S+(N<<9&4294967295|N>>>23),N=M+(S^k&(U^S))+L[7]+1735328473&4294967295,M=U+(N<<14&4294967295|N>>>18),N=k+(U^S&(M^U))+L[12]+2368359562&4294967295,k=M+(N<<20&4294967295|N>>>12),N=S+(k^M^U)+L[5]+4294588738&4294967295,S=k+(N<<4&4294967295|N>>>28),N=U+(S^k^M)+L[8]+2272392833&4294967295,U=S+(N<<11&4294967295|N>>>21),N=M+(U^S^k)+L[11]+1839030562&4294967295,M=U+(N<<16&4294967295|N>>>16),N=k+(M^U^S)+L[14]+4259657740&4294967295,k=M+(N<<23&4294967295|N>>>9),N=S+(k^M^U)+L[1]+2763975236&4294967295,S=k+(N<<4&4294967295|N>>>28),N=U+(S^k^M)+L[4]+1272893353&4294967295,U=S+(N<<11&4294967295|N>>>21),N=M+(U^S^k)+L[7]+4139469664&4294967295,M=U+(N<<16&4294967295|N>>>16),N=k+(M^U^S)+L[10]+3200236656&4294967295,k=M+(N<<23&4294967295|N>>>9),N=S+(k^M^U)+L[13]+681279174&4294967295,S=k+(N<<4&4294967295|N>>>28),N=U+(S^k^M)+L[0]+3936430074&4294967295,U=S+(N<<11&4294967295|N>>>21),N=M+(U^S^k)+L[3]+3572445317&4294967295,M=U+(N<<16&4294967295|N>>>16),N=k+(M^U^S)+L[6]+76029189&4294967295,k=M+(N<<23&4294967295|N>>>9),N=S+(k^M^U)+L[9]+3654602809&4294967295,S=k+(N<<4&4294967295|N>>>28),N=U+(S^k^M)+L[12]+3873151461&4294967295,U=S+(N<<11&4294967295|N>>>21),N=M+(U^S^k)+L[15]+530742520&4294967295,M=U+(N<<16&4294967295|N>>>16),N=k+(M^U^S)+L[2]+3299628645&4294967295,k=M+(N<<23&4294967295|N>>>9),N=S+(M^(k|~U))+L[0]+4096336452&4294967295,S=k+(N<<6&4294967295|N>>>26),N=U+(k^(S|~M))+L[7]+1126891415&4294967295,U=S+(N<<10&4294967295|N>>>22),N=M+(S^(U|~k))+L[14]+2878612391&4294967295,M=U+(N<<15&4294967295|N>>>17),N=k+(U^(M|~S))+L[5]+4237533241&4294967295,k=M+(N<<21&4294967295|N>>>11),N=S+(M^(k|~U))+L[12]+1700485571&4294967295,S=k+(N<<6&4294967295|N>>>26),N=U+(k^(S|~M))+L[3]+2399980690&4294967295,U=S+(N<<10&4294967295|N>>>22),N=M+(S^(U|~k))+L[10]+4293915773&4294967295,M=U+(N<<15&4294967295|N>>>17),N=k+(U^(M|~S))+L[1]+2240044497&4294967295,k=M+(N<<21&4294967295|N>>>11),N=S+(M^(k|~U))+L[8]+1873313359&4294967295,S=k+(N<<6&4294967295|N>>>26),N=U+(k^(S|~M))+L[15]+4264355552&4294967295,U=S+(N<<10&4294967295|N>>>22),N=M+(S^(U|~k))+L[6]+2734768916&4294967295,M=U+(N<<15&4294967295|N>>>17),N=k+(U^(M|~S))+L[13]+1309151649&4294967295,k=M+(N<<21&4294967295|N>>>11),N=S+(M^(k|~U))+L[4]+4149444226&4294967295,S=k+(N<<6&4294967295|N>>>26),N=U+(k^(S|~M))+L[11]+3174756917&4294967295,U=S+(N<<10&4294967295|N>>>22),N=M+(S^(U|~k))+L[2]+718787259&4294967295,M=U+(N<<15&4294967295|N>>>17),N=k+(U^(M|~S))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.v=function(P,S){S===void 0&&(S=P.length);const k=S-this.blockSize,L=this.C;let M=this.h,U=0;for(;U<S;){if(M==0)for(;U<=k;)i(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<S;)if(L[M++]=P.charCodeAt(U++),M==this.blockSize){i(this,L),M=0;break}}else for(;U<S;)if(L[M++]=P[U++],M==this.blockSize){i(this,L),M=0;break}}this.h=M,this.o+=S},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;S=this.o*8;for(var k=P.length-8;k<P.length;++k)P[k]=S&255,S/=256;for(this.v(P),P=Array(16),S=0,k=0;k<4;++k)for(let L=0;L<32;L+=8)P[S++]=this.g[k]>>>L&255;return P};function s(P,S){var k=u;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=S(P)}function a(P,S){this.h=S;const k=[];let L=!0;for(let M=P.length-1;M>=0;M--){const U=P[M]|0;L&&U==S||(k[M]=U,L=!1)}this.g=k}var u={};function d(P){return-128<=P&&P<128?s(P,function(S){return new a([S|0],S<0?-1:0)}):new a([P|0],P<0?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return g;if(P<0)return C(h(-P));const S=[];let k=1;for(let L=0;P>=k;L++)S[L]=P/k|0,k*=4294967296;return new a(S,0)}function m(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return C(m(P.substring(1),S));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(S,8));let L=g;for(let U=0;U<P.length;U+=8){var M=Math.min(8,P.length-U);const N=parseInt(P.substring(U,U+M),S);M<8?(M=h(Math.pow(S,M)),L=L.j(M).add(h(N))):(L=L.j(k),L=L.add(h(N)))}return L}var g=d(0),w=d(1),E=d(16777216);n=a.prototype,n.m=function(){if(R(this))return-C(this).m();let P=0,S=1;for(let k=0;k<this.g.length;k++){const L=this.i(k);P+=(L>=0?L:4294967296+L)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(R(this))return"-"+C(this).toString(P);const S=h(Math.pow(P,6));var k=this;let L="";for(;;){const M=z(k,S).g;k=j(k,M.j(S));let U=((k.g.length>0?k.g[0]:k.h)>>>0).toString(P);if(k=M,x(k))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(let S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function R(P){return P.h==-1}n.l=function(P){return P=j(this,P),R(P)?-1:x(P)?0:1};function C(P){const S=P.g.length,k=[];for(let L=0;L<S;L++)k[L]=~P.g[L];return new a(k,~P.h).add(w)}n.abs=function(){return R(this)?C(this):this},n.add=function(P){const S=Math.max(this.g.length,P.g.length),k=[];let L=0;for(let M=0;M<=S;M++){let U=L+(this.i(M)&65535)+(P.i(M)&65535),N=(U>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);L=N>>>16,U&=65535,N&=65535,k[M]=N<<16|U}return new a(k,k[k.length-1]&-2147483648?-1:0)};function j(P,S){return P.add(C(S))}n.j=function(P){if(x(this)||x(P))return g;if(R(this))return R(P)?C(this).j(C(P)):C(C(this).j(P));if(R(P))return C(this.j(C(P)));if(this.l(E)<0&&P.l(E)<0)return h(this.m()*P.m());const S=this.g.length+P.g.length,k=[];for(var L=0;L<2*S;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(let M=0;M<P.g.length;M++){const U=this.i(L)>>>16,N=this.i(L)&65535,fe=P.i(M)>>>16,Pe=P.i(M)&65535;k[2*L+2*M]+=N*Pe,O(k,2*L+2*M),k[2*L+2*M+1]+=U*Pe,O(k,2*L+2*M+1),k[2*L+2*M+1]+=N*fe,O(k,2*L+2*M+1),k[2*L+2*M+2]+=U*fe,O(k,2*L+2*M+2)}for(P=0;P<S;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=S;P<2*S;P++)k[P]=0;return new a(k,0)};function O(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function F(P,S){this.g=P,this.h=S}function z(P,S){if(x(S))throw Error("division by zero");if(x(P))return new F(g,g);if(R(P))return S=z(C(P),S),new F(C(S.g),C(S.h));if(R(S))return S=z(P,C(S)),new F(C(S.g),S.h);if(P.g.length>30){if(R(P)||R(S))throw Error("slowDivide_ only works with positive integers.");for(var k=w,L=S;L.l(P)<=0;)k=ne(k),L=ne(L);var M=Z(k,1),U=Z(L,1);for(L=Z(L,2),k=Z(k,2);!x(L);){var N=U.add(L);N.l(P)<=0&&(M=M.add(k),U=N),L=Z(L,1),k=Z(k,1)}return S=j(P,M.j(S)),new F(M,S)}for(M=g;P.l(S)>=0;){for(k=Math.max(1,Math.floor(P.m()/S.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=h(k),N=U.j(S);R(N)||N.l(P)>0;)k-=L,U=h(k),N=U.j(S);x(U)&&(U=w),M=M.add(U),P=j(P,N)}return new F(M,P)}n.B=function(P){return z(this,P).h},n.and=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let L=0;L<S;L++)k[L]=this.i(L)&P.i(L);return new a(k,this.h&P.h)},n.or=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let L=0;L<S;L++)k[L]=this.i(L)|P.i(L);return new a(k,this.h|P.h)},n.xor=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let L=0;L<S;L++)k[L]=this.i(L)^P.i(L);return new a(k,this.h^P.h)};function ne(P){const S=P.g.length+1,k=[];for(let L=0;L<S;L++)k[L]=P.i(L)<<1|P.i(L-1)>>>31;return new a(k,P.h)}function Z(P,S){const k=S>>5;S%=32;const L=P.g.length-k,M=[];for(let U=0;U<L;U++)M[U]=S>0?P.i(U+k)>>>S|P.i(U+k+1)<<32-S:P.i(U+k);return new a(M,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,ro=a}).apply(typeof DE<"u"?DE:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var PC,Bc,CC,Sf,Xy,AC,bC,xC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var T=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var Q=f[A];if(!(Q in T))break e;T=T[Q]}f=f[f.length-1],A=T[f],_=_(A),_!=A&&_!=null&&e(T,f,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(_){var T=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&T.push([A,_[A]]);return T}});var s=s||{},a=this||self;function u(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function d(f,_,T){return f.call.apply(f.bind,arguments)}function h(f,_,T){return h=d,h.apply(null,arguments)}function m(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function g(f,_){function T(){}T.prototype=_.prototype,f.Z=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(A,Q,te){for(var me=Array(arguments.length-2),je=2;je<arguments.length;je++)me[je-2]=arguments[je];return _.prototype[Q].apply(A,me)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function E(f){const _=f.length;if(_>0){const T=Array(_);for(let A=0;A<_;A++)T[A]=f[A];return T}return[]}function x(f,_){for(let A=1;A<arguments.length;A++){const Q=arguments[A];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=f.length||0;const te=Q.length||0;f.length=T+te;for(let me=0;me<te;me++)f[T+me]=Q[me]}else f.push(Q)}}class R{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function C(f){a.setTimeout(()=>{throw f},0)}function j(){var f=P;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class O{constructor(){this.h=this.g=null}add(_,T){const A=F.get();A.set(_,T),this.h?this.h.next=A:this.g=A,this.h=A}}var F=new R(()=>new z,f=>f.reset());class z{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Z=!1,P=new O,S=()=>{const f=Promise.resolve(void 0);ne=()=>{f.then(k)}};function k(){for(var f;f=j();){try{f.h.call(f.g)}catch(T){C(T)}var _=F;_.j(f),_.h<100&&(_.h++,f.next=_.g,_.g=f)}Z=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};a.addEventListener("test",T,_),a.removeEventListener("test",T,_)}catch{}return f})();function N(f){return/^[\s\xa0]*$/.test(f)}function fe(f,_){M.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,_)}g(fe,M),fe.prototype.init=function(f,_){const T=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget,_||(T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),J=0;function ie(f,_,T,A,Q){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!A,this.ha=Q,this.key=++J,this.da=this.fa=!1}function Y(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function re(f,_,T){for(const A in f)_.call(T,f[A],A,f)}function K(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function D(f){const _={};for(const T in f)_[T]=f[T];return _}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(f,_){let T,A;for(let Q=1;Q<arguments.length;Q++){A=arguments[Q];for(T in A)f[T]=A[T];for(let te=0;te<H.length;te++)T=H[te],Object.prototype.hasOwnProperty.call(A,T)&&(f[T]=A[T])}}function ae(f){this.src=f,this.g={},this.h=0}ae.prototype.add=function(f,_,T,A,Q){const te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);const me=ve(f,_,A,Q);return me>-1?(_=f[me],T||(_.fa=!1)):(_=new ie(_,this.src,te,!!A,Q),_.fa=T,f.push(_)),_};function ue(f,_){const T=_.type;if(T in f.g){var A=f.g[T],Q=Array.prototype.indexOf.call(A,_,void 0),te;(te=Q>=0)&&Array.prototype.splice.call(A,Q,1),te&&(Y(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function ve(f,_,T,A){for(let Q=0;Q<f.length;++Q){const te=f[Q];if(!te.da&&te.listener==_&&te.capture==!!T&&te.ha==A)return Q}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),Ue={};function $e(f,_,T,A,Q){if(Array.isArray(_)){for(let te=0;te<_.length;te++)$e(f,_[te],T,A,Q);return null}return T=bo(T),f&&f[Pe]?f.J(_,T,u(A)?!!A.capture:!1,Q):ct(f,_,T,!1,A,Q)}function ct(f,_,T,A,Q,te){if(!_)throw Error("Invalid event type");const me=u(Q)?!!Q.capture:!!Q;let je=ls(f);if(je||(f[Re]=je=new ae(f)),T=je.add(_,T,A,me,te),T.proxy)return T;if(A=Gt(),T.proxy=A,A.src=f,A.listener=T,f.addEventListener)U||(Q=me),Q===void 0&&(Q=!1),f.addEventListener(_.toString(),A,Q);else if(f.attachEvent)f.attachEvent(os(_.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Gt(){function f(T){return _.call(f.src,f.listener,T)}const _=as;return f}function ss(f,_,T,A,Q){if(Array.isArray(_))for(var te=0;te<_.length;te++)ss(f,_[te],T,A,Q);else A=u(A)?!!A.capture:!!A,T=bo(T),f&&f[Pe]?(f=f.i,te=String(_).toString(),te in f.g&&(_=f.g[te],T=ve(_,T,A,Q),T>-1&&(Y(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete f.g[te],f.h--)))):f&&(f=ls(f))&&(_=f.g[_.toString()],f=-1,_&&(f=ve(_,T,A,Q)),(T=f>-1?_[f]:null)&&Er(T))}function Er(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Pe])ue(_.i,f);else{var T=f.type,A=f.proxy;_.removeEventListener?_.removeEventListener(T,A,f.capture):_.detachEvent?_.detachEvent(os(T),A):_.addListener&&_.removeListener&&_.removeListener(A),(T=ls(_))?(ue(T,f),T.h==0&&(T.src=null,_[Re]=null)):Y(f)}}}function os(f){return f in Ue?Ue[f]:Ue[f]="on"+f}function as(f,_){if(f.da)f=!0;else{_=new fe(_,this);const T=f.listener,A=f.ha||f.src;f.fa&&Er(f),f=T.call(A,_)}return f}function ls(f){return f=f[Re],f instanceof ae?f:null}var Ti="__closure_events_fn_"+(Math.random()*1e9>>>0);function bo(f){return typeof f=="function"?f:(f[Ti]||(f[Ti]=function(_){return f.handleEvent(_)}),f[Ti])}function yt(){L.call(this),this.i=new ae(this),this.M=this,this.G=null}g(yt,L),yt.prototype[Pe]=!0,yt.prototype.removeEventListener=function(f,_,T,A){ss(this,f,_,T,A)};function Pt(f,_){var T,A=f.G;if(A)for(T=[];A;A=A.G)T.push(A);if(f=f.M,A=_.type||_,typeof _=="string")_=new M(_,f);else if(_ instanceof M)_.target=_.target||f;else{var Q=_;_=new M(A,f),oe(_,Q)}Q=!0;let te,me;if(T)for(me=T.length-1;me>=0;me--)te=_.g=T[me],Q=Mn(te,A,!0,_)&&Q;if(te=_.g=f,Q=Mn(te,A,!0,_)&&Q,Q=Mn(te,A,!1,_)&&Q,T)for(me=0;me<T.length;me++)te=_.g=T[me],Q=Mn(te,A,!1,_)&&Q}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var f=this.i;for(const _ in f.g){const T=f.g[_];for(let A=0;A<T.length;A++)Y(T[A]);delete f.g[_],f.h--}}this.G=null},yt.prototype.J=function(f,_,T,A){return this.i.add(String(f),_,!1,T,A)},yt.prototype.K=function(f,_,T,A){return this.i.add(String(f),_,!0,T,A)};function Mn(f,_,T,A){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();let Q=!0;for(let te=0;te<_.length;++te){const me=_[te];if(me&&!me.da&&me.capture==T){const je=me.listener,Ut=me.ha||me.src;me.fa&&ue(f.i,me),Q=je.call(Ut,A)!==!1&&Q}}return Q&&!A.defaultPrevented}function us(f,_){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:a.setTimeout(f,_||0)}function cs(f){f.g=us(()=>{f.g=null,f.i&&(f.i=!1,cs(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class $a extends L{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:cs(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(f){L.call(this),this.h=f,this.g={}}g(Fr,L);var xo=[];function ds(f){re(f.g,function(_,T){this.g.hasOwnProperty(T)&&Er(_)},f),f.g={}}Fr.prototype.N=function(){Fr.Z.N.call(this),ds(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=a.JSON.stringify,hs=a.JSON.parse,tt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ur(){}function za(){}var fs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wa(){M.call(this,"d")}g(Wa,M);function Ou(){M.call(this,"c")}g(Ou,M);var Ir={},Ha=null;function ps(){return Ha=Ha||new yt}Ir.Ia="serverreachability";function qa(f){M.call(this,Ir.Ia,f)}g(qa,M);function Ei(f){const _=ps();Pt(_,new qa(_))}Ir.STAT_EVENT="statevent";function Ii(f,_){M.call(this,Ir.STAT_EVENT,f),this.stat=_}g(Ii,M);function Dt(f){const _=ps();Pt(_,new Ii(_,f))}Ir.Ja="timingevent";function Mu(f,_){M.call(this,Ir.Ja,f),this.size=_}g(Mu,M);function ms(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function gs(){this.g=!0}gs.prototype.ua=function(){this.g=!1};function Gd(f,_,T,A,Q,te){f.info(function(){if(f.g)if(te){var me="",je=te.split("&");for(let ot=0;ot<je.length;ot++){var Ut=je[ot].split("=");if(Ut.length>1){const Kt=Ut[0];Ut=Ut[1];const tr=Kt.split("_");me=tr.length>=2&&tr[1]=="type"?me+(Kt+"="+Ut+"&"):me+(Kt+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+A+") [attempt "+Q+"]: "+_+`
`+T+`
`+me})}function Kd(f,_,T,A,Q,te,me){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Q+"]: "+_+`
`+T+`
`+te+" "+me})}function jr(f,_,T,A){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ro(f,T)+(A?" "+A:"")})}function Qd(f,_){f.info(function(){return"TIMEOUT: "+_})}gs.prototype.info=function(){};function Ro(f,_){if(!f.g)return _;if(!_)return null;try{const te=JSON.parse(_);if(te){for(f=0;f<te.length;f++)if(Array.isArray(te[f])){var T=te[f];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var Q=A[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let me=1;me<A.length;me++)A[me]=""}}}}return Ln(te)}catch{return _}}var ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yd;function Si(){}g(Si,Ur),Si.prototype.g=function(){return new XMLHttpRequest},Yd=new Si;function Br(f){return encodeURIComponent(String(f))}function Ga(f){var _=1;f=f.split(":");const T=[];for(;_>0&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function dr(f,_,T,A){this.j=f,this.i=_,this.l=T,this.S=A||1,this.V=new Fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xd}function Xd(){this.i=null,this.g="",this.h=!1}var Jd={},Lu={};function Sr(f,_,T){f.M=1,f.A=Ci(hr(_)),f.u=T,f.R=!0,Fu(f,null)}function Fu(f,_){f.F=Date.now(),ko(f),f.B=hr(f.A);var T=f.B,A=f.S;Array.isArray(A)||(A=[String(A)]),Ku(T.i,"t",A),f.C=0,T=f.j.L,f.h=new Xd,f.g=lh(f.j,T?_:null,!f.u),f.P>0&&(f.O=new $a(h(f.Y,f,f.g),f.P)),_=f.V,T=f.g,A=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(xo[0]=Q.toString()),Q=xo);for(let te=0;te<Q.length;te++){const me=$e(T,Q[te],A||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=f.J?D(f.J):{},f.u?(f.v||(f.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,_)):(f.v="GET",f.g.ea(f.B,f.v,null,_)),Ei(),Gd(f.i,f.v,f.B,f.l,f.S,f.u)}dr.prototype.ba=function(f){f=f.target;const _=this.O;_&&Kr(f)==3?_.j():this.Y(f)},dr.prototype.Y=function(f){try{if(f==this.g)e:{const je=Kr(this.g),Ut=this.g.ya(),ot=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||oh(this.g)))){this.K||je!=4||Ut==7||(Ut==8||ot<=0?Ei(3):Ei(2)),Ka(this);var _=this.g.ca();this.X=_;var T=Zd(this);if(this.o=_==200,Kd(this.i,this.v,this.B,this.l,this.S,je,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,Q=this.g;if((A=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var te=A;break t}}te=null}if(f=te)jr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vt(this,f);else{this.o=!1,this.m=3,Dt(12),Pi(this),Do(this);break e}}if(this.R){f=!0;let Kt;for(;!this.K&&this.C<T.length;)if(Kt=th(this,T),Kt==Lu){je==4&&(this.m=4,Dt(14),f=!1),jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Jd){this.m=4,Dt(15),jr(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else jr(this.i,this.l,Kt,null),vt(this,Kt);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||T.length!=0||this.h.h||(this.m=1,Dt(16),f=!1),this.o=this.o&&f,!f)jr(this.i,this.l,T,"[Invalid Chunked Response]"),Pi(this),Do(this);else if(T.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Bo(me),me.P=!0,Dt(11))}}else jr(this.i,this.l,T,null),vt(this,T);je==4&&Pi(this),this.o&&!this.K&&(je==4?il(this.j,this):(this.o=!1,ko(this)))}else Yu(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Pi(this),Do(this)}}}catch{}};function Zd(f){if(!eh(f))return f.g.la();const _=oh(f.g);if(_==="")return"";let T="";const A=_.length,Q=Kr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Pi(f),Do(f),"";f.h.i=new a.TextDecoder}for(let te=0;te<A;te++)f.h.h=!0,T+=f.h.i.decode(_[te],{stream:!(Q&&te==A-1)});return _.length=0,f.h.g+=T,f.C=0,f.h.g}function eh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function th(f,_){var T=f.C,A=_.indexOf(`
`,T);return A==-1?Lu:(T=Number(_.substring(T,A)),isNaN(T)?Jd:(A+=1,A+T>_.length?Lu:(_=_.slice(A,A+T),f.C=A+T,_)))}dr.prototype.cancel=function(){this.K=!0,Pi(this)};function ko(f){f.T=Date.now()+f.H,Uu(f,f.H)}function Uu(f,_){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ms(h(f.aa,f),_)}function Ka(f){f.D&&(a.clearTimeout(f.D),f.D=null)}dr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Qd(this.i,this.B),this.M!=2&&(Ei(),Dt(17)),Pi(this),this.m=2,Do(this)):Uu(this,this.T-f)};function Do(f){f.j.I==0||f.K||il(f.j,f)}function Pi(f){Ka(f);var _=f.O;_&&typeof _.dispose=="function"&&_.dispose(),f.O=null,ds(f.V),f.g&&(_=f.g,f.g=null,_.abort(),_.dispose())}function vt(f,_){try{var T=f.j;if(T.I!=0&&(T.g==f||Bu(T.h,f))){if(!f.L&&Bu(T.h,f)&&T.I==3){try{var A=T.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Q=A;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)rl(T),Zn(T);else break e;Xr(T),Dt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ms(h(T.Va,T),6e3));No(T.h)<=1&&T.ta&&(T.ta=void 0)}else er(T,11)}else if((f.L||T.g==f)&&rl(T),!N(_))for(Q=T.Ba.g.parse(_),_=0;_<Q.length;_++){let ot=Q[_];const Kt=ot[0];if(!(Kt<=T.K))if(T.K=Kt,ot=ot[1],T.I==2)if(ot[0]=="c"){T.M=ot[1],T.ba=ot[2];const tr=ot[3];tr!=null&&(T.ka=tr,T.j.info("VER="+T.ka));const ki=ot[4];ki!=null&&(T.za=ki,T.j.info("SVER="+T.za));const Jr=ot[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(A=1.5*Jr,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Zr=f.g;if(Zr){const al=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var te=A.h;te.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ya(te,te.h),te.h=null))}if(A.G){const Zu=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zu&&(A.wa=Zu,rt(A.J,A.G,Zu))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var me=f;if(A.na=Ju(A,A.L?A.ba:null,A.W),me.L){Vo(A.h,me);var je=me,Ut=A.O;Ut&&(je.H=Ut),je.D&&(Ka(je),ko(je)),A.g=me}else vn(A);T.i.length>0&&Ri(T)}else ot[0]!="stop"&&ot[0]!="close"||er(T,7);else T.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?er(T,7):tl(T):ot[0]!="noop"&&T.l&&T.l.qa(ot),T.A=0)}}Ei(4)}catch{}}var xm=class{constructor(f,_){this.g=f,this.map=_}};function Qa(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ju(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function No(f){return f.h?1:f.g?f.g.size:0}function Bu(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ya(f,_){f.g?f.g.add(_):f.h=_}function Vo(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Qa.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Yn(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.G);return _}return E(f.i)}var nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xn(f,_){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const A=f[T].indexOf("=");let Q,te=null;A>=0?(Q=f[T].substring(0,A),te=f[T].substring(A+1)):Q=f[T],_(Q,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function $r(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;f instanceof $r?(this.l=f.l,Oo(this,f.j),this.o=f.o,this.g=f.g,zr(this,f.u),this.h=f.h,_s(this,Qu(f.i)),this.m=f.m):f&&(_=String(f).match(nh))?(this.l=!1,Oo(this,_[1]||"",!0),this.o=Mo(_[2]||""),this.g=Mo(_[3]||"",!0),zr(this,_[4]),this.h=Mo(_[5]||"",!0),_s(this,_[6]||"",!0),this.m=Mo(_[7]||"")):(this.l=!1,this.i=new Ge(null,this.l))}$r.prototype.toString=function(){const f=[];var _=this.j;_&&f.push(Lo(_,zu,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Lo(_,zu,!0),"@"),f.push(Br(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Lo(T,T.charAt(0)=="/"?Fo:Wu,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Lo(T,Hu)),f.join("")},$r.prototype.resolve=function(f){const _=hr(this);let T=!!f.j;T?Oo(_,f.j):T=!!f.o,T?_.o=f.o:T=!!f.g,T?_.g=f.g:T=f.u!=null;var A=f.h;if(T)zr(_,f.u);else if(T=!!f.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Q=_.h.lastIndexOf("/");Q!=-1&&(A=_.h.slice(0,Q+1)+A)}if(Q=A,Q==".."||Q==".")A="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){A=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const te=[];for(let me=0;me<Q.length;){const je=Q[me++];je=="."?A&&me==Q.length&&te.push(""):je==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),A&&me==Q.length&&te.push("")):(te.push(je),A=!0)}A=te.join("/")}else A=Q}return T?_.h=A:T=f.i.toString()!=="",T?_s(_,Qu(f.i)):T=!!f.m,T&&(_.m=f.m),_};function hr(f){return new $r(f)}function Oo(f,_,T){f.j=T?Mo(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function zr(f,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);f.u=_}else f.u=null}function _s(f,_,T){_ instanceof Ge?(f.i=_,Ja(f.i,f.l)):(T||(_=Lo(_,Rm)),f.i=new Ge(_,f.l))}function rt(f,_,T){f.i.set(_,T)}function Ci(f){return rt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Mo(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Lo(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,$u),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function $u(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zu=/[#\/\?@]/g,Wu=/[#\?:]/g,Fo=/[#\?]/g,Rm=/[#\?@]/g,Hu=/#/g;function Ge(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Wr(f){f.g||(f.g=new Map,f.h=0,f.i&&Xn(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Ge.prototype,n.add=function(f,_){Wr(this),this.i=null,f=Hr(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function qu(f,_){Wr(f),_=Hr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Xa(f,_){return Wr(f),_=Hr(f,_),f.g.has(_)}n.forEach=function(f,_){Wr(this),this.g.forEach(function(T,A){T.forEach(function(Q){f.call(_,Q,A,this)},this)},this)};function Gu(f,_){Wr(f);let T=[];if(typeof _=="string")Xa(f,_)&&(T=T.concat(f.g.get(Hr(f,_))));else for(f=Array.from(f.g.values()),_=0;_<f.length;_++)T=T.concat(f[_]);return T}n.set=function(f,_){return Wr(this),this.i=null,f=Hr(this,f),Xa(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=Gu(this,f),f.length>0?String(f[0]):_):_};function Ku(f,_,T){qu(f,_),T.length>0&&(f.i=null,f.g.set(Hr(f,_),E(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var T=_[A];const Q=Br(T);T=Gu(this,T);for(let te=0;te<T.length;te++){let me=Q;T[te]!==""&&(me+="="+Br(T[te])),f.push(me)}}return this.i=f.join("&")};function Qu(f){const _=new Ge;return _.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),_}function Hr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Ja(f,_){_&&!f.j&&(Wr(f),f.i=null,f.g.forEach(function(T,A){const Q=A.toLowerCase();A!=Q&&(qu(this,A),Ku(this,Q,T))},f)),f.j=_}function qr(f,_){const T=new gs;if(a.Image){const A=new Image;A.onload=m(dn,T,"TestLoadImage: loaded",!0,_,A),A.onerror=m(dn,T,"TestLoadImage: error",!1,_,A),A.onabort=m(dn,T,"TestLoadImage: abort",!1,_,A),A.ontimeout=m(dn,T,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else _(!1)}function Gr(f,_){const T=new gs,A=new AbortController,Q=setTimeout(()=>{A.abort(),dn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:A.signal}).then(te=>{clearTimeout(Q),te.ok?dn(T,"TestPingServer: ok",!0,_):dn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),dn(T,"TestPingServer: error",!1,_)})}function dn(f,_,T,A,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),A(T)}catch{}}function Uo(){this.g=new tt}function Ai(f){this.i=f.Sb||null,this.h=f.ab||!1}g(Ai,Ur),Ai.prototype.g=function(){return new Jn(this.i,this.h)};function Jn(f,_){yt.call(this),this.H=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Jn,yt),n=Jn.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=_,this.readyState=1,Pr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(_.body=f),(this.H||a).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Pr(this)),this.g&&(this.readyState=3,Pr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;rh(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function rh(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?ws(this):Pr(this),this.readyState==3&&rh(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ws(this))},n.Na=function(f){this.g&&(this.response=f,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Pr(f)}n.setRequestHeader=function(f,_){this.A.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function Pr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ih(f){let _="";return re(f,function(T,A){_+=A,_+=":",_+=T,_+=`\r
`}),_}function Za(f,_,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=ih(T),typeof f=="string"?T!=null&&Br(T):rt(f,_,T))}function ht(f){yt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ht,yt);var sh=/^https?$/i,km=["POST","PUT"];n=ht.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,_,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yd.g(),this.g.onreadystatechange=w(h(this.Ca,this));try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(te){Ts(this,te);return}if(f=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Q in A)T.set(Q,A[Q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const te of A.keys())T.set(te,A.get(te));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),Q=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(km,_,void 0)>=0)||A||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of T)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(te){Ts(this,te)}};function Ts(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.o=5,Es(f),xi(f)}function Es(f){f.A||(f.A=!0,Pt(f,"complete"),Pt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Pt(this,"complete"),Pt(this,"abort"),xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xi(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?bi(this):this.Xa())},n.Xa=function(){bi(this)};function bi(f){if(f.h&&typeof s<"u"){if(f.v&&Kr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Pt(f,"readystatechange"),Kr(f)==4){f.h=!1;try{const te=f.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var A;if(A=te===0){let me=String(f.D).match(nh)[1]||null;!me&&a.self&&a.self.location&&(me=a.self.location.protocol.slice(0,-1)),A=!sh.test(me?me.toLowerCase():"")}T=A}if(T)Pt(f,"complete"),Pt(f,"success");else{f.o=6;try{var Q=Kr(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",Es(f)}}finally{xi(f)}}}}function xi(f,_){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,_||Pt(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Kr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),hs(_)}};function oh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Yu(f){const _={};f=(f.g&&Kr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(N(f[A]))continue;var T=Ga(f[A]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=_[Q]||[];_[Q]=te,te.push(T)}K(_,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function el(f){this.za=0,this.i=[],this.j=new gs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qr("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qr("baseRetryDelayMs",5e3,f),this.Za=Qr("retryDelaySeedMs",1e4,f),this.Ta=Qr("forwardChannelMaxRetries",2,f),this.va=Qr("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Qa(f&&f.concurrentRequestLimit),this.Ba=new Uo,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=el.prototype,n.ka=8,n.I=1,n.connect=function(f,_,T,A){Dt(0),this.W=f,this.H=_||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=Ju(this,null,this.W),Ri(this)};function tl(f){if(nl(f),f.I==3){var _=f.V++,T=hr(f.J);if(rt(T,"SID",f.M),rt(T,"RID",_),rt(T,"TYPE","terminate"),Yr(f,T),_=new dr(f,f.j,_),_.M=2,_.A=Ci(hr(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&a.Image&&(new Image().src=_.A,T=!0),T||(_.g=lh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),ko(_)}$o(f)}function Zn(f){f.g&&(Bo(f),f.g.cancel(),f.g=null)}function nl(f){Zn(f),f.v&&(a.clearTimeout(f.v),f.v=null),rl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Ri(f){if(!ju(f.h)&&!f.m){f.m=!0;var _=f.Ea;ne||S(),Z||(ne(),Z=!0),P.add(_,f),f.D=0}}function ah(f,_){return No(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=_.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ms(h(f.Ea,f,_),sl(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new dr(this,this.j,f);let te=this.o;if(this.U&&(te?(te=D(te),oe(te,this.U)):te=this.U),this.u!==null||this.R||(Q.J=te,te=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Xu(this,Q,_),T=hr(this.J),rt(T,"RID",f),rt(T,"CVER",22),this.G&&rt(T,"X-HTTP-Session-Id",this.G),Yr(this,T),te&&(this.R?_="headers="+Br(ih(te))+"&"+_:this.u&&Za(T,this.u,te)),Ya(this.h,Q),this.Ra&&rt(T,"TYPE","init"),this.S?(rt(T,"$req",_),rt(T,"SID","null"),Q.U=!0,Sr(Q,T,null)):Sr(Q,T,_),this.I=2}}else this.I==3&&(f?jo(this,f):this.i.length==0||ju(this.h)||jo(this))};function jo(f,_){var T;_?T=_.l:T=f.V++;const A=hr(f.J);rt(A,"SID",f.M),rt(A,"RID",T),rt(A,"AID",f.K),Yr(f,A),f.u&&f.o&&Za(A,f.u,f.o),T=new dr(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),_&&(f.i=_.G.concat(f.i)),_=Xu(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Ya(f.h,T),Sr(T,A,_)}function Yr(f,_){f.H&&re(f.H,function(T,A){rt(_,A,T)}),f.l&&re({},function(T,A){rt(_,A,T)})}function Xu(f,_,T){T=Math.min(f.i.length,T);const A=f.l?h(f.l.Ka,f.l,f):null;e:{var Q=f.i;let je=-1;for(;;){const Ut=["count="+T];je==-1?T>0?(je=Q[0].g,Ut.push("ofs="+je)):je=0:Ut.push("ofs="+je);let ot=!0;for(let Kt=0;Kt<T;Kt++){var te=Q[Kt].g;const tr=Q[Kt].map;if(te-=je,te<0)je=Math.max(0,Q[Kt].g-100),ot=!1;else try{te="req"+te+"_"||"";try{var me=tr instanceof Map?tr:Object.entries(tr);for(const[ki,Jr]of me){let Zr=Jr;u(Jr)&&(Zr=Ln(Jr)),Ut.push(te+ki+"="+encodeURIComponent(Zr))}}catch(ki){throw Ut.push(te+"type="+encodeURIComponent("_badmap")),ki}}catch{A&&A(tr)}}if(ot){me=Ut.join("&");break e}}me=void 0}return f=f.i.splice(0,T),_.G=f,me}function vn(f){if(!f.g&&!f.v){f.Y=1;var _=f.Da;ne||S(),Z||(ne(),Z=!0),P.add(_,f),f.A=0}}function Xr(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ms(h(f.Da,f),sl(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Is(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ms(h(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Zn(this),Is(this))};function Bo(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function Is(f){f.g=new dr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var _=hr(f.na);rt(_,"RID","rpc"),rt(_,"SID",f.M),rt(_,"AID",f.K),rt(_,"CI",f.F?"0":"1"),!f.F&&f.ia&&rt(_,"TO",f.ia),rt(_,"TYPE","xmlhttp"),Yr(f,_),f.u&&f.o&&Za(_,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Ci(hr(_)),T.u=null,T.R=!0,Fu(T,f)}n.Va=function(){this.C!=null&&(this.C=null,Zn(this),Xr(this),Dt(19))};function rl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function il(f,_){var T=null;if(f.g==_){rl(f),Bo(f),f.g=null;var A=2}else if(Bu(f.h,_))T=_.G,Vo(f.h,_),A=1;else return;if(f.I!=0){if(_.o)if(A==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var Q=f.D;A=ps(),Pt(A,new Mu(A,T)),Ri(f)}else vn(f);else if(Q=_.m,Q==3||Q==0&&_.X>0||!(A==1&&ah(f,_)||A==2&&Xr(f)))switch(T&&T.length>0&&(_=f.h,_.i=_.i.concat(T)),Q){case 1:er(f,5);break;case 4:er(f,10);break;case 3:er(f,6);break;default:er(f,2)}}}function sl(f,_){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*_}function er(f,_){if(f.j.info("Error code "+_),_==2){var T=h(f.bb,f),A=f.Ua;const Q=!A;A=new $r(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oo(A,"https"),Ci(A),Q?qr(A.toString(),T):Gr(A.toString(),T)}else Dt(2);f.I=0,f.l&&f.l.pa(_),$o(f),nl(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function $o(f){if(f.I=0,f.ja=[],f.l){const _=Yn(f.h);(_.length!=0||f.i.length!=0)&&(x(f.ja,_),x(f.ja,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.oa()}}function Ju(f,_,T){var A=T instanceof $r?hr(T):new $r(T);if(A.g!="")_&&(A.g=_+"."+A.g),zr(A,A.u);else{var Q=a.location;A=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;const te=new $r(null);A&&Oo(te,A),_&&(te.g=_),Q&&zr(te,Q),T&&(te.h=T),A=te}return T=f.G,_=f.wa,T&&_&&rt(A,T,_),rt(A,"VER",f.ka),Yr(f,A),A}function lh(f,_,T){if(_&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Aa&&!f.ma?new ht(new Ai({ab:T})):new ht(f.ma),_.Fa(f.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uh(){}n=uh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ol(){}ol.prototype.g=function(f,_){return new hn(f,_)};function hn(f,_){yt.call(this),this.g=new el(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(f?f["X-WebChannel-Client-Profile"]=_.sa:f={"X-WebChannel-Client-Profile":_.sa}),this.g.U=f,(f=_&&_.Qb)&&!N(f)&&(this.g.u=f),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!N(_)&&(this.g.G=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ss(this)}g(hn,yt),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){tl(this.g)},hn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=Ln(f),f=T);_.i.push(new xm(_.Ya++,f)),_.I==3&&Ri(_)},hn.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,hn.Z.N.call(this)};function ch(f){Wa.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const T in _){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}g(ch,Wa);function dh(){Ou.call(this),this.status=1}g(dh,Ou);function Ss(f){this.g=f}g(Ss,uh),Ss.prototype.ra=function(){Pt(this.g,"a")},Ss.prototype.qa=function(f){Pt(this.g,new ch(f))},Ss.prototype.pa=function(f){Pt(this.g,new dh)},Ss.prototype.oa=function(){Pt(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,xC=function(){return new ol},bC=function(){return ps()},AC=Ir,Xy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,Sf=ys,vs.COMPLETE="complete",CC=vs,za.EventType=fs,fs.OPEN="a",fs.CLOSE="b",fs.ERROR="c",fs.MESSAGE="d",yt.prototype.listen=yt.prototype.J,Bc=za,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,PC=ht}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore",VE="4.9.3";let cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");let Au="12.7.0";const Sa=new l_("@firebase/firestore");function Ll(){return Sa.logLevel}function ce(n,...e){if(Sa.logLevel<=qe.DEBUG){const t=e.map(d_);Sa.debug(`Firestore (${Au}): ${n}`,...t)}}function Bt(n,...e){if(Sa.logLevel<=qe.ERROR){const t=e.map(d_);Sa.error(`Firestore (${Au}): ${n}`,...t)}}function uo(n,...e){if(Sa.logLevel<=qe.WARN){const t=e.map(d_);Sa.warn(`Firestore (${Au}): ${n}`,...t)}}function d_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,RC(n,r,t)}function RC(n,e,t){let r=`FIRESTORE (${Au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Bt(r),new Error(r)}function xe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||RC(e,i,r)}function Ce(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends _i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class TO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EO{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Or,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const d=s;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Or)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new kC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class IO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new IO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0,3512);const r=s=>{s.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new OE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function CO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class h_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=CO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Fe(n,e){return n<e?-1:n>e?1:0}function Jy(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return uy(i)===uy(s)?Fe(i,s):uy(i)?1:-1}return Fe(n.length,e.length)}const AO=55296,bO=57343;function uy(n){const e=n.charCodeAt(0);return e>=AO&&e<=bO}function nu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function DC(n){return n+"\0"}const ME="__name__";class ii{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ii.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ii.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Fe(e.length,t.length)}static compareSegments(e,t){const r=ii.isNumericId(e),i=ii.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ii.extractNumericId(e).compare(ii.extractNumericId(t)):Jy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ro.fromString(e.substring(4,e.length-2))}}class st extends ii{construct(e,t,r){return new st(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const xO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends ii{construct(e,t,r){return new bt(e,t,r)}static isValidIdentifier(e){return xO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ME}static keyField(){return new bt([ME])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ge(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ge(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new ge(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(st.fromString(e))}static fromName(e){return new ye(st.fromString(e).popFirst(5))}static empty(){return new ye(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new st(e.slice()))}}function NC(n,e,t){if(!t)throw new ge(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RO(n,e,t,r){if(e===!0&&r===!0)throw new ge(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LE(n){if(!ye.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FE(n){if(ye.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function f_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Kn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=f_(n);throw new ge(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Rd(n,e){if(!VC(n))throw new ge(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ge(se.INVALID_ARGUMENT,t);return!0}const UE=-62135596800,jE=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jE);return new lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UE)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jE}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rd(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Zt("string",lt._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new lt(0,0))}static max(){return new ke(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;class Kf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Zy(n){return n.fields.find((e=>e.kind===2))}function sa(n){return n.fields.filter((e=>e.kind!==2))}Kf.UNKNOWN_ID=-1;class Pf{constructor(e,t){this.fieldPath=e,this.kind=t}}class cd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cd(0,ur.min())}}function OC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new ur(i,ye.empty(),e)}function MC(n){return new ur(n.readTime,n.key,ru)}class ur{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ur(ke.min(),ye.empty(),ru)}static max(){return new ur(ke.max(),ye.empty(),ru)}}function p_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}const LC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Eo(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==LC)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):W.reject(t)}static resolve(e){return new W(((t,r)=>{t(e)}))}static reject(e){return new W(((t,r)=>{r(e)}))}static waitFor(e){return new W(((t,r)=>{let i=0,s=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++s,a&&s===i&&t()}),(d=>r(d)))})),a=!0,s===i&&t()}))}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next((i=>i?W.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new W(((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next((m=>{a[h]=m,++u,u===s&&r(a)}),(m=>i(m)))}}))}static doWhile(e,t){return new W(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const sr="SimpleDb";class $p{static open(e,t,r,i){try{return new $p(t,e.transaction(i,r))}catch(s){throw new Gc(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Or,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=m_(r.target.error);this.S.reject(new Gc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(sr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new DO(t)}}class io{static delete(e){return ce(sr,"Removing database:",e),da(cC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!vC())return!1;if(io.F())return!0;const e=nn(),t=io.M(e),r=0<t&&t<10,i=UC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,io.M(nn())===12.2&&Bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(sr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new Gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new ge(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ge(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Gc(e,a))},i.onupgradeneeded=s=>{ce(sr,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{ce(sr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const u=$p.open(this.db,e,s?"readonly":"readwrite",r),d=i(u).next((h=>(u.C(),h))).catch((h=>(u.abort(h),W.reject(h)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,h=d.name!=="FirebaseError"&&a<3;if(ce(sr,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function UC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class kO{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return da(this.U.delete())}}class Gc extends ge{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Io(n){return n.name==="IndexedDbTransactionError"}class DO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(sr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(sr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),da(r)}add(e){return ce(sr,"ADD",this.store.name,e,e),da(this.store.add(e))}get(e){return da(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(sr,"GET",this.store.name,e,t),t)))}delete(e){return ce(sr,"DELETE",this.store.name,e),da(this.store.delete(e))}count(){return ce(sr,"COUNT",this.store.name),da(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new W(((a,u)=>{s.onerror=d=>{u(d.target.error)},s.onsuccess=d=>{a(d.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((u,d)=>{a.push(d)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){ce(sr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new W(((r,i)=>{t.onerror=s=>{const a=m_(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((u=>{u?a.continue():r()})):r()}}))}H(e,t){const r=[];return new W(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void i();const d=new kO(u),h=t(u.primaryKey,u.value,d);if(h instanceof W){const m=h.catch((g=>(d.done(),W.reject(g))));r.push(m)}d.isDone?i():d.G===null?u.continue():u.continue(d.G)}})).next((()=>W.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function da(n){return new W(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=m_(r.target.error);t(i)}}))}let BE=!1;function m_(n){const e=io.M(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BE||(BE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Kc="IndexBackfiller";class NO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(Kc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(Kc,`Documents written: ${t}`)}catch(t){Io(t)?ce(Kc,"Ignoring IndexedDB error during index backfill: ",t):await Eo(t)}await this.re(6e4)}))}}class VO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return W.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return ce(Kc,`Processing collection: ${a}`),this.oe(e,a,i).next((u=>{i-=u,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((u=>(ce(Kc,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=MC(s);p_(a,r)>0&&(r=a)})),new ur(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hn.ce=-1;const va=-1;function zp(n){return n==null}function dd(n){return n===0&&1/n==-1/0}function jC(n){return typeof n=="number"&&Number.isInteger(n)&&!dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Qf="";function bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$E(e)),e=OO(n.get(t),e);return $E(e)}function OO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Qf:t+="";break;default:t+=s}}return t}function $E(n){return n+Qf+""}function li(n){const e=n.length;if(xe(e>=2,64408,{path:n}),e===2)return xe(n.charAt(0)===Qf&&n.charAt(1)==="",56145,{path:n}),st.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Qf,s);switch((a<0||a>t)&&Ie(50515,{path:n}),n.charAt(a+1)){case"":const u=n.substring(s,a);let d;i.length===0?d=u:(i+=u,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Ie(61167,{path:n})}s=a+2}return new st(r)}const oa="remoteDocuments",kd="owner",bl="owner",hd="mutationQueues",MO="userId",Nr="mutations",zE="batchId",ma="userMutationsIndex",WE=["userId","batchId"];function Cf(n,e){return[n,bn(e)]}function BC(n,e,t){return[n,bn(e),t]}const LO={},iu="documentMutations",Yf="remoteDocumentsV14",FO=["prefixPath","collectionGroup","readTime","documentId"],Af="documentKeyIndex",UO=["prefixPath","collectionGroup","documentId"],$C="collectionGroupIndex",jO=["collectionGroup","readTime","prefixPath","documentId"],fd="remoteDocumentGlobal",ev="remoteDocumentGlobalKey",su="targets",zC="queryTargetsIndex",BO=["canonicalId","targetId"],ou="targetDocuments",$O=["targetId","path"],g_="documentTargetsIndex",zO=["path","targetId"],Xf="targetGlobalKey",_a="targetGlobal",pd="collectionParents",WO=["collectionId","parent"],au="clientMetadata",HO="clientId",Wp="bundles",qO="bundleId",Hp="namedQueries",GO="name",y_="indexConfiguration",KO="indexId",tv="collectionGroupIndex",QO="collectionGroup",Qc="indexState",YO=["indexId","uid"],WC="sequenceNumberIndex",XO=["uid","sequenceNumber"],Yc="indexEntries",JO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HC="documentKeyIndex",ZO=["indexId","uid","orderedDocumentKey"],qp="documentOverlays",eM=["userId","collectionPath","documentId"],nv="collectionPathOverlayIndex",tM=["userId","collectionPath","largestBatchId"],qC="collectionGroupOverlayIndex",nM=["userId","collectionGroup","largestBatchId"],v_="globals",rM="name",GC=[hd,Nr,iu,oa,su,kd,_a,ou,au,fd,pd,Wp,Hp],iM=[...GC,qp],KC=[hd,Nr,iu,Yf,su,kd,_a,ou,au,fd,pd,Wp,Hp,qp],QC=KC,__=[...QC,y_,Qc,Yc],sM=__,YC=[...__,v_],oM=YC;class rv extends FC{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function rn(n,e){const t=Ce(n);return io.O(t.le,e)}function HE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??mn.RED,this.left=i??mn.EMPTY,this.right=s??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new mn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ut{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qE(this.data.getIterator())}getIteratorFrom(e){return new qE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ut(this.comparator);return t.data=e,t}}class qE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xl(n){return n.hasNext()?n.getNext():void 0}class qn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new qn([])}unionWith(e){let t=new ut(bt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class JC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JC("Invalid base64 string: "+s):s}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const aM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(n){if(xe(!!n,39018),typeof n=="string"){let e=0;const t=aM.exec(n);if(xe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qi(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}const ZC="server_timestamp",eA="__type__",tA="__previous_value__",nA="__local_write_time__";function w_(n){return(n?.mapValue?.fields||{})[eA]?.stringValue===ZC}function Gp(n){const e=n.mapValue.fields[tA];return w_(e)?Gp(e):e}function md(n){const e=Ki(n.mapValue.fields[nA].timestampValue);return new lt(e.seconds,e.nanos)}class lM{constructor(e,t,r,i,s,a,u,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=m}}const Jf="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||Jf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}const T_="__type__",rA="__max__",Zs={mapValue:{fields:{__type__:{stringValue:rA}}}},E_="__vector__",lu="value",bf={nullValue:"NULL_VALUE"};function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?w_(n)?4:iA(n)?9007199254740991:Kp(n)?10:11:Ie(28295,{value:n})}function yi(n,e){if(n===e)return!0;const t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return md(n).isEqual(md(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ki(i.timestampValue),u=Ki(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Qi(i.bytesValue).isEqual(Qi(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return St(i.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return St(i.integerValue)===St(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=St(i.doubleValue),u=St(s.doubleValue);return a===u?dd(a)===dd(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return nu(n.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(HE(a)!==HE(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!yi(a[d],u[d])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function gd(n,e){return(n.values||[]).find((t=>yi(t,e)))!==void 0}function ho(n,e){if(n===e)return 0;const t=co(n),r=co(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const u=St(s.integerValue||s.doubleValue),d=St(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return GE(n.timestampValue,e.timestampValue);case 4:return GE(md(n),md(e));case 5:return Jy(n.stringValue,e.stringValue);case 6:return(function(s,a){const u=Qi(s),d=Qi(a);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const u=s.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=Fe(u[h],d[h]);if(m!==0)return m}return Fe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const u=Fe(St(s.latitude),St(a.latitude));return u!==0?u:Fe(St(s.longitude),St(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return KE(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const u=s.fields||{},d=a.fields||{},h=u[lu]?.arrayValue,m=d[lu]?.arrayValue,g=Fe(h?.values?.length||0,m?.values?.length||0);return g!==0?g:KE(h,m)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Zs.mapValue&&a===Zs.mapValue)return 0;if(s===Zs.mapValue)return 1;if(a===Zs.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),h=a.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const w=Jy(d[g],m[g]);if(w!==0)return w;const E=ho(u[d[g]],h[m[g]]);if(E!==0)return E}return Fe(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function GE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Ki(n),r=Ki(e),i=Fe(t.seconds,r.seconds);return i!==0?i:Fe(t.nanos,r.nanos)}function KE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ho(t[i],r[i]);if(s)return s}return Fe(t.length,r.length)}function uu(n){return iv(n)}function iv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ki(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Qi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=iv(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${iv(t.fields[a])}`;return i+"}"})(n.mapValue):Ie(61005,{value:n})}function xf(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gp(n);return e?16+xf(e):16;case 5:return 2*n.stringValue.length;case 6:return Qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+xf(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return So(r.fields,((s,a)=>{i+=s.length+xf(a)})),i})(n.mapValue);default:throw Ie(13486,{value:n})}}function I_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sv(n){return!!n&&"integerValue"in n}function yd(n){return!!n&&"arrayValue"in n}function QE(n){return!!n&&"nullValue"in n}function YE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function Kp(n){return(n?.mapValue?.fields||{})[T_]?.stringValue===E_}function Xc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Xc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xc(n.arrayValue.values[t]);return e}return{...n}}function iA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rA}const sA={mapValue:{fields:{[T_]:{stringValue:E_},[lu]:{arrayValue:{}}}}};function uM(n){return"nullValue"in n?bf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?I_(Pa.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Kp(n)?sA:{mapValue:{}}:Ie(35942,{value:n})}function cM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?I_(Pa.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?sA:"mapValue"in n?Kp(n)?{mapValue:{}}:Zs:Ie(61959,{value:n})}function XE(n,e){const t=ho(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function JE(n,e){const t=ho(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xc(t)}setAll(e){let t=bt.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Xc(a):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Cn(Xc(this.value))}}function oA(n){const e=[];return So(n.fields,((t,r)=>{const i=new bt([t]);if(Rf(r)){const s=oA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new qn(e)}class Ot{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Ot(e,0,ke.min(),ke.min(),ke.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new Ot(e,1,t,ke.min(),r,i,0)}static newNoDocument(e,t){return new Ot(e,2,t,ke.min(),ke.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new Ot(e,3,t,ke.min(),ke.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cu{constructor(e,t){this.position=e,this.inclusive=t}}function ZE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=ho(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yi(n.position[t],e.position[t]))return!1;return!0}class Zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function dM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class aA{}class Ke extends aA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hM(e,t,r):t==="array-contains"?new mM(e,r):t==="in"?new fA(e,r):t==="not-in"?new gM(e,r):t==="array-contains-any"?new yM(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fM(e,r):new pM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ho(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(ho(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dt extends aA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dt(e,t)}matches(e){return du(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function du(n){return n.op==="and"}function ov(n){return n.op==="or"}function S_(n){return lA(n)&&du(n)}function lA(n){for(const e of n.filters)if(e instanceof dt)return!1;return!0}function av(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+uu(n.value);if(S_(n))return n.filters.map((e=>av(e))).join(",");{const e=n.filters.map((t=>av(t))).join(",");return`${n.op}(${e})`}}function uA(n,e){return n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&yi(r.value,i.value)})(n,e):n instanceof dt?(function(r,i){return i instanceof dt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,u)=>s&&uA(a,i.filters[u])),!0):!1})(n,e):void Ie(19439)}function cA(n,e){const t=n.filters.concat(e);return dt.create(t,n.op)}function dA(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${uu(t.value)}`})(n):n instanceof dt?(function(t){return t.op.toString()+" {"+t.getFilters().map(dA).join(" ,")+"}"})(n):"Filter"}class hM extends Ke{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class fM extends Ke{constructor(e,t){super(e,"in",t),this.keys=hA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pM extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=hA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hA(n,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class mM extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yd(t)&&gd(t.arrayValue,this.value)}}class fA extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gd(this.value.arrayValue,t)}}class gM extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gd(this.value.arrayValue,t)}}class yM extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>gd(this.value.arrayValue,r)))}}class vM{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.Te=null}}function lv(n,e=null,t=[],r=[],i=null,s=null,a=null){return new vM(n,e,t,r,i,s,a)}function Ca(n){const e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>av(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),zp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>uu(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>uu(r))).join(",")),e.Te=t}return e.Te}function Dd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eI(n.startAt,e.startAt)&&eI(n.endAt,e.endAt)}function ep(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tp(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function tI(n,e,t){let r=bf,i=!0;for(const s of tp(n,e)){let a=bf,u=!0;switch(s.op){case"<":case"<=":a=uM(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,u=!1;break;case"!=":case"not-in":a=bf}XE({value:r,inclusive:i},{value:a,inclusive:u})<0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];XE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function nI(n,e,t){let r=Zs,i=!0;for(const s of tp(n,e)){let a=Zs,u=!0;switch(s.op){case">=":case">":a=cM(s.value),u=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,u=!1;break;case"!=":case"not-in":a=Zs}JE({value:r,inclusive:i},{value:a,inclusive:u})>0&&(r=a,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];JE({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class Qp{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pA(n,e,t,r,i,s,a,u){return new Qp(n,e,t,r,i,s,a,u)}function Yp(n){return new Qp(n)}function rI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _M(n){return n.collectionGroup!==null}function Jc(n){const e=Ce(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ut(bt.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Zf(s,r))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new Zf(bt.keyField(),r))}return e.Ie}function lr(n){const e=Ce(n);return e.Ee||(e.Ee=wM(e,Jc(n))),e.Ee}function wM(n,e){if(n.limitType==="F")return lv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Zf(i.field,s)}));const t=n.endAt?new cu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cu(n.startAt.position,n.startAt.inclusive):null;return lv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function uv(n,e,t){return new Qp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xp(n,e){return Dd(lr(n),lr(e))&&n.limitType===e.limitType}function mA(n){return`${Ca(lr(n))}|lt:${n.limitType}`}function Fl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>dA(i))).join(", ")}]`),zp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>uu(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>uu(i))).join(",")),`Target(${r})`})(lr(n))}; limitType=${n.limitType})`}function Nd(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of Jc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,d){const h=ZE(a,u,d);return a.inclusive?h<=0:h<0})(r.startAt,Jc(r),i)||r.endAt&&!(function(a,u,d){const h=ZE(a,u,d);return a.inclusive?h>=0:h>0})(r.endAt,Jc(r),i))})(n,e)}function gA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yA(n){return(e,t)=>{let r=!1;for(const i of Jc(n)){const s=TM(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function TM(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(s,a,u){const d=a.data.field(s),h=u.data.field(s);return d!==null&&h!==null?ho(d,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}class ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return XC(this.inner)}size(){return this.innerSize}}const EM=new mt(ye.comparator);function ar(){return EM}const vA=new mt(ye.comparator);function $c(...n){let e=vA;for(const t of n)e=e.insert(t.key,t);return e}function _A(n){let e=vA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ui(){return Zc()}function wA(){return Zc()}function Zc(){return new ts((n=>n.toString()),((n,e)=>n.isEqual(e)))}const IM=new mt(ye.comparator),SM=new ut(ye.comparator);function ze(...n){let e=SM;for(const t of n)e=e.add(t);return e}const PM=new ut(Fe);function P_(){return PM}function C_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function TA(n){return{integerValue:""+n}}function CM(n,e){return jC(e)?TA(e):C_(n,e)}class Jp{constructor(){this._=void 0}}function AM(n,e,t){return n instanceof vd?(function(i,s){const a={fields:{[eA]:{stringValue:ZC},[nA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&w_(s)&&(s=Gp(s)),s&&(a.fields[tA]=s),{mapValue:a}})(t,e):n instanceof hu?IA(n,e):n instanceof fu?SA(n,e):(function(i,s){const a=EA(i,s),u=iI(a)+iI(i.Ae);return sv(a)&&sv(i.Ae)?TA(u):C_(i.serializer,u)})(n,e)}function bM(n,e,t){return n instanceof hu?IA(n,e):n instanceof fu?SA(n,e):t}function EA(n,e){return n instanceof _d?(function(r){return sv(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class vd extends Jp{}class hu extends Jp{constructor(e){super(),this.elements=e}}function IA(n,e){const t=PA(e);for(const r of n.elements)t.some((i=>yi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class fu extends Jp{constructor(e){super(),this.elements=e}}function SA(n,e){let t=PA(e);for(const r of n.elements)t=t.filter((i=>!yi(i,r)));return{arrayValue:{values:t}}}class _d extends Jp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iI(n){return St(n.integerValue||n.doubleValue)}function PA(n){return yd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xM{constructor(e,t){this.field=e,this.transform=t}}function RM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof hu&&i instanceof hu||r instanceof fu&&i instanceof fu?nu(r.elements,i.elements,yi):r instanceof _d&&i instanceof _d?yi(r.Ae,i.Ae):r instanceof vd&&i instanceof vd})(n.transform,e.transform)}class kM{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Zp{}function CA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new em(n.key,An.none()):new bu(n.key,n.data,An.none());{const t=n.data,r=Cn.empty();let i=new ut(bt.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ns(n.key,r,new qn(i.toArray()),An.none())}}function DM(n,e,t){n instanceof bu?(function(i,s,a){const u=i.value.clone(),d=oI(i.fieldTransforms,s,a.transformResults);u.setAll(d),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ns?(function(i,s,a){if(!kf(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=oI(i.fieldTransforms,s,a.transformResults),d=s.data;d.setAll(AA(i)),d.setAll(u),s.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function ed(n,e,t,r){return n instanceof bu?(function(s,a,u,d){if(!kf(s.precondition,a))return u;const h=s.value.clone(),m=aI(s.fieldTransforms,d,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof ns?(function(s,a,u,d){if(!kf(s.precondition,a))return u;const h=aI(s.fieldTransforms,d,a),m=a.data;return m.setAll(AA(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(s,a,u){return kf(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function NM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=EA(r.transform,i||null);s!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,s))}return t||null}function sI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nu(r,i,((s,a)=>RM(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bu extends Zp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ns extends Zp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function AA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function oI(n,e,t){const r=new Map;xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,bM(a,u,t[i]))}return r}function aI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,AM(s,a,e))}return r}class em extends Zp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bA extends Zp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class A_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&DM(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wA();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;const d=CA(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,((t,r)=>sI(t,r)))&&nu(this.baseMutations,e.baseMutations,((t,r)=>sI(t,r)))}}class b_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return IM})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new b_(e,t,r,i)}}class x_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class VM{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yt,Xe;function OM(n){switch(n){case se.OK:return Ie(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function xA(n){if(n===void 0)return Bt("GRPC error has no .code"),se.UNKNOWN;switch(n){case Yt.OK:return se.OK;case Yt.CANCELLED:return se.CANCELLED;case Yt.UNKNOWN:return se.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return se.INTERNAL;case Yt.UNAVAILABLE:return se.UNAVAILABLE;case Yt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Yt.NOT_FOUND:return se.NOT_FOUND;case Yt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Yt.ABORTED:return se.ABORTED;case Yt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Yt.DATA_LOSS:return se.DATA_LOSS;default:return Ie(39323,{code:n})}}(Xe=Yt||(Yt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function MM(){return new TextEncoder}const LM=new ro([4294967295,4294967295],0);function lI(n){const e=MM().encode(n),t=new SC;return t.update(e),new Uint8Array(t.digest())}function uI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ro([t,r],0),new ro([i,s],0)]}class R_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zc(`Invalid padding: ${t}`);if(r<0)throw new zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ro.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ro.fromNumber(r)));return i.compare(LM)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lI(e),[r,i]=uI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new R_(s,i,t);return r.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;const t=lI(e),[r,i]=uI(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Od.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vd(ke.min(),i,new mt(Fe),ar(),ze())}}class Od{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Od(r,t,ze(),ze(),ze())}}class Df{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class RA{constructor(e,t){this.targetId=e,this.Ce=t}}class kA{constructor(e,t,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class cI{constructor(){this.ve=0,this.Fe=dI(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ie(38017,{changeType:s})}})),new Od(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=dI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FM{constructor(e){this.Ge=e,this.ze=new Map,this.je=ar(),this.Je=lf(),this.He=lf(),this.Ye=new mt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(ep(s))if(r===0){const a=new ye(s.path);this.et(t,a,Ot.newNoDocument(a,ke.min()))}else xe(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,u;try{a=Qi(r).toUint8Array()}catch(d){if(d instanceof JC)return uo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new R_(a,i,s)}catch(d){return uo(d instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const u=this.ot(a);if(u){if(s.current&&ep(u.target)){const d=new ye(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Ot.newNoDocument(d,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=ze();this.He.forEach(((s,a)=>{let u=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Vd(e,t,this.Ye,this.je,r);return this.je=ar(),this.Je=lf(),this.He=lf(),this.Ye=new mt(Fe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ut(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ut(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lf(){return new mt(ye.comparator)}function dI(){return new mt(ye.comparator)}const UM={asc:"ASCENDING",desc:"DESCENDING"},jM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BM={and:"AND",or:"OR"};class $M{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cv(n,e){return n.useProto3Json||zp(e)?e:{value:e}}function pu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zM(n,e){return pu(n,e.toTimestamp())}function On(n){return xe(!!n,49232),ke.fromTimestamp((function(t){const r=Ki(t);return new lt(r.seconds,r.nanos)})(n))}function k_(n,e){return dv(n,e).canonicalString()}function dv(n,e){const t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function NA(n){const e=st.fromString(n);return xe($A(e),10190,{key:e.toString()}),e}function np(n,e){return k_(n.databaseId,e.path)}function wa(n,e){const t=NA(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(MA(t))}function VA(n,e){return k_(n.databaseId,e)}function OA(n){const e=NA(n);return e.length===4?st.emptyPath():MA(e)}function hv(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MA(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hI(n,e,t){return{name:np(n,e),fields:t.value.mapValue.fields}}function WM(n,e,t){const r=wa(n,e.name),i=On(e.updateTime),s=e.createTime?On(e.createTime):ke.min(),a=new Cn({mapValue:{fields:e.fields}}),u=Ot.newFoundDocument(r,i,s,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function HM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,m){return h.useProto3Json?(xe(m===void 0||typeof m=="string",58123),qt.fromBase64String(m||"")):(xe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),qt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(h){const m=h.code===void 0?se.UNKNOWN:xA(h.code);return new ge(m,h.message||"")})(a);t=new kA(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wa(n,r.document.name),s=On(r.document.updateTime),a=r.document.createTime?On(r.document.createTime):ke.min(),u=new Cn({mapValue:{fields:r.document.fields}}),d=Ot.newFoundDocument(i,s,a,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Df(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wa(n,r.document),s=r.readTime?On(r.readTime):ke.min(),a=Ot.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Df([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wa(n,r.document),s=r.removedTargetIds||[];t=new Df([],s,i,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new VM(i,s),u=r.targetId;t=new RA(u,a)}}return t}function rp(n,e){let t;if(e instanceof bu)t={update:hI(n,e.key,e.value)};else if(e instanceof em)t={delete:np(n,e.key)};else if(e instanceof ns)t={update:hI(n,e.key,e.data),updateMask:XM(e.fieldMask)};else{if(!(e instanceof bA))return Ie(16599,{Vt:e.type});t={verify:np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const u=a.transform;if(u instanceof vd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof _d)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw Ie(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:zM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ie(27497)})(n,e.precondition)),t}function fv(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?An.updateTime(On(s.updateTime)):s.exists!==void 0?An.exists(s.exists):An.none()})(e.currentDocument):An.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,u){let d=null;if("setToServerValue"in u)xe(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new vd;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];d=new hu(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];d=new fu(m)}else"increment"in u?d=new _d(a,u.increment):Ie(16584,{proto:u});const h=bt.fromServerFormat(u.fieldPath);return new xM(h,d)})(n,i))):[];if(e.update){e.update.name;const i=wa(n,e.update.name),s=new Cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(d){const h=d.fieldPaths||[];return new qn(h.map((m=>bt.fromServerFormat(m))))})(e.updateMask);return new ns(i,s,a,t,r)}return new bu(i,s,t,r)}if(e.delete){const i=wa(n,e.delete);return new em(i,t)}if(e.verify){const i=wa(n,e.verify);return new bA(i,t)}return Ie(1463,{proto:e})}function qM(n,e){return n&&n.length>0?(xe(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?On(i.updateTime):On(s);return a.isEqual(ke.min())&&(a=On(s)),new kM(a,i.transformResults||[])})(t,e)))):[]}function LA(n,e){return{documents:[VA(n,e.path)]}}function FA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=VA(n,i);const s=(function(h){if(h.length!==0)return BA(dt.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(h){if(h.length!==0)return h.map((m=>(function(w){return{field:Ul(w.field),direction:KM(w.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=cv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function UA(n){let e=OA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xe(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=(function(g){const w=jA(g);return w instanceof dt&&S_(w)?w.getFilters():[w]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((w=>(function(x){return new Zf(jl(x.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(g){let w;return w=typeof g=="object"?g.value:g,zp(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(g){const w=!!g.before,E=g.values||[];return new cu(E,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(g){const w=!g.before,E=g.values||[];return new cu(E,w)})(t.endAt)),pA(e,i,a,s,u,"F",d,h)}function GM(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jl(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jl(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jl(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=jl(t.unaryFilter.field);return Ke.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(jl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return dt.create(t.compositeFilter.filters.map((r=>jA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function KM(n){return UM[n]}function QM(n){return jM[n]}function YM(n){return BM[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function jl(n){return bt.fromServerFormat(n.fieldPath)}function BA(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(YE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NAN"}};if(QE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NAN"}};if(QE(t.value))return{unaryFilter:{field:Ul(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(t.field),op:QM(t.op),value:t.value}}})(n):n instanceof dt?(function(t){const r=t.getFilters().map((i=>BA(i)));return r.length===1?r[0]:{compositeFilter:{op:YM(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function XM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $A(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Bi{constructor(e,t,r,i,s=ke.min(),a=ke.min(),u=qt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zA{constructor(e){this.yt=e}}function JM(n,e){let t;if(e.document)t=WM(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=ba(e.noDocument.readTime);t=Ot.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie(56709);{const r=ye.fromSegments(e.unknownDocument.path),i=ba(e.unknownDocument.version);t=Ot.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new lt(i[0],i[1]);return ke.fromTimestamp(s)})(e.readTime)),t}function fI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ip(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:np(s,a.key),fields:a.data.value.mapValue.fields,updateTime:pu(s,a.version.toTimestamp()),createTime:pu(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Aa(e.version)};else{if(!e.isUnknownDocument())return Ie(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Aa(e.version)}}return r}function ip(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Aa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ba(n){const e=new lt(n.seconds,n.nanoseconds);return ke.fromTimestamp(e)}function ha(n,e){const t=(e.baseMutations||[]).map((s=>fv(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>fv(n.yt,s))),i=lt.fromMillis(e.localWriteTimeMs);return new A_(e.batchId,i,t,r)}function Wc(n){const e=ba(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ba(n.lastLimboFreeSnapshotVersion):ke.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return xe(a===1,1966,{count:a}),lr(Yp(OA(s.documents[0])))})(n.query):(function(s){return lr(UA(s))})(n.query),new Bi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qt.fromBase64String(n.resumeToken))}function WA(n,e){const t=Aa(e.snapshotVersion),r=Aa(e.lastLimboFreeSnapshotVersion);let i;i=ep(e.target)?LA(n.yt,e.target):FA(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ca(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function HA(n){const e=UA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uv(e,e.limit,"L"):e}function cy(n,e){return new x_(e.largestBatchId,fv(n.yt,e.overlayMutation))}function pI(n,e){const t=e.path.lastSegment();return[n,bn(e.path.popLast()),t]}function mI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Aa(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}class ZM{getBundleMetadata(e,t){return gI(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:ba(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return gI(e).put((function(i){return{bundleId:i.id,createTime:Aa(On(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return yI(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:HA(s.bundledQuery),readTime:ba(s.readTime)}})(r)}))}saveNamedQuery(e,t){return yI(e).put((function(i){return{name:i.name,readTime:Aa(On(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function gI(n){return rn(n,Wp)}function yI(n){return rn(n,Hp)}class tm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new tm(e,r)}getOverlay(e,t){return Pc(e).get(pI(this.userId,t)).next((r=>r?cy(this.serializer,r):null))}getOverlays(e,t){const r=ui();return W.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const u=new x_(t,a);i.push(this.St(e,u))})),W.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(bn(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Pc(e).Z(nv,u))})),W.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ui(),s=bn(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pc(e).J(nv,a).next((u=>{for(const d of u){const h=cy(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=ui();let a;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pc(e).ee({index:qC,range:u},((d,h,m)=>{const g=cy(this.serializer,h);s.size()<i||g.largestBatchId===a?(s.set(g.getKey(),g),a=g.largestBatchId):m.done()})).next((()=>s))}St(e,t){return Pc(e).put((function(i,s,a){const[u,d,h]=pI(s,a.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:rp(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Pc(n){return rn(n,qp)}class eL{bt(e){return rn(e,v_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?qt.fromUint8Array(r):qt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){const r=St(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),dd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ki(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Qi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?iA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Kp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ie(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=lu,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fa.Kt=new fa;const Rl=255;function tL(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function vI(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=tL(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class nL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=vI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=vI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Rl),this.sn(255)}_n(){this.an(Rl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Rl?(this.sn(Rl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Rl?(this.an(Rl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rL{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class iL{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cc{constructor(){this.cn=new nL,this.ln=new rL(this.cn),this.hn=new iL(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class pa{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new pa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Nf(this.En),directionalValue:Nf(this.dn),orderedDocumentKey:Nf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Us(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=_I(n.En,e.En),t!==0?t:(t=_I(n.dn,e.dn),t!==0?t:ye.comparator(n.In,e.In)))}function _I(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Nf(n){return yC()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function wI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class TI{constructor(e){this.mn=new ut(((t,r)=>bt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Zy(e);if(t!==void 0&&!this.wn(t))return!1;const r=sa(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const d=r[s];if(!this.Sn(u,d)||!this.bn(this.fn[a++],d))return!1}++s}for(;s<r.length;++s){const u=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new ut(bt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Pf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pf(r.field,r.dir==="asc"?0:1)));return new Kf(Kf.UNKNOWN_ID,this.collectionId,t,cd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function qA(n){if(xe(n instanceof Ke||n instanceof dt,20012),n instanceof Ke){if(n instanceof fA){const t=n.value.arrayValue?.values?.map((r=>Ke.create(n.field,"==",r)))||[];return dt.create(t,"or")}return n}const e=n.filters.map((t=>qA(t)));return dt.create(e,n.op)}function sL(n){if(n.getFilters().length===0)return[];const e=gv(qA(n));return xe(GA(e),7391),pv(e)||mv(e)?[e]:e.getFilters()}function pv(n){return n instanceof Ke}function mv(n){return n instanceof dt&&S_(n)}function GA(n){return pv(n)||mv(n)||(function(t){if(t instanceof dt&&ov(t)){for(const r of t.getFilters())if(!pv(r)&&!mv(r))return!1;return!0}return!1})(n)}function gv(n){if(xe(n instanceof Ke||n instanceof dt,34018),n instanceof Ke)return n;if(n.filters.length===1)return gv(n.filters[0]);const e=n.filters.map((r=>gv(r)));let t=dt.create(e,n.op);return t=sp(t),GA(t)?t:(xe(t instanceof dt,64498),xe(du(t),40251),xe(t.filters.length>1,57927),t.filters.reduce(((r,i)=>D_(r,i))))}function D_(n,e){let t;return xe(n instanceof Ke||n instanceof dt,38388),xe(e instanceof Ke||e instanceof dt,25473),t=n instanceof Ke?e instanceof Ke?(function(i,s){return dt.create([i,s],"and")})(n,e):EI(n,e):e instanceof Ke?EI(e,n):(function(i,s){if(xe(i.filters.length>0&&s.filters.length>0,48005),du(i)&&du(s))return cA(i,s.getFilters());const a=ov(i)?i:s,u=ov(i)?s:i,d=a.filters.map((h=>D_(h,u)));return dt.create(d,"or")})(n,e),sp(t)}function EI(n,e){if(du(e))return cA(e,n.getFilters());{const t=e.filters.map((r=>D_(n,r)));return dt.create(t,"or")}}function sp(n){if(xe(n instanceof Ke||n instanceof dt,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return sp(e[0]);if(lA(n))return n;const t=e.map((i=>sp(i))),r=[];return t.forEach((i=>{i instanceof Ke?r.push(i):i instanceof dt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:dt.create(r,n.op)}class oL{constructor(){this.Cn=new N_}addToCollectionParentIndex(e,t){return this.Cn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(ur.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class N_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ut(st.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(st.comparator)).toArray()}}const II="IndexedDbIndexManager",uf=new Uint8Array(0);class aL{constructor(e,t){this.databaseId=t,this.vn=new N_,this.Fn=new ts((r=>Ca(r)),((r,i)=>Dd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:bn(i)};return SI(e).put(s)}return W.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[DC(t),""],!1,!0);return SI(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(li(a.parent))}return r}))}addFieldIndex(e,t){const r=Ac(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Dl(e);return s.next((u=>{a.put(mI(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Ac(e),i=Dl(e),s=kl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ac(e),r=kl(e),i=Dl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return W.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new TI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=kl(e);let i=!0;const s=new Map;return W.forEach(this.Mn(t),(a=>this.xn(e,a).next((u=>{i&&(i=!!u),s.set(a,u)})))).next((()=>{if(i){let a=ze();const u=[];return W.forEach(s,((d,h)=>{ce(II,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((z=>`${z.fieldPath}:${z.kind}`)).join(",")}`})(d)} to execute ${Ca(t)}`);const m=(function(F,z){const ne=Zy(z);if(ne===void 0)return null;for(const Z of tp(F,ne.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(h,d),g=(function(F,z){const ne=new Map;for(const Z of sa(z))for(const P of tp(F,Z.fieldPath))switch(P.op){case"==":case"in":ne.set(Z.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return ne.set(Z.fieldPath.canonicalString(),P.value),Array.from(ne.values())}return null})(h,d),w=(function(F,z){const ne=[];let Z=!0;for(const P of sa(z)){const S=P.kind===0?tI(F,P.fieldPath,F.startAt):nI(F,P.fieldPath,F.startAt);ne.push(S.value),Z&&(Z=S.inclusive)}return new cu(ne,Z)})(h,d),E=(function(F,z){const ne=[];let Z=!0;for(const P of sa(z)){const S=P.kind===0?nI(F,P.fieldPath,F.endAt):tI(F,P.fieldPath,F.endAt);ne.push(S.value),Z&&(Z=S.inclusive)}return new cu(ne,Z)})(h,d),x=this.On(d,h,w),R=this.On(d,h,E),C=this.Nn(d,h,g),j=this.Bn(d.indexId,m,x,w.inclusive,R,E.inclusive,C);return W.forEach(j,(O=>r.Y(O,t.limit).next((F=>{F.forEach((z=>{const ne=ye.fromSegments(z.documentKey);a.has(ne)||(a=a.add(ne),u.push(ne))}))}))))})).next((()=>u))}return W.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=sL(dt.create(e.filters,"and")).map((r=>lv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,u){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),h=d/(t!=null?t.length:1),m=[];for(let g=0;g<d;++g){const w=t?this.Ln(t[g/h]):uf,E=this.kn(e,w,r[g%h],i),x=this.qn(e,w,s[g%h],a),R=u.map((C=>this.kn(e,w,C,!0)));m.push(...this.createRange(E,x,R))}return m}kn(e,t,r,i){const s=new pa(e,ye.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new pa(e,ye.empty(),t,r);return i?s.An():s}xn(e,t){const r=new TI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const u of s)r.yn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return W.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(d){let h=new ut(bt.comparator),m=!1;for(const g of d.filters)for(const w of g.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?m=!0:h=h.add(w.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Cc;for(const i of sa(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);fa.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Cc;return fa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Cc;return fa.Kt.Dt(I_(this.databaseId,t),r.Pn((function(s){const a=sa(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Cc);let s=0;for(const a of sa(e)){const u=r[s++];for(const d of i)if(this.Un(t,a.fieldPath)&&yd(u))i=this.Kn(i,a,u);else{const h=d.Pn(a.kind);fa.Kt.Dt(u,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const u of i){const d=new Cc;d.seed(u.un()),fa.Kt.Dt(a,d.Pn(t.kind)),s.push(d)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof Ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Ac(e),i=Dl(e);return(t?r.J(tv,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return W.forEach(s,(u=>i.get([u.indexId,this.uid]).next((d=>{a.push((function(m,g){const w=g?new cd(g.sequenceNumber,new ur(ba(g.readTime),new ye(li(g.documentKey)),g.largestBatchId)):cd.empty(),E=m.fields.map((([x,R])=>new Pf(bt.fromServerFormat(x),R)));return new Kf(m.indexId,m.collectionGroup,E,w)})(u,d))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Fe(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Ac(e),s=Dl(e);return this.Gn(e).next((a=>i.J(tv,IDBKeyRange.bound(t,t)).next((u=>W.forEach(u,(d=>s.put(mI(d.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?W.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(r.set(i.collectionGroup,u),W.forEach(u,(d=>this.zn(e,i,d).next((h=>{const m=this.jn(s,d);return h.isEqual(m)?W.resolve():this.Jn(e,s,d,h,m)})))))))}))}Hn(e,t,r,i){return kl(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return kl(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=kl(e);let s=new ut(Us);return i.ee({index:HC,range:IDBKeyRange.only([r.indexId,this.uid,Nf(this.$n(r,t))])},((a,u)=>{s=s.add(new pa(r.indexId,t,wI(u.arrayValue),wI(u.directionalValue)))})).next((()=>s))}jn(e,t){let r=new ut(Us);const i=this.Qn(t,e);if(i==null)return r;const s=Zy(t);if(s!=null){const a=e.data.field(s.fieldPath);if(yd(a))for(const u of a.arrayValue.values||[])r=r.add(new pa(t.indexId,e.key,this.Ln(u),i))}else r=r.add(new pa(t.indexId,e.key,uf,i));return r}Jn(e,t,r,i,s){ce(II,"Updating index entries for document '%s'",t.key);const a=[];return(function(d,h,m,g,w){const E=d.getIterator(),x=h.getIterator();let R=xl(E),C=xl(x);for(;R||C;){let j=!1,O=!1;if(R&&C){const F=m(R,C);F<0?O=!0:F>0&&(j=!0)}else R!=null?O=!0:j=!0;j?(g(C),C=xl(x)):O?(w(R),R=xl(E)):(R=xl(E),C=xl(x))}})(i,s,Us,(u=>{a.push(this.Hn(e,t,r,u))}),(u=>{a.push(this.Yn(e,t,r,u))})),W.waitFor(a)}Gn(e){let t=1;return Dl(e).ee({index:WC,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,u)=>Us(a,u))).filter(((a,u,d)=>!u||Us(a,d[u-1])!==0));const i=[];i.push(e);for(const a of r){const u=Us(a,e),d=Us(a,t);if(u===0)i[0]=e.An();else if(u>0&&d<0)i.push(a),i.push(a.An());else if(d>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const u=i[a].Vn(this.uid,uf,ye.empty()),d=i[a+1].Vn(this.uid,uf,ye.empty());s.push(IDBKeyRange.bound(u,d))}return s}Zn(e,t){return Us(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(PI)}getMinOffset(e,t){return W.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||Ie(44426))))).next(PI)}}function SI(n){return rn(n,pd)}function kl(n){return rn(n,Yc)}function Ac(n){return rn(n,y_)}function Dl(n){return rn(n,Qc)}function PI(n){xe(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;p_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ur(e.readTime,e.documentKey,t)}const CI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KA=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function QA(n,e,t){const r=n.store(Nr),i=n.store(iu),s=[],a=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:a},((m,g,w)=>(u++,w.delete())));s.push(d.next((()=>{xe(u===1,47070,{batchId:t.batchId})})));const h=[];for(const m of t.mutations){const g=BC(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return W.waitFor(s).next((()=>h))}function op(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ie(14731);e=n.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(KA,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class nm{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){xe(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new nm(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return js(e).ee({index:ma,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=Bl(e),a=js(e);return a.add({}).next((u=>{xe(typeof u=="number",49019);const d=new A_(u,t,r,i),h=(function(E,x,R){const C=R.baseMutations.map((O=>rp(E.yt,O))),j=R.mutations.map((O=>rp(E.yt,O)));return{userId:x,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:C,mutations:j}})(this.serializer,this.userId,d),m=[];let g=new ut(((w,E)=>Fe(w.canonicalString(),E.canonicalString())));for(const w of i){const E=BC(this.userId,w.key.path,u);g=g.add(w.key.path.popLast()),m.push(a.put(h)),m.push(s.put(E,LO))}return g.forEach((w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),W.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,t){return js(e).get(t).next((r=>r?(xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ha(this.serializer,r)):null))}er(e,t){return this.Xn[t]?W.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return js(e).ee({index:ma,range:i},((a,u,d)=>{u.userId===this.userId&&(xe(u.batchId>=r,47524,{tr:r}),s=ha(this.serializer,u)),d.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=va;return js(e).ee({index:ma,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,va],[this.userId,Number.POSITIVE_INFINITY]);return js(e).J(ma,t).next((r=>r.map((i=>ha(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bl(e).ee({range:i},((a,u,d)=>{const[h,m,g]=a,w=li(m);if(h===this.userId&&t.path.isEqual(w))return js(e).get(g).next((E=>{if(!E)throw Ie(61480,{nr:a,batchId:g});xe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:g}),s.push(ha(this.serializer,E))}));d.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Fe);const i=[];return t.forEach((s=>{const a=Cf(this.userId,s.path),u=IDBKeyRange.lowerBound(a),d=Bl(e).ee({range:u},((h,m,g)=>{const[w,E,x]=h,R=li(E);w===this.userId&&s.path.isEqual(R)?r=r.add(x):g.done()}));i.push(d)})),W.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Cf(this.userId,r),a=IDBKeyRange.lowerBound(s);let u=new ut(Fe);return Bl(e).ee({range:a},((d,h,m)=>{const[g,w,E]=d,x=li(w);g===this.userId&&r.isPrefixOf(x)?x.length===i&&(u=u.add(E)):m.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(js(e).get(s).next((a=>{if(a===null)throw Ie(35274,{batchId:s});xe(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ha(this.serializer,a))})))})),W.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return QA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),W.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return Bl(e).ee({range:r},((s,a,u)=>{if(s[0]===this.userId){const d=li(s[1]);i.push(d)}else u.done()})).next((()=>{xe(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return YA(e,this.userId,t)}_r(e){return XA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:va,lastStreamToken:""}))}}function YA(n,e,t){const r=Cf(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Bl(n).ee({range:s,X:!0},((u,d,h)=>{const[m,g,w]=u;m===e&&g===i&&(a=!0),h.done()})).next((()=>a))}function js(n){return rn(n,Nr)}function Bl(n){return rn(n,iu)}function XA(n){return rn(n,hd)}class xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xa(0)}static cr(){return new xa(-1)}}class lL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new xa(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>ke.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Nl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(xe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Nl(e).ee(((a,u)=>{const d=Wc(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))})).next((()=>W.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Nl(e).ee(((r,i)=>{const s=Wc(i);t(s)}))}lr(e){return AI(e).get(Xf).next((t=>(xe(t!==null,2888),t)))}hr(e,t){return AI(e).put(Xf,t)}Pr(e,t){return Nl(e).put(WA(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ca(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Nl(e).ee({range:i,index:zC},((a,u,d)=>{const h=Wc(u);Dd(t,h.target)&&(s=h,d.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Gs(e);return t.forEach((a=>{const u=bn(a.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,a))})),W.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gs(e);return W.forEach(t,(s=>{const a=bn(s.path);return W.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Gs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gs(e);let s=ze();return i.ee({range:r,X:!0},((a,u,d)=>{const h=li(a[1]),m=new ye(h);s=s.add(m)})).next((()=>s))}containsKey(e,t){const r=bn(t.path),i=IDBKeyRange.bound([r],[DC(r)],!1,!0);let s=0;return Gs(e).ee({index:g_,X:!0,range:i},(([a,u],d,h)=>{a!==0&&(s++,h.done())})).next((()=>s>0))}At(e,t){return Nl(e).get(t).next((r=>r?Wc(r):null))}}function Nl(n){return rn(n,su)}function AI(n){return rn(n,_a)}function Gs(n){return rn(n,ou)}const bI="LruGarbageCollector",uL=1048576;function xI([n,e],[t,r]){const i=Fe(n,t);return i===0?Fe(e,r):i}class cL{constructor(e){this.Ir=e,this.buffer=new ut(xI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();xI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(bI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Io(t)?ce(bI,"Ignoring IndexedDB error during garbage collection: ",t):await Eo(t)}await this.Vr(3e5)}))}}class dL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Hn.ce);const r=new cL(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(CI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,u,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,t)))).next((g=>(s=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),Ll()<=qe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${s} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g}))))}}function ZA(n,e){return new dL(n,e)}class hL{constructor(e,t){this.db=e,this.garbageCollector=ZA(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return cf(e,r)}removeReference(e,t,r){return cf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cf(e,t)}br(e,t){return(function(i,s){let a=!1;return XA(i).te((u=>YA(i,u,s).next((d=>(d&&(a=!0),W.resolve(!d)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,u)=>{if(u<=t){const d=this.br(e,a).next((h=>{if(!h)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,ke.min()),Gs(e).delete((function(g){return[0,bn(g.path)]})(a)))))}));i.push(d)}})).next((()=>W.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cf(e,t)}Sr(e,t){const r=Gs(e);let i,s=Hn.ce;return r.ee({index:g_},(([a,u],{path:d,sequenceNumber:h})=>{a===0?(s!==Hn.ce&&t(new ye(li(i)),s),s=h,i=d):s=Hn.ce})).next((()=>{s!==Hn.ce&&t(new ye(li(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cf(n,e){return Gs(n).put((function(r,i){return{targetId:0,path:bn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class eb{constructor(){this.changes=new ts((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ta(e).put(r)}removeEntry(e,t,r){return ta(e).delete((function(s,a){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],ip(a),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ot.newInvalidDocument(t);return ta(e).ee({index:Af,range:IDBKeyRange.only(bc(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:Ot.newInvalidDocument(t)};return ta(e).ee({index:Af,range:IDBKeyRange.only(bc(t))},((i,s)=>{r={document:this.Cr(t,s),size:op(s)}})).next((()=>r))}getEntries(e,t){let r=ar();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=ar(),i=new mt(ye.comparator);return this.Fr(e,t,((s,a)=>{const u=this.Cr(s,a);r=r.insert(s,u),i=i.insert(s,op(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return W.resolve();let i=new ut(DI);t.forEach((d=>i=i.add(d)));const s=IDBKeyRange.bound(bc(i.first()),bc(i.last())),a=i.getIterator();let u=a.getNext();return ta(e).ee({index:Af,range:s},((d,h,m)=>{const g=ye.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&DI(u,g)<0;)r(u,null),u=a.getNext();u&&u.isEqual(g)&&(r(u,h),u=a.hasNext()?a.getNext():null),u?m.j(bc(u)):m.done()})).next((()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,u=[a.popLast().toArray(),a.lastSegment(),ip(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(e).J(IDBKeyRange.bound(u,d,!0)).next((h=>{s?.incrementDocumentReadCount(h.length);let m=ar();for(const g of h){const w=this.Cr(ye.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);w.isFoundDocument()&&(Nd(t,w)||i.has(w.key))&&(m=m.insert(w.key,w))}return m}))}getAllFromCollectionGroup(e,t,r,i){let s=ar();const a=kI(t,r),u=kI(t,ur.max());return ta(e).ee({index:$C,range:IDBKeyRange.bound(a,u,!0)},((d,h,m)=>{const g=this.Cr(ye.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()})).next((()=>s))}newChangeBuffer(e){return new pL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return RI(e).get(ev).next((t=>(xe(!!t,20021),t)))}Dr(e,t){return RI(e).put(ev,t)}Cr(e,t){if(t){const r=JM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ke.min())))return r}return Ot.newInvalidDocument(e)}}function tb(n){return new fL(n)}class pL extends eb{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ts((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new ut(((s,a)=>Fe(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),a.isValidDocument()){const d=fI(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=op(d);r+=h-u.size,t.push(this.Nr.addEntry(e,s,d))}else if(r-=u.size,this.trackRemovals){const d=fI(this.Nr.serializer,a.convertToNoDocument(ke.min()));t.push(this.Nr.addEntry(e,s,d))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function RI(n){return rn(n,fd)}function ta(n){return rn(n,Yf)}function bc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kI(n,e){const t=e.documentKey.path.toArray();return[n,ip(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function DI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Fe(t[s],r[s]),i)return i;return i=Fe(t.length,r.length),i||(i=Fe(t[t.length-2],r[r.length-2]),i||Fe(t[t.length-1],r[r.length-1]))}class mL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nb{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&ed(r.mutation,i,qn.empty(),lt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const i=ui();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=$c();return s.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=ui();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let s=ar();const a=Zc(),u=(function(){return Zc()})();return t.forEach(((d,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof ns)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),ed(m.mutation,h,m.mutation.getFieldMask(),lt.now())):a.set(h.key,qn.empty())})),this.recalculateAndSaveOverlays(e,s).next((d=>(d.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>u.set(h,new mL(m,a.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Zc();let i=new mt(((a,u)=>a-u)),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const u of a)u.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||qn.empty();m=u.applyToLocalView(h,m),r.set(d,m);const g=(i.get(u.batchId)||ze()).add(d);i=i.insert(u.batchId,g)}))})).next((()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,g=wA();m.forEach((w=>{if(!s.has(w)){const E=CA(t.get(w),r.get(w));E!==null&&g.set(w,E),s=s.add(w)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return W.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_M(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(ui());let u=ru,d=s;return a.next((h=>W.forEach(h,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?W.resolve():this.remoteDocumentCache.getEntry(e,m).next((w=>{d=d.insert(m,w)}))))).next((()=>this.populateOverlays(e,h,s))).next((()=>this.computeViews(e,d,h,ze()))).next((m=>({batchId:u,changes:_A(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let i=$c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=$c();return this.indexManager.getCollectionParents(e,s).next((u=>W.forEach(u,(d=>{const h=(function(g,w){return new Qp(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,w)=>{a=a.insert(g,w)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((d,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Ot.newInvalidDocument(m)))}));let u=$c();return a.forEach(((d,h)=>{const m=s.get(d);m!==void 0&&ed(m.mutation,h,qn.empty(),lt.now()),Nd(t,h)&&(u=u.insert(d,h))})),u}))}}class gL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return W.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:HA(i.bundledQuery),readTime:On(i.readTime)}})(t)),W.resolve()}}class yL{constructor(){this.overlays=new mt(ye.comparator),this.qr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ui();return W.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),W.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const i=ui(),s=t.length+1,a=new ye(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new mt(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=ui(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=ui(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>u.set(h,m))),!(u.size()>=i)););return W.resolve(u)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new x_(t,r));let s=this.qr.get(t);s===void 0&&(s=ze(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class vL{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}class V_{constructor(){this.Qr=new ut(un.$r),this.Ur=new ut(un.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new un(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new un(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ye(new st([])),r=new un(t,e),i=new un(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new st([])),r=new un(t,e),i=new un(t,e+1);let s=ze();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new un(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class _L{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ut(un.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new A_(s,t,r,i);this.mutationQueue.push(a);for(const u of i)this.Zr=this.Zr.add(new un(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return W.resolve(a)}lookupMutationBatch(e,t){return W.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?va:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new un(t,0),i=new un(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const u=this.Xr(a.Yr);s.push(u)})),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Fe);return t.forEach((i=>{const s=new un(i,0),a=new un(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(u=>{r=r.add(u.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new un(new ye(s),0);let u=new ut(Fe);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Yr)),!0)}),a),W.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(t.mutations,(i=>{const s=new un(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new un(t,0),i=this.Zr.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wL{constructor(e){this.ri=e,this.docs=(function(){return new mt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(t))}getEntries(e,t){let r=ar();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ot.newInvalidDocument(i))})),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ar();const a=t.path,u=new ye(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||p_(MC(m),r)<=0||(i.has(m.key)||Nd(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ie(9500)}ii(e,t){return W.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new TL(this)}getSize(e){return W.resolve(this.size)}}class TL extends eb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),W.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class EL{constructor(e){this.persistence=e,this.si=new ts((t=>Ca(t)),Dd),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new V_,this.targetCount=0,this.ai=xa.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),W.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new xa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Pr(t),W.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),W.waitFor(s).next((()=>i))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this._i.containsKey(t))}}class O_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hn(0),this.li=!1,this.li=!0,this.hi=new vL,this.referenceDelegate=e(this),this.Pi=new EL(this),this.indexManager=new oL,this.remoteDocumentCache=(function(i){return new wL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new zA(t),this.Ii=new gL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new _L(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const i=new IL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class IL extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Ri=new V_,this.Vi=null}static mi(e){return new rm(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const i=ye.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ap{constructor(e,t){this.persistence=e,this.pi=new ts((r=>bn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=ZA(this,t)}static mi(e,t){return new ap(e,t)}Ei(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return W.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?W.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((u=>{u||(r++,s.removeEntry(a,ke.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}br(e,t,r){return W.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class SL{constructor(e){this.serializer=e}k(e,t,r,i){const s=new $p("createOrUpgrade",t);r<1&&i>=1&&((function(d){d.createObjectStore(kd)})(e),(function(d){d.createObjectStore(hd,{keyPath:MO}),d.createObjectStore(Nr,{keyPath:zE,autoIncrement:!0}).createIndex(ma,WE,{unique:!0}),d.createObjectStore(iu)})(e),NI(e),(function(d){d.createObjectStore(oa)})(e));let a=W.resolve();return r<3&&i>=3&&(r!==0&&((function(d){d.deleteObjectStore(ou),d.deleteObjectStore(su),d.deleteObjectStore(_a)})(e),NI(e)),a=a.next((()=>(function(d){const h=d.store(_a),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return h.put(Xf,m)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(d,h){return h.store(Nr).J().next((g=>{d.deleteObjectStore(Nr),d.createObjectStore(Nr,{keyPath:zE,autoIncrement:!0}).createIndex(ma,WE,{unique:!0});const w=h.store(Nr),E=g.map((x=>w.put(x)));return W.waitFor(E)}))})(e,s)))),a=a.next((()=>{(function(d){d.createObjectStore(au,{keyPath:HO})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(d){d.createObjectStore(fd)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(d){d.createObjectStore(Wp,{keyPath:qO})})(e),(function(d){d.createObjectStore(Hp,{keyPath:GO})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(d){const h=d.createObjectStore(qp,{keyPath:eM});h.createIndex(nv,tM,{unique:!1}),h.createIndex(qC,nM,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(d){const h=d.createObjectStore(Yf,{keyPath:FO});h.createIndex(Af,UO),h.createIndex($C,jO)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(oa)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(d){d.createObjectStore(y_,{keyPath:KO,autoIncrement:!0}).createIndex(tv,QO,{unique:!1}),d.createObjectStore(Qc,{keyPath:YO}).createIndex(WC,XO,{unique:!1}),d.createObjectStore(Yc,{keyPath:JO}).createIndex(HC,ZO,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(Qc).clear()})).next((()=>{t.objectStore(Yc).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(d){d.createObjectStore(v_,{keyPath:rM})})(e)}))),r<18&&i>=18&&yC()&&(a=a.next((()=>{t.objectStore(Qc).clear()})).next((()=>{t.objectStore(Yc).clear()}))),a}wi(e){let t=0;return e.store(oa).ee(((r,i)=>{t+=op(i)})).next((()=>{const r={byteSize:t};return e.store(fd).put(ev,r)}))}yi(e){const t=e.store(hd),r=e.store(Nr);return t.J().next((i=>W.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,va],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ma,a).next((u=>W.forEach(u,(d=>{xe(d.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const h=ha(this.serializer,d);return QA(e,s.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(ou),r=e.store(oa);return e.store(_a).get(Xf).next((i=>{const s=[];return r.ee(((a,u)=>{const d=new st(a),h=(function(g){return[0,bn(g)]})(d);s.push(t.get(h).next((m=>m?W.resolve():(g=>t.put({targetId:0,path:bn(g),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>W.waitFor(s)))}))}bi(e,t){e.createObjectStore(pd,{keyPath:WO});const r=t.store(pd),i=new N_,s=a=>{if(i.add(a)){const u=a.lastSegment(),d=a.popLast();return r.put({collectionId:u,parent:bn(d)})}};return t.store(oa).ee({X:!0},((a,u)=>{const d=new st(a);return s(d.popLast())})).next((()=>t.store(iu).ee({X:!0},(([a,u,d],h)=>{const m=li(u);return s(m.popLast())}))))}Di(e){const t=e.store(su);return t.ee(((r,i)=>{const s=Wc(i),a=WA(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(oa),i=[];return r.ee(((s,a)=>{const u=t.store(Yf),d=(function(g){return g.document?new ye(st.fromString(g.document.name).popFirst(5)):g.noDocument?ye.fromSegments(g.noDocument.path):g.unknownDocument?ye.fromSegments(g.unknownDocument.path):Ie(36783)})(a).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(u.put(h))})).next((()=>W.waitFor(i)))}Fi(e,t){const r=t.store(Nr),i=tb(this.serializer),s=new O_(rm.mi,this.serializer.yt);return r.J().next((a=>{const u=new Map;return a.forEach((d=>{let h=u.get(d.userId)??ze();ha(this.serializer,d).keys().forEach((m=>h=h.add(m))),u.set(d.userId,h)})),W.forEach(u,((d,h)=>{const m=new cn(h),g=tm.wt(this.serializer,m),w=s.getIndexManager(m),E=nm.wt(m,this.serializer,w,s.referenceDelegate);return new nb(i,E,g,w).recalculateAndSaveOverlaysForDocumentKeys(new rv(t,Hn.ce),d).next()}))}))}}function NI(n){n.createObjectStore(ou,{keyPath:$O}).createIndex(g_,zO,{unique:!0}),n.createObjectStore(su,{keyPath:"targetId"}).createIndex(zC,BO,{unique:!0}),n.createObjectStore(_a)}const Bs="IndexedDbPersistence",dy=18e5,hy=5e3,fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",PL="main";class M_{constructor(e,t,r,i,s,a,u,d,h,m,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=u,this.xi=h,this.Oi=m,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!M_.v())throw new ge(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hL(this,i),this.$i=t+PL,this.serializer=new zA(d),this.Ui=new io(this.$i,this.Ni,new SL(this.serializer)),this.hi=new eL,this.Pi=new lL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tb(this.serializer),this.Ii=new ZM,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&Bt(Bs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(se.FAILED_PRECONDITION,fy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Hn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>df(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Io(e))return ce(Bs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(Bs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return xc(e).get(bl).next((t=>W.resolve(this.es(t))))}ts(e){return df(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,dy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=rn(t,au);return r.J().next((i=>{const s=this.ss(i,dy),a=i.filter((u=>s.indexOf(u)===-1));return W.forEach(a,(u=>r.delete(u.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?W.resolve(!0):xc(e).get(bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,hy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ge(se.FAILED_PRECONDITION,fy);return!1}}return!(!this.networkEnabled||!this.inForeground)||df(e).J().next((r=>this.ss(r,hy).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||a&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(Bs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kd,au],(e=>{const t=new rv(e,Hn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>df(e).J().next((t=>this.ss(t,dy).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return nm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aL(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return tm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ce(Bs,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(d){return d===18?oM:d===17?YC:d===16?sM:d===15?__:d===14?QC:d===13?KC:d===12?iM:d===11?GC:void Ie(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(u=>(a=new rv(u,this.ci?this.ci.next():Hn.ce),t==="readwrite-primary"?this.Hi(a).next((d=>!!d||this.Yi(a))).next((d=>{if(!d)throw Bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ge(se.FAILED_PRECONDITION,LC);return r(a)})).next((d=>this.Xi(a).next((()=>d)))):this.Is(a).next((()=>r(a)))))).then((u=>(a.raiseOnCommittedEvent(),u)))}Is(e){return xc(e).get(bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,hy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(se.FAILED_PRECONDITION,fy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xc(e).put(bl,t)}static v(){return io.v()}Zi(e){const t=xc(e);return t.get(bl).next((r=>this.es(r)?(ce(Bs,"Releasing primary lease."),t.delete(bl)):W.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;gC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ce(Bs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Bt(Bs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xc(n){return rn(n,kd)}function df(n){return rn(n,au)}function rb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class L_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ze(),i=ze();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new L_(e,t.fromCache,r,i)}}class CL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ib{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return gC()?8:UC(nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new CL;return this.Ss(e,t,a).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ll()<=qe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Ll()<=qe.DEBUG&&ce("QueryEngine","Query:",Fl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ll()<=qe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):W.resolve())}ys(e,t){if(rI(t))return W.resolve(null);let r=lr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=uv(t,null,"F"),r=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=ze(...s);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const h=this.Ds(t,u);return this.Cs(t,h,a,d.readTime)?this.ys(e,uv(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,r,i){return rI(t)||i.isEqual(ke.min())?W.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?W.resolve(null):(Ll()<=qe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fl(t)),this.vs(e,a,t,OC(i,ru)).next((u=>u)))}))}Ds(e,t){let r=new ut(yA(e));return t.forEach(((i,s)=>{Nd(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ll()<=qe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Fl(t)),this.ps.getDocumentsMatchingQuery(e,t,ur.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const F_="LocalStore",AL=3e8;class bL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new mt(Fe),this.xs=new ts((s=>Ca(s)),Dd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sb(n,e,t,r){return new bL(n,e,t,r)}async function ob(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],u=[];let d=ze();for(const h of i){a.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:u})))}))}))}function xL(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,h,m){const g=h.batch,w=g.keys();let E=W.resolve();return w.forEach((x=>{E=E.next((()=>m.getEntry(d,x))).next((R=>{const C=h.docVersions.get(x);xe(C!==null,48541),R.version.compareTo(C)<0&&(g.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),m.addEntry(R)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function ab(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function RL(n,e){const t=Ce(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const w=i.get(g);if(!w)return;u.push(t.Pi.removeMatchingKeys(s,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(s,m.addedDocuments,g))));let E=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(qt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,r)),i=i.insert(g,E),(function(R,C,j){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=AL?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(w,E,m)&&u.push(t.Pi.updateTargetData(s,E))}));let d=ar(),h=ze();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))})),u.push(kL(s,a,e.documentUpdates).next((m=>{d=m.ks,h=m.qs}))),!r.isEqual(ke.min())){const m=t.Pi.getLastRemoteSnapshotVersion(s).next((g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));u.push(m)}return W.waitFor(u).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,d,h))).next((()=>d))})).then((s=>(t.Ms=i,s)))}function kL(n,e,t){let r=ze(),i=ze();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=ar();return t.forEach(((u,d)=>{const h=s.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(ke.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):ce(F_,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)})),{ks:a,qs:i}}))}function DL(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=va),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function lp(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,W.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new Bi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function mu(n,e,t){const r=Ce(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Io(a))throw a;ce(F_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function yv(n,e,t){const r=Ce(n);let i=ke.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,m){const g=Ce(d),w=g.xs.get(m);return w!==void 0?W.resolve(g.Ms.get(w)):g.Pi.getTargetData(h,m)})(r,a,lr(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,u.targetId).next((d=>{s=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:ke.min(),t?s:ze()))).next((u=>(cb(r,gA(e),u),{documents:u,Qs:s})))))}function lb(n,e){const t=Ce(n),r=Ce(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function ub(n,e){const t=Ce(n),r=t.Os.get(e)||ke.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,OC(r,ru),Number.MAX_SAFE_INTEGER))).then((i=>(cb(t,e,i),i)))}function cb(n,e,t){let r=n.Os.get(e)||ke.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}const db="firestore_clients";function VI(n,e){return`${db}_${n}_${e}`}const hb="firestore_mutations";function OI(n,e,t){let r=`${hb}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const fb="firestore_targets";function py(n,e){return`${fb}_${n}_${e}`}const si="SharedClientState";class up{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ge(i.error.code,i.error.message))),a?new up(e,t,i.state,s):(Bt(si,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class td{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ge(r.error.code,r.error.message))),s?new td(e,r.state,i):(Bt(si,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=P_();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=jC(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new cp(e,s):(Bt(si,`Failed to parse client data for instance '${e}': ${t}`),null)}}class U_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new U_(t.clientId,t.onlineState):(Bt(si,`Failed to parse online state: ${e}`),null)}}class vv{constructor(){this.activeTargetIds=P_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class my{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new mt(Fe),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=VI(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new vv),this.ro=new RegExp(`^${db}_${a}_([^_]*)$`),this.io=new RegExp(`^${hb}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${fb}_${a}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(VI(this.persistenceKey,r));if(i){const s=cp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(py(this.persistenceKey,e));if(i){const s=td.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(py(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(si,"READ",e,t),t}setItem(e,t){ce(si,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(si,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ce(si,"EVENT",t.key,t.newValue),t.key===this.eo)return void Bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=Hn.ce;if(s!=null)try{const u=JSON.parse(s);xe(typeof u=="number",30636,{So:s}),a=u}catch(u){Bt(si,"Failed to read sequence number from WebStorage",u)}return a})(t.newValue);r!==Hn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new up(this.currentUser,e,t,r),s=OI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=OI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=py(this.persistenceKey,e),s=new td(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return cp.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return up.Ws(new cn(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return td.Ws(i,t)}uo(e){return U_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ce(si,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],u=[];return s.forEach((d=>{i.has(d)||a.push(d)})),i.forEach((d=>{s.has(d)||u.push(d)})),this.syncEngine.Fo(a,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=P_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class pb{constructor(){this.Mo=new vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NL{Oo(e){}shutdown(){}}const MI="ConnectivityMonitor";class LI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(MI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(MI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let hf=null;function _v(){return hf===null?hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():hf++,"0x"+hf.toString(16)}const gy="RestConnection",VL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Jf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=_v(),u=this.zo(e,t.toUriEncodedString());ce(gy,`Sending RPC '${e}' ${a}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,i,s);const{host:h}=new URL(u),m=To(h);return this.Jo(e,u,d,r,m).then((g=>(ce(gy,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw uo(gy,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Au})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=VL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class ML{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const In="WebChannelConnection";class LL extends OL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=_v();return new Promise(((u,d)=>{const h=new PC;h.setWithCredentials(!0),h.listenOnce(CC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Sf.NO_ERROR:const g=h.getResponseJson();ce(In,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Sf.TIMEOUT:ce(In,`RPC '${e}' ${a} timed out`),d(new ge(se.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const w=h.getStatus();if(ce(In,`RPC '${e}' ${a} failed with status:`,w,"response text:",h.getResponseText()),w>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const x=E?.error;if(x&&x.status&&x.message){const R=(function(j){const O=j.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(O)>=0?O:se.UNKNOWN})(x.status);d(new ge(R,x.message))}else d(new ge(se.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new ge(se.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ce(In,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(i);ce(In,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=_v(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xC(),u=bC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=s.join("");ce(In,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=a.createWebChannel(m,d);this.I_(g);let w=!1,E=!1;const x=new ML({Yo:C=>{E?ce(In,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(w||(ce(In,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),ce(In,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},Zo:()=>g.close()}),R=(C,j,O)=>{C.listen(j,(F=>{try{O(F)}catch(z){setTimeout((()=>{throw z}),0)}}))};return R(g,Bc.EventType.OPEN,(()=>{E||(ce(In,`RPC '${e}' stream ${i} transport opened.`),x.o_())})),R(g,Bc.EventType.CLOSE,(()=>{E||(E=!0,ce(In,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(g))})),R(g,Bc.EventType.ERROR,(C=>{E||(E=!0,uo(In,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),x.a_(new ge(se.UNAVAILABLE,"The operation could not be completed")))})),R(g,Bc.EventType.MESSAGE,(C=>{if(!E){const j=C.data[0];xe(!!j,16349);const O=j,F=O?.error||O[0]?.error;if(F){ce(In,`RPC '${e}' stream ${i} received error:`,F);const z=F.status;let ne=(function(S){const k=Yt[S];if(k!==void 0)return xA(k)})(z),Z=F.message;ne===void 0&&(ne=se.INTERNAL,Z="Unknown error status: "+z+" with message "+F.message),E=!0,x.a_(new ge(ne,Z)),g.close()}else ce(In,`RPC '${e}' stream ${i} received:`,j),x.u_(j)}})),R(u,AC.STAT_EVENT,(C=>{C.stat===Xy.PROXY?ce(In,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Xy.NOPROXY&&ce(In,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mb(){return typeof window<"u"?window:null}function Vf(){return typeof document<"u"?document:null}function im(n){return new $M(n,!0)}class gb{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const FI="PersistentStream";class yb{constructor(e,t,r,i,s,a,u,d){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Bt(t.toString()),Bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(FI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(FI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FL extends yb{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=HM(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ke.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ke.min():a.readTime?On(a.readTime):ke.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=hv(this.serializer),t.addTarget=(function(s,a){let u;const d=a.target;if(u=ep(d)?{documents:LA(s,d)}:{query:FA(s,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=DA(s,a.resumeToken);const h=cv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(ke.min())>0){u.readTime=pu(s,a.snapshotVersion.toTimestamp());const h=cv(s,a.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const r=GM(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=hv(this.serializer),t.removeTarget=e,this.q_(t)}}class UL extends yb{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qM(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=hv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>rp(this.serializer,r)))};this.q_(t)}}class jL{}class BL extends jL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,dv(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(se.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,dv(t,r),i,a,u,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(se.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $L{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bt(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ra="RemoteStore";class zL{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{La(this)&&(ce(Ra,"Restarting streams for network reachability change."),await(async function(d){const h=Ce(d);h.Ea.add(4),await Md(h),h.Ra.set("Unknown"),h.Ea.delete(4),await sm(h)})(this))}))})),this.Ra=new $L(r,i)}}async function sm(n){if(La(n))for(const e of n.da)await e(!0)}async function Md(n){for(const e of n.da)await e(!1)}function om(n,e){const t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$_(t)?B_(t):Ru(t).O_()&&j_(t,e))}function gu(n,e){const t=Ce(n),r=Ru(t);t.Ia.delete(e),r.O_()&&vb(t,e),t.Ia.size===0&&(r.O_()?r.L_():La(t)&&t.Ra.set("Unknown"))}function j_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ru(n).Y_(e)}function vb(n,e){n.Va.Ue(e),Ru(n).Z_(e)}function B_(n){n.Va=new FM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ru(n).start(),n.Ra.ua()}function $_(n){return La(n)&&!Ru(n).x_()&&n.Ia.size>0}function La(n){return Ce(n).Ea.size===0}function _b(n){n.Va=void 0}async function WL(n){n.Ra.set("Online")}async function HL(n){n.Ia.forEach(((e,t)=>{j_(n,e)}))}async function qL(n,e){_b(n),$_(n)?(n.Ra.ha(e),B_(n)):n.Ra.set("Unknown")}async function GL(n,e,t){if(n.Ra.set("Online"),e instanceof kA&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.Va.removeTarget(u))})(n,e)}catch(r){ce(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dp(n,r)}else if(e instanceof Df?n.Va.Ze(e):e instanceof RA?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const r=await ab(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const u=s.Va.Tt(a);return u.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,h)=>{const m=s.Ia.get(d);if(!m)return;s.Ia.set(d,m.withResumeToken(qt.EMPTY_BYTE_STRING,m.snapshotVersion)),vb(s,d);const g=new Bi(m.target,d,h,m.sequenceNumber);j_(s,g)})),s.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){ce(Ra,"Failed to raise snapshot:",r),await dp(n,r)}}async function dp(n,e,t){if(!Io(e))throw e;n.Ea.add(1),await Md(n),n.Ra.set("Offline"),t||(t=()=>ab(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(Ra,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await sm(n)}))}function wb(n,e){return e().catch((t=>dp(n,t,e)))}async function xu(n){const e=Ce(n),t=fo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:va;for(;KL(e);)try{const i=await DL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,QL(e,i)}catch(i){await dp(e,i)}Tb(e)&&Eb(e)}function KL(n){return La(n)&&n.Ta.length<10}function QL(n,e){n.Ta.push(e);const t=fo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Tb(n){return La(n)&&!fo(n).x_()&&n.Ta.length>0}function Eb(n){fo(n).start()}async function YL(n){fo(n).ra()}async function XL(n){const e=fo(n);for(const t of n.Ta)e.ea(t.mutations)}async function JL(n,e,t){const r=n.Ta.shift(),i=b_.from(r,e,t);await wb(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await xu(n)}async function ZL(n,e){e&&fo(n).X_&&await(async function(r,i){if((function(a){return OM(a)&&a!==se.ABORTED})(i.code)){const s=r.Ta.shift();fo(r).B_(),await wb(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await xu(r)}})(n,e),Tb(n)&&Eb(n)}async function UI(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),ce(Ra,"RemoteStore received new credentials");const r=La(t);t.Ea.add(3),await Md(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sm(t)}async function wv(n,e){const t=Ce(n);e?(t.Ea.delete(2),await sm(t)):e||(t.Ea.add(2),await Md(t),t.Ra.set("Unknown"))}function Ru(n){return n.ma||(n.ma=(function(t,r,i){const s=Ce(t);return s.sa(),new FL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:WL.bind(null,n),t_:HL.bind(null,n),r_:qL.bind(null,n),H_:GL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),$_(n)?B_(n):n.Ra.set("Unknown")):(await n.ma.stop(),_b(n))}))),n.ma}function fo(n){return n.fa||(n.fa=(function(t,r,i){const s=Ce(t);return s.sa(),new UL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:YL.bind(null,n),r_:ZL.bind(null,n),ta:XL.bind(null,n),na:JL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xu(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(Ra,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class z_{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,u=new z_(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(n,e){if(Bt("AsyncQueue",`${e}: ${n}`),Io(n))return new ge(se.UNAVAILABLE,`${e}: ${n}`);throw n}class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=$c(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jI{constructor(){this.ga=new mt(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class yu{constructor(e,t,r,i,s,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((u=>{a.push({type:0,doc:u})})),new yu(e,t,Ql.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class e2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class t2{constructor(){this.queries=BI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ce(t),s=i.queries;i.queries=BI(),s.forEach(((a,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new ge(se.ABORTED,"Firestore shutting down"))}}function BI(){return new ts((n=>mA(n)),Xp)}async function Ib(n,e){const t=Ce(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new e2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const u=am(a,`Initialization of query '${Fl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&W_(t)}async function Sb(n,e){const t=Ce(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function n2(n,e){const t=Ce(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const u of a.Sa)u.Fa(i)&&(r=!0);a.wa=i}}r&&W_(t)}function r2(n,e,t){const r=Ce(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function W_(n){n.Ca.forEach((e=>{e.next()}))}var Tv,$I;($I=Tv||(Tv={})).Ma="default",$I.Cache="cache";class Pb{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tv.Cache}}class Cb{constructor(e){this.key=e}}class Ab{constructor(e){this.key=e}}class i2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=yA(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new jI,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const w=i.get(m),E=Nd(this.query,g)?g:null,x=!!w&&this.mutatedKeys.has(w.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;w&&E?w.data.isEqual(E.data)?x!==R&&(r.track({type:3,doc:E}),C=!0):this.su(w,E)||(r.track({type:2,doc:E}),C=!0,(d&&this.eu(E,d)>0||h&&this.eu(E,h)<0)&&(u=!0)):!w&&E?(r.track({type:0,doc:E}),C=!0):w&&!E&&(r.track({type:1,doc:w}),C=!0,(d||h)&&(u=!0)),C&&(E?(a=a.add(E),s=R?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,g)=>(function(E,x){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:C})}};return R(E)-R(x)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),i=i??!1;const u=t&&!i?this._u():[],d=this.Xa.size===0&&this.current&&!i?1:0,h=d!==this.Za;return this.Za=d,a.length!==0||h?{snapshot:new yu(this.query,e.tu,s,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Ab(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Cb(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ku="SyncEngine";class s2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o2{constructor(e){this.key=e,this.hu=!1}}class a2{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ts((u=>mA(u)),Xp),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ye.comparator),this.Au=new Map,this.Ru=new V_,this.Vu={},this.mu=new Map,this.fu=xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function l2(n,e,t=!0){const r=lm(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await bb(r,e,t,!0),i}async function u2(n,e){const t=lm(n);await bb(t,e,!0,!1)}async function bb(n,e,t,r){const i=await lp(n.localStore,lr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await H_(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&om(n.remoteStore,i),u}async function H_(n,e,t,r,i){n.pu=(g,w,E)=>(async function(R,C,j,O){let F=C.view.ru(j);F.Cs&&(F=await yv(R.localStore,C.query,!1).then((({documents:P})=>C.view.ru(P,F))));const z=O&&O.targetChanges.get(C.targetId),ne=O&&O.targetMismatches.get(C.targetId)!=null,Z=C.view.applyChanges(F,R.isPrimaryClient,z,ne);return Ev(R,C.targetId,Z.au),Z.snapshot})(n,g,w,E);const s=await yv(n.localStore,e,!0),a=new i2(e,s.Qs),u=a.ru(s.documents),d=Od.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,d);Ev(n,t,h.au);const m=new s2(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function c2(n,e,t){const r=Ce(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Xp(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&gu(r.remoteStore,i.targetId),vu(r,i.targetId)})).catch(Eo)):(vu(r,i.targetId),await mu(r.localStore,i.targetId,!0))}async function d2(n,e){const t=Ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gu(t.remoteStore,r.targetId))}async function h2(n,e,t){const r=Q_(n);try{const i=await(function(a,u){const d=Ce(a),h=lt.now(),m=u.reduce(((E,x)=>E.add(x.key)),ze());let g,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let x=ar(),R=ze();return d.Ns.getEntries(E,m).next((C=>{x=C,x.forEach(((j,O)=>{O.isValidDocument()||(R=R.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,x))).next((C=>{g=C;const j=[];for(const O of u){const F=NM(O,g.get(O.key).overlayedDocument);F!=null&&j.push(new ns(O.key,F,oA(F.value.mapValue),An.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,j,u)})).next((C=>{w=C;const j=C.applyToLocalDocumentSet(g,R);return d.documentOverlayCache.saveOverlays(E,C.batchId,j)}))})).then((()=>({batchId:w.batchId,changes:_A(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let h=a.Vu[a.currentUser.toKey()];h||(h=new mt(Fe)),h=h.insert(u,d),a.Vu[a.currentUser.toKey()]=h})(r,i.batchId,t),await Po(r,i.changes),await xu(r.remoteStore)}catch(i){const s=am(i,"Failed to persist write");t.reject(s)}}async function xb(n,e){const t=Ce(n);try{const r=await RL(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?xe(a.hu,14607):i.removedDocuments.size>0&&(xe(a.hu,42227),a.hu=!1))})),await Po(t,r,e)}catch(r){await Eo(r)}}function zI(n,e,t){const r=Ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){const d=Ce(a);d.onlineState=u;let h=!1;d.queries.forEach(((m,g)=>{for(const w of g.Sa)w.va(u)&&(h=!0)})),h&&W_(d)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function f2(n,e,t){const r=Ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new mt(ye.comparator);a=a.insert(s,Ot.newNoDocument(s,ke.min()));const u=ze().add(s),d=new Vd(ke.min(),new Map,new mt(Fe),a,u);await xb(r,d),r.du=r.du.remove(s),r.Au.delete(e),K_(r)}else await mu(r.localStore,e,!1).then((()=>vu(r,e,t))).catch(Eo)}async function p2(n,e){const t=Ce(n),r=e.batch.batchId;try{const i=await xL(t.localStore,e);G_(t,r,null),q_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Po(t,i)}catch(i){await Eo(i)}}async function m2(n,e,t){const r=Ce(n);try{const i=await(function(a,u){const d=Ce(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next((g=>(xe(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(h,g)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);G_(r,e,t),q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Po(r,i)}catch(i){await Eo(i)}}function q_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function G_(n,e,t){const r=Ce(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function vu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Rb(n,r)}))}function Rb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(gu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),K_(n))}function Ev(n,e,t){for(const r of t)r instanceof Cb?(n.Ru.addReference(r.key,e),g2(n,r)):r instanceof Ab?(ce(ku,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Rb(n,r.key)):Ie(19791,{wu:r})}function g2(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ce(ku,"New document in limbo: "+t),n.Eu.add(r),K_(n))}function K_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(st.fromString(e)),r=n.fu.next();n.Au.set(r,new o2(t)),n.du=n.du.insert(t,r),om(n.remoteStore,new Bi(lr(Yp(t.path)),r,"TargetPurposeLimboResolution",Hn.ce))}}async function Po(n,e,t){const r=Ce(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{a.push(r.pu(d,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=L_.As(d.targetId,h);s.push(m)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(d,h){const m=Ce(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>W.forEach(h,(w=>W.forEach(w.Es,(E=>m.persistence.referenceDelegate.addReference(g,w.targetId,E))).next((()=>W.forEach(w.ds,(E=>m.persistence.referenceDelegate.removeReference(g,w.targetId,E)))))))))}catch(g){if(!Io(g))throw g;ce(F_,"Failed to update sequence numbers: "+g)}for(const g of h){const w=g.targetId;if(!g.fromCache){const E=m.Ms.get(w),x=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(x);m.Ms=m.Ms.insert(w,R)}}})(r.localStore,s))}async function y2(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){ce(ku,"User change. New user:",e.toKey());const r=await ob(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((u=>{u.forEach((d=>{d.reject(new ge(se.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Po(t,r.Ls)}}function v2(n,e){const t=Ce(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const u=t.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}async function _2(n,e){const t=Ce(n),r=await yv(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Ev(t,e.targetId,i.au),i}async function w2(n,e){const t=Ce(n);return ub(t.localStore,e).then((r=>Po(t,r)))}async function T2(n,e,t,r){const i=Ce(n),s=await(function(u,d){const h=Ce(u),m=Ce(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>m.er(g,d).next((w=>w?h.localDocuments.getDocuments(g,w):W.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await xu(i.remoteStore):t==="acknowledged"||t==="rejected"?(G_(i,e,r||null),q_(i,e),(function(u,d){Ce(Ce(u).mutationQueue).ir(d)})(i.localStore,e)):Ie(6720,"Unknown batchState",{Su:t}),await Po(i,s)):ce(ku,"Cannot apply mutation batch with id: "+e)}async function E2(n,e){const t=Ce(n);if(lm(t),Q_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await WI(t,r.toArray());t.gu=!0,await wv(t.remoteStore,!0);for(const s of i)om(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(vu(t,a),mu(t.localStore,a,!0)))),gu(t.remoteStore,a)})),await i,await WI(t,r),(function(a){const u=Ce(a);u.Au.forEach(((d,h)=>{gu(u.remoteStore,h)})),u.Ru.Jr(),u.Au=new Map,u.du=new mt(ye.comparator)})(t),t.gu=!1,await wv(t.remoteStore,!1)}}async function WI(n,e,t){const r=Ce(n),i=[],s=[];for(const a of e){let u;const d=r.Iu.get(a);if(d&&d.length!==0){u=await lp(r.localStore,lr(d[0]));for(const h of d){const m=r.Tu.get(h),g=await _2(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await lb(r.localStore,a);u=await lp(r.localStore,h),await H_(r,kb(h),a,!1,u.resumeToken)}i.push(u)}return r.Pu.H_(s),i}function kb(n){return pA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function I2(n){return(function(t){return Ce(Ce(t).persistence).Ts()})(Ce(n).localStore)}async function S2(n,e,t,r){const i=Ce(n);if(i.gu)return void ce(ku,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await ub(i.localStore,gA(s[0])),u=Vd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",qt.EMPTY_BYTE_STRING);await Po(i,a,u);break}case"rejected":await mu(i.localStore,e,!0),vu(i,e,r);break;default:Ie(64155,t)}}async function P2(n,e,t){const r=lm(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ce(ku,"Adding an already active target "+i);continue}const s=await lb(r.localStore,i),a=await lp(r.localStore,s);await H_(r,kb(s),a.targetId,!1,a.resumeToken),om(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await mu(r.localStore,i,!1).then((()=>{gu(r.remoteStore,i),vu(r,i)})).catch(Eo)}}function lm(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f2.bind(null,e),e.Pu.H_=n2.bind(null,e.eventManager),e.Pu.yu=r2.bind(null,e.eventManager),e}function Q_(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m2.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sb(this.persistence,new ib,e.initialUser,this.serializer)}Cu(e){return new O_(rm.mi,this.serializer)}Du(e){return new pb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class C2 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xe(this.persistence.referenceDelegate instanceof ap,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new O_((r=>ap.mi(r,t)),this.serializer)}}class Db extends wd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Q_(this.xu.syncEngine),await xu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return sb(this.persistence,new ib,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new JA(r,e.asyncQueue,t)}Mu(e,t){const r=new VO(t,this.persistence);return new NO(e.asyncQueue,r)}Cu(e){const t=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new M_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mb(),Vf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new pb}}class A2 extends Db{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof my&&(this.sharedClientState.syncEngine={Co:T2.bind(null,t),vo:S2.bind(null,t),Fo:P2.bind(null,t),Ts:I2.bind(null,t),Do:w2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await E2(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=mb();if(!my.v(t))throw new ge(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new my(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Td{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=y2.bind(null,this.syncEngine),await wv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new t2})()}createDatastore(e){const t=im(e.databaseInfo.databaseId),r=(function(s){return new LL(s)})(e.databaseInfo);return(function(s,a,u,d){return new BL(s,a,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,u){return new zL(r,i,s,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>zI(this.syncEngine,t,0)),(function(){return LI.v()?new LI:new NL})())}createSyncEngine(e,t){return(function(i,s,a,u,d,h,m){const g=new a2(i,s,a,u,d,h);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ce(t);ce(Ra,"RemoteStore shutting down."),r.Ea.add(5),await Md(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Td.provider={build:()=>new Td};class Nb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const po="FirestoreClient";class b2{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cn.UNAUTHENTICATED,this.clientId=h_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{ce(po,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ce(po,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=am(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yy(n,e){n.asyncQueue.verifyOperationInProgress(),ce(po,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await ob(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function HI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Vb(n);ce(po,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>UI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>UI(e.remoteStore,i))),n._onlineComponents=e}async function Vb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(po,"Using user provided OfflineComponentProvider");try{await yy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;uo("Error using user provided cache. Falling back to memory cache: "+t),await yy(n,new wd)}}else ce(po,"Using default OfflineComponentProvider"),await yy(n,new C2(void 0));return n._offlineComponents}async function Ob(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(po,"Using user provided OnlineComponentProvider"),await HI(n,n._uninitializedComponentsProvider._online)):(ce(po,"Using default OnlineComponentProvider"),await HI(n,new Td))),n._onlineComponents}function x2(n){return Vb(n).then((e=>e.localStore))}function R2(n){return Ob(n).then((e=>e.syncEngine))}async function Mb(n){const e=await Ob(n),t=e.eventManager;return t.onListen=l2.bind(null,e.syncEngine),t.onUnlisten=c2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=u2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d2.bind(null,e.syncEngine),t}function k2(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,s,a){try{const u=await(function(h,m){const g=Ce(h);return g.persistence.runTransaction("read document","readonly",(w=>g.localDocuments.getDocument(w,m)))})(i,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ge(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=am(u,`Failed to get document '${s} from cache`);a.reject(d)}})(await x2(n),e,t))),t.promise}function D2(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new Nb({next:w=>{m.Nu(),a.enqueueAndForget((()=>Sb(s,g)));const E=w.docs.has(u);!E&&w.fromCache?h.reject(new ge(se.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&d&&d.source==="server"?h.reject(new ge(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Pb(Yp(u.path),m,{includeMetadataChanges:!0,qa:!0});return Ib(s,g)})(await Mb(n),n.asyncQueue,e,t,r))),r.promise}function N2(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,u,d,h){const m=new Nb({next:w=>{m.Nu(),a.enqueueAndForget((()=>Sb(s,g))),w.fromCache&&d.source==="server"?h.reject(new ge(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),g=new Pb(u,m,{includeMetadataChanges:!0,qa:!0});return Ib(s,g)})(await Mb(n),n.asyncQueue,e,t,r))),r.promise}function Lb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const qI=new Map;const Fb="firestore.googleapis.com",GI=!0;class KI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fb,this.ssl=GI}else this.host=e.host,this.ssl=e.ssl??GI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uL)throw new ge(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class um{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new wO;switch(r.type){case"firstParty":return new SO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=qI.get(t);r&&(ce("ComponentProvider","Removing Datastore"),qI.delete(t),r.terminate())})(this),Promise.resolve()}}function V2(n,e,t,r={}){n=Kn(n,um);const i=To(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;i&&(o_(`https://${u}`),a_("Firestore",!0)),s.host!==Fb&&s.host!==u&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...s,host:u,ssl:i,emulatorOptions:r};if(!Ea(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=cn.MOCK_USER;else{h=KN(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ge(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new cn(g)}n._authCredentials=new TO(new kC(h,m))}}class cm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cm(this.firestore,e,this._query)}}class zt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Rd(t,zt._jsonSchema))return new zt(e,r||null,new ye(st.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Zt("string",zt._jsonSchemaVersion),referencePath:Zt("string")};class so extends cm{constructor(e,t,r){super(e,t,Yp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new ye(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function Mt(n,e,...t){if(n=pt(n),NC("collection","path",e),n instanceof um){const r=st.fromString(e,...t);return FE(r),new so(n,null,r)}{if(!(n instanceof zt||n instanceof so))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return FE(r),new so(n.firestore,null,r)}}function gn(n,e,...t){if(n=pt(n),arguments.length===1&&(e=h_.newId()),NC("doc","path",e),n instanceof um){const r=st.fromString(e,...t);return LE(r),new zt(n,null,new ye(r))}{if(!(n instanceof zt||n instanceof so))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return LE(r),new zt(n.firestore,n instanceof so?n.converter:null,new ye(r))}}const QI="AsyncQueue";class YI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gb(this,"async_queue_retry"),this._c=()=>{const r=Vf();r&&ce(QI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Vf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Vf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Or;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;ce(QI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Bt("INTERNAL UNHANDLED ERROR: ",XI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=z_.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ie(47125,{Pc:XI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function XI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class rs extends um{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new YI,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YI(e),this._firestoreClient=void 0,await e}}}function O2(n,e){const t=typeof n=="object"?n:c_(),r=typeof n=="string"?n:Jf,i=Bp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hC("firestore");s&&V2(i,...s)}return i}function dm(n){if(n._terminated)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ub(n),n._firestoreClient}function Ub(n){const e=n._freezeSettings(),t=(function(i,s,a,u){return new lM(i,s,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Lb(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new b2(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function M2(n,e){uo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return jb(n,Td.provider,{build:r=>new Db(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function L2(n){uo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();jb(n,Td.provider,{build:t=>new A2(t,e.cacheSizeBytes)})}function jb(n,e,t){if((n=Kn(n,rs))._firestoreClient||n._terminated)throw new ge(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ge(se.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Ub(n)}class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(qt.fromBase64String(e))}catch(t){throw new ge(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tr(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rd(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:Zt("string",Tr._jsonSchemaVersion),bytes:Zt("string")};class hm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Y_{constructor(e){this._methodName=e}}class di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(Rd(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Zt("string",di._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};class hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rd(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hi(e.vectorValues);throw new ge(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:Zt("string",hi._jsonSchemaVersion),vectorValues:Zt("object")};const F2=/^__.*__$/;class U2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,t,this.fieldTransforms):new bu(e,this.data,t,this.fieldTransforms)}}class Bb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ns(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $b(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class X_{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new X_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($b(this.Ac)&&F2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||im(e)}Cc(e,t,r,i=!1){return new X_({Ac:e,methodName:t,Dc:r,path:bt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J_(n){const e=n._freezeSettings(),t=im(n._databaseId);return new j2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zb(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Z_("Data must be an object, but it was:",a,r);const u=Wb(r,a);let d,h;if(s.merge)d=new qn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const w=Iv(e,g,t);if(!a.contains(w))throw new ge(se.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);qb(m,w)||m.push(w)}d=new qn(m),h=a.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,h=a.fieldTransforms;return new U2(new Cn(u),d,h)}class Ld extends Y_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}function B2(n,e,t,r){const i=n.Cc(1,e,t);Z_("Data must be an object, but it was:",i,r);const s=[],a=Cn.empty();So(r,((d,h)=>{const m=ew(e,d,t);h=pt(h);const g=i.yc(m);if(h instanceof Ld)s.push(m);else{const w=fm(h,g);w!=null&&(s.push(m),a.set(m,w))}}));const u=new qn(s);return new Bb(a,u,i.fieldTransforms)}function $2(n,e,t,r,i,s){const a=n.Cc(1,e,t),u=[Iv(e,r,t)],d=[i];if(s.length%2!=0)throw new ge(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)u.push(Iv(e,s[w])),d.push(s[w+1]);const h=[],m=Cn.empty();for(let w=u.length-1;w>=0;--w)if(!qb(h,u[w])){const E=u[w];let x=d[w];x=pt(x);const R=a.yc(E);if(x instanceof Ld)h.push(E);else{const C=fm(x,R);C!=null&&(h.push(E),m.set(E,C))}}const g=new qn(h);return new Bb(m,g,a.fieldTransforms)}function fm(n,e){if(Hb(n=pt(n)))return Z_("Unsupported field value:",e,n),Wb(n,e);if(n instanceof Y_)return(function(r,i){if(!$b(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const u of r){let d=fm(u,i.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:pu(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pu(i.serializer,s)}}if(r instanceof di)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:DA(i.serializer,r._byteString)};if(r instanceof zt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:k_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hi)return(function(a,u){return{mapValue:{fields:{[T_]:{stringValue:E_},[lu]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return C_(u.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${f_(r)}`)})(n,e)}function Wb(n,e){const t={};return XC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((r,i)=>{const s=fm(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Hb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof di||n instanceof Tr||n instanceof zt||n instanceof Y_||n instanceof hi)}function Z_(n,e,t){if(!Hb(t)||!VC(t)){const r=f_(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Iv(n,e,t){if((e=pt(e))instanceof hm)return e._internalPath;if(typeof e=="string")return ew(n,e);throw hp("Field path arguments must be of type string or ",n,!1,void 0,t)}const z2=new RegExp("[~\\*/\\[\\]]");function ew(n,e,t){if(e.search(z2)>=0)throw hp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hm(...e.split("."))._internalPath}catch{throw hp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ge(se.INVALID_ARGUMENT,u+n+d)}function qb(n,e){return n.some((t=>t.isEqual(e)))}class Gb{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class W2 extends Gb{data(){return super.data()}}function Kb(n,e){return typeof e=="string"?ew(n,e):e instanceof hm?e._internalPath:e._delegate._internalPath}function H2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q2{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return So(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[lu].arrayValue?.values?.map((r=>St(r.doubleValue)));return new hi(t)}convertGeoPoint(e){return new di(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){const t=Ki(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=st.fromString(e);xe($A(r),9688,{name:e});const i=new Pa(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||Bt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Qb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oo extends Gb{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",oo._jsonSchema={type:Zt("string",oo._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class Of extends oo{data(e={}){return super.data(e)}}class Yl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $l(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Of(this._firestore,this._userDataWriter,r.key,r,new $l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{const d=new Of(i._firestore,i._userDataWriter,u.doc.key,u.doc,new $l(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const d=new Of(i._firestore,i._userDataWriter,u.doc.key,u.doc,new $l(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:G2(u.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function G2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}function pm(n){n=Kn(n,zt);const e=Kn(n.firestore,rs);return D2(dm(e),n._key).then((t=>Q2(e,n,t)))}Yl._jsonSchemaVersion="firestore/querySnapshot/1.0",Yl._jsonSchema={type:Zt("string",Yl._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class tw extends q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function K2(n){n=Kn(n,zt);const e=Kn(n.firestore,rs),t=dm(e),r=new tw(e);return k2(t,n._key).then((i=>new oo(e,r,n._key,i,new $l(i!==null&&i.hasLocalMutations,!0),n.converter)))}function yn(n){n=Kn(n,cm);const e=Kn(n.firestore,rs),t=dm(e),r=new tw(e);return H2(n._query),N2(t,n._query).then((i=>new Yl(e,r,n,i)))}function Ed(n,e,t){n=Kn(n,zt);const r=Kn(n.firestore,rs),i=Qb(n.converter,e,t);return mm(r,[zb(J_(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,An.none())])}function mo(n,e,t,...r){n=Kn(n,zt);const i=Kn(n.firestore,rs),s=J_(i);let a;return a=typeof(e=pt(e))=="string"||e instanceof hm?$2(s,"updateDoc",n._key,e,t,r):B2(s,"updateDoc",n._key,e),mm(i,[a.toMutation(n._key,An.exists(!0))])}function go(n){return mm(Kn(n.firestore,rs),[new em(n._key,An.none())])}function zl(n,e){const t=Kn(n.firestore,rs),r=gn(n),i=Qb(n.converter,e);return mm(t,[zb(J_(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then((()=>r))}function mm(n,e){return(function(r,i){const s=new Or;return r.asyncQueue.enqueueAndForget((async()=>h2(await R2(r),i,s))),s.promise})(dm(n),e)}function Q2(n,e,t){const r=t.docs.get(e._key),i=new tw(n);return new oo(n,i,e._key,r,new $l(t.hasPendingWrites,t.fromCache),e.converter)}function Y2(){return new Ld("deleteField")}(function(e,t=!0){(function(i){Au=i})(Cu),Ia(new lo("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new rs(new EO(r.getProvider("auth-internal")),new PO(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(h.options.projectId,m)})(a,i),a);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),ci(NE,VE,e),ci(NE,VE,"esm2020")})();function Yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X2=Yb,Xb=new bd("auth","Firebase",Yb());const fp=new l_("@firebase/auth");function J2(n,...e){fp.logLevel<=qe.WARN&&fp.warn(`Auth (${Cu}): ${n}`,...e)}function Mf(n,...e){fp.logLevel<=qe.ERROR&&fp.error(`Auth (${Cu}): ${n}`,...e)}function Mr(n,...e){throw nw(n,...e)}function fi(n,...e){return nw(n,...e)}function Jb(n,e,t){const r={...X2(),[e]:t};return new bd("auth","Firebase",r).create(e,{appName:n.name})}function pi(n){return Jb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Xb.create(n,...e)}function De(n,e,...t){if(!n)throw nw(e,...t)}function $i(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Mf(e),new Error(e)}function Yi(n,e){n||$i(e)}function Sv(){return typeof self<"u"&&self.location?.href||""}function Z2(){return JI()==="http:"||JI()==="https:"}function JI(){return typeof self<"u"&&self.location?.protocol||null}function eF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z2()||ZN()||"connection"in navigator)?navigator.onLine:!0}function tF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Fd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yi(t>e,"Short delay should be less than long delay!"),this.isMobile=XN()||eV()}get(){return eF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rw(n,e){Yi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Zb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const rF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iF=new Fd(3e4,6e4);function is(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Lr(n,e,t,r,i={}){return ex(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=xd({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...s};return JN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&To(n.emulatorConfig.host)&&(h.credentials="include"),Zb.fetch()(await tx(n,n.config.apiHost,t,u),h)})}async function ex(n,e,t){n._canInitEmulator=!1;const r={...nF,...e};try{const i=new oF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ff(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw ff(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw ff(n,"user-disabled",a);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Jb(n,m,h);Mr(n,m)}}catch(i){if(i instanceof _i)throw i;Mr(n,"network-request-failed",{message:String(i)})}}async function Ud(n,e,t,r,i={}){const s=await Lr(n,e,t,r,i);return"mfaPendingCredential"in s&&Mr(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function tx(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?rw(n.config,i):`${n.config.apiScheme}://${i}`;return rF.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function sF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fi(this.auth,"network-request-failed")),iF.get())})}}function ff(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=fi(n,e,r);return i.customData._tokenResponse=t,i}function ZI(n){return n!==void 0&&n.enterprise!==void 0}class aF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lF(n,e){return Lr(n,"GET","/v2/recaptchaConfig",is(n,e))}async function uF(n,e){return Lr(n,"POST","/v1/accounts:delete",e)}async function pp(n,e){return Lr(n,"POST","/v1/accounts:lookup",e)}function nd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cF(n,e=!1){const t=pt(n),r=await t.getIdToken(e),i=iw(r);De(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:nd(vy(i.auth_time)),issuedAtTime:nd(vy(i.iat)),expirationTime:nd(vy(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function vy(n){return Number(n)*1e3}function iw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const i=uC(t);return i?JSON.parse(i):(Mf("Failed to decode base64 JWT payload"),null)}catch(i){return Mf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eS(n){const e=iw(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ka(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof _i&&dF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function dF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class hF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Pv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function mp(n){const e=n.auth,t=await n.getIdToken(),r=await ka(n,pp(e,{idToken:t}));De(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?nx(i.providerUserInfo):[],a=pF(n.providerData,s),u=n.isAnonymous,d=!(n.email&&i.passwordHash)&&!a?.length,h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Pv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function fF(n){const e=pt(n);await mp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function mF(n,e){const t=await ex(n,{},async()=>{const r=xd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await tx(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&To(n.emulatorConfig.host)&&(d.credentials="include"),Zb.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gF(n,e){return Lr(n,"POST","/v2/accounts:revokeToken",is(n,e))}class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=eS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await mF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Xl;return r&&(De(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(De(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return $i("not implemented")}}function $s(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Vr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new hF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ka(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cF(this,e)}reload(){return fF(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await ka(this,uF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:w,isAnonymous:E,providerData:x,stsTokenManager:R}=t;De(g&&R,e,"internal-error");const C=Xl.fromJSON(this.name,R);De(typeof g=="string",e,"internal-error"),$s(r,e.name),$s(i,e.name),De(typeof w=="boolean",e,"internal-error"),De(typeof E=="boolean",e,"internal-error"),$s(s,e.name),$s(a,e.name),$s(u,e.name),$s(d,e.name),$s(h,e.name),$s(m,e.name);const j=new Vr({uid:g,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:s,tenantId:u,stsTokenManager:C,createdAt:h,lastLoginAt:m});return x&&Array.isArray(x)&&(j.providerData=x.map(O=>({...O}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Xl;i.updateFromServerResponse(t);const s=new Vr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mp(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];De(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?nx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Xl;u.updateFromIdToken(r);const d=new Vr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Pv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(d,h),d}}const tS=new Map;function zi(n){Yi(n instanceof Function,"Expected a class definition");let e=tS.get(n);return e?(Yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tS.set(n,e),e)}class rx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rx.type="NONE";const nS=rx;function Lf(n,e,t){return`firebase:${n}:${e}:${t}`}class Jl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Lf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Lf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pp(this.auth,{idToken:e}).catch(()=>{});return t?Vr._fromGetAccountInfoResponse(this.auth,t,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Jl(zi(nS),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||zi(nS);const a=Lf(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(a);if(m){let g;if(typeof m=="string"){const w=await pp(e,{idToken:m}).catch(()=>{});if(!w)break;g=await Vr._fromGetAccountInfoResponse(e,w,m)}else g=Vr._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Jl(s,e,r):(s=d[0],u&&await s._set(a,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Jl(s,e,r))}}function rS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ax(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ix(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ux(e))return"Blackberry";if(cx(e))return"Webos";if(sx(e))return"Safari";if((e.includes("chrome/")||ox(e))&&!e.includes("edge/"))return"Chrome";if(lx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ix(n=nn()){return/firefox\//i.test(n)}function sx(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ox(n=nn()){return/crios\//i.test(n)}function ax(n=nn()){return/iemobile/i.test(n)}function lx(n=nn()){return/android/i.test(n)}function ux(n=nn()){return/blackberry/i.test(n)}function cx(n=nn()){return/webos/i.test(n)}function sw(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yF(n=nn()){return sw(n)&&!!window.navigator?.standalone}function vF(){return tV()&&document.documentMode===10}function dx(n=nn()){return sw(n)||lx(n)||cx(n)||ux(n)||/windows phone/i.test(n)||ax(n)}function hx(n,e=[]){let t;switch(n){case"Browser":t=rS(nn());break;case"Worker":t=`${rS(nn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cu}/${r}`}class _F{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,u)=>{try{const d=e(s);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function wF(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",is(n,e))}const TF=6;class EF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??TF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class IF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iS(this),this.idTokenSubscription=new iS(this),this.beforeStateQueue=new _F(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pp(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(pi(this));const t=e?pt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wF(this),t=new EF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await gF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zi(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&J2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Co(n){return pt(n)}class iS{constructor(e){this.auth=e,this.observer=null,this.addObserver=aV(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SF(n){gm=n}function fx(n){return gm.loadJS(n)}function PF(){return gm.recaptchaEnterpriseScript}function CF(){return gm.gapiScript}function AF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class bF{constructor(){this.enterprise=new xF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class xF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const RF="recaptcha-enterprise",px="NO_RECAPTCHA";class kF{constructor(e){this.type=RF,this.auth=Co(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{lF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new aF(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,a,u){const d=window.grecaptcha;ZI(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(px)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&ZI(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=PF();d.length!==0&&(d+=u),fx(d).then(()=>{i(u,s,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function sS(n,e,t,r=!1,i=!1){const s=new kF(n);let a;if(i)a=px;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function gp(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await sS(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await sS(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function DF(n,e){const t=Bp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ea(s,e??{}))return i;Mr(i,"already-initialized")}return t.initialize({options:e})}function NF(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function VF(n,e,t){const r=Co(n);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=mx(e),{host:a,port:u}=OF(e),d=u===null?"":`:${u}`,h={url:`${s}//${a}${d}/`},m=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(Ea(h,r.config.emulator)&&Ea(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,To(a)?(o_(`${s}//${a}${d}`),a_("Auth",!0)):MF()}function mx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OF(n){const e=mx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:oS(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:oS(a)}}}function oS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class ow{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,t){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}async function LF(n,e){return Lr(n,"POST","/v1/accounts:update",e)}async function FF(n,e){return Lr(n,"POST","/v1/accounts:signUp",e)}async function UF(n,e){return Ud(n,"POST","/v1/accounts:signInWithPassword",is(n,e))}async function gx(n,e){return Lr(n,"POST","/v1/accounts:sendOobCode",is(n,e))}async function jF(n,e){return gx(n,e)}async function BF(n,e){return gx(n,e)}async function $F(n,e){return Ud(n,"POST","/v1/accounts:signInWithEmailLink",is(n,e))}async function zF(n,e){return Ud(n,"POST","/v1/accounts:signInWithEmailLink",is(n,e))}class Id extends ow{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Id(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Id(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(e,t,"signInWithPassword",UF);case"emailLink":return $F(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(e,r,"signUpPassword",FF);case"emailLink":return zF(e,{idToken:t,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zl(n,e){return Ud(n,"POST","/v1/accounts:signInWithIdp",is(n,e))}const WF="http://localhost";class Da extends ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Da(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Zl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Zl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zl(e,t)}buildRequest(){const e={requestUri:WF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xd(t)}return e}}function HF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qF(n){const e=Uc(jc(n)).link,t=e?Uc(jc(e)).deep_link_id:null,r=Uc(jc(n)).deep_link_id;return(r?Uc(jc(r)).link:null)||r||t||e||n}class aw{constructor(e){const t=Uc(jc(e)),r=t.apiKey??null,i=t.oobCode??null,s=HF(t.mode??null);De(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=qF(e);try{return new aw(t)}catch{return null}}}class Du{constructor(){this.providerId=Du.PROVIDER_ID}static credential(e,t){return Id._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=aw.parseLink(t);return De(r,"argument-error"),Id._fromEmailAndCode(e,r.code,r.tenantId)}}Du.PROVIDER_ID="password";Du.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Du.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class jd extends yx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ks extends jd{constructor(){super("facebook.com")}static credential(e){return Da._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";class Qs extends jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Da._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qs.credential(t,r)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";class Ys extends jd{constructor(){super("github.com")}static credential(e){return Da._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";class Xs extends jd{constructor(){super("twitter.com")}static credential(e,t){return Da._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";async function GF(n,e){return Ud(n,"POST","/v1/accounts:signUp",is(n,e))}class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Vr._fromIdTokenResponse(e,r,i),a=aS(r);return new Na({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=aS(r);return new Na({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function aS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class yp extends _i{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new yp(e,t,r,i)}}function vx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yp._fromErrorAndOperation(n,s,e,r):s})}async function KF(n,e,t=!1){const r=await ka(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Na._forOperation(n,"link",r)}async function QF(n,e,t=!1){const{auth:r}=n;if(Wn(r.app))return Promise.reject(pi(r));const i="reauthenticate";try{const s=await ka(n,vx(r,i,e,n),t);De(s.idToken,r,"internal-error");const a=iw(s.idToken);De(a,r,"internal-error");const{sub:u}=a;return De(n.uid===u,r,"user-mismatch"),Na._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mr(r,"user-mismatch"),s}}async function _x(n,e,t=!1){if(Wn(n.app))return Promise.reject(pi(n));const r="signIn",i=await vx(n,r,e),s=await Na._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function YF(n,e){return _x(Co(n),e)}function XF(n,e,t){De(t.url?.length>0,n,"invalid-continue-uri"),De(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),De(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(De(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(De(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function wx(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JF(n,e,t){const r=Co(n);await gp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BF)}async function ZF(n,e,t){if(Wn(n.app))return Promise.reject(pi(n));const r=Co(n),a=await gp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GF).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&wx(n),d}),u=await Na._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function eU(n,e,t){return Wn(n.app)?Promise.reject(pi(n)):YF(pt(n),Du.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wx(n),r})}async function tU(n,e){const t=pt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&XF(t.auth,i,e);const{email:s}=await jF(t.auth,i);s!==n.email&&await n.reload()}async function nU(n,e){return Lr(n,"POST","/v1/accounts:update",e)}async function rU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=pt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await ka(r,nU(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function iU(n,e){const t=pt(n);return Wn(t.auth.app)?Promise.reject(pi(t.auth)):Tx(t,e,null)}function sU(n,e){return Tx(pt(n),null,e)}async function Tx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await ka(n,LF(r,s));await n._updateTokensIfNecessary(a,!0)}function lS(n,e){return pt(n).setPersistence(e)}function oU(n,e,t,r){return pt(n).onIdTokenChanged(e,t,r)}function aU(n,e,t){return pt(n).beforeAuthStateChanged(e,t)}function lU(n,e,t,r){return pt(n).onAuthStateChanged(e,t,r)}function uS(n){return pt(n).signOut()}async function uU(n){return pt(n).delete()}const vp="__sak";class Ex{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vp,"1"),this.storage.removeItem(vp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cU=1e3,dU=10;class Ix extends Ex{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);vF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},cU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ix.type="LOCAL";const Sx=Ix;class Px extends Ex{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Px.type="SESSION";const Cx=Px;function hU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new ym(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async h=>h(t.origin,s)),d=await hU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];function lw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class fU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,d)=>{const h=lw("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){const w=g;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(w.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function mi(){return window}function pU(n){mi().location.href=n}function Ax(){return typeof mi().WorkerGlobalScope<"u"&&typeof mi().importScripts=="function"}async function mU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gU(){return navigator?.serviceWorker?.controller||null}function yU(){return Ax()?self:null}const bx="firebaseLocalStorageDb",vU=1,_p="firebaseLocalStorage",xx="fbase_key";class Bd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vm(n,e){return n.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function _U(){const n=indexedDB.deleteDatabase(bx);return new Bd(n).toPromise()}function Cv(){const n=indexedDB.open(bx,vU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(_p,{keyPath:xx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(_p)?e(r):(r.close(),await _U(),e(await Cv()))})})}async function cS(n,e,t){const r=vm(n,!0).put({[xx]:e,value:t});return new Bd(r).toPromise()}async function wU(n,e){const t=vm(n,!1).get(e),r=await new Bd(t).toPromise();return r===void 0?null:r.value}function dS(n,e){const t=vm(n,!0).delete(e);return new Bd(t).toPromise()}const TU=800,EU=3;class Rx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>EU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ax()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(yU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mU(),!this.activeServiceWorker)return;this.sender=new fU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cv();return await cS(e,vp,"1"),await dS(e,vp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>cS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=vm(i,!1).getAll();return new Bd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rx.type="LOCAL";const kx=Rx;new Fd(3e4,6e4);function IU(n,e){return e?zi(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class uw extends ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function SU(n){return _x(n.auth,new uw(n),n.bypassAuthState)}function PU(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),QF(t,new uw(n),n.bypassAuthState)}async function CU(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),KF(t,new uw(n),n.bypassAuthState)}class Dx{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SU;case"linkViaPopup":case"linkViaRedirect":return CU;case"reauthViaPopup":case"reauthViaRedirect":return PU;default:Mr(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AU=new Fd(2e3,1e4);class Wl extends Dx{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wl.currentPopupAction&&Wl.currentPopupAction.cancel(),Wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const e=lw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AU.get())};e()}}Wl.currentPopupAction=null;const bU="pendingRedirect",Ff=new Map;class xU extends Dx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const r=await RU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RU(n,e){const t=NU(e),r=DU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function kU(n,e){Ff.set(n._key(),e)}function DU(n){return zi(n._redirectPersistence)}function NU(n){return Lf(bU,n.config.apiKey,n.name)}async function VU(n,e,t=!1){if(Wn(n.app))return Promise.reject(pi(n));const r=Co(n),i=IU(r,e),a=await new xU(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const OU=600*1e3;class MU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Nx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OU&&this.cachedEventUids.clear(),this.cachedEventUids.has(hS(e))}saveEventToCache(e){this.cachedEventUids.add(hS(e)),this.lastProcessedEventTime=Date.now()}}function hS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Nx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function LU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nx(n);default:return!1}}async function FU(n,e={}){return Lr(n,"GET","/v1/projects",e)}const UU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jU=/^https?/;async function BU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await FU(n);for(const t of e)try{if($U(t))return}catch{}Mr(n,"unauthorized-domain")}function $U(n){const e=Sv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!jU.test(t))return!1;if(UU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const zU=new Fd(3e4,6e4);function fS(){const n=mi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function WU(n){return new Promise((e,t)=>{function r(){fS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fS(),t(fi(n,"network-request-failed"))},timeout:zU.get()})}if(mi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mi().gapi?.load)r();else{const i=AF("iframefcb");return mi()[i]=()=>{gapi.load?r():t(fi(n,"network-request-failed"))},fx(`${CF()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function HU(n){return Uf=Uf||WU(n),Uf}const qU=new Fd(5e3,15e3),GU="__/auth/iframe",KU="emulator/auth/iframe",QU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XU(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rw(e,KU):`https://${n.config.authDomain}/${GU}`,r={apiKey:e.apiKey,appName:n.name,v:Cu},i=YU.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${xd(r).slice(1)}`}async function JU(n){const e=await HU(n),t=mi().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:XU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=fi(n,"network-request-failed"),u=mi().setTimeout(()=>{s(a)},qU.get());function d(){mi().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(a)})}))}const ZU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e4=500,t4=600,n4="_blank",r4="http://localhost";class pS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i4(n,e,t,r=e4,i=t4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...ZU,width:r.toString(),height:i.toString(),top:s,left:a},h=nn().toLowerCase();t&&(u=ox(h)?n4:t),ix(h)&&(e=e||r4,d.scrollbars="yes");const m=Object.entries(d).reduce((w,[E,x])=>`${w}${E}=${x},`,"");if(yF(h)&&u!=="_self")return s4(e||"",u),new pS(null);const g=window.open(e||"",u,m);De(g,n,"popup-blocked");try{g.focus()}catch{}return new pS(g)}function s4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const o4="__/auth/handler",a4="emulator/auth/handler",l4=encodeURIComponent("fac");async function mS(n,e,t,r,i,s){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Cu,eventId:i};if(e instanceof yx){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",oV(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof jd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${l4}=${encodeURIComponent(d)}`:"";return`${u4(n)}?${xd(u).slice(1)}${h}`}function u4({config:n}){return n.emulator?rw(n,a4):`https://${n.authDomain}/${o4}`}const _y="webStorageSupport";class c4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cx,this._completeRedirectFn=VU,this._overrideRedirectResult=kU}async _openPopup(e,t,r,i){Yi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await mS(e,t,r,Sv(),i);return i4(e,s,lw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await mS(e,t,r,Sv(),i);return pU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Yi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await JU(e),r=new MU(e);return t.register("authEvent",i=>(De(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_y,{type:_y},i=>{const s=i?.[0]?.[_y];s!==void 0&&t(!!s),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dx()||sx()||sw()}}const d4=c4;var gS="@firebase/auth",yS="1.12.0";class h4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function f4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p4(n){Ia(new lo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;De(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hx(n)},h=new IF(r,i,s,d);return NF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ia(new lo("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(r=>new h4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(gS,yS,f4(n)),ci(gS,yS,"esm2020")}const m4=300,g4=pC("authIdTokenMaxAge")||m4;let vS=null;const y4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>g4)return;const i=t?.token;vS!==i&&(vS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function v4(n=c_()){const e=Bp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DF(n,{popupRedirectResolver:d4,persistence:[kx,Sx,Cx]}),r=pC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=y4(s.toString());aU(t,a,()=>a(t.currentUser)),oU(t,u=>a(u))}}const i=dC("auth");return i&&VF(t,`http://${i}`),t}function _4(){return document.getElementsByTagName("head")?.[0]??document}SF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=fi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",_4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p4("Browser");const w4={apiKey:"AIzaSyBTsbTHQs0-GZHd0mpv_rPc0vMp5DYnN-A",authDomain:"rnf-app.firebaseapp.com",projectId:"rnf-app",storageBucket:"rnf-app.firebasestorage.app",messagingSenderId:"771820334247",appId:"1:771820334247:web:a096ff668dc8963f5b7f82"},Vx=TC(w4),Be=O2(Vx),ln=v4(Vx),T4=async()=>{try{await lS(ln,kx)}catch(n){console.warn("IndexedDB persistence unavailable, falling back to local storage.",n);try{await lS(ln,Sx)}catch(e){console.error("Failed to configure Firebase Auth persistence.",e)}}},Ox=typeof window<"u"?T4():Promise.resolve();typeof window<"u"&&(L2(Be).catch(n=>{n.code==="failed-precondition"?M2(Be).catch(e=>{e.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled because multiple tabs are open and multi-tab persistence failed."):e.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",e):console.error("Failed to enable Firestore offline persistence.",e)}):n.code==="unimplemented"?console.warn("Firestore persistence is not available in this environment.",n):console.error("Unexpected error enabling multi-tab persistence for Firestore.",n)}),Ox.catch(n=>{console.error("Unexpected error configuring Firebase Auth persistence.",n)}));const E4=1;let wy=0;function I4(){return wy=(wy+1)%Number.MAX_VALUE,wy.toString()}const Dn={state:{toasts:[]},listeners:[],getState:()=>Dn.state,setState:n=>{typeof n=="function"?Dn.state=n(Dn.state):Dn.state={...Dn.state,...n},Dn.listeners.forEach(e=>e(Dn.state))},subscribe:n=>(Dn.listeners.push(n),()=>{Dn.listeners=Dn.listeners.filter(e=>e!==n)})},S4=({...n})=>{const e=I4(),t=i=>Dn.setState(s=>({...s,toasts:s.toasts.map(a=>a.id===e?{...a,...i}:a)})),r=()=>Dn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return Dn.setState(i=>({...i,toasts:[{...n,id:e,dismiss:r},...i.toasts].slice(0,E4)})),{id:e,dismiss:r,update:t}};function cw(){const[n,e]=b.useState(Dn.getState());return b.useEffect(()=>Dn.subscribe(r=>{e(r)}),[]),b.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:S4,toasts:n.toasts}}const P4=n=>{if(typeof n=="boolean")return n;if(typeof n=="number"){if(n===1)return!0;if(n===0)return!1}if(typeof n=="string"){const e=n.trim().toLowerCase();if(e==="true")return!0;if(e==="false")return!1}return null},Mx=b.createContext(null),C4=new Set(["estandar"]),_S=n=>n==="conservador"?"estandar":C4.has(n)?n:null,Av=()=>({calculators:{cpm:!0,t8:!0},postpartum:!1,combineMode:"estandar"}),Ty=({current:n,incoming:e,legacyCombineMode:t})=>{const r=Av(),i={calculators:{...r.calculators},postpartum:r.postpartum,combineMode:r.combineMode};let s=!1;const a=u=>{if(!u||typeof u!="object")return;Object.keys(i.calculators).forEach(m=>{typeof u?.calculators?.[m]=="boolean"&&(i.calculators[m]=u.calculators[m])});const d=P4(u.postpartum);d!==null&&(i.postpartum=d);const h=_S(u.combineMode);h&&(i.combineMode=h,s=!0)};if(a(n),a(e),!s){const u=_S(t);u&&(i.combineMode=u)}return i},A4=({children:n})=>{const[e,t]=b.useState(null),[r,i]=b.useState(!0),[s,a]=b.useState(null),{toast:u}=cw();b.useEffect(()=>{let j=null,O=!1;return(async()=>{try{await Ox}catch{}O||(j=lU(ln,async z=>{if(z){t({id:z.uid,uid:z.uid,email:z.email,displayName:z.displayName,photoURL:z.photoURL});try{if(navigator?.storage?.persist){const P="rnf_storage_persist_requested_v1";let S=!1;try{S=localStorage.getItem(P)==="1"}catch{}if(!S){try{localStorage.setItem(P,"1")}catch{}await navigator.storage.persist()}}}catch{}const ne=gn(Be,`users/${z.uid}/preferences`,"display"),Z={theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Av()};try{try{const S=await K2(ne);if(S.exists()){const{combineMode:k,fertilityStartConfig:L,...M}=S.data(),U=Ty({current:Z.fertilityStartConfig,incoming:L,legacyCombineMode:k});a({...Z,...M,fertilityStartConfig:U})}}catch{}const P=await pm(ne);if(P.exists()){const{combineMode:S,fertilityStartConfig:k,...L}=P.data(),M=Ty({current:Z.fertilityStartConfig,incoming:k,legacyCombineMode:S});a({...Z,...L,fertilityStartConfig:M})}else a(Z)}catch(P){console.error("Failed to load preferences",P),a(Z)}}else t(null),a(null);i(!1)}))})(),()=>{O=!0,j&&j()}},[]);const d=async(j,O)=>{try{await eU(ln,j,O)}catch(F){throw u({title:"Error al iniciar sesin",description:F.message,variant:"destructive"}),F}},h=async(j,O)=>{try{const{user:F}=await ZF(ln,j,O),z={url:`${window.location.origin}/auth`};await tU(F,z),await uS(ln)}catch(F){throw u({title:"Error al registrarse",description:F.message,variant:"destructive"}),F}},m=async j=>{try{await JF(ln,j)}catch(O){throw u({title:"Error al restablecer contrasea",description:O.message,variant:"destructive"}),O}},g=async()=>{try{await uS(ln),t(null),a(null)}catch(j){throw u({title:"Error al cerrar sesin",description:j.message,variant:"destructive"}),j}},w=async j=>{if(ln.currentUser)try{await iU(ln.currentUser,j),t(O=>O&&{...O,email:j})}catch(O){throw u({title:"Error al actualizar correo",description:O.message,variant:"destructive"}),O}},E=async j=>{if(ln.currentUser)try{await sU(ln.currentUser,j)}catch(O){throw u({title:"Error al actualizar contrasea",description:O.message,variant:"destructive"}),O}},x=async(j={})=>{if(!ln.currentUser)return;const O=gn(Be,`users/${ln.currentUser.uid}/preferences`,"display"),{combineMode:F,fertilityStartConfig:z,...ne}=j??{},Z=z&&typeof z=="object"||F!==void 0,P=Z?Ty({current:s?.fertilityStartConfig,incoming:z,legacyCombineMode:F}):s?.fertilityStartConfig,S={...ne};Z&&P&&(S.fertilityStartConfig=P,S.combineMode=Y2());try{await Ed(O,S,{merge:!0}),a(k=>{const M={...k??{theme:"light",units:"metric",manualCpm:null,manualT8:null,manualCpmBase:null,manualT8Base:null,cpmMode:"auto",t8Mode:"auto",showRelationsRow:!0,fertilityStartConfig:Av()},...ne};return Z&&P&&(M.fertilityStartConfig=P),M})}catch(k){throw console.error("Failed to save preferences",k),u({title:"Error al guardar preferencias",description:k.message,variant:"destructive"}),k}},R=async j=>{if(ln.currentUser)try{await rU(ln.currentUser,j),t(O=>O&&{...O,...j})}catch(O){throw u({title:"Error al actualizar perfil",description:O.message,variant:"destructive"}),O}},C=async()=>{if(ln.currentUser)try{await uU(ln.currentUser),t(null),a(null)}catch(j){throw u({title:"Error al eliminar cuenta",description:j.message,variant:"destructive"}),j}};return G.jsx(Mx.Provider,{value:{user:e,login:d,register:h,logout:g,resetPassword:m,updateEmail:w,updatePassword:E,preferences:s,savePreferences:x,updateProfile:R,deleteAccount:C,loadingAuth:r},children:n})},_m=()=>b.useContext(Mx);function Xi(n){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(n)}function xn(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function gt(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Lt(n){gt(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||Xi(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function dw(n,e){gt(2,arguments);var t=Lt(n),r=xn(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function b4(n,e){gt(2,arguments);var t=Lt(n).getTime(),r=xn(e);return new Date(t+r)}var x4={};function Nu(){return x4}function wp(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function Vn(n){gt(1,arguments);var e=Lt(n);return e.setHours(0,0,0,0),e}var R4=864e5;function k4(n,e){gt(2,arguments);var t=Vn(n),r=Vn(e),i=t.getTime()-wp(t),s=r.getTime()-wp(r);return Math.round((i-s)/R4)}function D4(n,e){gt(2,arguments);var t=Lt(n),r=Lt(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var hw=6e4,fw=36e5,N4=1e3;function V4(n){return gt(1,arguments),n instanceof Date||Xi(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function O4(n){if(gt(1,arguments),!V4(n)&&typeof n!="number")return!1;var e=Lt(n);return!isNaN(Number(e))}function wS(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function M4(n,e){gt(2,arguments);var t=Lt(n),r=Lt(e),i=wS(t,r),s=Math.abs(k4(t,r));t.setDate(t.getDate()-i*s);var a=+(wS(t,r)===-i),u=i*(s-a);return u===0?0:u}function Lx(n,e){gt(2,arguments);var t=xn(e);return b4(n,-t)}var L4=864e5;function F4(n){gt(1,arguments);var e=Lt(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/L4)+1}function _u(n){gt(1,arguments);var e=1,t=Lt(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Fx(n){gt(1,arguments);var e=Lt(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=_u(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=_u(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function U4(n){gt(1,arguments);var e=Fx(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=_u(t);return r}var j4=6048e5;function Ux(n){gt(1,arguments);var e=Lt(n),t=_u(e).getTime()-U4(e).getTime();return Math.round(t/j4)+1}function Va(n,e){var t,r,i,s,a,u,d,h;gt(1,arguments);var m=Nu(),g=xn((t=(r=(i=(s=e?.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:m.weekStartsOn)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=Lt(n),E=w.getUTCDay(),x=(E<g?7:0)+E-g;return w.setUTCDate(w.getUTCDate()-x),w.setUTCHours(0,0,0,0),w}function pw(n,e){var t,r,i,s,a,u,d,h;gt(1,arguments);var m=Lt(n),g=m.getUTCFullYear(),w=Nu(),E=xn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:w.firstWeekContainsDate)!==null&&r!==void 0?r:(d=w.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=new Date(0);x.setUTCFullYear(g+1,0,E),x.setUTCHours(0,0,0,0);var R=Va(x,e),C=new Date(0);C.setUTCFullYear(g,0,E),C.setUTCHours(0,0,0,0);var j=Va(C,e);return m.getTime()>=R.getTime()?g+1:m.getTime()>=j.getTime()?g:g-1}function B4(n,e){var t,r,i,s,a,u,d,h;gt(1,arguments);var m=Nu(),g=xn((t=(r=(i=(s=e?.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(d=m.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),w=pw(n,e),E=new Date(0);E.setUTCFullYear(w,0,g),E.setUTCHours(0,0,0,0);var x=Va(E,e);return x}var $4=6048e5;function jx(n,e){gt(1,arguments);var t=Lt(n),r=Va(t,e).getTime()-B4(t,e).getTime();return Math.round(r/$4)+1}function at(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var zs={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return at(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):at(r+1,2)},d:function(e,t){return at(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return at(e.getUTCHours()%12||12,t.length)},H:function(e,t){return at(e.getUTCHours(),t.length)},m:function(e,t){return at(e.getUTCMinutes(),t.length)},s:function(e,t){return at(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return at(s,t.length)}},Vl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},z4={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return zs.y(e,t)},Y:function(e,t,r,i){var s=pw(e,i),a=s>0?s:1-s;if(t==="YY"){var u=a%100;return at(u,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):at(a,t.length)},R:function(e,t){var r=Fx(e);return at(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return at(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return at(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return at(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return zs.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return at(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=jx(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):at(s,t.length)},I:function(e,t,r){var i=Ux(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):at(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):zs.d(e,t)},D:function(e,t,r){var i=F4(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):at(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return at(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),a=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return at(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return at(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=Vl.noon:i===0?s=Vl.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=Vl.evening:i>=12?s=Vl.afternoon:i>=4?s=Vl.morning:s=Vl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return zs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):zs.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):at(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):at(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):zs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):zs.s(e,t)},S:function(e,t){return zs.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return ES(a);case"XXXX":case"XX":return aa(a);default:return aa(a,":")}},x:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return ES(a);case"xxxx":case"xx":return aa(a);default:return aa(a,":")}},O:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+TS(a,":");default:return"GMT"+aa(a,":")}},z:function(e,t,r,i){var s=i._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+TS(a,":");default:return"GMT"+aa(a,":")}},t:function(e,t,r,i){var s=i._originalDate||e,a=Math.floor(s.getTime()/1e3);return at(a,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,a=s.getTime();return at(a,t.length)}};function TS(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var a=e;return t+String(i)+a+at(s,2)}function ES(n,e){if(n%60===0){var t=n>0?"-":"+";return t+at(Math.abs(n)/60,2)}return aa(n,e)}function aa(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=at(Math.floor(i/60),2),a=at(i%60,2);return r+s+t+a}var IS=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Bx=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},W4=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return IS(e,t);var a;switch(i){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",IS(i,t)).replace("{{time}}",Bx(s,t))},bv={p:Bx,P:W4},H4=["D","DD"],q4=["YY","YYYY"];function $x(n){return H4.indexOf(n)!==-1}function zx(n){return q4.indexOf(n)!==-1}function Tp(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var G4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},K4=function(e,t,r){var i,s=G4[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Ey(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var Q4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Y4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},X4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},J4={date:Ey({formats:Q4,defaultWidth:"full"}),time:Ey({formats:Y4,defaultWidth:"full"}),dateTime:Ey({formats:X4,defaultWidth:"full"})},Z4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ej=function(e,t,r,i){return Z4[e]};function Rc(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{var u=n.defaultWidth,d=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[d]||n.values[u]}var h=n.argumentCallback?n.argumentCallback(e):e;return i[h]}}var tj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ij={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aj=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},lj={ordinalNumber:aj,era:Rc({values:tj,defaultWidth:"wide"}),quarter:Rc({values:nj,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Rc({values:rj,defaultWidth:"wide"}),day:Rc({values:ij,defaultWidth:"wide"}),dayPeriod:Rc({values:sj,defaultWidth:"wide",formattingValues:oj,defaultFormattingWidth:"wide"})};function kc(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],u=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(u)?cj(u,function(g){return g.test(a)}):uj(u,function(g){return g.test(a)}),h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;var m=e.slice(a.length);return{value:h,rest:m}}}function uj(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function cj(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function dj(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var u=e.slice(i.length);return{value:a,rest:u}}}var hj=/^(\d+)(th|st|nd|rd)?/i,fj=/\d+/i,pj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mj={any:[/^b/i,/^(a|c)/i]},gj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yj={any:[/1/i,/2/i,/3/i,/4/i]},vj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_j={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ej={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ij={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sj={ordinalNumber:dj({matchPattern:hj,parsePattern:fj,valueCallback:function(e){return parseInt(e,10)}}),era:kc({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:mj,defaultParseWidth:"any"}),quarter:kc({matchPatterns:gj,defaultMatchWidth:"wide",parsePatterns:yj,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kc({matchPatterns:vj,defaultMatchWidth:"wide",parsePatterns:_j,defaultParseWidth:"any"}),day:kc({matchPatterns:wj,defaultMatchWidth:"wide",parsePatterns:Tj,defaultParseWidth:"any"}),dayPeriod:kc({matchPatterns:Ej,defaultMatchWidth:"any",parsePatterns:Ij,defaultParseWidth:"any"})},Wx={code:"en-US",formatDistance:K4,formatLong:J4,formatRelative:ej,localize:lj,match:Sj,options:{weekStartsOn:0,firstWeekContainsDate:1}},Pj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Aj=/^'([^]*?)'?$/,bj=/''/g,xj=/[a-zA-Z]/;function Vt(n,e,t){var r,i,s,a,u,d,h,m,g,w,E,x,R,C,j,O,F,z;gt(2,arguments);var ne=String(e),Z=Nu(),P=(r=(i=t?.locale)!==null&&i!==void 0?i:Z.locale)!==null&&r!==void 0?r:Wx,S=xn((s=(a=(u=(d=t?.firstWeekContainsDate)!==null&&d!==void 0?d:t==null||(h=t.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&u!==void 0?u:Z.firstWeekContainsDate)!==null&&a!==void 0?a:(g=Z.locale)===null||g===void 0||(w=g.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=xn((E=(x=(R=(C=t?.weekStartsOn)!==null&&C!==void 0?C:t==null||(j=t.locale)===null||j===void 0||(O=j.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&R!==void 0?R:Z.weekStartsOn)!==null&&x!==void 0?x:(F=Z.locale)===null||F===void 0||(z=F.options)===null||z===void 0?void 0:z.weekStartsOn)!==null&&E!==void 0?E:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var L=Lt(n);if(!O4(L))throw new RangeError("Invalid time value");var M=wp(L),U=Lx(L,M),N={firstWeekContainsDate:S,weekStartsOn:k,locale:P,_originalDate:L},fe=ne.match(Cj).map(function(Pe){var J=Pe[0];if(J==="p"||J==="P"){var ie=bv[J];return ie(Pe,P.formatLong)}return Pe}).join("").match(Pj).map(function(Pe){if(Pe==="''")return"'";var J=Pe[0];if(J==="'")return Rj(Pe);var ie=z4[J];if(ie)return!(t!=null&&t.useAdditionalWeekYearTokens)&&zx(Pe)&&Tp(Pe,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&$x(Pe)&&Tp(Pe,e,String(n)),ie(U,Pe,P.localize,N);if(J.match(xj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");return Pe}).join("");return fe}function Rj(n){var e=n.match(Aj);return e?e[1].replace(bj,"'"):n}function kj(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function SS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Dj(n,e){if(n){if(typeof n=="string")return SS(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?SS(n,e):void 0}}function PS(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Dj(n))||e){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var h=t.next();return a=h.done,h},e:function(h){u=!0,s=h},f:function(){try{a||t.return==null||t.return()}finally{if(u)throw s}}}}function Te(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xv(n,e){return xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},xv(n,e)}function Ze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&xv(n,e)}function Ep(n){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ep(n)}function Hx(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hx=function(){return!!n})()}function Nj(n,e){if(e&&(Xi(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(n)}function et(n){var e=Hx();return function(){var t,r=Ep(n);if(e){var i=Ep(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Nj(this,t)}}function Qe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Vj(n,e){if(Xi(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Xi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qx(n){var e=Vj(n,"string");return Xi(e)=="symbol"?e:e+""}function Oj(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,qx(r.key),r)}}function Ye(n,e,t){return e&&Oj(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function _e(n,e,t){return(e=qx(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Mj=10,Gx=(function(){function n(){Qe(this,n),_e(this,"priority",void 0),_e(this,"subPriority",0)}return Ye(n,[{key:"validate",value:function(t,r){return!0}}]),n})(),Lj=(function(n){Ze(t,n);var e=et(t);function t(r,i,s,a,u){var d;return Qe(this,t),d=e.call(this),d.value=r,d.validateValue=i,d.setValue=s,d.priority=a,u&&(d.subPriority=u),d}return Ye(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,a){return this.setValue(i,s,this.value,a)}}]),t})(Gx),Fj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",Mj),_e(Te(r),"subPriority",-1),r}return Ye(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var a=new Date(0);return a.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),a.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),a}}]),t})(Gx),it=(function(){function n(){Qe(this,n),_e(this,"incompatibleTokens",void 0),_e(this,"priority",void 0),_e(this,"subPriority",void 0)}return Ye(n,[{key:"run",value:function(t,r,i,s){var a=this.parse(t,r,i,s);return a?{setter:new Lj(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n})(),Uj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",140),_e(Te(r),"incompatibleTokens",["R","u","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"G":case"GG":case"GGG":return a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"});case"GGGGG":return a.era(i,{width:"narrow"});default:return a.era(i,{width:"wide"})||a.era(i,{width:"abbreviated"})||a.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,a){return s.era=a,i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),Wt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},oi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ht(n,e){return n&&{value:e(n.value),rest:n.rest}}function xt(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ai(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(i*fw+s*hw+a*N4),rest:e.slice(t[0].length)}}function Kx(n){return xt(Wt.anyDigitsSigned,n)}function Ft(n,e){switch(n){case 1:return xt(Wt.singleDigit,e);case 2:return xt(Wt.twoDigits,e);case 3:return xt(Wt.threeDigits,e);case 4:return xt(Wt.fourDigits,e);default:return xt(new RegExp("^\\d{1,"+n+"}"),e)}}function Ip(n,e){switch(n){case 1:return xt(Wt.singleDigitSigned,e);case 2:return xt(Wt.twoDigitsSigned,e);case 3:return xt(Wt.threeDigitsSigned,e);case 4:return xt(Wt.fourDigitsSigned,e);default:return xt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function mw(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Qx(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,a=Math.floor(s/100)*100,u=n>=s%100;i=n+a-(u?100:0)}return t?i:1-i}function Yx(n){return n%400===0||n%4===0&&n%100!==0}var jj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="yy"}};switch(s){case"y":return Ht(Ft(4,i),u);case"yo":return Ht(a.ordinalNumber(i,{unit:"year"}),u);default:return Ht(Ft(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a){var u=i.getUTCFullYear();if(a.isTwoDigitYear){var d=Qx(a.year,u);return i.setUTCFullYear(d,0,1),i.setUTCHours(0,0,0,0),i}var h=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(h,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),Bj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return{year:h,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return Ht(Ft(4,i),u);case"Yo":return Ht(a.ordinalNumber(i,{unit:"year"}),u);default:return Ht(Ft(s.length,i),u)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,a,u){var d=pw(i,u);if(a.isTwoDigitYear){var h=Qx(a.year,d);return i.setUTCFullYear(h,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Va(i,u)}var m=!("era"in s)||s.era===1?a.year:1-a.year;return i.setUTCFullYear(m,0,u.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Va(i,u)}}]),t})(it),$j=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s){return Ip(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,a){var u=new Date(0);return u.setUTCFullYear(a,0,4),u.setUTCHours(0,0,0,0),_u(u)}}]),t})(it),zj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",130),_e(Te(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s){return Ip(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,a){return i.setUTCFullYear(a,0,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),Wj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",120),_e(Te(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"Q":case"QQ":return Ft(s.length,i);case"Qo":return a.ordinalNumber(i,{unit:"quarter"});case"QQQ":return a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(i,{width:"narrow",context:"formatting"});default:return a.quarter(i,{width:"wide",context:"formatting"})||a.quarter(i,{width:"abbreviated",context:"formatting"})||a.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),Hj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",120),_e(Te(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"q":case"qq":return Ft(s.length,i);case"qo":return a.ordinalNumber(i,{unit:"quarter"});case"qqq":return a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(i,{width:"narrow",context:"standalone"});default:return a.quarter(i,{width:"wide",context:"standalone"})||a.quarter(i,{width:"abbreviated",context:"standalone"})||a.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,a){return i.setUTCMonth((a-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),qj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_e(Te(r),"priority",110),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"M":return Ht(xt(Wt.month,i),u);case"MM":return Ht(Ft(2,i),u);case"Mo":return Ht(a.ordinalNumber(i,{unit:"month"}),u);case"MMM":return a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(i,{width:"narrow",context:"formatting"});default:return a.month(i,{width:"wide",context:"formatting"})||a.month(i,{width:"abbreviated",context:"formatting"})||a.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(it),Gj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",110),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h-1};switch(s){case"L":return Ht(xt(Wt.month,i),u);case"LL":return Ht(Ft(2,i),u);case"Lo":return Ht(a.ordinalNumber(i,{unit:"month"}),u);case"LLL":return a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(i,{width:"narrow",context:"standalone"});default:return a.month(i,{width:"wide",context:"standalone"})||a.month(i,{width:"abbreviated",context:"standalone"})||a.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){return i.setUTCMonth(a,1),i.setUTCHours(0,0,0,0),i}}]),t})(it);function Kj(n,e,t){gt(2,arguments);var r=Lt(n),i=xn(e),s=jx(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var Qj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",100),_e(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"w":return xt(Wt.week,i);case"wo":return a.ordinalNumber(i,{unit:"week"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a,u){return Va(Kj(i,a,u),u)}}]),t})(it);function Yj(n,e){gt(2,arguments);var t=Lt(n),r=xn(e),i=Ux(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var Xj=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",100),_e(Te(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"I":return xt(Wt.week,i);case"Io":return a.ordinalNumber(i,{unit:"week"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,a){return _u(Yj(i,a))}}]),t})(it),Jj=[31,28,31,30,31,30,31,31,30,31,30,31],Zj=[31,29,31,30,31,30,31,31,30,31,30,31],e3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"subPriority",1),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"d":return xt(Wt.date,i);case"do":return a.ordinalNumber(i,{unit:"date"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=Yx(a),d=i.getUTCMonth();return u?s>=1&&s<=Zj[d]:s>=1&&s<=Jj[d]}},{key:"set",value:function(i,s,a){return i.setUTCDate(a),i.setUTCHours(0,0,0,0),i}}]),t})(it),t3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"subpriority",1),_e(Te(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"D":case"DD":return xt(Wt.dayOfYear,i);case"Do":return a.ordinalNumber(i,{unit:"date"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){var a=i.getUTCFullYear(),u=Yx(a);return u?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,a){return i.setUTCMonth(0,a),i.setUTCHours(0,0,0,0),i}}]),t})(it);function gw(n,e,t){var r,i,s,a,u,d,h,m;gt(2,arguments);var g=Nu(),w=xn((r=(i=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(u=t.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:g.weekStartsOn)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(m=h.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&r!==void 0?r:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var E=Lt(n),x=xn(e),R=E.getUTCDay(),C=x%7,j=(C+7)%7,O=(j<w?7:0)+x-R;return E.setUTCDate(E.getUTCDate()+O),E}var n3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"E":case"EE":case"EEE":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=gw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(it),r3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"e":case"ee":return Ht(Ft(s.length,i),d);case"eo":return Ht(a.ordinalNumber(i,{unit:"day"}),d);case"eee":return a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"});default:return a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=gw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(it),i3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a,u){var d=function(m){var g=Math.floor((m-1)/7)*7;return(m+u.weekStartsOn+6)%7+g};switch(s){case"c":case"cc":return Ht(Ft(s.length,i),d);case"co":return Ht(a.ordinalNumber(i,{unit:"day"}),d);case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"});default:return a.day(i,{width:"wide",context:"standalone"})||a.day(i,{width:"abbreviated",context:"standalone"})||a.day(i,{width:"short",context:"standalone"})||a.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,a,u){return i=gw(i,a,u),i.setUTCHours(0,0,0,0),i}}]),t})(it);function s3(n,e){gt(2,arguments);var t=xn(e);t%7===0&&(t=t-7);var r=1,i=Lt(n),s=i.getUTCDay(),a=t%7,u=(a+7)%7,d=(u<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+d),i}var o3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",90),_e(Te(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){var u=function(h){return h===0?7:h};switch(s){case"i":case"ii":return Ft(s.length,i);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return Ht(a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiii":return Ht(a.day(i,{width:"narrow",context:"formatting"}),u);case"iiiiii":return Ht(a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u);default:return Ht(a.day(i,{width:"wide",context:"formatting"})||a.day(i,{width:"abbreviated",context:"formatting"})||a.day(i,{width:"short",context:"formatting"})||a.day(i,{width:"narrow",context:"formatting"}),u)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,a){return i=s3(i,a),i.setUTCHours(0,0,0,0),i}}]),t})(it),a3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",80),_e(Te(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"a":case"aa":case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(mw(a),0,0,0),i}}]),t})(it),l3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",80),_e(Te(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"b":case"bb":case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(mw(a),0,0,0),i}}]),t})(it),u3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",80),_e(Te(r),"incompatibleTokens",["a","b","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});default:return a.dayPeriod(i,{width:"wide",context:"formatting"})||a.dayPeriod(i,{width:"abbreviated",context:"formatting"})||a.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,a){return i.setUTCHours(mw(a),0,0,0),i}}]),t})(it),c3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"h":return xt(Wt.hour12h,i);case"ho":return a.ordinalNumber(i,{unit:"hour"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):!u&&a===12?i.setUTCHours(0,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(it),d3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"H":return xt(Wt.hour23h,i);case"Ho":return a.ordinalNumber(i,{unit:"hour"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,a){return i.setUTCHours(a,0,0,0),i}}]),t})(it),h3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"K":return xt(Wt.hour11h,i);case"Ko":return a.ordinalNumber(i,{unit:"hour"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,a){var u=i.getUTCHours()>=12;return u&&a<12?i.setUTCHours(a+12,0,0,0):i.setUTCHours(a,0,0,0),i}}]),t})(it),f3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",70),_e(Te(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"k":return xt(Wt.hour24h,i);case"ko":return a.ordinalNumber(i,{unit:"hour"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,a){var u=a<=24?a%24:a;return i.setUTCHours(u,0,0,0),i}}]),t})(it),p3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",60),_e(Te(r),"incompatibleTokens",["t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"m":return xt(Wt.minute,i);case"mo":return a.ordinalNumber(i,{unit:"minute"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCMinutes(a,0,0),i}}]),t})(it),m3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",50),_e(Te(r),"incompatibleTokens",["t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s,a){switch(s){case"s":return xt(Wt.second,i);case"so":return a.ordinalNumber(i,{unit:"second"});default:return Ft(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,a){return i.setUTCSeconds(a,0),i}}]),t})(it),g3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",30),_e(Te(r),"incompatibleTokens",["t","T"]),r}return Ye(t,[{key:"parse",value:function(i,s){var a=function(d){return Math.floor(d*Math.pow(10,-s.length+3))};return Ht(Ft(s.length,i),a)}},{key:"set",value:function(i,s,a){return i.setUTCMilliseconds(a),i}}]),t})(it),y3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",10),_e(Te(r),"incompatibleTokens",["t","T","x"]),r}return Ye(t,[{key:"parse",value:function(i,s){switch(s){case"X":return ai(oi.basicOptionalMinutes,i);case"XX":return ai(oi.basic,i);case"XXXX":return ai(oi.basicOptionalSeconds,i);case"XXXXX":return ai(oi.extendedOptionalSeconds,i);default:return ai(oi.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(it),v3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",10),_e(Te(r),"incompatibleTokens",["t","T","X"]),r}return Ye(t,[{key:"parse",value:function(i,s){switch(s){case"x":return ai(oi.basicOptionalMinutes,i);case"xx":return ai(oi.basic,i);case"xxxx":return ai(oi.basicOptionalSeconds,i);case"xxxxx":return ai(oi.extendedOptionalSeconds,i);default:return ai(oi.extended,i)}}},{key:"set",value:function(i,s,a){return s.timestampIsSet?i:new Date(i.getTime()-a)}}]),t})(it),_3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",40),_e(Te(r),"incompatibleTokens","*"),r}return Ye(t,[{key:"parse",value:function(i){return Kx(i)}},{key:"set",value:function(i,s,a){return[new Date(a*1e3),{timestampIsSet:!0}]}}]),t})(it),w3=(function(n){Ze(t,n);var e=et(t);function t(){var r;Qe(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),_e(Te(r),"priority",20),_e(Te(r),"incompatibleTokens","*"),r}return Ye(t,[{key:"parse",value:function(i){return Kx(i)}},{key:"set",value:function(i,s,a){return[new Date(a),{timestampIsSet:!0}]}}]),t})(it),T3={G:new Uj,y:new jj,Y:new Bj,R:new $j,u:new zj,Q:new Wj,q:new Hj,M:new qj,L:new Gj,w:new Qj,I:new Xj,d:new e3,D:new t3,E:new n3,e:new r3,c:new i3,i:new o3,a:new a3,b:new l3,B:new u3,h:new c3,H:new d3,K:new h3,k:new f3,m:new p3,s:new m3,S:new g3,X:new y3,x:new v3,t:new _3,T:new w3},E3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S3=/^'([^]*?)'?$/,P3=/''/g,C3=/\S/,A3=/[a-zA-Z]/;function b3(n,e,t,r){var i,s,a,u,d,h,m,g,w,E,x,R,C,j;gt(3,arguments);var O=String(n),F=String(e),z=Nu(),ne=(i=(s=void 0)!==null&&s!==void 0?s:z.locale)!==null&&i!==void 0?i:Wx;if(!ne.match)throw new RangeError("locale must contain match property");var Z=xn((a=(u=(d=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&d!==void 0?d:z.firstWeekContainsDate)!==null&&u!==void 0?u:(m=z.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(Z>=1&&Z<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=xn((w=(E=(x=(R=void 0)!==null&&R!==void 0?R:void 0)!==null&&x!==void 0?x:z.weekStartsOn)!==null&&E!==void 0?E:(C=z.locale)===null||C===void 0||(j=C.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&w!==void 0?w:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(F==="")return O===""?Lt(t):new Date(NaN);var S={firstWeekContainsDate:Z,weekStartsOn:P,locale:ne},k=[new Fj],L=F.match(I3).map(function(ae){var ue=ae[0];if(ue in bv){var ve=bv[ue];return ve(ae,ne.formatLong)}return ae}).join("").match(E3),M=[],U=PS(L),N;try{var fe=function(){var ue=N.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&zx(ue)&&Tp(ue,F,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&$x(ue)&&Tp(ue,F,n);var ve=ue[0],Re=T3[ve];if(Re){var Ue=Re.incompatibleTokens;if(Array.isArray(Ue)){var $e=M.find(function(Gt){return Ue.includes(Gt.token)||Gt.token===ve});if($e)throw new RangeError("The format string mustn't contain `".concat($e.fullToken,"` and `").concat(ue,"` at the same time"))}else if(Re.incompatibleTokens==="*"&&M.length>0)throw new RangeError("The format string mustn't contain `".concat(ue,"` and any other token at the same time"));M.push({token:ve,fullToken:ue});var ct=Re.run(O,ue,ne.match,S);if(!ct)return{v:new Date(NaN)};k.push(ct.setter),O=ct.rest}else{if(ve.match(A3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ve+"`");if(ue==="''"?ue="'":ve==="'"&&(ue=x3(ue)),O.indexOf(ue)===0)O=O.slice(ue.length);else return{v:new Date(NaN)}}};for(U.s();!(N=U.n()).done;){var Pe=fe();if(Xi(Pe)==="object")return Pe.v}}catch(ae){U.e(ae)}finally{U.f()}if(O.length>0&&C3.test(O))return new Date(NaN);var J=k.map(function(ae){return ae.priority}).sort(function(ae,ue){return ue-ae}).filter(function(ae,ue,ve){return ve.indexOf(ae)===ue}).map(function(ae){return k.filter(function(ue){return ue.priority===ae}).sort(function(ue,ve){return ve.subPriority-ue.subPriority})}).map(function(ae){return ae[0]}),ie=Lt(t);if(isNaN(ie.getTime()))return new Date(NaN);var Y=Lx(ie,wp(ie)),re={},K=PS(J),D;try{for(K.s();!(D=K.n()).done;){var H=D.value;if(!H.validate(Y,S))return new Date(NaN);var oe=H.set(Y,re,S);Array.isArray(oe)?(Y=oe[0],kj(re,oe[1])):Y=oe}}catch(ae){K.e(ae)}finally{K.f()}return Y}function x3(n){return n.match(S3)[1].replace(P3,"'")}function Me(n,e){var t;gt(1,arguments);var r=xn((t=void 0)!==null&&t!==void 0?t:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var i=N3(n),s;if(i.date){var a=V3(i.date,r);s=O3(a.restDateString,a.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var u=s.getTime(),d=0,h;if(i.time&&(d=M3(i.time),isNaN(d)))return new Date(NaN);if(i.timezone){if(h=L3(i.timezone),isNaN(h))return new Date(NaN)}else{var m=new Date(u+d),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(u+d+h)}var pf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},R3=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,k3=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,D3=/^([+-])(\d{2})(?::?(\d{2}))?$/;function N3(n){var e={},t=n.split(pf.dateTimeDelimiter),r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],pf.timeZoneDelimiter.test(e.date)&&(e.date=n.split(pf.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){var i=pf.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function V3(n,e){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function O3(n,e){if(e===null)return new Date(NaN);var t=n.match(R3);if(!t)return new Date(NaN);var r=!!t[4],i=Dc(t[1]),s=Dc(t[2])-1,a=Dc(t[3]),u=Dc(t[4]),d=Dc(t[5])-1;if(r)return $3(e,u,d)?F3(e,u,d):new Date(NaN);var h=new Date(0);return!j3(e,s,a)||!B3(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}function Dc(n){return n?parseInt(n):1}function M3(n){var e=n.match(k3);if(!e)return NaN;var t=Iy(e[1]),r=Iy(e[2]),i=Iy(e[3]);return z3(t,r,i)?t*fw+r*hw+i*1e3:NaN}function Iy(n){return n&&parseFloat(n.replace(",","."))||0}function L3(n){if(n==="Z")return 0;var e=n.match(D3);if(!e)return 0;var t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return W3(r,i)?t*(r*fw+i*hw):NaN}function F3(n,e,t){var r=new Date(0);r.setUTCFullYear(n,0,4);var i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var U3=[31,null,31,30,31,30,31,31,30,31,30,31];function Xx(n){return n%400===0||n%4===0&&n%100!==0}function j3(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(U3[e]||(Xx(n)?29:28))}function B3(n,e){return e>=1&&e<=(Xx(n)?366:365)}function $3(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function z3(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function W3(n,e){return e>=0&&e<=59}const Sp=(n,e)=>{if(!n||!e)return 0;const t=Vn(Me(n)),r=Vn(Me(e));return M4(t,r)+1},Nc=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},jf=(n,e)=>!n||!Array.isArray(n)||!e?[]:[...n].sort((r,i)=>{const s=r.timestamp?Me(r.timestamp):r.iso_date?Me(r.iso_date):0,a=i.timestamp?Me(i.timestamp):i.iso_date?Me(i.iso_date):0;return D4(s,a)}).map(r=>{const i=Nc(r.temperature_raw),s=Nc(r.temperature_corrected),a=Array.isArray(r.measurements)?r.measurements:[],u=h=>{if(!h)return null;const m=Nc(h.temperature),g=Nc(h.temperature_corrected);return h.use_corrected&&g!==null?g:m!==null?m:g!==null?g:null};let d=Nc(r.temperature_chart);if(d==null&&a.length){const m=a.find(g=>g&&g.selected&&u(g)!==null)||a.find(g=>u(g)!==null);m&&(d=u(m))}return d==null&&(r.use_corrected&&s!==null?d=s:i!==null?d=i:s!==null&&(d=s)),{...r,id:r.id,isoDate:r.iso_date||(r.timestamp?Vt(Me(r.timestamp),"yyyy-MM-dd"):null),date:r.timestamp?Vt(Me(r.timestamp),"dd/MM"):r.iso_date?Vt(Me(r.iso_date),"dd/MM"):"N/A",cycleDay:Sp(r.iso_date||r.timestamp,e),temperature_raw:i,temperature_corrected:s,use_corrected:!!r.use_corrected,mucusSensation:r.mucus_sensation,mucusAppearance:r.mucus_appearance,fertility_symbol:r.fertility_symbol,observations:r.observations,ignored:r.ignored,measurements:a,temperature_chart:d,timestamp:r.timestamp,peak_marker:r.peak_marker||null,had_relations:!!(r.had_relations??r.hadRelations??!1),hadRelations:!!(r.had_relations??r.hadRelations??!1)}}),H3=async n=>{const e=Mt(Be,`users/${n}/cycles`),t=await yn(e);if(t.empty)return null;const r=t.docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.end_date===null||d.end_date===void 0).sort((d,h)=>(h.start_date||"").localeCompare(d.start_date||""));if(r.length>1&&console.warn(`Se detectaron ${r.length} ciclos abiertos. Se usar el ms reciente.`),r.length===0)return null;const i=r[0],s=Mt(Be,`users/${n}/cycles/${i.id}/entries`),u=(await yn(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:i.id,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},q3=async(n,e)=>{const t=Mt(Be,`users/${n}/cycles`),i=(await yn(t)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.end_date!==null&&a.end_date!==void 0||e&&a.start_date&&a.start_date<e).sort((a,u)=>(u.start_date||"").localeCompare(a.start_date||""));return await Promise.all(i.map(async a=>{const u=Mt(Be,`users/${n}/cycles/${a.id}/entries`),h=(await yn(u)).docs.map(m=>({id:m.id,...m.data()}));return{id:a.id,startDate:a.start_date,endDate:a.end_date,needsCompletion:!a.end_date,ignoredForAutoCalculations:!!a.ignored_auto_calculations,data:h}}))},G3=async(n,e)=>{const t=gn(Be,`users/${n}/cycles/${e}`),r=await pm(t);if(!r.exists())return null;const i=r.data(),s=Mt(Be,`users/${n}/cycles/${e}/entries`),u=(await yn(s)).docs.map(d=>({id:d.id,...d.data()}));return{id:e,startDate:i.start_date,endDate:i.end_date,ignoredForAutoCalculations:!!i.ignored_auto_calculations,data:u}},CS=async(n,e)=>{const t=Mt(Be,`users/${n}/cycles`),r=await yn(t),i=Me(e),s=r.docs.find(u=>{const d=u.data(),h=d.start_date?Me(d.start_date):null,m=d.end_date?Me(d.end_date):null;if(!h||!i)return!1;const g=m??new Date("9999-12-31");return i>=h&&i<=g});if(s){const u={id:s.id,startDate:s.data().start_date,endDate:s.data().end_date},d=new Error("Cycle dates overlap with an existing cycle");throw d.code="cycle-overlap",d.conflictCycle=u,d}return{id:(await zl(Mt(Be,`users/${n}/cycles`),{user_id:n,start_date:e,ignored_auto_calculations:!1,end_date:null})).id,start_date:e}},K3=async n=>{const e=n.user_id,t=n.timestamp??new Date().toISOString(),r={timestamp:t,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation,mucus_appearance:n.mucus_appearance,fertility_symbol:n.fertility_symbol,observations:n.observations,had_relations:!!(n.had_relations??n.hadRelations??!1),ignored:n.ignored,peak_marker:n.peak_marker??null},i=Mt(Be,`users/${e}/cycles`),s=await yn(i),a=Me(t),u=s.docs.filter(h=>{const m=h.data(),g=m.start_date?Me(m.start_date):null,w=m.end_date?Me(m.end_date):null;return g&&a>=g&&(!w||a<=w)});let d=null;if(u.length>1?d=u.sort((h,m)=>{const g=Me(h.data().start_date);return Me(m.data().start_date)-g})[0]:u.length===1&&(d=u[0]),d){const h=await zl(Mt(Be,`users/${e}/cycles/${d.id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=Mt(Be,`users/${e}/cycles/${d.id}/entries/${h.id}/measurements`);for(const g of n.measurements)await zl(m,g)}return{id:h.id}}if(n.cycle_id){const h=await zl(Mt(Be,`users/${e}/cycles/${n.cycle_id}/entries`),r);if(Array.isArray(n.measurements)&&n.measurements.length>=2){const m=Mt(Be,`users/${e}/cycles/${n.cycle_id}/entries/${h.id}/measurements`);for(const g of n.measurements)await zl(m,g)}return{id:h.id}}return{id:null}},Sy=async(n,e,t,r)=>{const i=gn(Be,`users/${n}/cycles/${e}/entries/${t}`),s=["temperature_raw","temperature_corrected","use_corrected","temperature_chart","mucus_sensation","mucus_appearance","fertility_symbol","observations","had_relations","ignored","peak_marker"],a={};for(const u of s)Object.prototype.hasOwnProperty.call(r,u)&&(a[u]=r[u]);if(Object.prototype.hasOwnProperty.call(r,"timestamp")&&(a.timestamp=r.timestamp),Object.keys(a).length===0)return{id:t};if(await mo(i,a),Array.isArray(r.measurements)&&(r.measurements.length>=2||r.measurements.length===0)){const u=Mt(Be,`users/${n}/cycles/${e}/entries/${t}/measurements`),d=await yn(u);if(await Promise.all(d.docs.map(h=>go(h.ref))),r.measurements.length>=2)for(const h of r.measurements)await zl(u,h)}return{id:t}},Q3=async(n,e,t)=>{try{const r=Mt(Be,`users/${n}/cycles/${e}/entries/${t}/measurements`);return(await yn(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error fetching measurements for entry",t,r),[]}},AS=async(n,e,t)=>{await go(gn(Be,`users/${n}/cycles/${e}/entries/${t}`))},Y3=async(n,e,t)=>{const r=gn(Be,`users/${e}/cycles/${n}`);if(!(await pm(r)).exists())throw new Error("Cycle not found");await mo(r,{end_date:t})},Vc=async(n,e,t,r,i=!1)=>{const s=gn(Be,`users/${e}/cycles/${n}`),a=await pm(s);if(!a.exists())throw new Error("Cycle not found");const u=a.data(),d=t??u.start_date,h=r!==void 0?r:u.end_date,m=d?Me(d):null,g=h?Me(h):null;if(m&&g&&g<m)throw new Error("End date cannot be earlier than start date");const w=Mt(Be,`users/${e}/cycles`),x=(await yn(w)).docs.find(j=>{if(j.id===n)return!1;const O=j.data(),F=O.start_date?Me(O.start_date):null,z=O.end_date?Me(O.end_date):null;if(!F)return!1;const ne=z??new Date("9999-12-31"),Z=g??new Date("9999-12-31");return m<=ne&&F<=Z}),R=x?{id:x.id,startDate:x.data().start_date,endDate:x.data().end_date}:null;if(i)return{overlap:R};if(x){const j=new Error("Cycle dates overlap with an existing cycle");throw j.code="cycle-overlap",j.conflictCycle=R,j}const C={};t!==void 0&&(C.start_date=t),r!==void 0&&(C.end_date=r),await mo(s,C)},X3=async(n,e,t)=>{const r=gn(Be,`users/${n}/cycles/${e}`);await mo(r,{ignored_auto_calculations:t})},J3=async(n,e,t,r)=>{if(!t)return;const i=Mt(Be,`users/${n}/cycles`),s=await yn(i),a=s.docs.find(Z=>Z.id===e);if(!a)return;const u=a.data(),d=r||u.start_date||null,h=d?Me(d):null,m=s.docs.filter(Z=>Z.id!==e).map(Z=>({id:Z.id,data:Z.data()})).filter(({data:Z})=>Z.start_date).sort((Z,P)=>Me(Z.data.start_date).getTime()-Me(P.data.start_date).getTime()),g=h??Me(t),w=m.find(({data:Z})=>{try{return Me(Z.start_date)>g}catch(P){return console.error("Error parsing next cycle start date",P),!1}});if(!w)return;const E=Me(w.data.start_date),x=w.data.end_date?Me(w.data.end_date):null,R=Me(t);let C=dw(R,1);E&&C<E&&(C=E),x&&C>x&&(C=x);const j=Vt(C,"yyyy-MM-dd"),O=Mt(Be,`users/${n}/cycles/${w.id}/entries`),F=await yn(O),z=d||u.start_date;await Promise.all(F.docs.map(async Z=>{const P=Z.data(),S=P.timestamp?Me(P.timestamp):P.iso_date?Me(P.iso_date):null;if(!S)return;const k=Vt(S,"yyyy-MM-dd");if(S<C){const L={...P,cycle_day:Sp(k,z)},M=gn(Be,`users/${n}/cycles/${e}/entries/${Z.id}`);await Ed(M,L);const U=Mt(Be,`users/${n}/cycles/${w.id}/entries/${Z.id}/measurements`),N=await yn(U);await Promise.all(N.docs.map(async fe=>{const Pe=gn(Be,`users/${n}/cycles/${e}/entries/${Z.id}/measurements/${fe.id}`);await Ed(Pe,fe.data()),await go(fe.ref)})),await go(Z.ref)}else await mo(Z.ref,{cycle_day:Sp(k,j)})}));const ne=gn(Be,`users/${n}/cycles/${w.id}`);await mo(ne,{start_date:j})},Z3=async(n,e,t)=>{const r=Mt(Be,`users/${n}/cycles`),i=await yn(r),s=Me(t),a=i.docs.find(d=>{if(d.id===e)return!1;const h=d.data(),m=h.start_date?Me(h.start_date):null,g=h.end_date?Me(h.end_date):null;return!m||!g?!1:m<=s&&g>=s});if(a){const d=gn(Be,`users/${n}/cycles/${a.id}`),h=Vt(dw(s,-1),"yyyy-MM-dd");await mo(d,{end_date:h});const m=Mt(Be,`users/${n}/cycles/${a.id}/entries`),g=await yn(m);await Promise.all(g.docs.map(async w=>{const E=w.data(),x=E.timestamp?Me(E.timestamp):null;if(x&&x>=s){const R={...E,cycle_day:Sp(Vt(x,"yyyy-MM-dd"),t)},C=gn(Be,`users/${n}/cycles/${e}/entries/${w.id}`);await Ed(C,R);const j=Mt(Be,`users/${n}/cycles/${a.id}/entries/${w.id}/measurements`),O=await yn(j);await Promise.all(O.docs.map(async F=>{const z=gn(Be,`users/${n}/cycles/${e}/entries/${w.id}/measurements/${F.id}`);await Ed(z,F.data()),await go(F.ref)})),await go(w.ref)}}))}const u=gn(Be,`users/${n}/cycles/${e}`);await mo(u,{start_date:t})},bS=async(n,e)=>{const t=Mt(Be,`users/${n}/cycles/${e}/entries`),r=await yn(t);await Promise.all(r.docs.map(i=>go(i.ref))),await go(gn(Be,`users/${n}/cycles/${e}`))},eB="RNFApp",tB=1,Pp="cycleData",yw="cycle-data:",vw=()=>typeof indexedDB<"u",_w=()=>typeof localStorage<"u",nB=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),rB=()=>new Promise((n,e)=>{const t=indexedDB.open(eB,tB);t.onupgradeneeded=()=>{const r=t.result;r.objectStoreNames.contains(Pp)||r.createObjectStore(Pp)},t.onsuccess=()=>{n(t.result)},t.onerror=()=>{e(t.error)}}),ww=async(n,e)=>{const t=await rB();return new Promise((r,i)=>{const s=t.transaction(Pp,n),a=s.objectStore(Pp),u=e(a);s.oncomplete=()=>{t.close(),r(u?.result)},s.onerror=()=>{t.close(),i(s.error??u?.error)}})},xS=async n=>{if(!n)return null;if(vw())try{return await ww("readonly",t=>t.get(n))??null}catch(e){console.error("Failed to retrieve cached cycle data.",e)}if(_w())try{const e=localStorage.getItem(`${yw}${n}`);return e?JSON.parse(e):null}catch(e){console.error("Failed to read cached cycle data from localStorage.",e)}return null},iB=async(n,e)=>{if(!n)return;const t=nB(e);if(vw())try{await ww("readwrite",r=>r.put(t,n));return}catch(r){console.error("Failed to persist cycle data cache.",r)}if(_w())try{localStorage.setItem(`${yw}${n}`,JSON.stringify(t))}catch(r){console.error("Failed to persist cycle data cache in localStorage.",r)}},sB=async n=>{if(n){if(vw())try{await ww("readwrite",e=>e.delete(n))}catch(e){console.error("Failed to clear cached cycle data.",e)}if(_w())try{localStorage.removeItem(`${yw}${n}`)}catch(e){console.error("Failed to clear cached cycle data from localStorage.",e)}}};const oB="type.googleapis.com/google.protobuf.Int64Value",aB="type.googleapis.com/google.protobuf.UInt64Value";function Jx(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Cp(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Cp(e));if(typeof n=="function"||typeof n=="object")return Jx(n,e=>Cp(e));throw new Error("Data cannot be encoded in JSON: "+n)}function wu(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case oB:case aB:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>wu(e)):typeof n=="function"||typeof n=="object"?Jx(n,e=>wu(e)):n}const Tw="functions";const RS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gn extends _i{constructor(e,t,r){super(`${Tw}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Gn.prototype)}}function lB(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Ap(n,e){let t=lB(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!RS[a])return new Gn("internal","internal");t=RS[a],r=a}const u=s.message;typeof u=="string"&&(r=u),i=s.details,i!==void 0&&(i=wu(i))}}catch{}return t==="ok"?null:new Gn(t,r,i)}class uB{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||r.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i?.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const Rv="us-central1",cB=/^data: (.*?)(?:\n|$)/;function dB(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Gn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class hB{constructor(e,t,r,i,s=Rv,a=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new uB(e,t,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(s);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Rv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function fB(n,e,t){const r=To(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(o_(n.emulatorOrigin+"/backends"),a_("Functions",!0))}function pB(n,e,t){const r=i=>gB(n,e,i,{});return r.stream=(i,s)=>vB(n,e,i,s),r}function Zx(n){return n.emulatorOrigin&&To(n.emulatorOrigin)?"include":void 0}async function mB(n,e,t,r,i){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:Zx(i)})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function e1(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function gB(n,e,t,r){const i=n._url(e);return yB(n,i,t,r)}async function yB(n,e,t,r){t=Cp(t);const i={data:t},s=await e1(n,r),a=r.timeout||7e4,u=dB(a),d=await Promise.race([mB(e,i,s,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!d)throw new Gn("cancelled","Firebase Functions instance was deleted.");const h=Ap(d.status,d.json);if(h)throw h;if(!d.json)throw new Gn("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Gn("internal","Response is missing data field.");return{data:wu(m)}}function vB(n,e,t,r){const i=n._url(e);return _B(n,i,t,r||{})}async function _B(n,e,t,r){t=Cp(t);const i={data:t},s=await e1(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:s,signal:r?.signal,credentials:Zx(n)})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const x=new Gn("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const E=Ap(0,null);return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}let u,d;const h=new Promise((w,E)=>{u=w,d=E});r?.signal?.addEventListener("abort",()=>{const w=new Gn("cancelled","Request was cancelled.");d(w)});const m=a.body.getReader(),g=wB(m,u,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const w=g.getReader();return{async next(){const{value:E,done:x}=await w.read();return{value:E,done:x}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:h}}function wB(n,e,t,r){const i=(a,u)=>{const d=a.match(cB);if(!d)return;const h=d[1];try{const m=JSON.parse(h);if("result"in m){e(wu(m.result));return}if("message"in m){u.enqueue(wu(m.message));return}if("error"in m){const g=Ap(0,m);u.error(g),t(g);return}}catch(m){if(m instanceof Gn){u.error(m),t(m);return}}},s=new TextDecoder;return new ReadableStream({start(a){let u="";return d();async function d(){if(r?.aborted){const h=new Gn("cancelled","Request was cancelled");return a.error(h),t(h),Promise.resolve()}try{const{value:h,done:m}=await n.read();if(m){u.trim()&&i(u.trim(),a),a.close();return}if(r?.aborted){const w=new Gn("cancelled","Request was cancelled");a.error(w),t(w),await n.cancel();return}u+=s.decode(h,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const w of g)w.trim()&&i(w.trim(),a);return d()}catch(h){const m=h instanceof Gn?h:Ap(0,null);a.error(m),t(m)}}},cancel(){return n.cancel()}})}const kS="@firebase/functions",DS="0.13.1";const TB="auth-internal",EB="app-check-internal",IB="messaging-internal";function SB(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider(TB),a=t.getProvider(IB),u=t.getProvider(EB);return new hB(i,s,a,u,r)};Ia(new lo(Tw,e,"PUBLIC").setMultipleInstances(!0)),ci(kS,DS,n),ci(kS,DS,"esm2020")}function PB(n=c_(),e=Rv){const r=Bp(pt(n),Tw).getImmediate({identifier:e}),i=hC("functions");return i&&CB(r,...i),r}function CB(n,e,t){fB(pt(n),e,t)}function AB(n,e,t){return pB(pt(n),e)}SB();const bB=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{t.platforms.set(s,a)},i=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=r,t.setPlatform=i,t},xB=n=>n.CapacitorPlatforms=bB(n),t1=xB(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});t1.addPlatform;t1.setPlatform;var Tu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Tu||(Tu={}));class Py extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const RB=n=>{var e,t;return n?.androidBridge?"android":!((t=(e=n?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},kB=n=>{var e,t,r,i,s;const a=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},d=u.Plugins=u.Plugins||{},h=n.CapacitorPlatforms,m=()=>a!==null?a.name:RB(n),g=((e=h?.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||m,w=()=>g()!=="web",E=((t=h?.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||w,x=P=>{const S=z.get(P);return!!(S?.platforms.has(g())||j(P))},R=((r=h?.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||x,C=P=>{var S;return(S=u.PluginHeaders)===null||S===void 0?void 0:S.find(k=>k.name===P)},j=((i=h?.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||C,O=P=>n.console.error(P),F=(P,S,k)=>Promise.reject(`${k} does not have an implementation of "${S}".`),z=new Map,ne=(P,S={})=>{const k=z.get(P);if(k)return console.warn(`Capacitor plugin "${P}" already registered. Cannot register plugins twice.`),k.proxy;const L=g(),M=j(P);let U;const N=async()=>(!U&&L in S?U=typeof S[L]=="function"?U=await S[L]():U=S[L]:a!==null&&!U&&"web"in S&&(U=typeof S.web=="function"?U=await S.web():U=S.web),U),fe=(K,D)=>{var H,oe;if(M){const ae=M?.methods.find(ue=>D===ue.name);if(ae)return ae.rtype==="promise"?ue=>u.nativePromise(P,D.toString(),ue):(ue,ve)=>u.nativeCallback(P,D.toString(),ue,ve);if(K)return(H=K[D])===null||H===void 0?void 0:H.bind(K)}else{if(K)return(oe=K[D])===null||oe===void 0?void 0:oe.bind(K);throw new Py(`"${P}" plugin is not implemented on ${L}`,Tu.Unimplemented)}},Pe=K=>{let D;const H=(...oe)=>{const ae=N().then(ue=>{const ve=fe(ue,K);if(ve){const Re=ve(...oe);return D=Re?.remove,Re}else throw new Py(`"${P}.${K}()" is not implemented on ${L}`,Tu.Unimplemented)});return K==="addListener"&&(ae.remove=async()=>D()),ae};return H.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(H,"name",{value:K,writable:!1,configurable:!1}),H},J=Pe("addListener"),ie=Pe("removeListener"),Y=(K,D)=>{const H=J({eventName:K},D),oe=async()=>{const ue=await H;ie({eventName:K,callbackId:ue},D)},ae=new Promise(ue=>H.then(()=>ue({remove:oe})));return ae.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await oe()},ae},re=new Proxy({},{get(K,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?Y:J;case"removeListener":return ie;default:return Pe(D)}}});return d[P]=re,z.set(P,{name:P,proxy:re,platforms:new Set([...Object.keys(S),...M?[L]:[]])}),re},Z=((s=h?.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||ne;return u.convertFileSrc||(u.convertFileSrc=P=>P),u.getPlatform=g,u.handleError=O,u.isNativePlatform=E,u.isPluginAvailable=R,u.pluginMethodNoop=F,u.registerPlugin=Z,u.Exception=Py,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},DB=n=>n.Capacitor=kB(n),yo=DB(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),n1=yo.registerPlugin;yo.Plugins;class r1{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,t),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new yo.Exception(e,Tu.Unimplemented)}unavailable(e="not available"){return new yo.Exception(e,Tu.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const NS=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),VS=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class NB extends r1{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=VS(i).trim(),s=VS(s).trim(),t[i]=s}),t}async setCookie(e){try{const t=NS(e.key),r=NS(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}n1("CapacitorCookies",{web:()=>new NB});const VB=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),OB=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=n[e[a]],i),{})},MB=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[s,a]=i;let u,d;return Array.isArray(a)?(d="",a.forEach(h=>{u=e?encodeURIComponent(h):h,d+=`${s}=${u}&`}),d.slice(0,-1)):(u=e?encodeURIComponent(a):a,d=`${s}=${u}`),`${r}&${d}`},"").substr(1):null,LB=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=OB(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,u]of Object.entries(n.data||{}))s.set(a,u);t.body=s.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,d)=>{s.append(d,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class FB extends r1{async request(e){const t=LB(e,e.webFetchExtra),r=MB(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,t),a=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?e:{};a.includes("application/json")&&(u="json");let d,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),d=await VB(h);break;case"json":d=await s.json();break;default:d=await s.text()}const m={};return s.headers.forEach((g,w)=>{m[w]=g}),{data:d,headers:m,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}n1("CapacitorHttp",{web:()=>new FB});const UB=n=>{if(!n)return null;const e=n.unit,t=Number(n.value);return Number.isFinite(t)?e==="fahrenheit"?(t-32)/1.8:t:null},Bf=["BasalBodyTemperature"],jB=["BasalBodyTemperature","READ_BASAL_BODY_TEMPERATURE","android.permission.health.READ_BASAL_BODY_TEMPERATURE"],OS=n=>String(n||"").toLowerCase().replace(/^android\.permission\.health\./,"").replace(/^read_/,"").replace(/[^a-z0-9]/g,""),BB=n=>{try{const e=new WeakSet;return JSON.stringify(n,(t,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return r},2)}catch{try{return String(n)}catch{return"[Unstringifiable]"}}},$B=(n,e)=>{const t=e&&typeof e=="object"?Object.keys(e):[];console.warn(`${n} keys=${t.join(",")}
${BB(e)}`)},Ew=n=>typeof n=="string"?n:n?.availability??n?.value??n?.status,kv=n=>{if(n?.allPermissionsGranted===!0)return!0;const e=n?.permissionResults,t=n?.permissions?.read??n?.readPermissions??e?.read??(Array.isArray(e)?e:null)??n?.read,r=jB.map(OS),i=a=>r.includes(OS(a));if(n===!0||n?.hasAllPermissions===!0)return!0;const s=n?.grantedPermissions??n?.permissionsGranted;return Array.isArray(s)&&s.every(a=>typeof a=="string")?s.some(i):Array.isArray(t)&&t.every(a=>typeof a=="string")?t.some(i):Array.isArray(t)&&t.every(a=>typeof a=="boolean")?t.every(Boolean):Array.isArray(t)&&t.every(a=>a&&typeof a=="object")?t.some(a=>{const u=a.permission??a.name??a.type??a.recordType??a.value,d=a.granted??a.allowed??a.isGranted??a.status;return i(u)&&!!d}):t&&typeof t=="object"?Object.entries(t).some(([a,u])=>{const d=typeof u=="boolean"?u:!!(u?.granted??u?.allowed??u?.value??u?.status);return i(a)&&d}):($B("[HealthConnect] Unexpected permission response shape",n),!1)};async function zB(){if(!yo.isNativePlatform())return{isAvailable:!1,hasPermissions:!1,availability:"NotNative"};const{HealthConnect:n}=await vi(async()=>{const{HealthConnect:i}=await import("./index-0vI2seDU.js");return{HealthConnect:i}},[]),e=await n.checkAvailability(),t=Ew(e);if(t!=="Available")return{isAvailable:!1,hasPermissions:!1,availability:t};const r=await n.checkHealthPermissions({read:Bf,write:[]});return{isAvailable:!0,hasPermissions:kv(r),availability:t}}async function WB(){const{HealthConnect:n}=await vi(async()=>{const{HealthConnect:s}=await import("./index-0vI2seDU.js");return{HealthConnect:s}},[]),e=await n.checkAvailability(),t=Ew(e);if(t!=="Available")throw new Error(`HEALTH_CONNECT_${t||"Unknown"}`);const r=await n.checkHealthPermissions({read:Bf,write:[]});if(kv(r))return!0;await n.requestHealthPermissions({read:Bf,write:[]});const i=await n.checkHealthPermissions({read:Bf,write:[]});return kv(i)}async function HB({startDate:n}){if(!yo.isNativePlatform())throw new Error("HEALTH_CONNECT_ONLY_IN_APP");const{HealthConnect:e}=await vi(async()=>{const{HealthConnect:m}=await import("./index-0vI2seDU.js");return{HealthConnect:m}},[]),t=await e.checkAvailability(),r=Ew(t);if(r!=="Available")throw new Error(`HEALTH_CONNECT_${r||"Unknown"}`);if(!await WB())throw new Error("HEALTH_CONNECT_PERMISSION_DENIED");const s=Me(n);if(!n||Number.isNaN(s?.getTime?.()))throw new Error("HEALTH_CONNECT_INVALID_START_DATE");const a=Vn(s),u=new Date;return((await e.readRecords({type:"BasalBodyTemperature",timeRangeFilter:{type:"between",startTime:a,endTime:u},ascendingOrder:!0,pageSize:500}))?.records||[]).map(m=>{const g=UB(m.temperature);if(g==null)return null;const w=new Date(m.time);return{externalId:m?.metadata?.id||null,dataOrigin:m?.metadata?.dataOrigin||null,timestampMs:w.getTime(),timestamp:Vt(w,"yyyy-MM-dd'T'HH:mm:ssXXX"),localDate:Vt(w,"yyyy-MM-dd"),time:Vt(w,"HH:mm"),temperatureC:Number(g.toFixed(2))}}).filter(Boolean)}const i1=b.createContext(null),na={id:null,startDate:null,endDate:null,data:[],ignoredForAutoCalculations:!1},Cy=(n,e)=>{if(!e)return n;const t=Vn(Me(e));return n.filter(r=>Me(r.isoDate)<=t)},Ay=(n,e)=>{if(!e)return n;const t=Vn(Me(e));return n.filter(r=>Me(r.isoDate)>=t)},mf=n=>{if(n==null||n==="")return null;const e=parseFloat(String(n).replace(",","."));return isNaN(e)?null:e},qB=n=>{if(!n)return!1;const e=n.temperature,t=n.temperature_corrected,r=e==null?"":String(e).trim(),i=t==null?"":String(t).trim();return r!==""||i!==""},Ol=n=>n?typeof n=="string"?Vt(Vn(Me(n)),"yyyy-MM-dd"):typeof n.toDate=="function"?Vt(Vn(n.toDate()),"yyyy-MM-dd"):Vt(Vn(new Date(n)),"yyyy-MM-dd"):null,GB=({payload:n,entryId:e,isoDate:t,cycleStartDate:r,existingEntry:i})=>{const s={id:e,iso_date:t,timestamp:n.timestamp,temperature_raw:n.temperature_raw??null,temperature_corrected:n.temperature_corrected??null,use_corrected:!!n.use_corrected,temperature_chart:n.temperature_chart??null,mucus_sensation:n.mucus_sensation??null,mucus_appearance:n.mucus_appearance??null,fertility_symbol:n.fertility_symbol??null,observations:n.observations??null,had_relations:n.had_relations??!1,ignored:n.ignored??!1,peak_marker:n.peak_marker??null,measurements:n.measurements??(Array.isArray(i?.measurements)?i.measurements:[])},a=r?jf([s],r):[];return a.length?{...i,...a[0],measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}:{...i,...s,isoDate:t,measurements:s.measurements,measurementsLoaded:Array.isArray(n.measurements)?!0:i?.measurementsLoaded}},KB=n=>[...n].sort((e,t)=>{const r=e.timestamp?Me(e.timestamp):e.isoDate?Me(e.isoDate):0,i=t.timestamp?Me(t.timestamp):t.isoDate?Me(t.isoDate):0;return r>i?1:r<i?-1:0}),QB=({children:n})=>{const{user:e}=_m(),{toast:t}=cw(),[r,i]=b.useState(na),[s,a]=b.useState([]),[u,d]=b.useState(!0),h=b.useRef(!1),m=b.useRef(null),g=b.useCallback(()=>{i(na),a([]),d(!1),h.current=!1},[]),w=b.useCallback(async({silent:J=!1}={})=>{if(!e?.uid){const K=m.current;m.current=null,K&&sB(K).catch(D=>console.error("Failed to clear cached cycle data on sign-out.",D)),g();return}m.current=e.uid;let ie=!1;if(!h.current)try{const K=await xS(e.uid);K&&(i(K.currentCycle??na),a(K.archivedCycles??[]),h.current=!0,ie=!0,J||d(!1))}catch(K){console.error("Failed to hydrate cycle data from cache.",K)}const Y=!J&&!ie&&!h.current;if(Y&&d(!0),typeof navigator<"u"&&navigator.onLine===!1&&(ie||h.current)){J||d(!1);return}try{const K=await H3(e.uid);let D=na;if(K){const ae=Ol(K.startDate),ue=Ol(K.endDate),ve=jf(K.data,ae),Re=Ay(ve,ae),Ue=Cy(Re,ue);D={...K,startDate:ae,endDate:ue,data:Ue}}const oe=(await q3(e.uid,K?K.startDate:null)).map(ae=>{const ue=Ol(ae.startDate),ve=Ol(ae.endDate),Re=jf(ae.data||[],ue),Ue=Ay(Re,ue),$e=Cy(Ue,ve);return{...ae,startDate:ue??Vt(Vn(new Date),"yyyy-MM-dd"),endDate:ve,needsCompletion:ae.needsCompletion,data:$e}});i(D),a(oe),await iB(e.uid,{currentCycle:D,archivedCycles:oe}),h.current=!0}catch(K){if(console.error("Error in loadCycleData:",K),K.code==="permission-denied"&&console.error("Firebase permissions error. Check Firestore rules."),!ie)try{const D=await xS(e.uid);D?(i(D.currentCycle??na),a(D.archivedCycles??[]),h.current=!0):(i(na),a([]),h.current=!1)}catch(D){console.error("Failed to recover cycle data from cache after error.",D),i(na),a([]),h.current=!1}}finally{Y&&d(!1)}},[e,g]);b.useEffect(()=>{if(!e?.uid){g();return}w().catch(J=>console.error("Initial cycle data load failed:",J))},[e?.uid,w,g]);const E=b.useCallback((J,ie,Y,re,{remove:K=!1}={})=>{const D=H=>{if(!H||H.id!==J)return H;const oe=Array.isArray(H.data)?H.data:[];if(K)return{...H,data:oe.filter(Re=>Re.id!==ie)};const ae=oe.find(Re=>Re.id===ie)||null,ue=GB({payload:Y,entryId:ie,isoDate:re,cycleStartDate:H.startDate,existingEntry:ae}),ve=ae?oe.map(Re=>Re.id===ie?ue:Re):KB([...oe,ue]);return{...H,data:ve}};i(H=>D(H)),a(H=>H.map(oe=>D(oe)))},[]),x=b.useCallback((J,ie,Y)=>{const re=K=>{if(!K||K.id!==J)return K;const H=(Array.isArray(K.data)?K.data:[]).map(oe=>oe.id===ie?{...oe,measurements:Y,measurementsLoaded:!0}:oe);return{...K,data:H}};i(K=>re(K)),a(K=>K.map(D=>re(D)))},[]),R=b.useCallback(async(J,ie,Y=null)=>{const re=Y??r.id;if(!e?.uid||!re)throw console.error("User or cycle id is missing"),new Error("User or cycle id is missing");d(!0);try{const K=re===r.id?r:s.find(tt=>tt.id===re);let D=ie;!D&&K&&(D=K.data.find(tt=>tt.isoDate===J.isoDate)),D&&String(D.id).startsWith("placeholder-")&&(D=null);const H=K?.data?.find(tt=>tt?.peak_marker==="peak")||null;J.peak_marker==="peak"&&H&&H.id!==D?.id&&await Sy(e.uid,re,H.id,{peak_marker:null});const oe=Array.isArray(J.measurements)?J.measurements:[],ae=oe.filter(qB),ue=ae.find(tt=>tt?.selected)||ae[0]||null,ve=oe.find(tt=>tt?.time&&String(tt.time).trim()!=="")||ue,Re=(()=>{if(ve?.time&&String(ve.time).trim()!=="")return ve.time;if(D?.timestamp)try{return Vt(Me(D.timestamp),"HH:mm")}catch{return Vt(new Date,"HH:mm")}return Vt(new Date,"HH:mm")})(),Ue=b3(`${J.isoDate} ${Re}`,"yyyy-MM-dd HH:mm",new Date),$e=mf(ue?.temperature),ct=mf(ue?.temperature_corrected),Gt=!!ue?.use_corrected&&ct!==null,ss=Gt?ct:$e,Er=Object.prototype.hasOwnProperty.call(J,"peak_marker"),os=ae.some(tt=>{if(!tt)return!1;const Ur=mf(tt.temperature),za=mf(tt.temperature_corrected);return Ur!==null||za!==null}),as=tt=>tt==null?"":String(tt).trim(),ls=as(J.mucusSensation??J.mucus_sensation??""),Ti=as(J.mucusAppearance??J.mucus_appearance??""),bo=as(J.observations??""),yt=J.fertility_symbol??J.fertilitySymbol??null,Pt=yt!=null&&yt!==""&&yt!=="none",Mn=!!(J.had_relations??J.hadRelations??!1),us=J.peak_marker==="peak",cs=!os&&ls===""&&Ti===""&&!Pt&&bo===""&&!Mn&&!us,$a=!!D?.measurementsLoaded&&Array.isArray(D?.measurements)&&D.measurements.length>=2,Fr=ae.length>=2,xo=$a&&ae.length<2,ds=Array.isArray(J.measurements)?Fr?ae:xo?[]:void 0:void 0,Ln={cycle_id:re,user_id:e.uid,timestamp:Vt(Ue,"yyyy-MM-dd'T'HH:mm:ssXXX"),measurements:ds,mucus_sensation:J.mucusSensation||null,mucus_appearance:J.mucusAppearance||null,fertility_symbol:J.fertility_symbol==="none"?null:J.fertility_symbol,observations:J.observations||null,had_relations:Mn,ignored:D?J.ignored??D.ignored:J.ignored||!1,peak_marker:Er?J.peak_marker??null:D?.peak_marker??null,temperature_raw:$e,temperature_corrected:ct,use_corrected:Gt,temperature_chart:ss};let hs=D?.id??null;if(D){const tt=Er&&D?.peak_marker==="peak"&&!us;cs&&tt?(await AS(e.uid,re,D.id),E(re,D.id,Ln,J.isoDate,{remove:!0})):(await Sy(e.uid,re,D.id,Ln),E(re,D.id,Ln,J.isoDate))}else{if(cs)return;hs=(await K3(Ln))?.id??null,hs&&E(re,hs,Ln,J.isoDate)}w({silent:!0}).catch(tt=>console.error("Background cycle data refresh failed after save:",tt))}catch(K){throw console.error("Error adding/updating data point:",K),K}finally{d(!1)}},[e,r,s,w,E]),C=b.useCallback(async(J,ie)=>{if(!e?.uid||!J||!ie)return[];const Y=await Q3(e.uid,J,ie);return x(J,ie,Y),Y},[e,x]),j=b.useCallback(async(J,ie=null)=>{const Y=ie??r.id;if(!(!e?.uid||!Y)){d(!0);try{await AS(e.uid,Y,J),await w({silent:!0})}catch(re){throw console.error("Error deleting record:",re),re}finally{d(!1)}}},[e,r.id,w]),O=b.useCallback(async(J,ie)=>{if(!e?.uid)return;const Y=J===r.id,re=Y?r:s.find(oe=>oe.id===J);if(!re)throw new Error("Cycle not found for toggling ignore state.");const K=re.data?.find(oe=>oe.id===ie);if(!K)throw new Error("Record not found for toggling ignore state.");const D=!K.ignored,H=oe=>{Y?i(ae=>ae.id!==J?ae:{...ae,data:ae.data.map(ue=>ue.id===ie?{...ue,ignored:oe}:ue)}):a(ae=>ae.map(ue=>ue.id!==J?ue:{...ue,data:(ue.data||[]).map(ve=>ve.id===ie?{...ve,ignored:oe}:ve)}))};try{H(D),await Sy(e.uid,J,ie,{ignored:D}),w({silent:!0}).catch(oe=>console.error("Background cycle data refresh failed after toggling ignore state:",oe))}catch(oe){throw console.error("Error toggling ignore state:",oe),H(!D),oe}},[e,r,s,w]),F=b.useCallback(async(J,ie)=>{if(!e?.uid||!J)return;const Y=r,re=s,K=D=>!D||D.id!==J||D.ignoredForAutoCalculations===ie?D:{...D,ignoredForAutoCalculations:ie};i(D=>K(D)),a(D=>D.map(H=>K(H)));try{await X3(e.uid,J,ie),w({silent:!0}).catch(D=>console.error("Background cycle data refresh failed after updating ignore configuration:",D))}catch(D){throw console.error("Error updating cycle ignore configuration:",D),i(Y),a(re),t({title:"Error",description:"No se pudo actualizar la configuracin del ciclo.",variant:"destructive"}),D}},[e,r,s,w,t]),z=b.useCallback(async J=>{if(e?.uid){d(!0);try{const ie=Vn(J?Me(J):new Date);if(r.id&&J){const K=Vn(Me(r.startDate));if(ie<=K){t({title:"Fecha invlida",description:"La fecha de inicio del nuevo ciclo debe ser posterior al inicio del ciclo actual.",variant:"destructive"}),d(!1);return}}if(r.id){const K=Vt(dw(ie,-1),"yyyy-MM-dd");await Y3(r.id,e.uid,K)}const Y=Vt(ie,"yyyy-MM-dd"),re=await CS(e.uid,Y);i({id:re.id,startDate:re.start_date,endDate:null,data:[],ignoredForAutoCalculations:!1}),await w({silent:!0})}catch(ie){console.error("Error starting new cycle:",ie);try{r.id&&await Vc(r.id,e.uid,void 0,null)}catch(Y){console.error("Rollback failed:",Y)}throw t({title:"Error",description:"No se pudo iniciar el nuevo ciclo.",variant:"destructive"}),ie}finally{d(!1)}}},[e,r,w,t]),ne=b.useCallback(J=>{if(!J)return"Las fechas coinciden con otro ciclo.";const{startDate:ie,endDate:Y}=J,re=H=>{if(!H)return null;try{return Vt(Me(H),"dd/MM/yyyy")}catch(oe){return console.error("Failed to format overlap date",oe),H}},K=re(ie)??"sin fecha de inicio",D=Y?re(Y):"en curso";return`Las fechas coinciden con el ciclo del ${K} al ${D}.`},[]),Z=b.useCallback(async(J,ie)=>{if(e?.uid){if(!ie){t({title:"Error",description:"La fecha de fin es obligatoria.",variant:"destructive"});return}d(!0);try{const Y=await CS(e.uid,J);try{await Vc(Y.id,e.uid,void 0,ie)}catch(re){try{await bS(e.uid,Y.id)}catch(K){console.error("Failed to clean up cycle after overlap error:",K)}throw re}await w({silent:!0})}catch(Y){console.error("Error adding archived cycle:",Y);const re=Y.code==="cycle-overlap"?ne(Y.conflictCycle):"No se pudo crear el ciclo.";throw t({title:"Error",description:re,variant:"destructive"}),Y}finally{d(!1)}}},[e,w,t,ne]),P=b.useCallback(async J=>{if(e?.uid){d(!0);try{await bS(e.uid,J),await w({silent:!0})}catch(ie){throw console.error("Error deleting cycle:",ie),t({title:"Error",description:"No se pudo eliminar el ciclo.",variant:"destructive"}),ie}finally{d(!1)}}},[e,w,t]),S=b.useCallback(async(J,ie,Y)=>{if(!e?.uid)return null;try{return(await Vc(J,e.uid,ie,Y,!0)).overlap}catch(re){return console.error("Error checking cycle overlap:",re),null}},[e]),k=b.useCallback(async(J,ie,Y,re=!1)=>{if(e?.uid){d(!0);try{re&&ie?(await Z3(e.uid,J,ie),Y!==void 0&&await Vc(J,e.uid,void 0,Y)):await Vc(J,e.uid,ie,Y),await w({silent:!0})}catch(K){console.error("Error updating cycle dates:",K);const D=K.code==="cycle-overlap"?ne(K.conflictCycle):"No se pudieron actualizar las fechas.";throw t({title:"Error",description:D,variant:"destructive"}),K}finally{d(!1)}}},[e,w,t,ne]),L=b.useCallback((J,ie)=>k(J,ie,void 0,!0),[k]),M=b.useCallback(async(J,ie,Y)=>{!e?.uid||!J||!ie||await J3(e.uid,J,ie,Y)},[e]),U=b.useCallback(async J=>{if(!e?.uid)return null;d(!0);try{const ie=await G3(e.uid,J);if(!ie)return null;const Y=Ol(ie.startDate),re=Ol(ie.endDate),K=jf(ie.data||[],Y),D=Ay(K,Y),H=Cy(D,re);return{...ie,startDate:Y??Vt(Vn(new Date),"yyyy-MM-dd"),endDate:re,data:H}}catch(ie){return console.error("Error fetching cycle by ID:",ie),null}finally{d(!1)}},[e]),N=b.useCallback(({silent:J=!0}={})=>w({silent:J}),[w]),fe=b.useCallback(async()=>{if(!e?.uid)throw new Error("NO_USER");if(!r?.id||!r?.startDate)throw new Error("NO_CURRENT_CYCLE");d(!0);try{const J=await HB({startDate:r.startDate});if(!J.length){t({title:"Sin registros",description:"No se encontraron temperaturas en Health Connect."});return}const ie=PB(),K=(await AB(ie,"syncBasalBodyTemperature")({cycleId:r.id,items:J}))?.data;return t({title:"Sincronizacin hecha",description:`Nuevos: ${K?.createdMeasurements??0}  Ya estaban: ${K?.skippedMeasurements??0}  Rechazados: ${K?.rejected??0}`}),await w({silent:!0}),K}catch(J){console.error(J);const Y=(re=>typeof re=="string"?re:re?.message??JSON.stringify(re))(J);return Y.includes("HEALTH_CONNECT_NotInstalled")||Y.includes("HEALTH_CONNECT_NotSupported")?(t({title:"Health Connect no disponible",description:"Instala Health Connect para poder sincronizar tus registros.",variant:"destructive"}),null):Y.includes("HEALTH_CONNECT_ONLY_IN_APP")?(t({title:"Solo en la app Android",description:"La sincronizacin est disponible nicamente en la app Android.",variant:"destructive"}),null):Y.includes("HEALTH_CONNECT_PERMISSION_DENIED")?(t({title:"Permisos requeridos",description:"Debes conceder permisos de Health Connect para sincronizar.",variant:"destructive"}),null):Y.includes("HEALTH_CONNECT_INVALID_START_DATE")?(t({title:"Fecha de inicio invlida",description:"No se pudo leer la fecha de inicio del ciclo actual.",variant:"destructive"}),null):(t({title:"Error al sincronizar",description:Y,variant:"destructive"}),null)}finally{d(!1)}},[e,r,w,t]),Pe={currentCycle:r,archivedCycles:s,syncHealthConnectTemperatures:fe,addOrUpdateDataPoint:R,deleteRecord:j,startNewCycle:z,updateCycleDates:k,forceUpdateCycleStart:L,forceShiftNextCycleStart:M,checkCycleOverlap:S,isLoading:u,getCycleById:U,refreshData:N,toggleIgnoreRecord:O,setCycleIgnoreForAutoCalculations:F,addArchivedCycle:Z,deleteCycle:P,getMeasurementsForEntry:C};return G.jsx(i1.Provider,{value:Pe,children:n})},TH=()=>{const n=b.useContext(i1);if(!n)throw new Error("useCycleDataContext must be used within a CycleDataProvider");return n},s1=b.createContext(null),YB=({children:n})=>{const[e,t]=b.useState(!1),[r,i]=b.useState(!1),[s,a]=b.useState(!1),u=yo.isNativePlatform()&&yo.getPlatform()==="android",d=b.useCallback(async()=>{if(!u)return t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"NotAndroid"};a(!0);try{const h=await zB();return t(!!h.isAvailable),i(!!h.hasPermissions),h}catch(h){return console.error("Error al comprobar Health Connect",h),t(!1),i(!1),{isAvailable:!1,hasPermissions:!1,availability:"Error"}}finally{a(!1)}},[u]);return b.useEffect(()=>{d()},[d]),G.jsx(s1.Provider,{value:{isAvailable:e,hasPermissions:r,refreshPermissions:d,isChecking:s,isAndroidApp:u},children:n})},EH=()=>{const n=b.useContext(s1);if(!n)throw new Error("useHealthConnect must be used within a HealthConnectProvider");return n},Dv=({children:n})=>G.jsxs("div",{className:"relative h-app overflow-hidden app-background",children:[G.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[G.jsx("div",{className:"wave wave--left-1"}),G.jsx("div",{className:"wave wave--left-2"}),G.jsx("div",{className:"wave wave--left-3"}),G.jsx("div",{className:"wave wave--right-1"}),G.jsx("div",{className:"wave wave--right-2"}),G.jsx("div",{className:"wave wave--right-3"})]}),G.jsx("div",{className:"pointer-events-none absolute inset-0",children:G.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            radial-gradient(120% 120% at 0% 0%, rgba(251,113,133,0.12) 0, transparent 55%),
            radial-gradient(110% 110% at 100% 0%, rgba(244,114,182,0.12) 0, transparent 55%)
          `}})}),G.jsx("div",{className:"relative z-10 flex h-app flex-col",children:n})]});class XB extends Jt.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}reset=()=>{this.setState({error:null})};componentDidCatch(e,t){console.error("RouteErrorBoundary caught an error",e,t)}render(){const{error:e}=this.state,{FallbackComponent:t,children:r}=this.props;return e?G.jsx(t,{error:e,resetErrorBoundary:this.reset}):r}}var JB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZB=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vu=(n,e)=>{const t=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...d},h)=>b.createElement("svg",{ref:h,...JB,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${ZB(n)}`,...d},[...e.map(([m,g])=>b.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return t.displayName=`${n}`,t},e6=Vu("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),t6=Vu("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),n6=Vu("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),r6=Vu("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),i6=Vu("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),s6=Vu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),o6=()=>{const n=wo(),e=[{to:"/records",label:"Mis registros",icon:n6},{to:"/chart",label:"Grfica",icon:t6},{to:"/",label:"Ciclo actual",icon:r6},{to:"/archived-cycles",label:"Mis ciclos",icon:e6,isActive:t=>t.startsWith("/archived-cycles")||t.startsWith("/cycle/")},{to:"/settings",label:"Cuenta",icon:i6}];return G.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-fertiliapp-suave bg-white/90 backdrop-blur-md supports-[backdrop-filter]:bg-white/90 pt-2 pb-[env(safe-area-inset-bottom)] min-h-[var(--bottom-nav-safe)]",children:G.jsx("ul",{className:"mx-auto grid w-full max-w-md grid-cols-5 gap-2 px-2",children:e.map(({to:t,label:r,icon:i,isActive:s})=>G.jsx("li",{className:"flex",children:G.jsx(ON,{to:t,"aria-label":r,className:"group relative flex w-full flex-col items-center rounded-lg px-2 py-2 text-center transition-[color,transform] duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-300/60",children:({isActive:a})=>{const d=(s?s(n.pathname):!1)||a;return G.jsxs(G.Fragment,{children:[G.jsx("span",{"aria-hidden":!0,className:`absolute inset-0 rounded-3xl transition-all duration-200 ${d?"bg-fertiliapp-suave/80 ring-1 ring-fertiliapp-suave shadow-sm":"bg-transparent"}`}),G.jsx("span",{className:"relative z-10 flex h-7 w-7 items-center justify-center",children:G.jsx(i,{className:`h-6 w-6 transition-transform duration-200 ${d?"text-fertiliapp-fuerte scale-110":"text-gray-400 group-hover:text-gray-600"}`})}),G.jsx("span",{className:"sr-only",children:r})]})}})},t))})})},la=({children:n,hideBottomNav:e=!1})=>{const t=e?"relative z-10 flex-1 w-full overflow-y-auto":"relative z-10 flex-1 w-full overflow-y-auto pb-[var(--bottom-nav-safe)]";return G.jsxs("div",{className:"relative flex min-h-app flex-col overflow-hidden",children:[G.jsx("main",{className:t,children:n}),!e&&G.jsx(o6,{})]})};function o1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=o1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function a1(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=o1(n))&&(r&&(r+=" "),r+=e);return r}function a6(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=l1(e))&&(r&&(r+=" "),r+=t);return r}function l1(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=l1(n[r]))&&(t&&(t+=" "),t+=e);return t}var Iw="-";function l6(n){var e=c6(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(u){var d=u.split(Iw);return d[0]===""&&d.length!==1&&d.shift(),u1(d,e)||u6(u)}function a(u,d){var h=t[u]||[];return d&&i[u]?[].concat(h,i[u]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function u1(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?u1(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(Iw);return e.validators.find(function(a){var u=a.validator;return u(s)})?.classGroupId}}var MS=/^\[(.+)\]$/;function u6(n){if(MS.test(n)){var e=MS.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function c6(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=h6(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],u=s[1];Nv(u,r,a,e)}),r}function Nv(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:LS(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(d6(i)){Nv(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var u=a[0],d=a[1];Nv(d,LS(e,u),t,r)})})}function LS(n,e){var t=n;return e.split(Iw).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function d6(n){return n.isThemeGetter}function h6(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var d=u[0],h=u[1];return[e+d,h]})):a});return[r,s]}):n}function f6(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var u=t.get(a);if(u!==void 0)return u;if((u=r.get(a))!==void 0)return i(a,u),u},set:function(a,u){t.has(a)?t.set(a,u):i(a,u)}}}var c1="!";function p6(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var u=[],d=0,h=0,m,g=0;g<a.length;g++){var w=a[g];if(d===0){if(w===r&&(t||a.slice(g,g+i)===e)){u.push(a.slice(h,g)),h=g+i;continue}if(w==="/"){m=g;continue}}w==="["?d++:w==="]"&&d--}var E=u.length===0?a:a.substring(h),x=E.startsWith(c1),R=x?E.substring(1):E,C=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:R,maybePostfixModifierPosition:C}}}function m6(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function g6(n){return{cache:f6(n.cacheSize),splitModifiers:p6(n),...l6(n)}}var y6=/\s+/;function v6(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(y6).map(function(a){var u=t(a),d=u.modifiers,h=u.hasImportantModifier,m=u.baseClassName,g=u.maybePostfixModifierPosition,w=r(g?m.substring(0,g):m),E=!!g;if(!w){if(!g)return{isTailwindClass:!1,originalClassName:a};if(w=r(m),!w)return{isTailwindClass:!1,originalClassName:a};E=!1}var x=m6(d).join(":"),R=h?x+c1:x;return{isTailwindClass:!0,modifierId:R,classGroupId:w,originalClassName:a,hasPostfixModifier:E}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,m=u+d;return s.has(m)?!1:(s.add(m),i(d,h).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function _6(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=u;function u(h){var m=e[0],g=e.slice(1),w=g.reduce(function(E,x){return x(E)},m());return r=g6(w),i=r.cache.get,s=r.cache.set,a=d,d(h)}function d(h){var m=i(h);if(m)return m;var g=v6(h,r);return s(h,g),g}return function(){return a(a6.apply(null,arguments))}}function Tt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var d1=/^\[(?:([a-z-]+):)?(.+)\]$/i,w6=/^\d+\/\d+$/,T6=new Set(["px","full","screen"]),E6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,I6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Dr(n){return ga(n)||T6.has(n)||w6.test(n)||Vv(n)}function Vv(n){return Fa(n,"length",R6)}function P6(n){return Fa(n,"size",h1)}function C6(n){return Fa(n,"position",h1)}function A6(n){return Fa(n,"url",k6)}function gf(n){return Fa(n,"number",ga)}function ga(n){return!Number.isNaN(Number(n))}function b6(n){return n.endsWith("%")&&ga(n.slice(0,-1))}function Oc(n){return FS(n)||Fa(n,"number",FS)}function He(n){return d1.test(n)}function Mc(){return!0}function Ws(n){return E6.test(n)}function x6(n){return Fa(n,"",D6)}function Fa(n,e,t){var r=d1.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function R6(n){return I6.test(n)}function h1(){return!1}function k6(n){return n.startsWith("url(")}function FS(n){return Number.isInteger(Number(n))}function D6(n){return S6.test(n)}function N6(){var n=Tt("colors"),e=Tt("spacing"),t=Tt("blur"),r=Tt("brightness"),i=Tt("borderColor"),s=Tt("borderRadius"),a=Tt("borderSpacing"),u=Tt("borderWidth"),d=Tt("contrast"),h=Tt("grayscale"),m=Tt("hueRotate"),g=Tt("invert"),w=Tt("gap"),E=Tt("gradientColorStops"),x=Tt("gradientColorStopPositions"),R=Tt("inset"),C=Tt("margin"),j=Tt("opacity"),O=Tt("padding"),F=Tt("saturate"),z=Tt("scale"),ne=Tt("sepia"),Z=Tt("skew"),P=Tt("space"),S=Tt("translate"),k=function(){return["auto","contain","none"]},L=function(){return["auto","hidden","clip","visible","scroll"]},M=function(){return["auto",He,e]},U=function(){return[He,e]},N=function(){return["",Dr]},fe=function(){return["auto",ga,He]},Pe=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},J=function(){return["solid","dashed","dotted","double","none"]},ie=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Y=function(){return["start","end","center","between","around","evenly","stretch"]},re=function(){return["","0",He]},K=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},D=function(){return[ga,gf]},H=function(){return[ga,He]};return{cacheSize:500,theme:{colors:[Mc],spacing:[Dr],blur:["none","",Ws,He],brightness:D(),borderColor:[n],borderRadius:["none","","full",Ws,He],borderSpacing:U(),borderWidth:N(),contrast:D(),grayscale:re(),hueRotate:H(),invert:re(),gap:U(),gradientColorStops:[n],gradientColorStopPositions:[b6,Vv],inset:M(),margin:M(),opacity:D(),padding:U(),saturate:D(),scale:D(),sepia:re(),skew:H(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[Ws]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Pe(),[He])}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[R]}],"inset-x":[{"inset-x":[R]}],"inset-y":[{"inset-y":[R]}],start:[{start:[R]}],end:[{end:[R]}],top:[{top:[R]}],right:[{right:[R]}],bottom:[{bottom:[R]}],left:[{left:[R]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oc]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",Oc]}],"grid-cols":[{"grid-cols":[Mc]}],"col-start-end":[{col:["auto",{span:["full",Oc]},He]}],"col-start":[{"col-start":fe()}],"col-end":[{"col-end":fe()}],"grid-rows":[{"grid-rows":[Mc]}],"row-start-end":[{row:["auto",{span:[Oc]},He]}],"row-start":[{"row-start":fe()}],"row-end":[{"row-end":fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal"].concat(Y())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Y(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Y(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[O]}],px:[{px:[O]}],py:[{py:[O]}],ps:[{ps:[O]}],pe:[{pe:[O]}],pt:[{pt:[O]}],pr:[{pr:[O]}],pb:[{pb:[O]}],pl:[{pl:[O]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",He,e]}],"min-w":[{"min-w":["min","max","fit",He,Dr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ws]},Ws,He]}],h:[{h:[He,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",He,Dr]}],"max-h":[{"max-h":[He,e,"min","max","fit"]}],"font-size":[{text:["base",Ws,Vv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gf]}],"font-family":[{font:[Mc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",ga,gf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",He,Dr]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(J(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Dr]}],"underline-offset":[{"underline-offset":["auto",He,Dr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Pe(),[C6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",P6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},A6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[E]}],"gradient-via":[{via:[E]}],"gradient-to":[{to:[E]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[].concat(J(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:J()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(J())}],"outline-offset":[{"outline-offset":[He,Dr]}],"outline-w":[{outline:[Dr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Dr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ws,x6]}],"shadow-color":[{shadow:[Mc]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":ie()}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Ws,He]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[F]}],sepia:[{sepia:[ne]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[z]}],"scale-x":[{"scale-x":[z]}],"scale-y":[{"scale-y":[z]}],rotate:[{rotate:[Oc,He]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Dr,gf]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var V6=_6(N6);function Ua(...n){return V6(a1(n))}function US(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function wm(...n){return e=>{let t=!1;const r=n.map(i=>{const s=US(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():US(n[i],null)}}}}function Oa(...n){return b.useCallback(wm(...n),n)}var O6=Symbol.for("react.lazy"),bp=e_[" use ".trim().toString()];function M6(n){return typeof n=="object"&&n!==null&&"then"in n}function f1(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===O6&&"_payload"in n&&M6(n._payload)}function L6(n){const e=U6(n),t=b.forwardRef((r,i)=>{let{children:s,...a}=r;f1(s)&&typeof bp=="function"&&(s=bp(s._payload));const u=b.Children.toArray(s),d=u.find(B6);if(d){const h=d.props.children,m=u.map(g=>g===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return G.jsx(e,{...a,ref:i,children:b.isValidElement(h)?b.cloneElement(h,void 0,m):null})}return G.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var F6=L6("Slot");function U6(n){const e=b.forwardRef((t,r)=>{let{children:i,...s}=t;if(f1(i)&&typeof bp=="function"&&(i=bp(i._payload)),b.isValidElement(i)){const a=z6(i),u=$6(s,i.props);return i.type!==b.Fragment&&(u.ref=r?wm(r,a):a),b.cloneElement(i,u)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var j6=Symbol("radix.slottable");function B6(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===j6}function $6(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function z6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const jS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,BS=a1,p1=(n,e)=>t=>{var r;if(e?.variants==null)return BS(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const m=t?.[h],g=s?.[h];if(m===null)return null;const w=jS(m)||jS(g);return i[h][w]}),u=t&&Object.entries(t).reduce((h,m)=>{let[g,w]=m;return w===void 0||(h[g]=w),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:g,className:w,...E}=m;return Object.entries(E).every(x=>{let[R,C]=x;return Array.isArray(C)?C.includes({...s,...u}[R]):{...s,...u}[R]===C})?[...h,g,w]:h},[]);return BS(n,a,d,t?.class,t?.className)},W6=p1("inline-flex items-center justify-center rounded-3xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-fertiliapp-fuerte text-white shadow-sm hover:brightness-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",xs:"h-8 rounded-2xl px-2 text-xs",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),eu=Jt.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?F6:"button";return G.jsx(a,{className:Ua(W6({variant:e,size:t,className:n})),ref:s,...i})});eu.displayName="Button";const H6=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i,m1=({error:n,resetErrorBoundary:e})=>{const t=s_(),{user:r}=_m(),i=typeof navigator<"u"&&navigator.onLine===!1,s=n?.message?n.message:String(n),a=H6.test(s),u=i&&a?"Pantalla no disponible sin conexin":"No se pudo cargar la pantalla",d=i&&a?"Esta pantalla no est disponible sin conexin porque no se haba cargado antes.":"Ocurri un error al cargar esta pantalla. Puedes volver atrs, ir al inicio o reintentar.",h=()=>{e(),t(-1)},m=()=>{e(),t("/")},g=G.jsx("div",{className:"flex min-h-app flex-col items-center justify-center px-6 py-10 text-center",children:G.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white/85 p-6 shadow-lg backdrop-blur-md",children:[G.jsx("h1",{className:"text-2xl font-semibold text-fertiliapp-fuerte",children:u}),G.jsx("p",{className:"text-sm text-gray-600",children:d}),G.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[G.jsx(eu,{type:"button",onClick:h,children:"Volver"}),G.jsx(eu,{type:"button",variant:"secondary",onClick:m,children:"Ir a inicio"}),G.jsx(eu,{type:"button",variant:"outline",onClick:()=>window.location.reload(),children:"Reintentar"})]}),!i&&G.jsxs("details",{className:"text-left text-xs text-gray-500",children:[G.jsx("summary",{className:"cursor-pointer font-medium text-gray-600",children:"Detalles tcnicos"}),G.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-words rounded-2xl bg-gray-100 p-3 text-[0.7rem] text-gray-600",children:s})]})]})});return r?G.jsx(la,{children:g}):G.jsx(Dv,{children:g})},$S=/(dynamically imported|Loading chunk|ChunkLoadError|Failed to fetch)/i;function q6({children:n}){const[e,t]=b.useState(null);return b.useEffect(()=>{const r=s=>{const a=s?.reason?.message??String(s?.reason);$S.test(a)&&(s?.preventDefault?.(),t(s?.reason instanceof Error?s.reason:new Error(a)))},i=s=>{const a=s?.message??String(s?.error?.message??s?.error??"");$S.test(a)&&(s?.preventDefault?.(),t(s?.error instanceof Error?s.error:new Error(a)))};return window.addEventListener("unhandledrejection",r),window.addEventListener("error",i),()=>{window.removeEventListener("unhandledrejection",r),window.removeEventListener("error",i)}},[]),e?G.jsx(m1,{error:e,resetErrorBoundary:()=>t(null)}):n}function or(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function IH(n,e){const t=b.createContext(e),r=s=>{const{children:a,...u}=s,d=b.useMemo(()=>u,Object.values(u));return G.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function i(s){const a=b.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function g1(n,e=[]){let t=[];function r(s,a){const u=b.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:w,children:E,...x}=g,R=w?.[n]?.[d]||u,C=b.useMemo(()=>x,Object.values(x));return G.jsx(R.Provider,{value:C,children:E})};h.displayName=s+"Provider";function m(g,w){const E=w?.[n]?.[d]||u,x=b.useContext(E);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,m]}const i=()=>{const s=t.map(a=>b.createContext(a));return function(u){const d=u?.[n]||s;return b.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return i.scopeName=n,[r,G6(i,...e)]}function G6(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((u,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...u,...g}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function zS(n){const e=K6(n),t=b.forwardRef((r,i)=>{const{children:s,...a}=r,u=b.Children.toArray(s),d=u.find(Y6);if(d){const h=d.props.children,m=u.map(g=>g===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return G.jsx(e,{...a,ref:i,children:b.isValidElement(h)?b.cloneElement(h,void 0,m):null})}return G.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function K6(n){const e=b.forwardRef((t,r)=>{const{children:i,...s}=t;if(b.isValidElement(i)){const a=J6(i),u=X6(s,i.props);return i.type!==b.Fragment&&(u.ref=r?wm(r,a):a),b.cloneElement(i,u)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Q6=Symbol("radix.slottable");function Y6(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Q6}function X6(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function J6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Z6(n){const e=n+"CollectionProvider",[t,r]=g1(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=R=>{const{scope:C,children:j}=R,O=Jt.useRef(null),F=Jt.useRef(new Map).current;return G.jsx(i,{scope:C,itemMap:F,collectionRef:O,children:j})};a.displayName=e;const u=n+"CollectionSlot",d=zS(u),h=Jt.forwardRef((R,C)=>{const{scope:j,children:O}=R,F=s(u,j),z=Oa(C,F.collectionRef);return G.jsx(d,{ref:z,children:O})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",w=zS(m),E=Jt.forwardRef((R,C)=>{const{scope:j,children:O,...F}=R,z=Jt.useRef(null),ne=Oa(C,z),Z=s(m,j);return Jt.useEffect(()=>(Z.itemMap.set(z,{ref:z,...F}),()=>{Z.itemMap.delete(z)})),G.jsx(w,{[g]:"",ref:ne,children:O})});E.displayName=m;function x(R){const C=s(n+"CollectionConsumer",R);return Jt.useCallback(()=>{const O=C.collectionRef.current;if(!O)return[];const F=Array.from(O.querySelectorAll(`[${g}]`));return Array.from(C.itemMap.values()).sort((Z,P)=>F.indexOf(Z.ref.current)-F.indexOf(P.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:a,Slot:h,ItemSlot:E},x,r]}function e5(n){const e=t5(n),t=b.forwardRef((r,i)=>{const{children:s,...a}=r,u=b.Children.toArray(s),d=u.find(r5);if(d){const h=d.props.children,m=u.map(g=>g===d?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return G.jsx(e,{...a,ref:i,children:b.isValidElement(h)?b.cloneElement(h,void 0,m):null})}return G.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}function t5(n){const e=b.forwardRef((t,r)=>{const{children:i,...s}=t;if(b.isValidElement(i)){const a=s5(i),u=i5(s,i.props);return i.type!==b.Fragment&&(u.ref=r?wm(r,a):a),b.cloneElement(i,u)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var n5=Symbol("radix.slottable");function r5(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===n5}function i5(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...u)=>{const d=s(...u);return i(...u),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function s5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var o5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wi=o5.reduce((n,e)=>{const t=e5(`Primitive.${e}`),r=b.forwardRef((i,s)=>{const{asChild:a,...u}=i,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),G.jsx(d,{...u,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function y1(n,e){n&&t_.flushSync(()=>n.dispatchEvent(e))}function Ma(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>e.current?.(...t),[])}function a5(n,e=globalThis?.document){const t=Ma(n);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var l5="DismissableLayer",Ov="dismissableLayer.update",u5="dismissableLayer.pointerDownOutside",c5="dismissableLayer.focusOutside",WS,v1=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_1=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:u,...d}=n,h=b.useContext(v1),[m,g]=b.useState(null),w=m?.ownerDocument??globalThis?.document,[,E]=b.useState({}),x=Oa(e,P=>g(P)),R=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),j=R.indexOf(C),O=m?R.indexOf(m):-1,F=h.layersWithOutsidePointerEventsDisabled.size>0,z=O>=j,ne=h5(P=>{const S=P.target,k=[...h.branches].some(L=>L.contains(S));!z||k||(i?.(P),a?.(P),P.defaultPrevented||u?.())},w),Z=f5(P=>{const S=P.target;[...h.branches].some(L=>L.contains(S))||(s?.(P),a?.(P),P.defaultPrevented||u?.())},w);return a5(P=>{O===h.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},w),b.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(WS=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),HS(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=WS)}},[m,w,t,h]),b.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),HS())},[m,h]),b.useEffect(()=>{const P=()=>E({});return document.addEventListener(Ov,P),()=>document.removeEventListener(Ov,P)},[]),G.jsx(wi.div,{...d,ref:x,style:{pointerEvents:F?z?"auto":"none":void 0,...n.style},onFocusCapture:or(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:or(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:or(n.onPointerDownCapture,ne.onPointerDownCapture)})});_1.displayName=l5;var d5="DismissableLayerBranch",w1=b.forwardRef((n,e)=>{const t=b.useContext(v1),r=b.useRef(null),i=Oa(e,r);return b.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),G.jsx(wi.div,{...n,ref:i})});w1.displayName=d5;function h5(n,e=globalThis?.document){const t=Ma(n),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=u=>{if(u.target&&!r.current){let d=function(){T1(u5,t,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function f5(n,e=globalThis?.document){const t=Ma(n),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&T1(c5,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function HS(){const n=new CustomEvent(Ov);document.dispatchEvent(n)}function T1(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?y1(i,s):i.dispatchEvent(s)}var p5=_1,m5=w1,Sd=globalThis?.document?b.useLayoutEffect:()=>{},g5="Portal",E1=b.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=b.useState(!1);Sd(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?ND.createPortal(G.jsx(wi.div,{...r,ref:e}),a):null});E1.displayName=g5;function y5(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var I1=n=>{const{present:e,children:t}=n,r=v5(e),i=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),s=Oa(r.ref,_5(i));return typeof t=="function"||r.isPresent?b.cloneElement(i,{ref:s}):null};I1.displayName="Presence";function v5(n){const[e,t]=b.useState(),r=b.useRef(null),i=b.useRef(n),s=b.useRef("none"),a=n?"mounted":"unmounted",[u,d]=y5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=yf(r.current);s.current=u==="mounted"?h:"none"},[u]),Sd(()=>{const h=r.current,m=i.current;if(m!==n){const w=s.current,E=yf(h);n?d("MOUNT"):E==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&w!==E?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Sd(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,g=E=>{const R=yf(r.current).includes(CSS.escape(E.animationName));if(E.target===e&&R&&(d("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},w=E=>{E.target===e&&(s.current=yf(r.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function yf(n){return n?.animationName||"none"}function _5(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var w5=e_[" useInsertionEffect ".trim().toString()]||Sd;function T5({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=E5({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:i;{const m=b.useRef(n!==void 0);b.useEffect(()=>{const g=m.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const h=b.useCallback(m=>{if(u){const g=I5(m)?m(n):m;g!==n&&a.current?.(g)}else s(m)},[u,n,s,a]);return[d,h]}function E5({defaultProp:n,onChange:e}){const[t,r]=b.useState(n),i=b.useRef(t),s=b.useRef(e);return w5(()=>{s.current=e},[e]),b.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function I5(n){return typeof n=="function"}var S5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),P5="VisuallyHidden",Sw=b.forwardRef((n,e)=>G.jsx(wi.span,{...n,ref:e,style:{...S5,...n.style}}));Sw.displayName=P5;var Pw="ToastProvider",[Cw,C5,A5]=Z6("Toast"),[S1]=g1("Toast",[A5]),[b5,Tm]=S1(Pw),P1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=n,[u,d]=b.useState(null),[h,m]=b.useState(0),g=b.useRef(!1),w=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Pw}\`. Expected non-empty \`string\`.`),G.jsx(Cw.Provider,{scope:e,children:G.jsx(b5,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:b.useCallback(()=>m(E=>E+1),[]),onToastRemove:b.useCallback(()=>m(E=>E-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:w,children:a})})};P1.displayName=Pw;var C1="ToastViewport",x5=["F8"],Mv="toast.viewportPause",Lv="toast.viewportResume",A1=b.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=x5,label:i="Notifications ({hotkey})",...s}=n,a=Tm(C1,t),u=C5(t),d=b.useRef(null),h=b.useRef(null),m=b.useRef(null),g=b.useRef(null),w=Oa(e,g,a.onViewportChange),E=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=a.toastCount>0;b.useEffect(()=>{const C=j=>{r.length!==0&&r.every(F=>j[F]||j.code===F)&&g.current?.focus()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[r]),b.useEffect(()=>{const C=d.current,j=g.current;if(x&&C&&j){const O=()=>{if(!a.isClosePausedRef.current){const Z=new CustomEvent(Mv);j.dispatchEvent(Z),a.isClosePausedRef.current=!0}},F=()=>{if(a.isClosePausedRef.current){const Z=new CustomEvent(Lv);j.dispatchEvent(Z),a.isClosePausedRef.current=!1}},z=Z=>{!C.contains(Z.relatedTarget)&&F()},ne=()=>{C.contains(document.activeElement)||F()};return C.addEventListener("focusin",O),C.addEventListener("focusout",z),C.addEventListener("pointermove",O),C.addEventListener("pointerleave",ne),window.addEventListener("blur",O),window.addEventListener("focus",F),()=>{C.removeEventListener("focusin",O),C.removeEventListener("focusout",z),C.removeEventListener("pointermove",O),C.removeEventListener("pointerleave",ne),window.removeEventListener("blur",O),window.removeEventListener("focus",F)}}},[x,a.isClosePausedRef]);const R=b.useCallback(({tabbingDirection:C})=>{const O=u().map(F=>{const z=F.ref.current,ne=[z,...$5(z)];return C==="forwards"?ne:ne.reverse()});return(C==="forwards"?O.reverse():O).flat()},[u]);return b.useEffect(()=>{const C=g.current;if(C){const j=O=>{const F=O.altKey||O.ctrlKey||O.metaKey;if(O.key==="Tab"&&!F){const ne=document.activeElement,Z=O.shiftKey;if(O.target===C&&Z){h.current?.focus();return}const k=R({tabbingDirection:Z?"backwards":"forwards"}),L=k.findIndex(M=>M===ne);by(k.slice(L+1))?O.preventDefault():Z?h.current?.focus():m.current?.focus()}};return C.addEventListener("keydown",j),()=>C.removeEventListener("keydown",j)}},[u,R]),G.jsxs(m5,{ref:d,role:"region","aria-label":i.replace("{hotkey}",E),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&G.jsx(Fv,{ref:h,onFocusFromOutsideViewport:()=>{const C=R({tabbingDirection:"forwards"});by(C)}}),G.jsx(Cw.Slot,{scope:t,children:G.jsx(wi.ol,{tabIndex:-1,...s,ref:w})}),x&&G.jsx(Fv,{ref:m,onFocusFromOutsideViewport:()=>{const C=R({tabbingDirection:"backwards"});by(C)}})]})});A1.displayName=C1;var b1="ToastFocusProxy",Fv=b.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=Tm(b1,t);return G.jsx(Sw,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const u=a.relatedTarget;!s.viewport?.contains(u)&&r()}})});Fv.displayName=b1;var $d="Toast",R5="toast.swipeStart",k5="toast.swipeMove",D5="toast.swipeCancel",N5="toast.swipeEnd",x1=b.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...a}=n,[u,d]=T5({prop:r,defaultProp:i??!0,onChange:s,caller:$d});return G.jsx(I1,{present:t||u,children:G.jsx(M5,{open:u,...a,ref:e,onClose:()=>d(!1),onPause:Ma(n.onPause),onResume:Ma(n.onResume),onSwipeStart:or(n.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:or(n.onSwipeMove,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:or(n.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:or(n.onSwipeEnd,h=>{const{x:m,y:g}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),d(!1)})})})});x1.displayName=$d;var[V5,O5]=S1($d,{onClose(){}}),M5=b.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:m,onSwipeMove:g,onSwipeCancel:w,onSwipeEnd:E,...x}=n,R=Tm($d,t),[C,j]=b.useState(null),O=Oa(e,fe=>j(fe)),F=b.useRef(null),z=b.useRef(null),ne=i||R.duration,Z=b.useRef(0),P=b.useRef(ne),S=b.useRef(0),{onToastAdd:k,onToastRemove:L}=R,M=Ma(()=>{C?.contains(document.activeElement)&&R.viewport?.focus(),a()}),U=b.useCallback(fe=>{!fe||fe===1/0||(window.clearTimeout(S.current),Z.current=new Date().getTime(),S.current=window.setTimeout(M,fe))},[M]);b.useEffect(()=>{const fe=R.viewport;if(fe){const Pe=()=>{U(P.current),h?.()},J=()=>{const ie=new Date().getTime()-Z.current;P.current=P.current-ie,window.clearTimeout(S.current),d?.()};return fe.addEventListener(Mv,J),fe.addEventListener(Lv,Pe),()=>{fe.removeEventListener(Mv,J),fe.removeEventListener(Lv,Pe)}}},[R.viewport,ne,d,h,U]),b.useEffect(()=>{s&&!R.isClosePausedRef.current&&U(ne)},[s,ne,R.isClosePausedRef,U]),b.useEffect(()=>(k(),()=>L()),[k,L]);const N=b.useMemo(()=>C?M1(C):null,[C]);return R.viewport?G.jsxs(G.Fragment,{children:[N&&G.jsx(L5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:N}),G.jsx(V5,{scope:t,onClose:M,children:t_.createPortal(G.jsx(Cw.ItemSlot,{scope:t,children:G.jsx(p5,{asChild:!0,onEscapeKeyDown:or(u,()=>{R.isFocusedToastEscapeKeyDownRef.current||M(),R.isFocusedToastEscapeKeyDownRef.current=!1}),children:G.jsx(wi.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":R.swipeDirection,...x,ref:O,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:or(n.onKeyDown,fe=>{fe.key==="Escape"&&(u?.(fe.nativeEvent),fe.nativeEvent.defaultPrevented||(R.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:or(n.onPointerDown,fe=>{fe.button===0&&(F.current={x:fe.clientX,y:fe.clientY})}),onPointerMove:or(n.onPointerMove,fe=>{if(!F.current)return;const Pe=fe.clientX-F.current.x,J=fe.clientY-F.current.y,ie=!!z.current,Y=["left","right"].includes(R.swipeDirection),re=["left","up"].includes(R.swipeDirection)?Math.min:Math.max,K=Y?re(0,Pe):0,D=Y?0:re(0,J),H=fe.pointerType==="touch"?10:2,oe={x:K,y:D},ae={originalEvent:fe,delta:oe};ie?(z.current=oe,vf(k5,g,ae,{discrete:!1})):qS(oe,R.swipeDirection,H)?(z.current=oe,vf(R5,m,ae,{discrete:!1}),fe.target.setPointerCapture(fe.pointerId)):(Math.abs(Pe)>H||Math.abs(J)>H)&&(F.current=null)}),onPointerUp:or(n.onPointerUp,fe=>{const Pe=z.current,J=fe.target;if(J.hasPointerCapture(fe.pointerId)&&J.releasePointerCapture(fe.pointerId),z.current=null,F.current=null,Pe){const ie=fe.currentTarget,Y={originalEvent:fe,delta:Pe};qS(Pe,R.swipeDirection,R.swipeThreshold)?vf(N5,E,Y,{discrete:!0}):vf(D5,w,Y,{discrete:!0}),ie.addEventListener("click",re=>re.preventDefault(),{once:!0})}})})})}),R.viewport)})]}):null}),L5=n=>{const{__scopeToast:e,children:t,...r}=n,i=Tm($d,e),[s,a]=b.useState(!1),[u,d]=b.useState(!1);return j5(()=>a(!0)),b.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:G.jsx(E1,{asChild:!0,children:G.jsx(Sw,{...r,children:s&&G.jsxs(G.Fragment,{children:[i.label," ",t]})})})},F5="ToastTitle",R1=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return G.jsx(wi.div,{...r,ref:e})});R1.displayName=F5;var U5="ToastDescription",k1=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return G.jsx(wi.div,{...r,ref:e})});k1.displayName=U5;var D1="ToastAction",N1=b.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?G.jsx(O1,{altText:t,asChild:!0,children:G.jsx(Aw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${D1}\`. Expected non-empty \`string\`.`),null)});N1.displayName=D1;var V1="ToastClose",Aw=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=O5(V1,t);return G.jsx(O1,{asChild:!0,children:G.jsx(wi.button,{type:"button",...r,ref:e,onClick:or(n.onClick,i.onClose)})})});Aw.displayName=V1;var O1=b.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return G.jsx(wi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function M1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),B5(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...M1(r))}}),e}function vf(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?y1(i,s):i.dispatchEvent(s)}var qS=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function j5(n=()=>{}){const e=Ma(n);Sd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function B5(n){return n.nodeType===n.ELEMENT_NODE}function $5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function by(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var z5=P1,L1=A1,F1=x1,U1=R1,j1=k1,B1=N1,$1=Aw;const W5=z5,z1=Jt.forwardRef(({className:n,...e},t)=>G.jsx(L1,{ref:t,className:Ua("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));z1.displayName=L1.displayName;const H5=p1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),W1=Jt.forwardRef(({className:n,variant:e,...t},r)=>G.jsx(F1,{ref:r,className:Ua(H5({variant:e}),n),...t}));W1.displayName=F1.displayName;const q5=Jt.forwardRef(({className:n,...e},t)=>G.jsx(B1,{ref:t,className:Ua("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));q5.displayName=B1.displayName;const H1=Jt.forwardRef(({className:n,...e},t)=>G.jsx($1,{ref:t,className:Ua("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:G.jsx(s6,{className:"h-4 w-4"})}));H1.displayName=$1.displayName;const q1=Jt.forwardRef(({className:n,...e},t)=>G.jsx(U1,{ref:t,className:Ua("text-sm font-semibold",n),...e}));q1.displayName=U1.displayName;const G1=Jt.forwardRef(({className:n,...e},t)=>G.jsx(j1,{ref:t,className:Ua("text-sm opacity-90",n),...e}));G1.displayName=j1.displayName;function G5(){const{toasts:n}=cw();return G.jsxs(W5,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>G.jsxs(W1,{...s,children:[G.jsxs("div",{className:"grid gap-1",children:[t&&G.jsx(q1,{children:t}),r&&G.jsx(G1,{children:r})]}),i,G.jsx(H1,{})]},e)),G.jsx(z1,{})]})}const K1=b.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Em=b.createContext({}),bw=b.createContext(null),Im=typeof document<"u",K5=Im?b.useLayoutEffect:b.useEffect,Q1=b.createContext({strict:!1}),xw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Q5="framerAppearId",Y1="data-"+xw(Q5);function Y5(n,e,t,r){const{visualElement:i}=b.useContext(Em),s=b.useContext(Q1),a=b.useContext(bw),u=b.useContext(K1).reducedMotion,d=b.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const h=d.current;b.useInsertionEffect(()=>{h&&h.update(t,a)});const m=b.useRef(!!(t[Y1]&&!window.HandoffComplete));return K5(()=>{h&&(h.render(),m.current&&h.animationState&&h.animationState.animateChanges())}),b.useEffect(()=>{h&&(h.updateFeatures(),!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),h}function Hl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function X5(n,e,t){return b.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Hl(t)&&(t.current=r))},[e])}function Pd(n){return typeof n=="string"||Array.isArray(n)}function Sm(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Rw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kw=["initial",...Rw];function Pm(n){return Sm(n.animate)||kw.some(e=>Pd(n[e]))}function X1(n){return!!(Pm(n)||n.variants)}function J5(n,e){if(Pm(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Pd(t)?t:void 0,animate:Pd(r)?r:void 0}}return n.inherit!==!1?e:{}}function Z5(n){const{initial:e,animate:t}=J5(n,b.useContext(Em));return b.useMemo(()=>({initial:e,animate:t}),[GS(e),GS(t)])}function GS(n){return Array.isArray(n)?n.join(" "):n}const KS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cd={};for(const n in KS)Cd[n]={isEnabled:e=>KS[n].some(t=>!!e[t])};function e9(n){for(const e in n)Cd[e]={...Cd[e],...n[e]}}const J1=b.createContext({}),Z1=b.createContext({}),t9=Symbol.for("motionComponentSymbol");function n9({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&e9(n);function s(u,d){let h;const m={...b.useContext(K1),...u,layoutId:r9(u)},{isStatic:g}=m,w=Z5(u),E=r(u,g);if(!g&&Im){w.visualElement=Y5(i,E,m,e);const x=b.useContext(Z1),R=b.useContext(Q1).strict;w.visualElement&&(h=w.visualElement.loadFeatures(m,R,n,x))}return b.createElement(Em.Provider,{value:w},h&&w.visualElement?b.createElement(h,{visualElement:w.visualElement,...m}):null,t(i,u,X5(E,w.visualElement,d),E,g,w.visualElement))}const a=b.forwardRef(s);return a[t9]=i,a}function r9({layoutId:n}){const e=b.useContext(J1).id;return e&&n!==void 0?e+"-"+n:n}function i9(n){function e(r,i={}){return n9(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const s9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dw(n){return typeof n!="string"||n.includes("-")?!1:!!(s9.indexOf(n)>-1||/[A-Z]/.test(n))}const xp={};function o9(n){Object.assign(xp,n)}const zd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ja=new Set(zd);function eR(n,{layout:e,layoutId:t}){return ja.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!xp[n]||n==="opacity")}const Qn=n=>!!(n&&n.getVelocity),a9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},l9=zd.length;function u9(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<l9;a++){const u=zd[a];if(n[u]!==void 0){const d=a9[u]||u;s+=`${d}(${n[u]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const tR=n=>e=>typeof e=="string"&&e.startsWith(n),nR=tR("--"),Uv=tR("var(--"),c9=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,d9=(n,e)=>e&&typeof n=="number"?e.transform(n):n,vo=(n,e,t)=>Math.min(Math.max(t,n),e),Ba={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},rd={...Ba,transform:n=>vo(0,1,n)},_f={...Ba,default:1},id=n=>Math.round(n*1e5)/1e5,Cm=/(-)?([\d]*\.?[\d])+/g,rR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,h9=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Wd(n){return typeof n=="string"}const Hd=n=>({test:e=>Wd(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Hs=Hd("deg"),gi=Hd("%"),Oe=Hd("px"),f9=Hd("vh"),p9=Hd("vw"),QS={...gi,parse:n=>gi.parse(n)/100,transform:n=>gi.transform(n*100)},YS={...Ba,transform:Math.round},iR={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,size:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,rotate:Hs,rotateX:Hs,rotateY:Hs,rotateZ:Hs,scale:_f,scaleX:_f,scaleY:_f,scaleZ:_f,skew:Hs,skewX:Hs,skewY:Hs,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:rd,originX:QS,originY:QS,originZ:Oe,zIndex:YS,fillOpacity:rd,strokeOpacity:rd,numOctaves:YS};function Nw(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:u}=n;let d=!1,h=!1,m=!0;for(const g in e){const w=e[g];if(nR(g)){s[g]=w;continue}const E=iR[g],x=d9(w,E);if(ja.has(g)){if(d=!0,a[g]=x,!m)continue;w!==(E.default||0)&&(m=!1)}else g.startsWith("origin")?(h=!0,u[g]=x):i[g]=x}if(e.transform||(d||r?i.transform=u9(n.transform,t,m,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:w="50%",originZ:E=0}=u;i.transformOrigin=`${g} ${w} ${E}`}}const Vw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sR(n,e,t){for(const r in e)!Qn(e[r])&&!eR(r,t)&&(n[r]=e[r])}function m9({transformTemplate:n},e,t){return b.useMemo(()=>{const r=Vw();return Nw(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function g9(n,e,t){const r=n.style||{},i={};return sR(i,r,n),Object.assign(i,m9(n,e,t)),n.transformValues?n.transformValues(i):i}function y9(n,e,t){const r={},i=g9(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const v9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||v9.has(n)}let oR=n=>!Rp(n);function _9(n){n&&(oR=e=>e.startsWith("on")?!Rp(e):n(e))}try{_9(require("@emotion/is-prop-valid").default)}catch{}function w9(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(oR(i)||t===!0&&Rp(i)||!e&&!Rp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function XS(n,e,t){return typeof n=="string"?n:Oe.transform(e+t*n)}function T9(n,e,t){const r=XS(e,n.x,n.width),i=XS(t,n.y,n.height);return`${r} ${i}`}const E9={offset:"stroke-dashoffset",array:"stroke-dasharray"},I9={offset:"strokeDashoffset",array:"strokeDasharray"};function S9(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?E9:I9;n[s.offset]=Oe.transform(-r);const a=Oe.transform(e),u=Oe.transform(t);n[s.array]=`${a} ${u}`}function Ow(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},m,g,w){if(Nw(n,h,m,w),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:x,dimensions:R}=n;E.transform&&(R&&(x.transform=E.transform),delete E.transform),R&&(i!==void 0||s!==void 0||x.transform)&&(x.transformOrigin=T9(R,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),a!==void 0&&S9(E,a,u,d,!1)}const aR=()=>({...Vw(),attrs:{}}),Mw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function P9(n,e,t,r){const i=b.useMemo(()=>{const s=aR();return Ow(s,e,{enableHardwareAcceleration:!1},Mw(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};sR(s,n.style,n),i.style={...s,...i.style}}return i}function C9(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=(Dw(t)?P9:y9)(r,s,a,t),m={...w9(r,typeof t=="string",n),...d,ref:i},{children:g}=r,w=b.useMemo(()=>Qn(g)?g.get():g,[g]);return b.createElement(t,{...m,children:w})}}function lR(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const uR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cR(n,e,t,r){lR(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(uR.has(i)?i:xw(i),e.attrs[i])}function Lw(n,e){const{style:t}=n,r={};for(const i in t)(Qn(t[i])||e.style&&Qn(e.style[i])||eR(i,n))&&(r[i]=t[i]);return r}function dR(n,e){const t=Lw(n,e);for(const r in n)if(Qn(n[r])||Qn(e[r])){const i=zd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function Fw(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function A9(n){const e=b.useRef(null);return e.current===null&&(e.current=n()),e.current}const kp=n=>Array.isArray(n),b9=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),x9=n=>kp(n)?n[n.length-1]||0:n;function $f(n){const e=Qn(n)?n.get():n;return b9(e)?e.toValue():e}function R9({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:k9(r,i,s,n),renderState:e()};return t&&(a.mount=u=>t(r,u,a)),a}const hR=n=>(e,t)=>{const r=b.useContext(Em),i=b.useContext(bw),s=()=>R9(n,e,r,i);return t?s():A9(s)};function k9(n,e,t,r){const i={},s=r(n,{});for(const w in s)i[w]=$f(s[w]);let{initial:a,animate:u}=n;const d=Pm(n),h=X1(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Sm(g)&&(Array.isArray(g)?g:[g]).forEach(E=>{const x=Fw(n,E);if(!x)return;const{transitionEnd:R,transition:C,...j}=x;for(const O in j){let F=j[O];if(Array.isArray(F)){const z=m?F.length-1:0;F=F[z]}F!==null&&(i[O]=F)}for(const O in R)i[O]=R[O]}),i}const $t=n=>n;class JS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function D9(n){let e=new JS,t=new JS,r=0,i=!1,s=!1;const a=new WeakSet,u={schedule:(d,h=!1,m=!1)=>{const g=m&&i,w=g?e:t;return h&&a.add(d),w.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const m=e.order[h];m(d),a.has(m)&&(u.schedule(m),n())}i=!1,s&&(s=!1,u.process(d))}};return u}const wf=["prepare","read","update","preRender","render","postRender"],N9=40;function V9(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=wf.reduce((g,w)=>(g[w]=D9(()=>t=!0),g),{}),a=g=>s[g].process(i),u=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,N9),1),i.timestamp=g,i.isProcessing=!0,wf.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(u))},d=()=>{t=!0,r=!0,i.isProcessing||n(u)};return{schedule:wf.reduce((g,w)=>{const E=s[w];return g[w]=(x,R=!1,C=!1)=>(t||d(),E.schedule(x,R,C)),g},{}),cancel:g=>wf.forEach(w=>s[w].cancel(g)),state:i,steps:s}}const{schedule:Et,cancel:Ji,state:Sn,steps:xy}=V9(typeof requestAnimationFrame<"u"?requestAnimationFrame:$t,!0),O9={useVisualState:hR({scrapeMotionValuesFromProps:dR,createRenderState:aR,onMount:(n,e,{renderState:t,latestValues:r})=>{Et.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Et.render(()=>{Ow(t,r,{enableHardwareAcceleration:!1},Mw(e.tagName),n.transformTemplate),cR(e,t)})}})},M9={useVisualState:hR({scrapeMotionValuesFromProps:Lw,createRenderState:Vw})};function L9(n,{forwardMotionProps:e=!1},t,r){return{...Dw(n)?O9:M9,preloadedFeatures:t,useRender:C9(e),createVisualElement:r,Component:n}}function Wi(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const fR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Am(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const F9=n=>e=>fR(e)&&n(e,Am(e));function Hi(n,e,t,r){return Wi(n,e,F9(t),r)}const U9=(n,e)=>t=>e(n(t)),ao=(...n)=>n.reduce(U9);function pR(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const ZS=pR("dragHorizontal"),eP=pR("dragVertical");function mR(n){let e=!1;if(n==="y")e=eP();else if(n==="x")e=ZS();else{const t=ZS(),r=eP();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function gR(){const n=mR(!0);return n?(n(),!1):!0}class Ao{constructor(e){this.isMounted=!1,this.node=e}update(){}}function tP(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||gR())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&Et.update(()=>u[r](s,a))};return Hi(n.current,t,i,{passive:!n.getProps()[r]})}class j9 extends Ao{mount(){this.unmount=ao(tP(this.node,!0),tP(this.node,!1))}unmount(){}}class B9 extends Ao{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ao(Wi(this.node.current,"focus",()=>this.onFocus()),Wi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const yR=(n,e)=>e?n===e?!0:yR(n,e.parentElement):!1;function Ry(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Am(t))}class $9 extends Ao{constructor(){super(...arguments),this.removeStartListeners=$t,this.removeEndListeners=$t,this.removeAccessibleListeners=$t,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Hi(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:m,globalTapTarget:g}=this.node.getProps();Et.update(()=>{!g&&!yR(this.node.current,u.target)?m&&m(u,d):h&&h(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=Hi(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ao(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||Ry("up",(d,h)=>{const{onTap:m}=this.node.getProps();m&&Et.update(()=>m(d,h))})};this.removeEndListeners(),this.removeEndListeners=Wi(this.node.current,"keyup",a),Ry("down",(u,d)=>{this.startPress(u,d)})},t=Wi(this.node.current,"keydown",e),r=()=>{this.isPressing&&Ry("cancel",(s,a)=>this.cancelPress(s,a))},i=Wi(this.node.current,"blur",r);this.removeAccessibleListeners=ao(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Et.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!gR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Et.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Hi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Wi(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ao(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const jv=new WeakMap,ky=new WeakMap,z9=n=>{const e=jv.get(n.target);e&&e(n)},W9=n=>{n.forEach(z9)};function H9({root:n,...e}){const t=n||document;ky.has(t)||ky.set(t,{});const r=ky.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(W9,{root:n,...e})),r[i]}function q9(n,e,t){const r=H9(e);return jv.set(n,t),r.observe(n),()=>{jv.delete(n),r.unobserve(n)}}const G9={some:0,all:1};class K9 extends Ao{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:G9[i]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),w=h?m:g;w&&w(d)};return q9(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Q9(e,t))&&this.startObserver()}unmount(){}}function Q9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Y9={inView:{Feature:K9},tap:{Feature:$9},focus:{Feature:B9},hover:{Feature:j9}};function vR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function X9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function J9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function bm(n,e,t){const r=n.getProps();return Fw(r,e,t!==void 0?t:r.custom,X9(n),J9(n))}let Uw=$t;const Ta=n=>n*1e3,qi=n=>n/1e3,Z9={current:!1},_R=n=>Array.isArray(n)&&typeof n[0]=="number";function wR(n){return!!(!n||typeof n=="string"&&TR[n]||_R(n)||Array.isArray(n)&&n.every(wR))}const Hc=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,TR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hc([0,.65,.55,1]),circOut:Hc([.55,0,1,.45]),backIn:Hc([.31,.01,.66,-.59]),backOut:Hc([.33,1.53,.69,.99])};function ER(n){if(n)return _R(n)?Hc(n):Array.isArray(n)?n.map(ER):TR[n]}function e$(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:u,times:d}={}){const h={[e]:t};d&&(h.offset=d);const m=ER(u);return Array.isArray(m)&&(h.easing=m),n.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function t$(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const IR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,n$=1e-7,r$=12;function i$(n,e,t,r,i){let s,a,u=0;do a=e+(t-e)/2,s=IR(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>n$&&++u<r$);return a}function qd(n,e,t,r){if(n===e&&t===r)return $t;const i=s=>i$(s,0,1,n,t);return s=>s===0||s===1?s:IR(i(s),e,r)}const s$=qd(.42,0,1,1),o$=qd(0,0,.58,1),SR=qd(.42,0,.58,1),a$=n=>Array.isArray(n)&&typeof n[0]!="number",PR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,CR=n=>e=>1-n(1-e),jw=n=>1-Math.sin(Math.acos(n)),AR=CR(jw),l$=PR(jw),bR=qd(.33,1.53,.69,.99),Bw=CR(bR),u$=PR(Bw),c$=n=>(n*=2)<1?.5*Bw(n):.5*(2-Math.pow(2,-10*(n-1))),d$={linear:$t,easeIn:s$,easeInOut:SR,easeOut:o$,circIn:jw,circInOut:l$,circOut:AR,backIn:Bw,backInOut:u$,backOut:bR,anticipate:c$},nP=n=>{if(Array.isArray(n)){Uw(n.length===4);const[e,t,r,i]=n;return qd(e,t,r,i)}else if(typeof n=="string")return d$[n];return n},$w=(n,e)=>t=>!!(Wd(t)&&h9.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),xR=(n,e,t)=>r=>{if(!Wd(r))return r;const[i,s,a,u]=r.match(Cm);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},h$=n=>vo(0,255,n),Dy={...Ba,transform:n=>Math.round(h$(n))},ya={test:$w("rgb","red"),parse:xR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Dy.transform(n)+", "+Dy.transform(e)+", "+Dy.transform(t)+", "+id(rd.transform(r))+")"};function f$(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Bv={test:$w("#"),parse:f$,transform:ya.transform},ql={test:$w("hsl","hue"),parse:xR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+gi.transform(id(e))+", "+gi.transform(id(t))+", "+id(rd.transform(r))+")"},Nn={test:n=>ya.test(n)||Bv.test(n)||ql.test(n),parse:n=>ya.test(n)?ya.parse(n):ql.test(n)?ql.parse(n):Bv.parse(n),transform:n=>Wd(n)?n:n.hasOwnProperty("red")?ya.transform(n):ql.transform(n)},Rt=(n,e,t)=>-t*n+t*e+n;function Ny(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function p$({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;i=Ny(d,u,n+1/3),s=Ny(d,u,n),a=Ny(d,u,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const Vy=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},m$=[Bv,ya,ql],g$=n=>m$.find(e=>e.test(n));function rP(n){const e=g$(n);let t=e.parse(n);return e===ql&&(t=p$(t)),t}const RR=(n,e)=>{const t=rP(n),r=rP(e),i={...t};return s=>(i.red=Vy(t.red,r.red,s),i.green=Vy(t.green,r.green,s),i.blue=Vy(t.blue,r.blue,s),i.alpha=Rt(t.alpha,r.alpha,s),ya.transform(i))};function y$(n){var e,t;return isNaN(n)&&Wd(n)&&(((e=n.match(Cm))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(rR))===null||t===void 0?void 0:t.length)||0)>0}const kR={regex:c9,countKey:"Vars",token:"${v}",parse:$t},DR={regex:rR,countKey:"Colors",token:"${c}",parse:Nn.parse},NR={regex:Cm,countKey:"Numbers",token:"${n}",parse:Ba.parse};function Oy(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Dp(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Oy(t,kR),Oy(t,DR),Oy(t,NR),t}function VR(n){return Dp(n).values}function OR(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Dp(n),s=e.length;return a=>{let u=i;for(let d=0;d<s;d++)d<r?u=u.replace(kR.token,a[d]):d<r+t?u=u.replace(DR.token,Nn.transform(a[d])):u=u.replace(NR.token,id(a[d]));return u}}const v$=n=>typeof n=="number"?0:n;function _$(n){const e=VR(n);return OR(n)(e.map(v$))}const _o={test:y$,parse:VR,createTransformer:OR,getAnimatableNone:_$},MR=(n,e)=>t=>`${t>0?e:n}`;function LR(n,e){return typeof n=="number"?t=>Rt(n,e,t):Nn.test(n)?RR(n,e):n.startsWith("var(")?MR(n,e):UR(n,e)}const FR=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>LR(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},w$=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=LR(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},UR=(n,e)=>{const t=_o.createTransformer(e),r=Dp(n),i=Dp(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ao(FR(r.values,i.values),t):MR(n,e)},Ad=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},iP=(n,e)=>t=>Rt(n,e,t);function T$(n){return typeof n=="number"?iP:typeof n=="string"?Nn.test(n)?RR:UR:Array.isArray(n)?FR:typeof n=="object"?w$:iP}function E$(n,e,t){const r=[],i=t||T$(n[0]),s=n.length-1;for(let a=0;a<s;a++){let u=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||$t:e;u=ao(d,u)}r.push(u)}return r}function jR(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Uw(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=E$(e,r,i),u=a.length,d=h=>{let m=0;if(u>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const g=Ad(n[m],n[m+1],h);return a[m](g)};return t?h=>d(vo(n[0],n[s-1],h)):d}function I$(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Ad(0,e,r);n.push(Rt(t,1,i))}}function S$(n){const e=[0];return I$(e,n.length-1),e}function P$(n,e){return n.map(t=>t*e)}function C$(n,e){return n.map(()=>e||SR).splice(0,n.length-1)}function Np({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=a$(r)?r.map(nP):nP(r),s={done:!1,value:e[0]},a=P$(t&&t.length===e.length?t:S$(e),n),u=jR(a,e,{ease:Array.isArray(i)?i:C$(e,i)});return{calculatedDuration:n,next:d=>(s.value=u(d),s.done=d>=n,s)}}function BR(n,e){return e?n*(1e3/e):0}const A$=5;function $R(n,e,t){const r=Math.max(e-A$,0);return BR(t-n(r),e-r)}const My=.001,b$=.01,x$=10,R$=.05,k$=1;function D$({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=vo(R$,k$,a),n=vo(b$,x$,qi(n)),a<1?(i=h=>{const m=h*a,g=m*n,w=m-t,E=$v(h,a),x=Math.exp(-g);return My-w/E*x},s=h=>{const g=h*a*n,w=g*t+t,E=Math.pow(a,2)*Math.pow(h,2)*n,x=Math.exp(-g),R=$v(Math.pow(h,2),a);return(-i(h)+My>0?-1:1)*((w-E)*x)/R}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-My+m*g},s=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const u=5/n,d=V$(i,s,u);if(n=Ta(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const N$=12;function V$(n,e,t){let r=t;for(let i=1;i<N$;i++)r=r-n(r)/e(r);return r}function $v(n,e){return n*Math.sqrt(1-e*e)}const O$=["duration","bounce"],M$=["stiffness","damping","mass"];function sP(n,e){return e.some(t=>n[t]!==void 0)}function L$(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!sP(n,M$)&&sP(n,O$)){const t=D$(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function zR({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:u,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:w}=L$({...r,velocity:-qi(r.velocity||0)}),E=g||0,x=d/(2*Math.sqrt(u*h)),R=s-i,C=qi(Math.sqrt(u/h)),j=Math.abs(R)<5;t||(t=j?.01:2),e||(e=j?.005:.5);let O;if(x<1){const F=$v(C,x);O=z=>{const ne=Math.exp(-x*C*z);return s-ne*((E+x*C*R)/F*Math.sin(F*z)+R*Math.cos(F*z))}}else if(x===1)O=F=>s-Math.exp(-C*F)*(R+(E+C*R)*F);else{const F=C*Math.sqrt(x*x-1);O=z=>{const ne=Math.exp(-x*C*z),Z=Math.min(F*z,300);return s-ne*((E+x*C*R)*Math.sinh(Z)+F*R*Math.cosh(Z))/F}}return{calculatedDuration:w&&m||null,next:F=>{const z=O(F);if(w)a.done=F>=m;else{let ne=E;F!==0&&(x<1?ne=$R(O,F,z):ne=0);const Z=Math.abs(ne)<=t,P=Math.abs(s-z)<=e;a.done=Z&&P}return a.value=a.done?s:z,a}}}function oP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],w={done:!1,value:g},E=S=>u!==void 0&&S<u||d!==void 0&&S>d,x=S=>u===void 0?d:d===void 0||Math.abs(u-S)<Math.abs(d-S)?u:d;let R=t*e;const C=g+R,j=a===void 0?C:a(C);j!==C&&(R=j-g);const O=S=>-R*Math.exp(-S/r),F=S=>j+O(S),z=S=>{const k=O(S),L=F(S);w.done=Math.abs(k)<=h,w.value=w.done?j:L};let ne,Z;const P=S=>{E(w.value)&&(ne=S,Z=zR({keyframes:[w.value,x(w.value)],velocity:$R(F,S,w.value),damping:i,stiffness:s,restDelta:h,restSpeed:m}))};return P(0),{calculatedDuration:null,next:S=>{let k=!1;return!Z&&ne===void 0&&(k=!0,z(S),P(S)),ne!==void 0&&S>ne?Z.next(S-ne):(!k&&z(S),w)}}}const F$=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Et.update(e,!0),stop:()=>Ji(e),now:()=>Sn.isProcessing?Sn.timestamp:performance.now()}},aP=2e4;function lP(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<aP;)e+=t,r=n.next(e);return e>=aP?1/0:e}const U$={decay:oP,inertia:oP,tween:Np,keyframes:Np,spring:zR};function Vp({autoplay:n=!0,delay:e=0,driver:t=F$,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:m,onUpdate:g,...w}){let E=1,x=!1,R,C;const j=()=>{C=new Promise(D=>{R=D})};j();let O;const F=U$[i]||Np;let z;F!==Np&&typeof r[0]!="number"&&(z=jR([0,100],r,{clamp:!1}),r=[0,100]);const ne=F({...w,keyframes:r});let Z;u==="mirror"&&(Z=F({...w,keyframes:[...r].reverse(),velocity:-(w.velocity||0)}));let P="idle",S=null,k=null,L=null;ne.calculatedDuration===null&&s&&(ne.calculatedDuration=lP(ne));const{calculatedDuration:M}=ne;let U=1/0,N=1/0;M!==null&&(U=M+a,N=U*(s+1)-a);let fe=0;const Pe=D=>{if(k===null)return;E>0&&(k=Math.min(k,D)),E<0&&(k=Math.min(D-N/E,k)),S!==null?fe=S:fe=Math.round(D-k)*E;const H=fe-e*(E>=0?1:-1),oe=E>=0?H<0:H>N;fe=Math.max(H,0),P==="finished"&&S===null&&(fe=N);let ae=fe,ue=ne;if(s){const $e=Math.min(fe,N)/U;let ct=Math.floor($e),Gt=$e%1;!Gt&&$e>=1&&(Gt=1),Gt===1&&ct--,ct=Math.min(ct,s+1),ct%2&&(u==="reverse"?(Gt=1-Gt,a&&(Gt-=a/U)):u==="mirror"&&(ue=Z)),ae=vo(0,1,Gt)*U}const ve=oe?{done:!1,value:r[0]}:ue.next(ae);z&&(ve.value=z(ve.value));let{done:Re}=ve;!oe&&M!==null&&(Re=E>=0?fe>=N:fe<=0);const Ue=S===null&&(P==="finished"||P==="running"&&Re);return g&&g(ve.value),Ue&&Y(),ve},J=()=>{O&&O.stop(),O=void 0},ie=()=>{P="idle",J(),R(),j(),k=L=null},Y=()=>{P="finished",m&&m(),J(),R()},re=()=>{if(x)return;O||(O=t(Pe));const D=O.now();d&&d(),S!==null?k=D-S:(!k||P==="finished")&&(k=D),P==="finished"&&j(),L=k,S=null,P="running",O.start()};n&&re();const K={then(D,H){return C.then(D,H)},get time(){return qi(fe)},set time(D){D=Ta(D),fe=D,S!==null||!O||E===0?S=D:k=O.now()-D/E},get duration(){const D=ne.calculatedDuration===null?lP(ne):ne.calculatedDuration;return qi(D)},get speed(){return E},set speed(D){D===E||!O||(E=D,K.time=qi(fe))},get state(){return P},play:re,pause:()=>{P="paused",S=fe},stop:()=>{x=!0,P!=="idle"&&(P="idle",h&&h(),ie())},cancel:()=>{L!==null&&Pe(L),ie()},complete:()=>{P="finished"},sample:D=>(k=0,Pe(D))};return K}function j$(n){let e;return()=>(e===void 0&&(e=n()),e)}const B$=j$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Tf=10,z$=2e4,W$=(n,e)=>e.type==="spring"||n==="backgroundColor"||!wR(e.ease);function H$(n,e,{onUpdate:t,onComplete:r,...i}){if(!(B$()&&$$.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,d,h=!1;const m=()=>{d=new Promise(F=>{u=F})};m();let{keyframes:g,duration:w=300,ease:E,times:x}=i;if(W$(e,i)){const F=Vp({...i,repeat:0,delay:0});let z={done:!1,value:g[0]};const ne=[];let Z=0;for(;!z.done&&Z<z$;)z=F.sample(Z),ne.push(z.value),Z+=Tf;x=void 0,g=ne,w=Z-Tf,E="linear"}const R=e$(n.owner.current,e,g,{...i,duration:w,ease:E,times:x}),C=()=>{h=!1,R.cancel()},j=()=>{h=!0,Et.update(C),u(),m()};return R.onfinish=()=>{h||(n.set(t$(g,i)),r&&r(),j())},{then(F,z){return d.then(F,z)},attachTimeline(F){return R.timeline=F,R.onfinish=null,$t},get time(){return qi(R.currentTime||0)},set time(F){R.currentTime=Ta(F)},get speed(){return R.playbackRate},set speed(F){R.playbackRate=F},get duration(){return qi(w)},play:()=>{a||(R.play(),Ji(C))},pause:()=>R.pause(),stop:()=>{if(a=!0,R.playState==="idle")return;const{currentTime:F}=R;if(F){const z=Vp({...i,autoplay:!1});n.setWithVelocity(z.sample(F-Tf).value,z.sample(F).value,Tf)}j()},complete:()=>{h||R.finish()},cancel:j}}function q$({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:$t,pause:$t,stop:$t,then:s=>(s(),Promise.resolve()),cancel:$t,complete:$t});return e?Vp({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const G$={type:"spring",stiffness:500,damping:25,restSpeed:10},K$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Q$={type:"keyframes",duration:.8},Y$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X$=(n,{keyframes:e})=>e.length>2?Q$:ja.has(n)?n.startsWith("scale")?K$(e[1]):G$:Y$,zv=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_o.test(e)||e==="0")&&!e.startsWith("url(")),J$=new Set(["brightness","contrast","saturate","opacity"]);function Z$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Cm)||[];if(!r)return n;const i=t.replace(r,"");let s=J$.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const ez=/([a-z-]*)\(.*?\)/g,Wv={..._o,getAnimatableNone:n=>{const e=n.match(ez);return e?e.map(Z$).join(" "):n}},tz={...iR,color:Nn,backgroundColor:Nn,outlineColor:Nn,fill:Nn,stroke:Nn,borderColor:Nn,borderTopColor:Nn,borderRightColor:Nn,borderBottomColor:Nn,borderLeftColor:Nn,filter:Wv,WebkitFilter:Wv},zw=n=>tz[n];function WR(n,e){let t=zw(n);return t!==Wv&&(t=_o),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const HR=n=>/^0[^.\s]+$/.test(n);function nz(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||HR(n)}function rz(n,e,t,r){const i=zv(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let u;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),nz(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(u=s[h]);if(i&&d.length&&u)for(let h=0;h<d.length;h++){const m=d[h];s[m]=WR(e,u)}return s}function iz({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:u,from:d,elapsed:h,...m}){return!!Object.keys(m).length}function Ww(n,e){return n[e]||n.default||n}const sz={skipAnimations:!1},Hw=(n,e,t,r={})=>i=>{const s=Ww(r,n)||{},a=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ta(a);const d=rz(e,n,t,s),h=d[0],m=d[d.length-1],g=zv(n,h),w=zv(n,m);let E={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-u,onUpdate:x=>{e.set(x),s.onUpdate&&s.onUpdate(x)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(iz(s)||(E={...E,...X$(n,E)}),E.duration&&(E.duration=Ta(E.duration)),E.repeatDelay&&(E.repeatDelay=Ta(E.repeatDelay)),!g||!w||Z9.current||s.type===!1||sz.skipAnimations)return q$(E);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=H$(e,n,E);if(x)return x}return Vp(E)};function Op(n){return!!(Qn(n)&&n.add)}const qR=n=>/^\-?\d*\.?\d+$/.test(n);function qw(n,e){n.indexOf(e)===-1&&n.push(e)}function Gw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Kw{constructor(){this.subscriptions=[]}add(e){return qw(this.subscriptions,e),()=>Gw(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oz=n=>!isNaN(parseFloat(n));class az{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=Sn;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=oz(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Kw);const r=this.events[e].add(t);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?BR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eu(n,e){return new az(n,e)}const GR=n=>e=>e.test(n),lz={test:n=>n==="auto",parse:n=>n},KR=[Ba,Oe,gi,Hs,p9,f9,lz],Lc=n=>KR.find(GR(n)),uz=[...KR,Nn,_o],cz=n=>uz.find(GR(n));function dz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Eu(t))}function hz(n,e){const t=bm(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const u=x9(s[a]);dz(n,a,u)}}function fz(n,e,t){var r,i;const s=Object.keys(e).filter(u=>!n.hasValue(u)),a=s.length;if(a)for(let u=0;u<a;u++){const d=s[u],h=e[d];let m=null;Array.isArray(h)&&(m=h[0]),m===null&&(m=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),m!=null&&(typeof m=="string"&&(qR(m)||HR(m))?m=parseFloat(m):!cz(m)&&_o.test(h)&&(m=WR(d,h)),n.addValue(d,Eu(m,{owner:n})),t[d]===void 0&&(t[d]=m),m!==null&&n.setBaseTarget(d,m))}}function pz(n,e){return e?(e[n]||e.default||e).from:void 0}function mz(n,e,t){const r={};for(const i in n){const s=pz(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function gz({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function yz(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function QR(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...u}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in u){const w=n.getValue(g),E=u[g];if(!w||E===void 0||m&&gz(m,g))continue;const x={delay:t,elapsed:0,...Ww(s||{},g)};if(window.HandoffAppearAnimations){const j=n.getProps()[Y1];if(j){const O=window.HandoffAppearAnimations(j,g,w,Et);O!==null&&(x.elapsed=O,x.isHandoff=!0)}}let R=!x.isHandoff&&!yz(w,E);if(x.type==="spring"&&(w.getVelocity()||x.velocity)&&(R=!1),w.animation&&(R=!1),R)continue;w.start(Hw(g,w,E,n.shouldReduceMotion&&ja.has(g)?{type:!1}:x));const C=w.animation;Op(d)&&(d.add(g),C.then(()=>d.remove(g))),h.push(C)}return a&&Promise.all(h).then(()=>{a&&hz(n,a)}),h}function Hv(n,e,t={}){const r=bm(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(QR(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:g}=i;return vz(n,e,h+d,m,g,t)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,h]=u==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function vz(n,e,t=0,r=0,i=1,s){const a=[],u=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(_z).forEach((h,m)=>{h.notify("AnimationStart",e),a.push(Hv(h,e,{...s,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function _z(n,e){return n.sortNodePosition(e)}function wz(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Hv(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=Hv(n,e,t);else{const i=typeof e=="function"?bm(n,e,t.custom):e;r=Promise.all(QR(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const Tz=[...Rw].reverse(),Ez=Rw.length;function Iz(n){return e=>Promise.all(e.map(({animation:t,options:r})=>wz(n,t,r)))}function Sz(n){let e=Iz(n);const t=Cz();let r=!0;const i=(d,h)=>{const m=bm(n,h);if(m){const{transition:g,transitionEnd:w,...E}=m;d={...d,...E,...w}}return d};function s(d){e=d(n)}function a(d,h){const m=n.getProps(),g=n.getVariantContext(!0)||{},w=[],E=new Set;let x={},R=1/0;for(let j=0;j<Ez;j++){const O=Tz[j],F=t[O],z=m[O]!==void 0?m[O]:g[O],ne=Pd(z),Z=O===h?F.isActive:null;Z===!1&&(R=j);let P=z===g[O]&&z!==m[O]&&ne;if(P&&r&&n.manuallyAnimateOnMount&&(P=!1),F.protectedKeys={...x},!F.isActive&&Z===null||!z&&!F.prevProp||Sm(z)||typeof z=="boolean")continue;let k=Pz(F.prevProp,z)||O===h&&F.isActive&&!P&&ne||j>R&&ne,L=!1;const M=Array.isArray(z)?z:[z];let U=M.reduce(i,{});Z===!1&&(U={});const{prevResolvedValues:N={}}=F,fe={...N,...U},Pe=J=>{k=!0,E.has(J)&&(L=!0,E.delete(J)),F.needsAnimating[J]=!0};for(const J in fe){const ie=U[J],Y=N[J];if(x.hasOwnProperty(J))continue;let re=!1;kp(ie)&&kp(Y)?re=!vR(ie,Y):re=ie!==Y,re?ie!==void 0?Pe(J):E.add(J):ie!==void 0&&E.has(J)?Pe(J):F.protectedKeys[J]=!0}F.prevProp=z,F.prevResolvedValues=U,F.isActive&&(x={...x,...U}),r&&n.blockInitialAnimation&&(k=!1),k&&(!P||L)&&w.push(...M.map(J=>({animation:J,options:{type:O,...d}})))}if(E.size){const j={};E.forEach(O=>{const F=n.getBaseTarget(O);F!==void 0&&(j[O]=F)}),w.push({animation:j})}let C=!!w.length;return r&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(w):Promise.resolve()}function u(d,h,m){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(E=>{var x;return(x=E.animationState)===null||x===void 0?void 0:x.setActive(d,h)}),t[d].isActive=h;const w=a(m,d);for(const E in t)t[E].protectedKeys={};return w}return{animateChanges:a,setActive:u,setAnimateFunction:s,getState:()=>t}}function Pz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!vR(e,n):!1}function ra(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Cz(){return{animate:ra(!0),whileInView:ra(),whileHover:ra(),whileTap:ra(),whileDrag:ra(),whileFocus:ra(),exit:ra()}}class Az extends Ao{constructor(e){super(e),e.animationState||(e.animationState=Sz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Sm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let bz=0;class xz extends Ao{constructor(){super(...arguments),this.id=bz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Rz={animation:{Feature:Az},exit:{Feature:xz}},uP=(n,e)=>Math.abs(n-e);function kz(n,e){const t=uP(n.x,e.x),r=uP(n.y,e.y);return Math.sqrt(t**2+r**2)}class YR{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Fy(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,E=kz(g.offset,{x:0,y:0})>=3;if(!w&&!E)return;const{point:x}=g,{timestamp:R}=Sn;this.history.push({...x,timestamp:R});const{onStart:C,onMove:j}=this.handlers;w||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,g)},this.handlePointerMove=(g,w)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ly(w,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(g,w)=>{this.end();const{onEnd:E,onSessionEnd:x,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Fy(g.type==="pointercancel"?this.lastMoveEventInfo:Ly(w,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,C),x&&x(g,C)},!fR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=Am(e),u=Ly(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=Sn;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,Fy(u,this.history)),this.removeListeners=ao(Hi(this.contextWindow,"pointermove",this.handlePointerMove),Hi(this.contextWindow,"pointerup",this.handlePointerUp),Hi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ji(this.updatePoint)}}function Ly(n,e){return e?{point:e(n.point)}:n}function cP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Fy({point:n},e){return{point:n,delta:cP(n,XR(e)),offset:cP(n,Dz(e)),velocity:Nz(e,.1)}}function Dz(n){return n[0]}function XR(n){return n[n.length-1]}function Nz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=XR(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Ta(e)));)t--;if(!r)return{x:0,y:0};const s=qi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function cr(n){return n.max-n.min}function qv(n,e=0,t=.01){return Math.abs(n-e)<=t}function dP(n,e,t,r=.5){n.origin=r,n.originPoint=Rt(e.min,e.max,n.origin),n.scale=cr(t)/cr(e),(qv(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Rt(t.min,t.max,n.origin)-n.originPoint,(qv(n.translate)||isNaN(n.translate))&&(n.translate=0)}function sd(n,e,t,r){dP(n.x,e.x,t.x,r?r.originX:void 0),dP(n.y,e.y,t.y,r?r.originY:void 0)}function hP(n,e,t){n.min=t.min+e.min,n.max=n.min+cr(e)}function Vz(n,e,t){hP(n.x,e.x,t.x),hP(n.y,e.y,t.y)}function fP(n,e,t){n.min=e.min-t.min,n.max=n.min+cr(e)}function od(n,e,t){fP(n.x,e.x,t.x),fP(n.y,e.y,t.y)}function Oz(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Rt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Rt(t,n,r.max):Math.min(n,t)),n}function pP(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Mz(n,{top:e,left:t,bottom:r,right:i}){return{x:pP(n.x,t,i),y:pP(n.y,e,r)}}function mP(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Lz(n,e){return{x:mP(n.x,e.x),y:mP(n.y,e.y)}}function Fz(n,e){let t=.5;const r=cr(n),i=cr(e);return i>r?t=Ad(e.min,e.max-r,n.min):r>i&&(t=Ad(n.min,n.max-i,e.min)),vo(0,1,t)}function Uz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Gv=.35;function jz(n=Gv){return n===!1?n=0:n===!0&&(n=Gv),{x:gP(n,"left","right"),y:gP(n,"top","bottom")}}function gP(n,e,t){return{min:yP(n,e),max:yP(n,t)}}function yP(n,e){return typeof n=="number"?n:n[e]||0}const vP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gl=()=>({x:vP(),y:vP()}),_P=()=>({min:0,max:0}),Xt=()=>({x:_P(),y:_P()});function wr(n){return[n("x"),n("y")]}function JR({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Bz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function $z(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Uy(n){return n===void 0||n===1}function Kv({scale:n,scaleX:e,scaleY:t}){return!Uy(n)||!Uy(e)||!Uy(t)}function ua(n){return Kv(n)||ZR(n)||n.z||n.rotate||n.rotateX||n.rotateY}function ZR(n){return wP(n.x)||wP(n.y)}function wP(n){return n&&n!=="0%"}function Mp(n,e,t){const r=n-t,i=e*r;return t+i}function TP(n,e,t,r,i){return i!==void 0&&(n=Mp(n,i,r)),Mp(n,t,r)+e}function Qv(n,e=0,t=1,r,i){n.min=TP(n.min,e,t,r,i),n.max=TP(n.max,e,t,r,i)}function ek(n,{x:e,y:t}){Qv(n.x,e.translate,e.scale,e.originPoint),Qv(n.y,t.translate,t.scale,t.originPoint)}function zz(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let u=0;u<i;u++){s=t[u],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Kl(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ek(n,a)),r&&ua(s.latestValues)&&Kl(n,s.latestValues))}e.x=EP(e.x),e.y=EP(e.y)}function EP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function qs(n,e){n.min=n.min+e,n.max=n.max+e}function IP(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=Rt(n.min,n.max,s);Qv(n,e[t],e[r],a,e.scale)}const Wz=["x","scaleX","originX"],Hz=["y","scaleY","originY"];function Kl(n,e){IP(n.x,e,Wz),IP(n.y,e,Hz)}function tk(n,e){return JR($z(n.getBoundingClientRect(),e))}function qz(n,e,t){const r=tk(n,t),{scroll:i}=e;return i&&(qs(r.x,i.offset.x),qs(r.y,i.offset.y)),r}const nk=({current:n})=>n?n.ownerDocument.defaultView:null,Gz=new WeakMap;class Kz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Am(m,"page").point)},s=(m,g)=>{const{drag:w,dragPropagation:E,onDragStart:x}=this.getProps();if(w&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=mR(w),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(C=>{let j=this.getAxisMotionValue(C).get()||0;if(gi.test(j)){const{projection:O}=this.visualElement;if(O&&O.layout){const F=O.layout.layoutBox[C];F&&(j=cr(F)*(parseFloat(j)/100))}}this.originPoint[C]=j}),x&&Et.update(()=>x(m,g),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:w,dragDirectionLock:E,onDirectionLock:x,onDrag:R}=this.getProps();if(!w&&!this.openGlobalLock)return;const{offset:C}=g;if(E&&this.currentDirection===null){this.currentDirection=Qz(C),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),R&&R(m,g)},u=(m,g)=>this.stop(m,g),d=()=>wr(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new YR(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:nk(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Et.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Ef(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Oz(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Hl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Mz(i.layoutBox,t):this.constraints=!1,this.elastic=jz(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&wr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Uz(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=qz(r,i.root,this.visualElement.getTransformPagePoint());let a=Lz(i.layout.layoutBox,s);if(t){const u=t(Bz(a));this.hasMutatedConstraints=!!u,u&&(a=JR(u))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=wr(m=>{if(!Ef(m,t,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const w=i?200:1e6,E=i?40:1e7,x={type:"inertia",velocity:r?e[m]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(m,x)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Hw(e,r,0,t))}stopAnimation(){wr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wr(t=>{const{drag:r}=this.getProps();if(!Ef(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[t];s.set(e[t]-Rt(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Hl(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wr(a=>{const u=this.getAxisMotionValue(a);if(u){const d=u.get();i[a]=Fz({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wr(a=>{if(!Ef(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(Rt(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;Gz.set(this.visualElement,this);const e=this.visualElement.current,t=Hi(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Hl(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=Wi(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(wr(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Gv,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:u}}}function Ef(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Qz(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Yz extends Ao{constructor(e){super(e),this.removeGroupControls=$t,this.removeListeners=$t,this.controls=new Kz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$t}unmount(){this.removeGroupControls(),this.removeListeners()}}const SP=n=>(e,t)=>{n&&Et.update(()=>n(e,t))};class Xz extends Ao{constructor(){super(...arguments),this.removePointerDownListener=$t}onPointerDown(e){this.session=new YR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:SP(e),onStart:SP(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Et.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=Hi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Jz(){const n=b.useContext(bw);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=b.useId();return b.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const zf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Fc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Oe.test(n))n=parseFloat(n);else return n;const t=PP(n,e.target.x),r=PP(n,e.target.y);return`${t}% ${r}%`}},Zz={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=_o.parse(n);if(i.length>5)return r;const s=_o.createTransformer(n),a=typeof i[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=u,i[1+a]/=d;const h=Rt(u,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class eW extends Jt.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;o9(tW),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),zf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Et.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rk(n){const[e,t]=Jz(),r=b.useContext(J1);return Jt.createElement(eW,{...n,layoutGroup:r,switchLayoutGroup:b.useContext(Z1),isPresent:e,safeToRemove:t})}const tW={borderRadius:{...Fc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fc,borderTopRightRadius:Fc,borderBottomLeftRadius:Fc,borderBottomRightRadius:Fc,boxShadow:Zz},ik=["TopLeft","TopRight","BottomLeft","BottomRight"],nW=ik.length,CP=n=>typeof n=="string"?parseFloat(n):n,AP=n=>typeof n=="number"||Oe.test(n);function rW(n,e,t,r,i,s){i?(n.opacity=Rt(0,t.opacity!==void 0?t.opacity:1,iW(r)),n.opacityExit=Rt(e.opacity!==void 0?e.opacity:1,0,sW(r))):s&&(n.opacity=Rt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<nW;a++){const u=`border${ik[a]}Radius`;let d=bP(e,u),h=bP(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||AP(d)===AP(h)?(n[u]=Math.max(Rt(CP(d),CP(h),r),0),(gi.test(h)||gi.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=Rt(e.rotate||0,t.rotate||0,r))}function bP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const iW=sk(0,.5,AR),sW=sk(.5,.95,$t);function sk(n,e,t){return r=>r<n?0:r>e?1:t(Ad(n,e,r))}function xP(n,e){n.min=e.min,n.max=e.max}function _r(n,e){xP(n.x,e.x),xP(n.y,e.y)}function RP(n,e,t,r,i){return n-=e,n=Mp(n,1/t,r),i!==void 0&&(n=Mp(n,1/i,r)),n}function oW(n,e=0,t=1,r=.5,i,s=n,a=n){if(gi.test(e)&&(e=parseFloat(e),e=Rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Rt(s.min,s.max,r);n===s&&(u-=e),n.min=RP(n.min,e,t,u,i),n.max=RP(n.max,e,t,u,i)}function kP(n,e,[t,r,i],s,a){oW(n,e[t],e[r],e[i],e.scale,s,a)}const aW=["x","scaleX","originX"],lW=["y","scaleY","originY"];function DP(n,e,t,r){kP(n.x,e,aW,t?t.x:void 0,r?r.x:void 0),kP(n.y,e,lW,t?t.y:void 0,r?r.y:void 0)}function NP(n){return n.translate===0&&n.scale===1}function ok(n){return NP(n.x)&&NP(n.y)}function uW(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function ak(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function VP(n){return cr(n.x)/cr(n.y)}class cW{constructor(){this.members=[]}add(e){qw(this.members,e),e.scheduleRender()}remove(e){if(Gw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OP(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:m}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=n.x.scale*e.x,u=n.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const dW=(n,e)=>n.depth-e.depth;class hW{constructor(){this.children=[],this.isDirty=!1}add(e){qw(this.children,e),this.isDirty=!0}remove(e){Gw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dW),this.isDirty=!1,this.children.forEach(e)}}function fW(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Ji(r),n(s-e))};return Et.read(r,!0),()=>Ji(r)}function pW(n){window.MotionDebug&&window.MotionDebug.record(n)}function mW(n){return n instanceof SVGElement&&n.tagName!=="svg"}function gW(n,e,t){const r=Qn(n)?n:Eu(n);return r.start(Hw("",r,e,t)),r.animation}const MP=["","X","Y","Z"],yW={visibility:"hidden"},LP=1e3;let vW=0;const ca={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function lk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e?.()){this.id=vW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ca.totalNodes=ca.resolvedTargetDeltas=ca.recalculatedProjection=0,this.nodes.forEach(TW),this.nodes.forEach(CW),this.nodes.forEach(AW),this.nodes.forEach(EW),pW(ca)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new hW)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Kw),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mW(a),this.instance=a;const{layoutId:d,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const w=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=fW(w,250),zf.hasAnimatedSinceResize&&(zf.hasAnimatedSinceResize=!1,this.nodes.forEach(UP))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:w,hasRelativeTargetChanged:E,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||m.getDefaultTransition()||DW,{onLayoutAnimationStart:C,onLayoutAnimationComplete:j}=m.getProps(),O=!this.targetLayout||!ak(this.targetLayout,x)||E,F=!w&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||w&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,F);const z={...Ww(R,"layout"),onPlay:C,onComplete:j};(m.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else w||UP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ji(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bW),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(FP);return}this.isUpdating||this.nodes.forEach(SW),this.isUpdating=!1,this.nodes.forEach(PW),this.nodes.forEach(_W),this.nodes.forEach(wW),this.clearAllSnapshots();const u=performance.now();Sn.delta=vo(0,1e3/60,u-Sn.timestamp),Sn.timestamp=u,Sn.isProcessing=!0,xy.update.process(Sn),xy.preRender.process(Sn),xy.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(IW),this.sharedNodes.forEach(xW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!ok(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&(u||ua(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),NW(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Xt();const u=a.measureViewportBox(),{scroll:d}=this.root;return d&&(qs(u.x,d.offset.x),qs(u.y,d.offset.y)),u}removeElementScroll(a){const u=Xt();_r(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:g}=h;if(h!==this.root&&m&&g.layoutScroll){if(m.isRoot){_r(u,a);const{scroll:w}=this.root;w&&(qs(u.x,-w.offset.x),qs(u.y,-w.offset.y))}qs(u.x,m.offset.x),qs(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const d=Xt();_r(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Kl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ua(m.latestValues)&&Kl(d,m.latestValues)}return ua(this.latestValues)&&Kl(d,this.latestValues),d}removeTransform(a){const u=Xt();_r(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ua(h.latestValues))continue;Kv(h.latestValues)&&h.updateSnapshot();const m=Xt(),g=h.measurePageBox();_r(m,g),DP(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return ua(this.latestValues)&&DP(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:w}=this.options;if(!(!this.layout||!(g||w))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),od(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xt(),this.targetWithTransforms=Xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Vz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),ek(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),od(this.relativeTargetOrigin,this.target,E.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ca.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Kv(this.parent.latestValues)||ZR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;_r(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,E=this.treeScale.y;zz(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:x}=u;if(!x){this.projectionTransform&&(this.projectionDelta=Gl(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Gl(),this.projectionDeltaWithTransform=Gl());const R=this.projectionTransform;sd(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=OP(this.projectionDelta,this.treeScale),(this.projectionTransform!==R||this.treeScale.x!==w||this.treeScale.y!==E)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),ca.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=Gl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const w=Xt(),E=d?d.source:void 0,x=this.layout?this.layout.source:void 0,R=E!==x,C=this.getStack(),j=!C||C.members.length<=1,O=!!(R&&!j&&this.options.crossfade===!0&&!this.path.some(kW));this.animationProgress=0;let F;this.mixTargetDelta=z=>{const ne=z/1e3;jP(g.x,a.x,ne),jP(g.y,a.y,ne),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(od(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RW(this.relativeTarget,this.relativeTargetOrigin,w,ne),F&&uW(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=Xt()),_r(F,this.relativeTarget)),R&&(this.animationValues=m,rW(m,h,this.latestValues,ne,O,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ji(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{zf.hasAnimatedSinceResize=!0,this.currentAnimation=gW(0,LP,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(LP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:m}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&uk(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Xt();const g=cr(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const w=cr(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+w}_r(u,d),Kl(u,m),sd(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new cW),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const h={};for(let m=0;m<MP.length;m++){const g="rotate"+MP[m];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const m in h)a.setStaticValue(m,h[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yW;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=$f(a?.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=$f(a?.pointerEvents)||""),this.hasProjected&&!ua(this.latestValues)&&(R.transform=m?m({},""):"none",this.hasProjected=!1),R}const w=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=OP(this.projectionDeltaWithTransform,this.treeScale,w),m&&(h.transform=m(w,h.transform));const{x:E,y:x}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${x.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(u=w.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:h.opacity=g===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const R in xp){if(w[R]===void 0)continue;const{correct:C,applyTo:j}=xp[R],O=h.transform==="none"?w[R]:C(w[R],g);if(j){const F=j.length;for(let z=0;z<F;z++)h[j[z]]=O}else h[R]=O}return this.options.layoutId&&(h.pointerEvents=g===this?$f(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(FP),this.root.sharedNodes.clear()}}}function _W(n){n.updateLayout()}function wW(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?wr(g=>{const w=a?t.measuredBox[g]:t.layoutBox[g],E=cr(w);w.min=r[g].min,w.max=w.min+E}):uk(s,t.layoutBox,r)&&wr(g=>{const w=a?t.measuredBox[g]:t.layoutBox[g],E=cr(r[g]);w.max=w.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+E)});const u=Gl();sd(u,r,t.layoutBox);const d=Gl();a?sd(d,n.applyTransform(i,!0),t.measuredBox):sd(d,r,t.layoutBox);const h=!ok(u);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:w,layout:E}=g;if(w&&E){const x=Xt();od(x,t.layoutBox,w.layoutBox);const R=Xt();od(R,r,E.layoutBox),ak(x,R)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=x,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function TW(n){ca.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function EW(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function IW(n){n.clearSnapshot()}function FP(n){n.clearMeasurements()}function SW(n){n.isLayoutDirty=!1}function PW(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function UP(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function CW(n){n.resolveTargetDelta()}function AW(n){n.calcProjection()}function bW(n){n.resetRotation()}function xW(n){n.removeLeadSnapshot()}function jP(n,e,t){n.translate=Rt(e.translate,0,t),n.scale=Rt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function BP(n,e,t,r){n.min=Rt(e.min,t.min,r),n.max=Rt(e.max,t.max,r)}function RW(n,e,t,r){BP(n.x,e.x,t.x,r),BP(n.y,e.y,t.y,r)}function kW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const DW={duration:.45,ease:[.4,0,.1,1]},$P=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),zP=$P("applewebkit/")&&!$P("chrome/")?Math.round:$t;function WP(n){n.min=zP(n.min),n.max=zP(n.max)}function NW(n){WP(n.x),WP(n.y)}function uk(n,e,t){return n==="position"||n==="preserve-aspect"&&!qv(VP(e),VP(t),.2)}const VW=lk({attachResizeListener:(n,e)=>Wi(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jy={current:void 0},ck=lk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!jy.current){const n=new VW({});n.mount(window),n.setOptions({layoutScroll:!0}),jy.current=n}return jy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),OW={pan:{Feature:Xz},drag:{Feature:Yz,ProjectionNode:ck,MeasureLayout:rk}},MW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function LW(n){const e=MW.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Yv(n,e,t=1){const[r,i]=LW(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return qR(a)?parseFloat(a):a}else return Uv(i)?Yv(i,e,t+1):i}function FW(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!Uv(s))return;const a=Yv(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!Uv(s))continue;const a=Yv(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const UW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),dk=n=>UW.has(n),jW=n=>Object.keys(n).some(dk),HP=n=>n===Ba||n===Oe,qP=(n,e)=>parseFloat(n.split(", ")[e]),GP=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return qP(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?qP(s[1],n):0}},BW=new Set(["x","y","z"]),$W=zd.filter(n=>!BW.has(n));function zW(n){const e=[];return $W.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Iu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:GP(4,13),y:GP(5,14)};Iu.translateX=Iu.x;Iu.translateY=Iu.y;const WW=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,u={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{u[h]=Iu[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const m=e.getValue(h);m&&m.jump(u[h]),n[h]=Iu[h](d,s)}),n},HW=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(dk);let s=[],a=!1;const u=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let m=t[d],g=Lc(m);const w=e[d];let E;if(kp(w)){const x=w.length,R=w[0]===null?1:0;m=w[R],g=Lc(m);for(let C=R;C<x&&w[C]!==null;C++)E?Uw(Lc(w[C])===E):E=Lc(w[C])}else E=Lc(w);if(g!==E)if(HP(g)&&HP(E)){const x=h.get();typeof x=="string"&&h.set(parseFloat(x)),typeof w=="string"?e[d]=parseFloat(w):Array.isArray(w)&&E===Oe&&(e[d]=w.map(parseFloat))}else g?.transform&&E?.transform&&(m===0||w===0)?m===0?h.set(E.transform(m)):e[d]=g.transform(w):(a||(s=zW(n),a=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(w))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,h=WW(e,n,u);return s.length&&s.forEach(([m,g])=>{n.getValue(m).set(g)}),n.render(),Im&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function qW(n,e,t,r){return jW(e)?HW(n,e,t,r):{target:e,transitionEnd:r}}const GW=(n,e,t,r)=>{const i=FW(n,e,r);return e=i.target,r=i.transitionEnd,qW(n,e,t,r)},Xv={current:null},hk={current:!1};function KW(){if(hk.current=!0,!!Im)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Xv.current=n.matches;n.addListener(e),e()}else Xv.current=!1}function QW(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(Qn(s))n.addValue(i,s),Op(r)&&r.add(i);else if(Qn(a))n.addValue(i,Eu(s,{owner:n})),Op(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const u=n.getValue(i);!u.hasAnimated&&u.set(s)}else{const u=n.getStaticValue(i);n.addValue(i,Eu(u!==void 0?u:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const KP=new WeakMap,fk=Object.keys(Cd),YW=fk.length,QP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],XW=kw.length;class JW{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Et.render(this.render,!1,!0);const{latestValues:u,renderState:d}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=Pm(t),this.isVariantNode=X1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{});for(const g in m){const w=m[g];u[g]!==void 0&&Qn(w)&&(w.set(u[g],!1),Op(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,KP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),hk.current||KW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){KP.delete(this.current),this.projection&&this.projection.unmount(),Ji(this.notifyUpdate),Ji(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=ja.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Et.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,u;for(let d=0;d<YW;d++){const h=fk[d],{isEnabled:m,Feature:g,ProjectionNode:w,MeasureLayout:E}=Cd[h];w&&(a=w),m(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),E&&(u=E))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:m,dragConstraints:g,layoutScroll:w,layoutRoot:E}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!m||g&&Hl(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:w,layoutRoot:E})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<QP.length;r++){const i=QP[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=QW(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<XW;r++){const i=kw[r],s=this.props[i];(Pd(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Eu(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=Fw(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Qn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Kw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class pk extends JW{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=mz(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){fz(this,r,a);const u=GW(this,r,a,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function ZW(n){return window.getComputedStyle(n)}class eH extends pk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ja.has(t)){const r=zw(t);return r&&r.default||0}else{const r=ZW(e),i=(nR(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return tk(e,t)}build(e,t,r,i){Nw(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Lw(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){lR(e,t,r,i)}}class tH extends pk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ja.has(t)){const r=zw(t);return r&&r.default||0}return t=uR.has(t)?t:xw(t),e.getAttribute(t)}measureInstanceViewportBox(){return Xt()}scrapeMotionValuesFromProps(e,t){return dR(e,t)}build(e,t,r,i){Ow(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){cR(e,t,r,i)}mount(e){this.isSVGTag=Mw(e.tagName),super.mount(e)}}const nH=(n,e)=>Dw(n)?new tH(e,{enableHardwareAcceleration:!1}):new eH(e,{enableHardwareAcceleration:!0}),rH={layout:{ProjectionNode:ck,MeasureLayout:rk}},iH={...Rz,...Y9,...OW,...rH},If=i9((n,e)=>L9(n,e,iH,nH));function sH(){const[n,e]=b.useState(!1),[t,r]=b.useState(null);b.useEffect(()=>{if(!("serviceWorker"in navigator))return;const s=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",s);let a,u;const d=h=>{h&&h.addEventListener("statechange",()=>{h.state==="installed"&&navigator.serviceWorker.controller&&(r(h),e(!0))})};return navigator.serviceWorker.ready.then(h=>{a=h,h.waiting&&(r(h.waiting),e(!0)),u=()=>{d(h.installing)},h.addEventListener("updatefound",u)}),()=>{navigator.serviceWorker.removeEventListener("controllerchange",s),a&&u&&a.removeEventListener("updatefound",u)}},[]);const i=()=>{t&&t.postMessage({type:"SKIP_WAITING"}),e(!1)};return n?G.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center",children:G.jsxs("div",{className:"w-full max-w-sm rounded-lg bg-secundario p-4 text-white shadow-lg",children:[G.jsx("p",{className:"mb-3 text-sm",children:"Nueva versin disponible!"}),G.jsxs("div",{className:"flex items-center justify-end gap-2",children:[G.jsx(eu,{onClick:()=>e(!1),variant:"secondary",children:"Despus"}),G.jsx(eu,{onClick:i,className:"bg-white text-secundario hover:bg-white/90",children:"Actualizar"})]})]})}):null}function oH(){return b.useEffect(()=>{const n=()=>{const e=window.innerHeight*.01;document.documentElement.style.setProperty("--app-vh",`${e}px`)};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[]),null}const aH=b.lazy(()=>vi(()=>import("./AuthPage-CUbkr3hY.js"),__vite__mapDeps([0,1,2,3,4]))),lH=b.lazy(()=>vi(()=>import("./DashboardPage-BDNTuhm0.js"),__vite__mapDeps([5,6,7,8,9,1,10,2,11,4,12]))),uH=b.lazy(()=>vi(()=>import("./ArchivedCyclesPage-NGcgQkXK.js"),__vite__mapDeps([13,8,14,9,1,7]))),cH=b.lazy(()=>vi(()=>import("./CycleDetailPage-DgsvXMVG.js"),__vite__mapDeps([15,14,9,8,16,6,7,1,10,2,11,4,17]))),dH=b.lazy(()=>vi(()=>import("./SettingsPage-EqYCCQx3.js"),__vite__mapDeps([18,1,2,11,8,3]))),hH=b.lazy(()=>vi(()=>import("./ChartPage-Cp2uqr2j.js"),__vite__mapDeps([19,11,8,10,1,2,9,4,12,17]))),fH=b.lazy(()=>vi(()=>import("./RecordsPage-BS9mtmw8.js"),__vite__mapDeps([16,6,7,8,9,1,10,2,11,4,14])));function Ml({children:n}){const{user:e}=_m();return e?n:G.jsx(zy,{to:"/auth",replace:!0})}function pH(){const{user:n,loadingAuth:e}=_m(),t=wo();if(e)return G.jsx(Dv,{children:G.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[G.jsx(If.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),G.jsx(If.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]})});const r=n?G.jsx(la,{children:G.jsx("div",{className:"flex min-h-app items-center justify-center p-4 text-fertiliapp-fuerte",children:"Cargando..."})}):G.jsxs("div",{className:"flex min-h-app flex-col items-center justify-center space-y-4 px-4",children:[G.jsx(If.div,{className:"h-8 w-8 rounded-full bg-fertiliapp",animate:{opacity:[.4,1,.4]},transition:{duration:1.2,repeat:1/0}}),G.jsx(If.p,{className:"font-medium text-fertiliapp-fuerte",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Cargando aplicacin..."})]});return G.jsx(Dv,{children:G.jsx(b.Suspense,{fallback:r,children:G.jsx(q6,{children:G.jsx(XB,{FallbackComponent:m1,children:G.jsxs(IN,{children:[G.jsx(ji,{path:"/auth",element:n?G.jsx(zy,{to:"/",replace:!0}):G.jsx(aH,{})}),G.jsx(ji,{path:"/",element:G.jsx(Ml,{children:G.jsx(la,{children:G.jsx(lH,{})})})}),G.jsx(ji,{path:"/chart/:cycleId?",element:G.jsx(Ml,{children:G.jsx(hH,{})})}),G.jsx(ji,{path:"/records",element:G.jsx(Ml,{children:G.jsx(la,{children:G.jsx(fH,{})})})}),G.jsx(ji,{path:"/archived-cycles",element:G.jsx(Ml,{children:G.jsx(la,{children:G.jsx(uH,{})})})}),G.jsx(ji,{path:"/settings",element:G.jsx(Ml,{children:G.jsx(la,{children:G.jsx(dH,{})})})}),G.jsx(ji,{path:"/cycle/:cycleId",element:G.jsx(Ml,{children:G.jsx(la,{children:G.jsx(cH,{})})})}),G.jsx(ji,{path:"*",element:G.jsx(zy,{to:n?"/":"/auth",replace:!0})})]})},t.pathname)})})})}function mH(){return G.jsxs(kN,{basename:"/",children:[G.jsx(oH,{}),G.jsx(sH,{}),G.jsxs(A4,{children:[G.jsx(QB,{children:G.jsx(YB,{children:G.jsx(UN,{children:G.jsx(pH,{})})})}),G.jsx(G5,{})]})]})}if(typeof window<"u"){const{hostname:n}=window.location;if(n.endsWith(".firebaseapp.com")){const e=new URL(window.location.href);e.hostname=n.replace(".firebaseapp.com",".web.app"),window.location.replace(e.toString())}}RD.createRoot(document.getElementById("root")).render(G.jsx(Jt.StrictMode,{children:G.jsx(mH,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=new URL("sw.js","/");navigator.serviceWorker.register(n).catch(e=>{console.error("Service worker registration failed:",e)})});export{xn as $,e6 as A,eu as B,n6 as C,I1 as D,or as E,Ma as F,Sd as G,Ua as H,EH as I,WB as J,r6 as K,VN as L,t_ as M,wo as N,P4 as O,wi as P,la as Q,Jt as R,k4 as S,q5 as T,i6 as U,O4 as V,W6 as W,s6 as X,gt as Y,Lt as Z,vi as _,s_ as a,b4 as a0,Nu as a1,wp as a2,K5 as a3,Et as a4,A9 as a5,bw as a6,J1 as a7,Wx as a8,V4 as a9,wm as aa,T5 as ab,E1 as ac,_1 as ad,b3 as ae,Ey as af,Rc as ag,kc as ah,dj as ai,p1 as aj,Z6 as ak,S5 as al,L6 as am,e_ as an,IH as ao,TH as ap,r1 as aq,gH as ar,Jv as as,_e as at,cw as b,Vu as c,gn as d,Be as e,Me as f,Vt as g,hk as h,KW as i,G as j,M4 as k,Vn as l,If as m,dw as n,t6 as o,Xv as p,yH as q,b as r,Ed as s,n1 as t,_m as u,Dj as v,Xi as w,jf as x,Oa as y,g1 as z};
